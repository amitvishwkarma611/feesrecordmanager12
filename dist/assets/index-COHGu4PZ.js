(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function h0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jm={exports:{}},ec={};var h_;function Yb(){if(h_)return ec;h_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:h,ref:o!==void 0?o:null,props:u}}return ec.Fragment=e,ec.jsx=t,ec.jsxs=t,ec}var f_;function Kb(){return f_||(f_=1,jm.exports=Yb()),jm.exports}var c=Kb(),km={exports:{}},$e={};var m_;function Xb(){if(m_)return $e;m_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),b=Symbol.iterator;function k(R){return R===null||typeof R!="object"?null:(R=b&&R[b]||R["@@iterator"],typeof R=="function"?R:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,P={};function K(R,G,ce){this.props=R,this.context=G,this.refs=P,this.updater=ce||O}K.prototype.isReactComponent={},K.prototype.setState=function(R,G){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,G,"setState")},K.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function V(){}V.prototype=K.prototype;function Q(R,G,ce){this.props=R,this.context=G,this.refs=P,this.updater=ce||O}var X=Q.prototype=new V;X.constructor=Q,B(X,K.prototype),X.isPureReactComponent=!0;var pe=Array.isArray;function ee(){}var N={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(R,G,ce){var _e=ce.ref;return{$$typeof:s,type:R,key:G,ref:_e!==void 0?_e:null,props:ce}}function j(R,G){return x(R.type,G,R.props)}function M(R){return typeof R=="object"&&R!==null&&R.$$typeof===s}function U(R){var G={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ce){return G[ce]})}var D=/\/+/g;function Ie(R,G){return typeof R=="object"&&R!==null&&R.key!=null?U(""+R.key):G.toString(36)}function ze(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(ee,ee):(R.status="pending",R.then(function(G){R.status==="pending"&&(R.status="fulfilled",R.value=G)},function(G){R.status==="pending"&&(R.status="rejected",R.reason=G)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function q(R,G,ce,_e,oe){var Ce=typeof R;(Ce==="undefined"||Ce==="boolean")&&(R=null);var Me=!1;if(R===null)Me=!0;else switch(Ce){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(R.$$typeof){case s:case e:Me=!0;break;case E:return Me=R._init,q(Me(R._payload),G,ce,_e,oe)}}if(Me)return oe=oe(R),Me=_e===""?"."+Ie(R,0):_e,pe(oe)?(ce="",Me!=null&&(ce=Me.replace(D,"$&/")+"/"),q(oe,G,ce,"",function(ae){return ae})):oe!=null&&(M(oe)&&(oe=j(oe,ce+(oe.key==null||R&&R.key===oe.key?"":(""+oe.key).replace(D,"$&/")+"/")+Me)),G.push(oe)),1;Me=0;var Je=_e===""?".":_e+":";if(pe(R))for(var de=0;de<R.length;de++)_e=R[de],Ce=Je+Ie(_e,de),Me+=q(_e,G,ce,Ce,oe);else if(de=k(R),typeof de=="function")for(R=de.call(R),de=0;!(_e=R.next()).done;)_e=_e.value,Ce=Je+Ie(_e,de++),Me+=q(_e,G,ce,Ce,oe);else if(Ce==="object"){if(typeof R.then=="function")return q(ze(R),G,ce,_e,oe);throw G=String(R),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Me}function re(R,G,ce){if(R==null)return R;var _e=[],oe=0;return q(R,_e,"","",function(Ce){return G.call(ce,Ce,oe++)}),_e}function xe(R){if(R._status===-1){var G=R._result;G=G(),G.then(function(ce){(R._status===0||R._status===-1)&&(R._status=1,R._result=ce)},function(ce){(R._status===0||R._status===-1)&&(R._status=2,R._result=ce)}),R._status===-1&&(R._status=0,R._result=G)}if(R._status===1)return R._result.default;throw R._result}var ve=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},z={map:re,forEach:function(R,G,ce){re(R,function(){G.apply(this,arguments)},ce)},count:function(R){var G=0;return re(R,function(){G++}),G},toArray:function(R){return re(R,function(G){return G})||[]},only:function(R){if(!M(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return $e.Activity=w,$e.Children=z,$e.Component=K,$e.Fragment=t,$e.Profiler=o,$e.PureComponent=Q,$e.StrictMode=i,$e.Suspense=g,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,$e.__COMPILER_RUNTIME={__proto__:null,c:function(R){return N.H.useMemoCache(R)}},$e.cache=function(R){return function(){return R.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(R,G,ce){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var _e=B({},R.props),oe=R.key;if(G!=null)for(Ce in G.key!==void 0&&(oe=""+G.key),G)!A.call(G,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&G.ref===void 0||(_e[Ce]=G[Ce]);var Ce=arguments.length-2;if(Ce===1)_e.children=ce;else if(1<Ce){for(var Me=Array(Ce),Je=0;Je<Ce;Je++)Me[Je]=arguments[Je+2];_e.children=Me}return x(R.type,oe,_e)},$e.createContext=function(R){return R={$$typeof:h,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:u,_context:R},R},$e.createElement=function(R,G,ce){var _e,oe={},Ce=null;if(G!=null)for(_e in G.key!==void 0&&(Ce=""+G.key),G)A.call(G,_e)&&_e!=="key"&&_e!=="__self"&&_e!=="__source"&&(oe[_e]=G[_e]);var Me=arguments.length-2;if(Me===1)oe.children=ce;else if(1<Me){for(var Je=Array(Me),de=0;de<Me;de++)Je[de]=arguments[de+2];oe.children=Je}if(R&&R.defaultProps)for(_e in Me=R.defaultProps,Me)oe[_e]===void 0&&(oe[_e]=Me[_e]);return x(R,Ce,oe)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(R){return{$$typeof:p,render:R}},$e.isValidElement=M,$e.lazy=function(R){return{$$typeof:E,_payload:{_status:-1,_result:R},_init:xe}},$e.memo=function(R,G){return{$$typeof:y,type:R,compare:G===void 0?null:G}},$e.startTransition=function(R){var G=N.T,ce={};N.T=ce;try{var _e=R(),oe=N.S;oe!==null&&oe(ce,_e),typeof _e=="object"&&_e!==null&&typeof _e.then=="function"&&_e.then(ee,ve)}catch(Ce){ve(Ce)}finally{G!==null&&ce.types!==null&&(G.types=ce.types),N.T=G}},$e.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},$e.use=function(R){return N.H.use(R)},$e.useActionState=function(R,G,ce){return N.H.useActionState(R,G,ce)},$e.useCallback=function(R,G){return N.H.useCallback(R,G)},$e.useContext=function(R){return N.H.useContext(R)},$e.useDebugValue=function(){},$e.useDeferredValue=function(R,G){return N.H.useDeferredValue(R,G)},$e.useEffect=function(R,G){return N.H.useEffect(R,G)},$e.useEffectEvent=function(R){return N.H.useEffectEvent(R)},$e.useId=function(){return N.H.useId()},$e.useImperativeHandle=function(R,G,ce){return N.H.useImperativeHandle(R,G,ce)},$e.useInsertionEffect=function(R,G){return N.H.useInsertionEffect(R,G)},$e.useLayoutEffect=function(R,G){return N.H.useLayoutEffect(R,G)},$e.useMemo=function(R,G){return N.H.useMemo(R,G)},$e.useOptimistic=function(R,G){return N.H.useOptimistic(R,G)},$e.useReducer=function(R,G,ce){return N.H.useReducer(R,G,ce)},$e.useRef=function(R){return N.H.useRef(R)},$e.useState=function(R){return N.H.useState(R)},$e.useSyncExternalStore=function(R,G,ce){return N.H.useSyncExternalStore(R,G,ce)},$e.useTransition=function(){return N.H.useTransition()},$e.version="19.2.0",$e}var p_;function Ip(){return p_||(p_=1,km.exports=Xb()),km.exports}var I=Ip();const Qb=h0(I);var Mm={exports:{}},tc={},Pm={exports:{}},Om={};var g_;function Wb(){return g_||(g_=1,(function(s){function e(q,re){var xe=q.length;q.push(re);e:for(;0<xe;){var ve=xe-1>>>1,z=q[ve];if(0<o(z,re))q[ve]=re,q[xe]=z,xe=ve;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var re=q[0],xe=q.pop();if(xe!==re){q[0]=xe;e:for(var ve=0,z=q.length,R=z>>>1;ve<R;){var G=2*(ve+1)-1,ce=q[G],_e=G+1,oe=q[_e];if(0>o(ce,xe))_e<z&&0>o(oe,ce)?(q[ve]=oe,q[_e]=xe,ve=_e):(q[ve]=ce,q[G]=xe,ve=G);else if(_e<z&&0>o(oe,xe))q[ve]=oe,q[_e]=xe,ve=_e;else break e}}return re}function o(q,re){var xe=q.sortIndex-re.sortIndex;return xe!==0?xe:q.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();s.unstable_now=function(){return h.now()-p}}var g=[],y=[],E=1,w=null,b=3,k=!1,O=!1,B=!1,P=!1,K=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function X(q){for(var re=t(y);re!==null;){if(re.callback===null)i(y);else if(re.startTime<=q)i(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(y)}}function pe(q){if(B=!1,X(q),!O)if(t(g)!==null)O=!0,ee||(ee=!0,U());else{var re=t(y);re!==null&&ze(pe,re.startTime-q)}}var ee=!1,N=-1,A=5,x=-1;function j(){return P?!0:!(s.unstable_now()-x<A)}function M(){if(P=!1,ee){var q=s.unstable_now();x=q;var re=!0;try{e:{O=!1,B&&(B=!1,V(N),N=-1),k=!0;var xe=b;try{t:{for(X(q),w=t(g);w!==null&&!(w.expirationTime>q&&j());){var ve=w.callback;if(typeof ve=="function"){w.callback=null,b=w.priorityLevel;var z=ve(w.expirationTime<=q);if(q=s.unstable_now(),typeof z=="function"){w.callback=z,X(q),re=!0;break t}w===t(g)&&i(g),X(q)}else i(g);w=t(g)}if(w!==null)re=!0;else{var R=t(y);R!==null&&ze(pe,R.startTime-q),re=!1}}break e}finally{w=null,b=xe,k=!1}re=void 0}}finally{re?U():ee=!1}}}var U;if(typeof Q=="function")U=function(){Q(M)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ie=D.port2;D.port1.onmessage=M,U=function(){Ie.postMessage(null)}}else U=function(){K(M,0)};function ze(q,re){N=K(function(){q(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(q){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var xe=b;b=re;try{return q()}finally{b=xe}},s.unstable_requestPaint=function(){P=!0},s.unstable_runWithPriority=function(q,re){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var xe=b;b=q;try{return re()}finally{b=xe}},s.unstable_scheduleCallback=function(q,re,xe){var ve=s.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?ve+xe:ve):xe=ve,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=xe+z,q={id:E++,callback:re,priorityLevel:q,startTime:xe,expirationTime:z,sortIndex:-1},xe>ve?(q.sortIndex=xe,e(y,q),t(g)===null&&q===t(y)&&(B?(V(N),N=-1):B=!0,ze(pe,xe-ve))):(q.sortIndex=z,e(g,q),O||k||(O=!0,ee||(ee=!0,U()))),q},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(q){var re=b;return function(){var xe=b;b=re;try{return q.apply(this,arguments)}finally{b=xe}}}})(Om)),Om}var y_;function Jb(){return y_||(y_=1,Pm.exports=Wb()),Pm.exports}var Lm={exports:{}},xn={};var v_;function Zb(){if(v_)return xn;v_=1;var s=Ip();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,xn.createPortal=function(g,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,E)},xn.flushSync=function(g){var y=h.T,E=i.p;try{if(h.T=null,i.p=2,g)return g()}finally{h.T=y,i.p=E,i.d.f()}},xn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,i.d.C(g,y))},xn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},xn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var E=y.as,w=p(E,y.crossOrigin),b=typeof y.integrity=="string"?y.integrity:void 0,k=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?i.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:b,fetchPriority:k}):E==="script"&&i.d.X(g,{crossOrigin:w,integrity:b,fetchPriority:k,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},xn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=p(y.as,y.crossOrigin);i.d.M(g,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&i.d.M(g)},xn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,w=p(E,y.crossOrigin);i.d.L(g,E,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},xn.preloadModule=function(g,y){if(typeof g=="string")if(y){var E=p(y.as,y.crossOrigin);i.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else i.d.m(g)},xn.requestFormReset=function(g){i.d.r(g)},xn.unstable_batchedUpdates=function(g,y){return g(y)},xn.useFormState=function(g,y,E){return h.H.useFormState(g,y,E)},xn.useFormStatus=function(){return h.H.useHostTransitionStatus()},xn.version="19.2.0",xn}var E_;function eA(){if(E_)return Lm.exports;E_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Lm.exports=Zb(),Lm.exports}var __;function tA(){if(__)return tc;__=1;var s=Jb(),e=Ip(),t=eA();function i(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)a+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var a=n,r=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(r=a.return),n=a.return;while(n)}return a.tag===3?r:null}function h(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function p(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function g(n){if(u(n)!==n)throw Error(i(188))}function y(n){var a=n.alternate;if(!a){if(a=u(n),a===null)throw Error(i(188));return a!==n?null:n}for(var r=n,l=a;;){var f=r.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){r=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===r)return g(f),n;if(m===l)return g(f),a;m=m.sibling}throw Error(i(188))}if(r.return!==l.return)r=f,l=m;else{for(var _=!1,T=f.child;T;){if(T===r){_=!0,r=f,l=m;break}if(T===l){_=!0,l=f,r=m;break}T=T.sibling}if(!_){for(T=m.child;T;){if(T===r){_=!0,r=m,l=f;break}if(T===l){_=!0,l=m,r=f;break}T=T.sibling}if(!_)throw Error(i(189))}}if(r.alternate!==l)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?n:a}function E(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=E(n),a!==null)return a;n=n.sibling}return null}var w=Object.assign,b=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=M&&n[M]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function Ie(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case K:return"Profiler";case P:return"StrictMode";case pe:return"Suspense";case ee:return"SuspenseList";case x:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case Q:return n.displayName||"Context";case V:return(n._context.displayName||"Context")+".Consumer";case X:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return a=n.displayName||null,a!==null?a:Ie(n.type)||"Memo";case A:a=n._payload,n=n._init;try{return Ie(n(a))}catch{}}return null}var ze=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},ve=[],z=-1;function R(n){return{current:n}}function G(n){0>z||(n.current=ve[z],ve[z]=null,z--)}function ce(n,a){z++,ve[z]=n.current,n.current=a}var _e=R(null),oe=R(null),Ce=R(null),Me=R(null);function Je(n,a){switch(ce(Ce,a),ce(oe,n),ce(_e,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?PE(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=PE(a),n=OE(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}G(_e),ce(_e,n)}function de(){G(_e),G(oe),G(Ce)}function ae(n){n.memoizedState!==null&&ce(Me,n);var a=_e.current,r=OE(a,n.type);a!==r&&(ce(oe,n),ce(_e,r))}function $(n){oe.current===n&&(G(_e),G(oe)),Me.current===n&&(G(Me),Ql._currentValue=xe)}var ye,me;function H(n){if(ye===void 0)try{throw Error()}catch(r){var a=r.stack.trim().match(/\n( *(at )?)/);ye=a&&a[1]||"",me=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ye+n+me}var ne=!1;function Se(n,a){if(!n||ne)return"";ne=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(a){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ie){var te=ie}Reflect.construct(n,[],fe)}else{try{fe.call()}catch(ie){te=ie}n.call(fe.prototype)}}else{try{throw Error()}catch(ie){te=ie}(fe=n())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),_=m[0],T=m[1];if(_&&T){var L=_.split(`
`),Z=T.split(`
`);for(f=l=0;l<L.length&&!L[l].includes("DetermineComponentFrameRoot");)l++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(l===L.length||f===Z.length)for(l=L.length-1,f=Z.length-1;1<=l&&0<=f&&L[l]!==Z[f];)f--;for(;1<=l&&0<=f;l--,f--)if(L[l]!==Z[f]){if(l!==1||f!==1)do if(l--,f--,0>f||L[l]!==Z[f]){var ue=`
`+L[l].replace(" at new "," at ");return n.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",n.displayName)),ue}while(1<=l&&0<=f);break}}}finally{ne=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?H(r):""}function Ne(n,a){switch(n.tag){case 26:case 27:case 5:return H(n.type);case 16:return H("Lazy");case 13:return n.child!==a&&a!==null?H("Suspense Fallback"):H("Suspense");case 19:return H("SuspenseList");case 0:case 15:return Se(n.type,!1);case 11:return Se(n.type.render,!1);case 1:return Se(n.type,!0);case 31:return H("Activity");default:return""}}function Te(n){try{var a="",r=null;do a+=Ne(n,r),r=n,n=n.return;while(n);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var be=Object.prototype.hasOwnProperty,le=s.unstable_scheduleCallback,we=s.unstable_cancelCallback,qe=s.unstable_shouldYield,Ze=s.unstable_requestPaint,Ue=s.unstable_now,ht=s.unstable_getCurrentPriorityLevel,qt=s.unstable_ImmediatePriority,dn=s.unstable_UserBlockingPriority,Nt=s.unstable_NormalPriority,Rt=s.unstable_LowPriority,Gn=s.unstable_IdlePriority,pa=s.log,Ge=s.unstable_setDisableYieldValue,Pe=null,gt=null;function yt(n){if(typeof pa=="function"&&Ge(n),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Pe,n)}catch{}}var wt=Math.clz32?Math.clz32:Hc,Qa=Math.log,Ms=Math.LN2;function Hc(n){return n>>>=0,n===0?32:31-(Qa(n)/Ms|0)|0}var Ps=256,Xi=262144,Xt=4194304;function Os(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ls(n,a,r){var l=n.pendingLanes;if(l===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var T=l&134217727;return T!==0?(l=T&~m,l!==0?f=Os(l):(_&=T,_!==0?f=Os(_):r||(r=T&~n,r!==0&&(f=Os(r))))):(T=l&~m,T!==0?f=Os(T):_!==0?f=Os(_):r||(r=l&~n,r!==0&&(f=Os(r)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,r=a&-a,m>=r||m===32&&(r&4194048)!==0)?a:f}function Es(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function Ph(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gc(){var n=Xt;return Xt<<=1,(Xt&62914560)===0&&(Xt=4194304),n}function Us(n){for(var a=[],r=0;31>r;r++)a.push(n);return a}function Qi(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Oh(n,a,r,l,f,m){var _=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var T=n.entanglements,L=n.expirationTimes,Z=n.hiddenUpdates;for(r=_&~r;0<r;){var ue=31-wt(r),fe=1<<ue;T[ue]=0,L[ue]=-1;var te=Z[ue];if(te!==null)for(Z[ue]=null,ue=0;ue<te.length;ue++){var ie=te[ue];ie!==null&&(ie.lane&=-536870913)}r&=~fe}l!==0&&Wi(n,l,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~a))}function Wi(n,a,r){n.pendingLanes|=a,n.suspendedLanes&=~a;var l=31-wt(a);n.entangledLanes|=a,n.entanglements[l]=n.entanglements[l]|1073741824|r&261930}function tl(n,a){var r=n.entangledLanes|=a;for(n=n.entanglements;r;){var l=31-wt(r),f=1<<l;f&a|n[l]&a&&(n[l]|=a),r&=~f}}function nl(n,a){var r=a&-a;return r=(r&42)!==0?1:Ji(r),(r&(n.suspendedLanes|a))!==0?0:r}function Ji(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ga(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function $c(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:i_(n.type))}function _s(n,a){var r=re.p;try{return re.p=n,a()}finally{re.p=r}}var Ss=Math.random().toString(36).slice(2),Qt="__reactFiber$"+Ss,hn="__reactProps$"+Ss,Vs="__reactContainer$"+Ss,Fr="__reactEvents$"+Ss,Lh="__reactListeners$"+Ss,Yc="__reactHandles$"+Ss,Kc="__reactResources$"+Ss,Fs="__reactMarker$"+Ss;function Br(n){delete n[Qt],delete n[hn],delete n[Fr],delete n[Lh],delete n[Yc]}function Bs(n){var a=n[Qt];if(a)return a;for(var r=n.parentNode;r;){if(a=r[Vs]||r[Qt]){if(r=a.alternate,a.child!==null||r!==null&&r.child!==null)for(n=qE(n);n!==null;){if(r=n[Qt])return r;n=qE(n)}return a}n=r,r=n.parentNode}return null}function ns(n){if(n=n[Qt]||n[Vs]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function $n(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(i(33))}function zs(n){var a=n[Kc];return a||(a=n[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Wt(n){n[Fs]=!0}var sl=new Set,al={};function qs(n,a){Hs(n,a),Hs(n+"Capture",a)}function Hs(n,a){for(al[n]=a,n=0;n<a.length;n++)sl.add(a[n])}var il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},ol={};function Xc(n){return be.call(ol,n)?!0:be.call(rl,n)?!1:il.test(n)?ol[n]=!0:(rl[n]=!0,!1)}function zr(n,a,r){if(Xc(a))if(r===null)n.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var l=a.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+r)}}function Yn(n,a,r){if(r===null)n.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+r)}}function Jt(n,a,r,l){if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(a,r,""+l)}}function fn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wa(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ll(n,a,r){var l=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,m=l.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return f.call(this)},set:function(_){r=""+_,m.call(this,_)}}),Object.defineProperty(n,a,{enumerable:l.enumerable}),{getValue:function(){return r},setValue:function(_){r=""+_},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function Et(n){if(!n._valueTracker){var a=Wa(n)?"checked":"value";n._valueTracker=ll(n,a,""+n[a])}}function Zi(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var r=a.getValue(),l="";return n&&(l=Wa(n)?n.checked?"true":"false":n.value),n=l,n!==r?(a.setValue(n),!0):!1}function Gs(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var er=/[\n"\\]/g;function kn(n){return n.replace(er,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function qr(n,a,r,l,f,m,_,T){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),a!=null?_==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+fn(a)):n.value!==""+fn(a)&&(n.value=""+fn(a)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),a!=null?cl(n,_,fn(a)):r!=null?cl(n,_,fn(r)):l!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+fn(T):n.removeAttribute("name")}function Qc(n,a,r,l,f,m,_,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),a!=null||r!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){Et(n);return}r=r!=null?""+fn(r):"",a=a!=null?""+fn(a):r,T||a===n.value||(n.value=a),n.defaultValue=a}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=T?n.checked:!!l,n.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_),Et(n)}function cl(n,a,r){a==="number"&&Gs(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Ja(n,a,r,l){if(n=n.options,a){a={};for(var f=0;f<r.length;f++)a["$"+r[f]]=!0;for(r=0;r<n.length;r++)f=a.hasOwnProperty("$"+n[r].value),n[r].selected!==f&&(n[r].selected=f),f&&l&&(n[r].defaultSelected=!0)}else{for(r=""+fn(r),a=null,f=0;f<n.length;f++){if(n[f].value===r){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}a!==null||n[f].disabled||(a=n[f])}a!==null&&(a.selected=!0)}}function Wc(n,a,r){if(a!=null&&(a=""+fn(a),a!==n.value&&(n.value=a),r==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=r!=null?""+fn(r):""}function Za(n,a,r,l){if(a==null){if(l!=null){if(r!=null)throw Error(i(92));if(ze(l)){if(1<l.length)throw Error(i(93));l=l[0]}r=l}r==null&&(r=""),a=r}r=fn(a),n.defaultValue=r,l=n.textContent,l===r&&l!==""&&l!==null&&(n.value=l),Et(n)}function Mn(n,a){if(a){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=a;return}}n.textContent=a}var Jc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(n,a,r){var l=a.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":l?n.setProperty(a,r):typeof r!="number"||r===0||Jc.has(a)?a==="float"?n.cssFloat=r:n[a]=(""+r).trim():n[a]=r+"px"}function dl(n,a,r){if(a!=null&&typeof a!="object")throw Error(i(62));if(n=n.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||a!=null&&a.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in a)l=a[f],a.hasOwnProperty(f)&&r[f]!==l&&ul(n,f,l)}else for(var m in a)a.hasOwnProperty(m)&&ul(n,m,a[m])}function Hr(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ei=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gr(n){return ei.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ws(){}var hl=null;function ss(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ti=null,$s=null;function tr(n){var a=ns(n);if(a&&(n=a.stateNode)){var r=n[hn]||null;e:switch(n=a.stateNode,a.type){case"input":if(qr(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),a=r.name,r.type==="radio"&&a!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+kn(""+a)+'"][type="radio"]'),a=0;a<r.length;a++){var l=r[a];if(l!==n&&l.form===n.form){var f=l[hn]||null;if(!f)throw Error(i(90));qr(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<r.length;a++)l=r[a],l.form===n.form&&Zi(l)}break e;case"textarea":Wc(n,r.value,r.defaultValue);break e;case"select":a=r.value,a!=null&&Ja(n,!!r.multiple,a,!1)}}}var $r=!1;function ni(n,a,r){if($r)return n(a,r);$r=!0;try{var l=n(a);return l}finally{if($r=!1,(ti!==null||$s!==null)&&($u(),ti&&(a=ti,n=$s,$s=ti=null,tr(a),n)))for(a=0;a<n.length;a++)tr(n[a])}}function Ts(n,a){var r=n.stateNode;if(r===null)return null;var l=r[hn]||null;if(l===null)return null;r=l[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(i(231,a,typeof r));return r}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nr=!1;if(as)try{var Tt={};Object.defineProperty(Tt,"passive",{get:function(){nr=!0}}),window.addEventListener("test",Tt,Tt),window.removeEventListener("test",Tt,Tt)}catch{nr=!1}var Ys=null,fl=null,sr=null;function ml(){if(sr)return sr;var n,a=fl,r=a.length,l,f="value"in Ys?Ys.value:Ys.textContent,m=f.length;for(n=0;n<r&&a[n]===f[n];n++);var _=r-n;for(l=1;l<=_&&a[r-l]===f[m-l];l++);return sr=f.slice(n,1<l?1-l:void 0)}function ar(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function ya(){return!0}function xs(){return!1}function gn(n){function a(r,l,f,m,_){this._reactName=r,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(r=n[T],this[T]=r?r(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ya:xs,this.isPropagationStopped=xs,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ya)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ya)},persist:function(){},isPersistent:ya}),a}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=gn(va),si=w({},va,{view:0,detail:0}),pl=gn(si),ai,Yr,Xs,Kr=w({},si,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ii,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xs&&(Xs&&n.type==="mousemove"?(ai=n.screenX-Xs.screenX,Yr=n.screenY-Xs.screenY):Yr=ai=0,Xs=n),ai)},movementY:function(n){return"movementY"in n?n.movementY:Yr}}),gl=gn(Kr),ir=w({},Kr,{dataTransfer:0}),eu=gn(ir),tu=w({},si,{relatedTarget:0}),rr=gn(tu),yl=w({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=gn(yl),Xr=w({},va,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),su=gn(Xr),au=w({},va,{data:0}),Qs=gn(au),iu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lu(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=ou[n])?!!a[n]:!1}function ii(){return lu}var Rn=w({},si,{key:function(n){if(n.key){var a=iu[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=ar(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ru[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ii,charCode:function(n){return n.type==="keypress"?ar(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ar(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),cu=gn(Rn),uu=w({},Kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ea=gn(uu),d=w({},si,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ii}),v=gn(d),S=w({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=gn(S),W=w({},Kr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),se=gn(W),Ae=w({},va,{newState:0,oldState:0}),Ke=gn(Ae),Ht=[9,13,27,32],ft=as&&"CompositionEvent"in window,kt=null;as&&"documentMode"in document&&(kt=document.documentMode);var is=as&&"TextEvent"in window&&!kt,Ws=as&&(!ft||kt&&8<kt&&11>=kt),bs=" ",As=!1;function or(n,a){switch(n){case"keyup":return Ht.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qr(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Wr=!1;function yx(n,a){switch(n){case"compositionend":return Qr(a);case"keypress":return a.which!==32?null:(As=!0,bs);case"textInput":return n=a.data,n===bs&&As?null:n;default:return null}}function vx(n,a){if(Wr)return n==="compositionend"||!ft&&or(n,a)?(n=ml(),sr=fl=Ys=null,Wr=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ws&&a.locale!=="ko"?null:a.data;default:return null}}var Ex={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!Ex[n.type]:a==="textarea"}function Yg(n,a,r,l){ti?$s?$s.push(l):$s=[l]:ti=l,a=Zu(a,"onChange"),0<a.length&&(r=new Ks("onChange","change",null,r,l),n.push({event:r,listeners:a}))}var vl=null,El=null;function _x(n){RE(n,0)}function du(n){var a=$n(n);if(Zi(a))return n}function Kg(n,a){if(n==="change")return a}var Xg=!1;if(as){var Uh;if(as){var Vh="oninput"in document;if(!Vh){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),Vh=typeof Qg.oninput=="function"}Uh=Vh}else Uh=!1;Xg=Uh&&(!document.documentMode||9<document.documentMode)}function Wg(){vl&&(vl.detachEvent("onpropertychange",Jg),El=vl=null)}function Jg(n){if(n.propertyName==="value"&&du(El)){var a=[];Yg(a,El,n,ss(n)),ni(_x,a)}}function Sx(n,a,r){n==="focusin"?(Wg(),vl=a,El=r,vl.attachEvent("onpropertychange",Jg)):n==="focusout"&&Wg()}function wx(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return du(El)}function Tx(n,a){if(n==="click")return du(a)}function xx(n,a){if(n==="input"||n==="change")return du(a)}function bx(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Kn=typeof Object.is=="function"?Object.is:bx;function _l(n,a){if(Kn(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var r=Object.keys(n),l=Object.keys(a);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var f=r[l];if(!be.call(a,f)||!Kn(n[f],a[f]))return!1}return!0}function Zg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ey(n,a){var r=Zg(n);n=0;for(var l;r;){if(r.nodeType===3){if(l=n+r.textContent.length,n<=a&&l>=a)return{node:r,offset:a-n};n=l}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zg(r)}}function ty(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?ty(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function ny(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Gs(n.document);a instanceof n.HTMLIFrameElement;){try{var r=typeof a.contentWindow.location.href=="string"}catch{r=!1}if(r)n=a.contentWindow;else break;a=Gs(n.document)}return a}function Fh(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var Ax=as&&"documentMode"in document&&11>=document.documentMode,Jr=null,Bh=null,Sl=null,zh=!1;function sy(n,a,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zh||Jr==null||Jr!==Gs(l)||(l=Jr,"selectionStart"in l&&Fh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Sl&&_l(Sl,l)||(Sl=l,l=Zu(Bh,"onSelect"),0<l.length&&(a=new Ks("onSelect","select",null,a,r),n.push({event:a,listeners:l}),a.target=Jr)))}function lr(n,a){var r={};return r[n.toLowerCase()]=a.toLowerCase(),r["Webkit"+n]="webkit"+a,r["Moz"+n]="moz"+a,r}var Zr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},qh={},ay={};as&&(ay=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function cr(n){if(qh[n])return qh[n];if(!Zr[n])return n;var a=Zr[n],r;for(r in a)if(a.hasOwnProperty(r)&&r in ay)return qh[n]=a[r];return n}var iy=cr("animationend"),ry=cr("animationiteration"),oy=cr("animationstart"),Nx=cr("transitionrun"),Cx=cr("transitionstart"),Rx=cr("transitioncancel"),ly=cr("transitionend"),cy=new Map,Hh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hh.push("scrollEnd");function Ns(n,a){cy.set(n,a),qs(a,[n])}var hu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},rs=[],eo=0,Gh=0;function fu(){for(var n=eo,a=Gh=eo=0;a<n;){var r=rs[a];rs[a++]=null;var l=rs[a];rs[a++]=null;var f=rs[a];rs[a++]=null;var m=rs[a];if(rs[a++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}m!==0&&uy(r,f,m)}}function mu(n,a,r,l){rs[eo++]=n,rs[eo++]=a,rs[eo++]=r,rs[eo++]=l,Gh|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function $h(n,a,r,l){return mu(n,a,r,l),pu(n)}function ur(n,a){return mu(n,null,null,a),pu(n)}function uy(n,a,r){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r);for(var f=!1,m=n.return;m!==null;)m.childLanes|=r,l=m.alternate,l!==null&&(l.childLanes|=r),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&a!==null&&(f=31-wt(r),n=m.hiddenUpdates,l=n[f],l===null?n[f]=[a]:l.push(a),a.lane=r|536870912),m):null}function pu(n){if(50<ql)throw ql=0,nm=null,Error(i(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var to={};function Ix(n,a,r,l){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(n,a,r,l){return new Ix(n,a,r,l)}function Yh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _a(n,a){var r=n.alternate;return r===null?(r=Xn(n.tag,a,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=a,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,a=n.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function dy(n,a){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,a=r.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function gu(n,a,r,l,f,m){var _=0;if(l=n,typeof n=="function")Yh(n)&&(_=1);else if(typeof n=="string")_=Pb(n,r,_e.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case x:return n=Xn(31,r,a,f),n.elementType=x,n.lanes=m,n;case B:return dr(r.children,f,m,a);case P:_=8,f|=24;break;case K:return n=Xn(12,r,a,f|2),n.elementType=K,n.lanes=m,n;case pe:return n=Xn(13,r,a,f),n.elementType=pe,n.lanes=m,n;case ee:return n=Xn(19,r,a,f),n.elementType=ee,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:_=10;break e;case V:_=9;break e;case X:_=11;break e;case N:_=14;break e;case A:_=16,l=null;break e}_=29,r=Error(i(130,n===null?"null":typeof n,"")),l=null}return a=Xn(_,r,a,f),a.elementType=n,a.type=l,a.lanes=m,a}function dr(n,a,r,l){return n=Xn(7,n,l,a),n.lanes=r,n}function Kh(n,a,r){return n=Xn(6,n,null,a),n.lanes=r,n}function hy(n){var a=Xn(18,null,null,0);return a.stateNode=n,a}function Xh(n,a,r){return a=Xn(4,n.children!==null?n.children:[],n.key,a),a.lanes=r,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var fy=new WeakMap;function os(n,a){if(typeof n=="object"&&n!==null){var r=fy.get(n);return r!==void 0?r:(a={value:n,source:a,stack:Te(a)},fy.set(n,a),a)}return{value:n,source:a,stack:Te(a)}}var no=[],so=0,yu=null,wl=0,ls=[],cs=0,ri=null,Js=1,Zs="";function Sa(n,a){no[so++]=wl,no[so++]=yu,yu=n,wl=a}function my(n,a,r){ls[cs++]=Js,ls[cs++]=Zs,ls[cs++]=ri,ri=n;var l=Js;n=Zs;var f=32-wt(l)-1;l&=~(1<<f),r+=1;var m=32-wt(a)+f;if(30<m){var _=f-f%5;m=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Js=1<<32-wt(a)+f|r<<f|l,Zs=m+n}else Js=1<<m|r<<f|l,Zs=n}function Qh(n){n.return!==null&&(Sa(n,1),my(n,1,0))}function Wh(n){for(;n===yu;)yu=no[--so],no[so]=null,wl=no[--so],no[so]=null;for(;n===ri;)ri=ls[--cs],ls[cs]=null,Zs=ls[--cs],ls[cs]=null,Js=ls[--cs],ls[cs]=null}function py(n,a){ls[cs++]=Js,ls[cs++]=Zs,ls[cs++]=ri,Js=a.id,Zs=a.overflow,ri=n}var yn=null,It=null,ot=!1,oi=null,us=!1,Jh=Error(i(519));function li(n){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(os(a,n)),Jh}function gy(n){var a=n.stateNode,r=n.type,l=n.memoizedProps;switch(a[Qt]=n,a[hn]=l,r){case"dialog":tt("cancel",a),tt("close",a);break;case"iframe":case"object":case"embed":tt("load",a);break;case"video":case"audio":for(r=0;r<Gl.length;r++)tt(Gl[r],a);break;case"source":tt("error",a);break;case"img":case"image":case"link":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"input":tt("invalid",a),Qc(a,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":tt("invalid",a);break;case"textarea":tt("invalid",a),Za(a,l.value,l.defaultValue,l.children)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||a.textContent===""+r||l.suppressHydrationWarning===!0||kE(a.textContent,r)?(l.popover!=null&&(tt("beforetoggle",a),tt("toggle",a)),l.onScroll!=null&&tt("scroll",a),l.onScrollEnd!=null&&tt("scrollend",a),l.onClick!=null&&(a.onclick=ws),a=!0):a=!1,a||li(n,!0)}function yy(n){for(yn=n.return;yn;)switch(yn.tag){case 5:case 31:case 13:us=!1;return;case 27:case 3:us=!0;return;default:yn=yn.return}}function ao(n){if(n!==yn)return!1;if(!ot)return yy(n),ot=!0,!1;var a=n.tag,r;if((r=a!==3&&a!==27)&&((r=a===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||ym(n.type,n.memoizedProps)),r=!r),r&&It&&li(n),yy(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));It=zE(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));It=zE(n)}else a===27?(a=It,wi(n.type)?(n=wm,wm=null,It=n):It=a):It=yn?hs(n.stateNode.nextSibling):null;return!0}function hr(){It=yn=null,ot=!1}function Zh(){var n=oi;return n!==null&&(Un===null?Un=n:Un.push.apply(Un,n),oi=null),n}function Tl(n){oi===null?oi=[n]:oi.push(n)}var ef=R(null),fr=null,wa=null;function ci(n,a,r){ce(ef,a._currentValue),a._currentValue=r}function Ta(n){n._currentValue=ef.current,G(ef)}function tf(n,a,r){for(;n!==null;){var l=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,l!==null&&(l.childLanes|=a)):l!==null&&(l.childLanes&a)!==a&&(l.childLanes|=a),n===r)break;n=n.return}}function nf(n,a,r,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var L=0;L<a.length;L++)if(T.context===a[L]){m.lanes|=r,T=m.alternate,T!==null&&(T.lanes|=r),tf(m.return,r,n),l||(_=null);break e}m=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(i(341));_.lanes|=r,m=_.alternate,m!==null&&(m.lanes|=r),tf(_,r,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function io(n,a,r,l){n=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(i(387));if(_=_.memoizedProps,_!==null){var T=f.type;Kn(f.pendingProps.value,_.value)||(n!==null?n.push(T):n=[T])}}else if(f===Me.current){if(_=f.alternate,_===null)throw Error(i(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ql):n=[Ql])}f=f.return}n!==null&&nf(a,n,r,l),a.flags|=262144}function vu(n){for(n=n.firstContext;n!==null;){if(!Kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function mr(n){fr=n,wa=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function vn(n){return vy(fr,n)}function Eu(n,a){return fr===null&&mr(n),vy(n,a)}function vy(n,a){var r=a._currentValue;if(a={context:a,memoizedValue:r,next:null},wa===null){if(n===null)throw Error(i(308));wa=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else wa=wa.next=a;return r}var Dx=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(r,l){n.push(l)}};this.abort=function(){a.aborted=!0,n.forEach(function(r){return r()})}},jx=s.unstable_scheduleCallback,kx=s.unstable_NormalPriority,Zt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new Dx,data:new Map,refCount:0}}function xl(n){n.refCount--,n.refCount===0&&jx(kx,function(){n.controller.abort()})}var bl=null,af=0,ro=0,oo=null;function Mx(n,a){if(bl===null){var r=bl=[];af=0,ro=lm(),oo={status:"pending",value:void 0,then:function(l){r.push(l)}}}return af++,a.then(Ey,Ey),a}function Ey(){if(--af===0&&bl!==null){oo!==null&&(oo.status="fulfilled");var n=bl;bl=null,ro=0,oo=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function Px(n,a){var r=[],l={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return n.then(function(){l.status="fulfilled",l.value=a;for(var f=0;f<r.length;f++)(0,r[f])(a)},function(f){for(l.status="rejected",l.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),l}var _y=q.S;q.S=function(n,a){sE=Ue(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Mx(n,a),_y!==null&&_y(n,a)};var pr=R(null);function rf(){var n=pr.current;return n!==null?n:Ct.pooledCache}function _u(n,a){a===null?ce(pr,pr.current):ce(pr,a.pool)}function Sy(){var n=rf();return n===null?null:{parent:Zt._currentValue,pool:n}}var lo=Error(i(460)),of=Error(i(474)),Su=Error(i(542)),wu={then:function(){}};function wy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ty(n,a,r){switch(r=n[r],r===void 0?n.push(a):r!==a&&(a.then(ws,ws),a=r),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,by(n),n;default:if(typeof a.status=="string")a.then(ws,ws);else{if(n=Ct,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=a,n.status="pending",n.then(function(l){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=l}},function(l){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=l}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,by(n),n}throw yr=a,lo}}function gr(n){try{var a=n._init;return a(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(yr=r,lo):r}}var yr=null;function xy(){if(yr===null)throw Error(i(459));var n=yr;return yr=null,n}function by(n){if(n===lo||n===Su)throw Error(i(483))}var co=null,Al=0;function Tu(n){var a=Al;return Al+=1,co===null&&(co=[]),Ty(co,n,a)}function Nl(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function xu(n,a){throw a.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(a),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function Ay(n){function a(Y,F){if(n){var J=Y.deletions;J===null?(Y.deletions=[F],Y.flags|=16):J.push(F)}}function r(Y,F){if(!n)return null;for(;F!==null;)a(Y,F),F=F.sibling;return null}function l(Y){for(var F=new Map;Y!==null;)Y.key!==null?F.set(Y.key,Y):F.set(Y.index,Y),Y=Y.sibling;return F}function f(Y,F){return Y=_a(Y,F),Y.index=0,Y.sibling=null,Y}function m(Y,F,J){return Y.index=J,n?(J=Y.alternate,J!==null?(J=J.index,J<F?(Y.flags|=67108866,F):J):(Y.flags|=67108866,F)):(Y.flags|=1048576,F)}function _(Y){return n&&Y.alternate===null&&(Y.flags|=67108866),Y}function T(Y,F,J,he){return F===null||F.tag!==6?(F=Kh(J,Y.mode,he),F.return=Y,F):(F=f(F,J),F.return=Y,F)}function L(Y,F,J,he){var Oe=J.type;return Oe===B?ue(Y,F,J.props.children,he,J.key):F!==null&&(F.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===A&&gr(Oe)===F.type)?(F=f(F,J.props),Nl(F,J),F.return=Y,F):(F=gu(J.type,J.key,J.props,null,Y.mode,he),Nl(F,J),F.return=Y,F)}function Z(Y,F,J,he){return F===null||F.tag!==4||F.stateNode.containerInfo!==J.containerInfo||F.stateNode.implementation!==J.implementation?(F=Xh(J,Y.mode,he),F.return=Y,F):(F=f(F,J.children||[]),F.return=Y,F)}function ue(Y,F,J,he,Oe){return F===null||F.tag!==7?(F=dr(J,Y.mode,he,Oe),F.return=Y,F):(F=f(F,J),F.return=Y,F)}function fe(Y,F,J){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=Kh(""+F,Y.mode,J),F.return=Y,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case k:return J=gu(F.type,F.key,F.props,null,Y.mode,J),Nl(J,F),J.return=Y,J;case O:return F=Xh(F,Y.mode,J),F.return=Y,F;case A:return F=gr(F),fe(Y,F,J)}if(ze(F)||U(F))return F=dr(F,Y.mode,J,null),F.return=Y,F;if(typeof F.then=="function")return fe(Y,Tu(F),J);if(F.$$typeof===Q)return fe(Y,Eu(Y,F),J);xu(Y,F)}return null}function te(Y,F,J,he){var Oe=F!==null?F.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Oe!==null?null:T(Y,F,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return J.key===Oe?L(Y,F,J,he):null;case O:return J.key===Oe?Z(Y,F,J,he):null;case A:return J=gr(J),te(Y,F,J,he)}if(ze(J)||U(J))return Oe!==null?null:ue(Y,F,J,he,null);if(typeof J.then=="function")return te(Y,F,Tu(J),he);if(J.$$typeof===Q)return te(Y,F,Eu(Y,J),he);xu(Y,J)}return null}function ie(Y,F,J,he,Oe){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Y=Y.get(J)||null,T(F,Y,""+he,Oe);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case k:return Y=Y.get(he.key===null?J:he.key)||null,L(F,Y,he,Oe);case O:return Y=Y.get(he.key===null?J:he.key)||null,Z(F,Y,he,Oe);case A:return he=gr(he),ie(Y,F,J,he,Oe)}if(ze(he)||U(he))return Y=Y.get(J)||null,ue(F,Y,he,Oe,null);if(typeof he.then=="function")return ie(Y,F,J,Tu(he),Oe);if(he.$$typeof===Q)return ie(Y,F,J,Eu(F,he),Oe);xu(F,he)}return null}function De(Y,F,J,he){for(var Oe=null,ct=null,ke=F,Qe=F=0,st=null;ke!==null&&Qe<J.length;Qe++){ke.index>Qe?(st=ke,ke=null):st=ke.sibling;var ut=te(Y,ke,J[Qe],he);if(ut===null){ke===null&&(ke=st);break}n&&ke&&ut.alternate===null&&a(Y,ke),F=m(ut,F,Qe),ct===null?Oe=ut:ct.sibling=ut,ct=ut,ke=st}if(Qe===J.length)return r(Y,ke),ot&&Sa(Y,Qe),Oe;if(ke===null){for(;Qe<J.length;Qe++)ke=fe(Y,J[Qe],he),ke!==null&&(F=m(ke,F,Qe),ct===null?Oe=ke:ct.sibling=ke,ct=ke);return ot&&Sa(Y,Qe),Oe}for(ke=l(ke);Qe<J.length;Qe++)st=ie(ke,Y,Qe,J[Qe],he),st!==null&&(n&&st.alternate!==null&&ke.delete(st.key===null?Qe:st.key),F=m(st,F,Qe),ct===null?Oe=st:ct.sibling=st,ct=st);return n&&ke.forEach(function(Ni){return a(Y,Ni)}),ot&&Sa(Y,Qe),Oe}function Ve(Y,F,J,he){if(J==null)throw Error(i(151));for(var Oe=null,ct=null,ke=F,Qe=F=0,st=null,ut=J.next();ke!==null&&!ut.done;Qe++,ut=J.next()){ke.index>Qe?(st=ke,ke=null):st=ke.sibling;var Ni=te(Y,ke,ut.value,he);if(Ni===null){ke===null&&(ke=st);break}n&&ke&&Ni.alternate===null&&a(Y,ke),F=m(Ni,F,Qe),ct===null?Oe=Ni:ct.sibling=Ni,ct=Ni,ke=st}if(ut.done)return r(Y,ke),ot&&Sa(Y,Qe),Oe;if(ke===null){for(;!ut.done;Qe++,ut=J.next())ut=fe(Y,ut.value,he),ut!==null&&(F=m(ut,F,Qe),ct===null?Oe=ut:ct.sibling=ut,ct=ut);return ot&&Sa(Y,Qe),Oe}for(ke=l(ke);!ut.done;Qe++,ut=J.next())ut=ie(ke,Y,Qe,ut.value,he),ut!==null&&(n&&ut.alternate!==null&&ke.delete(ut.key===null?Qe:ut.key),F=m(ut,F,Qe),ct===null?Oe=ut:ct.sibling=ut,ct=ut);return n&&ke.forEach(function($b){return a(Y,$b)}),ot&&Sa(Y,Qe),Oe}function At(Y,F,J,he){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case k:e:{for(var Oe=J.key;F!==null;){if(F.key===Oe){if(Oe=J.type,Oe===B){if(F.tag===7){r(Y,F.sibling),he=f(F,J.props.children),he.return=Y,Y=he;break e}}else if(F.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===A&&gr(Oe)===F.type){r(Y,F.sibling),he=f(F,J.props),Nl(he,J),he.return=Y,Y=he;break e}r(Y,F);break}else a(Y,F);F=F.sibling}J.type===B?(he=dr(J.props.children,Y.mode,he,J.key),he.return=Y,Y=he):(he=gu(J.type,J.key,J.props,null,Y.mode,he),Nl(he,J),he.return=Y,Y=he)}return _(Y);case O:e:{for(Oe=J.key;F!==null;){if(F.key===Oe)if(F.tag===4&&F.stateNode.containerInfo===J.containerInfo&&F.stateNode.implementation===J.implementation){r(Y,F.sibling),he=f(F,J.children||[]),he.return=Y,Y=he;break e}else{r(Y,F);break}else a(Y,F);F=F.sibling}he=Xh(J,Y.mode,he),he.return=Y,Y=he}return _(Y);case A:return J=gr(J),At(Y,F,J,he)}if(ze(J))return De(Y,F,J,he);if(U(J)){if(Oe=U(J),typeof Oe!="function")throw Error(i(150));return J=Oe.call(J),Ve(Y,F,J,he)}if(typeof J.then=="function")return At(Y,F,Tu(J),he);if(J.$$typeof===Q)return At(Y,F,Eu(Y,J),he);xu(Y,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,F!==null&&F.tag===6?(r(Y,F.sibling),he=f(F,J),he.return=Y,Y=he):(r(Y,F),he=Kh(J,Y.mode,he),he.return=Y,Y=he),_(Y)):r(Y,F)}return function(Y,F,J,he){try{Al=0;var Oe=At(Y,F,J,he);return co=null,Oe}catch(ke){if(ke===lo||ke===Su)throw ke;var ct=Xn(29,ke,null,Y.mode);return ct.lanes=he,ct.return=Y,ct}finally{}}}var vr=Ay(!0),Ny=Ay(!1),ui=!1;function lf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function di(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function hi(n,a,r){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(mt&2)!==0){var f=l.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),l.pending=a,a=pu(n),uy(n,null,r),a}return mu(n,l,a,r),pu(n)}function Cl(n,a,r){if(a=a.updateQueue,a!==null&&(a=a.shared,(r&4194048)!==0)){var l=a.lanes;l&=n.pendingLanes,r|=l,a.lanes=r,tl(n,r)}}function uf(n,a){var r=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var f=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,r=r.next}while(r!==null);m===null?f=m=a:m=m.next=a}else f=m=a;r={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=a:n.next=a,r.lastBaseUpdate=a}var df=!1;function Rl(){if(df){var n=oo;if(n!==null)throw n}}function Il(n,a,r,l){df=!1;var f=n.updateQueue;ui=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var L=T,Z=L.next;L.next=null,_===null?m=Z:_.next=Z,_=L;var ue=n.alternate;ue!==null&&(ue=ue.updateQueue,T=ue.lastBaseUpdate,T!==_&&(T===null?ue.firstBaseUpdate=Z:T.next=Z,ue.lastBaseUpdate=L))}if(m!==null){var fe=f.baseState;_=0,ue=Z=L=null,T=m;do{var te=T.lane&-536870913,ie=te!==T.lane;if(ie?(nt&te)===te:(l&te)===te){te!==0&&te===ro&&(df=!0),ue!==null&&(ue=ue.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var De=n,Ve=T;te=a;var At=r;switch(Ve.tag){case 1:if(De=Ve.payload,typeof De=="function"){fe=De.call(At,fe,te);break e}fe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ve.payload,te=typeof De=="function"?De.call(At,fe,te):De,te==null)break e;fe=w({},fe,te);break e;case 2:ui=!0}}te=T.callback,te!==null&&(n.flags|=64,ie&&(n.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ue===null?(Z=ue=ie,L=fe):ue=ue.next=ie,_|=te;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;ie=T,T=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);ue===null&&(L=fe),f.baseState=L,f.firstBaseUpdate=Z,f.lastBaseUpdate=ue,m===null&&(f.shared.lanes=0),yi|=_,n.lanes=_,n.memoizedState=fe}}function Cy(n,a){if(typeof n!="function")throw Error(i(191,n));n.call(a)}function Ry(n,a){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Cy(r[n],a)}var uo=R(null),bu=R(0);function Iy(n,a){n=ja,ce(bu,n),ce(uo,a),ja=n|a.baseLanes}function hf(){ce(bu,ja),ce(uo,uo.current)}function ff(){ja=bu.current,G(uo),G(bu)}var Qn=R(null),ds=null;function fi(n){var a=n.alternate;ce(Gt,Gt.current&1),ce(Qn,n),ds===null&&(a===null||uo.current!==null||a.memoizedState!==null)&&(ds=n)}function mf(n){ce(Gt,Gt.current),ce(Qn,n),ds===null&&(ds=n)}function Dy(n){n.tag===22?(ce(Gt,Gt.current),ce(Qn,n),ds===null&&(ds=n)):mi()}function mi(){ce(Gt,Gt.current),ce(Qn,Qn.current)}function Wn(n){G(Qn),ds===n&&(ds=null),G(Gt)}var Gt=R(0);function Au(n){for(var a=n;a!==null;){if(a.tag===13){var r=a.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||_m(r)||Sm(r)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var xa=0,Xe=null,xt=null,en=null,Nu=!1,ho=!1,Er=!1,Cu=0,Dl=0,fo=null,Ox=0;function Vt(){throw Error(i(321))}function pf(n,a){if(a===null)return!1;for(var r=0;r<a.length&&r<n.length;r++)if(!Kn(n[r],a[r]))return!1;return!0}function gf(n,a,r,l,f,m){return xa=m,Xe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,q.H=n===null||n.memoizedState===null?mv:Df,Er=!1,m=r(l,f),Er=!1,ho&&(m=ky(a,r,l,f)),jy(n),m}function jy(n){q.H=Ml;var a=xt!==null&&xt.next!==null;if(xa=0,en=xt=Xe=null,Nu=!1,Dl=0,fo=null,a)throw Error(i(300));n===null||tn||(n=n.dependencies,n!==null&&vu(n)&&(tn=!0))}function ky(n,a,r,l){Xe=n;var f=0;do{if(ho&&(fo=null),Dl=0,ho=!1,25<=f)throw Error(i(301));if(f+=1,en=xt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}q.H=pv,m=a(r,l)}while(ho);return m}function Lx(){var n=q.H,a=n.useState()[0];return a=typeof a.then=="function"?jl(a):a,n=n.useState()[0],(xt!==null?xt.memoizedState:null)!==n&&(Xe.flags|=1024),a}function yf(){var n=Cu!==0;return Cu=0,n}function vf(n,a,r){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~r}function Ef(n){if(Nu){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Nu=!1}xa=0,en=xt=Xe=null,ho=!1,Dl=Cu=0,fo=null}function In(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?Xe.memoizedState=en=n:en=en.next=n,en}function $t(){if(xt===null){var n=Xe.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var a=en===null?Xe.memoizedState:en.next;if(a!==null)en=a,xt=n;else{if(n===null)throw Xe.alternate===null?Error(i(467)):Error(i(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},en===null?Xe.memoizedState=en=n:en=en.next=n}return en}function Ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(n){var a=Dl;return Dl+=1,fo===null&&(fo=[]),n=Ty(fo,n,a),a=Xe,(en===null?a.memoizedState:en.next)===null&&(a=a.alternate,q.H=a===null||a.memoizedState===null?mv:Df),n}function Iu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return jl(n);if(n.$$typeof===Q)return vn(n)}throw Error(i(438,String(n)))}function _f(n){var a=null,r=Xe.updateQueue;if(r!==null&&(a=r.memoCache),a==null){var l=Xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(a={data:l.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),r===null&&(r=Ru(),Xe.updateQueue=r),r.memoCache=a,r=a.data[a.index],r===void 0)for(r=a.data[a.index]=Array(n),l=0;l<n;l++)r[l]=j;return a.index++,r}function ba(n,a){return typeof a=="function"?a(n):a}function Du(n){var a=$t();return Sf(a,xt,n)}function Sf(n,a,r){var l=n.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var f=n.baseQueue,m=l.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}a.baseQueue=f=m,l.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{a=f.next;var T=_=null,L=null,Z=a,ue=!1;do{var fe=Z.lane&-536870913;if(fe!==Z.lane?(nt&fe)===fe:(xa&fe)===fe){var te=Z.revertLane;if(te===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),fe===ro&&(ue=!0);else if((xa&te)===te){Z=Z.next,te===ro&&(ue=!0);continue}else fe={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(T=L=fe,_=m):L=L.next=fe,Xe.lanes|=te,yi|=te;fe=Z.action,Er&&r(m,fe),m=Z.hasEagerState?Z.eagerState:r(m,fe)}else te={lane:fe,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(T=L=te,_=m):L=L.next=te,Xe.lanes|=fe,yi|=fe;Z=Z.next}while(Z!==null&&Z!==a);if(L===null?_=m:L.next=T,!Kn(m,n.memoizedState)&&(tn=!0,ue&&(r=oo,r!==null)))throw r;n.memoizedState=m,n.baseState=_,n.baseQueue=L,l.lastRenderedState=m}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function wf(n){var a=$t(),r=a.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var l=r.dispatch,f=r.pending,m=a.memoizedState;if(f!==null){r.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);Kn(m,a.memoizedState)||(tn=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),r.lastRenderedState=m}return[m,l]}function My(n,a,r){var l=Xe,f=$t(),m=ot;if(m){if(r===void 0)throw Error(i(407));r=r()}else r=a();var _=!Kn((xt||f).memoizedState,r);if(_&&(f.memoizedState=r,tn=!0),f=f.queue,bf(Ly.bind(null,l,f,n),[n]),f.getSnapshot!==a||_||en!==null&&en.memoizedState.tag&1){if(l.flags|=2048,mo(9,{destroy:void 0},Oy.bind(null,l,f,r,a),null),Ct===null)throw Error(i(349));m||(xa&127)!==0||Py(l,a,r)}return r}function Py(n,a,r){n.flags|=16384,n={getSnapshot:a,value:r},a=Xe.updateQueue,a===null?(a=Ru(),Xe.updateQueue=a,a.stores=[n]):(r=a.stores,r===null?a.stores=[n]:r.push(n))}function Oy(n,a,r,l){a.value=r,a.getSnapshot=l,Uy(a)&&Vy(n)}function Ly(n,a,r){return r(function(){Uy(a)&&Vy(n)})}function Uy(n){var a=n.getSnapshot;n=n.value;try{var r=a();return!Kn(n,r)}catch{return!0}}function Vy(n){var a=ur(n,2);a!==null&&Vn(a,n,2)}function Tf(n){var a=In();if(typeof n=="function"){var r=n;if(n=r(),Er){yt(!0);try{r()}finally{yt(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:n},a}function Fy(n,a,r,l){return n.baseState=r,Sf(n,xt,typeof l=="function"?l:ba)}function Ux(n,a,r,l,f){if(Mu(n))throw Error(i(485));if(n=a.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};q.T!==null?r(!0):m.isTransition=!1,l(m),r=a.pending,r===null?(m.next=a.pending=m,By(a,m)):(m.next=r.next,a.pending=r.next=m)}}function By(n,a){var r=a.action,l=a.payload,f=n.state;if(a.isTransition){var m=q.T,_={};q.T=_;try{var T=r(f,l),L=q.S;L!==null&&L(_,T),zy(n,a,T)}catch(Z){xf(n,a,Z)}finally{m!==null&&_.types!==null&&(m.types=_.types),q.T=m}}else try{m=r(f,l),zy(n,a,m)}catch(Z){xf(n,a,Z)}}function zy(n,a,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){qy(n,a,l)},function(l){return xf(n,a,l)}):qy(n,a,r)}function qy(n,a,r){a.status="fulfilled",a.value=r,Hy(a),n.state=r,a=n.pending,a!==null&&(r=a.next,r===a?n.pending=null:(r=r.next,a.next=r,By(n,r)))}function xf(n,a,r){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do a.status="rejected",a.reason=r,Hy(a),a=a.next;while(a!==l)}n.action=null}function Hy(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Gy(n,a){return a}function $y(n,a){if(ot){var r=Ct.formState;if(r!==null){e:{var l=Xe;if(ot){if(It){t:{for(var f=It,m=us;f.nodeType!==8;){if(!m){f=null;break t}if(f=hs(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){It=hs(f.nextSibling),l=f.data==="F!";break e}}li(l)}l=!1}l&&(a=r[0])}}return r=In(),r.memoizedState=r.baseState=a,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gy,lastRenderedState:a},r.queue=l,r=dv.bind(null,Xe,l),l.dispatch=r,l=Tf(!1),m=If.bind(null,Xe,!1,l.queue),l=In(),f={state:a,dispatch:null,action:n,pending:null},l.queue=f,r=Ux.bind(null,Xe,f,m,r),f.dispatch=r,l.memoizedState=n,[a,r,!1]}function Yy(n){var a=$t();return Ky(a,xt,n)}function Ky(n,a,r){if(a=Sf(n,a,Gy)[0],n=Du(ba)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var l=jl(a)}catch(_){throw _===lo?Su:_}else l=a;a=$t();var f=a.queue,m=f.dispatch;return r!==a.memoizedState&&(Xe.flags|=2048,mo(9,{destroy:void 0},Vx.bind(null,f,r),null)),[l,m,n]}function Vx(n,a){n.action=a}function Xy(n){var a=$t(),r=xt;if(r!==null)return Ky(a,r,n);$t(),a=a.memoizedState,r=$t();var l=r.queue.dispatch;return r.memoizedState=n,[a,l,!1]}function mo(n,a,r,l){return n={tag:n,create:r,deps:l,inst:a,next:null},a=Xe.updateQueue,a===null&&(a=Ru(),Xe.updateQueue=a),r=a.lastEffect,r===null?a.lastEffect=n.next=n:(l=r.next,r.next=n,n.next=l,a.lastEffect=n),n}function Qy(){return $t().memoizedState}function ju(n,a,r,l){var f=In();Xe.flags|=n,f.memoizedState=mo(1|a,{destroy:void 0},r,l===void 0?null:l)}function ku(n,a,r,l){var f=$t();l=l===void 0?null:l;var m=f.memoizedState.inst;xt!==null&&l!==null&&pf(l,xt.memoizedState.deps)?f.memoizedState=mo(a,m,r,l):(Xe.flags|=n,f.memoizedState=mo(1|a,m,r,l))}function Wy(n,a){ju(8390656,8,n,a)}function bf(n,a){ku(2048,8,n,a)}function Fx(n){Xe.flags|=4;var a=Xe.updateQueue;if(a===null)a=Ru(),Xe.updateQueue=a,a.events=[n];else{var r=a.events;r===null?a.events=[n]:r.push(n)}}function Jy(n){var a=$t().memoizedState;return Fx({ref:a,nextImpl:n}),function(){if((mt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Zy(n,a){return ku(4,2,n,a)}function ev(n,a){return ku(4,4,n,a)}function tv(n,a){if(typeof a=="function"){n=n();var r=a(n);return function(){typeof r=="function"?r():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function nv(n,a,r){r=r!=null?r.concat([n]):null,ku(4,4,tv.bind(null,a,n),r)}function Af(){}function sv(n,a){var r=$t();a=a===void 0?null:a;var l=r.memoizedState;return a!==null&&pf(a,l[1])?l[0]:(r.memoizedState=[n,a],n)}function av(n,a){var r=$t();a=a===void 0?null:a;var l=r.memoizedState;if(a!==null&&pf(a,l[1]))return l[0];if(l=n(),Er){yt(!0);try{n()}finally{yt(!1)}}return r.memoizedState=[l,a],l}function Nf(n,a,r){return r===void 0||(xa&1073741824)!==0&&(nt&261930)===0?n.memoizedState=a:(n.memoizedState=r,n=iE(),Xe.lanes|=n,yi|=n,r)}function iv(n,a,r,l){return Kn(r,a)?r:uo.current!==null?(n=Nf(n,r,l),Kn(n,a)||(tn=!0),n):(xa&42)===0||(xa&1073741824)!==0&&(nt&261930)===0?(tn=!0,n.memoizedState=r):(n=iE(),Xe.lanes|=n,yi|=n,a)}function rv(n,a,r,l,f){var m=re.p;re.p=m!==0&&8>m?m:8;var _=q.T,T={};q.T=T,If(n,!1,a,r);try{var L=f(),Z=q.S;if(Z!==null&&Z(T,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ue=Px(L,l);kl(n,a,ue,es(n))}else kl(n,a,l,es(n))}catch(fe){kl(n,a,{then:function(){},status:"rejected",reason:fe},es())}finally{re.p=m,_!==null&&T.types!==null&&(_.types=T.types),q.T=_}}function Bx(){}function Cf(n,a,r,l){if(n.tag!==5)throw Error(i(476));var f=ov(n).queue;rv(n,f,a,xe,r===null?Bx:function(){return lv(n),r(l)})}function ov(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:xe},next:null};var r={};return a.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:r},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function lv(n){var a=ov(n);a.next===null&&(a=n.alternate.memoizedState),kl(n,a.next.queue,{},es())}function Rf(){return vn(Ql)}function cv(){return $t().memoizedState}function uv(){return $t().memoizedState}function zx(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var r=es();n=di(r);var l=hi(a,n,r);l!==null&&(Vn(l,a,r),Cl(l,a,r)),a={cache:sf()},n.payload=a;return}a=a.return}}function qx(n,a,r){var l=es();r={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Mu(n)?hv(a,r):(r=$h(n,a,r,l),r!==null&&(Vn(r,n,l),fv(r,a,l)))}function dv(n,a,r){var l=es();kl(n,a,r,l)}function kl(n,a,r,l){var f={lane:l,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Mu(n))hv(a,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var _=a.lastRenderedState,T=m(_,r);if(f.hasEagerState=!0,f.eagerState=T,Kn(T,_))return mu(n,a,f,0),Ct===null&&fu(),!1}catch{}finally{}if(r=$h(n,a,f,l),r!==null)return Vn(r,n,l),fv(r,a,l),!0}return!1}function If(n,a,r,l){if(l={lane:2,revertLane:lm(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Mu(n)){if(a)throw Error(i(479))}else a=$h(n,r,l,2),a!==null&&Vn(a,n,2)}function Mu(n){var a=n.alternate;return n===Xe||a!==null&&a===Xe}function hv(n,a){ho=Nu=!0;var r=n.pending;r===null?a.next=a:(a.next=r.next,r.next=a),n.pending=a}function fv(n,a,r){if((r&4194048)!==0){var l=a.lanes;l&=n.pendingLanes,r|=l,a.lanes=r,tl(n,r)}}var Ml={readContext:vn,use:Iu,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useLayoutEffect:Vt,useInsertionEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useSyncExternalStore:Vt,useId:Vt,useHostTransitionStatus:Vt,useFormState:Vt,useActionState:Vt,useOptimistic:Vt,useMemoCache:Vt,useCacheRefresh:Vt};Ml.useEffectEvent=Vt;var mv={readContext:vn,use:Iu,useCallback:function(n,a){return In().memoizedState=[n,a===void 0?null:a],n},useContext:vn,useEffect:Wy,useImperativeHandle:function(n,a,r){r=r!=null?r.concat([n]):null,ju(4194308,4,tv.bind(null,a,n),r)},useLayoutEffect:function(n,a){return ju(4194308,4,n,a)},useInsertionEffect:function(n,a){ju(4,2,n,a)},useMemo:function(n,a){var r=In();a=a===void 0?null:a;var l=n();if(Er){yt(!0);try{n()}finally{yt(!1)}}return r.memoizedState=[l,a],l},useReducer:function(n,a,r){var l=In();if(r!==void 0){var f=r(a);if(Er){yt(!0);try{r(a)}finally{yt(!1)}}}else f=a;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=qx.bind(null,Xe,n),[l.memoizedState,n]},useRef:function(n){var a=In();return n={current:n},a.memoizedState=n},useState:function(n){n=Tf(n);var a=n.queue,r=dv.bind(null,Xe,a);return a.dispatch=r,[n.memoizedState,r]},useDebugValue:Af,useDeferredValue:function(n,a){var r=In();return Nf(r,n,a)},useTransition:function(){var n=Tf(!1);return n=rv.bind(null,Xe,n.queue,!0,!1),In().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,r){var l=Xe,f=In();if(ot){if(r===void 0)throw Error(i(407));r=r()}else{if(r=a(),Ct===null)throw Error(i(349));(nt&127)!==0||Py(l,a,r)}f.memoizedState=r;var m={value:r,getSnapshot:a};return f.queue=m,Wy(Ly.bind(null,l,m,n),[n]),l.flags|=2048,mo(9,{destroy:void 0},Oy.bind(null,l,m,r,a),null),r},useId:function(){var n=In(),a=Ct.identifierPrefix;if(ot){var r=Zs,l=Js;r=(l&~(1<<32-wt(l)-1)).toString(32)+r,a="_"+a+"R_"+r,r=Cu++,0<r&&(a+="H"+r.toString(32)),a+="_"}else r=Ox++,a="_"+a+"r_"+r.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:Rf,useFormState:$y,useActionState:$y,useOptimistic:function(n){var a=In();a.memoizedState=a.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=r,a=If.bind(null,Xe,!0,r),r.dispatch=a,[n,a]},useMemoCache:_f,useCacheRefresh:function(){return In().memoizedState=zx.bind(null,Xe)},useEffectEvent:function(n){var a=In(),r={impl:n};return a.memoizedState=r,function(){if((mt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Df={readContext:vn,use:Iu,useCallback:sv,useContext:vn,useEffect:bf,useImperativeHandle:nv,useInsertionEffect:Zy,useLayoutEffect:ev,useMemo:av,useReducer:Du,useRef:Qy,useState:function(){return Du(ba)},useDebugValue:Af,useDeferredValue:function(n,a){var r=$t();return iv(r,xt.memoizedState,n,a)},useTransition:function(){var n=Du(ba)[0],a=$t().memoizedState;return[typeof n=="boolean"?n:jl(n),a]},useSyncExternalStore:My,useId:cv,useHostTransitionStatus:Rf,useFormState:Yy,useActionState:Yy,useOptimistic:function(n,a){var r=$t();return Fy(r,xt,n,a)},useMemoCache:_f,useCacheRefresh:uv};Df.useEffectEvent=Jy;var pv={readContext:vn,use:Iu,useCallback:sv,useContext:vn,useEffect:bf,useImperativeHandle:nv,useInsertionEffect:Zy,useLayoutEffect:ev,useMemo:av,useReducer:wf,useRef:Qy,useState:function(){return wf(ba)},useDebugValue:Af,useDeferredValue:function(n,a){var r=$t();return xt===null?Nf(r,n,a):iv(r,xt.memoizedState,n,a)},useTransition:function(){var n=wf(ba)[0],a=$t().memoizedState;return[typeof n=="boolean"?n:jl(n),a]},useSyncExternalStore:My,useId:cv,useHostTransitionStatus:Rf,useFormState:Xy,useActionState:Xy,useOptimistic:function(n,a){var r=$t();return xt!==null?Fy(r,xt,n,a):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:_f,useCacheRefresh:uv};pv.useEffectEvent=Jy;function jf(n,a,r,l){a=n.memoizedState,r=r(l,a),r=r==null?a:w({},a,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var kf={enqueueSetState:function(n,a,r){n=n._reactInternals;var l=es(),f=di(l);f.payload=a,r!=null&&(f.callback=r),a=hi(n,f,l),a!==null&&(Vn(a,n,l),Cl(a,n,l))},enqueueReplaceState:function(n,a,r){n=n._reactInternals;var l=es(),f=di(l);f.tag=1,f.payload=a,r!=null&&(f.callback=r),a=hi(n,f,l),a!==null&&(Vn(a,n,l),Cl(a,n,l))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var r=es(),l=di(r);l.tag=2,a!=null&&(l.callback=a),a=hi(n,l,r),a!==null&&(Vn(a,n,r),Cl(a,n,r))}};function gv(n,a,r,l,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,m,_):a.prototype&&a.prototype.isPureReactComponent?!_l(r,l)||!_l(f,m):!0}function yv(n,a,r,l){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(r,l),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(r,l),a.state!==n&&kf.enqueueReplaceState(a,a.state,null)}function _r(n,a){var r=a;if("ref"in a){r={};for(var l in a)l!=="ref"&&(r[l]=a[l])}if(n=n.defaultProps){r===a&&(r=w({},r));for(var f in n)r[f]===void 0&&(r[f]=n[f])}return r}function vv(n){hu(n)}function Ev(n){console.error(n)}function _v(n){hu(n)}function Pu(n,a){try{var r=n.onUncaughtError;r(a.value,{componentStack:a.stack})}catch(l){setTimeout(function(){throw l})}}function Sv(n,a,r){try{var l=n.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Mf(n,a,r){return r=di(r),r.tag=3,r.payload={element:null},r.callback=function(){Pu(n,a)},r}function wv(n){return n=di(n),n.tag=3,n}function Tv(n,a,r,l){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;n.payload=function(){return f(m)},n.callback=function(){Sv(a,r,l)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Sv(a,r,l),typeof f!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function Hx(n,a,r,l,f){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(a=r.alternate,a!==null&&io(a,r,f,!0),r=Qn.current,r!==null){switch(r.tag){case 31:case 13:return ds===null?Yu():r.alternate===null&&Ft===0&&(Ft=3),r.flags&=-257,r.flags|=65536,r.lanes=f,l===wu?r.flags|=16384:(a=r.updateQueue,a===null?r.updateQueue=new Set([l]):a.add(l),im(n,l,f)),!1;case 22:return r.flags|=65536,l===wu?r.flags|=16384:(a=r.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=a):(r=a.retryQueue,r===null?a.retryQueue=new Set([l]):r.add(l)),im(n,l,f)),!1}throw Error(i(435,r.tag))}return im(n,l,f),Yu(),!1}if(ot)return a=Qn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,l!==Jh&&(n=Error(i(422),{cause:l}),Tl(os(n,r)))):(l!==Jh&&(a=Error(i(423),{cause:l}),Tl(os(a,r))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=os(l,r),f=Mf(n.stateNode,l,f),uf(n,f),Ft!==4&&(Ft=2)),!1;var m=Error(i(520),{cause:l});if(m=os(m,r),zl===null?zl=[m]:zl.push(m),Ft!==4&&(Ft=2),a===null)return!0;l=os(l,r),r=a;do{switch(r.tag){case 3:return r.flags|=65536,n=f&-f,r.lanes|=n,n=Mf(r.stateNode,l,n),uf(r,n),!1;case 1:if(a=r.type,m=r.stateNode,(r.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(vi===null||!vi.has(m))))return r.flags|=65536,f&=-f,r.lanes|=f,f=wv(f),Tv(f,n,r,l),uf(r,f),!1}r=r.return}while(r!==null);return!1}var Pf=Error(i(461)),tn=!1;function En(n,a,r,l){a.child=n===null?Ny(a,null,r,l):vr(a,n.child,r,l)}function xv(n,a,r,l,f){r=r.render;var m=a.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return mr(a),l=gf(n,a,r,_,m,f),T=yf(),n!==null&&!tn?(vf(n,a,f),Aa(n,a,f)):(ot&&T&&Qh(a),a.flags|=1,En(n,a,l,f),a.child)}function bv(n,a,r,l,f){if(n===null){var m=r.type;return typeof m=="function"&&!Yh(m)&&m.defaultProps===void 0&&r.compare===null?(a.tag=15,a.type=m,Av(n,a,m,l,f)):(n=gu(r.type,null,l,a,a.mode,f),n.ref=a.ref,n.return=a,a.child=n)}if(m=n.child,!qf(n,f)){var _=m.memoizedProps;if(r=r.compare,r=r!==null?r:_l,r(_,l)&&n.ref===a.ref)return Aa(n,a,f)}return a.flags|=1,n=_a(m,l),n.ref=a.ref,n.return=a,a.child=n}function Av(n,a,r,l,f){if(n!==null){var m=n.memoizedProps;if(_l(m,l)&&n.ref===a.ref)if(tn=!1,a.pendingProps=l=m,qf(n,f))(n.flags&131072)!==0&&(tn=!0);else return a.lanes=n.lanes,Aa(n,a,f)}return Of(n,a,r,l,f)}function Nv(n,a,r,l){var f=l.children,m=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|r:r,n!==null){for(l=a.child=n.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~m}else l=0,a.child=null;return Cv(n,a,m,r,l)}if((r&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&_u(a,m!==null?m.cachePool:null),m!==null?Iy(a,m):hf(),Dy(a);else return l=a.lanes=536870912,Cv(n,a,m!==null?m.baseLanes|r:r,r,l)}else m!==null?(_u(a,m.cachePool),Iy(a,m),mi(),a.memoizedState=null):(n!==null&&_u(a,null),hf(),mi());return En(n,a,f,r),a.child}function Pl(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Cv(n,a,r,l,f){var m=rf();return m=m===null?null:{parent:Zt._currentValue,pool:m},a.memoizedState={baseLanes:r,cachePool:m},n!==null&&_u(a,null),hf(),Dy(a),n!==null&&io(n,a,l,!0),a.childLanes=f,null}function Ou(n,a){return a=Uu({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function Rv(n,a,r){return vr(a,n.child,null,r),n=Ou(a,a.pendingProps),n.flags|=2,Wn(a),a.memoizedState=null,n}function Gx(n,a,r){var l=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(ot){if(l.mode==="hidden")return n=Ou(a,l),a.lanes=536870912,Pl(null,n);if(mf(a),(n=It)?(n=BE(n,us),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:ri!==null?{id:Js,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},r=hy(n),r.return=a,a.child=r,yn=a,It=null)):n=null,n===null)throw li(a);return a.lanes=536870912,null}return Ou(a,l)}var m=n.memoizedState;if(m!==null){var _=m.dehydrated;if(mf(a),f)if(a.flags&256)a.flags&=-257,a=Rv(n,a,r);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(i(558));else if(tn||io(n,a,r,!1),f=(r&n.childLanes)!==0,tn||f){if(l=Ct,l!==null&&(_=nl(l,r),_!==0&&_!==m.retryLane))throw m.retryLane=_,ur(n,_),Vn(l,n,_),Pf;Yu(),a=Rv(n,a,r)}else n=m.treeContext,It=hs(_.nextSibling),yn=a,ot=!0,oi=null,us=!1,n!==null&&py(a,n),a=Ou(a,l),a.flags|=4096;return a}return n=_a(n.child,{mode:l.mode,children:l.children}),n.ref=a.ref,a.child=n,n.return=a,n}function Lu(n,a){var r=a.ref;if(r===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(n===null||n.ref!==r)&&(a.flags|=4194816)}}function Of(n,a,r,l,f){return mr(a),r=gf(n,a,r,l,void 0,f),l=yf(),n!==null&&!tn?(vf(n,a,f),Aa(n,a,f)):(ot&&l&&Qh(a),a.flags|=1,En(n,a,r,f),a.child)}function Iv(n,a,r,l,f,m){return mr(a),a.updateQueue=null,r=ky(a,l,r,f),jy(n),l=yf(),n!==null&&!tn?(vf(n,a,m),Aa(n,a,m)):(ot&&l&&Qh(a),a.flags|=1,En(n,a,r,m),a.child)}function Dv(n,a,r,l,f){if(mr(a),a.stateNode===null){var m=to,_=r.contextType;typeof _=="object"&&_!==null&&(m=vn(_)),m=new r(l,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=kf,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=l,m.state=a.memoizedState,m.refs={},lf(a),_=r.contextType,m.context=typeof _=="object"&&_!==null?vn(_):to,m.state=a.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(jf(a,r,_,l),m.state=a.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&kf.enqueueReplaceState(m,m.state,null),Il(a,l,m,f),Rl(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),l=!0}else if(n===null){m=a.stateNode;var T=a.memoizedProps,L=_r(r,T);m.props=L;var Z=m.context,ue=r.contextType;_=to,typeof ue=="object"&&ue!==null&&(_=vn(ue));var fe=r.getDerivedStateFromProps;ue=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=a.pendingProps!==T,ue||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||Z!==_)&&yv(a,m,l,_),ui=!1;var te=a.memoizedState;m.state=te,Il(a,l,m,f),Rl(),Z=a.memoizedState,T||te!==Z||ui?(typeof fe=="function"&&(jf(a,r,fe,l),Z=a.memoizedState),(L=ui||gv(a,r,L,l,te,Z,_))?(ue||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=l,a.memoizedState=Z),m.props=l,m.state=Z,m.context=_,l=L):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),l=!1)}else{m=a.stateNode,cf(n,a),_=a.memoizedProps,ue=_r(r,_),m.props=ue,fe=a.pendingProps,te=m.context,Z=r.contextType,L=to,typeof Z=="object"&&Z!==null&&(L=vn(Z)),T=r.getDerivedStateFromProps,(Z=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==fe||te!==L)&&yv(a,m,l,L),ui=!1,te=a.memoizedState,m.state=te,Il(a,l,m,f),Rl();var ie=a.memoizedState;_!==fe||te!==ie||ui||n!==null&&n.dependencies!==null&&vu(n.dependencies)?(typeof T=="function"&&(jf(a,r,T,l),ie=a.memoizedState),(ue=ui||gv(a,r,ue,l,te,ie,L)||n!==null&&n.dependencies!==null&&vu(n.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,ie,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,ie,L)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=1024),a.memoizedProps=l,a.memoizedState=ie),m.props=l,m.state=ie,m.context=L,l=ue):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&te===n.memoizedState||(a.flags|=1024),l=!1)}return m=l,Lu(n,a),l=(a.flags&128)!==0,m||l?(m=a.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,n!==null&&l?(a.child=vr(a,n.child,null,f),a.child=vr(a,null,r,f)):En(n,a,r,f),a.memoizedState=m.state,n=a.child):n=Aa(n,a,f),n}function jv(n,a,r,l){return hr(),a.flags|=256,En(n,a,r,l),a.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Uf(n){return{baseLanes:n,cachePool:Sy()}}function Vf(n,a,r){return n=n!==null?n.childLanes&~r:0,a&&(n|=Zn),n}function kv(n,a,r){var l=a.pendingProps,f=!1,m=(a.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(Gt.current&2)!==0),_&&(f=!0,a.flags&=-129),_=(a.flags&32)!==0,a.flags&=-33,n===null){if(ot){if(f?fi(a):mi(),(n=It)?(n=BE(n,us),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:ri!==null?{id:Js,overflow:Zs}:null,retryLane:536870912,hydrationErrors:null},r=hy(n),r.return=a,a.child=r,yn=a,It=null)):n=null,n===null)throw li(a);return Sm(n)?a.lanes=32:a.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(mi(),f=a.mode,T=Uu({mode:"hidden",children:T},f),l=dr(l,f,r,null),T.return=a,l.return=a,T.sibling=l,a.child=T,l=a.child,l.memoizedState=Uf(r),l.childLanes=Vf(n,_,r),a.memoizedState=Lf,Pl(null,l)):(fi(a),Ff(a,T))}var L=n.memoizedState;if(L!==null&&(T=L.dehydrated,T!==null)){if(m)a.flags&256?(fi(a),a.flags&=-257,a=Bf(n,a,r)):a.memoizedState!==null?(mi(),a.child=n.child,a.flags|=128,a=null):(mi(),T=l.fallback,f=a.mode,l=Uu({mode:"visible",children:l.children},f),T=dr(T,f,r,null),T.flags|=2,l.return=a,T.return=a,l.sibling=T,a.child=l,vr(a,n.child,null,r),l=a.child,l.memoizedState=Uf(r),l.childLanes=Vf(n,_,r),a.memoizedState=Lf,a=Pl(null,l));else if(fi(a),Sm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var Z=_.dgst;_=Z,l=Error(i(419)),l.stack="",l.digest=_,Tl({value:l,source:null,stack:null}),a=Bf(n,a,r)}else if(tn||io(n,a,r,!1),_=(r&n.childLanes)!==0,tn||_){if(_=Ct,_!==null&&(l=nl(_,r),l!==0&&l!==L.retryLane))throw L.retryLane=l,ur(n,l),Vn(_,n,l),Pf;_m(T)||Yu(),a=Bf(n,a,r)}else _m(T)?(a.flags|=192,a.child=n.child,a=null):(n=L.treeContext,It=hs(T.nextSibling),yn=a,ot=!0,oi=null,us=!1,n!==null&&py(a,n),a=Ff(a,l.children),a.flags|=4096);return a}return f?(mi(),T=l.fallback,f=a.mode,L=n.child,Z=L.sibling,l=_a(L,{mode:"hidden",children:l.children}),l.subtreeFlags=L.subtreeFlags&65011712,Z!==null?T=_a(Z,T):(T=dr(T,f,r,null),T.flags|=2),T.return=a,l.return=a,l.sibling=T,a.child=l,Pl(null,l),l=a.child,T=n.child.memoizedState,T===null?T=Uf(r):(f=T.cachePool,f!==null?(L=Zt._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Sy(),T={baseLanes:T.baseLanes|r,cachePool:f}),l.memoizedState=T,l.childLanes=Vf(n,_,r),a.memoizedState=Lf,Pl(n.child,l)):(fi(a),r=n.child,n=r.sibling,r=_a(r,{mode:"visible",children:l.children}),r.return=a,r.sibling=null,n!==null&&(_=a.deletions,_===null?(a.deletions=[n],a.flags|=16):_.push(n)),a.child=r,a.memoizedState=null,r)}function Ff(n,a){return a=Uu({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function Uu(n,a){return n=Xn(22,n,null,a),n.lanes=0,n}function Bf(n,a,r){return vr(a,n.child,null,r),n=Ff(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function Mv(n,a,r){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a),tf(n.return,a,r)}function zf(n,a,r,l,f,m){var _=n.memoizedState;_===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:f,treeForkCount:m}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=r,_.tailMode=f,_.treeForkCount=m)}function Pv(n,a,r){var l=a.pendingProps,f=l.revealOrder,m=l.tail;l=l.children;var _=Gt.current,T=(_&2)!==0;if(T?(_=_&1|2,a.flags|=128):_&=1,ce(Gt,_),En(n,a,l,r),l=ot?wl:0,!T&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mv(n,r,a);else if(n.tag===19)Mv(n,r,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(r=a.child,f=null;r!==null;)n=r.alternate,n!==null&&Au(n)===null&&(f=r),r=r.sibling;r=f,r===null?(f=a.child,a.child=null):(f=r.sibling,r.sibling=null),zf(a,!1,f,r,m,l);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=a.child,a.child=null;f!==null;){if(n=f.alternate,n!==null&&Au(n)===null){a.child=f;break}n=f.sibling,f.sibling=r,r=f,f=n}zf(a,!0,r,null,m,l);break;case"together":zf(a,!1,null,null,void 0,l);break;default:a.memoizedState=null}return a.child}function Aa(n,a,r){if(n!==null&&(a.dependencies=n.dependencies),yi|=a.lanes,(r&a.childLanes)===0)if(n!==null){if(io(n,a,r,!1),(r&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(i(153));if(a.child!==null){for(n=a.child,r=_a(n,n.pendingProps),a.child=r,r.return=a;n.sibling!==null;)n=n.sibling,r=r.sibling=_a(n,n.pendingProps),r.return=a;r.sibling=null}return a.child}function qf(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&vu(n)))}function $x(n,a,r){switch(a.tag){case 3:Je(a,a.stateNode.containerInfo),ci(a,Zt,n.memoizedState.cache),hr();break;case 27:case 5:ae(a);break;case 4:Je(a,a.stateNode.containerInfo);break;case 10:ci(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,mf(a),null;break;case 13:var l=a.memoizedState;if(l!==null)return l.dehydrated!==null?(fi(a),a.flags|=128,null):(r&a.child.childLanes)!==0?kv(n,a,r):(fi(a),n=Aa(n,a,r),n!==null?n.sibling:null);fi(a);break;case 19:var f=(n.flags&128)!==0;if(l=(r&a.childLanes)!==0,l||(io(n,a,r,!1),l=(r&a.childLanes)!==0),f){if(l)return Pv(n,a,r);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce(Gt,Gt.current),l)break;return null;case 22:return a.lanes=0,Nv(n,a,r,a.pendingProps);case 24:ci(a,Zt,n.memoizedState.cache)}return Aa(n,a,r)}function Ov(n,a,r){if(n!==null)if(n.memoizedProps!==a.pendingProps)tn=!0;else{if(!qf(n,r)&&(a.flags&128)===0)return tn=!1,$x(n,a,r);tn=(n.flags&131072)!==0}else tn=!1,ot&&(a.flags&1048576)!==0&&my(a,wl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var l=a.pendingProps;if(n=gr(a.elementType),a.type=n,typeof n=="function")Yh(n)?(l=_r(n,l),a.tag=1,a=Dv(null,a,n,l,r)):(a.tag=0,a=Of(null,a,n,l,r));else{if(n!=null){var f=n.$$typeof;if(f===X){a.tag=11,a=xv(null,a,n,l,r);break e}else if(f===N){a.tag=14,a=bv(null,a,n,l,r);break e}}throw a=Ie(n)||n,Error(i(306,a,""))}}return a;case 0:return Of(n,a,a.type,a.pendingProps,r);case 1:return l=a.type,f=_r(l,a.pendingProps),Dv(n,a,l,f,r);case 3:e:{if(Je(a,a.stateNode.containerInfo),n===null)throw Error(i(387));l=a.pendingProps;var m=a.memoizedState;f=m.element,cf(n,a),Il(a,l,null,r);var _=a.memoizedState;if(l=_.cache,ci(a,Zt,l),l!==m.cache&&nf(a,[Zt],r,!0),Rl(),l=_.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:_.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=jv(n,a,l,r);break e}else if(l!==f){f=os(Error(i(424)),a),Tl(f),a=jv(n,a,l,r);break e}else{switch(n=a.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(It=hs(n.firstChild),yn=a,ot=!0,oi=null,us=!0,r=Ny(a,null,l,r),a.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(hr(),l===f){a=Aa(n,a,r);break e}En(n,a,l,r)}a=a.child}return a;case 26:return Lu(n,a),n===null?(r=YE(a.type,null,a.pendingProps,null))?a.memoizedState=r:ot||(r=a.type,n=a.pendingProps,l=ed(Ce.current).createElement(r),l[Qt]=a,l[hn]=n,_n(l,r,n),Wt(l),a.stateNode=l):a.memoizedState=YE(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return ae(a),n===null&&ot&&(l=a.stateNode=HE(a.type,a.pendingProps,Ce.current),yn=a,us=!0,f=It,wi(a.type)?(wm=f,It=hs(l.firstChild)):It=f),En(n,a,a.pendingProps.children,r),Lu(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&ot&&((f=l=It)&&(l=wb(l,a.type,a.pendingProps,us),l!==null?(a.stateNode=l,yn=a,It=hs(l.firstChild),us=!1,f=!0):f=!1),f||li(a)),ae(a),f=a.type,m=a.pendingProps,_=n!==null?n.memoizedProps:null,l=m.children,ym(f,m)?l=null:_!==null&&ym(f,_)&&(a.flags|=32),a.memoizedState!==null&&(f=gf(n,a,Lx,null,null,r),Ql._currentValue=f),Lu(n,a),En(n,a,l,r),a.child;case 6:return n===null&&ot&&((n=r=It)&&(r=Tb(r,a.pendingProps,us),r!==null?(a.stateNode=r,yn=a,It=null,n=!0):n=!1),n||li(a)),null;case 13:return kv(n,a,r);case 4:return Je(a,a.stateNode.containerInfo),l=a.pendingProps,n===null?a.child=vr(a,null,l,r):En(n,a,l,r),a.child;case 11:return xv(n,a,a.type,a.pendingProps,r);case 7:return En(n,a,a.pendingProps,r),a.child;case 8:return En(n,a,a.pendingProps.children,r),a.child;case 12:return En(n,a,a.pendingProps.children,r),a.child;case 10:return l=a.pendingProps,ci(a,a.type,l.value),En(n,a,l.children,r),a.child;case 9:return f=a.type._context,l=a.pendingProps.children,mr(a),f=vn(f),l=l(f),a.flags|=1,En(n,a,l,r),a.child;case 14:return bv(n,a,a.type,a.pendingProps,r);case 15:return Av(n,a,a.type,a.pendingProps,r);case 19:return Pv(n,a,r);case 31:return Gx(n,a,r);case 22:return Nv(n,a,r,a.pendingProps);case 24:return mr(a),l=vn(Zt),n===null?(f=rf(),f===null&&(f=Ct,m=sf(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=r),f=m),a.memoizedState={parent:l,cache:f},lf(a),ci(a,Zt,f)):((n.lanes&r)!==0&&(cf(n,a),Il(a,null,null,r),Rl()),f=n.memoizedState,m=a.memoizedState,f.parent!==l?(f={parent:l,cache:l},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),ci(a,Zt,l)):(l=m.cache,ci(a,Zt,l),l!==f.cache&&nf(a,[Zt],r,!0))),En(n,a,a.pendingProps.children,r),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Na(n){n.flags|=4}function Hf(n,a,r,l,f){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(cE())n.flags|=8192;else throw yr=wu,of}else n.flags&=-16777217}function Lv(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!JE(a))if(cE())n.flags|=8192;else throw yr=wu,of}function Vu(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Gc():536870912,n.lanes|=a,vo|=a)}function Ol(n,a){if(!ot)switch(n.tailMode){case"hidden":a=n.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function Dt(n){var a=n.alternate!==null&&n.alternate.child===n.child,r=0,l=0;if(a)for(var f=n.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)r|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=r,a}function Yx(n,a,r){var l=a.pendingProps;switch(Wh(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return r=a.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ta(Zt),de(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ao(a)?Na(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Zh())),Dt(a),null;case 26:var f=a.type,m=a.memoizedState;return n===null?(Na(a),m!==null?(Dt(a),Lv(a,m)):(Dt(a),Hf(a,f,null,l,r))):m?m!==n.memoizedState?(Na(a),Dt(a),Lv(a,m)):(Dt(a),a.flags&=-16777217):(n=n.memoizedProps,n!==l&&Na(a),Dt(a),Hf(a,f,n,l,r)),null;case 27:if($(a),r=Ce.current,f=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==l&&Na(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return Dt(a),null}n=_e.current,ao(a)?gy(a):(n=HE(f,l,r),a.stateNode=n,Na(a))}return Dt(a),null;case 5:if($(a),f=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==l&&Na(a);else{if(!l){if(a.stateNode===null)throw Error(i(166));return Dt(a),null}if(m=_e.current,ao(a))gy(a);else{var _=ed(Ce.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?m.multiple=!0:l.size&&(m.size=l.size);break;default:m=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}m[Qt]=a,m[hn]=l;e:for(_=a.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===a)break e;for(;_.sibling===null;){if(_.return===null||_.return===a)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}a.stateNode=m;e:switch(_n(m,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Na(a)}}return Dt(a),Hf(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,r),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==l&&Na(a);else{if(typeof l!="string"&&a.stateNode===null)throw Error(i(166));if(n=Ce.current,ao(a)){if(n=a.stateNode,r=a.memoizedProps,l=null,f=yn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[Qt]=a,n=!!(n.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||kE(n.nodeValue,r)),n||li(a,!0)}else n=ed(n).createTextNode(l),n[Qt]=a,a.stateNode=n}return Dt(a),null;case 31:if(r=a.memoizedState,n===null||n.memoizedState!==null){if(l=ao(a),r!==null){if(n===null){if(!l)throw Error(i(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Qt]=a}else hr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),n=!1}else r=Zh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return a.flags&256?(Wn(a),a):(Wn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Dt(a),null;case 13:if(l=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=ao(a),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Qt]=a}else hr(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),f=!1}else f=Zh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Wn(a),a):(Wn(a),null)}return Wn(a),(a.flags&128)!==0?(a.lanes=r,a):(r=l!==null,n=n!==null&&n.memoizedState!==null,r&&(l=a.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)),r!==n&&r&&(a.child.flags|=8192),Vu(a,a.updateQueue),Dt(a),null);case 4:return de(),n===null&&hm(a.stateNode.containerInfo),Dt(a),null;case 10:return Ta(a.type),Dt(a),null;case 19:if(G(Gt),l=a.memoizedState,l===null)return Dt(a),null;if(f=(a.flags&128)!==0,m=l.rendering,m===null)if(f)Ol(l,!1);else{if(Ft!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(m=Au(n),m!==null){for(a.flags|=128,Ol(l,!1),n=m.updateQueue,a.updateQueue=n,Vu(a,n),a.subtreeFlags=0,n=r,r=a.child;r!==null;)dy(r,n),r=r.sibling;return ce(Gt,Gt.current&1|2),ot&&Sa(a,l.treeForkCount),a.child}n=n.sibling}l.tail!==null&&Ue()>Hu&&(a.flags|=128,f=!0,Ol(l,!1),a.lanes=4194304)}else{if(!f)if(n=Au(m),n!==null){if(a.flags|=128,f=!0,n=n.updateQueue,a.updateQueue=n,Vu(a,n),Ol(l,!0),l.tail===null&&l.tailMode==="hidden"&&!m.alternate&&!ot)return Dt(a),null}else 2*Ue()-l.renderingStartTime>Hu&&r!==536870912&&(a.flags|=128,f=!0,Ol(l,!1),a.lanes=4194304);l.isBackwards?(m.sibling=a.child,a.child=m):(n=l.last,n!==null?n.sibling=m:a.child=m,l.last=m)}return l.tail!==null?(n=l.tail,l.rendering=n,l.tail=n.sibling,l.renderingStartTime=Ue(),n.sibling=null,r=Gt.current,ce(Gt,f?r&1|2:r&1),ot&&Sa(a,l.treeForkCount),n):(Dt(a),null);case 22:case 23:return Wn(a),ff(),l=a.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(a.flags|=8192):l&&(a.flags|=8192),l?(r&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),r=a.updateQueue,r!==null&&Vu(a,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),l=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),l!==r&&(a.flags|=2048),n!==null&&G(pr),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),a.memoizedState.cache!==r&&(a.flags|=2048),Ta(Zt),Dt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Kx(n,a){switch(Wh(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Ta(Zt),de(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return $(a),null;case 31:if(a.memoizedState!==null){if(Wn(a),a.alternate===null)throw Error(i(340));hr()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(Wn(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(i(340));hr()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return G(Gt),null;case 4:return de(),null;case 10:return Ta(a.type),null;case 22:case 23:return Wn(a),ff(),n!==null&&G(pr),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Ta(Zt),null;case 25:return null;default:return null}}function Uv(n,a){switch(Wh(a),a.tag){case 3:Ta(Zt),de();break;case 26:case 27:case 5:$(a);break;case 4:de();break;case 31:a.memoizedState!==null&&Wn(a);break;case 13:Wn(a);break;case 19:G(Gt);break;case 10:Ta(a.type);break;case 22:case 23:Wn(a),ff(),n!==null&&G(pr);break;case 24:Ta(Zt)}}function Ll(n,a){try{var r=a.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var f=l.next;r=f;do{if((r.tag&n)===n){l=void 0;var m=r.create,_=r.inst;l=m(),_.destroy=l}r=r.next}while(r!==f)}}catch(T){St(a,a.return,T)}}function pi(n,a,r){try{var l=a.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&n)===n){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=a;var L=r,Z=T;try{Z()}catch(ue){St(f,L,ue)}}}l=l.next}while(l!==m)}}catch(ue){St(a,a.return,ue)}}function Vv(n){var a=n.updateQueue;if(a!==null){var r=n.stateNode;try{Ry(a,r)}catch(l){St(n,n.return,l)}}}function Fv(n,a,r){r.props=_r(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(l){St(n,a,l)}}function Ul(n,a){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof r=="function"?n.refCleanup=r(l):r.current=l}}catch(f){St(n,a,f)}}function ea(n,a){var r=n.ref,l=n.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(f){St(n,a,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){St(n,a,f)}else r.current=null}function Bv(n){var a=n.type,r=n.memoizedProps,l=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break e;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(f){St(n,n.return,f)}}function Gf(n,a,r){try{var l=n.stateNode;gb(l,n.type,r,a),l[hn]=a}catch(f){St(n,n.return,f)}}function zv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&wi(n.type)||n.tag===4}function $f(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||zv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&wi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Yf(n,a,r){var l=n.tag;if(l===5||l===6)n=n.stateNode,a?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,a):(a=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.appendChild(n),r=r._reactRootContainer,r!=null||a.onclick!==null||(a.onclick=ws));else if(l!==4&&(l===27&&wi(n.type)&&(r=n.stateNode,a=null),n=n.child,n!==null))for(Yf(n,a,r),n=n.sibling;n!==null;)Yf(n,a,r),n=n.sibling}function Fu(n,a,r){var l=n.tag;if(l===5||l===6)n=n.stateNode,a?r.insertBefore(n,a):r.appendChild(n);else if(l!==4&&(l===27&&wi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Fu(n,a,r),n=n.sibling;n!==null;)Fu(n,a,r),n=n.sibling}function qv(n){var a=n.stateNode,r=n.memoizedProps;try{for(var l=n.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);_n(a,l,r),a[Qt]=n,a[hn]=r}catch(m){St(n,n.return,m)}}var Ca=!1,nn=!1,Kf=!1,Hv=typeof WeakSet=="function"?WeakSet:Set,mn=null;function Xx(n,a){if(n=n.containerInfo,pm=od,n=ny(n),Fh(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var _=0,T=-1,L=-1,Z=0,ue=0,fe=n,te=null;t:for(;;){for(var ie;fe!==r||f!==0&&fe.nodeType!==3||(T=_+f),fe!==m||l!==0&&fe.nodeType!==3||(L=_+l),fe.nodeType===3&&(_+=fe.nodeValue.length),(ie=fe.firstChild)!==null;)te=fe,fe=ie;for(;;){if(fe===n)break t;if(te===r&&++Z===f&&(T=_),te===m&&++ue===l&&(L=_),(ie=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ie}r=T===-1||L===-1?null:{start:T,end:L}}else r=null}r=r||{start:0,end:0}}else r=null;for(gm={focusedElem:n,selectionRange:r},od=!1,mn=a;mn!==null;)if(a=mn,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,mn=n;else for(;mn!==null;){switch(a=mn,m=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)f=n[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,r=a,f=m.memoizedProps,m=m.memoizedState,l=r.stateNode;try{var De=_r(r.type,f);n=l.getSnapshotBeforeUpdate(De,m),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ve){St(r,r.return,Ve)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,r=n.nodeType,r===9)Em(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Em(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=a.sibling,n!==null){n.return=a.return,mn=n;break}mn=a.return}}function Gv(n,a,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Ia(n,r),l&4&&Ll(5,r);break;case 1:if(Ia(n,r),l&4)if(n=r.stateNode,a===null)try{n.componentDidMount()}catch(_){St(r,r.return,_)}else{var f=_r(r.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(f,a,n.__reactInternalSnapshotBeforeUpdate)}catch(_){St(r,r.return,_)}}l&64&&Vv(r),l&512&&Ul(r,r.return);break;case 3:if(Ia(n,r),l&64&&(n=r.updateQueue,n!==null)){if(a=null,r.child!==null)switch(r.child.tag){case 27:case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}try{Ry(n,a)}catch(_){St(r,r.return,_)}}break;case 27:a===null&&l&4&&qv(r);case 26:case 5:Ia(n,r),a===null&&l&4&&Bv(r),l&512&&Ul(r,r.return);break;case 12:Ia(n,r);break;case 31:Ia(n,r),l&4&&Kv(n,r);break;case 13:Ia(n,r),l&4&&Xv(n,r),l&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=ab.bind(null,r),xb(n,r))));break;case 22:if(l=r.memoizedState!==null||Ca,!l){a=a!==null&&a.memoizedState!==null||nn,f=Ca;var m=nn;Ca=l,(nn=a)&&!m?Da(n,r,(r.subtreeFlags&8772)!==0):Ia(n,r),Ca=f,nn=m}break;case 30:break;default:Ia(n,r)}}function $v(n){var a=n.alternate;a!==null&&(n.alternate=null,$v(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&Br(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Mt=null,Pn=!1;function Ra(n,a,r){for(r=r.child;r!==null;)Yv(n,a,r),r=r.sibling}function Yv(n,a,r){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Pe,r)}catch{}switch(r.tag){case 26:nn||ea(r,a),Ra(n,a,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:nn||ea(r,a);var l=Mt,f=Pn;wi(r.type)&&(Mt=r.stateNode,Pn=!1),Ra(n,a,r),Yl(r.stateNode),Mt=l,Pn=f;break;case 5:nn||ea(r,a);case 6:if(l=Mt,f=Pn,Mt=null,Ra(n,a,r),Mt=l,Pn=f,Mt!==null)if(Pn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(r.stateNode)}catch(m){St(r,a,m)}else try{Mt.removeChild(r.stateNode)}catch(m){St(r,a,m)}break;case 18:Mt!==null&&(Pn?(n=Mt,VE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),Ao(n)):VE(Mt,r.stateNode));break;case 4:l=Mt,f=Pn,Mt=r.stateNode.containerInfo,Pn=!0,Ra(n,a,r),Mt=l,Pn=f;break;case 0:case 11:case 14:case 15:pi(2,r,a),nn||pi(4,r,a),Ra(n,a,r);break;case 1:nn||(ea(r,a),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Fv(r,a,l)),Ra(n,a,r);break;case 21:Ra(n,a,r);break;case 22:nn=(l=nn)||r.memoizedState!==null,Ra(n,a,r),nn=l;break;default:Ra(n,a,r)}}function Kv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ao(n)}catch(r){St(a,a.return,r)}}}function Xv(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ao(n)}catch(r){St(a,a.return,r)}}function Qx(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new Hv),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new Hv),a;default:throw Error(i(435,n.tag))}}function Bu(n,a){var r=Qx(n);a.forEach(function(l){if(!r.has(l)){r.add(l);var f=ib.bind(null,n,l);l.then(f,f)}})}function On(n,a){var r=a.deletions;if(r!==null)for(var l=0;l<r.length;l++){var f=r[l],m=n,_=a,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(wi(T.type)){Mt=T.stateNode,Pn=!1;break e}break;case 5:Mt=T.stateNode,Pn=!1;break e;case 3:case 4:Mt=T.stateNode.containerInfo,Pn=!0;break e}T=T.return}if(Mt===null)throw Error(i(160));Yv(m,_,f),Mt=null,Pn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Qv(a,n),a=a.sibling}var Cs=null;function Qv(n,a){var r=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:On(a,n),Ln(n),l&4&&(pi(3,n,n.return),Ll(3,n),pi(5,n,n.return));break;case 1:On(a,n),Ln(n),l&512&&(nn||r===null||ea(r,r.return)),l&64&&Ca&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var f=Cs;if(On(a,n),Ln(n),l&512&&(nn||r===null||ea(r,r.return)),l&4){var m=r!==null?r.memoizedState:null;if(l=n.memoizedState,r===null)if(l===null)if(n.stateNode===null){e:{l=n.type,r=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Fs]||m[Qt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),_n(m,l,r),m[Qt]=n,Wt(m),l=m;break e;case"link":var _=QE("link","href",f).get(l+(r.href||""));if(_){for(var T=0;T<_.length;T++)if(m=_[T],m.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&m.getAttribute("rel")===(r.rel==null?null:r.rel)&&m.getAttribute("title")===(r.title==null?null:r.title)&&m.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(T,1);break t}}m=f.createElement(l),_n(m,l,r),f.head.appendChild(m);break;case"meta":if(_=QE("meta","content",f).get(l+(r.content||""))){for(T=0;T<_.length;T++)if(m=_[T],m.getAttribute("content")===(r.content==null?null:""+r.content)&&m.getAttribute("name")===(r.name==null?null:r.name)&&m.getAttribute("property")===(r.property==null?null:r.property)&&m.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&m.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(T,1);break t}}m=f.createElement(l),_n(m,l,r),f.head.appendChild(m);break;default:throw Error(i(468,l))}m[Qt]=n,Wt(m),l=m}n.stateNode=l}else WE(f,n.type,n.stateNode);else n.stateNode=XE(f,l,n.memoizedProps);else m!==l?(m===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):m.count--,l===null?WE(f,n.type,n.stateNode):XE(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Gf(n,n.memoizedProps,r.memoizedProps)}break;case 27:On(a,n),Ln(n),l&512&&(nn||r===null||ea(r,r.return)),r!==null&&l&4&&Gf(n,n.memoizedProps,r.memoizedProps);break;case 5:if(On(a,n),Ln(n),l&512&&(nn||r===null||ea(r,r.return)),n.flags&32){f=n.stateNode;try{Mn(f,"")}catch(De){St(n,n.return,De)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Gf(n,f,r!==null?r.memoizedProps:f)),l&1024&&(Kf=!0);break;case 6:if(On(a,n),Ln(n),l&4){if(n.stateNode===null)throw Error(i(162));l=n.memoizedProps,r=n.stateNode;try{r.nodeValue=l}catch(De){St(n,n.return,De)}}break;case 3:if(sd=null,f=Cs,Cs=td(a.containerInfo),On(a,n),Cs=f,Ln(n),l&4&&r!==null&&r.memoizedState.isDehydrated)try{Ao(a.containerInfo)}catch(De){St(n,n.return,De)}Kf&&(Kf=!1,Wv(n));break;case 4:l=Cs,Cs=td(n.stateNode.containerInfo),On(a,n),Ln(n),Cs=l;break;case 12:On(a,n),Ln(n);break;case 31:On(a,n),Ln(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Bu(n,l)));break;case 13:On(a,n),Ln(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(qu=Ue()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Bu(n,l)));break;case 22:f=n.memoizedState!==null;var L=r!==null&&r.memoizedState!==null,Z=Ca,ue=nn;if(Ca=Z||f,nn=ue||L,On(a,n),nn=ue,Ca=Z,Ln(n),l&8192)e:for(a=n.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(r===null||L||Ca||nn||Sr(n)),r=null,a=n;;){if(a.tag===5||a.tag===26){if(r===null){L=r=a;try{if(m=L.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=L.stateNode;var fe=L.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;T.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(De){St(L,L.return,De)}}}else if(a.tag===6){if(r===null){L=a;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(De){St(L,L.return,De)}}}else if(a.tag===18){if(r===null){L=a;try{var ie=L.stateNode;f?FE(ie,!0):FE(L.stateNode,!1)}catch(De){St(L,L.return,De)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;r===a&&(r=null),a=a.return}r===a&&(r=null),a.sibling.return=a.return,a=a.sibling}l&4&&(l=n.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Bu(n,r))));break;case 19:On(a,n),Ln(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Bu(n,l)));break;case 30:break;case 21:break;default:On(a,n),Ln(n)}}function Ln(n){var a=n.flags;if(a&2){try{for(var r,l=n.return;l!==null;){if(zv(l)){r=l;break}l=l.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,m=$f(n);Fu(n,m,f);break;case 5:var _=r.stateNode;r.flags&32&&(Mn(_,""),r.flags&=-33);var T=$f(n);Fu(n,T,_);break;case 3:case 4:var L=r.stateNode.containerInfo,Z=$f(n);Yf(n,Z,L);break;default:throw Error(i(161))}}catch(ue){St(n,n.return,ue)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function Wv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;Wv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function Ia(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Gv(n,a.alternate,a),a=a.sibling}function Sr(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:pi(4,a,a.return),Sr(a);break;case 1:ea(a,a.return);var r=a.stateNode;typeof r.componentWillUnmount=="function"&&Fv(a,a.return,r),Sr(a);break;case 27:Yl(a.stateNode);case 26:case 5:ea(a,a.return),Sr(a);break;case 22:a.memoizedState===null&&Sr(a);break;case 30:Sr(a);break;default:Sr(a)}n=n.sibling}}function Da(n,a,r){for(r=r&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var l=a.alternate,f=n,m=a,_=m.flags;switch(m.tag){case 0:case 11:case 15:Da(f,m,r),Ll(4,m);break;case 1:if(Da(f,m,r),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){St(l,l.return,Z)}if(l=m,f=l.updateQueue,f!==null){var T=l.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)Cy(L[f],T)}catch(Z){St(l,l.return,Z)}}r&&_&64&&Vv(m),Ul(m,m.return);break;case 27:qv(m);case 26:case 5:Da(f,m,r),r&&l===null&&_&4&&Bv(m),Ul(m,m.return);break;case 12:Da(f,m,r);break;case 31:Da(f,m,r),r&&_&4&&Kv(f,m);break;case 13:Da(f,m,r),r&&_&4&&Xv(f,m);break;case 22:m.memoizedState===null&&Da(f,m,r),Ul(m,m.return);break;case 30:break;default:Da(f,m,r)}a=a.sibling}}function Xf(n,a){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&xl(r))}function Qf(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&xl(n))}function Rs(n,a,r,l){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Jv(n,a,r,l),a=a.sibling}function Jv(n,a,r,l){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Rs(n,a,r,l),f&2048&&Ll(9,a);break;case 1:Rs(n,a,r,l);break;case 3:Rs(n,a,r,l),f&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&xl(n)));break;case 12:if(f&2048){Rs(n,a,r,l),n=a.stateNode;try{var m=a.memoizedProps,_=m.id,T=m.onPostCommit;typeof T=="function"&&T(_,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){St(a,a.return,L)}}else Rs(n,a,r,l);break;case 31:Rs(n,a,r,l);break;case 13:Rs(n,a,r,l);break;case 23:break;case 22:m=a.stateNode,_=a.alternate,a.memoizedState!==null?m._visibility&2?Rs(n,a,r,l):Vl(n,a):m._visibility&2?Rs(n,a,r,l):(m._visibility|=2,po(n,a,r,l,(a.subtreeFlags&10256)!==0||!1)),f&2048&&Xf(_,a);break;case 24:Rs(n,a,r,l),f&2048&&Qf(a.alternate,a);break;default:Rs(n,a,r,l)}}function po(n,a,r,l,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=n,_=a,T=r,L=l,Z=_.flags;switch(_.tag){case 0:case 11:case 15:po(m,_,T,L,f),Ll(8,_);break;case 23:break;case 22:var ue=_.stateNode;_.memoizedState!==null?ue._visibility&2?po(m,_,T,L,f):Vl(m,_):(ue._visibility|=2,po(m,_,T,L,f)),f&&Z&2048&&Xf(_.alternate,_);break;case 24:po(m,_,T,L,f),f&&Z&2048&&Qf(_.alternate,_);break;default:po(m,_,T,L,f)}a=a.sibling}}function Vl(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var r=n,l=a,f=l.flags;switch(l.tag){case 22:Vl(r,l),f&2048&&Xf(l.alternate,l);break;case 24:Vl(r,l),f&2048&&Qf(l.alternate,l);break;default:Vl(r,l)}a=a.sibling}}var Fl=8192;function go(n,a,r){if(n.subtreeFlags&Fl)for(n=n.child;n!==null;)Zv(n,a,r),n=n.sibling}function Zv(n,a,r){switch(n.tag){case 26:go(n,a,r),n.flags&Fl&&n.memoizedState!==null&&Ob(r,Cs,n.memoizedState,n.memoizedProps);break;case 5:go(n,a,r);break;case 3:case 4:var l=Cs;Cs=td(n.stateNode.containerInfo),go(n,a,r),Cs=l;break;case 22:n.memoizedState===null&&(l=n.alternate,l!==null&&l.memoizedState!==null?(l=Fl,Fl=16777216,go(n,a,r),Fl=l):go(n,a,r));break;default:go(n,a,r)}}function eE(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function Bl(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];mn=l,nE(l,n)}eE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)tE(n),n=n.sibling}function tE(n){switch(n.tag){case 0:case 11:case 15:Bl(n),n.flags&2048&&pi(9,n,n.return);break;case 3:Bl(n);break;case 12:Bl(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,zu(n)):Bl(n);break;default:Bl(n)}}function zu(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var r=0;r<a.length;r++){var l=a[r];mn=l,nE(l,n)}eE(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:pi(8,a,a.return),zu(a);break;case 22:r=a.stateNode,r._visibility&2&&(r._visibility&=-3,zu(a));break;default:zu(a)}n=n.sibling}}function nE(n,a){for(;mn!==null;){var r=mn;switch(r.tag){case 0:case 11:case 15:pi(8,r,a);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:xl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,mn=l;else e:for(r=n;mn!==null;){l=mn;var f=l.sibling,m=l.return;if($v(l),l===r){mn=null;break e}if(f!==null){f.return=m,mn=f;break e}mn=m}}}var Wx={getCacheForType:function(n){var a=vn(Zt),r=a.data.get(n);return r===void 0&&(r=n(),a.data.set(n,r)),r},cacheSignal:function(){return vn(Zt).controller.signal}},Jx=typeof WeakMap=="function"?WeakMap:Map,mt=0,Ct=null,et=null,nt=0,_t=0,Jn=null,gi=!1,yo=!1,Wf=!1,ja=0,Ft=0,yi=0,wr=0,Jf=0,Zn=0,vo=0,zl=null,Un=null,Zf=!1,qu=0,sE=0,Hu=1/0,Gu=null,vi=null,on=0,Ei=null,Eo=null,ka=0,em=0,tm=null,aE=null,ql=0,nm=null;function es(){return(mt&2)!==0&&nt!==0?nt&-nt:q.T!==null?lm():$c()}function iE(){if(Zn===0)if((nt&536870912)===0||ot){var n=Xi;Xi<<=1,(Xi&3932160)===0&&(Xi=262144),Zn=n}else Zn=536870912;return n=Qn.current,n!==null&&(n.flags|=32),Zn}function Vn(n,a,r){(n===Ct&&(_t===2||_t===9)||n.cancelPendingCommit!==null)&&(_o(n,0),_i(n,nt,Zn,!1)),Qi(n,r),((mt&2)===0||n!==Ct)&&(n===Ct&&((mt&2)===0&&(wr|=r),Ft===4&&_i(n,nt,Zn,!1)),ta(n))}function rE(n,a,r){if((mt&6)!==0)throw Error(i(327));var l=!r&&(a&127)===0&&(a&n.expiredLanes)===0||Es(n,a),f=l?tb(n,a):am(n,a,!0),m=l;do{if(f===0){yo&&!l&&_i(n,a,0,!1);break}else{if(r=n.current.alternate,m&&!Zx(r)){f=am(n,a,!1),m=!1;continue}if(f===2){if(m=a,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){a=_;e:{var T=n;f=zl;var L=T.current.memoizedState.isDehydrated;if(L&&(_o(T,_).flags|=256),_=am(T,_,!1),_!==2){if(Wf&&!L){T.errorRecoveryDisabledLanes|=m,wr|=m,f=4;break e}m=Un,Un=f,m!==null&&(Un===null?Un=m:Un.push.apply(Un,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){_o(n,0),_i(n,a,0,!0);break}e:{switch(l=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:_i(l,a,Zn,!gi);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=qu+300-Ue(),10<f)){if(_i(l,a,Zn,!gi),Ls(l,0,!0)!==0)break e;ka=a,l.timeoutHandle=LE(oE.bind(null,l,r,Un,Gu,Zf,a,Zn,wr,vo,gi,m,"Throttled",-0,0),f);break e}oE(l,r,Un,Gu,Zf,a,Zn,wr,vo,gi,m,null,-0,0)}}break}while(!0);ta(n)}function oE(n,a,r,l,f,m,_,T,L,Z,ue,fe,te,ie){if(n.timeoutHandle=-1,fe=a.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ws},Zv(a,m,fe);var De=(m&62914560)===m?qu-Ue():(m&4194048)===m?sE-Ue():0;if(De=Lb(fe,De),De!==null){ka=m,n.cancelPendingCommit=De(pE.bind(null,n,a,m,r,l,f,_,T,L,ue,fe,null,te,ie)),_i(n,m,_,!Z);return}}pE(n,a,m,r,l,f,_,T,L)}function Zx(n){for(var a=n;;){var r=a.tag;if((r===0||r===11||r===15)&&a.flags&16384&&(r=a.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var f=r[l],m=f.getSnapshot;f=f.value;try{if(!Kn(m(),f))return!1}catch{return!1}}if(r=a.child,a.subtreeFlags&16384&&r!==null)r.return=a,a=r;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _i(n,a,r,l){a&=~Jf,a&=~wr,n.suspendedLanes|=a,n.pingedLanes&=~a,l&&(n.warmLanes|=a),l=n.expirationTimes;for(var f=a;0<f;){var m=31-wt(f),_=1<<m;l[m]=-1,f&=~_}r!==0&&Wi(n,r,a)}function $u(){return(mt&6)===0?(Hl(0),!1):!0}function sm(){if(et!==null){if(_t===0)var n=et.return;else n=et,wa=fr=null,Ef(n),co=null,Al=0,n=et;for(;n!==null;)Uv(n.alternate,n),n=n.return;et=null}}function _o(n,a){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,Eb(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),ka=0,sm(),Ct=n,et=r=_a(n.current,null),nt=a,_t=0,Jn=null,gi=!1,yo=Es(n,a),Wf=!1,vo=Zn=Jf=wr=yi=Ft=0,Un=zl=null,Zf=!1,(a&8)!==0&&(a|=a&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=a;0<l;){var f=31-wt(l),m=1<<f;a|=n[f],l&=~m}return ja=a,fu(),r}function lE(n,a){Xe=null,q.H=Ml,a===lo||a===Su?(a=xy(),_t=3):a===of?(a=xy(),_t=4):_t=a===Pf?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Jn=a,et===null&&(Ft=1,Pu(n,os(a,n.current)))}function cE(){var n=Qn.current;return n===null?!0:(nt&4194048)===nt?ds===null:(nt&62914560)===nt||(nt&536870912)!==0?n===ds:!1}function uE(){var n=q.H;return q.H=Ml,n===null?Ml:n}function dE(){var n=q.A;return q.A=Wx,n}function Yu(){Ft=4,gi||(nt&4194048)!==nt&&Qn.current!==null||(yo=!0),(yi&134217727)===0&&(wr&134217727)===0||Ct===null||_i(Ct,nt,Zn,!1)}function am(n,a,r){var l=mt;mt|=2;var f=uE(),m=dE();(Ct!==n||nt!==a)&&(Gu=null,_o(n,a)),a=!1;var _=Ft;e:do try{if(_t!==0&&et!==null){var T=et,L=Jn;switch(_t){case 8:sm(),_=6;break e;case 3:case 2:case 9:case 6:Qn.current===null&&(a=!0);var Z=_t;if(_t=0,Jn=null,So(n,T,L,Z),r&&yo){_=0;break e}break;default:Z=_t,_t=0,Jn=null,So(n,T,L,Z)}}eb(),_=Ft;break}catch(ue){lE(n,ue)}while(!0);return a&&n.shellSuspendCounter++,wa=fr=null,mt=l,q.H=f,q.A=m,et===null&&(Ct=null,nt=0,fu()),_}function eb(){for(;et!==null;)hE(et)}function tb(n,a){var r=mt;mt|=2;var l=uE(),f=dE();Ct!==n||nt!==a?(Gu=null,Hu=Ue()+500,_o(n,a)):yo=Es(n,a);e:do try{if(_t!==0&&et!==null){a=et;var m=Jn;t:switch(_t){case 1:_t=0,Jn=null,So(n,a,m,1);break;case 2:case 9:if(wy(m)){_t=0,Jn=null,fE(a);break}a=function(){_t!==2&&_t!==9||Ct!==n||(_t=7),ta(n)},m.then(a,a);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:wy(m)?(_t=0,Jn=null,fE(a)):(_t=0,Jn=null,So(n,a,m,7));break;case 5:var _=null;switch(et.tag){case 26:_=et.memoizedState;case 5:case 27:var T=et;if(_?JE(_):T.stateNode.complete){_t=0,Jn=null;var L=T.sibling;if(L!==null)et=L;else{var Z=T.return;Z!==null?(et=Z,Ku(Z)):et=null}break t}}_t=0,Jn=null,So(n,a,m,5);break;case 6:_t=0,Jn=null,So(n,a,m,6);break;case 8:sm(),Ft=6;break e;default:throw Error(i(462))}}nb();break}catch(ue){lE(n,ue)}while(!0);return wa=fr=null,q.H=l,q.A=f,mt=r,et!==null?0:(Ct=null,nt=0,fu(),Ft)}function nb(){for(;et!==null&&!qe();)hE(et)}function hE(n){var a=Ov(n.alternate,n,ja);n.memoizedProps=n.pendingProps,a===null?Ku(n):et=a}function fE(n){var a=n,r=a.alternate;switch(a.tag){case 15:case 0:a=Iv(r,a,a.pendingProps,a.type,void 0,nt);break;case 11:a=Iv(r,a,a.pendingProps,a.type.render,a.ref,nt);break;case 5:Ef(a);default:Uv(r,a),a=et=dy(a,ja),a=Ov(r,a,ja)}n.memoizedProps=n.pendingProps,a===null?Ku(n):et=a}function So(n,a,r,l){wa=fr=null,Ef(a),co=null,Al=0;var f=a.return;try{if(Hx(n,f,a,r,nt)){Ft=1,Pu(n,os(r,n.current)),et=null;return}}catch(m){if(f!==null)throw et=f,m;Ft=1,Pu(n,os(r,n.current)),et=null;return}a.flags&32768?(ot||l===1?n=!0:yo||(nt&536870912)!==0?n=!1:(gi=n=!0,(l===2||l===9||l===3||l===6)&&(l=Qn.current,l!==null&&l.tag===13&&(l.flags|=16384))),mE(a,n)):Ku(a)}function Ku(n){var a=n;do{if((a.flags&32768)!==0){mE(a,gi);return}n=a.return;var r=Yx(a.alternate,a,ja);if(r!==null){et=r;return}if(a=a.sibling,a!==null){et=a;return}et=a=n}while(a!==null);Ft===0&&(Ft=5)}function mE(n,a){do{var r=Kx(n.alternate,n);if(r!==null){r.flags&=32767,et=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!a&&(n=n.sibling,n!==null)){et=n;return}et=n=r}while(n!==null);Ft=6,et=null}function pE(n,a,r,l,f,m,_,T,L){n.cancelPendingCommit=null;do Xu();while(on!==0);if((mt&6)!==0)throw Error(i(327));if(a!==null){if(a===n.current)throw Error(i(177));if(m=a.lanes|a.childLanes,m|=Gh,Oh(n,r,m,_,T,L),n===Ct&&(et=Ct=null,nt=0),Eo=a,Ei=n,ka=r,em=m,tm=f,aE=l,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,rb(Nt,function(){return _E(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||l){l=q.T,q.T=null,f=re.p,re.p=2,_=mt,mt|=4;try{Xx(n,a,r)}finally{mt=_,re.p=f,q.T=l}}on=1,gE(),yE(),vE()}}function gE(){if(on===1){on=0;var n=Ei,a=Eo,r=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||r){r=q.T,q.T=null;var l=re.p;re.p=2;var f=mt;mt|=4;try{Qv(a,n);var m=gm,_=ny(n.containerInfo),T=m.focusedElem,L=m.selectionRange;if(_!==T&&T&&T.ownerDocument&&ty(T.ownerDocument.documentElement,T)){if(L!==null&&Fh(T)){var Z=L.start,ue=L.end;if(ue===void 0&&(ue=Z),"selectionStart"in T)T.selectionStart=Z,T.selectionEnd=Math.min(ue,T.value.length);else{var fe=T.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ie=te.getSelection(),De=T.textContent.length,Ve=Math.min(L.start,De),At=L.end===void 0?Ve:Math.min(L.end,De);!ie.extend&&Ve>At&&(_=At,At=Ve,Ve=_);var Y=ey(T,Ve),F=ey(T,At);if(Y&&F&&(ie.rangeCount!==1||ie.anchorNode!==Y.node||ie.anchorOffset!==Y.offset||ie.focusNode!==F.node||ie.focusOffset!==F.offset)){var J=fe.createRange();J.setStart(Y.node,Y.offset),ie.removeAllRanges(),Ve>At?(ie.addRange(J),ie.extend(F.node,F.offset)):(J.setEnd(F.node,F.offset),ie.addRange(J))}}}}for(fe=[],ie=T;ie=ie.parentNode;)ie.nodeType===1&&fe.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<fe.length;T++){var he=fe[T];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}od=!!pm,gm=pm=null}finally{mt=f,re.p=l,q.T=r}}n.current=a,on=2}}function yE(){if(on===2){on=0;var n=Ei,a=Eo,r=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||r){r=q.T,q.T=null;var l=re.p;re.p=2;var f=mt;mt|=4;try{Gv(n,a.alternate,a)}finally{mt=f,re.p=l,q.T=r}}on=3}}function vE(){if(on===4||on===3){on=0,Ze();var n=Ei,a=Eo,r=ka,l=aE;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?on=5:(on=0,Eo=Ei=null,EE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(vi=null),ga(r),a=a.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Pe,a,void 0,(a.current.flags&128)===128)}catch{}if(l!==null){a=q.T,f=re.p,re.p=2,q.T=null;try{for(var m=n.onRecoverableError,_=0;_<l.length;_++){var T=l[_];m(T.value,{componentStack:T.stack})}}finally{q.T=a,re.p=f}}(ka&3)!==0&&Xu(),ta(n),f=n.pendingLanes,(r&261930)!==0&&(f&42)!==0?n===nm?ql++:(ql=0,nm=n):ql=0,Hl(0)}}function EE(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,xl(a)))}function Xu(){return gE(),yE(),vE(),_E()}function _E(){if(on!==5)return!1;var n=Ei,a=em;em=0;var r=ga(ka),l=q.T,f=re.p;try{re.p=32>r?32:r,q.T=null,r=tm,tm=null;var m=Ei,_=ka;if(on=0,Eo=Ei=null,ka=0,(mt&6)!==0)throw Error(i(331));var T=mt;if(mt|=4,tE(m.current),Jv(m,m.current,_,r),mt=T,Hl(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Pe,m)}catch{}return!0}finally{re.p=f,q.T=l,EE(n,a)}}function SE(n,a,r){a=os(r,a),a=Mf(n.stateNode,a,2),n=hi(n,a,2),n!==null&&(Qi(n,2),ta(n))}function St(n,a,r){if(n.tag===3)SE(n,n,r);else for(;a!==null;){if(a.tag===3){SE(a,n,r);break}else if(a.tag===1){var l=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vi===null||!vi.has(l))){n=os(r,n),r=wv(2),l=hi(a,r,2),l!==null&&(Tv(r,l,a,n),Qi(l,2),ta(l));break}}a=a.return}}function im(n,a,r){var l=n.pingCache;if(l===null){l=n.pingCache=new Jx;var f=new Set;l.set(a,f)}else f=l.get(a),f===void 0&&(f=new Set,l.set(a,f));f.has(r)||(Wf=!0,f.add(r),n=sb.bind(null,n,a,r),a.then(n,n))}function sb(n,a,r){var l=n.pingCache;l!==null&&l.delete(a),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Ct===n&&(nt&r)===r&&(Ft===4||Ft===3&&(nt&62914560)===nt&&300>Ue()-qu?(mt&2)===0&&_o(n,0):Jf|=r,vo===nt&&(vo=0)),ta(n)}function wE(n,a){a===0&&(a=Gc()),n=ur(n,a),n!==null&&(Qi(n,a),ta(n))}function ab(n){var a=n.memoizedState,r=0;a!==null&&(r=a.retryLane),wE(n,r)}function ib(n,a){var r=0;switch(n.tag){case 31:case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(r=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(a),wE(n,r)}function rb(n,a){return le(n,a)}var Qu=null,wo=null,rm=!1,Wu=!1,om=!1,Si=0;function ta(n){n!==wo&&n.next===null&&(wo===null?Qu=wo=n:wo=wo.next=n),Wu=!0,rm||(rm=!0,lb())}function Hl(n,a){if(!om&&Wu){om=!0;do for(var r=!1,l=Qu;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var _=l.suspendedLanes,T=l.pingedLanes;m=(1<<31-wt(42|n)+1)-1,m&=f&~(_&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(r=!0,AE(l,m))}else m=nt,m=Ls(l,l===Ct?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||Es(l,m)||(r=!0,AE(l,m));l=l.next}while(r);om=!1}}function ob(){TE()}function TE(){Wu=rm=!1;var n=0;Si!==0&&vb()&&(n=Si);for(var a=Ue(),r=null,l=Qu;l!==null;){var f=l.next,m=xE(l,a);m===0?(l.next=null,r===null?Qu=f:r.next=f,f===null&&(wo=r)):(r=l,(n!==0||(m&3)!==0)&&(Wu=!0)),l=f}on!==0&&on!==5||Hl(n),Si!==0&&(Si=0)}function xE(n,a){for(var r=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-wt(m),T=1<<_,L=f[_];L===-1?((T&r)===0||(T&l)!==0)&&(f[_]=Ph(T,a)):L<=a&&(n.expiredLanes|=T),m&=~T}if(a=Ct,r=nt,r=Ls(n,n===a?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,r===0||n===a&&(_t===2||_t===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&we(l),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Es(n,r)){if(a=r&-r,a===n.callbackPriority)return a;switch(l!==null&&we(l),ga(r)){case 2:case 8:r=dn;break;case 32:r=Nt;break;case 268435456:r=Gn;break;default:r=Nt}return l=bE.bind(null,n),r=le(r,l),n.callbackPriority=a,n.callbackNode=r,a}return l!==null&&l!==null&&we(l),n.callbackPriority=2,n.callbackNode=null,2}function bE(n,a){if(on!==0&&on!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Xu()&&n.callbackNode!==r)return null;var l=nt;return l=Ls(n,n===Ct?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(rE(n,l,a),xE(n,Ue()),n.callbackNode!=null&&n.callbackNode===r?bE.bind(null,n):null)}function AE(n,a){if(Xu())return null;rE(n,a,!0)}function lb(){_b(function(){(mt&6)!==0?le(qt,ob):TE()})}function lm(){if(Si===0){var n=ro;n===0&&(n=Ps,Ps<<=1,(Ps&261888)===0&&(Ps=256)),Si=n}return Si}function NE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Gr(""+n)}function CE(n,a){var r=a.ownerDocument.createElement("input");return r.name=a.name,r.value=a.value,n.id&&r.setAttribute("form",n.id),a.parentNode.insertBefore(r,a),n=new FormData(n),r.parentNode.removeChild(r),n}function cb(n,a,r,l,f){if(a==="submit"&&r&&r.stateNode===f){var m=NE((f[hn]||null).action),_=l.submitter;_&&(a=(a=_[hn]||null)?NE(a.formAction):_.getAttribute("formAction"),a!==null&&(m=a,_=null));var T=new Ks("action","action",null,l,f);n.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Si!==0){var L=_?CE(f,_):new FormData(f);Cf(r,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(T.preventDefault(),L=_?CE(f,_):new FormData(f),Cf(r,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var cm=0;cm<Hh.length;cm++){var um=Hh[cm],ub=um.toLowerCase(),db=um[0].toUpperCase()+um.slice(1);Ns(ub,"on"+db)}Ns(iy,"onAnimationEnd"),Ns(ry,"onAnimationIteration"),Ns(oy,"onAnimationStart"),Ns("dblclick","onDoubleClick"),Ns("focusin","onFocus"),Ns("focusout","onBlur"),Ns(Nx,"onTransitionRun"),Ns(Cx,"onTransitionStart"),Ns(Rx,"onTransitionCancel"),Ns(ly,"onTransitionEnd"),Hs("onMouseEnter",["mouseout","mouseover"]),Hs("onMouseLeave",["mouseout","mouseover"]),Hs("onPointerEnter",["pointerout","pointerover"]),Hs("onPointerLeave",["pointerout","pointerover"]),qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qs("onBeforeInput",["compositionend","keypress","textInput","paste"]),qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function RE(n,a){a=(a&4)!==0;for(var r=0;r<n.length;r++){var l=n[r],f=l.event;l=l.listeners;e:{var m=void 0;if(a)for(var _=l.length-1;0<=_;_--){var T=l[_],L=T.instance,Z=T.currentTarget;if(T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Z;try{m(f)}catch(ue){hu(ue)}f.currentTarget=null,m=L}else for(_=0;_<l.length;_++){if(T=l[_],L=T.instance,Z=T.currentTarget,T=T.listener,L!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=Z;try{m(f)}catch(ue){hu(ue)}f.currentTarget=null,m=L}}}}function tt(n,a){var r=a[Fr];r===void 0&&(r=a[Fr]=new Set);var l=n+"__bubble";r.has(l)||(IE(a,n,2,!1),r.add(l))}function dm(n,a,r){var l=0;a&&(l|=4),IE(r,n,l,a)}var Ju="_reactListening"+Math.random().toString(36).slice(2);function hm(n){if(!n[Ju]){n[Ju]=!0,sl.forEach(function(r){r!=="selectionchange"&&(hb.has(r)||dm(r,!1,n),dm(r,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Ju]||(a[Ju]=!0,dm("selectionchange",!1,a))}}function IE(n,a,r,l){switch(i_(a)){case 2:var f=Fb;break;case 8:f=Bb;break;default:f=Nm}r=f.bind(null,a,r,n),f=void 0,!nr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(a,r,{capture:!0,passive:f}):n.addEventListener(a,r,!0):f!==void 0?n.addEventListener(a,r,{passive:f}):n.addEventListener(a,r,!1)}function fm(n,a,r,l,f){var m=l;if((a&1)===0&&(a&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var L=_.tag;if((L===3||L===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Bs(T),_===null)return;if(L=_.tag,L===5||L===6||L===26||L===27){l=m=_;continue e}T=T.parentNode}}l=l.return}ni(function(){var Z=m,ue=ss(r),fe=[];e:{var te=cy.get(n);if(te!==void 0){var ie=Ks,De=n;switch(n){case"keypress":if(ar(r)===0)break e;case"keydown":case"keyup":ie=cu;break;case"focusin":De="focus",ie=rr;break;case"focusout":De="blur",ie=rr;break;case"beforeblur":case"afterblur":ie=rr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=gl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=v;break;case iy:case ry:case oy:ie=nu;break;case ly:ie=C;break;case"scroll":case"scrollend":ie=pl;break;case"wheel":ie=se;break;case"copy":case"cut":case"paste":ie=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ea;break;case"toggle":case"beforetoggle":ie=Ke}var Ve=(a&4)!==0,At=!Ve&&(n==="scroll"||n==="scrollend"),Y=Ve?te!==null?te+"Capture":null:te;Ve=[];for(var F=Z,J;F!==null;){var he=F;if(J=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||J===null||Y===null||(he=Ts(F,Y),he!=null&&Ve.push($l(F,he,J))),At)break;F=F.return}0<Ve.length&&(te=new ie(te,De,null,r,ue),fe.push({event:te,listeners:Ve}))}}if((a&7)===0){e:{if(te=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",te&&r!==hl&&(De=r.relatedTarget||r.fromElement)&&(Bs(De)||De[Vs]))break e;if((ie||te)&&(te=ue.window===ue?ue:(te=ue.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(De=r.relatedTarget||r.toElement,ie=Z,De=De?Bs(De):null,De!==null&&(At=u(De),Ve=De.tag,De!==At||Ve!==5&&Ve!==27&&Ve!==6)&&(De=null)):(ie=null,De=Z),ie!==De)){if(Ve=gl,he="onMouseLeave",Y="onMouseEnter",F="mouse",(n==="pointerout"||n==="pointerover")&&(Ve=Ea,he="onPointerLeave",Y="onPointerEnter",F="pointer"),At=ie==null?te:$n(ie),J=De==null?te:$n(De),te=new Ve(he,F+"leave",ie,r,ue),te.target=At,te.relatedTarget=J,he=null,Bs(ue)===Z&&(Ve=new Ve(Y,F+"enter",De,r,ue),Ve.target=J,Ve.relatedTarget=At,he=Ve),At=he,ie&&De)t:{for(Ve=fb,Y=ie,F=De,J=0,he=Y;he;he=Ve(he))J++;he=0;for(var Oe=F;Oe;Oe=Ve(Oe))he++;for(;0<J-he;)Y=Ve(Y),J--;for(;0<he-J;)F=Ve(F),he--;for(;J--;){if(Y===F||F!==null&&Y===F.alternate){Ve=Y;break t}Y=Ve(Y),F=Ve(F)}Ve=null}else Ve=null;ie!==null&&DE(fe,te,ie,Ve,!1),De!==null&&At!==null&&DE(fe,At,De,Ve,!0)}}e:{if(te=Z?$n(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var ct=Kg;else if($g(te))if(Xg)ct=xx;else{ct=wx;var ke=Sx}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Hr(Z.elementType)&&(ct=Kg):ct=Tx;if(ct&&(ct=ct(n,Z))){Yg(fe,ct,r,ue);break e}ke&&ke(n,te,Z),n==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&cl(te,"number",te.value)}switch(ke=Z?$n(Z):window,n){case"focusin":($g(ke)||ke.contentEditable==="true")&&(Jr=ke,Bh=Z,Sl=null);break;case"focusout":Sl=Bh=Jr=null;break;case"mousedown":zh=!0;break;case"contextmenu":case"mouseup":case"dragend":zh=!1,sy(fe,r,ue);break;case"selectionchange":if(Ax)break;case"keydown":case"keyup":sy(fe,r,ue)}var Qe;if(ft)e:{switch(n){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Wr?or(n,r)&&(st="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(st="onCompositionStart");st&&(Ws&&r.locale!=="ko"&&(Wr||st!=="onCompositionStart"?st==="onCompositionEnd"&&Wr&&(Qe=ml()):(Ys=ue,fl="value"in Ys?Ys.value:Ys.textContent,Wr=!0)),ke=Zu(Z,st),0<ke.length&&(st=new Qs(st,n,null,r,ue),fe.push({event:st,listeners:ke}),Qe?st.data=Qe:(Qe=Qr(r),Qe!==null&&(st.data=Qe)))),(Qe=is?yx(n,r):vx(n,r))&&(st=Zu(Z,"onBeforeInput"),0<st.length&&(ke=new Qs("onBeforeInput","beforeinput",null,r,ue),fe.push({event:ke,listeners:st}),ke.data=Qe)),cb(fe,n,Z,r,ue)}RE(fe,a)})}function $l(n,a,r){return{instance:n,listener:a,currentTarget:r}}function Zu(n,a){for(var r=a+"Capture",l=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ts(n,r),f!=null&&l.unshift($l(n,f,m)),f=Ts(n,a),f!=null&&l.push($l(n,f,m))),n.tag===3)return l;n=n.return}return[]}function fb(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function DE(n,a,r,l,f){for(var m=a._reactName,_=[];r!==null&&r!==l;){var T=r,L=T.alternate,Z=T.stateNode;if(T=T.tag,L!==null&&L===l)break;T!==5&&T!==26&&T!==27||Z===null||(L=Z,f?(Z=Ts(r,m),Z!=null&&_.unshift($l(r,Z,L))):f||(Z=Ts(r,m),Z!=null&&_.push($l(r,Z,L)))),r=r.return}_.length!==0&&n.push({event:a,listeners:_})}var mb=/\r\n?/g,pb=/\u0000|\uFFFD/g;function jE(n){return(typeof n=="string"?n:""+n).replace(mb,`
`).replace(pb,"")}function kE(n,a){return a=jE(a),jE(n)===a}function bt(n,a,r,l,f,m){switch(r){case"children":typeof l=="string"?a==="body"||a==="textarea"&&l===""||Mn(n,l):(typeof l=="number"||typeof l=="bigint")&&a!=="body"&&Mn(n,""+l);break;case"className":Yn(n,"class",l);break;case"tabIndex":Yn(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Yn(n,r,l);break;case"style":dl(n,l,m);break;case"data":if(a!=="object"){Yn(n,"data",l);break}case"src":case"href":if(l===""&&(a!=="a"||r!=="href")){n.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(r);break}l=Gr(""+l),n.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(r==="formAction"?(a!=="input"&&bt(n,a,"name",f.name,f,null),bt(n,a,"formEncType",f.formEncType,f,null),bt(n,a,"formMethod",f.formMethod,f,null),bt(n,a,"formTarget",f.formTarget,f,null)):(bt(n,a,"encType",f.encType,f,null),bt(n,a,"method",f.method,f,null),bt(n,a,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(r);break}l=Gr(""+l),n.setAttribute(r,l);break;case"onClick":l!=null&&(n.onclick=ws);break;case"onScroll":l!=null&&tt("scroll",n);break;case"onScrollEnd":l!=null&&tt("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}r=Gr(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(r,""+l):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":l===!0?n.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(r,l):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(r,l):n.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(r):n.setAttribute(r,l);break;case"popover":tt("beforetoggle",n),tt("toggle",n),zr(n,"popover",l);break;case"xlinkActuate":Jt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Jt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Jt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Jt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Jt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Jt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Jt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":zr(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Zc.get(r)||r,zr(n,r,l))}}function mm(n,a,r,l,f,m){switch(r){case"style":dl(n,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(r=l.__html,r!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"children":typeof l=="string"?Mn(n,l):(typeof l=="number"||typeof l=="bigint")&&Mn(n,""+l);break;case"onScroll":l!=null&&tt("scroll",n);break;case"onScrollEnd":l!=null&&tt("scrollend",n);break;case"onClick":l!=null&&(n.onclick=ws);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!al.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),a=r.slice(2,f?r.length-7:void 0),m=n[hn]||null,m=m!=null?m[r]:null,typeof m=="function"&&n.removeEventListener(a,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(a,l,f);break e}r in n?n[r]=l:l===!0?n.setAttribute(r,""):zr(n,r,l)}}}function _n(n,a,r){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",n),tt("load",n);var l=!1,f=!1,m;for(m in r)if(r.hasOwnProperty(m)){var _=r[m];if(_!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:bt(n,a,m,_,r,null)}}f&&bt(n,a,"srcSet",r.srcSet,r,null),l&&bt(n,a,"src",r.src,r,null);return;case"input":tt("invalid",n);var T=m=_=f=null,L=null,Z=null;for(l in r)if(r.hasOwnProperty(l)){var ue=r[l];if(ue!=null)switch(l){case"name":f=ue;break;case"type":_=ue;break;case"checked":L=ue;break;case"defaultChecked":Z=ue;break;case"value":m=ue;break;case"defaultValue":T=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(i(137,a));break;default:bt(n,a,l,ue,r,null)}}Qc(n,m,T,L,Z,_,f,!1);return;case"select":tt("invalid",n),l=_=m=null;for(f in r)if(r.hasOwnProperty(f)&&(T=r[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:bt(n,a,f,T,r,null)}a=m,r=_,n.multiple=!!l,a!=null?Ja(n,!!l,a,!1):r!=null&&Ja(n,!!l,r,!0);return;case"textarea":tt("invalid",n),m=f=l=null;for(_ in r)if(r.hasOwnProperty(_)&&(T=r[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:bt(n,a,_,T,r,null)}Za(n,l,f,m);return;case"option":for(L in r)if(r.hasOwnProperty(L)&&(l=r[L],l!=null))switch(L){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:bt(n,a,L,l,r,null)}return;case"dialog":tt("beforetoggle",n),tt("toggle",n),tt("cancel",n),tt("close",n);break;case"iframe":case"object":tt("load",n);break;case"video":case"audio":for(l=0;l<Gl.length;l++)tt(Gl[l],n);break;case"image":tt("error",n),tt("load",n);break;case"details":tt("toggle",n);break;case"embed":case"source":case"link":tt("error",n),tt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in r)if(r.hasOwnProperty(Z)&&(l=r[Z],l!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:bt(n,a,Z,l,r,null)}return;default:if(Hr(a)){for(ue in r)r.hasOwnProperty(ue)&&(l=r[ue],l!==void 0&&mm(n,a,ue,l,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(l=r[T],l!=null&&bt(n,a,T,l,r,null))}function gb(n,a,r,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,T=null,L=null,Z=null,ue=null;for(ie in r){var fe=r[ie];if(r.hasOwnProperty(ie)&&fe!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":L=fe;default:l.hasOwnProperty(ie)||bt(n,a,ie,null,l,fe)}}for(var te in l){var ie=l[te];if(fe=r[te],l.hasOwnProperty(te)&&(ie!=null||fe!=null))switch(te){case"type":m=ie;break;case"name":f=ie;break;case"checked":Z=ie;break;case"defaultChecked":ue=ie;break;case"value":_=ie;break;case"defaultValue":T=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,a));break;default:ie!==fe&&bt(n,a,te,ie,l,fe)}}qr(n,_,T,L,Z,ue,m,f);return;case"select":ie=_=T=te=null;for(m in r)if(L=r[m],r.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ie=L;default:l.hasOwnProperty(m)||bt(n,a,m,null,l,L)}for(f in l)if(m=l[f],L=r[f],l.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":te=m;break;case"defaultValue":T=m;break;case"multiple":_=m;default:m!==L&&bt(n,a,f,m,l,L)}a=T,r=_,l=ie,te!=null?Ja(n,!!r,te,!1):!!l!=!!r&&(a!=null?Ja(n,!!r,a,!0):Ja(n,!!r,r?[]:"",!1));return;case"textarea":ie=te=null;for(T in r)if(f=r[T],r.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:bt(n,a,T,null,l,f)}for(_ in l)if(f=l[_],m=r[_],l.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":te=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&bt(n,a,_,f,l,m)}Wc(n,te,ie);return;case"option":for(var De in r)if(te=r[De],r.hasOwnProperty(De)&&te!=null&&!l.hasOwnProperty(De))switch(De){case"selected":n.selected=!1;break;default:bt(n,a,De,null,l,te)}for(L in l)if(te=l[L],ie=r[L],l.hasOwnProperty(L)&&te!==ie&&(te!=null||ie!=null))switch(L){case"selected":n.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:bt(n,a,L,te,l,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in r)te=r[Ve],r.hasOwnProperty(Ve)&&te!=null&&!l.hasOwnProperty(Ve)&&bt(n,a,Ve,null,l,te);for(Z in l)if(te=l[Z],ie=r[Z],l.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,a));break;default:bt(n,a,Z,te,l,ie)}return;default:if(Hr(a)){for(var At in r)te=r[At],r.hasOwnProperty(At)&&te!==void 0&&!l.hasOwnProperty(At)&&mm(n,a,At,void 0,l,te);for(ue in l)te=l[ue],ie=r[ue],!l.hasOwnProperty(ue)||te===ie||te===void 0&&ie===void 0||mm(n,a,ue,te,l,ie);return}}for(var Y in r)te=r[Y],r.hasOwnProperty(Y)&&te!=null&&!l.hasOwnProperty(Y)&&bt(n,a,Y,null,l,te);for(fe in l)te=l[fe],ie=r[fe],!l.hasOwnProperty(fe)||te===ie||te==null&&ie==null||bt(n,a,fe,te,l,ie)}function ME(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yb(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,r=performance.getEntriesByType("resource"),l=0;l<r.length;l++){var f=r[l],m=f.transferSize,_=f.initiatorType,T=f.duration;if(m&&T&&ME(_)){for(_=0,T=f.responseEnd,l+=1;l<r.length;l++){var L=r[l],Z=L.startTime;if(Z>T)break;var ue=L.transferSize,fe=L.initiatorType;ue&&ME(fe)&&(L=L.responseEnd,_+=ue*(L<T?1:(T-Z)/(L-Z)))}if(--l,a+=8*(m+_)/(f.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var pm=null,gm=null;function ed(n){return n.nodeType===9?n:n.ownerDocument}function PE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OE(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function ym(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var vm=null;function vb(){var n=window.event;return n&&n.type==="popstate"?n===vm?!1:(vm=n,!0):(vm=null,!1)}var LE=typeof setTimeout=="function"?setTimeout:void 0,Eb=typeof clearTimeout=="function"?clearTimeout:void 0,UE=typeof Promise=="function"?Promise:void 0,_b=typeof queueMicrotask=="function"?queueMicrotask:typeof UE<"u"?function(n){return UE.resolve(null).then(n).catch(Sb)}:LE;function Sb(n){setTimeout(function(){throw n})}function wi(n){return n==="head"}function VE(n,a){var r=a,l=0;do{var f=r.nextSibling;if(n.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(l===0){n.removeChild(f),Ao(a);return}l--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")l++;else if(r==="html")Yl(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Yl(r);for(var m=r.firstChild;m;){var _=m.nextSibling,T=m.nodeName;m[Fs]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||r.removeChild(m),m=_}}else r==="body"&&Yl(n.ownerDocument.body);r=f}while(r);Ao(a)}function FE(n,a){var r=n;n=0;do{var l=r.nextSibling;if(r.nodeType===1?a?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(a?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=l}while(r)}function Em(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var r=a;switch(a=a.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Em(r),Br(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function wb(n,a,r,l){for(;n.nodeType===1;){var f=r;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Fs])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=hs(n.nextSibling),n===null)break}return null}function Tb(n,a,r){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=hs(n.nextSibling),n===null))return null;return n}function BE(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=hs(n.nextSibling),n===null))return null;return n}function _m(n){return n.data==="$?"||n.data==="$~"}function Sm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function xb(n,a){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||r.readyState!=="loading")a();else{var l=function(){a(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function hs(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var wm=null;function zE(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(a===0)return hs(n.nextSibling);a--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||a++}n=n.nextSibling}return null}function qE(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(a===0)return n;a--}else r!=="/$"&&r!=="/&"||a++}n=n.previousSibling}return null}function HE(n,a,r){switch(a=ed(r),n){case"html":if(n=a.documentElement,!n)throw Error(i(452));return n;case"head":if(n=a.head,!n)throw Error(i(453));return n;case"body":if(n=a.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Yl(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);Br(n)}var fs=new Map,GE=new Set;function td(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ma=re.d;re.d={f:bb,r:Ab,D:Nb,C:Cb,L:Rb,m:Ib,X:jb,S:Db,M:kb};function bb(){var n=Ma.f(),a=$u();return n||a}function Ab(n){var a=ns(n);a!==null&&a.tag===5&&a.type==="form"?lv(a):Ma.r(n)}var To=typeof document>"u"?null:document;function $E(n,a,r){var l=To;if(l&&typeof a=="string"&&a){var f=kn(a);f='link[rel="'+n+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),GE.has(f)||(GE.add(f),n={rel:n,crossOrigin:r,href:a},l.querySelector(f)===null&&(a=l.createElement("link"),_n(a,"link",n),Wt(a),l.head.appendChild(a)))}}function Nb(n){Ma.D(n),$E("dns-prefetch",n,null)}function Cb(n,a){Ma.C(n,a),$E("preconnect",n,a)}function Rb(n,a,r){Ma.L(n,a,r);var l=To;if(l&&n&&a){var f='link[rel="preload"][as="'+kn(a)+'"]';a==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+kn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+kn(r.imageSizes)+'"]')):f+='[href="'+kn(n)+'"]';var m=f;switch(a){case"style":m=xo(n);break;case"script":m=bo(n)}fs.has(m)||(n=w({rel:"preload",href:a==="image"&&r&&r.imageSrcSet?void 0:n,as:a},r),fs.set(m,n),l.querySelector(f)!==null||a==="style"&&l.querySelector(Kl(m))||a==="script"&&l.querySelector(Xl(m))||(a=l.createElement("link"),_n(a,"link",n),Wt(a),l.head.appendChild(a)))}}function Ib(n,a){Ma.m(n,a);var r=To;if(r&&n){var l=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+kn(l)+'"][href="'+kn(n)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=bo(n)}if(!fs.has(m)&&(n=w({rel:"modulepreload",href:n},a),fs.set(m,n),r.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Xl(m)))return}l=r.createElement("link"),_n(l,"link",n),Wt(l),r.head.appendChild(l)}}}function Db(n,a,r){Ma.S(n,a,r);var l=To;if(l&&n){var f=zs(l).hoistableStyles,m=xo(n);a=a||"default";var _=f.get(m);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Kl(m)))T.loading=5;else{n=w({rel:"stylesheet",href:n,"data-precedence":a},r),(r=fs.get(m))&&Tm(n,r);var L=_=l.createElement("link");Wt(L),_n(L,"link",n),L._p=new Promise(function(Z,ue){L.onload=Z,L.onerror=ue}),L.addEventListener("load",function(){T.loading|=1}),L.addEventListener("error",function(){T.loading|=2}),T.loading|=4,nd(_,a,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(m,_)}}}function jb(n,a){Ma.X(n,a);var r=To;if(r&&n){var l=zs(r).hoistableScripts,f=bo(n),m=l.get(f);m||(m=r.querySelector(Xl(f)),m||(n=w({src:n,async:!0},a),(a=fs.get(f))&&xm(n,a),m=r.createElement("script"),Wt(m),_n(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function kb(n,a){Ma.M(n,a);var r=To;if(r&&n){var l=zs(r).hoistableScripts,f=bo(n),m=l.get(f);m||(m=r.querySelector(Xl(f)),m||(n=w({src:n,async:!0,type:"module"},a),(a=fs.get(f))&&xm(n,a),m=r.createElement("script"),Wt(m),_n(m,"link",n),r.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function YE(n,a,r,l){var f=(f=Ce.current)?td(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(a=xo(r.href),r=zs(f).hoistableStyles,l=r.get(a),l||(l={type:"style",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=xo(r.href);var m=zs(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(Kl(n)))&&!m._p&&(_.instance=m,_.state.loading=5),fs.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},fs.set(n,r),m||Mb(f,n,r,_.state))),a&&l===null)throw Error(i(528,""));return _}if(a&&l!==null)throw Error(i(529,""));return null;case"script":return a=r.async,r=r.src,typeof r=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=bo(r),r=zs(f).hoistableScripts,l=r.get(a),l||(l={type:"script",instance:null,count:0,state:null},r.set(a,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function xo(n){return'href="'+kn(n)+'"'}function Kl(n){return'link[rel="stylesheet"]['+n+"]"}function KE(n){return w({},n,{"data-precedence":n.precedence,precedence:null})}function Mb(n,a,r,l){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=n.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),_n(a,"link",r),Wt(a),n.head.appendChild(a))}function bo(n){return'[src="'+kn(n)+'"]'}function Xl(n){return"script[async]"+n}function XE(n,a,r){if(a.count++,a.instance===null)switch(a.type){case"style":var l=n.querySelector('style[data-href~="'+kn(r.href)+'"]');if(l)return a.instance=l,Wt(l),l;var f=w({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),Wt(l),_n(l,"style",f),nd(l,r.precedence,n),a.instance=l;case"stylesheet":f=xo(r.href);var m=n.querySelector(Kl(f));if(m)return a.state.loading|=4,a.instance=m,Wt(m),m;l=KE(r),(f=fs.get(f))&&Tm(l,f),m=(n.ownerDocument||n).createElement("link"),Wt(m);var _=m;return _._p=new Promise(function(T,L){_.onload=T,_.onerror=L}),_n(m,"link",l),a.state.loading|=4,nd(m,r.precedence,n),a.instance=m;case"script":return m=bo(r.src),(f=n.querySelector(Xl(m)))?(a.instance=f,Wt(f),f):(l=r,(f=fs.get(m))&&(l=w({},r),xm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),Wt(f),_n(f,"link",l),n.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(l=a.instance,a.state.loading|=4,nd(l,r.precedence,n));return a.instance}function nd(n,a,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===a)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(a=r.nodeType===9?r.head:r,a.insertBefore(n,a.firstChild))}function Tm(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function xm(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var sd=null;function QE(n,a,r){if(sd===null){var l=new Map,f=sd=new Map;f.set(r,l)}else f=sd,l=f.get(r),l||(l=new Map,f.set(r,l));if(l.has(n))return l;for(l.set(n,null),r=r.getElementsByTagName(n),f=0;f<r.length;f++){var m=r[f];if(!(m[Fs]||m[Qt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(a)||"";_=n+_;var T=l.get(_);T?T.push(m):l.set(_,[m])}}return l}function WE(n,a,r){n=n.ownerDocument||n,n.head.insertBefore(r,a==="title"?n.querySelector("head > title"):null)}function Pb(n,a,r){if(r===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return n=a.disabled,typeof a.precedence=="string"&&n==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function JE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Ob(n,a,r,l){if(r.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=xo(l.href),m=a.querySelector(Kl(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=ad.bind(n),a.then(n,n)),r.state.loading|=4,r.instance=m,Wt(m);return}m=a.ownerDocument||a,l=KE(l),(f=fs.get(f))&&Tm(l,f),m=m.createElement("link"),Wt(m);var _=m;_._p=new Promise(function(T,L){_.onload=T,_.onerror=L}),_n(m,"link",l),r.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,a),(a=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=ad.bind(n),a.addEventListener("load",r),a.addEventListener("error",r))}}var bm=0;function Lb(n,a){return n.stylesheets&&n.count===0&&rd(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var l=setTimeout(function(){if(n.stylesheets&&rd(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+a);0<n.imgBytes&&bm===0&&(bm=62500*yb());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&rd(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>bm?50:800)+a);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function ad(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rd(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var id=null;function rd(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,id=new Map,a.forEach(Ub,n),id=null,ad.call(n))}function Ub(n,a){if(!(a.state.loading&4)){var r=id.get(n);if(r)var l=r.get(null);else{r=new Map,id.set(n,r);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),l=_)}l&&r.set(null,l)}f=a.instance,_=f.getAttribute("data-precedence"),m=r.get(_)||l,m===l&&r.set(null,f),r.set(_,f),this.count++,l=ad.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),a.state.loading|=4}}var Ql={$$typeof:Q,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function Vb(n,a,r,l,f,m,_,T,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.hiddenUpdates=Us(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function ZE(n,a,r,l,f,m,_,T,L,Z,ue,fe){return n=new Vb(n,a,r,_,L,Z,ue,fe,T),a=1,m===!0&&(a|=24),m=Xn(3,null,null,a),n.current=m,m.stateNode=n,a=sf(),a.refCount++,n.pooledCache=a,a.refCount++,m.memoizedState={element:l,isDehydrated:r,cache:a},lf(m),n}function e_(n){return n?(n=to,n):to}function t_(n,a,r,l,f,m){f=e_(f),l.context===null?l.context=f:l.pendingContext=f,l=di(a),l.payload={element:r},m=m===void 0?null:m,m!==null&&(l.callback=m),r=hi(n,l,a),r!==null&&(Vn(r,n,a),Cl(r,n,a))}function n_(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<a?r:a}}function Am(n,a){n_(n,a),(n=n.alternate)&&n_(n,a)}function s_(n){if(n.tag===13||n.tag===31){var a=ur(n,67108864);a!==null&&Vn(a,n,67108864),Am(n,67108864)}}function a_(n){if(n.tag===13||n.tag===31){var a=es();a=Ji(a);var r=ur(n,a);r!==null&&Vn(r,n,a),Am(n,a)}}var od=!0;function Fb(n,a,r,l){var f=q.T;q.T=null;var m=re.p;try{re.p=2,Nm(n,a,r,l)}finally{re.p=m,q.T=f}}function Bb(n,a,r,l){var f=q.T;q.T=null;var m=re.p;try{re.p=8,Nm(n,a,r,l)}finally{re.p=m,q.T=f}}function Nm(n,a,r,l){if(od){var f=Cm(l);if(f===null)fm(n,a,l,ld,r),r_(n,l);else if(qb(f,n,a,r,l))l.stopPropagation();else if(r_(n,l),a&4&&-1<zb.indexOf(n)){for(;f!==null;){var m=ns(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Os(m.pendingLanes);if(_!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var L=1<<31-wt(_);T.entanglements[1]|=L,_&=~L}ta(m),(mt&6)===0&&(Hu=Ue()+500,Hl(0))}}break;case 31:case 13:T=ur(m,2),T!==null&&Vn(T,m,2),$u(),Am(m,2)}if(m=Cm(l),m===null&&fm(n,a,l,ld,r),m===f)break;f=m}f!==null&&l.stopPropagation()}else fm(n,a,l,null,r)}}function Cm(n){return n=ss(n),Rm(n)}var ld=null;function Rm(n){if(ld=null,n=Bs(n),n!==null){var a=u(n);if(a===null)n=null;else{var r=a.tag;if(r===13){if(n=h(a),n!==null)return n;n=null}else if(r===31){if(n=p(a),n!==null)return n;n=null}else if(r===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return ld=n,null}function i_(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ht()){case qt:return 2;case dn:return 8;case Nt:case Rt:return 32;case Gn:return 268435456;default:return 32}default:return 32}}var Im=!1,Ti=null,xi=null,bi=null,Wl=new Map,Jl=new Map,Ai=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r_(n,a){switch(n){case"focusin":case"focusout":Ti=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":Wl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(a.pointerId)}}function Zl(n,a,r,l,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:a,domEventName:r,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},a!==null&&(a=ns(a),a!==null&&s_(a)),n):(n.eventSystemFlags|=l,a=n.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),n)}function qb(n,a,r,l,f){switch(a){case"focusin":return Ti=Zl(Ti,n,a,r,l,f),!0;case"dragenter":return xi=Zl(xi,n,a,r,l,f),!0;case"mouseover":return bi=Zl(bi,n,a,r,l,f),!0;case"pointerover":var m=f.pointerId;return Wl.set(m,Zl(Wl.get(m)||null,n,a,r,l,f)),!0;case"gotpointercapture":return m=f.pointerId,Jl.set(m,Zl(Jl.get(m)||null,n,a,r,l,f)),!0}return!1}function o_(n){var a=Bs(n.target);if(a!==null){var r=u(a);if(r!==null){if(a=r.tag,a===13){if(a=h(r),a!==null){n.blockedOn=a,_s(n.priority,function(){a_(r)});return}}else if(a===31){if(a=p(r),a!==null){n.blockedOn=a,_s(n.priority,function(){a_(r)});return}}else if(a===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cd(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var r=Cm(n.nativeEvent);if(r===null){r=n.nativeEvent;var l=new r.constructor(r.type,r);hl=l,r.target.dispatchEvent(l),hl=null}else return a=ns(r),a!==null&&s_(a),n.blockedOn=r,!1;a.shift()}return!0}function l_(n,a,r){cd(n)&&r.delete(a)}function Hb(){Im=!1,Ti!==null&&cd(Ti)&&(Ti=null),xi!==null&&cd(xi)&&(xi=null),bi!==null&&cd(bi)&&(bi=null),Wl.forEach(l_),Jl.forEach(l_)}function ud(n,a){n.blockedOn===a&&(n.blockedOn=null,Im||(Im=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Hb)))}var dd=null;function c_(n){dd!==n&&(dd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){dd===n&&(dd=null);for(var a=0;a<n.length;a+=3){var r=n[a],l=n[a+1],f=n[a+2];if(typeof l!="function"){if(Rm(l||r)===null)continue;break}var m=ns(r);m!==null&&(n.splice(a,3),a-=3,Cf(m,{pending:!0,data:f,method:r.method,action:l},l,f))}}))}function Ao(n){function a(L){return ud(L,n)}Ti!==null&&ud(Ti,n),xi!==null&&ud(xi,n),bi!==null&&ud(bi,n),Wl.forEach(a),Jl.forEach(a);for(var r=0;r<Ai.length;r++){var l=Ai[r];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Ai.length&&(r=Ai[0],r.blockedOn===null);)o_(r),r.blockedOn===null&&Ai.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var f=r[l],m=r[l+1],_=f[hn]||null;if(typeof m=="function")_||c_(r);else if(_){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[hn]||null)T=_.formAction;else if(Rm(f)!==null)continue}else T=_.action;typeof T=="function"?r[l+1]=T:(r.splice(l,3),l-=3),c_(r)}}}function u_(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),l||setTimeout(r,20)}function r(){if(!l&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(r,100),function(){l=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Dm(n){this._internalRoot=n}hd.prototype.render=Dm.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(i(409));var r=a.current,l=es();t_(r,l,n,a,null,null)},hd.prototype.unmount=Dm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;t_(n.current,2,null,n,null,null),$u(),a[Vs]=null}};function hd(n){this._internalRoot=n}hd.prototype.unstable_scheduleHydration=function(n){if(n){var a=$c();n={blockedOn:null,target:n,priority:a};for(var r=0;r<Ai.length&&a!==0&&a<Ai[r].priority;r++);Ai.splice(r,0,n),r===0&&o_(n)}};var d_=e.version;if(d_!=="19.2.0")throw Error(i(527,d_,"19.2.0"));re.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=y(a),n=n!==null?E(n):null,n=n===null?null:n.stateNode,n};var Gb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{Pe=fd.inject(Gb),gt=fd}catch{}}return tc.createRoot=function(n,a){if(!o(n))throw Error(i(299));var r=!1,l="",f=vv,m=Ev,_=_v;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=ZE(n,1,!1,null,null,r,l,null,f,m,_,u_),n[Vs]=a.current,hm(n),new Dm(a)},tc.hydrateRoot=function(n,a,r){if(!o(n))throw Error(i(299));var l=!1,f="",m=vv,_=Ev,T=_v,L=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(m=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(L=r.formState)),a=ZE(n,1,!0,a,r??null,l,f,L,m,_,T,u_),a.context=e_(null),r=a.current,l=es(),l=Ji(l),f=di(l),f.callback=null,hi(r,f,l),r=l,a.current.lanes=r,Qi(a,r),ta(a),n[Vs]=a.current,hm(n),new hd(a)},tc.version="19.2.0",tc}var S_;function nA(){if(S_)return Mm.exports;S_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Mm.exports=tA(),Mm.exports}var sA=nA();const aA=h0(sA);var w_="popstate";function iA(s={}){function e(i,o){let{pathname:u,search:h,hash:p}=i.location;return ep("",{pathname:u,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Ec(o)}return oA(e,t,null,s)}function Lt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function js(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rA(){return Math.random().toString(36).substring(2,10)}function T_(s,e){return{usr:s.state,key:s.key,idx:e}}function ep(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?qo(e):e,state:t,key:e&&e.key||i||rA()}}function Ec({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function qo(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function oA(s,e,t,i={}){let{window:o=document.defaultView,v5Compat:u=!1}=i,h=o.history,p="POP",g=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function w(){p="POP";let P=E(),K=P==null?null:P-y;y=P,g&&g({action:p,location:B.location,delta:K})}function b(P,K){p="PUSH";let V=ep(B.location,P,K);y=E()+1;let Q=T_(V,y),X=B.createHref(V);try{h.pushState(Q,"",X)}catch(pe){if(pe instanceof DOMException&&pe.name==="DataCloneError")throw pe;o.location.assign(X)}u&&g&&g({action:p,location:B.location,delta:1})}function k(P,K){p="REPLACE";let V=ep(B.location,P,K);y=E();let Q=T_(V,y),X=B.createHref(V);h.replaceState(Q,"",X),u&&g&&g({action:p,location:B.location,delta:0})}function O(P){return lA(P)}let B={get action(){return p},get location(){return s(o,h)},listen(P){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(w_,w),g=P,()=>{o.removeEventListener(w_,w),g=null}},createHref(P){return e(o,P)},createURL:O,encodeLocation(P){let K=O(P);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:b,replace:k,go(P){return h.go(P)}};return B}function lA(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Ec(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function f0(s,e,t="/"){return cA(s,e,t,!1)}function cA(s,e,t,i){let o=typeof e=="string"?qo(e):e,u=Ba(o.pathname||"/",t);if(u==null)return null;let h=m0(s);uA(h);let p=null;for(let g=0;p==null&&g<h.length;++g){let y=SA(u);p=EA(h[g],y,i)}return p}function m0(s,e=[],t=[],i="",o=!1){let u=(h,p,g=o,y)=>{let E={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(E.relativePath.startsWith("/")){if(!E.relativePath.startsWith(i)&&g)return;Lt(E.relativePath.startsWith(i),`Absolute route path "${E.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),E.relativePath=E.relativePath.slice(i.length)}let w=Ua([i,E.relativePath]),b=t.concat(E);h.children&&h.children.length>0&&(Lt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),m0(h.children,e,b,w,g)),!(h.path==null&&!h.index)&&e.push({path:w,score:yA(w,h.index),routesMeta:b})};return s.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let g of p0(h.path))u(h,p,!0,g)}),e}function p0(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(i.length===0)return o?[u,""]:[u];let h=p0(i.join("/")),p=[];return p.push(...h.map(g=>g===""?u:[u,g].join("/"))),o&&p.push(...h),p.map(g=>s.startsWith("/")&&g===""?"/":g)}function uA(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:vA(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var dA=/^:[\w-]+$/,hA=3,fA=2,mA=1,pA=10,gA=-2,x_=s=>s==="*";function yA(s,e){let t=s.split("/"),i=t.length;return t.some(x_)&&(i+=gA),e&&(i+=fA),t.filter(o=>!x_(o)).reduce((o,u)=>o+(dA.test(u)?hA:u===""?mA:pA),i)}function vA(s,e){return s.length===e.length&&s.slice(0,-1).every((i,o)=>i===e[o])?s[s.length-1]-e[e.length-1]:0}function EA(s,e,t=!1){let{routesMeta:i}=s,o={},u="/",h=[];for(let p=0;p<i.length;++p){let g=i[p],y=p===i.length-1,E=u==="/"?e:e.slice(u.length)||"/",w=Ld({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},E),b=g.route;if(!w&&y&&t&&!i[i.length-1].route.index&&(w=Ld({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Ua([u,w.pathname]),pathnameBase:AA(Ua([u,w.pathnameBase])),route:b}),w.pathnameBase!=="/"&&(u=Ua([u,w.pathnameBase]))}return h}function Ld(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=_A(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((y,{paramName:E,isOptional:w},b)=>{if(E==="*"){let O=p[b]||"";h=u.slice(0,u.length-O.length).replace(/(.)\/+$/,"$1")}const k=p[b];return w&&!k?y[E]=void 0:y[E]=(k||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:s}}function _A(s,e=!1,t=!0){js(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function SA(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return js(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ba(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}var wA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TA=s=>wA.test(s);function xA(s,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof s=="string"?qo(s):s,u;if(t)if(TA(t))u=t;else{if(t.includes("//")){let h=t;t=t.replace(/\/\/+/g,"/"),js(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${t}`)}t.startsWith("/")?u=b_(t.substring(1),"/"):u=b_(t,e)}else u=e;return{pathname:u,search:NA(i),hash:CA(o)}}function b_(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Um(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bA(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function g0(s){let e=bA(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function y0(s,e,t,i=!1){let o;typeof s=="string"?o=qo(s):(o={...s},Lt(!o.pathname||!o.pathname.includes("?"),Um("?","pathname","search",o)),Lt(!o.pathname||!o.pathname.includes("#"),Um("#","pathname","hash",o)),Lt(!o.search||!o.search.includes("#"),Um("#","search","hash",o)));let u=s===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=t;else{let w=e.length-1;if(!i&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),w-=1;o.pathname=b.join("/")}p=w>=0?e[w]:"/"}let g=xA(o,p),y=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||E)&&(g.pathname+="/"),g}var Ua=s=>s.join("/").replace(/\/\/+/g,"/"),AA=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),NA=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,CA=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function RA(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var v0=["POST","PUT","PATCH","DELETE"];new Set(v0);var IA=["GET",...v0];new Set(IA);var Ho=I.createContext(null);Ho.displayName="DataRouter";var rh=I.createContext(null);rh.displayName="DataRouterState";I.createContext(!1);var E0=I.createContext({isTransitioning:!1});E0.displayName="ViewTransition";var DA=I.createContext(new Map);DA.displayName="Fetchers";var jA=I.createContext(null);jA.displayName="Await";var ha=I.createContext(null);ha.displayName="Navigation";var Cc=I.createContext(null);Cc.displayName="Location";var Ya=I.createContext({outlet:null,matches:[],isDataRoute:!1});Ya.displayName="Route";var Dp=I.createContext(null);Dp.displayName="RouteError";function kA(s,{relative:e}={}){Lt(Rc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=I.useContext(ha),{hash:o,pathname:u,search:h}=Ic(s,{relative:e}),p=u;return t!=="/"&&(p=u==="/"?t:Ua([t,u])),i.createHref({pathname:p,search:h,hash:o})}function Rc(){return I.useContext(Cc)!=null}function ks(){return Lt(Rc(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Cc).location}var _0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function S0(s){I.useContext(ha).static||I.useLayoutEffect(s)}function vs(){let{isDataRoute:s}=I.useContext(Ya);return s?$A():MA()}function MA(){Lt(Rc(),"useNavigate() may be used only in the context of a <Router> component.");let s=I.useContext(Ho),{basename:e,navigator:t}=I.useContext(ha),{matches:i}=I.useContext(Ya),{pathname:o}=ks(),u=JSON.stringify(g0(i)),h=I.useRef(!1);return S0(()=>{h.current=!0}),I.useCallback((g,y={})=>{if(js(h.current,_0),!h.current)return;if(typeof g=="number"){t.go(g);return}let E=y0(g,JSON.parse(u),o,y.relative==="path");s==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ua([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,u,o,s])}I.createContext(null);function Ic(s,{relative:e}={}){let{matches:t}=I.useContext(Ya),{pathname:i}=ks(),o=JSON.stringify(g0(t));return I.useMemo(()=>y0(s,JSON.parse(o),i,e==="path"),[s,o,i,e])}function PA(s,e){return w0(s,e)}function w0(s,e,t,i,o){Lt(Rc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=I.useContext(ha),{matches:h}=I.useContext(Ya),p=h[h.length-1],g=p?p.params:{},y=p?p.pathname:"/",E=p?p.pathnameBase:"/",w=p&&p.route;{let V=w&&w.path||"";T0(y,!w||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let b=ks(),k;if(e){let V=typeof e=="string"?qo(e):e;Lt(E==="/"||V.pathname?.startsWith(E),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${V.pathname}" was given in the \`location\` prop.`),k=V}else k=b;let O=k.pathname||"/",B=O;if(E!=="/"){let V=E.replace(/^\//,"").split("/");B="/"+O.replace(/^\//,"").split("/").slice(V.length).join("/")}let P=f0(s,{pathname:B});js(w||P!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),js(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=FA(P&&P.map(V=>Object.assign({},V,{params:Object.assign({},g,V.params),pathname:Ua([E,u.encodeLocation?u.encodeLocation(V.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?E:Ua([E,u.encodeLocation?u.encodeLocation(V.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathnameBase])})),h,t,i,o);return e&&K?I.createElement(Cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},K):K}function OA(){let s=GA(),e=RA(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},u={padding:"2px 4px",backgroundColor:i},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:u},"ErrorBoundary")," or"," ",I.createElement("code",{style:u},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:o},t):null,h)}var LA=I.createElement(OA,null),UA=class extends I.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?I.createElement(Ya.Provider,{value:this.props.routeContext},I.createElement(Dp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VA({routeContext:s,match:e,children:t}){let i=I.useContext(Ho);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Ya.Provider,{value:s},t)}function FA(s,e=[],t=null,i=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let u=s,h=t?.errors;if(h!=null){let E=u.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);Lt(E>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,E+1))}let p=!1,g=-1;if(t)for(let E=0;E<u.length;E++){let w=u[E];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(g=E),w.route.id){let{loaderData:b,errors:k}=t,O=w.route.loader&&!b.hasOwnProperty(w.route.id)&&(!k||k[w.route.id]===void 0);if(w.route.lazy||O){p=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}let y=t&&i?(E,w)=>{i(E,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:w})}:void 0;return u.reduceRight((E,w,b)=>{let k,O=!1,B=null,P=null;t&&(k=h&&w.route.id?h[w.route.id]:void 0,B=w.route.errorElement||LA,p&&(g<0&&b===0?(T0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,P=null):g===b&&(O=!0,P=w.route.hydrateFallbackElement||null)));let K=e.concat(u.slice(0,b+1)),V=()=>{let Q;return k?Q=B:O?Q=P:w.route.Component?Q=I.createElement(w.route.Component,null):w.route.element?Q=w.route.element:Q=E,I.createElement(VA,{match:w,routeContext:{outlet:E,matches:K,isDataRoute:t!=null},children:Q})};return t&&(w.route.ErrorBoundary||w.route.errorElement||b===0)?I.createElement(UA,{location:t.location,revalidation:t.revalidation,component:B,error:k,children:V(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:y}):V()},null)}function jp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BA(s){let e=I.useContext(Ho);return Lt(e,jp(s)),e}function zA(s){let e=I.useContext(rh);return Lt(e,jp(s)),e}function qA(s){let e=I.useContext(Ya);return Lt(e,jp(s)),e}function kp(s){let e=qA(s),t=e.matches[e.matches.length-1];return Lt(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function HA(){return kp("useRouteId")}function GA(){let s=I.useContext(Dp),e=zA("useRouteError"),t=kp("useRouteError");return s!==void 0?s:e.errors?.[t]}function $A(){let{router:s}=BA("useNavigate"),e=kp("useNavigate"),t=I.useRef(!1);return S0(()=>{t.current=!0}),I.useCallback(async(o,u={})=>{js(t.current,_0),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...u}))},[s,e])}var A_={};function T0(s,e,t){!e&&!A_[s]&&(A_[s]=!0,js(!1,t))}I.memo(YA);function YA({routes:s,future:e,state:t,unstable_onError:i}){return w0(s,void 0,t,i,e)}function Fn(s){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KA({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:u=!1}){Lt(!Rc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),p=I.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof t=="string"&&(t=qo(t));let{pathname:g="/",search:y="",hash:E="",state:w=null,key:b="default"}=t,k=I.useMemo(()=>{let O=Ba(g,h);return O==null?null:{location:{pathname:O,search:y,hash:E,state:w,key:b},navigationType:i}},[h,g,y,E,w,b,i]);return js(k!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:I.createElement(ha.Provider,{value:p},I.createElement(Cc.Provider,{children:e,value:k}))}function XA({children:s,location:e}){return PA(tp(s),e)}function tp(s,e=[]){let t=[];return I.Children.forEach(s,(i,o)=>{if(!I.isValidElement(i))return;let u=[...e,o];if(i.type===I.Fragment){t.push.apply(t,tp(i.props.children,u));return}Lt(i.type===Fn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=tp(i.props.children,u)),t.push(h)}),t}var Td="get",xd="application/x-www-form-urlencoded";function oh(s){return s!=null&&typeof s.tagName=="string"}function QA(s){return oh(s)&&s.tagName.toLowerCase()==="button"}function WA(s){return oh(s)&&s.tagName.toLowerCase()==="form"}function JA(s){return oh(s)&&s.tagName.toLowerCase()==="input"}function ZA(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function eN(s,e){return s.button===0&&(!e||e==="_self")&&!ZA(s)}var md=null;function tN(){if(md===null)try{new FormData(document.createElement("form"),0),md=!1}catch{md=!0}return md}var nN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Vm(s){return s!=null&&!nN.has(s)?(js(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xd}"`),null):s}function sN(s,e){let t,i,o,u,h;if(WA(s)){let p=s.getAttribute("action");i=p?Ba(p,e):null,t=s.getAttribute("method")||Td,o=Vm(s.getAttribute("enctype"))||xd,u=new FormData(s)}else if(QA(s)||JA(s)&&(s.type==="submit"||s.type==="image")){let p=s.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=s.getAttribute("formaction")||p.getAttribute("action");if(i=g?Ba(g,e):null,t=s.getAttribute("formmethod")||p.getAttribute("method")||Td,o=Vm(s.getAttribute("formenctype"))||Vm(p.getAttribute("enctype"))||xd,u=new FormData(p,s),!tN()){let{name:y,type:E,value:w}=s;if(E==="image"){let b=y?`${y}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else y&&u.append(y,w)}}else{if(oh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Td,i=null,o=xd,h=s}return u&&o==="text/plain"&&(h=u,u=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mp(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function aN(s,e,t){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ba(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function iN(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rN(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function oN(s,e,t){let i=await Promise.all(s.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await iN(u,t);return h.links?h.links():[]}return[]}));return dN(i.flat(1).filter(rN).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function N_(s,e,t,i,o,u){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,p=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return u==="assets"?e.filter((g,y)=>h(g,y)||p(g,y)):u==="data"?e.filter((g,y)=>{let E=i.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,y)||p(g,y))return!0;if(g.route.shouldRevalidate){let w=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function lN(s,e,{includeHydrateFallback:t}={}){return cN(s.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function cN(s){return[...new Set(s)]}function uN(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function dN(s,e){let t=new Set;return new Set(e),s.reduce((i,o)=>{let u=JSON.stringify(uN(o));return t.has(u)||(t.add(u),i.push({key:u,link:o})),i},[])}function x0(){let s=I.useContext(Ho);return Mp(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function hN(){let s=I.useContext(rh);return Mp(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Pp=I.createContext(void 0);Pp.displayName="FrameworkContext";function b0(){let s=I.useContext(Pp);return Mp(s,"You must render this element inside a <HydratedRouter> element"),s}function fN(s,e){let t=I.useContext(Pp),[i,o]=I.useState(!1),[u,h]=I.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:y,onMouseLeave:E,onTouchStart:w}=e,b=I.useRef(null);I.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let B=K=>{K.forEach(V=>{h(V.isIntersecting)})},P=new IntersectionObserver(B,{threshold:.5});return b.current&&P.observe(b.current),()=>{P.disconnect()}}},[s]),I.useEffect(()=>{if(i){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[i]);let k=()=>{o(!0)},O=()=>{o(!1),h(!1)};return t?s!=="intent"?[u,b,{}]:[u,b,{onFocus:nc(p,k),onBlur:nc(g,O),onMouseEnter:nc(y,k),onMouseLeave:nc(E,O),onTouchStart:nc(w,k)}]:[!1,b,{}]}function nc(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function mN({page:s,...e}){let{router:t}=x0(),i=I.useMemo(()=>f0(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?I.createElement(gN,{page:s,matches:i,...e}):null}function pN(s){let{manifest:e,routeModules:t}=b0(),[i,o]=I.useState([]);return I.useEffect(()=>{let u=!1;return oN(s,e,t).then(h=>{u||o(h)}),()=>{u=!0}},[s,e,t]),i}function gN({page:s,matches:e,...t}){let i=ks(),{manifest:o,routeModules:u}=b0(),{basename:h}=x0(),{loaderData:p,matches:g}=hN(),y=I.useMemo(()=>N_(s,e,g,o,i,"data"),[s,e,g,o,i]),E=I.useMemo(()=>N_(s,e,g,o,i,"assets"),[s,e,g,o,i]),w=I.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let O=new Set,B=!1;if(e.forEach(K=>{let V=o.routes[K.route.id];!V||!V.hasLoader||(!y.some(Q=>Q.route.id===K.route.id)&&K.route.id in p&&u[K.route.id]?.shouldRevalidate||V.hasClientLoader?B=!0:O.add(K.route.id))}),O.size===0)return[];let P=aN(s,h,"data");return B&&O.size>0&&P.searchParams.set("_routes",e.filter(K=>O.has(K.route.id)).map(K=>K.route.id).join(",")),[P.pathname+P.search]},[h,p,i,o,y,e,s,u]),b=I.useMemo(()=>lN(E,o),[E,o]),k=pN(E);return I.createElement(I.Fragment,null,w.map(O=>I.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),b.map(O=>I.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),k.map(({key:O,link:B})=>I.createElement("link",{key:O,nonce:t.nonce,...B})))}function yN(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var A0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A0&&(window.__reactRouterVersion="7.9.6")}catch{}function vN({basename:s,children:e,window:t}){let i=I.useRef();i.current==null&&(i.current=iA({window:t,v5Compat:!0}));let o=i.current,[u,h]=I.useState({action:o.action,location:o.location}),p=I.useCallback(g=>{I.startTransition(()=>h(g))},[h]);return I.useLayoutEffect(()=>o.listen(p),[o,p]),I.createElement(KA,{basename:s,children:e,location:u.location,navigationType:u.action,navigator:o})}var N0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,C0=I.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:u,replace:h,state:p,target:g,to:y,preventScrollReset:E,viewTransition:w,...b},k){let{basename:O}=I.useContext(ha),B=typeof y=="string"&&N0.test(y),P,K=!1;if(typeof y=="string"&&B&&(P=y,A0))try{let x=new URL(window.location.href),j=y.startsWith("//")?new URL(x.protocol+y):new URL(y),M=Ba(j.pathname,O);j.origin===x.origin&&M!=null?y=M+j.search+j.hash:K=!0}catch{js(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=kA(y,{relative:o}),[Q,X,pe]=fN(i,b),ee=wN(y,{replace:h,state:p,target:g,preventScrollReset:E,relative:o,viewTransition:w});function N(x){e&&e(x),x.defaultPrevented||ee(x)}let A=I.createElement("a",{...b,...pe,href:P||V,onClick:K||u?e:N,ref:yN(k,X),target:g,"data-discover":!B&&t==="render"?"true":void 0});return Q&&!B?I.createElement(I.Fragment,null,A,I.createElement(mN,{page:V})):A});C0.displayName="Link";var EN=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:u,to:h,viewTransition:p,children:g,...y},E){let w=Ic(h,{relative:y.relative}),b=ks(),k=I.useContext(rh),{navigator:O,basename:B}=I.useContext(ha),P=k!=null&&NN(w)&&p===!0,K=O.encodeLocation?O.encodeLocation(w).pathname:w.pathname,V=b.pathname,Q=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;t||(V=V.toLowerCase(),Q=Q?Q.toLowerCase():null,K=K.toLowerCase()),Q&&B&&(Q=Ba(Q,B)||Q);const X=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let pe=V===K||!o&&V.startsWith(K)&&V.charAt(X)==="/",ee=Q!=null&&(Q===K||!o&&Q.startsWith(K)&&Q.charAt(K.length)==="/"),N={isActive:pe,isPending:ee,isTransitioning:P},A=pe?e:void 0,x;typeof i=="function"?x=i(N):x=[i,pe?"active":null,ee?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let j=typeof u=="function"?u(N):u;return I.createElement(C0,{...y,"aria-current":A,className:x,ref:E,style:j,to:h,viewTransition:p},typeof g=="function"?g(N):g)});EN.displayName="NavLink";var _N=I.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:u,method:h=Td,action:p,onSubmit:g,relative:y,preventScrollReset:E,viewTransition:w,...b},k)=>{let O=bN(),B=AN(p,{relative:y}),P=h.toLowerCase()==="get"?"get":"post",K=typeof p=="string"&&N0.test(p),V=Q=>{if(g&&g(Q),Q.defaultPrevented)return;Q.preventDefault();let X=Q.nativeEvent.submitter,pe=X?.getAttribute("formmethod")||h;O(X||Q.currentTarget,{fetcherKey:e,method:pe,navigate:t,replace:o,state:u,relative:y,preventScrollReset:E,viewTransition:w})};return I.createElement("form",{ref:k,method:P,action:B,onSubmit:i?g:V,...b,"data-discover":!K&&s==="render"?"true":void 0})});_N.displayName="Form";function SN(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R0(s){let e=I.useContext(Ho);return Lt(e,SN(s)),e}function wN(s,{target:e,replace:t,state:i,preventScrollReset:o,relative:u,viewTransition:h}={}){let p=vs(),g=ks(),y=Ic(s,{relative:u});return I.useCallback(E=>{if(eN(E,e)){E.preventDefault();let w=t!==void 0?t:Ec(g)===Ec(y);p(s,{replace:w,state:i,preventScrollReset:o,relative:u,viewTransition:h})}},[g,p,y,t,i,e,s,o,u,h])}var TN=0,xN=()=>`__${String(++TN)}__`;function bN(){let{router:s}=R0("useSubmit"),{basename:e}=I.useContext(ha),t=HA();return I.useCallback(async(i,o={})=>{let{action:u,method:h,encType:p,formData:g,body:y}=sN(i,e);if(o.navigate===!1){let E=o.fetcherKey||xN();await s.fetch(E,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,flushSync:o.flushSync})}else await s.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function AN(s,{relative:e}={}){let{basename:t}=I.useContext(ha),i=I.useContext(Ya);Lt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),u={...Ic(s||".",{relative:e})},h=ks();if(s==null){u.search=h.search;let p=new URLSearchParams(u.search),g=p.getAll("index");if(g.some(E=>E==="")){p.delete("index"),g.filter(w=>w).forEach(w=>p.append("index",w));let E=p.toString();u.search=E?`?${E}`:""}}return(!s||s===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:Ua([t,u.pathname])),Ec(u)}function NN(s,{relative:e}={}){let t=I.useContext(E0);Lt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=R0("useViewTransitionState"),o=Ic(s,{relative:e});if(!t.isTransitioning)return!1;let u=Ba(t.currentLocation.pathname,i)||t.currentLocation.pathname,h=Ba(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ld(o.pathname,h)!=null||Ld(o.pathname,u)!=null}const CN=()=>{};var C_={};const I0=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},RN=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],h=s[t++],p=s[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},D0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,p=h?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,E=u>>2,w=(u&3)<<4|p>>4;let b=(p&15)<<2|y>>6,k=y&63;g||(k=64,h||(b=64)),i.push(t[E],t[w],t[b],t[k])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(I0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):RN(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],p=o<s.length?t[s.charAt(o)]:0;++o;const y=o<s.length?t[s.charAt(o)]:64;++o;const w=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||p==null||y==null||w==null)throw new IN;const b=u<<2|p>>4;if(i.push(b),y!==64){const k=p<<4&240|y>>2;if(i.push(k),w!==64){const O=y<<6&192|w;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class IN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DN=function(s){const e=I0(s);return D0.encodeByteArray(e,!0)},Ud=function(s){return DN(s).replace(/\./g,"")},j0=function(s){try{return D0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function jN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const kN=()=>jN().__FIREBASE_DEFAULTS__,MN=()=>{if(typeof process>"u"||typeof C_>"u")return;const s=C_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},PN=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&j0(s[1]);return e&&JSON.parse(e)},lh=()=>{try{return CN()||kN()||MN()||PN()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},k0=s=>lh()?.emulatorHosts?.[s],M0=s=>{const e=k0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},P0=()=>lh()?.config,O0=s=>lh()?.[`_${s}`];class ON{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function $i(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Op(s){return(await fetch(s,{credentials:"include"})).ok}function L0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Ud(JSON.stringify(t)),Ud(JSON.stringify(h)),""].join(".")}const dc={};function LN(){const s={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?s.emulator.push(e):s.prod.push(e);return s}function UN(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let R_=!1;function Lp(s,e){if(typeof window>"u"||typeof document>"u"||!$i(window.location.host)||dc[s]===e||dc[s]||R_)return;dc[s]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",u=LN().prod.length>0;function h(){const b=document.getElementById(i);b&&b.remove()}function p(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,k){b.setAttribute("width","24"),b.setAttribute("id",k),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function y(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{R_=!0,h()},b}function E(b,k){b.setAttribute("id",k),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function w(){const b=UN(i),k=t("text"),O=document.getElementById(k)||document.createElement("span"),B=t("learnmore"),P=document.getElementById(B)||document.createElement("a"),K=t("preprendIcon"),V=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Q=b.element;p(Q),E(P,B);const X=y();g(V,K),Q.append(V,O,P,X),document.body.appendChild(Q)}u?(O.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function FN(){const s=lh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zN(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function qN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HN(){const s=Cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function GN(){return!FN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $N(){try{return typeof indexedDB=="object"}catch{return!1}}function YN(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}const KN="FirebaseError";class fa extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=KN,Object.setPrototypeOf(this,fa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dc.prototype.create)}}class Dc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?XN(u,i):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new fa(o,p,i)}}function XN(s,e){return s.replace(QN,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const QN=/\{\$([^}]+)}/g;function WN(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ir(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],h=e[o];if(I_(u)&&I_(h)){if(!Ir(u,h))return!1}else if(u!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function I_(s){return s!==null&&typeof s=="object"}function jc(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ic(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function rc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function JN(s,e){const t=new ZN(s,e);return t.subscribe.bind(t)}class ZN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");e1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Fm),o.error===void 0&&(o.error=Fm),o.complete===void 0&&(o.complete=Fm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e1(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Fm(){}function Ot(s){return s&&s._delegate?s._delegate:s}class Vi{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Tr="[DEFAULT]";class t1{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ON;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s1(e))try{this.getOrInitializeService({instanceIdentifier:Tr})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Tr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Tr){return this.instances.has(e)}getOptions(e=Tr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);i===p&&h.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:n1(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Tr){return this.component?this.component.multipleInstances?e:Tr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function n1(s){return s===Tr?void 0:s}function s1(s){return s.instantiationMode==="EAGER"}class a1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new t1(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var at;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(at||(at={}));const i1={debug:at.DEBUG,verbose:at.VERBOSE,info:at.INFO,warn:at.WARN,error:at.ERROR,silent:at.SILENT},r1=at.INFO,o1={[at.DEBUG]:"log",[at.VERBOSE]:"log",[at.INFO]:"info",[at.WARN]:"warn",[at.ERROR]:"error"},l1=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=o1[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Up{constructor(e){this.name=e,this._logLevel=r1,this._logHandler=l1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in at))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,at.DEBUG,...e),this._logHandler(this,at.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,at.VERBOSE,...e),this._logHandler(this,at.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,at.INFO,...e),this._logHandler(this,at.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,at.WARN,...e),this._logHandler(this,at.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,at.ERROR,...e),this._logHandler(this,at.ERROR,...e)}}const c1=(s,e)=>e.some(t=>s instanceof t);let D_,j_;function u1(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d1(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U0=new WeakMap,np=new WeakMap,V0=new WeakMap,Bm=new WeakMap,Vp=new WeakMap;function h1(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(Pi(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&U0.set(t,s)}).catch(()=>{}),Vp.set(e,s),e}function f1(s){if(np.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});np.set(s,e)}let sp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return np.get(s);if(e==="objectStoreNames")return s.objectStoreNames||V0.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Pi(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function m1(s){sp=s(sp)}function p1(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(zm(this),e,...t);return V0.set(i,e.sort?e.sort():[e]),Pi(i)}:d1().includes(s)?function(...e){return s.apply(zm(this),e),Pi(U0.get(this))}:function(...e){return Pi(s.apply(zm(this),e))}}function g1(s){return typeof s=="function"?p1(s):(s instanceof IDBTransaction&&f1(s),c1(s,u1())?new Proxy(s,sp):s)}function Pi(s){if(s instanceof IDBRequest)return h1(s);if(Bm.has(s))return Bm.get(s);const e=g1(s);return e!==s&&(Bm.set(s,e),Vp.set(e,s)),e}const zm=s=>Vp.get(s);function y1(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),p=Pi(h);return i&&h.addEventListener("upgradeneeded",g=>{i(Pi(h.result),g.oldVersion,g.newVersion,Pi(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const v1=["get","getKey","getAll","getAllKeys","count"],E1=["put","add","delete","clear"],qm=new Map;function k_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(qm.get(e))return qm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=E1.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||v1.includes(t)))return;const u=async function(h,...p){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return i&&(y=y.index(p.shift())),(await Promise.all([y[t](...p),o&&g.done]))[0]};return qm.set(e,u),u}m1(s=>({...s,get:(e,t,i)=>k_(e,t)||s.get(e,t,i),has:(e,t)=>!!k_(e,t)||s.has(e,t)}));class _1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S1(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function S1(s){return s.getComponent()?.type==="VERSION"}const ap="@firebase/app",M_="0.14.6";const za=new Up("@firebase/app"),w1="@firebase/app-compat",T1="@firebase/analytics-compat",x1="@firebase/analytics",b1="@firebase/app-check-compat",A1="@firebase/app-check",N1="@firebase/auth",C1="@firebase/auth-compat",R1="@firebase/database",I1="@firebase/data-connect",D1="@firebase/database-compat",j1="@firebase/functions",k1="@firebase/functions-compat",M1="@firebase/installations",P1="@firebase/installations-compat",O1="@firebase/messaging",L1="@firebase/messaging-compat",U1="@firebase/performance",V1="@firebase/performance-compat",F1="@firebase/remote-config",B1="@firebase/remote-config-compat",z1="@firebase/storage",q1="@firebase/storage-compat",H1="@firebase/firestore",G1="@firebase/ai",$1="@firebase/firestore-compat",Y1="firebase",K1="12.6.0";const ip="[DEFAULT]",X1={[ap]:"fire-core",[w1]:"fire-core-compat",[x1]:"fire-analytics",[T1]:"fire-analytics-compat",[A1]:"fire-app-check",[b1]:"fire-app-check-compat",[N1]:"fire-auth",[C1]:"fire-auth-compat",[R1]:"fire-rtdb",[I1]:"fire-data-connect",[D1]:"fire-rtdb-compat",[j1]:"fire-fn",[k1]:"fire-fn-compat",[M1]:"fire-iid",[P1]:"fire-iid-compat",[O1]:"fire-fcm",[L1]:"fire-fcm-compat",[U1]:"fire-perf",[V1]:"fire-perf-compat",[F1]:"fire-rc",[B1]:"fire-rc-compat",[z1]:"fire-gcs",[q1]:"fire-gcs-compat",[H1]:"fire-fst",[$1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[Y1]:"fire-js-all"};const Vd=new Map,Q1=new Map,rp=new Map;function P_(s,e){try{s.container.addComponent(e)}catch(t){za.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Dr(s){const e=s.name;if(rp.has(e))return za.debug(`There were multiple attempts to register component ${e}.`),!1;rp.set(e,s);for(const t of Vd.values())P_(t,s);for(const t of Q1.values())P_(t,s);return!0}function ch(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function zn(s){return s==null?!1:s.settings!==void 0}const W1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Oi=new Dc("app","Firebase",W1);class J1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Oi.create("app-deleted",{appName:this._name})}}const Lr=K1;function F0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i={name:ip,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Oi.create("bad-app-name",{appName:String(o)});if(t||(t=P0()),!t)throw Oi.create("no-options");const u=Vd.get(o);if(u){if(Ir(t,u.options)&&Ir(i,u.config))return u;throw Oi.create("duplicate-app",{appName:o})}const h=new a1(o);for(const g of rp.values())h.addComponent(g);const p=new J1(t,i,h);return Vd.set(o,p),p}function Fp(s=ip){const e=Vd.get(s);if(!e&&s===ip&&P0())return F0();if(!e)throw Oi.create("no-app",{appName:s});return e}function aa(s,e,t){let i=X1[s]??s;t&&(i+=`-${t}`);const o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),za.warn(h.join(" "));return}Dr(new Vi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Z1="firebase-heartbeat-database",eC=1,_c="firebase-heartbeat-store";let Hm=null;function B0(){return Hm||(Hm=y1(Z1,eC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(_c)}catch(t){console.warn(t)}}}}).catch(s=>{throw Oi.create("idb-open",{originalErrorMessage:s.message})})),Hm}async function tC(s){try{const t=(await B0()).transaction(_c),i=await t.objectStore(_c).get(z0(s));return await t.done,i}catch(e){if(e instanceof fa)za.warn(e.message);else{const t=Oi.create("idb-get",{originalErrorMessage:e?.message});za.warn(t.message)}}}async function O_(s,e){try{const i=(await B0()).transaction(_c,"readwrite");await i.objectStore(_c).put(e,z0(s)),await i.done}catch(t){if(t instanceof fa)za.warn(t.message);else{const i=Oi.create("idb-set",{originalErrorMessage:t?.message});za.warn(i.message)}}}function z0(s){return`${s.name}!${s.options.appId}`}const nC=1024,sC=30;class aC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=L_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>sC){const o=oC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){za.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=L_(),{heartbeatsToSend:t,unsentEntries:i}=iC(this._heartbeatsCache.heartbeats),o=Ud(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return za.warn(e),""}}}function L_(){return new Date().toISOString().substring(0,10)}function iC(s,e=nC){const t=[];let i=s.slice();for(const o of s){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),U_(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),U_(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class rC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $N()?YN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function U_(s){return Ud(JSON.stringify({version:2,heartbeats:s})).length}function oC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let i=1;i<s.length;i++)s[i].date<t&&(t=s[i].date,e=i);return e}function lC(s){Dr(new Vi("platform-logger",e=>new _1(e),"PRIVATE")),Dr(new Vi("heartbeat",e=>new aC(e),"PRIVATE")),aa(ap,M_,s),aa(ap,M_,"esm2020"),aa("fire-js","")}lC("");function q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cC=q0,H0=new Dc("auth","Firebase",q0());const Fd=new Up("@firebase/auth");function uC(s,...e){Fd.logLevel<=at.WARN&&Fd.warn(`Auth (${Lr}): ${s}`,...e)}function bd(s,...e){Fd.logLevel<=at.ERROR&&Fd.error(`Auth (${Lr}): ${s}`,...e)}function ys(s,...e){throw zp(s,...e)}function Ds(s,...e){return zp(s,...e)}function Bp(s,e,t){const i={...cC(),[e]:t};return new Dc("auth","Firebase",i).create(e,{appName:s.name})}function Va(s){return Bp(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dC(s,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&ys(s,"argument-error"),Bp(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zp(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return H0.create(s,...e)}function Fe(s,e,...t){if(!s)throw zp(e,...t)}function Oa(s){const e="INTERNAL ASSERTION FAILED: "+s;throw bd(e),new Error(e)}function qa(s,e){s||Oa(e)}function op(){return typeof self<"u"&&self.location?.href||""}function hC(){return V_()==="http:"||V_()==="https:"}function V_(){return typeof self<"u"&&self.location?.protocol||null}function fC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hC()||zN()||"connection"in navigator)?navigator.onLine:!0}function mC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,qa(t>e,"Short delay should be less than long delay!"),this.isMobile=VN()||qN()}get(){return fC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qp(s,e){qa(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class G0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const gC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yC=new kc(3e4,6e4);function Ka(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function ma(s,e,t,i,o={}){return $0(s,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const p=jc({key:s.config.apiKey,...h}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return BN()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&$i(s.emulatorConfig.host)&&(y.credentials="include"),G0.fetch()(await Y0(s,s.config.apiHost,t,p),y)})}async function $0(s,e,t){s._canInitEmulator=!1;const i={...pC,...e};try{const o=new EC(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw pd(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw pd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw pd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw pd(s,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Bp(s,E,y);ys(s,E)}}catch(o){if(o instanceof fa)throw o;ys(s,"network-request-failed",{message:String(o)})}}async function Mc(s,e,t,i,o={}){const u=await ma(s,e,t,i,o);return"mfaPendingCredential"in u&&ys(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function Y0(s,e,t,i){const o=`${e}${t}?${i}`,u=s,h=u.config.emulator?qp(s.config,o):`${s.config.apiScheme}://${o}`;return gC.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function vC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ds(this.auth,"network-request-failed")),yC.get())})}}function pd(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ds(s,e,i);return o.customData._tokenResponse=t,o}function F_(s){return s!==void 0&&s.enterprise!==void 0}class _C{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SC(s,e){return ma(s,"GET","/v2/recaptchaConfig",Ka(s,e))}async function wC(s,e){return ma(s,"POST","/v1/accounts:delete",e)}async function Bd(s,e){return ma(s,"POST","/v1/accounts:lookup",e)}function hc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TC(s,e=!1){const t=Ot(s),i=await t.getIdToken(e),o=Hp(i);Fe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:i,authTime:hc(Gm(o.auth_time)),issuedAtTime:hc(Gm(o.iat)),expirationTime:hc(Gm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Gm(s){return Number(s)*1e3}function Hp(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return bd("JWT malformed, contained fewer than 3 sections"),null;try{const o=j0(t);return o?JSON.parse(o):(bd("Failed to decode base64 JWT payload"),null)}catch(o){return bd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function B_(s){const e=Hp(s);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Oo(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof fa&&xC(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function xC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class bC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class lp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function zd(s){const e=s.auth,t=await s.getIdToken(),i=await Oo(s,Bd(e,{idToken:t}));Fe(i?.users.length,e,"internal-error");const o=i.users[0];s._notifyReloadListener(o);const u=o.providerUserInfo?.length?K0(o.providerUserInfo):[],h=NC(s.providerData,u),p=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!h?.length,y=p?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,E)}async function AC(s){const e=Ot(s);await zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NC(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function K0(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function CC(s,e){const t=await $0(s,{},async()=>{const i=jc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=await Y0(s,o,"/v1/token",`key=${u}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:i};return s.emulatorConfig&&$i(s.emulatorConfig.host)&&(g.credentials="include"),G0.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RC(s,e){return ma(s,"POST","/v2/accounts:revokeToken",Ka(s,e))}class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):B_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=B_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await CC(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,h=new Do;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Fe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Fe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return Oa("not implemented")}}function Ci(s,e){Fe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Is{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new bC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Oo(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TC(this,e)}reload(){return AC(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Va(this.auth));const e=await this.getIdToken();return await Oo(this,wC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,p=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,E=t.lastLoginAt??void 0,{uid:w,emailVerified:b,isAnonymous:k,providerData:O,stsTokenManager:B}=t;Fe(w&&B,e,"internal-error");const P=Do.fromJSON(this.name,B);Fe(typeof w=="string",e,"internal-error"),Ci(i,e.name),Ci(o,e.name),Fe(typeof b=="boolean",e,"internal-error"),Fe(typeof k=="boolean",e,"internal-error"),Ci(u,e.name),Ci(h,e.name),Ci(p,e.name),Ci(g,e.name),Ci(y,e.name),Ci(E,e.name);const K=new Is({uid:w,auth:e,email:o,emailVerified:b,displayName:i,isAnonymous:k,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:P,createdAt:y,lastLoginAt:E});return O&&Array.isArray(O)&&(K.providerData=O.map(V=>({...V}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,t,i=!1){const o=new Do;o.updateFromServerResponse(t);const u=new Is({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await zd(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Fe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?K0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,p=new Do;p.updateFromIdToken(i);const g=new Is({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const z_=new Map;function La(s){qa(s instanceof Function,"Expected a class definition");let e=z_.get(s);return e?(qa(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,z_.set(s,e),e)}class X0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}X0.type="NONE";const q_=X0;function Ad(s,e,t){return`firebase:${s}:${e}:${t}`}class jo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=Ad(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ad("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Bd(this.auth,{idToken:e}).catch(()=>{});return t?Is._fromGetAccountInfoResponse(this.auth,t,e):null}return Is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new jo(La(q_),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||La(q_);const h=Ad(i,e.config.apiKey,e.name);let p=null;for(const y of t)try{const E=await y._get(h);if(E){let w;if(typeof E=="string"){const b=await Bd(e,{idToken:E}).catch(()=>{});if(!b)break;w=await Is._fromGetAccountInfoResponse(e,b,E)}else w=Is._fromJSON(e,E);y!==u&&(p=w),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new jo(u,e,i):(u=g[0],p&&await u._set(h,p.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new jo(u,e,i))}}function H_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tw(e))return"Blackberry";if(nw(e))return"Webos";if(W0(e))return"Safari";if((e.includes("chrome/")||J0(e))&&!e.includes("edge/"))return"Chrome";if(ew(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function Q0(s=Cn()){return/firefox\//i.test(s)}function W0(s=Cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J0(s=Cn()){return/crios\//i.test(s)}function Z0(s=Cn()){return/iemobile/i.test(s)}function ew(s=Cn()){return/android/i.test(s)}function tw(s=Cn()){return/blackberry/i.test(s)}function nw(s=Cn()){return/webos/i.test(s)}function Gp(s=Cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function IC(s=Cn()){return Gp(s)&&!!window.navigator?.standalone}function DC(){return HN()&&document.documentMode===10}function sw(s=Cn()){return Gp(s)||ew(s)||nw(s)||tw(s)||/windows phone/i.test(s)||Z0(s)}function aw(s,e=[]){let t;switch(s){case"Browser":t=H_(Cn());break;case"Worker":t=`${H_(Cn())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lr}/${i}`}class jC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,p)=>{try{const g=e(u);h(g)}catch(g){p(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function kC(s,e={}){return ma(s,"GET","/v2/passwordPolicy",Ka(s,e))}const MC=6;class PC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??MC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class OC{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new jC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=H0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=La(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Bd(this,{idToken:e}),i=await Is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(zn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(i=p.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Va(this));const t=e?Ot(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Va(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Va(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(La(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kC(this),t=new PC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RC(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&La(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[La(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Xa(s){return Ot(s)}let G_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=JN(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};let uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LC(s){uh=s}function iw(s){return uh.loadJS(s)}function UC(){return uh.recaptchaEnterpriseScript}function VC(){return uh.gapiScript}function FC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class BC{constructor(){this.enterprise=new zC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const qC="recaptcha-enterprise",rw="NO_RECAPTCHA";class HC{constructor(e){this.type=qC,this.auth=Xa(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{SC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new _C(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,h,p){const g=window.grecaptcha;F_(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(rw)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BC().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{i(this.auth).then(p=>{if(!t&&F_(window.grecaptcha))o(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=UC();g.length!==0&&(g+=p),iw(g).then(()=>{o(p,u,h)}).catch(y=>{h(y)})}}).catch(p=>{h(p)})})}}async function $_(s,e,t,i=!1,o=!1){const u=new HC(s);let h;if(o)h=rw;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const p={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return i?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function qd(s,e,t,i,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await $_(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await $_(s,e,t,t==="getOobCode");return i(s,h)}else return Promise.reject(u)})}function GC(s,e){const t=ch(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Ir(u,e??{}))return o;ys(o,"already-initialized")}return t.initialize({options:e})}function $C(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(La);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function YC(s,e,t){const i=Xa(s);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=ow(e),{host:h,port:p}=KC(e),g=p===null?"":`:${p}`,y={url:`${u}//${h}${g}/`},E=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Ir(y,i.config.emulator)&&Ir(E,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=E,i.settings.appVerificationDisabledForTesting=!0,$i(h)?(Op(`${u}//${h}${g}`),Lp("Auth",!0)):XC()}function ow(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function KC(s){const e=ow(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:Y_(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:Y_(h)}}}function Y_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function XC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class $p{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oa("not implemented")}_getIdTokenResponse(e){return Oa("not implemented")}_linkToIdToken(e,t){return Oa("not implemented")}_getReauthenticationResolver(e){return Oa("not implemented")}}async function QC(s,e){return ma(s,"POST","/v1/accounts:signUp",e)}async function WC(s,e){return Mc(s,"POST","/v1/accounts:signInWithPassword",Ka(s,e))}async function JC(s,e){return ma(s,"POST","/v1/accounts:sendOobCode",Ka(s,e))}async function ZC(s,e){return JC(s,e)}async function eR(s,e){return Mc(s,"POST","/v1/accounts:signInWithEmailLink",Ka(s,e))}async function tR(s,e){return Mc(s,"POST","/v1/accounts:signInWithEmailLink",Ka(s,e))}class Sc extends $p{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Sc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Sc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qd(e,t,"signInWithPassword",WC);case"emailLink":return eR(e,{email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return qd(e,i,"signUpPassword",QC);case"emailLink":return tR(e,{idToken:t,email:this._email,oobCode:this._password});default:ys(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ko(s,e){return Mc(s,"POST","/v1/accounts:signInWithIdp",Ka(s,e))}const nR="http://localhost";class jr extends $p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ys("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...u}=t;if(!i||!o)return null;const h=new jr(i,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ko(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:nR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jc(t)}return e}}function sR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aR(s){const e=ic(rc(s)).link,t=e?ic(rc(e)).deep_link_id:null,i=ic(rc(s)).deep_link_id;return(i?ic(rc(i)).link:null)||i||t||e||s}class Yp{constructor(e){const t=ic(rc(e)),i=t.apiKey??null,o=t.oobCode??null,u=sR(t.mode??null);Fe(i&&o&&u,"argument-error"),this.apiKey=i,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=aR(e);try{return new Yp(t)}catch{return null}}}class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,t){return Sc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Yp.parseLink(t);return Fe(i,"argument-error"),Sc._fromEmailAndCode(e,i.code,i.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Kp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Pc extends Kp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ii extends Pc{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";class Pa extends Pc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jr._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pa.credentialFromTaggedObject(e)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Pa.credential(t,i)}catch{return null}}}Pa.GOOGLE_SIGN_IN_METHOD="google.com";Pa.PROVIDER_ID="google.com";class Di extends Pc{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Di.credential(e.oauthAccessToken)}catch{return null}}}Di.GITHUB_SIGN_IN_METHOD="github.com";Di.PROVIDER_ID="github.com";class ji extends Pc{constructor(){super("twitter.com")}static credential(e,t){return jr._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ji.credential(t,i)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";async function iR(s,e){return Mc(s,"POST","/v1/accounts:signUp",Ka(s,e))}class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await Is._fromIdTokenResponse(e,i,o),h=K_(i);return new kr({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=K_(i);return new kr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function K_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Hd extends fa{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Hd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Hd(e,t,i,o)}}function lw(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Hd._fromErrorAndOperation(s,u,e,i):u})}async function rR(s,e,t=!1){const i=await Oo(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return kr._forOperation(s,"link",i)}async function oR(s,e,t=!1){const{auth:i}=s;if(zn(i.app))return Promise.reject(Va(i));const o="reauthenticate";try{const u=await Oo(s,lw(i,o,e,s),t);Fe(u.idToken,i,"internal-error");const h=Hp(u.idToken);Fe(h,i,"internal-error");const{sub:p}=h;return Fe(s.uid===p,i,"user-mismatch"),kr._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ys(i,"user-mismatch"),u}}async function cw(s,e,t=!1){if(zn(s.app))return Promise.reject(Va(s));const i="signIn",o=await lw(s,i,e),u=await kr._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}async function lR(s,e){return cw(Xa(s),e)}async function uw(s){const e=Xa(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cR(s,e,t){const i=Xa(s);await qd(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",ZC)}async function uR(s,e,t){if(zn(s.app))return Promise.reject(Va(s));const i=Xa(s),h=await qd(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&uw(s),g}),p=await kr._fromIdTokenResponse(i,"signIn",h);return await i._updateCurrentUser(p.user),p}function dR(s,e,t){return zn(s.app)?Promise.reject(Va(s)):lR(Ot(s),Go.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&uw(s),i})}async function hR(s,e){return ma(s,"POST","/v1/accounts:update",e)}async function fR(s,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=Ot(s),u={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await Oo(i,hR(i.auth,u));i.displayName=h.displayName||null,i.photoURL=h.photoUrl||null;const p=i.providerData.find(({providerId:g})=>g==="password");p&&(p.displayName=i.displayName,p.photoURL=i.photoURL),await i._updateTokensIfNecessary(h)}function mR(s,e,t,i){return Ot(s).onIdTokenChanged(e,t,i)}function pR(s,e,t){return Ot(s).beforeAuthStateChanged(e,t)}function Xp(s,e,t,i){return Ot(s).onAuthStateChanged(e,t,i)}function Qp(s){return Ot(s).signOut()}const Gd="__sak";class dw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gd,"1"),this.storage.removeItem(Gd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const gR=1e3,yR=10;class hw extends dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,p,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);DC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,yR):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},gR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hw.type="LOCAL";const vR=hw;class fw extends dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fw.type="SESSION";const mw=fw;function ER(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new dh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const p=Array.from(h).map(async y=>y(t.origin,u)),g=await ER(p);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dh.receivers=[];function Wp(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class _R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((p,g)=>{const y=Wp("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(w){const b=w;if(b.data.eventId===y)switch(b.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(b.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ia(){return window}function SR(s){ia().location.href=s}function pw(){return typeof ia().WorkerGlobalScope<"u"&&typeof ia().importScripts=="function"}async function wR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TR(){return navigator?.serviceWorker?.controller||null}function xR(){return pw()?self:null}const gw="firebaseLocalStorageDb",bR=1,$d="firebaseLocalStorage",yw="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hh(s,e){return s.transaction([$d],e?"readwrite":"readonly").objectStore($d)}function AR(){const s=indexedDB.deleteDatabase(gw);return new Oc(s).toPromise()}function cp(){const s=indexedDB.open(gw,bR);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore($d,{keyPath:yw})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains($d)?e(i):(i.close(),await AR(),e(await cp()))})})}async function X_(s,e,t){const i=hh(s,!0).put({[yw]:e,value:t});return new Oc(i).toPromise()}async function NR(s,e){const t=hh(s,!1).get(e),i=await new Oc(t).toPromise();return i===void 0?null:i.value}function Q_(s,e){const t=hh(s,!0).delete(e);return new Oc(t).toPromise()}const CR=800,RR=3;class vw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>RR)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dh._getInstance(xR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wR(),!this.activeServiceWorker)return;this.sender=new _R(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await X_(e,Gd,"1"),await Q_(e,Gd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>X_(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>NR(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Q_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=hh(o,!1).getAll();return new Oc(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vw.type="LOCAL";const IR=vw;new kc(3e4,6e4);function Ew(s,e){return e?La(e):(Fe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Jp extends $p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DR(s){return cw(s.auth,new Jp(s),s.bypassAuthState)}function jR(s){const{auth:e,user:t}=s;return Fe(t,e,"internal-error"),oR(t,new Jp(s),s.bypassAuthState)}async function kR(s){const{auth:e,user:t}=s;return Fe(t,e,"internal-error"),rR(t,new Jp(s),s.bypassAuthState)}class _w{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DR;case"linkViaPopup":case"linkViaRedirect":return kR;case"reauthViaPopup":case"reauthViaRedirect":return jR;default:ys(this.auth,"internal-error")}}resolve(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const MR=new kc(2e3,1e4);async function PR(s,e,t){if(zn(s.app))return Promise.reject(Ds(s,"operation-not-supported-in-this-environment"));const i=Xa(s);dC(s,e,Kp);const o=Ew(i,t);return new xr(i,"signInViaPopup",e,o).executeNotNull()}class xr extends _w{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,xr.currentPopupAction&&xr.currentPopupAction.cancel(),xr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){qa(this.filter.length===1,"Popup operations only handle one event");const e=Wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ds(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ds(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ds(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MR.get())};e()}}xr.currentPopupAction=null;const OR="pendingRedirect",Nd=new Map;class LR extends _w{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const i=await UR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UR(s,e){const t=BR(e),i=FR(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function VR(s,e){Nd.set(s._key(),e)}function FR(s){return La(s._redirectPersistence)}function BR(s){return Ad(OR,s.config.apiKey,s.name)}async function zR(s,e,t=!1){if(zn(s.app))return Promise.reject(Va(s));const i=Xa(s),o=Ew(i,e),h=await new LR(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}const qR=600*1e3;class HR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!GR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Sw(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ds(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qR&&this.cachedEventUids.clear(),this.cachedEventUids.has(W_(e))}saveEventToCache(e){this.cachedEventUids.add(W_(e)),this.lastProcessedEventTime=Date.now()}}function W_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Sw({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function GR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sw(s);default:return!1}}async function $R(s,e={}){return ma(s,"GET","/v1/projects",e)}const YR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KR=/^https?/;async function XR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await $R(s);for(const t of e)try{if(QR(t))return}catch{}ys(s,"unauthorized-domain")}function QR(s){const e=op(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!KR.test(t))return!1;if(YR.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const WR=new kc(3e4,6e4);function J_(){const s=ia().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function JR(s){return new Promise((e,t)=>{function i(){J_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{J_(),t(Ds(s,"network-request-failed"))},timeout:WR.get()})}if(ia().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ia().gapi?.load)i();else{const o=FC("iframefcb");return ia()[o]=()=>{gapi.load?i():t(Ds(s,"network-request-failed"))},iw(`${VC()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Cd=null,e})}let Cd=null;function ZR(s){return Cd=Cd||JR(s),Cd}const eI=new kc(5e3,15e3),tI="__/auth/iframe",nI="emulator/auth/iframe",sI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iI(s){const e=s.config;Fe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?qp(e,nI):`https://${s.config.authDomain}/${tI}`,i={apiKey:e.apiKey,appName:s.name,v:Lr},o=aI.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${jc(i).slice(1)}`}async function rI(s){const e=await ZR(s),t=ia().gapi;return Fe(t,s,"internal-error"),e.open({where:document.body,url:iI(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sI,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const h=Ds(s,"network-request-failed"),p=ia().setTimeout(()=>{u(h)},eI.get());function g(){ia().clearTimeout(p),o(i)}i.ping(g).then(g,()=>{u(h)})}))}const oI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lI=500,cI=600,uI="_blank",dI="http://localhost";class Z_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hI(s,e,t,i=lI,o=cI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let p="";const g={...oI,width:i.toString(),height:o.toString(),top:u,left:h},y=Cn().toLowerCase();t&&(p=J0(y)?uI:t),Q0(y)&&(e=e||dI,g.scrollbars="yes");const E=Object.entries(g).reduce((b,[k,O])=>`${b}${k}=${O},`,"");if(IC(y)&&p!=="_self")return fI(e||"",p),new Z_(null);const w=window.open(e||"",p,E);Fe(w,s,"popup-blocked");try{w.focus()}catch{}return new Z_(w)}function fI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const mI="__/auth/handler",pI="emulator/auth/handler",gI=encodeURIComponent("fac");async function eS(s,e,t,i,o,u){Fe(s.config.authDomain,s,"auth-domain-config-required"),Fe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Lr,eventId:o};if(e instanceof Kp){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",WN(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))h[E]=w}if(e instanceof Pc){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(h.scopes=E.join(","))}s.tenantId&&(h.tid=s.tenantId);const p=h;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const g=await s._getAppCheckToken(),y=g?`#${gI}=${encodeURIComponent(g)}`:"";return`${yI(s)}?${jc(p).slice(1)}${y}`}function yI({config:s}){return s.emulator?qp(s,pI):`https://${s.authDomain}/${mI}`}const $m="webStorageSupport";class vI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mw,this._completeRedirectFn=zR,this._overrideRedirectResult=VR}async _openPopup(e,t,i,o){qa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await eS(e,t,i,op(),o);return hI(e,u,Wp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await eS(e,t,i,op(),o);return SR(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(qa(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await rI(e),i=new HR(e);return t.register("authEvent",o=>(Fe(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send($m,{type:$m},o=>{const u=o?.[0]?.[$m];u!==void 0&&t(!!u),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sw()||W0()||Gp()}}const EI=vI;var tS="@firebase/auth",nS="1.11.1";class _I{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function SI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wI(s){Dr(new Vi("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=i.options;Fe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aw(s)},y=new OC(i,o,u,g);return $C(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Dr(new Vi("auth-internal",e=>{const t=Xa(e.getProvider("auth").getImmediate());return(i=>new _I(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(tS,nS,SI(s)),aa(tS,nS,"esm2020")}const TI=300,xI=O0("authIdTokenMaxAge")||TI;let sS=null;const bI=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>xI)return;const o=t?.token;sS!==o&&(sS=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function AI(s=Fp()){const e=ch(s,"auth");if(e.isInitialized())return e.getImmediate();const t=GC(s,{popupRedirectResolver:EI,persistence:[IR,vR,mw]}),i=O0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=bI(u.toString());pR(t,h,()=>h(t.currentUser)),mR(t,p=>h(p))}}const o=k0("auth");return o&&YC(t,`http://${o}`),t}function NI(){return document.getElementsByTagName("head")?.[0]??document}LC({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Ds("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",NI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wI("Browser");var CI="firebase",RI="12.6.0";aa(CI,RI,"app");var aS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Li,ww;(function(){var s;function e(N,A){function x(){}x.prototype=A.prototype,N.F=A.prototype,N.prototype=new x,N.prototype.constructor=N,N.D=function(j,M,U){for(var D=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)D[Ie-2]=arguments[Ie];return A.prototype[M].apply(j,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,A,x){x||(x=0);const j=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)j[M]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(M=0;M<16;++M)j[M]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=N.g[0],x=N.g[1],M=N.g[2];let U=N.g[3],D;D=A+(U^x&(M^U))+j[0]+3614090360&4294967295,A=x+(D<<7&4294967295|D>>>25),D=U+(M^A&(x^M))+j[1]+3905402710&4294967295,U=A+(D<<12&4294967295|D>>>20),D=M+(x^U&(A^x))+j[2]+606105819&4294967295,M=U+(D<<17&4294967295|D>>>15),D=x+(A^M&(U^A))+j[3]+3250441966&4294967295,x=M+(D<<22&4294967295|D>>>10),D=A+(U^x&(M^U))+j[4]+4118548399&4294967295,A=x+(D<<7&4294967295|D>>>25),D=U+(M^A&(x^M))+j[5]+1200080426&4294967295,U=A+(D<<12&4294967295|D>>>20),D=M+(x^U&(A^x))+j[6]+2821735955&4294967295,M=U+(D<<17&4294967295|D>>>15),D=x+(A^M&(U^A))+j[7]+4249261313&4294967295,x=M+(D<<22&4294967295|D>>>10),D=A+(U^x&(M^U))+j[8]+1770035416&4294967295,A=x+(D<<7&4294967295|D>>>25),D=U+(M^A&(x^M))+j[9]+2336552879&4294967295,U=A+(D<<12&4294967295|D>>>20),D=M+(x^U&(A^x))+j[10]+4294925233&4294967295,M=U+(D<<17&4294967295|D>>>15),D=x+(A^M&(U^A))+j[11]+2304563134&4294967295,x=M+(D<<22&4294967295|D>>>10),D=A+(U^x&(M^U))+j[12]+1804603682&4294967295,A=x+(D<<7&4294967295|D>>>25),D=U+(M^A&(x^M))+j[13]+4254626195&4294967295,U=A+(D<<12&4294967295|D>>>20),D=M+(x^U&(A^x))+j[14]+2792965006&4294967295,M=U+(D<<17&4294967295|D>>>15),D=x+(A^M&(U^A))+j[15]+1236535329&4294967295,x=M+(D<<22&4294967295|D>>>10),D=A+(M^U&(x^M))+j[1]+4129170786&4294967295,A=x+(D<<5&4294967295|D>>>27),D=U+(x^M&(A^x))+j[6]+3225465664&4294967295,U=A+(D<<9&4294967295|D>>>23),D=M+(A^x&(U^A))+j[11]+643717713&4294967295,M=U+(D<<14&4294967295|D>>>18),D=x+(U^A&(M^U))+j[0]+3921069994&4294967295,x=M+(D<<20&4294967295|D>>>12),D=A+(M^U&(x^M))+j[5]+3593408605&4294967295,A=x+(D<<5&4294967295|D>>>27),D=U+(x^M&(A^x))+j[10]+38016083&4294967295,U=A+(D<<9&4294967295|D>>>23),D=M+(A^x&(U^A))+j[15]+3634488961&4294967295,M=U+(D<<14&4294967295|D>>>18),D=x+(U^A&(M^U))+j[4]+3889429448&4294967295,x=M+(D<<20&4294967295|D>>>12),D=A+(M^U&(x^M))+j[9]+568446438&4294967295,A=x+(D<<5&4294967295|D>>>27),D=U+(x^M&(A^x))+j[14]+3275163606&4294967295,U=A+(D<<9&4294967295|D>>>23),D=M+(A^x&(U^A))+j[3]+4107603335&4294967295,M=U+(D<<14&4294967295|D>>>18),D=x+(U^A&(M^U))+j[8]+1163531501&4294967295,x=M+(D<<20&4294967295|D>>>12),D=A+(M^U&(x^M))+j[13]+2850285829&4294967295,A=x+(D<<5&4294967295|D>>>27),D=U+(x^M&(A^x))+j[2]+4243563512&4294967295,U=A+(D<<9&4294967295|D>>>23),D=M+(A^x&(U^A))+j[7]+1735328473&4294967295,M=U+(D<<14&4294967295|D>>>18),D=x+(U^A&(M^U))+j[12]+2368359562&4294967295,x=M+(D<<20&4294967295|D>>>12),D=A+(x^M^U)+j[5]+4294588738&4294967295,A=x+(D<<4&4294967295|D>>>28),D=U+(A^x^M)+j[8]+2272392833&4294967295,U=A+(D<<11&4294967295|D>>>21),D=M+(U^A^x)+j[11]+1839030562&4294967295,M=U+(D<<16&4294967295|D>>>16),D=x+(M^U^A)+j[14]+4259657740&4294967295,x=M+(D<<23&4294967295|D>>>9),D=A+(x^M^U)+j[1]+2763975236&4294967295,A=x+(D<<4&4294967295|D>>>28),D=U+(A^x^M)+j[4]+1272893353&4294967295,U=A+(D<<11&4294967295|D>>>21),D=M+(U^A^x)+j[7]+4139469664&4294967295,M=U+(D<<16&4294967295|D>>>16),D=x+(M^U^A)+j[10]+3200236656&4294967295,x=M+(D<<23&4294967295|D>>>9),D=A+(x^M^U)+j[13]+681279174&4294967295,A=x+(D<<4&4294967295|D>>>28),D=U+(A^x^M)+j[0]+3936430074&4294967295,U=A+(D<<11&4294967295|D>>>21),D=M+(U^A^x)+j[3]+3572445317&4294967295,M=U+(D<<16&4294967295|D>>>16),D=x+(M^U^A)+j[6]+76029189&4294967295,x=M+(D<<23&4294967295|D>>>9),D=A+(x^M^U)+j[9]+3654602809&4294967295,A=x+(D<<4&4294967295|D>>>28),D=U+(A^x^M)+j[12]+3873151461&4294967295,U=A+(D<<11&4294967295|D>>>21),D=M+(U^A^x)+j[15]+530742520&4294967295,M=U+(D<<16&4294967295|D>>>16),D=x+(M^U^A)+j[2]+3299628645&4294967295,x=M+(D<<23&4294967295|D>>>9),D=A+(M^(x|~U))+j[0]+4096336452&4294967295,A=x+(D<<6&4294967295|D>>>26),D=U+(x^(A|~M))+j[7]+1126891415&4294967295,U=A+(D<<10&4294967295|D>>>22),D=M+(A^(U|~x))+j[14]+2878612391&4294967295,M=U+(D<<15&4294967295|D>>>17),D=x+(U^(M|~A))+j[5]+4237533241&4294967295,x=M+(D<<21&4294967295|D>>>11),D=A+(M^(x|~U))+j[12]+1700485571&4294967295,A=x+(D<<6&4294967295|D>>>26),D=U+(x^(A|~M))+j[3]+2399980690&4294967295,U=A+(D<<10&4294967295|D>>>22),D=M+(A^(U|~x))+j[10]+4293915773&4294967295,M=U+(D<<15&4294967295|D>>>17),D=x+(U^(M|~A))+j[1]+2240044497&4294967295,x=M+(D<<21&4294967295|D>>>11),D=A+(M^(x|~U))+j[8]+1873313359&4294967295,A=x+(D<<6&4294967295|D>>>26),D=U+(x^(A|~M))+j[15]+4264355552&4294967295,U=A+(D<<10&4294967295|D>>>22),D=M+(A^(U|~x))+j[6]+2734768916&4294967295,M=U+(D<<15&4294967295|D>>>17),D=x+(U^(M|~A))+j[13]+1309151649&4294967295,x=M+(D<<21&4294967295|D>>>11),D=A+(M^(x|~U))+j[4]+4149444226&4294967295,A=x+(D<<6&4294967295|D>>>26),D=U+(x^(A|~M))+j[11]+3174756917&4294967295,U=A+(D<<10&4294967295|D>>>22),D=M+(A^(U|~x))+j[2]+718787259&4294967295,M=U+(D<<15&4294967295|D>>>17),D=x+(U^(M|~A))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(M+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+M&4294967295,N.g[3]=N.g[3]+U&4294967295}i.prototype.v=function(N,A){A===void 0&&(A=N.length);const x=A-this.blockSize,j=this.C;let M=this.h,U=0;for(;U<A;){if(M==0)for(;U<=x;)o(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<A;)if(j[M++]=N.charCodeAt(U++),M==this.blockSize){o(this,j),M=0;break}}else for(;U<A;)if(j[M++]=N[U++],M==this.blockSize){o(this,j),M=0;break}}this.h=M,this.o+=A},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;A=this.o*8;for(var x=N.length-8;x<N.length;++x)N[x]=A&255,A/=256;for(this.v(N),N=Array(16),A=0,x=0;x<4;++x)for(let j=0;j<32;j+=8)N[A++]=this.g[x]>>>j&255;return N};function u(N,A){var x=p;return Object.prototype.hasOwnProperty.call(x,N)?x[N]:x[N]=A(N)}function h(N,A){this.h=A;const x=[];let j=!0;for(let M=N.length-1;M>=0;M--){const U=N[M]|0;j&&U==A||(x[M]=U,j=!1)}this.g=x}var p={};function g(N){return-128<=N&&N<128?u(N,function(A){return new h([A|0],A<0?-1:0)}):new h([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return w;if(N<0)return P(y(-N));const A=[];let x=1;for(let j=0;N>=x;j++)A[j]=N/x|0,x*=4294967296;return new h(A,0)}function E(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return P(E(N.substring(1),A));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=y(Math.pow(A,8));let j=w;for(let U=0;U<N.length;U+=8){var M=Math.min(8,N.length-U);const D=parseInt(N.substring(U,U+M),A);M<8?(M=y(Math.pow(A,M)),j=j.j(M).add(y(D))):(j=j.j(x),j=j.add(y(D)))}return j}var w=g(0),b=g(1),k=g(16777216);s=h.prototype,s.m=function(){if(B(this))return-P(this).m();let N=0,A=1;for(let x=0;x<this.g.length;x++){const j=this.i(x);N+=(j>=0?j:4294967296+j)*A,A*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(B(this))return"-"+P(this).toString(N);const A=y(Math.pow(N,6));var x=this;let j="";for(;;){const M=X(x,A).g;x=K(x,M.j(A));let U=((x.g.length>0?x.g[0]:x.h)>>>0).toString(N);if(x=M,O(x))return U+j;for(;U.length<6;)U="0"+U;j=U+j}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(let A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function B(N){return N.h==-1}s.l=function(N){return N=K(this,N),B(N)?-1:O(N)?0:1};function P(N){const A=N.g.length,x=[];for(let j=0;j<A;j++)x[j]=~N.g[j];return new h(x,~N.h).add(b)}s.abs=function(){return B(this)?P(this):this},s.add=function(N){const A=Math.max(this.g.length,N.g.length),x=[];let j=0;for(let M=0;M<=A;M++){let U=j+(this.i(M)&65535)+(N.i(M)&65535),D=(U>>>16)+(this.i(M)>>>16)+(N.i(M)>>>16);j=D>>>16,U&=65535,D&=65535,x[M]=D<<16|U}return new h(x,x[x.length-1]&-2147483648?-1:0)};function K(N,A){return N.add(P(A))}s.j=function(N){if(O(this)||O(N))return w;if(B(this))return B(N)?P(this).j(P(N)):P(P(this).j(N));if(B(N))return P(this.j(P(N)));if(this.l(k)<0&&N.l(k)<0)return y(this.m()*N.m());const A=this.g.length+N.g.length,x=[];for(var j=0;j<2*A;j++)x[j]=0;for(j=0;j<this.g.length;j++)for(let M=0;M<N.g.length;M++){const U=this.i(j)>>>16,D=this.i(j)&65535,Ie=N.i(M)>>>16,ze=N.i(M)&65535;x[2*j+2*M]+=D*ze,V(x,2*j+2*M),x[2*j+2*M+1]+=U*ze,V(x,2*j+2*M+1),x[2*j+2*M+1]+=D*Ie,V(x,2*j+2*M+1),x[2*j+2*M+2]+=U*Ie,V(x,2*j+2*M+2)}for(N=0;N<A;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=A;N<2*A;N++)x[N]=0;return new h(x,0)};function V(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function Q(N,A){this.g=N,this.h=A}function X(N,A){if(O(A))throw Error("division by zero");if(O(N))return new Q(w,w);if(B(N))return A=X(P(N),A),new Q(P(A.g),P(A.h));if(B(A))return A=X(N,P(A)),new Q(P(A.g),A.h);if(N.g.length>30){if(B(N)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var x=b,j=A;j.l(N)<=0;)x=pe(x),j=pe(j);var M=ee(x,1),U=ee(j,1);for(j=ee(j,2),x=ee(x,2);!O(j);){var D=U.add(j);D.l(N)<=0&&(M=M.add(x),U=D),j=ee(j,1),x=ee(x,1)}return A=K(N,M.j(A)),new Q(M,A)}for(M=w;N.l(A)>=0;){for(x=Math.max(1,Math.floor(N.m()/A.m())),j=Math.ceil(Math.log(x)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),U=y(x),D=U.j(A);B(D)||D.l(N)>0;)x-=j,U=y(x),D=U.j(A);O(U)&&(U=b),M=M.add(U),N=K(N,D)}return new Q(M,N)}s.B=function(N){return X(this,N).h},s.and=function(N){const A=Math.max(this.g.length,N.g.length),x=[];for(let j=0;j<A;j++)x[j]=this.i(j)&N.i(j);return new h(x,this.h&N.h)},s.or=function(N){const A=Math.max(this.g.length,N.g.length),x=[];for(let j=0;j<A;j++)x[j]=this.i(j)|N.i(j);return new h(x,this.h|N.h)},s.xor=function(N){const A=Math.max(this.g.length,N.g.length),x=[];for(let j=0;j<A;j++)x[j]=this.i(j)^N.i(j);return new h(x,this.h^N.h)};function pe(N){const A=N.g.length+1,x=[];for(let j=0;j<A;j++)x[j]=N.i(j)<<1|N.i(j-1)>>>31;return new h(x,N.h)}function ee(N,A){const x=A>>5;A%=32;const j=N.g.length-x,M=[];for(let U=0;U<j;U++)M[U]=A>0?N.i(U+x)>>>A|N.i(U+x+1)<<32-A:N.i(U+x);return new h(M,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ww=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,Li=h}).apply(typeof aS<"u"?aS:typeof self<"u"?self:typeof window<"u"?window:{});var gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Tw,oc,xw,Rd,up,bw,Aw,Nw;(function(){var s,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof gd=="object"&&gd];for(var v=0;v<d.length;++v){var S=d[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function o(d,v){if(v)e:{var S=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var W=d[C];if(!(W in S))break e;S=S[W]}d=d[d.length-1],C=S[d],v=v(C),v!=C&&v!=null&&e(S,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var S=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&S.push([C,v[C]]);return S}});var u=u||{},h=this||self;function p(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function g(d,v,S){return d.call.apply(d.bind,arguments)}function y(d,v,S){return y=g,y.apply(null,arguments)}function E(d,v){var S=Array.prototype.slice.call(arguments,1);return function(){var C=S.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function w(d,v){function S(){}S.prototype=v.prototype,d.Z=v.prototype,d.prototype=new S,d.prototype.constructor=d,d.Ob=function(C,W,se){for(var Ae=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)Ae[Ke-2]=arguments[Ke];return v.prototype[W].apply(C,Ae)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function k(d){const v=d.length;if(v>0){const S=Array(v);for(let C=0;C<v;C++)S[C]=d[C];return S}return[]}function O(d,v){for(let C=1;C<arguments.length;C++){const W=arguments[C];var S=typeof W;if(S=S!="object"?S:W?Array.isArray(W)?"array":S:"null",S=="array"||S=="object"&&typeof W.length=="number"){S=d.length||0;const se=W.length||0;d.length=S+se;for(let Ae=0;Ae<se;Ae++)d[S+Ae]=W[Ae]}else d.push(W)}}class B{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function P(d){h.setTimeout(()=>{throw d},0)}function K(){var d=N;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class V{constructor(){this.h=this.g=null}add(v,S){const C=Q.get();C.set(v,S),this.h?this.h.next=C:this.g=C,this.h=C}}var Q=new B(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,ee=!1,N=new V,A=()=>{const d=Promise.resolve(void 0);pe=()=>{d.then(x)}};function x(){for(var d;d=K();){try{d.h.call(d.g)}catch(S){P(S)}var v=Q;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}ee=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};h.addEventListener("test",S,v),h.removeEventListener("test",S,v)}catch{}return d})();function D(d){return/^[\s\xa0]*$/.test(d)}function Ie(d,v){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}w(Ie,M),Ie.prototype.init=function(d,v){const S=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(S=="mouseover"?v=d.fromElement:S=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),q=0;function re(d,v,S,C,W){this.listener=d,this.proxy=null,this.src=v,this.type=S,this.capture=!!C,this.ha=W,this.key=++q,this.da=this.fa=!1}function xe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ve(d,v,S){for(const C in d)v.call(S,d[C],C,d)}function z(d,v){for(const S in d)v.call(void 0,d[S],S,d)}function R(d){const v={};for(const S in d)v[S]=d[S];return v}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(d,v){let S,C;for(let W=1;W<arguments.length;W++){C=arguments[W];for(S in C)d[S]=C[S];for(let se=0;se<G.length;se++)S=G[se],Object.prototype.hasOwnProperty.call(C,S)&&(d[S]=C[S])}}function _e(d){this.src=d,this.g={},this.h=0}_e.prototype.add=function(d,v,S,C,W){const se=d.toString();d=this.g[se],d||(d=this.g[se]=[],this.h++);const Ae=Ce(d,v,C,W);return Ae>-1?(v=d[Ae],S||(v.fa=!1)):(v=new re(v,this.src,se,!!C,W),v.fa=S,d.push(v)),v};function oe(d,v){const S=v.type;if(S in d.g){var C=d.g[S],W=Array.prototype.indexOf.call(C,v,void 0),se;(se=W>=0)&&Array.prototype.splice.call(C,W,1),se&&(xe(v),d.g[S].length==0&&(delete d.g[S],d.h--))}}function Ce(d,v,S,C){for(let W=0;W<d.length;++W){const se=d[W];if(!se.da&&se.listener==v&&se.capture==!!S&&se.ha==C)return W}return-1}var Me="closure_lm_"+(Math.random()*1e6|0),Je={};function de(d,v,S,C,W){if(Array.isArray(v)){for(let se=0;se<v.length;se++)de(d,v[se],S,C,W);return null}return S=Te(S),d&&d[ze]?d.J(v,S,p(C)?!!C.capture:!1,W):ae(d,v,S,!1,C,W)}function ae(d,v,S,C,W,se){if(!v)throw Error("Invalid event type");const Ae=p(W)?!!W.capture:!!W;let Ke=Se(d);if(Ke||(d[Me]=Ke=new _e(d)),S=Ke.add(v,S,C,Ae,se),S.proxy)return S;if(C=$(),S.proxy=C,C.src=d,C.listener=S,d.addEventListener)U||(W=Ae),W===void 0&&(W=!1),d.addEventListener(v.toString(),C,W);else if(d.attachEvent)d.attachEvent(H(v.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return S}function $(){function d(S){return v.call(d.src,d.listener,S)}const v=ne;return d}function ye(d,v,S,C,W){if(Array.isArray(v))for(var se=0;se<v.length;se++)ye(d,v[se],S,C,W);else C=p(C)?!!C.capture:!!C,S=Te(S),d&&d[ze]?(d=d.i,se=String(v).toString(),se in d.g&&(v=d.g[se],S=Ce(v,S,C,W),S>-1&&(xe(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete d.g[se],d.h--)))):d&&(d=Se(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Ce(v,S,C,W)),(S=d>-1?v[d]:null)&&me(S))}function me(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ze])oe(v.i,d);else{var S=d.type,C=d.proxy;v.removeEventListener?v.removeEventListener(S,C,d.capture):v.detachEvent?v.detachEvent(H(S),C):v.addListener&&v.removeListener&&v.removeListener(C),(S=Se(v))?(oe(S,d),S.h==0&&(S.src=null,v[Me]=null)):xe(d)}}}function H(d){return d in Je?Je[d]:Je[d]="on"+d}function ne(d,v){if(d.da)d=!0;else{v=new Ie(v,this);const S=d.listener,C=d.ha||d.src;d.fa&&me(d),d=S.call(C,v)}return d}function Se(d){return d=d[Me],d instanceof _e?d:null}var Ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function Te(d){return typeof d=="function"?d:(d[Ne]||(d[Ne]=function(v){return d.handleEvent(v)}),d[Ne])}function be(){j.call(this),this.i=new _e(this),this.M=this,this.G=null}w(be,j),be.prototype[ze]=!0,be.prototype.removeEventListener=function(d,v,S,C){ye(this,d,v,S,C)};function le(d,v){var S,C=d.G;if(C)for(S=[];C;C=C.G)S.push(C);if(d=d.M,C=v.type||v,typeof v=="string")v=new M(v,d);else if(v instanceof M)v.target=v.target||d;else{var W=v;v=new M(C,d),ce(v,W)}W=!0;let se,Ae;if(S)for(Ae=S.length-1;Ae>=0;Ae--)se=v.g=S[Ae],W=we(se,C,!0,v)&&W;if(se=v.g=d,W=we(se,C,!0,v)&&W,W=we(se,C,!1,v)&&W,S)for(Ae=0;Ae<S.length;Ae++)se=v.g=S[Ae],W=we(se,C,!1,v)&&W}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const S=d.g[v];for(let C=0;C<S.length;C++)xe(S[C]);delete d.g[v],d.h--}}this.G=null},be.prototype.J=function(d,v,S,C){return this.i.add(String(d),v,!1,S,C)},be.prototype.K=function(d,v,S,C){return this.i.add(String(d),v,!0,S,C)};function we(d,v,S,C){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let W=!0;for(let se=0;se<v.length;++se){const Ae=v[se];if(Ae&&!Ae.da&&Ae.capture==S){const Ke=Ae.listener,Ht=Ae.ha||Ae.src;Ae.fa&&oe(d.i,Ae),W=Ke.call(Ht,C)!==!1&&W}}return W&&!C.defaultPrevented}function qe(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:h.setTimeout(d,v||0)}function Ze(d){d.g=qe(()=>{d.g=null,d.i&&(d.i=!1,Ze(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Ue extends j{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ze(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(d){j.call(this),this.h=d,this.g={}}w(ht,j);var qt=[];function dn(d){ve(d.g,function(v,S){this.g.hasOwnProperty(S)&&me(v)},d),d.g={}}ht.prototype.N=function(){ht.Z.N.call(this),dn(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nt=h.JSON.stringify,Rt=h.JSON.parse,Gn=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function pa(){}function Ge(){}var Pe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gt(){M.call(this,"d")}w(gt,M);function yt(){M.call(this,"c")}w(yt,M);var wt={},Qa=null;function Ms(){return Qa=Qa||new be}wt.Ia="serverreachability";function Hc(d){M.call(this,wt.Ia,d)}w(Hc,M);function Ps(d){const v=Ms();le(v,new Hc(v))}wt.STAT_EVENT="statevent";function Xi(d,v){M.call(this,wt.STAT_EVENT,d),this.stat=v}w(Xi,M);function Xt(d){const v=Ms();le(v,new Xi(v,d))}wt.Ja="timingevent";function Os(d,v){M.call(this,wt.Ja,d),this.size=v}w(Os,M);function Ls(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},v)}function Es(){this.g=!0}Es.prototype.ua=function(){this.g=!1};function Ph(d,v,S,C,W,se){d.info(function(){if(d.g)if(se){var Ae="",Ke=se.split("&");for(let ft=0;ft<Ke.length;ft++){var Ht=Ke[ft].split("=");if(Ht.length>1){const kt=Ht[0];Ht=Ht[1];const is=kt.split("_");Ae=is.length>=2&&is[1]=="type"?Ae+(kt+"="+Ht+"&"):Ae+(kt+"=redacted&")}}}else Ae=null;else Ae=se;return"XMLHTTP REQ ("+C+") [attempt "+W+"]: "+v+`
`+S+`
`+Ae})}function Gc(d,v,S,C,W,se,Ae){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+W+"]: "+v+`
`+S+`
`+se+" "+Ae})}function Us(d,v,S,C){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Oh(d,S)+(C?" "+C:"")})}function Qi(d,v){d.info(function(){return"TIMEOUT: "+v})}Es.prototype.info=function(){};function Oh(d,v){if(!d.g)return v;if(!v)return null;try{const se=JSON.parse(v);if(se){for(d=0;d<se.length;d++)if(Array.isArray(se[d])){var S=se[d];if(!(S.length<2)){var C=S[1];if(Array.isArray(C)&&!(C.length<1)){var W=C[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Ae=1;Ae<C.length;Ae++)C[Ae]=""}}}}return Nt(se)}catch{return v}}var Wi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nl;function Ji(){}w(Ji,pa),Ji.prototype.g=function(){return new XMLHttpRequest},nl=new Ji;function ga(d){return encodeURIComponent(String(d))}function $c(d){var v=1;d=d.split(":");const S=[];for(;v>0&&d.length;)S.push(d.shift()),v--;return d.length&&S.push(d.join(":")),S}function _s(d,v,S,C){this.j=d,this.i=v,this.l=S,this.S=C||1,this.V=new ht(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ss}function Ss(){this.i=null,this.g="",this.h=!1}var Qt={},hn={};function Vs(d,v,S){d.M=1,d.A=Zi(Jt(v)),d.u=S,d.R=!0,Fr(d,null)}function Fr(d,v){d.F=Date.now(),Fs(d),d.B=Jt(d.A);var S=d.B,C=d.S;Array.isArray(C)||(C=[String(C)]),Hr(S.i,"t",C),d.C=0,S=d.j.L,d.h=new Ss,d.g=ou(d.j,S?v:null,!d.u),d.P>0&&(d.O=new Ue(y(d.Y,d,d.g),d.P)),v=d.V,S=d.g,C=d.ba;var W="readystatechange";Array.isArray(W)||(W&&(qt[0]=W.toString()),W=qt);for(let se=0;se<W.length;se++){const Ae=de(S,W[se],C||v.handleEvent,!1,v.h||v);if(!Ae)break;v.g[Ae.key]=Ae}v=d.J?R(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Ps(),Ph(d.i,d.v,d.B,d.l,d.S,d.u)}_s.prototype.ba=function(d){d=d.target;const v=this.O;v&&xs(d)==3?v.j():this.Y(d)},_s.prototype.Y=function(d){try{if(d==this.g)e:{const Ke=xs(this.g),Ht=this.g.ya(),ft=this.g.ca();if(!(Ke<3)&&(Ke!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||Ke!=4||Ht==7||(Ht==8||ft<=0?Ps(3):Ps(2)),Bs(this);var v=this.g.ca();this.X=v;var S=Lh(this);if(this.o=v==200,Gc(this.i,this.v,this.B,this.l,this.S,Ke,v),this.o){if(this.U&&!this.L){t:{if(this.g){var C,W=this.g;if((C=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(C)){var se=C;break t}}se=null}if(d=se)Us(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zs(this,d);else{this.o=!1,this.m=3,Xt(12),$n(this),ns(this);break e}}if(this.R){d=!0;let kt;for(;!this.K&&this.C<S.length;)if(kt=Kc(this,S),kt==hn){Ke==4&&(this.m=4,Xt(14),d=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Qt){this.m=4,Xt(15),Us(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else Us(this.i,this.l,kt,null),zs(this,kt);if(Yc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ke!=4||S.length!=0||this.h.h||(this.m=1,Xt(16),d=!1),this.o=this.o&&d,!d)Us(this.i,this.l,S,"[Invalid Chunked Response]"),$n(this),ns(this);else if(S.length>0&&!this.W){this.W=!0;var Ae=this.j;Ae.g==this&&Ae.aa&&!Ae.P&&(Ae.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),yl(Ae),Ae.P=!0,Xt(11))}}else Us(this.i,this.l,S,null),zs(this,S);Ke==4&&$n(this),this.o&&!this.K&&(Ke==4?su(this.j,this):(this.o=!1,Fs(this)))}else va(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,Xt(12)):(this.m=0,Xt(13)),$n(this),ns(this)}}}catch{}finally{}};function Lh(d){if(!Yc(d))return d.g.la();const v=gn(d.g);if(v==="")return"";let S="";const C=v.length,W=xs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return $n(d),ns(d),"";d.h.i=new h.TextDecoder}for(let se=0;se<C;se++)d.h.h=!0,S+=d.h.i.decode(v[se],{stream:!(W&&se==C-1)});return v.length=0,d.h.g+=S,d.C=0,d.h.g}function Yc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Kc(d,v){var S=d.C,C=v.indexOf(`
`,S);return C==-1?hn:(S=Number(v.substring(S,C)),isNaN(S)?Qt:(C+=1,C+S>v.length?hn:(v=v.slice(C,C+S),d.C=C+S,v)))}_s.prototype.cancel=function(){this.K=!0,$n(this)};function Fs(d){d.T=Date.now()+d.H,Br(d,d.H)}function Br(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ls(y(d.aa,d),v)}function Bs(d){d.D&&(h.clearTimeout(d.D),d.D=null)}_s.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Qi(this.i,this.B),this.M!=2&&(Ps(),Xt(17)),$n(this),this.m=2,ns(this)):Br(this,this.T-d)};function ns(d){d.j.I==0||d.K||su(d.j,d)}function $n(d){Bs(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,dn(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function zs(d,v){try{var S=d.j;if(S.I!=0&&(S.g==d||Hs(S.h,d))){if(!d.L&&Hs(S.h,d)&&S.I==3){try{var C=S.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var W=C;if(W[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<d.F)Xr(S),ai(S);else break e;rr(S),Xt(18)}}else S.xa=W[1],0<S.xa-S.K&&W[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Ls(y(S.Va,S),6e3));qs(S.h)<=1&&S.ta&&(S.ta=void 0)}else Qs(S,11)}else if((d.L||S.g==d)&&Xr(S),!D(v))for(W=S.Ba.g.parse(v),v=0;v<W.length;v++){let ft=W[v];const kt=ft[0];if(!(kt<=S.K))if(S.K=kt,ft=ft[1],S.I==2)if(ft[0]=="c"){S.M=ft[1],S.ba=ft[2];const is=ft[3];is!=null&&(S.ka=is,S.j.info("VER="+S.ka));const Ws=ft[4];Ws!=null&&(S.za=Ws,S.j.info("SVER="+S.za));const bs=ft[5];bs!=null&&typeof bs=="number"&&bs>0&&(C=1.5*bs,S.O=C,S.j.info("backChannelRequestTimeoutMs_="+C)),C=S;const As=d.g;if(As){const or=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(or){var se=C.h;se.g||or.indexOf("spdy")==-1&&or.indexOf("quic")==-1&&or.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(il(se,se.h),se.h=null))}if(C.G){const Qr=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;Qr&&(C.wa=Qr,Et(C.J,C.G,Qr))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-d.F,S.j.info("Handshake RTT: "+S.T+"ms")),C=S;var Ae=d;if(C.na=ru(C,C.L?C.ba:null,C.W),Ae.L){rl(C.h,Ae);var Ke=Ae,Ht=C.O;Ht&&(Ke.H=Ht),Ke.D&&(Bs(Ke),Fs(Ke)),C.g=Ae}else tu(C);S.i.length>0&&Xs(S)}else ft[0]!="stop"&&ft[0]!="close"||Qs(S,7);else S.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Qs(S,7):pl(S):ft[0]!="noop"&&S.l&&S.l.qa(ft),S.A=0)}}Ps(4)}catch{}}var Wt=class{constructor(d,v){this.g=d,this.map=v}};function sl(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function al(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function qs(d){return d.h?1:d.g?d.g.size:0}function Hs(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function il(d,v){d.g?d.g.add(v):d.h=v}function rl(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}sl.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ol(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const S of d.g.values())v=v.concat(S.G);return v}return k(d.i)}var Xc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zr(d,v){if(d){d=d.split("&");for(let S=0;S<d.length;S++){const C=d[S].indexOf("=");let W,se=null;C>=0?(W=d[S].substring(0,C),se=d[S].substring(C+1)):W=d[S],v(W,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function Yn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof Yn?(this.l=d.l,fn(this,d.j),this.o=d.o,this.g=d.g,Wa(this,d.u),this.h=d.h,ll(this,Zc(d.i)),this.m=d.m):d&&(v=String(d).match(Xc))?(this.l=!1,fn(this,v[1]||"",!0),this.o=Gs(v[2]||""),this.g=Gs(v[3]||"",!0),Wa(this,v[4]),this.h=Gs(v[5]||"",!0),ll(this,v[6]||"",!0),this.m=Gs(v[7]||"")):(this.l=!1,this.i=new Za(null,this.l))}Yn.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(er(v,qr,!0),":");var S=this.g;return(S||v=="file")&&(d.push("//"),(v=this.o)&&d.push(er(v,qr,!0),"@"),d.push(ga(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&d.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(er(S,S.charAt(0)=="/"?cl:Qc,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",er(S,Wc)),d.join("")},Yn.prototype.resolve=function(d){const v=Jt(this);let S=!!d.j;S?fn(v,d.j):S=!!d.o,S?v.o=d.o:S=!!d.g,S?v.g=d.g:S=d.u!=null;var C=d.h;if(S)Wa(v,d.u);else if(S=!!d.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var W=v.h.lastIndexOf("/");W!=-1&&(C=v.h.slice(0,W+1)+C)}if(W=C,W==".."||W==".")C="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){C=W.lastIndexOf("/",0)==0,W=W.split("/");const se=[];for(let Ae=0;Ae<W.length;){const Ke=W[Ae++];Ke=="."?C&&Ae==W.length&&se.push(""):Ke==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),C&&Ae==W.length&&se.push("")):(se.push(Ke),C=!0)}C=se.join("/")}else C=W}return S?v.h=C:S=d.i.toString()!=="",S?ll(v,Zc(d.i)):S=!!d.m,S&&(v.m=d.m),v};function Jt(d){return new Yn(d)}function fn(d,v,S){d.j=S?Gs(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Wa(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function ll(d,v,S){v instanceof Za?(d.i=v,Gr(d.i,d.l)):(S||(v=er(v,Ja)),d.i=new Za(v,d.l))}function Et(d,v,S){d.i.set(v,S)}function Zi(d){return Et(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Gs(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function er(d,v,S){return typeof d=="string"?(d=encodeURI(d).replace(v,kn),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function kn(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var qr=/[#\/\?@]/g,Qc=/[#\?:]/g,cl=/[#\?]/g,Ja=/[#\?@]/g,Wc=/#/g;function Za(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Mn(d){d.g||(d.g=new Map,d.h=0,d.i&&zr(d.i,function(v,S){d.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}s=Za.prototype,s.add=function(d,v){Mn(this),this.i=null,d=ei(this,d);let S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(v),this.h+=1,this};function Jc(d,v){Mn(d),v=ei(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function ul(d,v){return Mn(d),v=ei(d,v),d.g.has(v)}s.forEach=function(d,v){Mn(this),this.g.forEach(function(S,C){S.forEach(function(W){d.call(v,W,C,this)},this)},this)};function dl(d,v){Mn(d);let S=[];if(typeof v=="string")ul(d,v)&&(S=S.concat(d.g.get(ei(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)S=S.concat(d[v]);return S}s.set=function(d,v){return Mn(this),this.i=null,d=ei(this,d),ul(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},s.get=function(d,v){return d?(d=dl(this,d),d.length>0?String(d[0]):v):v};function Hr(d,v,S){Jc(d,v),S.length>0&&(d.i=null,d.g.set(ei(d,v),k(S)),d.h+=S.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var S=v[C];const W=ga(S);S=dl(this,S);for(let se=0;se<S.length;se++){let Ae=W;S[se]!==""&&(Ae+="="+ga(S[se])),d.push(Ae)}}return this.i=d.join("&")};function Zc(d){const v=new Za;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function ei(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Gr(d,v){v&&!d.j&&(Mn(d),d.i=null,d.g.forEach(function(S,C){const W=C.toLowerCase();C!=W&&(Jc(this,C),Hr(this,W,S))},d)),d.j=v}function ws(d,v){const S=new Es;if(h.Image){const C=new Image;C.onload=E(ss,S,"TestLoadImage: loaded",!0,v,C),C.onerror=E(ss,S,"TestLoadImage: error",!1,v,C),C.onabort=E(ss,S,"TestLoadImage: abort",!1,v,C),C.ontimeout=E(ss,S,"TestLoadImage: timeout",!1,v,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else v(!1)}function hl(d,v){const S=new Es,C=new AbortController,W=setTimeout(()=>{C.abort(),ss(S,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:C.signal}).then(se=>{clearTimeout(W),se.ok?ss(S,"TestPingServer: ok",!0,v):ss(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),ss(S,"TestPingServer: error",!1,v)})}function ss(d,v,S,C,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),C(S)}catch{}}function ti(){this.g=new Gn}function $s(d){this.i=d.Sb||null,this.h=d.ab||!1}w($s,pa),$s.prototype.g=function(){return new tr(this.i,this.h)};function tr(d,v){be.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(tr,be),s=tr.prototype,s.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Ts(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||h).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ni(this)),this.readyState=0},s.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ts(this)),this.g&&(this.readyState=3,Ts(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;$r(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function $r(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}s.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ni(this):Ts(this),this.readyState==3&&$r(this)}},s.Oa=function(d){this.g&&(this.response=this.responseText=d,ni(this))},s.Na=function(d){this.g&&(this.response=d,ni(this))},s.ga=function(){this.g&&ni(this)};function ni(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ts(d)}s.setRequestHeader=function(d,v){this.A.append(d,v)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=v.next();return d.join(`\r
`)};function Ts(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function as(d){let v="";return ve(d,function(S,C){v+=C,v+=":",v+=S,v+=`\r
`}),v}function nr(d,v,S){e:{for(C in S){var C=!1;break e}C=!0}C||(S=as(S),typeof d=="string"?S!=null&&ga(S):Et(d,v,S))}function Tt(d){be.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Tt,be);var Ys=/^https?$/i,fl=["POST","PUT"];s=Tt.prototype,s.Fa=function(d){this.H=d},s.ea=function(d,v,S,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nl.g(),this.g.onreadystatechange=b(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(se){sr(this,se);return}if(d=S||"",S=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var W in C)S.set(W,C[W]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const se of C.keys())S.set(se,C.get(se));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(S.keys()).find(se=>se.toLowerCase()=="content-type"),W=h.FormData&&d instanceof h.FormData,!(Array.prototype.indexOf.call(fl,v,void 0)>=0)||C||W||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,Ae]of S)this.g.setRequestHeader(se,Ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(se){sr(this,se)}};function sr(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,ml(d),ya(d)}function ml(d){d.A||(d.A=!0,le(d,"complete"),le(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,le(this,"complete"),le(this,"abort"),ya(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ya(this,!0)),Tt.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?ar(this):this.Xa())},s.Xa=function(){ar(this)};function ar(d){if(d.h&&typeof u<"u"){if(d.v&&xs(d)==4)setTimeout(d.Ca.bind(d),0);else if(le(d,"readystatechange"),xs(d)==4){d.h=!1;try{const se=d.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var C;if(C=se===0){let Ae=String(d.D).match(Xc)[1]||null;!Ae&&h.self&&h.self.location&&(Ae=h.self.location.protocol.slice(0,-1)),C=!Ys.test(Ae?Ae.toLowerCase():"")}S=C}if(S)le(d,"complete"),le(d,"success");else{d.o=6;try{var W=xs(d)>2?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.ca()+"]",ml(d)}}finally{ya(d)}}}}function ya(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const S=d.g;d.g=null,v||le(d,"ready");try{S.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function xs(d){return d.g?d.g.readyState:0}s.ca=function(){try{return xs(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Rt(v)}};function gn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function va(d){const v={};d=(d.g&&xs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(D(d[C]))continue;var S=$c(d[C]);const W=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const se=v[W]||[];v[W]=se,se.push(S)}z(v,function(C){return C.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ks(d,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||v}function si(d){this.za=0,this.i=[],this.j=new Es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ks("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ks("baseRetryDelayMs",5e3,d),this.Za=Ks("retryDelaySeedMs",1e4,d),this.Ta=Ks("forwardChannelMaxRetries",2,d),this.va=Ks("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new sl(d&&d.concurrentRequestLimit),this.Ba=new ti,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=si.prototype,s.ka=8,s.I=1,s.connect=function(d,v,S,C){Xt(0),this.W=d,this.H=v||{},S&&C!==void 0&&(this.H.OSID=S,this.H.OAID=C),this.F=this.X,this.J=ru(this,null,this.W),Xs(this)};function pl(d){if(Yr(d),d.I==3){var v=d.V++,S=Jt(d.J);if(Et(S,"SID",d.M),Et(S,"RID",v),Et(S,"TYPE","terminate"),ir(d,S),v=new _s(d,d.j,v),v.M=2,v.A=Zi(Jt(S)),S=!1,h.navigator&&h.navigator.sendBeacon)try{S=h.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&h.Image&&(new Image().src=v.A,S=!0),S||(v.g=ou(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Fs(v)}iu(d)}function ai(d){d.g&&(yl(d),d.g.cancel(),d.g=null)}function Yr(d){ai(d),d.v&&(h.clearTimeout(d.v),d.v=null),Xr(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&h.clearTimeout(d.m),d.m=null)}function Xs(d){if(!al(d.h)&&!d.m){d.m=!0;var v=d.Ea;pe||A(),ee||(pe(),ee=!0),N.add(v,d),d.D=0}}function Kr(d,v){return qs(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ls(y(d.Ea,d,v),au(d,d.D)),d.D++,!0)}s.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const W=new _s(this,this.j,d);let se=this.o;if(this.U&&(se?(se=R(se),ce(se,this.U)):se=this.U),this.u!==null||this.R||(W.J=se,se=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var C=this.i[S];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=eu(this,W,v),S=Jt(this.J),Et(S,"RID",d),Et(S,"CVER",22),this.G&&Et(S,"X-HTTP-Session-Id",this.G),ir(this,S),se&&(this.R?v="headers="+ga(as(se))+"&"+v:this.u&&nr(S,this.u,se)),il(this.h,W),this.Ra&&Et(S,"TYPE","init"),this.S?(Et(S,"$req",v),Et(S,"SID","null"),W.U=!0,Vs(W,S,null)):Vs(W,S,v),this.I=2}}else this.I==3&&(d?gl(this,d):this.i.length==0||al(this.h)||gl(this))};function gl(d,v){var S;v?S=v.l:S=d.V++;const C=Jt(d.J);Et(C,"SID",d.M),Et(C,"RID",S),Et(C,"AID",d.K),ir(d,C),d.u&&d.o&&nr(C,d.u,d.o),S=new _s(d,d.j,S,d.D+1),d.u===null&&(S.J=d.o),v&&(d.i=v.G.concat(d.i)),v=eu(d,S,1e3),S.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),il(d.h,S),Vs(S,C,v)}function ir(d,v){d.H&&ve(d.H,function(S,C){Et(v,C,S)}),d.l&&ve({},function(S,C){Et(v,C,S)})}function eu(d,v,S){S=Math.min(d.i.length,S);const C=d.l?y(d.l.Ka,d.l,d):null;e:{var W=d.i;let Ke=-1;for(;;){const Ht=["count="+S];Ke==-1?S>0?(Ke=W[0].g,Ht.push("ofs="+Ke)):Ke=0:Ht.push("ofs="+Ke);let ft=!0;for(let kt=0;kt<S;kt++){var se=W[kt].g;const is=W[kt].map;if(se-=Ke,se<0)Ke=Math.max(0,W[kt].g-100),ft=!1;else try{se="req"+se+"_"||"";try{var Ae=is instanceof Map?is:Object.entries(is);for(const[Ws,bs]of Ae){let As=bs;p(bs)&&(As=Nt(bs)),Ht.push(se+Ws+"="+encodeURIComponent(As))}}catch(Ws){throw Ht.push(se+"type="+encodeURIComponent("_badmap")),Ws}}catch{C&&C(is)}}if(ft){Ae=Ht.join("&");break e}}Ae=void 0}return d=d.i.splice(0,S),v.G=d,Ae}function tu(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;pe||A(),ee||(pe(),ee=!0),N.add(v,d),d.A=0}}function rr(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ls(y(d.Da,d),au(d,d.A)),d.A++,!0)}s.Da=function(){if(this.v=null,nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ls(y(this.Wa,this),d)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Xt(10),ai(this),nu(this))};function yl(d){d.B!=null&&(h.clearTimeout(d.B),d.B=null)}function nu(d){d.g=new _s(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Jt(d.na);Et(v,"RID","rpc"),Et(v,"SID",d.M),Et(v,"AID",d.K),Et(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Et(v,"TO",d.ia),Et(v,"TYPE","xmlhttp"),ir(d,v),d.u&&d.o&&nr(v,d.u,d.o),d.O&&(d.g.H=d.O);var S=d.g;d=d.ba,S.M=1,S.A=Zi(Jt(v)),S.u=null,S.R=!0,Fr(S,d)}s.Va=function(){this.C!=null&&(this.C=null,ai(this),rr(this),Xt(19))};function Xr(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function su(d,v){var S=null;if(d.g==v){Xr(d),yl(d),d.g=null;var C=2}else if(Hs(d.h,v))S=v.G,rl(d.h,v),C=1;else return;if(d.I!=0){if(v.o)if(C==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var W=d.D;C=Ms(),le(C,new Os(C,S)),Xs(d)}else tu(d);else if(W=v.m,W==3||W==0&&v.X>0||!(C==1&&Kr(d,v)||C==2&&rr(d)))switch(S&&S.length>0&&(v=d.h,v.i=v.i.concat(S)),W){case 1:Qs(d,5);break;case 4:Qs(d,10);break;case 3:Qs(d,6);break;default:Qs(d,2)}}}function au(d,v){let S=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(S*=2),S*v}function Qs(d,v){if(d.j.info("Error code "+v),v==2){var S=y(d.bb,d),C=d.Ua;const W=!C;C=new Yn(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||fn(C,"https"),Zi(C),W?ws(C.toString(),S):hl(C.toString(),S)}else Xt(2);d.I=0,d.l&&d.l.pa(v),iu(d),Yr(d)}s.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function iu(d){if(d.I=0,d.ja=[],d.l){const v=ol(d.h);(v.length!=0||d.i.length!=0)&&(O(d.ja,v),O(d.ja,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.oa()}}function ru(d,v,S){var C=S instanceof Yn?Jt(S):new Yn(S);if(C.g!="")v&&(C.g=v+"."+C.g),Wa(C,C.u);else{var W=h.location;C=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;const se=new Yn(null);C&&fn(se,C),v&&(se.g=v),W&&Wa(se,W),S&&(se.h=S),C=se}return S=d.G,v=d.wa,S&&v&&Et(C,S,v),Et(C,"VER",d.ka),ir(d,C),C}function ou(d,v,S){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new Tt(new $s({ab:S})):new Tt(d.ma),v.Fa(d.L),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function lu(){}s=lu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ii(){}ii.prototype.g=function(d,v){return new Rn(d,v)};function Rn(d,v){be.call(this),this.g=new si(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!D(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Ea(this)}w(Rn,be),Rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){pl(this.g)},Rn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.v&&(S={},S.__data__=Nt(d),d=S);v.i.push(new Wt(v.Ya++,d)),v.I==3&&Xs(v)},Rn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,Rn.Z.N.call(this)};function cu(d){gt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const S in v){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}w(cu,gt);function uu(){yt.call(this),this.status=1}w(uu,yt);function Ea(d){this.g=d}w(Ea,lu),Ea.prototype.ra=function(){le(this.g,"a")},Ea.prototype.qa=function(d){le(this.g,new cu(d))},Ea.prototype.pa=function(d){le(this.g,new uu)},Ea.prototype.oa=function(){le(this.g,"b")},ii.prototype.createWebChannel=ii.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,Nw=function(){return new ii},Aw=function(){return Ms()},bw=wt,up={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wi.NO_ERROR=0,Wi.TIMEOUT=8,Wi.HTTP_ERROR=6,Rd=Wi,tl.COMPLETE="complete",xw=tl,Ge.EventType=Pe,Pe.OPEN="a",Pe.CLOSE="b",Pe.ERROR="c",Pe.MESSAGE="d",be.prototype.listen=be.prototype.J,oc=Ge,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,Tw=Tt}).apply(typeof gd<"u"?gd:typeof self<"u"?self:typeof window<"u"?window:{});const iS="@firebase/firestore",rS="4.9.2";class An{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}An.UNAUTHENTICATED=new An(null),An.GOOGLE_CREDENTIALS=new An("google-credentials-uid"),An.FIRST_PARTY=new An("first-party-uid"),An.MOCK_USER=new An("mock-user");let $o="12.3.0";const Mr=new Up("@firebase/firestore");function No(){return Mr.logLevel}function Re(s,...e){if(Mr.logLevel<=at.DEBUG){const t=e.map(Zp);Mr.debug(`Firestore (${$o}): ${s}`,...t)}}function Ha(s,...e){if(Mr.logLevel<=at.ERROR){const t=e.map(Zp);Mr.error(`Firestore (${$o}): ${s}`,...t)}}function Lo(s,...e){if(Mr.logLevel<=at.WARN){const t=e.map(Zp);Mr.warn(`Firestore (${$o}): ${s}`,...t)}}function Zp(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Be(s,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Cw(s,i,t)}function Cw(s,e,t){let i=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ha(i),new Error(i)}function vt(s,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,s||Cw(e,o,i)}function Ye(s,e){return s}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class je extends fa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fa{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Rw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class II{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(An.UNAUTHENTICATED)))}shutdown(){}}class DI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jI{constructor(e){this.t=e,this.currentUser=An.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){vt(this.o===void 0,42304);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new Fa;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Fa,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Fa)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(vt(typeof i.accessToken=="string",31837,{l:i}),new Rw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return vt(e===null||typeof e=="string",2055,{h:e}),new An(e)}}class kI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=An.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new kI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(An.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class oS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){vt(this.o===void 0,3512);const i=u=>{u.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new oS(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(vt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new oS(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function OI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class eg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=OI(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%62))}return i}}function it(s,e){return s<e?-1:s>e?1:0}function dp(s,e){const t=Math.min(s.length,e.length);for(let i=0;i<t;i++){const o=s.charAt(i),u=e.charAt(i);if(o!==u)return Ym(o)===Ym(u)?it(o,u):Ym(o)?1:-1}return it(s.length,e.length)}const LI=55296,UI=57343;function Ym(s){const e=s.charCodeAt(0);return e>=LI&&e<=UI}function Uo(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}const lS="__name__";class na{constructor(e,t,i){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return na.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof na?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=na.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return it(e.length,t.length)}static compareSegments(e,t){const i=na.isNumericId(e),o=na.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?na.extractNumericId(e).compare(na.extractNumericId(t)):dp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Li.fromString(e.substring(4,e.length-2))}}class jt extends na{construct(e,t,i){return new jt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new je(Ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new jt(t)}static emptyPath(){return new jt([])}}const VI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends na{construct(e,t,i){return new wn(e,t,i)}static isValidIdentifier(e){return VI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lS}static keyField(){return new wn([lS])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new je(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new je(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new je(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(i+=p,o++):(u(),o++)}if(u(),h)throw new je(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}class Le{constructor(e){this.path=e}static fromPath(e){return new Le(jt.fromString(e))}static fromName(e){return new Le(jt.fromString(e).popFirst(5))}static empty(){return new Le(jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&jt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new jt(e.slice()))}}function Iw(s,e,t){if(!t)throw new je(Ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function FI(s,e,t,i){if(e===!0&&i===!0)throw new je(Ee.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function cS(s){if(!Le.isDocumentKey(s))throw new je(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function uS(s){if(Le.isDocumentKey(s))throw new je(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Dw(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function tg(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Be(12329,{type:typeof s})}function Hn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new je(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tg(s);throw new je(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}function an(s,e){const t={typeString:s};return e&&(t.value=e),t}function Lc(s,e){if(!Dw(s))throw new je(Ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in s)){t=`JSON missing required field: '${i}'`;break}const h=s[i];if(o&&typeof h!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${i}' field to equal '${u.value}'`;break}}if(t)throw new je(Ee.INVALID_ARGUMENT,t);return!0}const dS=-62135596800,hS=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*hS);return new We(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new je(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new je(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dS)throw new je(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new je(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hS}_compareTo(e){return this.seconds===e.seconds?it(this.nanoseconds,e.nanoseconds):it(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lc(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:an("string",We._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new We(0,0))}static max(){return new He(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const wc=-1;function BI(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=He.fromTimestamp(i===1e9?new We(t+1,0):new We(t,i));return new Fi(o,Le.empty(),e)}function zI(s){return new Fi(s.readTime,s.key,wc)}class Fi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Fi(He.min(),Le.empty(),wc)}static max(){return new Fi(He.max(),Le.empty(),wc)}}function qI(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(s.documentKey,e.documentKey),t!==0?t:it(s.largestBatchId,e.largestBatchId))}const HI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Yo(s){if(s.code!==Ee.FAILED_PRECONDITION||s.message!==HI)throw s;Re("LocalStore","Unexpectedly lost primary lease")}class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ge(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ge?t:ge.resolve(t)}catch(t){return ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ge.reject(t)}static resolve(e){return new ge(((t,i)=>{t(e)}))}static reject(e){return new ge(((t,i)=>{i(e)}))}static waitFor(e){return new ge(((t,i)=>{let o=0,u=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++u,h&&u===o&&t()}),(g=>i(g)))})),h=!0,u===o&&t()}))}static or(e){let t=ge.resolve(!1);for(const i of e)t=t.next((o=>o?ge.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,u)=>{i.push(t.call(this,o,u))})),this.waitFor(i)}static mapArray(e,t){return new ge(((i,o)=>{const u=e.length,h=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next((E=>{h[y]=E,++p,p===u&&i(h)}),(E=>o(E)))}}))}static doWhile(e,t){return new ge(((i,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):i()};u()}))}}function $I(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ko(s){return s.name==="IndexedDbTransactionError"}class fh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fh.ce=-1;const ng=-1;function mh(s){return s==null}function Yd(s){return s===0&&1/s==-1/0}function YI(s){return typeof s=="number"&&Number.isInteger(s)&&!Yd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}const jw="";function KI(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=fS(e)),e=XI(s.get(t),e);return fS(e)}function XI(s,e){let t=e;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":t+="";break;case jw:t+="";break;default:t+=u}}return t}function fS(s){return s+jw+""}function mS(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Yi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function kw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class Ut{constructor(e,t){this.comparator=e,this.root=t||Sn.EMPTY}insert(e,t){return new Ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Sn.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yd(this.root,e,this.comparator,!1)}getReverseIterator(){return new yd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yd(this.root,e,this.comparator,!0)}}class yd{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Sn{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??Sn.RED,this.left=o??Sn.EMPTY,this.right=u??Sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new Sn(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}Sn.EMPTY=null,Sn.RED=!0,Sn.BLACK=!1;Sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,i,o,u){return this}insert(e,t,i){return new Sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cn{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new pS(this.data.getIterator())}getIteratorFrom(e){return new pS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class pS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ts{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new ts([])}unionWith(e){let t=new cn(wn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class Mw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Mw("Invalid base64 string: "+u):u}})(e);return new Tn(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return it(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const QI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bi(s){if(vt(!!s,39018),typeof s=="string"){let e=0;const t=QI.exec(s);if(vt(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Yt(s.seconds),nanos:Yt(s.nanos)}}function Yt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function zi(s){return typeof s=="string"?Tn.fromBase64String(s):Tn.fromUint8Array(s)}const Pw="server_timestamp",Ow="__type__",Lw="__previous_value__",Uw="__local_write_time__";function sg(s){return(s?.mapValue?.fields||{})[Ow]?.stringValue===Pw}function ph(s){const e=s.mapValue.fields[Lw];return sg(e)?ph(e):e}function Tc(s){const e=Bi(s.mapValue.fields[Uw].timestampValue);return new We(e.seconds,e.nanos)}class WI{constructor(e,t,i,o,u,h,p,g,y,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E}}const Kd="(default)";class xc{constructor(e,t){this.projectId=e,this.database=t||Kd}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===Kd}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}const Vw="__type__",JI="__max__",vd={mapValue:{}},Fw="__vector__",Xd="value";function qi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?sg(s)?4:eD(s)?9007199254740991:ZI(s)?10:11:Be(28295,{value:s})}function ua(s,e){if(s===e)return!0;const t=qi(s);if(t!==qi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Tc(s).isEqual(Tc(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Bi(o.timestampValue),p=Bi(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return zi(o.bytesValue).isEqual(zi(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Yt(o.geoPointValue.latitude)===Yt(u.geoPointValue.latitude)&&Yt(o.geoPointValue.longitude)===Yt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Yt(o.integerValue)===Yt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=Yt(o.doubleValue),p=Yt(u.doubleValue);return h===p?Yd(h)===Yd(p):isNaN(h)&&isNaN(p)}return!1})(s,e);case 9:return Uo(s.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},p=u.mapValue.fields||{};if(mS(h)!==mS(p))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(p[g]===void 0||!ua(h[g],p[g])))return!1;return!0})(s,e);default:return Be(52216,{left:s})}}function bc(s,e){return(s.values||[]).find((t=>ua(t,e)))!==void 0}function Vo(s,e){if(s===e)return 0;const t=qi(s),i=qi(e);if(t!==i)return it(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return it(s.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=Yt(u.integerValue||u.doubleValue),g=Yt(h.integerValue||h.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(s,e);case 3:return gS(s.timestampValue,e.timestampValue);case 4:return gS(Tc(s),Tc(e));case 5:return dp(s.stringValue,e.stringValue);case 6:return(function(u,h){const p=zi(u),g=zi(h);return p.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),g=h.split("/");for(let y=0;y<p.length&&y<g.length;y++){const E=it(p[y],g[y]);if(E!==0)return E}return it(p.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=it(Yt(u.latitude),Yt(h.latitude));return p!==0?p:it(Yt(u.longitude),Yt(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return yS(s.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},g=h.fields||{},y=p[Xd]?.arrayValue,E=g[Xd]?.arrayValue,w=it(y?.values?.length||0,E?.values?.length||0);return w!==0?w:yS(y,E)})(s.mapValue,e.mapValue);case 11:return(function(u,h){if(u===vd.mapValue&&h===vd.mapValue)return 0;if(u===vd.mapValue)return 1;if(h===vd.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=h.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let w=0;w<g.length&&w<E.length;++w){const b=dp(g[w],E[w]);if(b!==0)return b;const k=Vo(p[g[w]],y[E[w]]);if(k!==0)return k}return it(g.length,E.length)})(s.mapValue,e.mapValue);default:throw Be(23264,{he:t})}}function gS(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return it(s,e);const t=Bi(s),i=Bi(e),o=it(t.seconds,i.seconds);return o!==0?o:it(t.nanos,i.nanos)}function yS(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=Vo(t[o],i[o]);if(u)return u}return it(t.length,i.length)}function Fo(s){return hp(s)}function hp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Bi(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return zi(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return Le.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=hp(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${hp(t.fields[h])}`;return o+"}"})(s.mapValue):Be(61005,{value:s})}function Id(s){switch(qi(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(s);return e?16+Id(e):16;case 5:return 2*s.stringValue.length;case 6:return zi(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+Id(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Yi(i.fields,((u,h)=>{o+=u.length+Id(h)})),o})(s.mapValue);default:throw Be(13486,{value:s})}}function fp(s){return!!s&&"integerValue"in s}function ag(s){return!!s&&"arrayValue"in s}function vS(s){return!!s&&"nullValue"in s}function ES(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Dd(s){return!!s&&"mapValue"in s}function ZI(s){return(s?.mapValue?.fields||{})[Vw]?.stringValue===Fw}function fc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Yi(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=fc(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fc(s.arrayValue.values[t]);return e}return{...s}}function eD(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===JI}class qn{constructor(e){this.value=e}static empty(){return new qn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(t)}setAll(e){let t=wn.emptyPath(),i={},o=[];e.forEach(((h,p)=>{if(!t.isImmediateParentOf(p)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=p.popLast()}h?i[p.lastSegment()]=fc(h):o.push(p.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());Dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ua(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Dd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Yi(t,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new qn(fc(this.value))}}function Bw(s){const e=[];return Yi(s.fields,((t,i)=>{const o=new wn([t]);if(Dd(i)){const u=Bw(i.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new ts(e)}class Nn{constructor(e,t,i,o,u,h,p){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Nn(e,0,He.min(),He.min(),He.min(),qn.empty(),0)}static newFoundDocument(e,t,i,o){return new Nn(e,1,t,He.min(),i,o,0)}static newNoDocument(e,t){return new Nn(e,2,t,He.min(),He.min(),qn.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,He.min(),He.min(),qn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qd{constructor(e,t){this.position=e,this.inclusive=t}}function _S(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?i=Le.comparator(Le.fromName(h.referenceValue),t.key):i=Vo(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function SS(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!ua(s.position[t],e.position[t]))return!1;return!0}class Wd{constructor(e,t="asc"){this.field=e,this.dir=t}}function tD(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class zw{}class ln extends zw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new sD(e,t,i):t==="array-contains"?new rD(e,i):t==="in"?new oD(e,i):t==="not-in"?new lD(e,i):t==="array-contains-any"?new cD(e,i):new ln(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new aD(e,i):new iD(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&qi(this.value)===qi(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class da extends zw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new da(e,t)}matches(e){return qw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qw(s){return s.op==="and"}function Hw(s){return nD(s)&&qw(s)}function nD(s){for(const e of s.filters)if(e instanceof da)return!1;return!0}function mp(s){if(s instanceof ln)return s.field.canonicalString()+s.op.toString()+Fo(s.value);if(Hw(s))return s.filters.map((e=>mp(e))).join(",");{const e=s.filters.map((t=>mp(t))).join(",");return`${s.op}(${e})`}}function Gw(s,e){return s instanceof ln?(function(i,o){return o instanceof ln&&i.op===o.op&&i.field.isEqual(o.field)&&ua(i.value,o.value)})(s,e):s instanceof da?(function(i,o){return o instanceof da&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,h,p)=>u&&Gw(h,o.filters[p])),!0):!1})(s,e):void Be(19439)}function $w(s){return s instanceof ln?(function(t){return`${t.field.canonicalString()} ${t.op} ${Fo(t.value)}`})(s):s instanceof da?(function(t){return t.op.toString()+" {"+t.getFilters().map($w).join(" ,")+"}"})(s):"Filter"}class sD extends ln{constructor(e,t,i){super(e,t,i),this.key=Le.fromName(i.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class aD extends ln{constructor(e,t){super(e,"in",t),this.keys=Yw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class iD extends ln{constructor(e,t){super(e,"not-in",t),this.keys=Yw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Yw(s,e){return(e.arrayValue?.values||[]).map((t=>Le.fromName(t.referenceValue)))}class rD extends ln{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ag(t)&&bc(t.arrayValue,this.value)}}class oD extends ln{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}}class lD extends ln{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bc(this.value.arrayValue,t)}}class cD extends ln{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ag(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>bc(this.value.arrayValue,i)))}}class uD{constructor(e,t=null,i=[],o=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function wS(s,e=null,t=[],i=[],o=null,u=null,h=null){return new uD(s,e,t,i,o,u,h)}function ig(s){const e=Ye(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>mp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),mh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Fo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Fo(i))).join(",")),e.Te=t}return e.Te}function rg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!tD(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Gw(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!SS(s.startAt,e.startAt)&&SS(s.endAt,e.endAt)}function pp(s){return Le.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class gh{constructor(e,t=null,i=[],o=[],u=null,h="F",p=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dD(s,e,t,i,o,u,h,p){return new gh(s,e,t,i,o,u,h,p)}function yh(s){return new gh(s)}function TS(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function hD(s){return s.collectionGroup!==null}function mc(s){const e=Ye(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new cn(wn.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Wd(u,i))})),t.has(wn.keyField().canonicalString())||e.Ie.push(new Wd(wn.keyField(),i))}return e.Ie}function ra(s){const e=Ye(s);return e.Ee||(e.Ee=fD(e,mc(s))),e.Ee}function fD(s,e){if(s.limitType==="F")return wS(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Wd(o.field,u)}));const t=s.endAt?new Qd(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Qd(s.startAt.position,s.startAt.inclusive):null;return wS(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function gp(s,e,t){return new gh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function vh(s,e){return rg(ra(s),ra(e))&&s.limitType===e.limitType}function Kw(s){return`${ig(ra(s))}|lt:${s.limitType}`}function Co(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>$w(o))).join(", ")}]`),mh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Fo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Fo(o))).join(",")),`Target(${i})`})(ra(s))}; limitType=${s.limitType})`}function Eh(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Le.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of mc(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(h,p,g){const y=_S(h,p,g);return h.inclusive?y<=0:y<0})(i.startAt,mc(i),o)||i.endAt&&!(function(h,p,g){const y=_S(h,p,g);return h.inclusive?y>=0:y>0})(i.endAt,mc(i),o))})(s,e)}function mD(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Xw(s){return(e,t)=>{let i=!1;for(const o of mc(s)){const u=pD(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function pD(s,e,t){const i=s.field.isKeyField()?Le.comparator(e.key,t.key):(function(u,h,p){const g=h.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Vo(g,y):Be(42886)})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:s.dir})}}class Ur{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,((t,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return kw(this.inner)}size(){return this.innerSize}}const gD=new Ut(Le.comparator);function Ga(){return gD}const Qw=new Ut(Le.comparator);function lc(...s){let e=Qw;for(const t of s)e=e.insert(t.key,t);return e}function Ww(s){let e=Qw;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function br(){return pc()}function Jw(){return pc()}function pc(){return new Ur((s=>s.toString()),((s,e)=>s.isEqual(e)))}const yD=new Ut(Le.comparator),vD=new cn(Le.comparator);function rt(...s){let e=vD;for(const t of s)e=e.add(t);return e}const ED=new cn(it);function _D(){return ED}function og(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yd(e)?"-0":e}}function Zw(s){return{integerValue:""+s}}function SD(s,e){return YI(e)?Zw(e):og(s,e)}class _h{constructor(){this._=void 0}}function wD(s,e,t){return s instanceof Jd?(function(o,u){const h={fields:{[Ow]:{stringValue:Pw},[Uw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&sg(u)&&(u=ph(u)),u&&(h.fields[Lw]=u),{mapValue:h}})(t,e):s instanceof Ac?tT(s,e):s instanceof Nc?nT(s,e):(function(o,u){const h=eT(o,u),p=xS(h)+xS(o.Ae);return fp(h)&&fp(o.Ae)?Zw(p):og(o.serializer,p)})(s,e)}function TD(s,e,t){return s instanceof Ac?tT(s,e):s instanceof Nc?nT(s,e):t}function eT(s,e){return s instanceof Zd?(function(i){return fp(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class Jd extends _h{}class Ac extends _h{constructor(e){super(),this.elements=e}}function tT(s,e){const t=sT(e);for(const i of s.elements)t.some((o=>ua(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Nc extends _h{constructor(e){super(),this.elements=e}}function nT(s,e){let t=sT(e);for(const i of s.elements)t=t.filter((o=>!ua(o,i)));return{arrayValue:{values:t}}}class Zd extends _h{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xS(s){return Yt(s.integerValue||s.doubleValue)}function sT(s){return ag(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function xD(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof Ac&&o instanceof Ac||i instanceof Nc&&o instanceof Nc?Uo(i.elements,o.elements,ua):i instanceof Zd&&o instanceof Zd?ua(i.Ae,o.Ae):i instanceof Jd&&o instanceof Jd})(s.transform,e.transform)}class bD{constructor(e,t){this.version=e,this.transformResults=t}}class gs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gs}static exists(e){return new gs(void 0,e)}static updateTime(e){return new gs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Sh{}function aT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new lg(s.key,gs.none()):new Uc(s.key,s.data,gs.none());{const t=s.data,i=qn.empty();let o=new cn(wn.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),o=o.add(u)}return new Ki(s.key,i,new ts(o.toArray()),gs.none())}}function AD(s,e,t){s instanceof Uc?(function(o,u,h){const p=o.value.clone(),g=AS(o.fieldTransforms,u,h.transformResults);p.setAll(g),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,t):s instanceof Ki?(function(o,u,h){if(!jd(o.precondition,u))return void u.convertToUnknownDocument(h.version);const p=AS(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(iT(o)),g.setAll(p),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function gc(s,e,t,i){return s instanceof Uc?(function(u,h,p,g){if(!jd(u.precondition,h))return p;const y=u.value.clone(),E=NS(u.fieldTransforms,g,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,t,i):s instanceof Ki?(function(u,h,p,g){if(!jd(u.precondition,h))return p;const y=NS(u.fieldTransforms,g,h),E=h.data;return E.setAll(iT(u)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((w=>w.field)))})(s,e,t,i):(function(u,h,p){return jd(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(s,e,t)}function ND(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=eT(i.transform,o||null);u!=null&&(t===null&&(t=qn.empty()),t.set(i.field,u))}return t||null}function bS(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Uo(i,o,((u,h)=>xD(u,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Uc extends Sh{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ki extends Sh{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function iT(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function AS(s,e,t){const i=new Map;vt(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const u=s[o],h=u.transform,p=e.data.field(u.field);i.set(u.field,TD(h,p,t[o]))}return i}function NS(s,e,t){const i=new Map;for(const o of s){const u=o.transform,h=t.data.field(o.field);i.set(o.field,wD(u,h,e))}return i}class lg extends Sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CD extends Sh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RD{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&AD(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=gc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=gc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Jw();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=t.has(o.key)?null:p;const g=aT(h,p);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(He.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),rt())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((t,i)=>bS(t,i)))&&Uo(this.baseMutations,e.baseMutations,((t,i)=>bS(t,i)))}}class cg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){vt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return yD})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,i[h].version);return new cg(e,t,i,o)}}class ID{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class DD{constructor(e,t){this.count=e,this.unchangedNames=t}}var sn,lt;function jD(s){switch(s){case Ee.OK:return Be(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Be(15467,{code:s})}}function rT(s){if(s===void 0)return Ha("GRPC error has no .code"),Ee.UNKNOWN;switch(s){case sn.OK:return Ee.OK;case sn.CANCELLED:return Ee.CANCELLED;case sn.UNKNOWN:return Ee.UNKNOWN;case sn.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case sn.INTERNAL:return Ee.INTERNAL;case sn.UNAVAILABLE:return Ee.UNAVAILABLE;case sn.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case sn.NOT_FOUND:return Ee.NOT_FOUND;case sn.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case sn.ABORTED:return Ee.ABORTED;case sn.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case sn.DATA_LOSS:return Ee.DATA_LOSS;default:return Be(39323,{code:s})}}(lt=sn||(sn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";function kD(){return new TextEncoder}const MD=new Li([4294967295,4294967295],0);function CS(s){const e=kD().encode(s),t=new ww;return t.update(e),new Uint8Array(t.digest())}function RS(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Li([t,i],0),new Li([o,u],0)]}class ug{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new cc(`Invalid padding: ${t}`);if(i<0)throw new cc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new cc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new cc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Li.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(Li.fromNumber(i)));return o.compare(MD)===1&&(o=new Li([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=CS(e),[i,o]=RS(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,o,u);if(!this.we(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new ug(u,o,t);return i.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const t=CS(e),[i,o]=RS(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(i,o,u);this.Se(h)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class cc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class wh{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new wh(He.min(),o,new Ut(it),Ga(),rt())}}class Vc{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Vc(i,t,rt(),rt(),rt())}}class kd{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class oT{constructor(e,t){this.targetId=e,this.Ce=t}}class lT{constructor(e,t,i=Tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class IS{constructor(){this.ve=0,this.Fe=DS(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=rt(),t=rt(),i=rt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Be(38017,{changeType:u})}})),new Vc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=DS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class PD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ga(),this.Je=Ed(),this.He=Ed(),this.Ye=new Ut(it)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(pp(u))if(i===0){const h=new Le(u.path);this.et(t,h,Nn.newNoDocument(h,He.min()))}else vt(i===1,20013,{expectedCount:i});else{const h=this._t(t);if(h!==i){const p=this.ut(e),g=p?this.ct(p,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let h,p;try{h=zi(i).toUint8Array()}catch(g){if(g instanceof Mw)return Lo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new ug(h,o,u)}catch(g){return Lo(g instanceof cc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&pp(p.target)){const g=new Le(p.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Nn.newNoDocument(g,e))}u.Be&&(t.set(h,u.ke()),u.qe())}}));let i=rt();this.He.forEach(((u,h)=>{let p=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(i=i.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new wh(e,t,this.Ye,this.je,i);return this.je=Ga(),this.Je=Ed(),this.He=Ed(),this.Ye=new Ut(it),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new IS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new cn(it),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new cn(it),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new IS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ed(){return new Ut(Le.comparator)}function DS(){return new Ut(Le.comparator)}const OD={asc:"ASCENDING",desc:"DESCENDING"},LD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UD={and:"AND",or:"OR"};class VD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yp(s,e){return s.useProto3Json||mh(e)?e:{value:e}}function eh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function FD(s,e){return eh(s,e.toTimestamp())}function oa(s){return vt(!!s,49232),He.fromTimestamp((function(t){const i=Bi(t);return new We(i.seconds,i.nanos)})(s))}function dg(s,e){return vp(s,e).canonicalString()}function vp(s,e){const t=(function(o){return new jt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function uT(s){const e=jt.fromString(s);return vt(pT(e),10190,{key:e.toString()}),e}function Ep(s,e){return dg(s.databaseId,e.path)}function Km(s,e){const t=uT(e);if(t.get(1)!==s.databaseId.projectId)throw new je(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new je(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Le(hT(t))}function dT(s,e){return dg(s.databaseId,e)}function BD(s){const e=uT(s);return e.length===4?jt.emptyPath():hT(e)}function _p(s){return new jt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function hT(s){return vt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function jS(s,e,t){return{name:Ep(s,e),fields:t.value.mapValue.fields}}function zD(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(vt(E===void 0||typeof E=="string",58123),Tn.fromBase64String(E||"")):(vt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Tn.fromUint8Array(E||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(y){const E=y.code===void 0?Ee.UNKNOWN:rT(y.code);return new je(E,y.message||"")})(h);t=new lT(i,o,u,p||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Km(s,i.document.name),u=oa(i.document.updateTime),h=i.document.createTime?oa(i.document.createTime):He.min(),p=new qn({mapValue:{fields:i.document.fields}}),g=Nn.newFoundDocument(o,u,h,p),y=i.targetIds||[],E=i.removedTargetIds||[];t=new kd(y,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Km(s,i.document),u=i.readTime?oa(i.readTime):He.min(),h=Nn.newNoDocument(o,u),p=i.removedTargetIds||[];t=new kd([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Km(s,i.document),u=i.removedTargetIds||[];t=new kd([],u,o,null)}else{if(!("filter"in e))return Be(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,h=new DD(o,u),p=i.targetId;t=new oT(p,h)}}return t}function qD(s,e){let t;if(e instanceof Uc)t={update:jS(s,e.key,e.value)};else if(e instanceof lg)t={delete:Ep(s,e.key)};else if(e instanceof Ki)t={update:jS(s,e.key,e.data),updateMask:JD(e.fieldMask)};else{if(!(e instanceof CD))return Be(16599,{Vt:e.type});t={verify:Ep(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,h){const p=h.transform;if(p instanceof Jd)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ac)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Nc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Zd)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw Be(20930,{transform:h.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:FD(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Be(27497)})(s,e.precondition)),t}function HD(s,e){return s&&s.length>0?(vt(e!==void 0,14353),s.map((t=>(function(o,u){let h=o.updateTime?oa(o.updateTime):oa(u);return h.isEqual(He.min())&&(h=oa(u)),new bD(h,o.transformResults||[])})(t,e)))):[]}function GD(s,e){return{documents:[dT(s,e.path)]}}function $D(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=dT(s,o);const u=(function(y){if(y.length!==0)return mT(da.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((E=>(function(b){return{field:Ro(b.field),direction:XD(b.dir)}})(E)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const p=yp(s,e.limit);return p!==null&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function YD(s){let e=BD(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){vt(i===1,65062);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=(function(w){const b=fT(w);return b instanceof da&&Hw(b)?b.getFilters():[b]})(t.where));let h=[];t.orderBy&&(h=(function(w){return w.map((b=>(function(O){return new Wd(Io(O.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(b)))})(t.orderBy));let p=null;t.limit&&(p=(function(w){let b;return b=typeof w=="object"?w.value:w,mh(b)?null:b})(t.limit));let g=null;t.startAt&&(g=(function(w){const b=!!w.before,k=w.values||[];return new Qd(k,b)})(t.startAt));let y=null;return t.endAt&&(y=(function(w){const b=!w.before,k=w.values||[];return new Qd(k,b)})(t.endAt)),dD(e,o,h,u,p,"F",g,y)}function KD(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fT(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Io(t.unaryFilter.field);return ln.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return ln.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Io(t.unaryFilter.field);return ln.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return ln.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(s):s.fieldFilter!==void 0?(function(t){return ln.create(Io(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return da.create(t.compositeFilter.filters.map((i=>fT(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(s):Be(30097,{filter:s})}function XD(s){return OD[s]}function QD(s){return LD[s]}function WD(s){return UD[s]}function Ro(s){return{fieldPath:s.canonicalString()}}function Io(s){return wn.fromServerFormat(s.fieldPath)}function mT(s){return s instanceof ln?(function(t){if(t.op==="=="){if(ES(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NAN"}};if(vS(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ES(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NAN"}};if(vS(t.value))return{unaryFilter:{field:Ro(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(t.field),op:QD(t.op),value:t.value}}})(s):s instanceof da?(function(t){const i=t.getFilters().map((o=>mT(o)));return i.length===1?i[0]:{compositeFilter:{op:WD(t.op),filters:i}}})(s):Be(54877,{filter:s})}function JD(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function pT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Mi{constructor(e,t,i,o,u=He.min(),h=He.min(),p=Tn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ZD{constructor(e){this.yt=e}}function ej(s){const e=YD({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?gp(e,e.limit,"L"):e}class tj{constructor(){this.Cn=new nj}addToCollectionParentIndex(e,t){return this.Cn.add(t),ge.resolve()}getCollectionParents(e,t){return ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ge.resolve()}deleteFieldIndex(e,t){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,t){return ge.resolve()}getDocumentsMatchingTarget(e,t){return ge.resolve(null)}getIndexType(e,t){return ge.resolve(0)}getFieldIndexes(e,t){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,t){return ge.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,t){return ge.resolve(Fi.min())}updateCollectionGroup(e,t,i){return ge.resolve()}updateIndexEntries(e,t){return ge.resolve()}}class nj{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new cn(jt.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new cn(jt.comparator)).toArray()}}const kS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gT=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(gT,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}const MS="LruGarbageCollector",sj=1048576;function PS([s,e],[t,i]){const o=it(s,t);return o===0?it(e,i):o}class aj{constructor(e){this.Ir=e,this.buffer=new cn(PS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();PS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ij{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(MS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ko(t)?Re(MS,"Ignoring IndexedDB error during garbage collection: ",t):await Yo(t)}await this.Vr(3e5)}))}}class rj{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return ge.resolve(fh.ce);const i=new aj(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(kS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,u,h,p,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,h=Date.now(),this.nthSequenceNumber(e,o)))).next((w=>(i=w,p=Date.now(),this.removeTargets(e,i,t)))).next((w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((w=>(y=Date.now(),No()<=at.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w}))))}}function oj(s,e){return new rj(s,e)}class lj{constructor(){this.changes=new Ur((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ge.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class uj{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&gc(i.mutation,o,ts.empty(),We.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,rt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=rt()){const o=br();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((u=>{let h=lc();return u.forEach(((p,g)=>{h=h.insert(p,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const i=br();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,rt())))}populateOverlays(e,t,i){const o=[];return i.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,p)=>{t.set(h,p)}))}))}computeViews(e,t,i,o){let u=Ga();const h=pc(),p=(function(){return pc()})();return t.forEach(((g,y)=>{const E=i.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Ki)?u=u.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),gc(E.mutation,y,E.mutation.getFieldMask(),We.now())):h.set(y.key,ts.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,E)=>h.set(y,E))),t.forEach(((y,E)=>p.set(y,new cj(E,h.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,t){const i=pc();let o=new Ut(((h,p)=>h-p)),u=rt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const p of h)p.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let E=i.get(g)||ts.empty();E=p.applyToLocalView(y,E),i.set(g,E);const w=(o.get(p.batchId)||rt()).add(g);o=o.insert(p.batchId,w)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,E=g.value,w=Jw();E.forEach((b=>{if(!u.has(b)){const k=aT(t.get(b),i.get(b));k!==null&&w.set(b,k),u=u.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ge.waitFor(h)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(h){return Le.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):ge.resolve(br());let p=wc,g=u;return h.next((y=>ge.forEach(y,((E,w)=>(p<w.largestBatchId&&(p=w.largestBatchId),u.get(E)?ge.resolve():this.remoteDocumentCache.getEntry(e,E).next((b=>{g=g.insert(E,b)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,rt()))).next((E=>({batchId:p,changes:Ww(E)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((i=>{let o=lc();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let h=lc();return this.indexManager.getCollectionParents(e,u).next((p=>ge.forEach(p,(g=>{const y=(function(w,b){return new gh(b,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next((E=>{E.forEach(((w,b)=>{h=h.insert(w,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o)))).next((h=>{u.forEach(((g,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Nn.newInvalidDocument(E)))}));let p=lc();return h.forEach(((g,y)=>{const E=u.get(g);E!==void 0&&gc(E.mutation,y,ts.empty(),We.now()),Eh(t,y)&&(p=p.insert(g,y))})),p}))}}class dj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:oa(o.createTime)}})(t)),ge.resolve()}getNamedQuery(e,t){return ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:ej(o.bundledQuery),readTime:oa(o.readTime)}})(t)),ge.resolve()}}class hj{constructor(){this.overlays=new Ut(Le.comparator),this.qr=new Map}getOverlay(e,t){return ge.resolve(this.overlays.get(t))}getOverlays(e,t){const i=br();return ge.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,u)=>{this.St(e,t,u)})),ge.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),ge.resolve()}getOverlaysForCollection(e,t,i){const o=br(),u=t.length+1,h=new Le(t.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return ge.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new Ut(((y,E)=>y-E));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=u.get(y.largestBatchId);E===null&&(E=br(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const p=br(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>p.set(y,E))),!(p.size()>=o)););return ge.resolve(p)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new ID(t,i));let u=this.qr.get(t);u===void 0&&(u=rt(),this.qr.set(t,u)),this.qr.set(t,u.add(i.key))}}class fj{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ge.resolve()}}class hg{constructor(){this.Qr=new cn(pn.$r),this.Ur=new cn(pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new pn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new pn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Le(new jt([])),i=new pn(t,e),o=new pn(t,e+1),u=[];return this.Ur.forEachInRange([i,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Le(new jt([])),i=new pn(t,e),o=new pn(t,e+1);let u=rt();return this.Ur.forEachInRange([i,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new pn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Le.comparator(e.key,t.key)||it(e.Yr,t.Yr)}static Kr(e,t){return it(e.Yr,t.Yr)||Le.comparator(e.key,t.key)}}class mj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new cn(pn.$r)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new RD(u,t,i,o);this.mutationQueue.push(h);for(const p of o)this.Zr=this.Zr.add(new pn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ge.resolve(h)}lookupMutationBatch(e,t){return ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),u=o<0?0:o;return ge.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?ng:this.tr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new pn(t,0),o=new pn(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(h=>{const p=this.Xr(h.Yr);u.push(p)})),ge.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new cn(it);return t.forEach((o=>{const u=new pn(o,0),h=new pn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(p=>{i=i.add(p.Yr)}))})),ge.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;Le.isDocumentKey(u)||(u=u.child(""));const h=new pn(new Le(u),0);let p=new cn(it);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Yr)),!0)}),h),ge.resolve(this.ti(p))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){vt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ge.forEach(t.mutations,(o=>{const u=new pn(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new pn(t,0),o=this.Zr.firstAfterOrEqual(i);return ge.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class pj{constructor(e){this.ri=e,this.docs=(function(){return new Ut(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ge.resolve(i?i.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let i=Ga();return t.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():Nn.newInvalidDocument(o))})),ge.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=Ga();const h=t.path,p=new Le(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||qI(zI(E),i)<=0||(o.has(E.key)||Eh(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ge.resolve(u)}getAllFromCollectionGroup(e,t,i,o){Be(9500)}ii(e,t){return ge.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new gj(this)}getSize(e){return ge.resolve(this.size)}}class gj extends lj{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class yj{constructor(e){this.persistence=e,this.si=new Ur((t=>ig(t)),rg),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.oi=0,this._i=new hg,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ge.resolve()}updateTargetData(e,t){return this.Pr(t),ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.si.forEach(((h,p)=>{p.sequenceNumber<=t&&i.get(p.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ge.waitFor(u).next((()=>o))}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return ge.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),ge.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ge.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ge.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return ge.resolve(i)}containsKey(e,t){return ge.resolve(this._i.containsKey(t))}}class yT{constructor(e,t){this.ui={},this.overlays={},this.ci=new fh(0),this.li=!1,this.li=!0,this.hi=new fj,this.referenceDelegate=e(this),this.Pi=new yj(this),this.indexManager=new tj,this.remoteDocumentCache=(function(o){return new pj(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new ZD(t),this.Ii=new dj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new mj(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){Re("MemoryPersistence","Starting transaction:",e);const o=new vj(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return ge.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class vj extends GI{constructor(e){super(),this.currentSequenceNumber=e}}class fg{constructor(e){this.persistence=e,this.Ri=new hg,this.Vi=null}static mi(e){return new fg(e)}get fi(){if(this.Vi)return this.Vi;throw Be(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),ge.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.fi,(i=>{const o=Le.fromPath(i);return this.gi(e,o).next((u=>{u||t.removeEntry(o,He.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ge.or([()=>ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class th{constructor(e,t){this.persistence=e,this.pi=new Ur((i=>KI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=oj(this,t)}static mi(e,t){return new th(e,t)}Ei(){}di(e){return ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return ge.forEach(this.pi,((i,o)=>this.br(e,i,o).next((u=>u?ge.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((p=>{p||(i++,u.removeEntry(h,He.min()))})))).next((()=>u.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ge.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Id(e.data.value)),t}br(e,t,i){return ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ge.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class mg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=rt(),o=rt();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new mg(e,t.fromCache,i,o)}}class Ej{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _j{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return GN()?8:$I(Cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.ys(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,t,o,i).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new Ej;return this.Ss(e,t,h).next((p=>{if(u.result=p,this.Vs)return this.bs(e,t,h,p.size)}))})).next((()=>u.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(No()<=at.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ge.resolve()):(No()<=at.DEBUG&&Re("QueryEngine","Query:",Co(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(No()<=at.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ra(t))):ge.resolve())}ys(e,t){if(TS(t))return ge.resolve(null);let i=ra(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=gp(t,null,"F"),i=ra(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const h=rt(...u);return this.ps.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,i).next((g=>{const y=this.Ds(t,p);return this.Cs(t,y,h,g.readTime)?this.ys(e,gp(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,i,o){return TS(t)||o.isEqual(He.min())?ge.resolve(null):this.ps.getDocuments(e,i).next((u=>{const h=this.Ds(t,u);return this.Cs(t,h,i,o)?ge.resolve(null):(No()<=at.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Co(t)),this.vs(e,h,t,BI(o,wc)).next((p=>p)))}))}Ds(e,t){let i=new cn(Xw(e));return t.forEach(((o,u)=>{Eh(e,u)&&(i=i.add(u))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,i){return No()<=at.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Co(t)),this.ps.getDocumentsMatchingQuery(e,t,Fi.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const pg="LocalStore",Sj=3e8;class wj{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Ut(it),this.xs=new Ur((u=>ig(u)),rg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Tj(s,e,t,i){return new wj(s,e,t,i)}async function vT(s,e){const t=Ye(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const h=[],p=[];let g=rt();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){p.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:p})))}))}))}function xj(s,e){const t=Ye(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,E){const w=y.batch,b=w.keys();let k=ge.resolve();return b.forEach((O=>{k=k.next((()=>E.getEntry(g,O))).next((B=>{const P=y.docVersions.get(O);vt(P!==null,48541),B.version.compareTo(P)<0&&(w.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),E.addEntry(B)))}))})),k.next((()=>p.mutationQueue.removeMutationBatch(g,w)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(p){let g=rt();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function ET(s){const e=Ye(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function bj(s,e){const t=Ye(s),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const p=[];e.targetChanges.forEach(((E,w)=>{const b=o.get(w);if(!b)return;p.push(t.Pi.removeMatchingKeys(u,E.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(u,E.addedDocuments,w))));let k=b.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?k=k.withResumeToken(Tn.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,i)),o=o.insert(w,k),(function(B,P,K){return B.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=Sj?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(b,k,E)&&p.push(t.Pi.updateTargetData(u,k))}));let g=Ga(),y=rt();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))})),p.push(Aj(u,h,e.documentUpdates).next((E=>{g=E.ks,y=E.qs}))),!i.isEqual(He.min())){const E=t.Pi.getLastRemoteSnapshotVersion(u).next((w=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));p.push(E)}return ge.waitFor(p).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(t.Ms=o,u)))}function Aj(s,e,t){let i=rt(),o=rt();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let h=Ga();return t.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(He.min())?(e.removeEntry(p,g.readTime),h=h.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(p,g)):Re(pg,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function Nj(s,e){const t=Ye(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=ng),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Cj(s,e){const t=Ye(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((u=>u?(o=u,ge.resolve(o)):t.Pi.allocateTargetId(i).next((h=>(o=new Mi(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Sp(s,e,t){const i=Ye(s),o=i.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(h=>i.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Ko(h))throw h;Re(pg,`Failed to update sequence numbers for target ${e}: ${h}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function OS(s,e,t){const i=Ye(s);let o=He.min(),u=rt();return i.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,E){const w=Ye(g),b=w.xs.get(E);return b!==void 0?ge.resolve(w.Ms.get(b)):w.Pi.getTargetData(y,E)})(i,h,ra(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(h,p.targetId).next((g=>{u=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(h,e,t?o:He.min(),t?u:rt()))).next((p=>(Rj(i,mD(e),p),{documents:p,Qs:u})))))}function Rj(s,e,t){let i=s.Os.get(e)||He.min();t.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(e,i)}class LS{constructor(){this.activeTargetIds=_D()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ij{constructor(){this.Mo=new LS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Dj{Oo(e){}shutdown(){}}const US="ConnectivityMonitor";class VS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(US,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(US,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let _d=null;function wp(){return _d===null?_d=(function(){return 268435456+Math.round(2147483648*Math.random())})():_d++,"0x"+_d.toString(16)}const Xm="RestConnection",jj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Kd?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,u){const h=wp(),p=this.zo(e,t.toUriEncodedString());Re(Xm,`Sending RPC '${e}' ${h}:`,p,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(p),E=$i(y);return this.Jo(e,p,g,i,E).then((w=>(Re(Xm,`Received RPC '${e}' ${h}: `,w),w)),(w=>{throw Lo(Xm,`RPC '${e}' ${h} failed with error: `,w,"url: ",p,"request:",i),w}))}Ho(e,t,i,o,u,h){return this.Go(e,t,i,o,u)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$o})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),i&&i.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const i=jj[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class Mj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const bn="WebChannelConnection";class Pj extends kj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,u){const h=wp();return new Promise(((p,g)=>{const y=new Tw;y.setWithCredentials(!0),y.listenOnce(xw.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Rd.NO_ERROR:const w=y.getResponseJson();Re(bn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(w)),p(w);break;case Rd.TIMEOUT:Re(bn,`RPC '${e}' ${h} timed out`),g(new je(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Rd.HTTP_ERROR:const b=y.getStatus();if(Re(bn,`RPC '${e}' ${h} failed with status:`,b,"response text:",y.getResponseText()),b>0){let k=y.getResponseJson();Array.isArray(k)&&(k=k[0]);const O=k?.error;if(O&&O.status&&O.message){const B=(function(K){const V=K.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(V)>=0?V:Ee.UNKNOWN})(O.status);g(new je(B,O.message))}else g(new je(Ee.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new je(Ee.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Re(bn,`RPC '${e}' ${h} completed.`)}}));const E=JSON.stringify(o);Re(bn,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",E,i,15)}))}T_(e,t,i){const o=wp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Nw(),p=Aw(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=u.join("");Re(bn,`Creating RPC '${e}' stream ${o}: ${E}`,g);const w=h.createWebChannel(E,g);this.I_(w);let b=!1,k=!1;const O=new Mj({Yo:P=>{k?Re(bn,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(b||(Re(bn,`Opening RPC '${e}' stream ${o} transport.`),w.open(),b=!0),Re(bn,`RPC '${e}' stream ${o} sending:`,P),w.send(P))},Zo:()=>w.close()}),B=(P,K,V)=>{P.listen(K,(Q=>{try{V(Q)}catch(X){setTimeout((()=>{throw X}),0)}}))};return B(w,oc.EventType.OPEN,(()=>{k||(Re(bn,`RPC '${e}' stream ${o} transport opened.`),O.o_())})),B(w,oc.EventType.CLOSE,(()=>{k||(k=!0,Re(bn,`RPC '${e}' stream ${o} transport closed`),O.a_(),this.E_(w))})),B(w,oc.EventType.ERROR,(P=>{k||(k=!0,Lo(bn,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),O.a_(new je(Ee.UNAVAILABLE,"The operation could not be completed")))})),B(w,oc.EventType.MESSAGE,(P=>{if(!k){const K=P.data[0];vt(!!K,16349);const V=K,Q=V?.error||V[0]?.error;if(Q){Re(bn,`RPC '${e}' stream ${o} received error:`,Q);const X=Q.status;let pe=(function(A){const x=sn[A];if(x!==void 0)return rT(x)})(X),ee=Q.message;pe===void 0&&(pe=Ee.INTERNAL,ee="Unknown error status: "+X+" with message "+Q.message),k=!0,O.a_(new je(pe,ee)),w.close()}else Re(bn,`RPC '${e}' stream ${o} received:`,K),O.u_(K)}})),B(p,bw.STAT_EVENT,(P=>{P.stat===up.PROXY?Re(bn,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===up.NOPROXY&&Re(bn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Qm(){return typeof document<"u"?document:null}function Th(s){return new VD(s,!0)}class _T{constructor(e,t,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const FS="PersistentStream";class ST{constructor(e,t,i,o,u,h,p,g){this.Mi=e,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new _T(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(Ha(t.toString()),Ha("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new je(Ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(FS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Re(FS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Oj extends ST{constructor(e,t,i,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=zD(this.serializer,e),i=(function(u){if(!("targetChange"in u))return He.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?He.min():h.readTime?oa(h.readTime):He.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=_p(this.serializer),t.addTarget=(function(u,h){let p;const g=h.target;if(p=pp(g)?{documents:GD(u,g)}:{query:$D(u,g).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=cT(u,h.resumeToken);const y=yp(u,h.expectedCount);y!==null&&(p.expectedCount=y)}else if(h.snapshotVersion.compareTo(He.min())>0){p.readTime=eh(u,h.snapshotVersion.toTimestamp());const y=yp(u,h.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const i=KD(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=_p(this.serializer),t.removeTarget=e,this.q_(t)}}class Lj extends ST{constructor(e,t,i,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=HD(e.writeResults,e.commitTime),i=oa(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=_p(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>qD(this.serializer,i)))};this.q_(t)}}class Uj{}class Vj extends Uj{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new je(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,vp(t,i),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new je(Ee.UNKNOWN,u.toString())}))}Ho(e,t,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.Ho(e,vp(t,i),o,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new je(Ee.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Fj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ha(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Pr="RemoteStore";class Bj{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{i.enqueueAndForget((async()=>{Vr(this)&&(Re(Pr,"Restarting streams for network reachability change."),await(async function(g){const y=Ye(g);y.Ea.add(4),await Fc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await xh(y)})(this))}))})),this.Ra=new Fj(i,o)}}async function xh(s){if(Vr(s))for(const e of s.da)await e(!0)}async function Fc(s){for(const e of s.da)await e(!1)}function wT(s,e){const t=Ye(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Eg(t)?vg(t):Xo(t).O_()&&yg(t,e))}function gg(s,e){const t=Ye(s),i=Xo(t);t.Ia.delete(e),i.O_()&&TT(t,e),t.Ia.size===0&&(i.O_()?i.L_():Vr(t)&&t.Ra.set("Unknown"))}function yg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(s).Y_(e)}function TT(s,e){s.Va.Ue(e),Xo(s).Z_(e)}function vg(s){s.Va=new PD({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Xo(s).start(),s.Ra.ua()}function Eg(s){return Vr(s)&&!Xo(s).x_()&&s.Ia.size>0}function Vr(s){return Ye(s).Ea.size===0}function xT(s){s.Va=void 0}async function zj(s){s.Ra.set("Online")}async function qj(s){s.Ia.forEach(((e,t)=>{yg(s,e)}))}async function Hj(s,e){xT(s),Eg(s)?(s.Ra.ha(e),vg(s)):s.Ra.set("Unknown")}async function Gj(s,e,t){if(s.Ra.set("Online"),e instanceof lT&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.Va.removeTarget(p))})(s,e)}catch(i){Re(Pr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await nh(s,i)}else if(e instanceof kd?s.Va.Ze(e):e instanceof oT?s.Va.st(e):s.Va.tt(e),!t.isEqual(He.min()))try{const i=await ET(s.localStore);t.compareTo(i)>=0&&await(function(u,h){const p=u.Va.Tt(h);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(g.resumeToken,h))}})),p.targetMismatches.forEach(((g,y)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Tn.EMPTY_BYTE_STRING,E.snapshotVersion)),TT(u,g);const w=new Mi(E.target,g,y,E.sequenceNumber);yg(u,w)})),u.remoteSyncer.applyRemoteEvent(p)})(s,t)}catch(i){Re(Pr,"Failed to raise snapshot:",i),await nh(s,i)}}async function nh(s,e,t){if(!Ko(e))throw e;s.Ea.add(1),await Fc(s),s.Ra.set("Offline"),t||(t=()=>ET(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{Re(Pr,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await xh(s)}))}function bT(s,e){return e().catch((t=>nh(s,t,e)))}async function bh(s){const e=Ye(s),t=Hi(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ng;for(;$j(e);)try{const o=await Nj(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,Yj(e,o)}catch(o){await nh(e,o)}AT(e)&&NT(e)}function $j(s){return Vr(s)&&s.Ta.length<10}function Yj(s,e){s.Ta.push(e);const t=Hi(s);t.O_()&&t.X_&&t.ea(e.mutations)}function AT(s){return Vr(s)&&!Hi(s).x_()&&s.Ta.length>0}function NT(s){Hi(s).start()}async function Kj(s){Hi(s).ra()}async function Xj(s){const e=Hi(s);for(const t of s.Ta)e.ea(t.mutations)}async function Qj(s,e,t){const i=s.Ta.shift(),o=cg.from(i,e,t);await bT(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await bh(s)}async function Wj(s,e){e&&Hi(s).X_&&await(async function(i,o){if((function(h){return jD(h)&&h!==Ee.ABORTED})(o.code)){const u=i.Ta.shift();Hi(i).B_(),await bT(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await bh(i)}})(s,e),AT(s)&&NT(s)}async function BS(s,e){const t=Ye(s);t.asyncQueue.verifyOperationInProgress(),Re(Pr,"RemoteStore received new credentials");const i=Vr(t);t.Ea.add(3),await Fc(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xh(t)}async function Jj(s,e){const t=Ye(s);e?(t.Ea.delete(2),await xh(t)):e||(t.Ea.add(2),await Fc(t),t.Ra.set("Unknown"))}function Xo(s){return s.ma||(s.ma=(function(t,i,o){const u=Ye(t);return u.sa(),new Oj(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:zj.bind(null,s),t_:qj.bind(null,s),r_:Hj.bind(null,s),H_:Gj.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Eg(s)?vg(s):s.Ra.set("Unknown")):(await s.ma.stop(),xT(s))}))),s.ma}function Hi(s){return s.fa||(s.fa=(function(t,i,o){const u=Ye(t);return u.sa(),new Lj(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kj.bind(null,s),r_:Wj.bind(null,s),ta:Xj.bind(null,s),na:Qj.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await bh(s)):(await s.fa.stop(),s.Ta.length>0&&(Re(Pr,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}class _g{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Fa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const h=Date.now()+i,p=new _g(e,t,h,o,u);return p.start(i),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new je(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sg(s,e){if(Ha("AsyncQueue",`${e}: ${s}`),Ko(s))return new je(Ee.UNAVAILABLE,`${e}: ${s}`);throw s}class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Le.comparator(t.key,i.key):(t,i)=>Le.comparator(t.key,i.key),this.keyedMap=lc(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class zS{constructor(){this.ga=new Ut(Le.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Be(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class zo{constructor(e,t,i,o,u,h,p,g,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,u){const h=[];return t.forEach((p=>{h.push({type:0,doc:p})})),new zo(e,t,Mo.emptySet(t),h,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class Zj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class e2{constructor(){this.queries=qS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Ye(t),u=o.queries;o.queries=qS(),u.forEach(((h,p)=>{for(const g of p.Sa)g.onError(i)}))})(this,new je(Ee.ABORTED,"Firestore shutting down"))}}function qS(){return new Ur((s=>Kw(s)),vh)}async function wg(s,e){const t=Ye(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(i=2):(u=new Zj,i=e.Da()?0:1);try{switch(i){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const p=Sg(h,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(p)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&xg(t)}async function Tg(s,e){const t=Ye(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function t2(s,e){const t=Ye(s);let i=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const p of h.Sa)p.Fa(o)&&(i=!0);h.wa=o}}i&&xg(t)}function n2(s,e,t){const i=Ye(s),o=i.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);i.queries.delete(e)}function xg(s){s.Ca.forEach((e=>{e.next()}))}var Tp,HS;(HS=Tp||(Tp={})).Ma="default",HS.Cache="cache";class bg{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tp.Cache}}class CT{constructor(e){this.key=e}}class RT{constructor(e){this.key=e}}class s2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=rt(),this.mutatedKeys=rt(),this.eu=Xw(e),this.tu=new Mo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new zS,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,w)=>{const b=o.get(E),k=Eh(this.query,w)?w:null,O=!!b&&this.mutatedKeys.has(b.key),B=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let P=!1;b&&k?b.data.isEqual(k.data)?O!==B&&(i.track({type:3,doc:k}),P=!0):this.su(b,k)||(i.track({type:2,doc:k}),P=!0,(g&&this.eu(k,g)>0||y&&this.eu(k,y)<0)&&(p=!0)):!b&&k?(i.track({type:0,doc:k}),P=!0):b&&!k&&(i.track({type:1,doc:b}),P=!0,(g||y)&&(p=!0)),P&&(k?(h=h.add(k),u=B?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),i.track({type:1,doc:E})}return{tu:h,iu:i,Cs:p,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((E,w)=>(function(k,O){const B=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Rt:P})}};return B(k)-B(O)})(E.type,w.type)||this.eu(E.doc,w.doc))),this.ou(i),o=o??!1;const p=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new zo(this.query,e.tu,u,h,e.mutatedKeys,g===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=rt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new RT(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new CT(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=rt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ag="SyncEngine";class a2{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class i2{constructor(e){this.key=e,this.hu=!1}}class r2{constructor(e,t,i,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ur((p=>Kw(p)),vh),this.Iu=new Map,this.Eu=new Set,this.du=new Ut(Le.comparator),this.Au=new Map,this.Ru=new hg,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function o2(s,e,t=!0){const i=PT(s);let o;const u=i.Tu.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await IT(i,e,t,!0),o}async function l2(s,e){const t=PT(s);await IT(t,e,!0,!1)}async function IT(s,e,t,i){const o=await Cj(s.localStore,ra(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let p;return i&&(p=await c2(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&wT(s.remoteStore,o),p}async function c2(s,e,t,i,o){s.pu=(w,b,k)=>(async function(B,P,K,V){let Q=P.view.ru(K);Q.Cs&&(Q=await OS(B.localStore,P.query,!1).then((({documents:N})=>P.view.ru(N,Q))));const X=V&&V.targetChanges.get(P.targetId),pe=V&&V.targetMismatches.get(P.targetId)!=null,ee=P.view.applyChanges(Q,B.isPrimaryClient,X,pe);return $S(B,P.targetId,ee.au),ee.snapshot})(s,w,b,k);const u=await OS(s.localStore,e,!0),h=new s2(e,u.Qs),p=h.ru(u.documents),g=Vc.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),y=h.applyChanges(p,s.isPrimaryClient,g);$S(s,t,y.au);const E=new a2(e,t,h);return s.Tu.set(e,E),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function u2(s,e,t){const i=Ye(s),o=i.Tu.get(e),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((h=>!vh(h,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Sp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&gg(i.remoteStore,o.targetId),xp(i,o.targetId)})).catch(Yo)):(xp(i,o.targetId),await Sp(i.localStore,o.targetId,!0))}async function d2(s,e){const t=Ye(s),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),gg(t.remoteStore,i.targetId))}async function h2(s,e,t){const i=E2(s);try{const o=await(function(h,p){const g=Ye(h),y=We.now(),E=p.reduce(((k,O)=>k.add(O.key)),rt());let w,b;return g.persistence.runTransaction("Locally write mutations","readwrite",(k=>{let O=Ga(),B=rt();return g.Ns.getEntries(k,E).next((P=>{O=P,O.forEach(((K,V)=>{V.isValidDocument()||(B=B.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(k,O))).next((P=>{w=P;const K=[];for(const V of p){const Q=ND(V,w.get(V.key).overlayedDocument);Q!=null&&K.push(new Ki(V.key,Q,Bw(Q.value.mapValue),gs.exists(!0)))}return g.mutationQueue.addMutationBatch(k,y,K,p)})).next((P=>{b=P;const K=P.applyToLocalDocumentSet(w,B);return g.documentOverlayCache.saveOverlays(k,P.batchId,K)}))})).then((()=>({batchId:b.batchId,changes:Ww(w)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(h,p,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new Ut(it)),y=y.insert(p,g),h.Vu[h.currentUser.toKey()]=y})(i,o.batchId,t),await Bc(i,o.changes),await bh(i.remoteStore)}catch(o){const u=Sg(o,"Failed to persist write");t.reject(u)}}async function DT(s,e){const t=Ye(s);try{const i=await bj(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Au.get(u);h&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?vt(h.hu,14607):o.removedDocuments.size>0&&(vt(h.hu,42227),h.hu=!1))})),await Bc(t,i,e)}catch(i){await Yo(i)}}function GS(s,e,t){const i=Ye(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const g=Ye(h);g.onlineState=p;let y=!1;g.queries.forEach(((E,w)=>{for(const b of w.Sa)b.va(p)&&(y=!0)})),y&&xg(g)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function f2(s,e,t){const i=Ye(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),u=o&&o.key;if(u){let h=new Ut(Le.comparator);h=h.insert(u,Nn.newNoDocument(u,He.min()));const p=rt().add(u),g=new wh(He.min(),new Map,new Ut(it),h,p);await DT(i,g),i.du=i.du.remove(u),i.Au.delete(e),Ng(i)}else await Sp(i.localStore,e,!1).then((()=>xp(i,e,t))).catch(Yo)}async function m2(s,e){const t=Ye(s),i=e.batch.batchId;try{const o=await xj(t.localStore,e);kT(t,i,null),jT(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Bc(t,o)}catch(o){await Yo(o)}}async function p2(s,e,t){const i=Ye(s);try{const o=await(function(h,p){const g=Ye(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return g.mutationQueue.lookupMutationBatch(y,p).next((w=>(vt(w!==null,37113),E=w.keys(),g.mutationQueue.removeMutationBatch(y,w)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>g.localDocuments.getDocuments(y,E)))}))})(i.localStore,e);kT(i,e,t),jT(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Bc(i,o)}catch(o){await Yo(o)}}function jT(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function kT(s,e,t){const i=Ye(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function xp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Iu.get(e))s.Tu.delete(i),t&&s.Pu.yu(i,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((i=>{s.Ru.containsKey(i)||MT(s,i)}))}function MT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(gg(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Ng(s))}function $S(s,e,t){for(const i of t)i instanceof CT?(s.Ru.addReference(i.key,e),g2(s,i)):i instanceof RT?(Re(Ag,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,e),s.Ru.containsKey(i.key)||MT(s,i.key)):Be(19791,{wu:i})}function g2(s,e){const t=e.key,i=t.path.canonicalString();s.du.get(t)||s.Eu.has(i)||(Re(Ag,"New document in limbo: "+t),s.Eu.add(i),Ng(s))}function Ng(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new Le(jt.fromString(e)),i=s.fu.next();s.Au.set(i,new i2(t)),s.du=s.du.insert(t,i),wT(s.remoteStore,new Mi(ra(yh(t.path)),i,"TargetPurposeLimboResolution",fh.ce))}}async function Bc(s,e,t){const i=Ye(s),o=[],u=[],h=[];i.Tu.isEmpty()||(i.Tu.forEach(((p,g)=>{h.push(i.pu(g,e,t).then((y=>{if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;i.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=mg.As(g.targetId,y);u.push(E)}})))})),await Promise.all(h),i.Pu.H_(o),await(async function(g,y){const E=Ye(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>ge.forEach(y,(b=>ge.forEach(b.Es,(k=>E.persistence.referenceDelegate.addReference(w,b.targetId,k))).next((()=>ge.forEach(b.ds,(k=>E.persistence.referenceDelegate.removeReference(w,b.targetId,k)))))))))}catch(w){if(!Ko(w))throw w;Re(pg,"Failed to update sequence numbers: "+w)}for(const w of y){const b=w.targetId;if(!w.fromCache){const k=E.Ms.get(b),O=k.snapshotVersion,B=k.withLastLimboFreeSnapshotVersion(O);E.Ms=E.Ms.insert(b,B)}}})(i.localStore,u))}async function y2(s,e){const t=Ye(s);if(!t.currentUser.isEqual(e)){Re(Ag,"User change. New user:",e.toKey());const i=await vT(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new je(Ee.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Bc(t,i.Ls)}}function v2(s,e){const t=Ye(s),i=t.Au.get(e);if(i&&i.hu)return rt().add(i.key);{let o=rt();const u=t.Iu.get(e);if(!u)return o;for(const h of u){const p=t.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function PT(s){const e=Ye(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=DT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f2.bind(null,e),e.Pu.H_=t2.bind(null,e.eventManager),e.Pu.yu=n2.bind(null,e.eventManager),e}function E2(s){const e=Ye(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p2.bind(null,e),e}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Th(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Tj(this.persistence,new _j,e.initialUser,this.serializer)}Cu(e){return new yT(fg.mi,this.serializer)}Du(e){return new Ij}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class _2 extends sh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){vt(this.persistence.referenceDelegate instanceof th,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ij(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new yT((i=>th.mi(i,t)),this.serializer)}}class bp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>GS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=y2.bind(null,this.syncEngine),await Jj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new e2})()}createDatastore(e){const t=Th(e.databaseInfo.databaseId),i=(function(u){return new Pj(u)})(e.databaseInfo);return(function(u,h,p,g){return new Vj(u,h,p,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,u,h,p){return new Bj(i,o,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(t=>GS(this.syncEngine,t,0)),(function(){return VS.v()?new VS:new Dj})())}createSyncEngine(e,t){return(function(o,u,h,p,g,y,E){const w=new r2(o,u,h,p,g,y);return E&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Ye(t);Re(Pr,"RemoteStore shutting down."),i.Ea.add(5),await Fc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}bp.provider={build:()=>new bp};class Cg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ha("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Gi="FirestoreClient";class S2{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=An.UNAUTHENTICATED,this.clientId=eg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async h=>{Re(Gi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(i,(h=>(Re(Gi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Sg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Wm(s,e){s.asyncQueue.verifyOperationInProgress(),Re(Gi,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await vT(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function YS(s,e){s.asyncQueue.verifyOperationInProgress();const t=await w2(s);Re(Gi,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>BS(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>BS(e.remoteStore,o))),s._onlineComponents=e}async function w2(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Re(Gi,"Using user provided OfflineComponentProvider");try{await Wm(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Ee.FAILED_PRECONDITION||o.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Lo("Error using user provided cache. Falling back to memory cache: "+t),await Wm(s,new sh)}}else Re(Gi,"Using default OfflineComponentProvider"),await Wm(s,new _2(void 0));return s._offlineComponents}async function OT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Re(Gi,"Using user provided OnlineComponentProvider"),await YS(s,s._uninitializedComponentsProvider._online)):(Re(Gi,"Using default OnlineComponentProvider"),await YS(s,new bp))),s._onlineComponents}function T2(s){return OT(s).then((e=>e.syncEngine))}async function ah(s){const e=await OT(s),t=e.eventManager;return t.onListen=o2.bind(null,e.syncEngine),t.onUnlisten=u2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=l2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d2.bind(null,e.syncEngine),t}function x2(s,e,t={}){const i=new Fa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const E=new Cg({next:b=>{E.Nu(),h.enqueueAndForget((()=>Tg(u,w)));const k=b.docs.has(p);!k&&b.fromCache?y.reject(new je(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&b.fromCache&&g&&g.source==="server"?y.reject(new je(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(b)},error:b=>y.reject(b)}),w=new bg(yh(p.path),E,{includeMetadataChanges:!0,qa:!0});return wg(u,w)})(await ah(s),s.asyncQueue,e,t,i))),i.promise}function b2(s,e,t={}){const i=new Fa;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,g,y){const E=new Cg({next:b=>{E.Nu(),h.enqueueAndForget((()=>Tg(u,w))),b.fromCache&&g.source==="server"?y.reject(new je(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(b)},error:b=>y.reject(b)}),w=new bg(p,E,{includeMetadataChanges:!0,qa:!0});return wg(u,w)})(await ah(s),s.asyncQueue,e,t,i))),i.promise}function LT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const KS=new Map;const UT="firestore.googleapis.com",XS=!0;class QS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new je(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=UT,this.ssl=XS}else this.host=e.host,this.ssl=e.ssl??XS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sj)throw new je(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LT(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new je(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new je(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new je(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ah{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new je(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new je(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new II;switch(i.type){case"firstParty":return new MI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new je(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=KS.get(t);i&&(Re("ComponentProvider","Removing Datastore"),KS.delete(t),i.terminate())})(this),Promise.resolve()}}function A2(s,e,t,i={}){s=Hn(s,Ah);const o=$i(e),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${t}`;o&&(Op(`https://${p}`),Lp("Firestore",!0)),u.host!==UT&&u.host!==p&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:i};if(!Ir(g,h)&&(s._setSettings(g),i.mockUserToken)){let y,E;if(typeof i.mockUserToken=="string")y=i.mockUserToken,E=An.MOCK_USER;else{y=L0(i.mockUserToken,s._app?.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new je(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new An(w)}s._authCredentials=new DI(new Rw(y,E))}}class zc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new zc(this.firestore,e,this._query)}}class Kt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ui(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Lc(t,Kt._jsonSchema))return new Kt(e,i||null,new Le(jt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:an("string",Kt._jsonSchemaVersion),referencePath:an("string")};class Ui extends zc{constructor(e,t,i){super(e,t,yh(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Le(e))}withConverter(e){return new Ui(this.firestore,e,this._path)}}function N2(s,e,...t){if(s=Ot(s),Iw("collection","path",e),s instanceof Ah){const i=jt.fromString(e,...t);return uS(i),new Ui(s,null,i)}{if(!(s instanceof Kt||s instanceof Ui))throw new je(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(jt.fromString(e,...t));return uS(i),new Ui(s.firestore,null,i)}}function un(s,e,...t){if(s=Ot(s),arguments.length===1&&(e=eg.newId()),Iw("doc","path",e),s instanceof Ah){const i=jt.fromString(e,...t);return cS(i),new Kt(s,null,new Le(i))}{if(!(s instanceof Kt||s instanceof Ui))throw new je(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(jt.fromString(e,...t));return cS(i),new Kt(s.firestore,s instanceof Ui?s.converter:null,new Le(i))}}const WS="AsyncQueue";class JS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new _T(this,"async_queue_retry"),this._c=()=>{const i=Qm();i&&Re(WS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Qm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Fa;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ko(e))throw e;Re(WS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ha("INTERNAL UNHANDLED ERROR: ",ZS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=_g.createAndSchedule(this,e,t,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Be(47125,{Pc:ZS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ZS(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}function e0(s){return(function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class $a extends Ah{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new JS,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JS(e),this._firestoreClient=void 0,await e}}}function C2(s,e){const t=typeof s=="object"?s:Fp(),i=typeof s=="string"?s:Kd,o=ch(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=M0("firestore");u&&A2(o,...u)}return o}function Nh(s){if(s._terminated)throw new je(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||R2(s),s._firestoreClient}function R2(s){const e=s._freezeSettings(),t=(function(o,u,h,p){return new WI(o,u,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,LT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new S2(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}class ms{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ms(Tn.fromBase64String(e))}catch(t){throw new je(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ms(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ms._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lc(e,ms._jsonSchema))return ms.fromBase64String(e.bytes)}}ms._jsonSchemaVersion="firestore/bytes/1.0",ms._jsonSchema={type:an("string",ms._jsonSchemaVersion),bytes:an("string")};class Ch{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new je(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rg{constructor(e){this._methodName=e}}class la{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new je(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new je(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return it(this._lat,e._lat)||it(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:la._jsonSchemaVersion}}static fromJSON(e){if(Lc(e,la._jsonSchema))return new la(e.latitude,e.longitude)}}la._jsonSchemaVersion="firestore/geoPoint/1.0",la._jsonSchema={type:an("string",la._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};class ca{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ca._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lc(e,ca._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ca(e.vectorValues);throw new je(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ca._jsonSchemaVersion="firestore/vectorValue/1.0",ca._jsonSchema={type:an("string",ca._jsonSchemaVersion),vectorValues:an("object")};const I2=/^__.*__$/;class D2{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uc(e,this.data,t,this.fieldTransforms)}}class VT{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ki(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{Ac:s})}}class Ig{constructor(e,t,i,o,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ig({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ih(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FT(this.Ac)&&I2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j2{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Th(e)}Cc(e,t,i,o=!1){return new Ig({Ac:e,methodName:t,Dc:i,path:wn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dg(s){const e=s._freezeSettings(),t=Th(s._databaseId);return new j2(s._databaseId,!!e.ignoreUndefinedProperties,t)}function BT(s,e,t,i,o,u={}){const h=s.Cc(u.merge||u.mergeFields?2:0,e,t,o);jg("Data must be an object, but it was:",h,i);const p=zT(i,h);let g,y;if(u.merge)g=new ts(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const b=Ap(e,w,t);if(!h.contains(b))throw new je(Ee.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);HT(E,b)||E.push(b)}g=new ts(E),y=h.fieldTransforms.filter((w=>g.covers(w.field)))}else g=null,y=h.fieldTransforms;return new D2(new qn(p),g,y)}class Rh extends Rg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Rh}}function k2(s,e,t,i){const o=s.Cc(1,e,t);jg("Data must be an object, but it was:",o,i);const u=[],h=qn.empty();Yi(i,((g,y)=>{const E=kg(e,g,t);y=Ot(y);const w=o.yc(E);if(y instanceof Rh)u.push(E);else{const b=Ih(y,w);b!=null&&(u.push(E),h.set(E,b))}}));const p=new ts(u);return new VT(h,p,o.fieldTransforms)}function M2(s,e,t,i,o,u){const h=s.Cc(1,e,t),p=[Ap(e,i,t)],g=[o];if(u.length%2!=0)throw new je(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)p.push(Ap(e,u[b])),g.push(u[b+1]);const y=[],E=qn.empty();for(let b=p.length-1;b>=0;--b)if(!HT(y,p[b])){const k=p[b];let O=g[b];O=Ot(O);const B=h.yc(k);if(O instanceof Rh)y.push(k);else{const P=Ih(O,B);P!=null&&(y.push(k),E.set(k,P))}}const w=new ts(y);return new VT(E,w,h.fieldTransforms)}function Ih(s,e){if(qT(s=Ot(s)))return jg("Unsupported field value:",e,s),zT(s,e);if(s instanceof Rg)return(function(i,o){if(!FT(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let h=0;for(const p of i){let g=Ih(p,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SD(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=We.fromDate(i);return{timestampValue:eh(o.serializer,u)}}if(i instanceof We){const u=new We(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:eh(o.serializer,u)}}if(i instanceof la)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ms)return{bytesValue:cT(o.serializer,i._byteString)};if(i instanceof Kt){const u=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof ca)return(function(h,p){return{mapValue:{fields:{[Vw]:{stringValue:Fw},[Xd]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw p.Sc("VectorValues must only contain numeric values.");return og(p.serializer,y)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${tg(i)}`)})(s,e)}function zT(s,e){const t={};return kw(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(s,((i,o)=>{const u=Ih(o,e.mc(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function qT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof We||s instanceof la||s instanceof ms||s instanceof Kt||s instanceof Rg||s instanceof ca)}function jg(s,e,t){if(!qT(t)||!Dw(t)){const i=tg(t);throw i==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+i)}}function Ap(s,e,t){if((e=Ot(e))instanceof Ch)return e._internalPath;if(typeof e=="string")return kg(s,e);throw ih("Field path arguments must be of type string or ",s,!1,void 0,t)}const P2=new RegExp("[~\\*/\\[\\]]");function kg(s,e,t){if(e.search(P2)>=0)throw ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Ch(...e.split("."))._internalPath}catch{throw ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function ih(s,e,t,i,o){const u=i&&!i.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new je(Ee.INVALID_ARGUMENT,p+s+g)}function HT(s,e){return s.some((t=>t.isEqual(e)))}class GT{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new O2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($T("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class O2 extends GT{data(){return super.data()}}function $T(s,e){return typeof e=="string"?kg(s,e):e instanceof Ch?e._internalPath:e._delegate._internalPath}function YT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new je(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class L2{convertValue(e,t="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Yi(e,((o,u)=>{i[o]=this.convertValue(u,t)})),i}convertVectorValue(e){const t=e.fields?.[Xd].arrayValue?.values?.map((i=>Yt(i.doubleValue)));return new ca(t)}convertGeoPoint(e){return new la(Yt(e.latitude),Yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ph(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=Bi(e);return new We(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=jt.fromString(e);vt(pT(i),9688,{name:e});const o=new xc(i.get(1),i.get(3)),u=new Le(i.popFirst(5));return o.isEqual(t)||Ha(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function KT(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class uc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ar extends GT{constructor(e,t,i,o,u,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($T("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ar._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ar._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ar._jsonSchema={type:an("string",Ar._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Md extends Ar{data(e={}){return super.data(e)}}class Nr{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new uc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Md(this._firestore,this._userDataWriter,i.key,i,new uc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new je(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const g=new Md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new uc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new Md(o._firestore,o._userDataWriter,p.doc.key,p.doc,new uc(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return p.type!==0&&(y=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),E=h.indexOf(p.doc.key)),{type:U2(p.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new je(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Nr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function U2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:s})}}function V2(s){s=Hn(s,Kt);const e=Hn(s.firestore,$a);return x2(Nh(e),s._key).then((t=>QT(e,s,t)))}Nr._jsonSchemaVersion="firestore/querySnapshot/1.0",Nr._jsonSchema={type:an("string",Nr._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};class Mg extends L2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ms(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}function Qo(s){s=Hn(s,zc);const e=Hn(s.firestore,$a),t=Nh(e),i=new Mg(e);return YT(s._query),b2(t,s._query).then((o=>new Nr(e,i,s,o)))}function XT(s,e,t){s=Hn(s,Kt);const i=Hn(s.firestore,$a),o=KT(s.converter,e,t);return Dh(i,[BT(Dg(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,gs.none())])}function Wo(s,e,t,...i){s=Hn(s,Kt);const o=Hn(s.firestore,$a),u=Dg(o);let h;return h=typeof(e=Ot(e))=="string"||e instanceof Ch?M2(u,"updateDoc",s._key,e,t,i):k2(u,"updateDoc",s._key,e),Dh(o,[h.toMutation(s._key,gs.exists(!0))])}function Jo(s){return Dh(Hn(s.firestore,$a),[new lg(s._key,gs.none())])}function Zo(s,e){const t=Hn(s.firestore,$a),i=un(s),o=KT(s.converter,e);return Dh(t,[BT(Dg(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,gs.exists(!1))]).then((()=>i))}function Pg(s,...e){s=Ot(s);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||e0(e[i])||(t=e[i++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(e0(e[i])){const g=e[i];e[i]=g.next?.bind(g),e[i+1]=g.error?.bind(g),e[i+2]=g.complete?.bind(g)}let u,h,p;if(s instanceof Kt)h=Hn(s.firestore,$a),p=yh(s._key.path),u={next:g=>{e[i]&&e[i](QT(h,s,g))},error:e[i+1],complete:e[i+2]};else{const g=Hn(s,zc);h=Hn(g.firestore,$a),p=g._query;const y=new Mg(h);u={next:E=>{e[i]&&e[i](new Nr(h,y,g,E))},error:e[i+1],complete:e[i+2]},YT(s._query)}return(function(y,E,w,b){const k=new Cg(b),O=new bg(E,k,w);return y.asyncQueue.enqueueAndForget((async()=>wg(await ah(y),O))),()=>{k.Nu(),y.asyncQueue.enqueueAndForget((async()=>Tg(await ah(y),O)))}})(Nh(h),p,o,u)}function Dh(s,e){return(function(i,o){const u=new Fa;return i.asyncQueue.enqueueAndForget((async()=>h2(await T2(i),o,u))),u.promise})(Nh(s),e)}function QT(s,e,t){const i=t.docs.get(e._key),o=new Mg(s);return new Ar(s,o,e._key,i,new uc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){$o=o})(Lr),Dr(new Vi("firestore",((i,{instanceIdentifier:o,options:u})=>{const h=i.getProvider("app").getImmediate(),p=new $a(new jI(i.getProvider("auth-internal")),new PI(h,i.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new je(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(y.options.projectId,E)})(h,o),h);return u={useFetchStreams:t,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),aa(iS,rS,e),aa(iS,rS,"esm2020")})();const WT="firebasestorage.googleapis.com",JT="storageBucket",F2=120*1e3,B2=600*1e3;class zt extends fa{constructor(e,t,i=0){super(Jm(e),`Firebase Storage: ${t} (${Jm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Bt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Bt||(Bt={}));function Jm(s){return"storage/"+s}function Og(){const s="An unknown error occurred, please check the error payload for server response.";return new zt(Bt.UNKNOWN,s)}function z2(s){return new zt(Bt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function q2(s){return new zt(Bt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H2(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new zt(Bt.UNAUTHENTICATED,s)}function G2(){return new zt(Bt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $2(s){return new zt(Bt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function Y2(){return new zt(Bt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function K2(){return new zt(Bt.CANCELED,"User canceled the upload/download.")}function X2(s){return new zt(Bt.INVALID_URL,"Invalid URL '"+s+"'.")}function Q2(s){return new zt(Bt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function W2(){return new zt(Bt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JT+"' property when initializing the app?")}function J2(){return new zt(Bt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Z2(){return new zt(Bt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ek(s){return new zt(Bt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Np(s){return new zt(Bt.INVALID_ARGUMENT,s)}function ZT(){return new zt(Bt.APP_DELETED,"The Firebase app was deleted.")}function tk(s){return new zt(Bt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yc(s,e){return new zt(Bt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function sc(s){throw new zt(Bt.INTERNAL_ERROR,"Internal error: "+s)}class jn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=jn.makeFromUrl(e,t)}catch{return new jn(e,"")}if(i.path==="")return i;throw Q2(e)}static makeFromUrl(e,t){let i=null;const o="([A-Za-z0-9.\\-_]+)";function u(X){X.path.charAt(X.path.length-1)==="/"&&(X.path_=X.path_.slice(0,-1))}const h="(/(.*))?$",p=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function y(X){X.path_=decodeURIComponent(X.path)}const E="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",k=new RegExp(`^https?://${w}/${E}/b/${o}/o${b}`,"i"),O={bucket:1,path:3},B=t===WT?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",K=new RegExp(`^https?://${B}/${o}/${P}`,"i"),Q=[{regex:p,indices:g,postModify:u},{regex:k,indices:O,postModify:y},{regex:K,indices:{bucket:1,path:2},postModify:y}];for(let X=0;X<Q.length;X++){const pe=Q[X],ee=pe.regex.exec(e);if(ee){const N=ee[pe.indices.bucket];let A=ee[pe.indices.path];A||(A=""),i=new jn(N,A),pe.postModify(i);break}}if(i==null)throw X2(e);return i}}class nk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sk(s,e,t){let i=1,o=null,u=null,h=!1,p=0;function g(){return p===2}let y=!1;function E(...P){y||(y=!0,e.apply(null,P))}function w(P){o=setTimeout(()=>{o=null,s(k,g())},P)}function b(){u&&clearTimeout(u)}function k(P,...K){if(y){b();return}if(P){b(),E.call(null,P,...K);return}if(g()||h){b(),E.call(null,P,...K);return}i<64&&(i*=2);let Q;p===1?(p=2,Q=0):Q=(i+Math.random())*1e3,w(Q)}let O=!1;function B(P){O||(O=!0,b(),!y&&(o!==null?(P||(p=2),clearTimeout(o),w(0)):P||(p=1)))}return w(0),u=setTimeout(()=>{h=!0,B(!0)},t),B}function ak(s){s(!1)}function ik(s){return s!==void 0}function rk(s){return typeof s=="object"&&!Array.isArray(s)}function Lg(s){return typeof s=="string"||s instanceof String}function t0(s){return Ug()&&s instanceof Blob}function Ug(){return typeof Blob<"u"}function Cp(s,e,t,i){if(i<e)throw Np(`Invalid value for '${s}'. Expected ${e} or greater.`);if(i>t)throw Np(`Invalid value for '${s}'. Expected ${t} or less.`)}function jh(s,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${s}`}function ex(s){const e=encodeURIComponent;let t="?";for(const i in s)if(s.hasOwnProperty(i)){const o=e(i)+"="+e(s[i]);t=t+o+"&"}return t=t.slice(0,-1),t}var Cr;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Cr||(Cr={}));function ok(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return t||o||u}class lk{constructor(e,t,i,o,u,h,p,g,y,E,w,b=!0,k=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=w,this.retry=b,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,B)=>{this.resolve_=O,this.reject_=B,this.start_()})}start_(){const e=(i,o)=>{if(o){i(!1,new Sd(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const p=u.getErrorCode()===Cr.NO_ERROR,g=u.getStatus();if(!p||ok(g,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===Cr.ABORT;i(!1,new Sd(!1,null,E));return}const y=this.successCodes_.indexOf(g)!==-1;i(!0,new Sd(y,u))})},t=(i,o)=>{const u=this.resolve_,h=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());ik(g)?u(g):u()}catch(g){h(g)}else if(p!==null){const g=Og();g.serverResponse=p.getErrorText(),this.errorCallback_?h(this.errorCallback_(p,g)):h(g)}else if(o.canceled){const g=this.appDelete_?ZT():K2();h(g)}else{const g=Y2();h(g)}};this.canceled_?t(!1,new Sd(!1,null,!0)):this.backoffId_=sk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ak(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sd{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function ck(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function uk(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dk(s,e){e&&(s["X-Firebase-GMPID"]=e)}function hk(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function fk(s,e,t,i,o,u,h=!0,p=!1){const g=ex(s.urlParams),y=s.url+g,E=Object.assign({},s.headers);return dk(E,e),ck(E,t),uk(E,u),hk(E,i),new lk(y,s.method,E,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,p)}function mk(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pk(...s){const e=mk();if(e!==void 0){const t=new e;for(let i=0;i<s.length;i++)t.append(s[i]);return t.getBlob()}else{if(Ug())return new Blob(s);throw new zt(Bt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gk(s,e,t){return s.webkitSlice?s.webkitSlice(e,t):s.mozSlice?s.mozSlice(e,t):s.slice?s.slice(e,t):null}function yk(s){if(typeof atob>"u")throw ek("base-64");return atob(s)}const sa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zm{constructor(e,t){this.data=e,this.contentType=t||null}}function vk(s,e){switch(s){case sa.RAW:return new Zm(tx(e));case sa.BASE64:case sa.BASE64URL:return new Zm(nx(s,e));case sa.DATA_URL:return new Zm(_k(e),Sk(e))}throw Og()}function tx(s){const e=[];for(let t=0;t<s.length;t++){let i=s.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<s.length-1&&(s.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=i,h=s.charCodeAt(++t);i=65536|(u&1023)<<10|h&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function Ek(s){let e;try{e=decodeURIComponent(s)}catch{throw yc(sa.DATA_URL,"Malformed data URL.")}return tx(e)}function nx(s,e){switch(s){case sa.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw yc(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case sa.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw yc(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=yk(e)}catch(o){throw o.message.includes("polyfill")?o:yc(s,"Invalid character found")}const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}class sx{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw yc(sa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=wk(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function _k(s){const e=new sx(s);return e.base64?nx(sa.BASE64,e.rest):Ek(e.rest)}function Sk(s){return new sx(s).contentType}function wk(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}class ki{constructor(e,t){let i=0,o="";t0(e)?(this.data_=e,i=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(t0(this.data_)){const i=this.data_,o=gk(i,e,t);return o===null?null:new ki(o)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new ki(i,!0)}}static getBlob(...e){if(Ug()){const t=e.map(i=>i instanceof ki?i.data_:i);return new ki(pk.apply(null,t))}else{const t=e.map(h=>Lg(h)?vk(sa.RAW,h).data:h.data_);let i=0;t.forEach(h=>{i+=h.byteLength});const o=new Uint8Array(i);let u=0;return t.forEach(h=>{for(let p=0;p<h.length;p++)o[u++]=h[p]}),new ki(o,!0)}}uploadData(){return this.data_}}function Vg(s){let e;try{e=JSON.parse(s)}catch{return null}return rk(e)?e:null}function Tk(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function xk(s,e){const t=e.split("/").filter(i=>i.length>0).join("/");return s.length===0?t:s+"/"+t}function ax(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}function bk(s,e){return e}class Dn{constructor(e,t,i,o){this.server=e,this.local=t||e,this.writable=!!i,this.xform=o||bk}}let wd=null;function Ak(s){return!Lg(s)||s.length<2?s:ax(s)}function ix(){if(wd)return wd;const s=[];s.push(new Dn("bucket")),s.push(new Dn("generation")),s.push(new Dn("metageneration")),s.push(new Dn("name","fullPath",!0));function e(u,h){return Ak(h)}const t=new Dn("name");t.xform=e,s.push(t);function i(u,h){return h!==void 0?Number(h):h}const o=new Dn("size");return o.xform=i,s.push(o),s.push(new Dn("timeCreated")),s.push(new Dn("updated")),s.push(new Dn("md5Hash",null,!0)),s.push(new Dn("cacheControl",null,!0)),s.push(new Dn("contentDisposition",null,!0)),s.push(new Dn("contentEncoding",null,!0)),s.push(new Dn("contentLanguage",null,!0)),s.push(new Dn("contentType",null,!0)),s.push(new Dn("metadata","customMetadata",!0)),wd=s,wd}function Nk(s,e){function t(){const i=s.bucket,o=s.fullPath,u=new jn(i,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:t})}function Ck(s,e,t){const i={};i.type="file";const o=t.length;for(let u=0;u<o;u++){const h=t[u];i[h.local]=h.xform(i,e[h.server])}return Nk(i,s),i}function rx(s,e,t){const i=Vg(e);return i===null?null:Ck(s,i,t)}function Rk(s,e,t,i){const o=Vg(e);if(o===null||!Lg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const E=s.bucket,w=s.fullPath,b="/b/"+h(E)+"/o/"+h(w),k=jh(b,t,i),O=ex({alt:"media",token:y});return k+O})[0]}function Ik(s,e){const t={},i=e.length;for(let o=0;o<i;o++){const u=e[o];u.writable&&(t[u.server]=s[u.local])}return JSON.stringify(t)}const n0="prefixes",s0="items";function Dk(s,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[n0])for(const o of t[n0]){const u=o.replace(/\/$/,""),h=s._makeStorageReference(new jn(e,u));i.prefixes.push(h)}if(t[s0])for(const o of t[s0]){const u=s._makeStorageReference(new jn(e,o.name));i.items.push(u)}return i}function jk(s,e,t){const i=Vg(t);return i===null?null:Dk(s,e,i)}class Fg{constructor(e,t,i,o){this.url=e,this.method=t,this.handler=i,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Bg(s){if(!s)throw Og()}function kk(s,e){function t(i,o){const u=rx(s,o,e);return Bg(u!==null),u}return t}function Mk(s,e){function t(i,o){const u=jk(s,e,o);return Bg(u!==null),u}return t}function Pk(s,e){function t(i,o){const u=rx(s,o,e);return Bg(u!==null),Rk(u,o,s.host,s._protocol)}return t}function zg(s){function e(t,i){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=G2():o=H2():t.getStatus()===402?o=q2(s.bucket):t.getStatus()===403?o=$2(s.path):o=i,o.status=t.getStatus(),o.serverResponse=i.serverResponse,o}return e}function Ok(s){const e=zg(s);function t(i,o){let u=e(i,o);return i.getStatus()===404&&(u=z2(s.path)),u.serverResponse=o.serverResponse,u}return t}function Lk(s,e,t,i,o){const u={};e.isRoot?u.prefix="":u.prefix=e.path+"/",t.length>0&&(u.delimiter=t),i&&(u.pageToken=i),o&&(u.maxResults=o);const h=e.bucketOnlyServerUrl(),p=jh(h,s.host,s._protocol),g="GET",y=s.maxOperationRetryTime,E=new Fg(p,g,Mk(s,e.bucket),y);return E.urlParams=u,E.errorHandler=zg(e),E}function Uk(s,e,t){const i=e.fullServerUrl(),o=jh(i,s.host,s._protocol),u="GET",h=s.maxOperationRetryTime,p=new Fg(o,u,Pk(s,t),h);return p.errorHandler=Ok(e),p}function Vk(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function Fk(s,e,t){const i=Object.assign({},t);return i.fullPath=s.path,i.size=e.size(),i.contentType||(i.contentType=Vk(null,e)),i}function Bk(s,e,t,i,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function p(){let Q="";for(let X=0;X<2;X++)Q=Q+Math.random().toString().slice(2);return Q}const g=p();h["Content-Type"]="multipart/related; boundary="+g;const y=Fk(e,i,o),E=Ik(y,t),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,b=`\r
--`+g+"--",k=ki.getBlob(w,i,b);if(k===null)throw J2();const O={name:y.fullPath},B=jh(u,s.host,s._protocol),P="POST",K=s.maxUploadRetryTime,V=new Fg(B,P,kk(s,t),K);return V.urlParams=O,V.headers=h,V.body=k.uploadData(),V.errorHandler=zg(e),V}class zk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Cr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Cr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Cr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,o,u){if(this.sent_)throw sc("cannot .send() more than once");if($i(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class qk extends zk{initXhr(){this.xhr_.responseType="text"}}function qg(){return new qk}class Or{constructor(e,t){this._service=e,t instanceof jn?this._location=t:this._location=jn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Or(e,t)}get root(){const e=new jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ax(this._location.path)}get storage(){return this._service}get parent(){const e=Tk(this._location.path);if(e===null)return null;const t=new jn(this._location.bucket,e);return new Or(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tk(e)}}function Hk(s,e,t){s._throwIfRoot("uploadBytes");const i=Bk(s.storage,s._location,ix(),new ki(e,!0),t);return s.storage.makeRequestWithTokens(i,qg).then(o=>({metadata:o,ref:s}))}function Gk(s){const e={prefixes:[],items:[]};return ox(s,e).then(()=>e)}async function ox(s,e,t){const o=await $k(s,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),o.nextPageToken!=null&&await ox(s,e,o.nextPageToken)}function $k(s,e){e!=null&&typeof e.maxResults=="number"&&Cp("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=Lk(s.storage,s._location,"/",t.pageToken,t.maxResults);return s.storage.makeRequestWithTokens(i,qg)}function Yk(s){s._throwIfRoot("getDownloadURL");const e=Uk(s.storage,s._location,ix());return s.storage.makeRequestWithTokens(e,qg).then(t=>{if(t===null)throw Z2();return t})}function Kk(s,e){const t=xk(s._location.path,e),i=new jn(s._location.bucket,t);return new Or(s.storage,i)}function Xk(s){return/^[A-Za-z]+:\/\//.test(s)}function Qk(s,e){return new Or(s,e)}function lx(s,e){if(s instanceof Hg){const t=s;if(t._bucket==null)throw W2();const i=new Or(t,t._bucket);return e!=null?lx(i,e):i}else return e!==void 0?Kk(s,e):s}function Wk(s,e){if(e&&Xk(e)){if(s instanceof Hg)return Qk(s,e);throw Np("To use ref(service, url), the first argument must be a Storage instance.")}else return lx(s,e)}function a0(s,e){const t=e?.[JT];return t==null?null:jn.makeFromBucketSpec(t,s)}function Jk(s,e,t,i={}){s.host=`${e}:${t}`;const o=$i(e);o&&(Op(`https://${s.host}/b`),Lp("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=i;u&&(s._overrideAuthToken=typeof u=="string"?u:L0(u,s.app.options.projectId))}class Hg{constructor(e,t,i,o,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=WT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=F2,this._maxUploadRetryTime=B2,this._requests=new Set,o!=null?this._bucket=jn.makeFromBucketSpec(o,this._host):this._bucket=a0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jn.makeFromBucketSpec(this._url,e):this._bucket=a0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Or(this,e)}_makeRequest(e,t,i,o,u=!0){if(this._deleted)return new nk(ZT());{const h=fk(e,this._appId,i,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[i,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,o).getPromise()}}const i0="@firebase/storage",r0="0.14.0";const cx="storage";function Pd(s,e,t){return s=Ot(s),Hk(s,e,t)}function Zk(s){return s=Ot(s),Gk(s)}function Od(s){return s=Ot(s),Yk(s)}function vc(s,e){return s=Ot(s),Wk(s,e)}function eM(s=Fp(),e){s=Ot(s);const i=ch(s,cx).getImmediate({identifier:e}),o=M0("storage");return o&&tM(i,...o),i}function tM(s,e,t,i={}){Jk(s,e,t,i)}function nM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),i=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new Hg(t,i,o,e,Lr)}function sM(){Dr(new Vi(cx,nM,"PUBLIC").setMultipleInstances(!0)),aa(i0,r0,""),aa(i0,r0,"esm2020")}sM();const aM={apiKey:"AIzaSyBBvchyq9AsOtWmzlVcdnug9FY_MTaz2U8",authDomain:"ffees-management-system-70bb7.firebaseapp.com",projectId:"fees-management-system-70bb7",storageBucket:"fees-management-system-70bb7.firebasestorage.app",messagingSenderId:"416490982366",appId:"1:416490982366:web:65c9d54a605950582e6b4f"};console.log("Environment variables:");console.log("VITE_FIREBASE_API_KEY:","[SET]");console.log("VITE_FIREBASE_AUTH_DOMAIN:","[SET]");console.log("VITE_FIREBASE_PROJECT_ID:","[SET]");console.log("VITE_FIREBASE_STORAGE_BUCKET:","[SET]");console.log("VITE_FIREBASE_MESSAGING_SENDER_ID:","[SET]");console.log("VITE_FIREBASE_APP_ID:","[SET]");const kh=F0(aM),rn=C2(kh),ps=AI(kh),Po=eM(kh);console.log("Firebase app initialized:",!!kh);console.log("Firestore initialized:",!!rn);console.log("Auth initialized:",!!ps);console.log("Storage initialized:",!!Po);Xp(ps,s=>{s?console.log("User is signed in:",s.uid):console.log("No user is signed in")});let Rr=null;const Pt=()=>{if(!Rr)throw new Error("User not authenticated. Please sign in first.");return Rr};Xp(ps,s=>{s?(Rr=s.uid,console.log("User authenticated with UID:",Rr),iM()):(Rr=null,console.log("No user is signed in"))});const iM=async()=>{console.log("Auto-creating user collections for UID:",Rr)},dt=()=>!!Rr,el=s=>{if(!dt())throw new Error("User not authenticated. Please sign in first.");const e=Pt();return N2(rn,`users/${e}/${s}`)},ux=()=>el("students"),dx=()=>el("payments"),hx=()=>el("expenditures"),fx=()=>el("attendance"),mx=()=>el("staff"),px=()=>el("staffAttendance"),o0=async s=>{try{if(console.log("=== FIREBASE CREATE USER PROFILE START ==="),console.log("User Data:",s),!dt())throw new Error("User not authenticated. Please sign in first.");const e=Pt(),t=un(rn,"userProfiles",e),i=await XT(t,s);return console.log("=== FIREBASE CREATE USER PROFILE END SUCCESS ==="),i}catch(e){throw console.error("Error creating user profile: ",e),e}},rM=async()=>{try{if(console.log("=== FIREBASE GET USER PROFILE START ==="),!dt())throw new Error("User not authenticated. Please sign in first.");const s=Pt(),e=un(rn,"userProfiles",s),t=await V2(e);return t.exists()?(console.log("User profile data:",t.data()),console.log("=== FIREBASE GET USER PROFILE END SUCCESS ==="),{id:t.id,...t.data()}):(console.log("No user profile found"),console.log("=== FIREBASE GET USER PROFILE END SUCCESS ==="),null)}catch(s){throw console.error("Error getting user profile: ",s),s}},oM=async s=>{try{console.log("=== FIREBASE ADD STUDENT START ==="),console.log("Student Data:",s);const t={id:(await Zo(ux(),s)).id,...s};return console.log("=== FIREBASE ADD STUDENT END SUCCESS ==="),t}catch(e){throw console.error("Error adding student: ",e),e}},Mh=async()=>{try{const s=await Qo(ux()),e=[];return s.forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(s){throw console.error("Error getting students: ",s),s}},ac=async(s,e)=>{try{console.log("=== FIREBASE UPDATE STUDENT START ==="),console.log("Student ID (before conversion):",s,"Type:",typeof s),console.log("Student Data:",e);const t=String(s);console.log("Student ID (after conversion):",t,"Type:",typeof t);const i=un(rn,`users/${Pt()}/students`,t);console.log("Student document reference created:",i);const o=await Wo(i,e);return console.log("Firebase updateDoc result:",o),console.log("=== FIREBASE UPDATE STUDENT END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating student in Firebase: ",t),console.error("Error code:",t.code),console.error("Error message:",t.message),console.error("Error stack:",t.stack),t}},lM=async s=>{try{console.log("=== FIREBASE DELETE STUDENT START ==="),console.log("Student ID (before conversion):",s,"Type:",typeof s);const e=String(s);console.log("Student ID (after conversion):",e,"Type:",typeof e);const t=un(rn,`users/${Pt()}/students`,e);return await Jo(t),console.log("=== FIREBASE DELETE STUDENT END SUCCESS ==="),e}catch(e){throw console.error("Error deleting student: ",e),e}},gx=async s=>{try{console.log("=== FIREBASE ADD PAYMENT START ==="),console.log("Payment Data:",s);const t={id:(await Zo(dx(),s)).id,...s};return console.log("=== FIREBASE ADD PAYMENT END SUCCESS ==="),t}catch(e){throw console.error("Error adding payment: ",e),e}},qc=async()=>{try{console.log("=== FIREBASE GET PAYMENTS START ===");const s=await Qo(dx()),e=[];return s.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET PAYMENTS END SUCCESS ==="),e}catch(s){throw console.error("Error getting payments: ",s),s}},Rp=async(s,e)=>{try{console.log("=== FIREBASE UPDATE PAYMENT START ==="),console.log("Payment ID (before conversion):",s,"Type:",typeof s),console.log("Payment Data:",e);const t=String(s);console.log("Payment ID (after conversion):",t,"Type:",typeof t);const i=un(rn,`users/${Pt()}/payments`,t);return await Wo(i,e),console.log("=== FIREBASE UPDATE PAYMENT END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating payment: ",t),t}},l0=async s=>{try{console.log("=== FIREBASE DELETE PAYMENT START ==="),console.log("Payment ID (before conversion):",s,"Type:",typeof s);const e=String(s);console.log("Payment ID (after conversion):",e,"Type:",typeof e);const t=un(rn,`users/${Pt()}/payments`,e);return await Jo(t),console.log("=== FIREBASE DELETE PAYMENT END SUCCESS ==="),e}catch(e){throw console.error("Error deleting payment: ",e),e}},cM=async s=>{try{console.log("=== FIREBASE ADD EXPENDITURE START ==="),console.log("Expenditure Data:",s);const t={id:(await Zo(hx(),s)).id,...s};return console.log("=== FIREBASE ADD EXPENDITURE END SUCCESS ==="),t}catch(e){throw console.error("Error adding expenditure: ",e),e}},Gg=async()=>{try{console.log("=== FIREBASE GET EXPENDITURES START ===");const s=await Qo(hx()),e=[];return s.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET EXPENDITURES END SUCCESS ==="),e}catch(s){throw console.error("Error getting expenditures: ",s),s}},uM=async(s,e)=>{try{console.log("=== FIREBASE UPDATE EXPENDITURE START ==="),console.log("Expenditure ID (before conversion):",s,"Type:",typeof s),console.log("Expenditure Data:",e);const t=String(s);console.log("Expenditure ID (after conversion):",t,"Type:",typeof t);const i=un(rn,`users/${Pt()}/expenditures`,t);return await Wo(i,e),console.log("=== FIREBASE UPDATE EXPENDITURE END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating expenditure: ",t),t}},dM=async s=>{try{console.log("=== FIREBASE DELETE EXPENDITURE START ==="),console.log("Expenditure ID (before conversion):",s,"Type:",typeof s);const e=String(s);console.log("Expenditure ID (after conversion):",e,"Type:",typeof e);const t=un(rn,`users/${Pt()}/expenditures`,e);return await Jo(t),console.log("=== FIREBASE DELETE EXPENDITURE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting expenditure: ",e),e}},hM=async s=>{try{console.log("=== FIREBASE ADD ATTENDANCE START ==="),console.log("Attendance Data:",s);const t={id:(await Zo(fx(),s)).id,...s};return console.log("=== FIREBASE ADD ATTENDANCE END SUCCESS ==="),t}catch(e){throw console.error("Error adding attendance: ",e),e}},fM=async()=>{try{console.log("=== FIREBASE GET ATTENDANCE START ===");const s=await Qo(fx()),e=[];return s.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET ATTENDANCE END SUCCESS ==="),e}catch(s){throw console.error("Error getting attendance: ",s),s}},mM=async(s,e)=>{try{console.log("=== FIREBASE UPDATE ATTENDANCE START ==="),console.log("Attendance ID (before conversion):",s,"Type:",typeof s),console.log("Attendance Data:",e);const t=String(s);console.log("Attendance ID (after conversion):",t,"Type:",typeof t);const i=un(rn,`users/${Pt()}/attendance`,t);return await Wo(i,e),console.log("=== FIREBASE UPDATE ATTENDANCE END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating attendance: ",t),t}},pM=async s=>{try{console.log("=== FIREBASE DELETE ATTENDANCE START ==="),console.log("Attendance ID (before conversion):",s,"Type:",typeof s);const e=String(s);console.log("Attendance ID (after conversion):",e,"Type:",typeof e);const t=un(rn,`users/${Pt()}/attendance`,e);return await Jo(t),console.log("=== FIREBASE DELETE ATTENDANCE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting attendance: ",e),e}},gM=async(s,e)=>{try{console.log("=== FIREBASE UPLOAD STUDENT PHOTO START ==="),console.log("Student ID:",s),console.log("File:",e);const t=vc(Po,`users/${Pt()}/student-photos/${s}/${e.name}`),i=await Pd(t,e),o=await Od(i.ref);return console.log("=== FIREBASE UPLOAD STUDENT PHOTO END SUCCESS ==="),o}catch(t){throw console.error("Error uploading student photo: ",t),t}},yM=async()=>{try{console.log("Testing Firebase Storage connection...");const s=vc(Po,`users/${Pt()}`),e=await Zk(s);return console.log("Storage connection test successful:",{prefixes:e.prefixes.length,items:e.items.length}),!0}catch(s){return console.error("Storage connection test failed:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),!1}},vM=async s=>{try{console.log("=== FIREBASE ADD STAFF START ==="),console.log("Staff Data:",s);const t={id:(await Zo(mx(),s)).id,...s};return console.log("=== FIREBASE ADD STAFF END SUCCESS ==="),t}catch(e){throw console.error("Error adding staff: ",e),e}},EM=async()=>{try{console.log("=== FIREBASE GET STAFF START ===");const s=await Qo(mx()),e=[];return s.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET STAFF END SUCCESS ==="),e}catch(s){throw console.error("Error getting staff: ",s),s}},_M=async(s,e)=>{try{console.log("=== FIREBASE UPDATE STAFF START ==="),console.log("Firebase Document ID (before conversion):",s,"Type:",typeof s),console.log("Staff Data:",e);const t=String(s);console.log("Firebase Document ID (after conversion):",t,"Type:",typeof t);const i=un(rn,`users/${Pt()}/staff`,t);return await Wo(i,e),console.log("=== FIREBASE UPDATE STAFF END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating staff: ",t),t}},SM=async s=>{try{console.log("=== FIREBASE DELETE STAFF START ==="),console.log("Firebase Document ID (before conversion):",s,"Type:",typeof s);const e=String(s);console.log("Firebase Document ID (after conversion):",e,"Type:",typeof e);const t=un(rn,`users/${Pt()}/staff`,e);return await Jo(t),console.log("=== FIREBASE DELETE STAFF END SUCCESS ==="),e}catch(e){throw console.error("Error deleting staff: ",e),e}},wM=async s=>{try{console.log("=== FIREBASE ADD STAFF ATTENDANCE START ==="),console.log("Attendance Data:",s);const e={};for(const o in s)s[o]!==void 0?e[o]=s[o]:console.warn("Skipping undefined field in attendanceData:",o);console.log("Cleaned Attendance Data:",e);const i={id:(await Zo(px(),e)).id,...e};return console.log("=== FIREBASE ADD STAFF ATTENDANCE END SUCCESS ==="),i}catch(e){throw console.error("Error adding staff attendance: ",e),e}},TM=async()=>{try{console.log("=== FIREBASE GET STAFF ATTENDANCE START ===");const s=await Qo(px()),e=[];return s.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET STAFF ATTENDANCE END SUCCESS ==="),e}catch(s){throw console.error("Error getting staff attendance: ",s),s}},xM=async(s,e)=>{try{if(console.log("=== FIREBASE UPDATE STAFF ATTENDANCE START ==="),console.log("Firebase Document ID (before conversion):",s,"Type:",typeof s),console.log("Attendance Data:",e),!s)throw new Error("Firebase document ID is required for update operation");const t=String(s);console.log("Firebase Document ID (after conversion):",t,"Type:",typeof t);const i={};for(const u in e)e[u]!==void 0?i[u]=e[u]:console.warn("Skipping undefined field in attendanceData:",u);console.log("Cleaned Attendance Data:",i);const o=un(rn,`users/${Pt()}/staffAttendance`,t);return await Wo(o,i),console.log("=== FIREBASE UPDATE STAFF ATTENDANCE END SUCCESS ==="),{id:t,...i}}catch(t){throw console.error("Error updating staff attendance: ",t),t}},bM=async s=>{try{if(console.log("=== FIREBASE DELETE STAFF ATTENDANCE START ==="),console.log("Firebase Document ID (before conversion):",s,"Type:",typeof s),!s)throw new Error("Firebase document ID is required for delete operation");const e=String(s);console.log("Firebase Document ID (after conversion):",e,"Type:",typeof e);const t=un(rn,`users/${Pt()}/staffAttendance`,e);return await Jo(t),console.log("=== FIREBASE DELETE STAFF ATTENDANCE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting staff attendance: ",e),e}},AM=({title:s,value:e,icon:t,color:i,animate:o=!1})=>{const[u,h]=I.useState(o?0:e);return I.useEffect(()=>{if(o){const p=typeof e=="string"?e.includes("")?parseFloat(e.replace(/[^0-9.]/g,"")):0:e;if(p===0){h(e);return}const y=p/(1e3/16);let E=0;const w=setInterval(()=>{E+=y,E>=p?(clearInterval(w),h(e)):typeof e=="string"&&e.includes("")?h(`${Math.floor(E).toLocaleString()}`):h(Math.floor(E))},16);return()=>clearInterval(w)}},[e,o]),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-icon",style:{backgroundColor:`${i}20`,color:i},children:c.jsx("span",{className:"stat-icon-content",children:t})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:s}),c.jsx("div",{className:"stat-value",children:o?u:e})]})]})},NM=({data:s})=>{const{collected:e,pending:t}=s,i=e+t;if(i===0)return c.jsx("div",{className:"chart-placeholder",children:"No data available"});const o=e/i*100,u=t/i*100,h=180,p=h/2,g=70,y=45,E=K=>K*Math.PI/180,w=o/100*360,b=(K,V,Q,X)=>{const pe=p+Q*Math.cos(E(K-90)),ee=p+Q*Math.sin(E(K-90)),N=p+Q*Math.cos(E(V-90)),A=p+Q*Math.sin(E(V-90)),x=p+X*Math.cos(E(K-90)),j=p+X*Math.sin(E(K-90)),M=p+X*Math.cos(E(V-90)),U=p+X*Math.sin(E(V-90)),D=V-K<=180?0:1;return[`M ${pe} ${ee}`,`A ${Q} ${Q} 0 ${D} 1 ${N} ${A}`,`L ${M} ${U}`,`A ${X} ${X} 0 ${D} 0 ${x} ${j}`,"Z"].join(" ")},k=b(0,w,g,y),O=b(w,360,g,y),[B,P]=I.useState(null);return c.jsxs("div",{className:"pie-chart-container",children:[c.jsx("div",{className:"pie-chart-wrapper",children:c.jsxs("svg",{viewBox:`0 0 ${h} ${h}`,className:"pie-svg",style:{width:"100%",height:"auto"},children:[c.jsx("path",{d:k,fill:"var(--success-color)",className:"pie-slice",onMouseEnter:()=>P("collected"),onMouseLeave:()=>P(null),style:{transform:B==="collected"?"scale(1.05)":"scale(1)",filter:B==="collected"?"drop-shadow(0 4px 10px rgba(28, 200, 138, 0.3))":"drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1))",transition:"all 0.3s ease"}}),c.jsx("path",{d:O,fill:"var(--warning-color)",className:"pie-slice",onMouseEnter:()=>P("pending"),onMouseLeave:()=>P(null),style:{transform:B==="pending"?"scale(1.05)":"scale(1)",filter:B==="pending"?"drop-shadow(0 4px 10px rgba(246, 194, 62, 0.3))":"drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1))",transition:"all 0.3s ease"}}),c.jsx("circle",{cx:p,cy:p,r:y-6,fill:"white",stroke:"rgba(0, 0, 0, 0.03)",strokeWidth:"1"}),c.jsx("text",{x:p,y:p-6,textAnchor:"middle",className:"center-text",fill:"var(--text-primary)",style:{fontSize:"20px",fontWeight:"800"},children:Math.round(i).toLocaleString()}),c.jsx("text",{x:p,y:p+10,textAnchor:"middle",className:"center-text",fill:"var(--text-secondary)",style:{fontSize:"9px",fontWeight:"700",letterSpacing:"1px"},children:"TOTAL"})]})}),c.jsxs("div",{className:"chart-legend-side",children:[c.jsxs("div",{className:"chart-legend",children:[c.jsxs("div",{className:"legend-item",onMouseEnter:()=>P("collected"),onMouseLeave:()=>P(null),style:{transform:B==="collected"?"translateY(-2px)":"translateY(0)",transition:"all 0.2s ease"},children:[c.jsx("div",{className:"legend-color",style:{backgroundColor:"var(--success-color)"}}),c.jsxs("div",{className:"legend-text",children:[c.jsx("div",{className:"legend-label",children:"Collected"}),c.jsxs("div",{className:"legend-value",children:["",Math.round(e).toLocaleString()]})]}),c.jsxs("div",{className:"legend-percentage",children:[o.toFixed(1),"%"]})]}),c.jsxs("div",{className:"legend-item",onMouseEnter:()=>P("pending"),onMouseLeave:()=>P(null),style:{transform:B==="pending"?"translateY(-2px)":"translateY(0)",transition:"all 0.2s ease"},children:[c.jsx("div",{className:"legend-color",style:{backgroundColor:"var(--warning-color)"}}),c.jsxs("div",{className:"legend-text",children:[c.jsx("div",{className:"legend-label",children:"Pending"}),c.jsxs("div",{className:"legend-value",children:["",Math.round(t).toLocaleString()]})]}),c.jsxs("div",{className:"legend-percentage",children:[u.toFixed(1),"%"]})]})]}),c.jsxs("div",{className:"percentage-display",children:[c.jsxs("div",{className:"percentage-value",children:[o.toFixed(1),"%"]}),c.jsx("div",{className:"percentage-label",children:"Collection Rate"}),c.jsxs("div",{className:"total-amount",children:["Total: ",Math.round(i).toLocaleString()]})]})]})]})},CM=({data:s,width:e="100%",height:t=500})=>{const[i,o]=I.useState(null);if(!s||s.length===0)return c.jsx("div",{className:"chart-placeholder",children:"No data available"});const u=s.map(V=>V.amount),h=Math.max(...u),p=Math.min(...u),g=h-p||1,y=30,E=typeof e=="string"?1e3:e,w=t,b=s.map((V,Q)=>{const X=y+Q*(E-2*y)/(s.length-1),pe=w-y-(V.amount-p)/g*(w-2*y);return{x:X,y:pe,...V}}),k=V=>{if(V.length<2)return"";let Q=`M ${V[0].x} ${V[0].y}`;for(let X=1;X<V.length;X++){const pe=V[X],ee=V[X-1],N=ee.x+(pe.x-ee.x)*.5,A=ee.y,x=pe.x-(pe.x-ee.x)*.5,j=pe.y;Q+=` C ${N} ${A}, ${x} ${j}, ${pe.x} ${pe.y}`}return Q},O=k(b),B=()=>[0,.25,.5,.75,1].map((V,Q)=>c.jsx("line",{x1:y,y1:y+V*(w-2*y),x2:E-y,y2:y+V*(w-2*y),className:"grid-line"},Q)),P=(V,Q)=>{o({x:Q.clientX,y:Q.clientY,content:`${V.amount.toLocaleString()} collected in ${V.month}`})},K=()=>{o(null)};return c.jsxs("div",{className:"line-chart-container",children:[c.jsxs("svg",{width:e,height:t,viewBox:`0 0 ${E} ${w}`,preserveAspectRatio:"xMidYMid meet",className:"line-chart",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"var(--info-color)"}),c.jsx("stop",{offset:"100%",stopColor:"var(--info-color-darker)"})]}),c.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"var(--info-color)",stopOpacity:"0.2"}),c.jsx("stop",{offset:"100%",stopColor:"var(--info-color)",stopOpacity:"0"})]}),c.jsxs("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[c.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),c.jsx("feOffset",{dx:"2",dy:"2",result:"offsetblur"}),c.jsx("feFlood",{floodColor:"rgba(0,0,0,0.1)"}),c.jsx("feComposite",{in2:"offsetblur",operator:"in"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),B(),b.length>1&&c.jsx("path",{d:`${k(b)} L ${b[b.length-1].x} ${w-y} L ${b[0].x} ${w-y} Z`,fill:"url(#areaGradient)",className:"area-fill"}),c.jsx("path",{d:O,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"2.5",filter:"url(#shadow)",className:"data-line"}),b.map((V,Q)=>c.jsx("circle",{cx:V.x,cy:V.y,r:"6",fill:"white",stroke:"var(--info-color)",strokeWidth:"2",className:"data-point",onMouseOver:X=>P(V,X),onMouseOut:K},Q)),b.map((V,Q)=>c.jsx("text",{x:V.x,y:w-y+20,textAnchor:"middle",fontSize:"10",fill:"var(--text-secondary)",className:"axis-label",children:V.month},Q))]}),i&&c.jsx("div",{className:"chart-tooltip",style:{position:"fixed",left:i.x+10,top:i.y-30,background:"white",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"12px",fontWeight:"600",pointerEvents:"none",zIndex:1e3,border:"1px solid rgba(0, 0, 0, 0.05)"},children:i.content})]})},RM=({data:s,width:e="100%",height:t=300})=>{const[i,o]=I.useState(null),h=["Sep 2025","Oct 2025","Nov 2025","Dec 2025"].map(X=>s.find(ee=>ee.month===X)||{month:X,collected:0,pending:0}),p={top:30,right:20,bottom:50,left:60},g=typeof e=="string"?1e3:e,y=t,E=g-p.left-p.right,w=y-p.top-p.bottom,b=[0,1e4,2e4,3e4,4e4],k=4e4,O=20,B=O*2.5,P=(E-B*h.length)/(h.length-1),K=[];h.forEach((X,pe)=>{const ee=p.left+pe*(B+P),N=X.collected/k*w,A=p.top+w-N;K.push({x:ee,y:A,width:O,height:N,value:X.collected,month:X.month,type:"Collected",color:"#1cc88a",isCurrent:X.month==="Dec 2025"});const x=X.pending/k*w,j=p.top+w-x;K.push({x:ee+O*1.5,y:j,width:O,height:x,value:X.pending,month:X.month,type:"Pending",color:"#f6c23e",isCurrent:X.month==="Dec 2025"})});const V=(X,pe)=>{const ee=h.find(N=>N.month===X.month);o({x:pe.clientX,y:pe.clientY,month:X.month,collected:ee.collected,pending:ee.pending})},Q=()=>{o(null)};return c.jsxs("div",{className:"bar-chart-container",children:[c.jsxs("svg",{width:e,height:t,viewBox:`0 0 ${g} ${y}`,preserveAspectRatio:"xMidYMid meet",className:"bar-chart",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"collectedGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#1cc88a"}),c.jsx("stop",{offset:"100%",stopColor:"#139d6d"})]}),c.jsxs("linearGradient",{id:"pendingGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#f6c23e"}),c.jsx("stop",{offset:"100%",stopColor:"#e5a525"})]}),c.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"3",result:"blur"}),c.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),b.map((X,pe)=>{const ee=p.top+w-X/k*w;return c.jsx("line",{x1:p.left,y1:ee,x2:g-p.right,y2:ee,stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:"1"},pe)}),b.map((X,pe)=>{const ee=p.top+w-X/k*w;return c.jsxs("text",{x:p.left-10,y:ee+4,textAnchor:"end",fontSize:"14",fill:"#6c757d",fontFamily:"sans-serif",children:["",X===0?"0":X>=1e3?`${X/1e3}k`:X]},pe)}),K.map((X,pe)=>c.jsxs("g",{children:[c.jsx("rect",{x:X.x,y:X.y,width:X.width,height:X.height,fill:X.type==="Collected"?"url(#collectedGradient)":"url(#pendingGradient)",rx:"8",ry:"8",onMouseOver:ee=>V(X,ee),onMouseOut:Q,style:{opacity:X.value===0?.3:1,filter:X.isCurrent?"url(#glow)":"none"}}),X.isCurrent&&c.jsx("rect",{x:X.x-1,y:X.y-1,width:X.width+2,height:X.height+2,fill:"none",rx:"9",ry:"9",stroke:"#1cc88a",strokeWidth:"1",strokeDasharray:"3,3"})]},pe)),h.map((X,pe)=>{const ee=p.left+pe*(B+P)+B/2;return c.jsxs("g",{children:[c.jsx("text",{x:ee,y:y-p.bottom+20,textAnchor:"middle",fontSize:"14",fill:"#6c757d",fontFamily:"sans-serif",children:X.month.split(" ")[0]}),X.month==="Dec 2025"&&c.jsx("text",{x:ee,y:y-p.bottom+35,textAnchor:"middle",fontSize:"12",fill:"#1cc88a",fontWeight:"600",fontFamily:"sans-serif",children:"Current"})]},pe)})]}),c.jsxs("div",{className:"chart-legend-top-right",children:[c.jsxs("div",{className:"legend-item-horizontal",children:[c.jsx("div",{className:"legend-color-box",style:{backgroundColor:"#1cc88a"}}),c.jsx("span",{className:"legend-label",children:"Collected"})]}),c.jsxs("div",{className:"legend-item-horizontal",children:[c.jsx("div",{className:"legend-color-box",style:{backgroundColor:"#f6c23e"}}),c.jsx("span",{className:"legend-label",children:"Pending"})]})]}),i&&c.jsxs("div",{className:"chart-tooltip",style:{position:"fixed",left:i.x+10,top:i.y-30,background:"white",padding:"10px 15px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"13px",fontWeight:"600",pointerEvents:"none",zIndex:1e3,border:"1px solid rgba(0, 0, 0, 0.05)",minWidth:"180px"},children:[c.jsx("div",{style:{marginBottom:"5px",fontWeight:"700"},children:i.month}),c.jsxs("div",{style:{color:"#1cc88a"},children:["Collected: ",i.collected.toLocaleString()]}),c.jsxs("div",{style:{color:"#f6c23e"},children:["Pending: ",i.pending.toLocaleString()]})]})]})},IM=({totalFees:s,collectedFees:e})=>{const[t,i]=I.useState([]),[o,u]=I.useState(!0),[h,p]=I.useState(null);I.useEffect(()=>{const w=async()=>{try{u(!0);const k=await Gg();i(k)}catch(k){console.error("Error fetching expenditures:",k),p("Failed to load expenditure data")}finally{u(!1)}};w();const b=()=>{w()};return window.addEventListener("expenditureUpdated",b),()=>{window.removeEventListener("expenditureUpdated",b)}},[]);const g=t.reduce((w,b)=>w+(parseFloat(b.total)||0),0),y=s-g,E=y>=0;return o?c.jsxs("div",{className:"profit-loss-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("h3",{children:"Financial Status"})}),c.jsx("div",{className:"card-content",children:c.jsx("div",{className:"loading",children:"Loading..."})})]}):h?c.jsxs("div",{className:"profit-loss-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("h3",{children:"Financial Status"})}),c.jsx("div",{className:"card-content",children:c.jsx("div",{className:"error",children:h})})]}):c.jsxs("div",{className:"profit-loss-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("h3",{children:"Financial Status"})}),c.jsx("div",{className:"card-content",children:c.jsxs("div",{className:"financial-summary",children:[c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"label",children:"Total Income (Fees)"}),c.jsxs("span",{className:"value income",children:["",s.toLocaleString()]})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"label",children:"Total Expenditure"}),c.jsxs("span",{className:"value expenditure",children:["",g.toLocaleString()]})]}),c.jsxs("div",{className:`summary-item ${E?"profit":"loss"}`,children:[c.jsxs("div",{children:[c.jsxs("div",{className:"label",children:["Net ",E?"Profit":"Loss"]}),c.jsx("div",{className:"helper-text",children:"Financial health indicator"})]}),c.jsxs("span",{className:`value ${E?"profit":"loss"}`,children:["",Math.abs(y).toLocaleString()]})]})]})})]})},DM=({onClose:s})=>{const[e,t]=I.useState([]),[i,o]=I.useState(!0),[u,h]=I.useState("month"),[p,g]=I.useState("desc");I.useEffect(()=>{y()},[]);const y=async()=>{try{const k=await qc(),O={};k.forEach(P=>{if(!P.createdAt)return;let K;if(P.createdAt instanceof Date?K=P.createdAt:typeof P.createdAt=="string"?K=new Date(P.createdAt):P.createdAt.toDate&&(K=P.createdAt.toDate()),!K||isNaN(K.getTime()))return;const V=`${K.getFullYear()}-${String(K.getMonth()+1).padStart(2,"0")}`,Q=K.toLocaleString("en-US",{month:"long",year:"numeric"});O[V]||(O[V]={month:Q,totalAmount:0,paymentCount:0}),O[V].totalAmount+=parseFloat(P.amount)||0,O[V].paymentCount+=1});const B=Object.values(O);B.sort((P,K)=>new Date(K.month)-new Date(P.month)),t(B),o(!1)}catch(k){console.error("Error fetching history data:",k),o(!1)}},E=k=>{u===k?g(p==="asc"?"desc":"asc"):(h(k),g("desc"))},w=[...e].sort((k,O)=>{let B,P;switch(u){case"month":B=new Date(k.month),P=new Date(O.month);break;case"amount":B=k.totalAmount,P=O.totalAmount;break;case"count":B=k.paymentCount,P=O.paymentCount;break;default:return 0}return p==="asc"?B>P?1:-1:B<P?1:-1}),b=()=>{const k=[["Month","Total Collected ()","Total Payments"],...w.map(K=>[K.month,K.totalAmount,K.paymentCount])].map(K=>K.join(",")).join(`
`),O=new Blob([k],{type:"text/csv;charset=utf-8;"}),B=URL.createObjectURL(O),P=document.createElement("a");P.setAttribute("href",B),P.setAttribute("download","monthly-history.csv"),P.style.visibility="hidden",document.body.appendChild(P),P.click(),document.body.removeChild(P)};return i?c.jsx("div",{className:"modal-overlay",onClick:s,children:c.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Monthly History"}),c.jsx("button",{className:"close-button",onClick:s,children:""})]}),c.jsx("div",{className:"loading",children:"Loading history data..."})]})}):c.jsx("div",{className:"modal-overlay",onClick:s,children:c.jsxs("div",{className:"modal-content",onClick:k=>k.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Monthly History"}),c.jsx("button",{className:"close-button",onClick:s,children:""})]}),c.jsx("div",{className:"modal-actions",children:c.jsx("button",{className:"export-button",onClick:b,children:"Export to CSV"})}),c.jsx("div",{className:"history-table-container",children:c.jsxs("table",{className:"history-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsxs("th",{onClick:()=>E("month"),children:["Month ",u==="month"&&(p==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>E("amount"),children:["Total Collected () ",u==="amount"&&(p==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>E("count"),children:["Total Payments ",u==="count"&&(p==="asc"?"":"")]})]})}),c.jsx("tbody",{children:w.map((k,O)=>c.jsxs("tr",{children:[c.jsx("td",{children:k.month}),c.jsxs("td",{children:["",k.totalAmount.toLocaleString()]}),c.jsx("td",{children:k.paymentCount})]},O))})]})})]})})},Ri=({data:s,width:e=40,height:t=20,color:i="var(--info-color)"})=>{if(!s||s.length<2)return null;const o=0,u=e,h=0,p=t,g=Math.min(...s),E=Math.max(...s)-g||1,w=s.map((b,k)=>{const O=o+k/(s.length-1)*(u-o),B=p-(b-g)/E*(p-h);return`${O},${B}`}).join(" ");return c.jsx("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,children:c.jsx("polyline",{points:w,fill:"none",stroke:i,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"})})},c0=({type:s="card",width:e="100%",height:t="auto",count:i=1})=>{const o=()=>{switch(s){case"card":return c.jsxs("div",{className:"skeleton-card",style:{width:e,height:t},children:[c.jsx("div",{className:"skeleton-header"}),c.jsxs("div",{className:"skeleton-content",children:[c.jsx("div",{className:"skeleton-line"}),c.jsx("div",{className:"skeleton-line"}),c.jsx("div",{className:"skeleton-line"})]})]});case"text":return c.jsx("div",{className:"skeleton-text",style:{width:e,height:t},children:c.jsx("div",{className:"skeleton-line"})});case"avatar":return c.jsx("div",{className:"skeleton-avatar",style:{width:e,height:t}});case"image":return c.jsx("div",{className:"skeleton-image",style:{width:e,height:t}});default:return c.jsx("div",{className:"skeleton-default",style:{width:e,height:t}})}};return c.jsx(c.Fragment,{children:Array.from({length:i}).map((u,h)=>c.jsx("div",{className:"skeleton-wrapper",children:o()},h))})},u0=()=>{const s=vs(),[e,t]=I.useState("Administrator"),[i,o]=I.useState({totalStudents:0,totalFees:0,collectedFees:0,pendingFees:0,todayCollections:0,overduePayments:0,completedPayments:0,avgPaymentAmount:0}),[u,h]=I.useState({totalStudents:0,totalFees:0,collectedFees:0,pendingFees:0,todayCollections:0,overduePayments:0,completedPayments:0,avgPaymentAmount:0,collectionRate:0}),[p,g]=I.useState(!0),[y,E]=I.useState({totalStudents:[],totalFees:[],collectedFees:[],pendingFees:[],todayCollections:[],collectionRate:[],overduePayments:[],completedPayments:[],avgPaymentAmount:[]}),[w,b]=I.useState([]),[k,O]=I.useState({collected:0,pending:0}),[B,P]=I.useState([]),[K,V]=I.useState([]),[Q,X]=I.useState(""),[pe,ee]=I.useState([]),[N,A]=I.useState(!1),[x,j]=I.useState(!0),[M,U]=I.useState(!1),D=I.useRef(null);I.useEffect(()=>{Ie(),z();const ae=()=>{Ie()};return window.addEventListener("paymentAdded",ae),window.addEventListener("paymentRecorded",ae),window.addEventListener("paymentUpdated",ae),window.addEventListener("paymentDeleted",ae),window.addEventListener("studentsUpdated",ae),window.addEventListener("dashboardRefresh",ae),window.addEventListener("paymentsRefresh",ae),()=>{window.removeEventListener("paymentAdded",ae),window.removeEventListener("paymentRecorded",ae),window.removeEventListener("paymentUpdated",ae),window.removeEventListener("paymentDeleted",ae),window.removeEventListener("studentsUpdated",ae),window.removeEventListener("dashboardRefresh",ae),window.removeEventListener("paymentsRefresh",ae)}},[]),I.useEffect(()=>{let ae=null;const $=1e3,ye=me=>{ae||(ae=me);const H=Math.min((me-ae)/$,1);h(ne=>({totalStudents:Math.floor(H*i.totalStudents+(1-H)*ne.totalStudents),totalFees:Math.floor(H*i.totalFees+(1-H)*ne.totalFees),collectedFees:Math.floor(H*i.collectedFees+(1-H)*ne.collectedFees),pendingFees:Math.floor(H*i.pendingFees+(1-H)*ne.pendingFees),todayCollections:Math.floor(H*i.todayCollections+(1-H)*ne.todayCollections),overduePayments:Math.floor(H*i.overduePayments+(1-H)*ne.overduePayments),completedPayments:Math.floor(H*i.completedPayments+(1-H)*ne.completedPayments),avgPaymentAmount:Math.floor(H*i.avgPaymentAmount+(1-H)*ne.avgPaymentAmount),collectionRate:Math.floor(H*(i.totalFees>0?Math.round(i.collectedFees/i.totalFees*100):0)+(1-H)*ne.collectionRate)})),H<1&&requestAnimationFrame(ye)};requestAnimationFrame(ye)},[i]);const Ie=async()=>{try{g(!0);const ae=await Mh(),$=await qc(),ye=await Gg(),me=ae.length,H=ae.reduce((Ge,Pe)=>Ge+(parseFloat(Pe.totalFees)||0),0),ne=ae.reduce((Ge,Pe)=>Ge+(parseFloat(Pe.feesPaid)||0),0),Se=H-ne,Ne=ye.reduce((Ge,Pe)=>Ge+(parseFloat(Pe.total)||0),0),Te=new Date,be=new Date(Date.UTC(Te.getFullYear(),Te.getMonth(),Te.getDate()));let le=0,we=0,qe=0,Ze=0,Ue=0;$.forEach(Ge=>{if(Ge.status==="paid"?(qe++,Ze+=parseFloat(Ge.amount)||0,Ue++):Ge.status==="overdue"&&we++,Ge.createdAt){let Pe;if(Ge.createdAt instanceof We)Pe=Ge.createdAt.toDate();else if(typeof Ge.createdAt=="string")if(Ge.createdAt.match(/^\d{4}-\d{2}-\d{2}$/)){const[gt,yt,wt]=Ge.createdAt.split("-").map(Number);Pe=new Date(gt,yt-1,wt)}else Pe=new Date(Ge.createdAt);else Ge.createdAt instanceof Date?Pe=Ge.createdAt:typeof Ge.createdAt=="number"&&(Pe=new Date(Ge.createdAt));Pe instanceof Date&&!isNaN(Pe.getTime())?new Date(Date.UTC(Pe.getFullYear(),Pe.getMonth(),Pe.getDate())).getTime()===be.getTime()&&(le+=parseFloat(Ge.amount)||0):console.log("Invalid date for payment:",Ge.id,Ge.createdAt)}});const ht=Ue>0?Ze/Ue:0;o({totalStudents:me,totalFees:H,collectedFees:ne,pendingFees:Se,todayCollections:le,overduePayments:we,completedPayments:qe,avgPaymentAmount:Math.round(ht)}),ze(me,H,ne,Se,le,we,qe,ht);const qt=q($);b(qt),O({collected:ne,pending:Se});const dn=[{name:"Completed",value:qe,color:"var(--success-color)"},{name:"Pending",value:$.filter(Ge=>Ge.status==="pending").length,color:"var(--warning-color)"},{name:"Overdue",value:we,color:"var(--danger-color)"}];ee(dn);const Nt=new Date,Rt=[];for(let Ge=5;Ge>=0;Ge--){const Pe=new Date(Nt.getFullYear(),Nt.getMonth()-Ge,1),gt=Pe.toLocaleString("default",{month:"short"}),yt=Pe.getFullYear().toString().slice(-2),wt=ne/6,Qa=wt*.3,Ms=Math.max(0,wt+(Math.random()-.5)*Qa*2);Rt.push({month:`${gt} '${yt}`,amount:Math.round(Ms)})}P(Rt);const Gn=[];qt.slice(-4).forEach((Ge,Pe)=>{const gt=Ge.income,yt=Math.round(gt*.25),[wt,Qa]=Ge.monthLabel.split(" "),Ms=wt.substring(0,3);Gn.push({month:`${Ms} ${Qa}`,collected:gt,pending:yt})}),V(Gn)}catch(ae){console.error("Error fetching dashboard data:",ae)}finally{g(!1)}},ze=(ae,$,ye,me,H,ne,Se,Ne)=>{const be=[],le=[],we=[],qe=[],Ze=[],Ue=[],ht=[],qt=[],dn=[];for(let Nt=6;Nt>=0;Nt--){const Rt=1+(Math.random()-.5)*.2;be.push(Math.max(0,Math.round(ae*Rt*(.8+.2*(Nt/7))))),le.push(Math.max(0,Math.round($*Rt*(.8+.2*(Nt/7))))),we.push(Math.max(0,Math.round(ye*Rt*(.7+.3*(Nt/7))))),qe.push(Math.max(0,Math.round(me*Rt*(.9+.1*(1-Nt/7))))),Ze.push(Math.max(0,Math.round(H*Rt*(.5+.5*Math.random())))),Ue.push(Math.max(0,Math.min(100,Math.round(we[we.length-1]/(le[le.length-1]||1)*100)))),ht.push(Math.max(0,Math.round(ne*Rt*(.95+.05*Math.random())))),qt.push(Math.max(0,Math.round(Se*Rt*(.9+.1*(Nt/7))))),dn.push(Math.max(0,Math.round(Ne*Rt)))}E({totalStudents:be,totalFees:le,collectedFees:we,pendingFees:qe,todayCollections:Ze,collectionRate:Ue,overduePayments:ht,completedPayments:qt,avgPaymentAmount:dn})},q=ae=>{const $=[],ye=new Date,me=ye.getMonth(),H=ye.getFullYear();for(let ne=3;ne>=0;ne--){const Se=new Date(ye.getFullYear(),ye.getMonth()-ne,1),Ne=Se.getFullYear()+"-"+String(Se.getMonth()+1).padStart(2,"0"),Te=ae.filter(le=>{if(!le.createdAt)return!1;let we="";return le.createdAt instanceof We?we=le.createdAt.toDate().toISOString().split("T")[0]:le.createdAt instanceof Date?we=le.createdAt.toISOString().split("T")[0]:typeof le.createdAt=="string"?we=le.createdAt:typeof le.createdAt=="number"&&(we=new Date(le.createdAt).toISOString().split("T")[0]),we.startsWith(Ne)}).reduce((le,we)=>le+(parseFloat(we.amount)||0),0),be=Se.getMonth()===me&&Se.getFullYear()===H;$.push({monthLabel:Se.toLocaleString("en-US",{month:"long",year:"numeric"}),income:Te,isCurrent:be})}return $},re=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}),xe=async()=>{try{await Qp(ps),localStorage.removeItem("isLoggedIn"),s("/login")}catch(ae){console.error("Error signing out:",ae)}};I.useEffect(()=>{const ae=$=>{const{message:ye}=$.detail;console.log("Success:",ye)};return window.addEventListener("showSuccess",ae),()=>{window.removeEventListener("showSuccess",ae)}},[]),I.useEffect(()=>{const ae=()=>{Ie()};return window.addEventListener("dashboardRefresh",ae),()=>{window.removeEventListener("dashboardRefresh",ae)}},[]),I.useEffect(()=>{const ae=$=>{M&&$.target.closest(".avatar-dropdown")===null&&U(!1)};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[M]);const ve=()=>{x?(D.current&&(D.current.classList.remove("open"),D.current.classList.add("closing")),setTimeout(()=>{j(!1)},500)):j(!0)},z=()=>{if(dt())try{const ae=Pt(),$=un(rn,`users/${ae}/settings/profile`),ye=Pg($,me=>{if(me.exists()){const H=me.data();H.firmName&&H.firmName.trim()!==""?G(H.firmName):G("Your Academy"),H.logoUrl&&_e(H.logoUrl),H.firmAddress&&Ce(H.firmAddress)}else G("Your Academy")});return()=>ye()}catch(ae){console.error("Error loading branding data:",ae)}},[R,G]=I.useState("Your Academy"),[ce,_e]=I.useState(""),[oe,Ce]=I.useState(""),Me=()=>{const ae=i.totalFees>0?i.collectedFees/i.totalFees*100:0,$=i.totalFees>0?i.pendingFees/i.totalFees*100:0;let ye=0,me=0;w&&w.length>=2&&(ye=w[w.length-1]?.income||0,me=w[w.length-2]?.income||0);const H=e==="Administrator"?"admin":"staff";let ne,Se,Ne;return console.log("Smart Suggestion Data:",{collectionRate:ae,pendingPercentage:$,currentMonthCollected:ye,lastMonthCollected:me,effectiveUserRole:H}),$>25||ae<70?(ne="danger",Se="",Ne="Collections at risk. Pending fees are high. Immediate follow-ups required to protect cash flow."):$>=15&&$<=25&&ae>=70&&ae<=85?(ne="warning",Se="",Ne="Collections are stable, but pending dues are increasing. Prioritize follow-ups on high-value pending payments."):($<15&&ae>=85,ne="success",Se="",Ne="Collection performance is healthy. Maintain current follow-up consistency."),ye>me&&ae>=80&&(Ne+=" Strong month-on-month growth observed."),H==="staff"&&(ne==="danger"?Ne="Urgent: High pending fees require immediate follow-ups.":ne==="warning"?Ne="Monitor pending dues and prioritize follow-ups.":Ne="Collections are healthy. Maintain follow-up consistency.",ye>me&&ae>=80&&(Ne+=" Good month-over-month growth.")),console.log("Generated Smart Suggestion:",{level:ne,icon:Se,message:Ne}),{level:ne,icon:Se,message:Ne}},Je=()=>{const ae=i.totalFees>0?i.collectedFees/i.totalFees*100:0,$=i.pendingFees,ye=i.totalFees*.1,me=[];return e==="Administrator"?($>0&&($>ye?(me.push({text:"Send payment reminders to students with pending dues",priority:"High"}),me.push({text:"Prioritize follow-ups for high-amount pending payments",priority:"High"})):me.push({text:"Monitor pending payments to prevent accumulation",priority:"Medium"})),ae>=75?(me.push({text:"Maintain follow-up consistency to sustain collection performance",priority:"Medium"}),me.push({text:"Consider early reminders to reduce next month's pending fees",priority:"Medium"})):me.push({text:"Review and optimize collection process for better results",priority:"High"}),me.push({text:"Analyze collection trends to identify improvement opportunities",priority:"Medium"})):($>0&&(me.push({text:"Call students with pending fees to discuss payment options",priority:"High"}),me.push({text:"Send reminder messages for upcoming payment deadlines",priority:"Medium"})),ae>=75?me.push({text:"Continue regular follow-ups with all assigned accounts",priority:"Medium"}):me.push({text:"Increase frequency of follow-ups for better collections",priority:"High"}),me.push({text:"Update payment records after each successful collection",priority:"Medium"})),me},de=()=>{const ae=i.totalFees>0?Math.round(i.collectedFees/i.totalFees*1e3)/10:0,$=Math.round(i.pendingFees).toLocaleString();return`Insight: Collection rate is strong at ${ae}%, but ${$} is still pending  follow-ups can improve cash flow.`};return c.jsxs("div",{className:"dashboard",children:[c.jsxs("div",{className:"dashboard-header",children:[c.jsx("div",{className:"header-left",children:c.jsxs("div",{className:"app-logo-container",children:[ce?c.jsx("img",{src:ce,alt:"Academy Logo",className:"app-logo"}):c.jsx("img",{src:"/Logo.png",alt:"Victory Point Academy Fees Manager Logo",className:"app-logo"}),c.jsxs("div",{className:"app-title-container",children:[c.jsxs("h1",{className:"app-name",children:[R," Fees Manager"]}),c.jsxs("div",{className:"app-subtitle",children:[c.jsx("span",{className:"subtitle-text",children:"Managing Fees"}),c.jsx("span",{className:"separator",children:""}),c.jsx("span",{className:"current-month",children:re()}),c.jsx("span",{className:"separator",children:""}),c.jsxs("span",{className:"status-container",children:[c.jsx("span",{className:"status-dot active"}),c.jsx("span",{className:"status-text",children:"Active"})]})]})]})]})}),c.jsx("div",{className:"header-right",children:c.jsxs("div",{className:"avatar-dropdown",children:[c.jsx("div",{className:"avatar",onClick:()=>U(!M),children:c.jsx("span",{className:"avatar-initials",children:"VP"})}),M&&c.jsxs("div",{className:"dropdown-menu",children:[c.jsx("button",{className:"dropdown-item",onClick:()=>s("/profile"),children:"Profile"}),c.jsx("button",{className:"dropdown-item",onClick:xe,children:"Logout"})]})]})})]}),c.jsx("div",{className:"kpi-cards-grid",children:p?c.jsx(c0,{type:"card",count:5}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Total Students"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsx("div",{className:"kpi-value",children:u.totalStudents}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Ri,{data:y.totalStudents,color:"var(--info-color)"})})]})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 5.2%"})})]}),c.jsxs("div",{className:"kpi-card total-fees",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(28, 200, 138, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Total Fees Collected"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:["",u.collectedFees.toLocaleString()]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Ri,{data:y.collectedFees,color:"var(--success-color)"})})]}),c.jsx("div",{className:"helper-text",children:"Revenue generated this period"})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 12.4%"})})]}),c.jsxs("div",{className:"kpi-card pending-fees",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(246, 194, 62, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Pending Fees"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:["",u.pendingFees.toLocaleString()]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Ri,{data:y.pendingFees,color:"var(--warning-color)"})})]}),c.jsx("div",{className:"helper-text",children:"Requires immediate attention"})]}),c.jsx("div",{className:"kpi-trend negative",children:c.jsx("span",{children:" 3.1%"})})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(231, 74, 59, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Today's Collections"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:["",u.todayCollections.toLocaleString()]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Ri,{data:y.todayCollections,color:"var(--danger-color)"})})]})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 8.7%"})})]}),c.jsxs("div",{className:"kpi-card collection-rate",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Collection Rate"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:[u.collectionRate,"%"]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Ri,{data:y.collectionRate,color:"var(--info-color)"})})]}),c.jsx("div",{className:"helper-text",children:"Overall performance indicator"})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 2.3%"})})]})]})}),c.jsxs("div",{className:"monthly-collections-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h2",{children:"Monthly Fee Collections"}),c.jsx("button",{onClick:()=>A(!0),className:"history-button",children:"History"})]}),c.jsx("div",{className:"monthly-cards-container",children:p?c.jsx(c0,{type:"card",count:4}):w.map((ae,$)=>c.jsxs("div",{className:`monthly-card ${ae.isCurrent?"current-month":""}`,children:[c.jsx("div",{className:"monthly-card-header",children:c.jsx("h3",{children:ae.monthLabel})}),c.jsxs("div",{className:"monthly-card-body",children:[c.jsxs("div",{className:"amount",children:["",ae.income.toLocaleString()]}),c.jsx("div",{className:"description",children:"Collected"}),c.jsx("div",{className:"micro-text",children:ae.isCurrent?"Current active month":$===0?"Highest this quarter":""})]})]},$))})]}),c.jsxs("div",{className:"insights-section",children:[c.jsx("button",{className:"insights-toggle-btn",onClick:ve,disabled:p,children:x?"Hide Insights ":"View Insights "}),c.jsx("div",{ref:D,className:`insights-content ${x?"open":"initial"}`,children:x&&!p&&c.jsxs("div",{className:"insights-content-inner",children:[c.jsxs("div",{className:"secondary-stats-grid",children:[c.jsxs("div",{className:"secondary-stat-card",children:[c.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(231, 74, 59, 0.1)"},children:c.jsx("span",{className:"stat-icon",children:""})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:"Overdue Payments"}),c.jsxs("div",{className:"stat-value-container",children:[c.jsx("div",{className:"stat-value",children:u.overduePayments}),c.jsx("div",{className:"stat-sparkline",children:c.jsx(Ri,{data:y.overduePayments,color:"var(--danger-color)"})})]})]}),c.jsx("div",{className:"stat-trend negative",children:c.jsx("span",{children:" 2.1%"})})]}),c.jsxs("div",{className:"secondary-stat-card",children:[c.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(28, 200, 138, 0.1)"},children:c.jsx("span",{className:"stat-icon",children:""})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:"Completed Payments"}),c.jsxs("div",{className:"stat-value-container",children:[c.jsx("div",{className:"stat-value",children:u.completedPayments}),c.jsx("div",{className:"stat-sparkline",children:c.jsx(Ri,{data:y.completedPayments,color:"var(--success-color)"})})]})]}),c.jsx("div",{className:"stat-trend positive",children:c.jsx("span",{children:" 7.3%"})})]}),c.jsxs("div",{className:"secondary-stat-card",children:[c.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:c.jsx("span",{className:"stat-icon",children:""})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:"Average Payment Amount"}),c.jsxs("div",{className:"stat-value-container",children:[c.jsxs("div",{className:"stat-value",children:["",u.avgPaymentAmount.toLocaleString()]}),c.jsx("div",{className:"stat-sparkline",children:c.jsx(Ri,{data:y.avgPaymentAmount,color:"var(--info-color)"})})]})]}),c.jsx("div",{className:"stat-trend positive",children:c.jsx("span",{children:" 1.8%"})})]})]}),c.jsxs("div",{className:"charts-section",children:[c.jsxs("div",{className:"analytics-panel",style:{flex:"1 1 45%"},children:[c.jsxs("div",{className:"analytics-header",children:[c.jsx("h2",{className:"panel-title",children:"Fees Analytics"}),c.jsx("p",{className:"panel-subtext",children:"Distribution overview"})]}),c.jsx("div",{className:"analytics-content",style:{flexDirection:"column"},children:c.jsxs("div",{className:"analytics-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{className:"section-title",children:"Fee Distribution"}),c.jsx("p",{className:"section-subtitle",children:"Collected vs pending fees"})]}),c.jsx(NM,{data:k}),c.jsxs("div",{className:"combined-insight-bar",children:[c.jsx("span",{className:"insight-icon",children:""}),c.jsx("span",{className:"insight-text",children:de()})]})]})})]}),c.jsxs("div",{className:"analytics-panel",style:{flex:"1 1 45%",position:"relative"},children:[c.jsxs("div",{className:"analytics-header",children:[c.jsx("h2",{className:"panel-title",children:"Monthly Fee Performance"}),c.jsx("p",{className:"panel-subtext",children:"Collected vs pending fees by month"})]}),c.jsx("div",{className:"analytics-content",style:{flexDirection:"row",gap:"20px"},children:c.jsxs("div",{className:"analytics-section",style:{flex:"1"},children:[c.jsx(RM,{data:K,width:"100%",height:300}),c.jsxs("button",{className:"view-trend-button",onClick:()=>s("/collection-trend"),style:{position:"absolute",top:"60px",right:"20px",margin:"0",padding:"0",fontSize:"0.85rem",minWidth:"auto",borderRadius:"6px",width:"81.81px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},children:[c.jsx("span",{children:"Trend"}),c.jsx("span",{className:"button-icon",style:{marginLeft:"4px"},children:""})]}),!p&&(()=>{const ae=Me();return c.jsxs("div",{className:"combined-insight-bar",style:{marginTop:"15px",...ae.level==="danger"?{borderLeft:"4px solid #e74c3c",backgroundColor:"rgba(231, 76, 60, 0.05)"}:ae.level==="warning"?{borderLeft:"4px solid #f39c12",backgroundColor:"rgba(243, 156, 18, 0.05)"}:ae.level==="success"?{borderLeft:"4px solid #28a745",backgroundColor:"rgba(40, 167, 69, 0.05)"}:{borderLeft:"4px solid #3498db",backgroundColor:"rgba(52, 152, 219, 0.05)"}},children:[c.jsx("span",{className:"insight-icon",children:ae.icon}),c.jsxs("div",{children:[c.jsx("div",{className:"insight-title",style:{fontWeight:"600",marginBottom:"5px",color:"#1A1A1A"},children:"Smart Suggestion"}),c.jsxs("div",{className:"insight-text",children:["Suggestion: ",ae.message]})]})]})})(),!p&&Je().length>0&&c.jsxs("div",{className:"combined-insight-bar",style:{marginTop:"15px",background:"#f8fafc",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.03)"},children:[c.jsx("div",{className:"insight-title",style:{fontWeight:"600",marginBottom:"12px",color:"#1A1A1A",fontSize:"1.1rem"},children:"Action Suggestions"}),c.jsx("ul",{style:{paddingLeft:"20px",margin:"0",fontSize:"0.95rem"},children:Je().map((ae,$)=>c.jsxs("li",{style:{marginBottom:"8px",fontWeight:ae.priority==="High"?"600":"normal",color:ae.priority==="High"?"#e74c3c":"#2c3e50"},children:[c.jsx("span",{style:{marginRight:"8px"},children:ae.priority==="High"?"":ae.priority==="Medium"?"":""}),ae.text]},$))})]})]})})]})]}),c.jsx("div",{className:"profit-loss-section",children:c.jsx(IM,{totalFees:i.totalFees,collectedFees:i.collectedFees})})]})})]}),N&&c.jsx(DM,{onClose:()=>A(!1)})]})};class jM{constructor(){this.studentsKey="feesManagementStudents",this.paymentsKey="feesManagementPayments",this.useFirebase=!0}enableFirebase(){this.useFirebase=!0}disableFirebase(){this.useFirebase=!1}isFirebaseEnabled(){return this.useFirebase}async getStudents(){if(this.useFirebase&&dt())try{return await Mh()}catch(e){throw console.warn("Failed to get students from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async saveStudents(e){console.warn("saveStudents is deprecated - Firebase handles persistence automatically");try{for(const t of e)if(t.id)try{await ac(t.id,t)}catch(i){console.error("Error updating student in Firebase:",i)}}catch(t){console.error("Error saving students to Firebase:",t)}}async getStudentById(e){try{const t=await this.getStudents();let i=t.find(o=>o.studentId==e);return i||(i=t.find(o=>o.id==e)),!i&&typeof e=="string"&&/^\d+$/.test(e)&&(i=t.find(o=>o.id==parseInt(e)||o.studentId==parseInt(e))),i||null}catch(t){return console.error("Error getting student by ID:",t),null}}async addStudent(e){try{if(this.useFirebase&&dt())try{const t=parseFloat(e.totalFees)||0,i=parseFloat(e.feesPaid)||0,o=parseFloat(e.feesDue)!==void 0?parseFloat(e.feesDue):t-i,u={...e,studentId:e.studentId||`STD${String(Date.now()).slice(-4)}`,totalFees:t,feesPaid:i,feesDue:o,feesStructure:e.feesStructure||this.getDefaultFeeStructure(o),createdAt:We.now(),updatedAt:We.now()};delete u.id;const h=await oM(u);return window.dispatchEvent(new Event("studentsUpdated")),h}catch(t){throw console.warn("Failed to add student to Firebase:",t),new Error(`Failed to add student to Firebase: ${t.message||"Unknown error occurred"}`)}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}catch(t){throw console.error("Error adding student:",t),t}}getDefaultFeeStructure(e){return e>=1500?"Annual":e>=500?"Quarterly":e>0?"Monthly":"Not Set"}async updateStudent(e){try{if(console.log("=== UPDATE STUDENT FUNCTION START ==="),console.log("Received student data:",JSON.parse(JSON.stringify(e))),this.useFirebase&&dt())try{console.log("Using Firebase for update");const t=isNaN(parseFloat(e.totalFees))?0:parseFloat(e.totalFees),i=isNaN(parseFloat(e.feesPaid))?0:parseFloat(e.feesPaid),o=isNaN(parseFloat(e.feesDue))?t-i:parseFloat(e.feesDue);console.log("Parsed numeric values:",{totalFees:t,feesPaid:i,feesDue:o});let u=e.feesStructure;u||(u=this.getDefaultFeeStructure(o)),console.log("Determined feesStructure:",u);const h={name:e.name||"",class:e.class||"",totalFees:t,feesPaid:i,feesDue:o,feesStructure:u,contact:e.contact||"",email:e.email||"",address:e.address||"",fatherName:e.fatherName||"",motherName:e.motherName||"",status:e.status||"Not Started",studentId:e.studentId||e.id,updatedAt:We.now()};e.photoURL&&(h.photoURL=e.photoURL),e.createdAt&&(h.createdAt=e.createdAt),console.log("Prepared student data for Firebase:",h);let p=e.id;if(console.log("Student ID for update:",p,"Type:",typeof p),p&&typeof p=="number"&&p>1e12){console.log("Potential ID mismatch detected - ID looks like timestamp");try{const y=await this.getStudents();console.log("All students for ID matching:",y);const E=y.find(w=>w.studentId===e.studentId||w.name===e.name&&w.class===e.class);E?(console.log("Found matching student with correct ID:",E.id),p=E.id):console.log("No matching student found, using original ID")}catch(y){console.error("Error fetching students for ID matching:",y)}}if(!p){const y=new Error("Student ID is required for update");throw console.error("Validation error:",y.message),y}console.log("Updating student with ID:",p,"and data:",h);const g=await ac(p,h);return console.log("Firebase update result:",g),console.log("Dispatching studentsUpdated event"),window.dispatchEvent(new Event("studentsUpdated")),console.log("Dispatching studentUpdated event"),window.dispatchEvent(new CustomEvent("studentUpdated",{detail:{student:g}})),console.log("=== UPDATE STUDENT FUNCTION END SUCCESS ==="),g}catch(t){throw console.error("Failed to update student in Firebase:",t),console.error("Error stack:",t.stack),new Error(`Failed to update student: ${t.message}`)}else{const t=new Error("Firebase is required - localStorage fallback removed");throw console.error("Firebase not enabled:",t.message),t}}catch(t){throw console.error("Error updating student:",t),console.error("Error stack:",t.stack),new Error(`Error updating student: ${t.message}`)}}async deleteStudent(e){if(this.useFirebase&&dt())try{const i=(await this.getPayments()).filter(o=>o.studentId==e);for(const o of i)try{await l0(o.id)}catch(u){console.warn(`Failed to delete payment ${o.id} for student ${e}:`,u)}return await lM(e),window.dispatchEvent(new Event("studentsUpdated")),e}catch(t){throw console.warn("Failed to delete student from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}removeAllStudents(){throw new Error("removeAllStudents is deprecated - use Firebase console to clear data")}async getPayments(){if(this.useFirebase&&dt())try{const e=await qc(),t=new Date;let i=!1;return e.map(u=>{if(u.status==="pending"&&u.dueDate){let h;if(u.dueDate instanceof We?h=u.dueDate.toDate():typeof u.dueDate=="string"?u.dueDate.includes("/")?h=new Date(u.dueDate.split("/").reverse().join("-")):h=new Date(u.dueDate):u.dueDate instanceof Date&&(h=u.dueDate),h instanceof Date&&!isNaN(h)&&h<t){const p=u.createdAt?u.createdAt instanceof We?u.createdAt.toDate():new Date(u.createdAt):new Date,g=new Date(t.getTime()-6e4);if(p<=g)return i=!0,{...u,status:"overdue"}}}return u})}catch(e){throw console.warn("Failed to get payments from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}savePayments(e){console.warn("savePayments is deprecated - Firebase handles persistence automatically")}async addPayment(e){try{const t=await this.getStudentById(e.studentId);if(!t)throw new Error(`Student with ID "${e.studentId}" not found. Please add the student first.`);const i={...e,id:`PAY${Date.now()}`,studentId:e.studentId,studentName:t.name,studentClass:t.class,studentContact:t.contact,status:"pending",paidDate:null,method:null,receipt:null,amount:parseFloat(e.amount)||0,createdAt:We.now()};console.log("Adding new payment:",i);const o=await gx(i);return console.log("Payment added result:",o),await this.updateStudentFees(i.studentId,0),window.dispatchEvent(new CustomEvent("paymentAdded",{detail:{payment:o}})),o}catch(t){throw console.error("Error adding payment:",t),t}}async recordPayment(e,t){try{const i=await this.getPayments(),o=i.findIndex(u=>u.id==e);if(o!==-1){const u=i[o];console.log("Recording payment:",u);const h={...u,status:"paid",paidDate:We.now(),method:t,receipt:`RCT-${Date.now()}`,amount:parseFloat(u.amount)||0};console.log("Updated payment:",h);const p=await Rp(e,h);return console.log("Payment update result:",p),await new Promise(g=>setTimeout(g,100)),await this.updateStudentFees(h.studentId,h.amount),window.dispatchEvent(new CustomEvent("paymentRecorded",{detail:{payment:p}})),window.dispatchEvent(new Event("studentsUpdated")),p}return null}catch(i){throw console.error("Error recording payment:",i),i}}async updatePayment(e){try{const t={...e,amount:parseFloat(e.amount)||0},i=await Rp(e.id,t);return await this.updateStudentFees(e.studentId,0),await this.bidirectionalSync("payment",e.id),window.dispatchEvent(new CustomEvent("paymentUpdated",{detail:{payment:i}})),i}catch(t){throw console.error("Error updating payment:",t),t}}async deletePayment(e){if(this.useFirebase&&dt())try{return await l0(e),e}catch(t){throw console.error("Failed to delete payment from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStudentFees(e,t){try{await new Promise(B=>setTimeout(B,50));const i=await this.getStudents(),o=await this.getPayments(),u=await this.getStudentById(e);if(!u)return console.warn(`Student with ID ${e} not found for fee update`),null;const h=i.findIndex(B=>B.id==u.id||B.studentId==u.studentId);if(h===-1)return console.warn(`Student index not found for ID ${e}`),null;const p=o.filter(B=>B.studentId==e);let g=0,y=0,E=0;p.forEach(B=>{const P=parseFloat(B.amount)||0;if(P>0)switch(B.status){case"paid":g+=P;break;case"pending":y+=P;break;case"overdue":E+=P;break;default:y+=P}});const w=parseFloat(u.totalFees)||0,b=g+y+E,k={...u,feesPaid:g,feesDue:Math.max(0,w-g),totalFees:w};if(u.feesPaid!==k.feesPaid||u.feesDue!==k.feesDue||u.totalFees!==k.totalFees){console.log(`Updating student fees for ${e}:`,k);const B=await ac(u.id,k);return console.log(`Student fees update result for ${e}:`,B),i[h]=k,console.log(`Student fees updated for ${e}: Paid=${g}, Due=${k.feesDue}`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:JSON.stringify(i)})),window.dispatchEvent(new Event("studentsUpdated")),B}return console.log(`No fee changes for student ${e}`),u}catch(i){throw console.error("Error updating student fees:",i),i}}async getPaymentStatistics(){try{const e=await this.getPayments(),t=await this.getStudents(),i=e.filter(k=>k&&k.amount!==void 0&&k.amount!==null&&!isNaN(parseFloat(k.amount)));let o=0,u=0,h=0,p=0;i.forEach(k=>{const O=parseFloat(k.amount)||0;if(O>0)switch(k.status){case"paid":o+=O;break;case"pending":u+=O;break;case"overdue":h+=O;break;default:u+=O}});let g=0,y=0,E=0;t.forEach(k=>{const O=parseFloat(k.feesPaid)||0,B=parseFloat(k.feesDue)||0,P=O+B;y+=O,g+=B,E+=P,P>0&&p++});const w=o+u+h,b=y+g;return{totalStudents:t.length,totalStudentsWithPayments:p,totalCollected:o,totalPending:u,totalOverdue:h,totalStudentPending:g,totalStudentPaid:y,totalStudentFees:E,paymentBasedTotal:w,studentBasedTotal:b,consistencyCheck:{paymentTotal:w,studentTotal:b,difference:Math.abs(w-b)}}}catch(e){return console.error("Error getting payment statistics:",e),{totalStudents:0,totalStudentsWithPayments:0,totalCollected:0,totalPending:0,totalOverdue:0,totalStudentPending:0,totalStudentPaid:0,totalStudentFees:0,paymentBasedTotal:0,studentBasedTotal:0,consistencyCheck:{paymentTotal:0,studentTotal:0,difference:0}}}}async recalculateAllStudentFees(){try{console.log("Recalculating all student fees...");const e=await this.getStudents(),t=await this.getPayments(),i={};t.forEach(u=>{u.studentId&&(i[u.studentId]||(i[u.studentId]=[]),i[u.studentId].push(u))});let o=0;for(const u of e){const h=u.studentId||u.id,p=i[h]||[];let g=0,y=0,E=0;p.forEach(B=>{const P=parseFloat(B.amount)||0;if(P>0)switch(B.status){case"paid":g+=P;break;case"pending":y+=P;break;case"overdue":E+=P;break;default:y+=P}});const w=parseFloat(u.totalFees)||0,b=g+y+E,k={...u,feesPaid:g,feesDue:Math.max(0,w-g),totalFees:w};if(u.feesPaid!==k.feesPaid||u.feesDue!==k.feesDue||u.totalFees!==k.totalFees)try{await ac(u.id,k),o++,console.log(`Updated fees for student ${h}: Paid=${g}, Due=${k.feesDue}`)}catch(B){console.error(`Error updating fees for student ${h}:`,B)}}return o>0?(console.log(`Recalculated fees for ${o} students`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:Date.now().toString()})),window.dispatchEvent(new Event("studentsUpdated")),{success:!0,studentsUpdated:o,totalStudents:e.length}):(console.log("No fee changes needed for any students"),{success:!0,studentsUpdated:0,totalStudents:e.length})}catch(e){throw console.error("Error recalculating all student fees:",e),e}}async syncStudentDataToPayments(e){try{console.log(`Syncing student data to payments for student ID: ${e}`);const t=await this.getStudentById(e);if(!t){console.warn(`Student with ID ${e} not found for sync`);return}const i=await this.getPayments();let o=0;const u=i.map(h=>{if(h.studentId===e){const p={...h,studentName:t.name,studentClass:t.class,studentContact:t.contact};return JSON.stringify(h)!==JSON.stringify(p)&&o++,p}return h});return o>0&&(this.savePayments(u),console.log(`Updated ${o} payments with student information`),window.dispatchEvent(new StorageEvent("storage",{key:this.paymentsKey,newValue:JSON.stringify(u)}))),o}catch(t){throw console.error("Error syncing student data to payments:",t),t}}async syncPaymentDataToStudents(e){try{console.log(`Syncing payment data to students for payment ID: ${e}`);const i=(await this.getPayments()).find(u=>u.id===e);if(!i){console.warn(`Payment with ID ${e} not found for sync`);return}return await this.updateStudentFees(i.studentId,0)}catch(t){throw console.error("Error syncing payment data to students:",t),t}}async updateStudentFeesAfterPaymentUpdate(e,t){try{const i=await this.getStudents(),o=await this.getStudentById(e);if(!o)return console.warn(`Student with ID ${e} not found for fee update`),null;if(i.findIndex(O=>O.id==o.id||O.studentId==o.studentId)===-1)return console.warn(`Student index not found for ID ${e}`),null;const p=(await this.getPayments()).filter(O=>O.studentId==e);let g=0,y=0,E=0;p.forEach(O=>{const B=parseFloat(O.amount)||0;if(B>0)switch(O.status){case"paid":g+=B;break;case"pending":y+=B;break;case"overdue":E+=B;break;default:y+=B}});const w=g+y+E,b={...o,feesPaid:g,feesDue:y+E,totalFees:w};if(o.feesPaid!==b.feesPaid||o.feesDue!==b.feesDue||o.totalFees!==b.totalFees){const O=await ac(o.id,b);return console.log(`Student fees updated for ${e}: Paid=${g}, Due=${y+E}`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:JSON.stringify(i)})),window.dispatchEvent(new Event("studentsUpdated")),O}return console.log(`No fee changes for student ${e}`),o}catch(i){return console.error("Error updating student fees after payment update:",i),null}}async bidirectionalSync(e,t){try{switch(console.log(`Performing bidirectional sync for ${e} with ID: ${t}`),e){case"student":await this.syncStudentDataToPayments(t);break;case"payment":await this.syncPaymentDataToStudents(t);break;default:console.warn(`Unknown entity type for bidirectional sync: ${e}`)}}catch(i){throw console.error("Error in bidirectional sync:",i),i}}async syncAllData(){try{console.log("Starting comprehensive data synchronization...");const e=await this.getStudents(),t=await this.getPayments();console.log(`Found ${e.length} students and ${t.length} payments`);const i={};e.forEach(g=>{i[g.studentId||g.id]=g});let o=0,u=0;const h=t.map(g=>{const y=i[g.studentId];if(y){const E={...g,studentName:y.name,studentClass:y.class,studentContact:y.contact};if(JSON.stringify(g)!==JSON.stringify(E))return o++,E}return g});return o>0&&(this.savePayments(h),console.log(`Updated ${o} payments with student information`)),u=(await this.recalculateAllStudentFees()).studentsUpdated,(o>0||u>0)&&window.dispatchEvent(new StorageEvent("storage",{key:"feesManagementSync",newValue:Date.now().toString()})),console.log("Comprehensive data synchronization completed successfully"),{paymentsUpdated:o,studentsUpdated:u,totalPayments:h.length,totalStudents:e.length}}catch(e){throw console.error("Error in comprehensive data synchronization:",e),e}}async getStaff(){if(this.useFirebase&&dt())try{const e=await EM();return console.log("Fetched staff from Firebase:",e),e}catch(e){throw console.error("Failed to get staff from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addStaff(e){if(this.useFirebase&&dt())try{const t={...e,staffId:e.staffId||`STF${String(Date.now()).slice(-4)}`,createdAt:e.createdAt||new Date().toISOString()};delete t.id;const i=await vM(t);return console.log("Staff added result:",i),window.dispatchEvent(new Event("staffUpdated")),i}catch(t){throw console.error("Failed to add staff to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStaff(e){if(this.useFirebase&&dt())try{const t=await _M(e.id,e);return console.log("Staff update result:",t),window.dispatchEvent(new Event("staffUpdated")),t}catch(t){throw console.error("Failed to update staff in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteStaff(e){if(this.useFirebase&&dt())try{return await SM(e),window.dispatchEvent(new Event("staffDeleted")),e}catch(t){throw console.error("Failed to delete staff from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getStaffAttendance(){if(this.useFirebase&&dt())try{const e=await TM();return console.log("Fetched staff attendance from Firebase:",e),e}catch(e){throw console.error("Failed to get staff attendance from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addStaffAttendance(e){if(this.useFirebase&&dt())try{const t=await wM(e);return console.log("Staff attendance added result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to add staff attendance to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStaffAttendance(e){if(this.useFirebase&&dt())try{if(!e||!e.id)throw new Error("Valid attendance record with ID is required for update operation");const t=await xM(e.id,e);return console.log("Staff attendance update result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to update staff attendance in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteStaffAttendance(e){if(this.useFirebase&&dt())try{if(!e)throw new Error("Valid attendance ID is required for delete operation");return await bM(e),window.dispatchEvent(new Event("attendanceDeleted")),e}catch(t){throw console.error("Failed to delete staff attendance from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getAttendance(){if(this.useFirebase&&dt())try{const e=await fM();return console.log("Fetched attendance from Firebase:",e),e}catch(e){throw console.error("Failed to get attendance from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addAttendance(e){if(this.useFirebase&&dt())try{const t=await hM(e);return console.log("Attendance added result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to add attendance to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateAttendance(e){if(this.useFirebase&&dt())try{const t=await mM(e.id,e);return console.log("Attendance update result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to update attendance in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteAttendance(e){if(this.useFirebase&&dt())try{return await pM(e),window.dispatchEvent(new Event("attendanceDeleted")),e}catch(t){throw console.error("Failed to delete attendance from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getExpenditures(){if(this.useFirebase&&dt())try{return await Gg()}catch(e){throw console.warn("Failed to get expenditures from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addExpenditure(e){if(this.useFirebase&&dt())try{const t=await cM(e);return console.log("Expenditure added result:",t),window.dispatchEvent(new Event("expenditureUpdated")),t}catch(t){throw console.error("Failed to add expenditure to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateExpenditure(e){if(this.useFirebase&&dt())try{const t=await uM(e.id,e);return console.log("Expenditure update result:",t),window.dispatchEvent(new Event("expenditureUpdated")),t}catch(t){throw console.error("Failed to update expenditure in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteExpenditure(e){if(this.useFirebase&&dt())try{return await dM(e),window.dispatchEvent(new Event("expenditureDeleted")),e}catch(t){throw console.error("Failed to delete expenditure from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}}const pt=new jM,kM=()=>{const[s,e]=I.useState([]),[t,i]=I.useState([]),[o,u]=I.useState(!0),[h,p]=I.useState(!1),[g,y]=I.useState(null),[E,w]=I.useState({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),[b,k]=I.useState(""),[O,B]=I.useState("name"),[P,K]=I.useState("asc"),[V,Q]=I.useState([]),[X,pe]=I.useState(""),[ee,N]=I.useState(""),[A,x]=I.useState(!1),[j,M]=I.useState(""),[U,D]=I.useState(!1),Ie=vs();I.useEffect(()=>{ze();const de=()=>{ze()};return window.addEventListener("studentsUpdated",de),()=>{window.removeEventListener("studentsUpdated",de)}},[]),I.useEffect(()=>{q()},[s,b,O,P,ee]);const ze=async()=>{try{const de=await pt.getStudents();e(de),u(!1)}catch(de){console.error("Error fetching students:",de),u(!1)}},q=()=>{let de=[...s];b&&(de=de.filter(ae=>ae.name.toLowerCase().includes(b.toLowerCase())||ae.class.toLowerCase().includes(b.toLowerCase())||ae.studentId.toLowerCase().includes(b.toLowerCase())||ae.contact&&ae.contact.includes(b)||ae.email&&ae.email.toLowerCase().includes(b.toLowerCase()))),ee&&(de=de.filter(ae=>ae.class.toLowerCase()===ee.toLowerCase())),de.sort((ae,$)=>{let ye,me;switch(O){case"name":ye=ae.name.toLowerCase(),me=$.name.toLowerCase();break;case"class":ye=ae.class.toLowerCase(),me=$.class.toLowerCase();break;case"pending":ye=(ae.totalFees||0)-(ae.feesPaid||0),me=($.totalFees||0)-($.feesPaid||0);break;case"status":ye=Je(ae),me=Je($);break;default:ye=ae[O],me=$[O]}return typeof ye=="string"?P==="asc"?ye.localeCompare(me):me.localeCompare(ye):P==="asc"?ye-me:me-ye}),i(de)},re=de=>{const{name:ae,value:$}=de.target;if(ae==="totalFees"||ae==="feesPaid"){if($===""||$===null||$===void 0){w(me=>({...me,[ae]:""}));return}const ye=parseFloat($);if(!isNaN(ye))w(me=>({...me,[ae]:$}));else return}else w(ye=>({...ye,[ae]:$}))},xe=async de=>{if(de.preventDefault(),console.log("=== HANDLE SUBMIT START ==="),U){console.log("Form is already submitting, ignoring duplicate submission");return}D(!0);try{if(console.log("Form data before processing:",E),console.log("Editing student:",g),console.log("Is editing student:",!!g),console.log("Editing student ID:",g?.id),console.log("Editing student studentId:",g?.studentId),!E.name||!E.class||E.totalFees===""||E.totalFees===void 0){const H="Please fill in all required fields: Name, Class, and Total Fees";console.log("Validation error:",H),alert(H),D(!1);return}const ae=parseFloat(E.totalFees),$=parseFloat(E.feesPaid)||0;if(console.log("Parsed values:",{totalFees:ae,feesPaid:$}),isNaN(ae)||ae<0){const H="Please enter a valid total fees amount (must be a positive number)";console.log("Validation error:",H),alert(H),D(!1);return}if(isNaN($)||$<0){const H="Please enter a valid fees paid amount (must be a positive number or zero)";console.log("Validation error:",H),alert(H),D(!1);return}if($>ae){const H="Fees paid cannot exceed total fees";console.log("Validation error:",H),alert(H),D(!1);return}const ye={...E,totalFees:ae,feesPaid:$,feesDue:ae-$};console.log("Student data to save:",ye),g?(console.log("Updating existing student"),await pt.updateStudent(g.id,ye)):(console.log("Adding new student"),await pt.addStudent(ye)),p(!1),y(null),w({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),await ze();const me=g?"Student updated successfully!":"Student added successfully!";window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:me}})),console.log("=== HANDLE SUBMIT END SUCCESS ===")}catch(ae){console.error("Error saving student:",ae),alert("Error saving student. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error saving student. Please try again."}})),console.log("=== HANDLE SUBMIT END ERROR ===")}finally{D(!1)}},ve=()=>{y(null),w({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),p(!0)},z=de=>{console.log("Editing student:",de),y(de),w({name:de.name||"",class:de.class||"",contact:de.contact||"",email:de.email||"",address:de.address||"",fatherName:de.fatherName||"",motherName:de.motherName||"",totalFees:de.totalFees!==void 0?de.totalFees.toString():"",feesPaid:de.feesPaid!==void 0?de.feesPaid.toString():""}),p(!0)},R=async de=>{if(window.confirm("Are you sure you want to delete this student? This action cannot be undone."))try{await pt.deleteStudent(de),await ze(),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Student deleted successfully!"}}))}catch(ae){console.error("Error deleting student:",ae),alert("Error deleting student. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error deleting student. Please try again."}}))}},G=de=>{Q(ae=>ae.includes(de)?ae.filter($=>$!==de):[...ae,de])},ce=()=>{V.length===t.length?Q([]):Q(t.map(de=>de.id))},_e=de=>{O===de?K(P==="asc"?"desc":"asc"):(B(de),K("asc"))},oe=async()=>{if(X)if(X==="delete"){if(window.confirm(`Are you sure you want to delete ${V.length} selected student(s)? This action cannot be undone.`))try{for(const de of V)await pt.deleteStudent(de);Q([]),pe(""),await ze(),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:`${V.length} student(s) deleted successfully!`}}))}catch(de){console.error("Error deleting students:",de),alert("Error deleting students. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error deleting students. Please try again."}}))}}else X==="export"&&Ce()},Ce=()=>{const de=[["Name","Class","Contact","Email","Address","Father Name","Mother Name","Total Fees","Fees Paid","Fees Due"],...t.map(me=>[me.name,me.class,me.contact||"",me.email||"",me.address||"",me.fatherName||"",me.motherName||"",me.totalFees||0,me.feesPaid||0,(me.totalFees||0)-(me.feesPaid||0)])].map(me=>me.join(",")).join(`
`),ae=new Blob([de],{type:"text/csv;charset=utf-8;"}),$=URL.createObjectURL(ae),ye=document.createElement("a");ye.setAttribute("href",$),ye.setAttribute("download","students_export.csv"),ye.style.visibility="hidden",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)},Me=de=>{Ie("/student-details",{state:{student:de}})},Je=de=>{const ae=parseFloat(de.totalFees)||0,$=parseFloat(de.feesPaid)||0,ye=ae-$;return $===0?"Not Started":ye<=0?"Paid":"Pending"};return o?c.jsx("div",{className:"loading",children:"Loading students..."}):c.jsxs("div",{className:"students-container",children:[c.jsxs("div",{className:"students-header",children:[c.jsx("div",{className:"header-left",children:c.jsx("h1",{children:"Students Management"})}),c.jsx("div",{className:"header-right",children:c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{className:"add-btn",onClick:ve,children:"+ Add Student"}),c.jsx("button",{className:"export-btn",onClick:Ce,children:" Export"})]})})]}),c.jsxs("div",{className:"search-filters",children:[c.jsxs("div",{className:"search-container",children:[c.jsx("input",{type:"text",placeholder:"Search students by name, class, ID, contact or email...",className:"search-input",value:b,onChange:de=>k(de.target.value)}),c.jsx("span",{className:"search-icon",children:""})]}),c.jsx("div",{className:"filter-container",children:c.jsxs("button",{className:`filter-btn ${ee?"active":""}`,onClick:()=>{M(ee),x(!0)},children:["Filter ",ee&&`(${ee})`,ee&&c.jsx("span",{className:"clear-filter",onClick:de=>{de.stopPropagation(),N("")},children:""})]})}),t.length>0&&c.jsx("div",{className:"bulk-actions-container",children:c.jsxs("div",{className:"bulk-actions",children:[c.jsx("input",{type:"checkbox",checked:V.length===t.length&&t.length>0,onChange:ce,className:"select-all-checkbox"}),c.jsx("span",{className:"bulk-label",children:V.length>0?`${V.length} selected`:"Select all"}),V.length>0&&c.jsxs("div",{className:"bulk-action-controls",children:[c.jsxs("select",{value:X,onChange:de=>pe(de.target.value),className:"bulk-action-select",children:[c.jsx("option",{value:"",children:"Choose action..."}),c.jsx("option",{value:"delete",children:"Delete Selected"}),c.jsx("option",{value:"export",children:"Export Selected"})]}),c.jsx("button",{onClick:oe,disabled:!X,className:"bulk-action-btn",children:"Apply"})]})]})})]}),h&&c.jsx("div",{className:"form-overlay",children:c.jsxs("div",{className:"form-container",children:[c.jsxs("div",{className:"form-header",children:[c.jsx("h2",{children:g?"Edit Student":"Add New Student"}),c.jsx("button",{className:"close-btn",onClick:()=>p(!1),children:""})]}),c.jsxs("form",{onSubmit:xe,children:[c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Name *"}),c.jsx("input",{type:"text",name:"name",value:E.name,onChange:re,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Class *"}),c.jsxs("select",{name:"class",value:E.class,onChange:re,required:!0,children:[c.jsx("option",{value:"",children:"Select Class"}),c.jsx("option",{value:"Nursery",children:"Nursery"}),c.jsx("option",{value:"LKG",children:"LKG"}),c.jsx("option",{value:"UKG",children:"UKG"}),c.jsx("option",{value:"1st",children:"1st"}),c.jsx("option",{value:"2nd",children:"2nd"}),c.jsx("option",{value:"3rd",children:"3rd"}),c.jsx("option",{value:"4th",children:"4th"}),c.jsx("option",{value:"5th",children:"5th"}),c.jsx("option",{value:"6th",children:"6th"}),c.jsx("option",{value:"7th",children:"7th"}),c.jsx("option",{value:"8th",children:"8th"}),c.jsx("option",{value:"9th",children:"9th"}),c.jsx("option",{value:"10th",children:"10th"}),c.jsx("option",{value:"11th",children:"11th"}),c.jsx("option",{value:"12th",children:"12th"})]})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Contact"}),c.jsx("input",{type:"text",name:"contact",value:E.contact,onChange:re,placeholder:"Phone number"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",name:"email",value:E.email,onChange:re,placeholder:"Email address"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Address"}),c.jsx("textarea",{name:"address",value:E.address,onChange:re,placeholder:"Full address",className:"address-input",rows:"3"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Father's Name"}),c.jsx("input",{type:"text",name:"fatherName",value:E.fatherName,onChange:re})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Mother's Name"}),c.jsx("input",{type:"text",name:"motherName",value:E.motherName,onChange:re})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Total Fees () *"}),c.jsx("input",{type:"number",name:"totalFees",value:E.totalFees,onChange:re,required:!0,min:"0",step:"0.01"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Fees Paid () *"}),c.jsx("input",{type:"number",name:"feesPaid",value:E.feesPaid,onChange:re,required:!0,min:"0",step:"0.01"})]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:()=>p(!1),disabled:U,children:"Cancel"}),c.jsx("button",{type:"submit",className:"save-btn",disabled:U,children:U?"Saving...":g?"Update Student":"Add Student"})]})]})]})}),A&&c.jsx("div",{className:"form-overlay",children:c.jsxs("div",{className:"form-container filter-modal",children:[c.jsxs("div",{className:"form-header",children:[c.jsx("h2",{children:"Filter by Class"}),c.jsx("button",{className:"close-btn",onClick:()=>x(!1),children:""})]}),c.jsxs("div",{className:"filter-content",children:[c.jsx("div",{className:"filter-options",children:["Nursery","LKG","UKG","1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"].map(de=>c.jsx("div",{className:`filter-option ${j===de?"active":""}`,onClick:()=>M(j===de?"":de),children:de},de))}),c.jsxs("div",{className:"filter-actions",children:[c.jsx("button",{className:"clear-btn",onClick:()=>{M(""),N(""),x(!1)},children:"Clear"}),c.jsx("button",{className:"save-btn",onClick:()=>{N(j),x(!1)},children:"Apply Filter"})]})]})]})}),c.jsx("div",{className:"students-table-container",children:c.jsxs("table",{className:"students-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{className:"checkbox-header",children:c.jsx("input",{type:"checkbox",checked:V.length===t.length&&t.length>0,onChange:ce})}),c.jsxs("th",{onClick:()=>_e("name"),children:["Name ",O==="name"&&(P==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>_e("class"),children:["Class ",O==="class"&&(P==="asc"?"":"")]}),c.jsx("th",{children:"Contact"}),c.jsx("th",{children:"Total Fees"}),c.jsx("th",{children:"Paid Fees"}),c.jsx("th",{children:"Pending Fees"}),c.jsxs("th",{onClick:()=>_e("status"),children:["Status ",O==="status"&&(P==="asc"?"":"")]}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:t.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"9",className:"no-data",children:"No students found. Add a new student to get started."})}):t.map(de=>{const ae={...de,status:Je(de)},$=(de.totalFees||0)-(de.feesPaid||0);return c.jsxs("tr",{className:"student-row",children:[c.jsx("td",{children:c.jsx("input",{type:"checkbox",checked:V.includes(de.id),onChange:()=>G(de.id),className:"student-checkbox"})}),c.jsx("td",{children:c.jsxs("div",{className:"student-info",children:[c.jsx("div",{className:"student-name",children:de.name}),c.jsx("div",{className:"student-id",children:de.studentId}),de.email&&c.jsx("div",{className:"student-email",children:de.email})]})}),c.jsx("td",{children:de.class}),c.jsx("td",{children:de.contact&&c.jsxs("div",{className:"contact-info",children:[c.jsx("div",{children:de.contact}),de.fatherName&&c.jsxs("div",{className:"parent-name",children:["Father: ",de.fatherName]})]})}),c.jsxs("td",{children:["",parseFloat(de.totalFees||0).toLocaleString()]}),c.jsxs("td",{children:["",parseFloat(de.feesPaid||0).toLocaleString()]}),c.jsxs("td",{className:"fee-pending",children:["",$.toLocaleString()]}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${ae.status.toLowerCase().replace(" ","-")}`,children:ae.status==="Pending"?" Pending":ae.status==="Paid"?" Paid":" Not Started"})}),c.jsx("td",{children:c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"view-btn",onClick:()=>Me(de),children:"View"}),c.jsx("button",{className:"edit-btn",onClick:()=>z(de),children:"Edit"}),c.jsx("button",{className:"delete-btn",onClick:()=>R(de.id),children:"Delete"})]})})]},de.id)})})]})})]})},MM=()=>{const s=vs(),e=ks(),[t,i]=I.useState(null),[o,u]=I.useState(!0),[h,p]=I.useState(null),[g,y]=I.useState([]),[E,w]=I.useState(!0),[b,k]=I.useState(null),[O,B]=I.useState(null),[P,K]=I.useState(!1),[V,Q]=I.useState(!1);I.useEffect(()=>{(async()=>{try{console.log("Testing Firebase Storage connection on component mount...");const re=await yM();console.log("Firebase Storage connection test result:",re)}catch(re){console.error("Error during storage connection test:",re)}})()},[]);const X=q=>{try{return q&&typeof q=="object"&&q.seconds!==void 0?new Date(q.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):q instanceof Date?q.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):typeof q=="string"?new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):typeof q=="number"?q>1e10?new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):new Date(q*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}catch(re){return console.error("Error formatting date:",re),"N/A"}},pe=q=>`${parseFloat(q||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,ee=async q=>{try{w(!0);const ve=(await pt.getPayments()).filter(z=>z.studentId===q).sort((z,R)=>{const G=z.createdAt instanceof Date?z.createdAt:new Date(z.createdAt?.seconds*1e3||z.createdAt);return(R.createdAt instanceof Date?R.createdAt:new Date(R.createdAt?.seconds*1e3||R.createdAt))-G});y(ve)}catch(re){console.error("Error fetching student payments:",re)}finally{w(!1)}};I.useEffect(()=>{(async()=>{try{u(!0);const re=e.state?.student;if(re)i(re),re.photoURL&&B(re.photoURL),ee(re.studentId||re.id);else{const ve=new URLSearchParams(window.location.search).get("id");if(ve){const z=await pt.getStudentById(ve);z?(i(z),z.photoURL&&B(z.photoURL),ee(ve)):p("Student not found")}else p("No student data provided")}}catch(re){console.error("Error fetching student details:",re),p("Error loading student details")}finally{u(!1)}})()},[e.state]),I.useEffect(()=>{const q=async()=>{try{const xe=t?.studentId||t?.id;if(xe){const ve=await pt.getStudentById(xe);ve&&(i(ve),ve.photoURL&&B(ve.photoURL),ee(xe))}}catch(xe){console.error("Error refreshing student details:",xe)}},re=xe=>{if(xe.detail&&xe.detail.student){const ve=xe.detail.student,z=t?.studentId||t?.id,R=ve.studentId||ve.id;z===R&&(i(ve),ve.photoURL&&B(ve.photoURL),ee(R))}};return window.addEventListener("studentsUpdated",q),window.addEventListener("studentUpdated",re),()=>{window.removeEventListener("studentsUpdated",q),window.removeEventListener("studentUpdated",re)}},[t]);const N=q=>{const re=parseFloat(q.totalFees)||0,xe=parseFloat(q.feesPaid)||0;return xe>=re?"Paid":xe>0?"Pending":"Not Started"},A=()=>{s("/students")},x=()=>{s("/students",{state:{editingStudent:t}})},j=async q=>{const re=q.target.files[0];if(console.log("File selected:",re),re){if(Q(!1),!re.type.startsWith("image/")){console.log("File type not supported:",re.type),alert("Please select an image file (JPEG, PNG, etc.)");return}if(re.size>5*1024*1024){console.log("File too large:",re.size),alert("File size exceeds 5MB limit");return}console.log("File validation passed");const xe=new FileReader;xe.onload=ve=>{console.log("File read complete"),B(ve.target.result)},xe.onerror=ve=>{console.error("Error reading file:",ve)},xe.readAsDataURL(re),k(re);try{if(console.log("Starting upload process..."),K(!0),!t)throw new Error("No student data available");console.log("Student data available:",t);const ve=String(t.studentId||t.id);if(console.log("Student ID for upload:",ve),!ve)throw new Error("No valid student ID available");console.log("Calling uploadStudentPhoto function...");const z=await gM(ve,re);console.log("Photo uploaded successfully:",z);const R={...t,photoURL:z};await pt.updateStudent(R),i(R),B(z),Q(!0),K(!1),setTimeout(()=>{Q(!1)},3e3)}catch(ve){console.error("Error uploading photo:",ve),console.error("Error details:",ve.message,ve.name,ve.stack),console.error("Full error object:",JSON.stringify(ve,null,2));let z="Error uploading photo. Please try again.";if(ve.code)switch(ve.code){case"storage/unauthorized":z="Unauthorized: Check your Firebase Storage permissions.";break;case"storage/canceled":z="Upload canceled.";break;case"storage/unknown":z="Unknown error occurred during upload.";break;default:z=`Error: ${ve.message||ve.code}`}else ve.message&&(z=`Error: ${ve.message}`);alert(z),K(!1)}}else console.log("No file selected")};if(o)return c.jsx("div",{className:"loading",children:"Loading student details..."});if(h)return c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-message",children:h}),c.jsx("button",{onClick:A,className:"back-button",children:"Back to Students"})]});if(!t)return c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-message",children:"No student data available"}),c.jsx("button",{onClick:A,className:"back-button",children:"Back to Students"})]});const M=N(t),U=(parseFloat(t.totalFees)||0)-(parseFloat(t.feesPaid)||0),D=parseFloat(t.totalFees)||0,Ie=parseFloat(t.feesPaid)||0,ze=D>0?Math.round(Ie/D*100):0;return c.jsxs("div",{className:"student-details-container",children:[c.jsxs("div",{className:"details-header",children:[c.jsx("div",{className:"header-left",children:c.jsx("h1",{children:"Student Profile"})}),c.jsx("div",{className:"header-right",children:c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{onClick:A,className:"back-button",children:" Back to Students"}),c.jsx("button",{onClick:x,className:"edit-button",children:"Edit Student"})]})})]}),c.jsxs("div",{className:"student-profile-card",children:[c.jsxs("div",{className:"student-header",children:[c.jsx("div",{className:"student-avatar-container",children:c.jsxs("div",{className:"photo-upload-section",children:[c.jsx("div",{className:"photo-preview",children:O?c.jsx("img",{src:O,alt:"Student",className:"student-photo-preview"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"photo-placeholder",children:""}),c.jsx("span",{className:"photo-label",children:"Upload Photo"})]})}),c.jsxs("label",{className:`upload-photo-btn ${P?"uploading":""}`,children:[P?"Uploading...":V?"Uploaded!":"Choose File",c.jsx("input",{type:"file",accept:"image/*",onChange:j,style:{display:"none"},disabled:P})]}),V&&c.jsx("div",{className:"upload-success-message",children:"Photo uploaded successfully!"})]})}),c.jsxs("div",{className:"student-basic-info",children:[c.jsx("h2",{children:t.name}),c.jsxs("div",{className:"student-id",children:["ID: ",t.studentId||t.id]}),c.jsxs("div",{className:"student-class",children:["Class: ",t.class]}),c.jsx("span",{className:`status-badge status-${M.toLowerCase().replace(" ","-")}`,children:M==="Pending"?" Pending":M==="Paid"?" Paid":" Not Started"})]})]}),c.jsxs("div",{className:"summary-cards",children:[c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Total Fees"}),c.jsx("div",{className:"summary-card-value fee-total",children:pe(D)})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Fees Paid"}),c.jsx("div",{className:"summary-card-value fee-paid",children:pe(Ie)})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Pending Fees"}),c.jsx("div",{className:"summary-card-value fee-pending",children:pe(U)})]}),t.feesStructure&&c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Fee Structure"}),c.jsx("div",{className:"summary-card-value fee-structure",children:t.feesStructure})]})]}),c.jsxs("div",{className:"payment-progress-section",children:[c.jsx("h3",{children:"Payment Progress"}),c.jsxs("div",{className:"progress-container",children:[c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${ze}%`}})}),c.jsxs("div",{className:"progress-text",children:[ze,"% Complete"]})]})]}),c.jsxs("div",{className:"personal-info-section",children:[c.jsx("h3",{children:"Personal Information"}),c.jsxs("div",{className:"personal-info-content",children:[c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Student Details"}),c.jsxs("div",{className:"student-details-grid",children:[c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Full Name"}),c.jsx("span",{children:t.name})]}),c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Student ID"}),c.jsx("span",{children:t.studentId||t.id})]}),c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Class"}),c.jsx("span",{children:t.class})]}),t.feesStructure&&c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Fee Structure"}),c.jsx("span",{children:t.feesStructure})]})]})]}),t.address&&c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Address Information"}),c.jsxs("div",{className:"address-detail-item",children:[c.jsx("label",{children:"Address"}),c.jsx("span",{className:"address-value",children:t.address})]})]}),c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Contact Information"}),c.jsxs("div",{className:"contact-info-grid",children:[c.jsxs("div",{className:"contact-detail-item",children:[c.jsx("label",{children:"Contact Number"}),c.jsx("span",{children:t.contact||"N/A"})]}),t.email&&c.jsxs("div",{className:"contact-detail-item",children:[c.jsx("label",{children:"Email Address"}),c.jsx("span",{children:t.email})]})]})]}),(t.fatherName||t.motherName)&&c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Family Information"}),c.jsxs("div",{className:"family-info-grid",children:[t.fatherName&&c.jsxs("div",{className:"family-detail-item",children:[c.jsx("label",{children:"Father's Name"}),c.jsx("span",{children:t.fatherName})]}),t.motherName&&c.jsxs("div",{className:"family-detail-item",children:[c.jsx("label",{children:"Mother's Name"}),c.jsx("span",{children:t.motherName})]})]})]})]})]}),c.jsxs("div",{className:"system-info-section",children:[c.jsx("h3",{children:"System Information"}),c.jsx("div",{className:"system-info-content",children:c.jsxs("div",{className:"system-grid",children:[c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Created At"}),c.jsx("span",{children:t.createdAt?X(t.createdAt):"N/A"})]}),c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Last Updated"}),c.jsx("span",{children:t.updatedAt?X(t.updatedAt):"N/A"})]}),c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Database ID"}),c.jsx("span",{children:t.id})]}),t.studentId&&t.id!==t.studentId&&c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Student ID (Display)"}),c.jsx("span",{children:t.studentId})]})]})})]}),c.jsxs("div",{className:"details-section",children:[c.jsx("h3",{children:"Payment History"}),E?c.jsx("div",{className:"loading",children:"Loading payment history..."}):g.length===0?c.jsx("div",{className:"no-payments",children:"No payment history available"}):c.jsx("div",{className:"payments-table",children:c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Description"}),c.jsx("th",{children:"Amount"}),c.jsx("th",{children:"Status"})]})}),c.jsx("tbody",{children:g.map(q=>c.jsxs("tr",{children:[c.jsx("td",{children:X(q.createdAt)}),c.jsx("td",{children:q.description||"Payment"}),c.jsx("td",{className:"amount",children:pe(q.amount)}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${q.status}`,children:q.status==="paid"?" Paid":q.status==="pending"?" Pending":" Overdue"})})]},q.id))})]})})]})]})]})},PM=()=>{const[s,e]=I.useState([]),[t,i]=I.useState([]),[o,u]=I.useState([]),[h,p]=I.useState(!0),[g,y]=I.useState(!1),[E,w]=I.useState(null),[b,k]=I.useState(""),[O,B]=I.useState("all"),[P,K]=I.useState("all"),[V,Q]=I.useState({studentId:"",amount:"",dueDate:"",description:"",method:"Cash"}),[X,pe]=I.useState("Your Academy"),[ee,N]=I.useState(""),[A,x]=I.useState("Chinchpada, Airoli, Navi Mumbai - 400708"),[j,M]=I.useState(""),[U,D]=I.useState(""),[Ie,ze]=I.useState(!1),[q,re]=I.useState(!1),xe=$=>{if(!$)return"N/A";if($ instanceof We)return $.toDate().toLocaleDateString();if(typeof $=="string"){if($.match(/^\d{4}-\d{2}-\d{2}$/)){const[me,H,ne]=$.split("-");return new Date(me,H-1,ne).toLocaleDateString()}const ye=new Date($);if(!isNaN(ye.getTime()))return ye.toLocaleDateString()}return $ instanceof Date&&!isNaN($.getTime())?$.toLocaleDateString():String($)};I.useEffect(()=>{ve(),Ce();const $=ne=>{const{message:Se}=ne.detail;console.log("Success:",Se),alert(Se)},ye=()=>{y(!1),w(null)},me=()=>{ve()},H=()=>{ve()};return window.addEventListener("showSuccess",$),window.addEventListener("navigateBack",ye),window.addEventListener("studentsUpdated",me),window.addEventListener("paymentAdded",H),()=>{window.removeEventListener("showSuccess",$),window.removeEventListener("navigateBack",ye),window.removeEventListener("studentsUpdated",me),window.removeEventListener("paymentAdded",H)}},[]),I.useEffect(()=>{z()},[t,b,O,P]);const ve=async()=>{try{const[$,ye]=await Promise.all([Mh(),qc()]);e($),i(ye),p(!1)}catch($){console.error("Error fetching data:",$),p(!1)}},z=()=>{let $=[...t];b&&($=$.filter(ye=>ye.studentName.toLowerCase().includes(b.toLowerCase())||ye.description.toLowerCase().includes(b.toLowerCase())||ye.studentId.toLowerCase().includes(b.toLowerCase()))),O!=="all"&&($=$.filter(ye=>ye.studentId===O)),P!=="all"&&($=$.filter(ye=>new Date(ye.dueDate).toLocaleString("default",{month:"long",year:"numeric"})===P)),$.sort((ye,me)=>{const H=ye.createdAt?new Date(ye.createdAt):new Date(0),ne=me.createdAt?new Date(me.createdAt):new Date(0);return!isNaN(H.getTime())&&!isNaN(ne.getTime())?ne-H:isNaN(H.getTime())?isNaN(ne.getTime())?0:1:-1}),u($)},R=async $=>{const{name:ye,value:me}=$.target,H=ne=>{if(!ne)return"";const Se=new Date(ne);return isNaN(Se.getTime())?"":Se.getFullYear()+"-"+String(Se.getMonth()+1).padStart(2,"0")+"-"+String(Se.getDate()).padStart(2,"0")};if(ye==="dueDate"&&me){const ne=H(me);Q(Se=>({...Se,[ye]:ne}));return}if(Q(ne=>({...ne,[ye]:me})),ye==="amount"&&me&&V.studentId){const ne=await pt.getStudentById(V.studentId);if(ne){const Se=parseFloat(me)||0,Ne=parseFloat(ne.totalFees)||0,Te=parseFloat(ne.feesPaid)||0;let be=Ne-Te;if(E){const le=parseFloat(E.amount)||0;be=Ne-Te+le}ze(Se>be)}}if(ye==="studentId"&&V.amount&&me){const ne=await pt.getStudentById(me);if(ne){const Se=parseFloat(V.amount)||0,Ne=parseFloat(ne.totalFees)||0,Te=parseFloat(ne.feesPaid)||0;let be=Ne-Te;if(E){const le=parseFloat(E.amount)||0;be=Ne-Te+le}ze(Se>be)}}},G=async $=>{if($.preventDefault(),!q){re(!0);try{await ce(V.studentId,V.amount,V.dueDate,V.description,E?E.id:null)&&(Q({studentId:"",amount:"",dueDate:"",description:""}),w(null),y(!1))}catch(ye){console.error("Error saving payment:",ye),alert("Error saving payment. Please try again.")}finally{re(!1)}}};async function ce($,ye,me,H,ne=null){const Se=Te=>{if(Te==null)return 0;const be=parseFloat(Te);return Number.isFinite(be)?be:0},Ne=Te=>{if(!Te)return"";const be=Te instanceof Date?Te:new Date(Te);return isNaN(be.getTime())?"":be.getFullYear()+"-"+String(be.getMonth()+1).padStart(2,"0")+"-"+String(be.getDate()).padStart(2,"0")};try{if(console.log("[FIX] start add/edit payment"),console.log("[FIX] Parameters:",{selectedStudentId:$,paymentAmountRaw:ye,dueDateRaw:me,descriptionRaw:H,editingPaymentId:ne}),!$)return console.log("[FIX] Validation failed: No student selected"),alert("Select a student"),!1;const Te=Se(ye);if(Te<=0)return console.log("[FIX] Validation failed: Invalid amount",ye),alert("Enter valid amount"),!1;console.log("[FIX] Fetching student with ID:",$);const be=await pt.getStudentById($);if(console.log("[FIX] Student fetched:",be),!be)return console.error("[FIX] student not found",$),alert("Student not found"),!1;const le=Se(be.totalFees),we=Se(be.feesPaid),qe=Se(be.feesDue);console.log("[FIX] Student numeric fields:",{totalFees:le,feesPaid:we,feesDue:qe});const Ze=le-we;if(Te>Ze)return console.log("[FIX] Validation failed: Amount exceeds remaining fees",{amount:Te,totalFees:le,feesPaid:we,maxAllowedAmount:Ze}),alert(`Payment amount (${Te}) exceeds the remaining fees balance (${Ze}). Maximum allowed amount is ${Ze}.`),!1;const Ue=we,ht=we+Te,qt=Math.max(0,ht),dn=Math.max(0,le-qt);console.log("[FIX] Student fees calculations:",{oldFeesPaid:Ue,newFeesPaid:ht,finalFeesPaid:qt,finalFeesDue:dn,amountAdded:Te,totalFees:le,feesPaid:we});let Nt="Pending";console.log("[FIX] Determining student status with:",{finalFeesPaid:qt,totalFees:le,finalFeesDue:dn}),qt===0?Nt="Not Started":le>0&&qt>=le?Nt="Paid":dn>0&&(Nt="Pending"),console.log("[FIX] Student status set to:",Nt);const Rt={...be,totalFees:le,feesPaid:qt,feesDue:dn,status:Nt,updatedAt:We.now()};console.log("[FIX] Updated student object:",Rt),console.log("[FIX] Student ID for update:",Rt.id||Rt.studentId),console.log("[FIX] Saving student:",Rt);const Gn=await pt.updateStudent(Rt);if(console.log("[FIX] Student saved result:",Gn),!Gn)return console.error("[FIX] saveStudent failed",Rt),alert("Failed to save student. Check console."),!1;console.log("[FIX] student saved");const pa=Ne(new Date),Ge=me?Ne(me):"";let Pe={studentId:$,amount:Te,dueDate:Ge,description:H||"",createdAt:We.now(),status:"paid",studentName:be.name,studentClass:be.class,paidDate:We.now(),method:V.method||"Cash",receipt:`RCT-${Date.now()}`};if(!Pe.studentId||!Pe.studentName||!Pe.studentClass)return console.error("[FIX] Missing required student information:",Pe),alert("Missing required student information. Please try again."),!1;if(!Pe.amount||Pe.amount<=0)return console.error("[FIX] Invalid payment amount:",Pe.amount),alert("Invalid payment amount. Please enter a valid amount."),!1;console.log("[FIX] Payment object created:",Pe);let gt;if(ne){if(console.log("[FIX] Updating existing payment:",ne),Pe={...E,studentId:$,amount:Te,dueDate:Ge,description:H||"",studentName:be.name,studentClass:be.class,updatedAt:We.now(),status:E?.status||"paid",paidDate:E?.paidDate||We.now(),method:V.method||E?.method||"Cash",receipt:E?.receipt||`RCT-${Date.now()}`},!Pe.studentId||!Pe.studentName||!Pe.studentClass)return console.error("[FIX] Missing required student information:",Pe),alert("Missing required student information. Please try again."),!1;if(!Pe.amount||Pe.amount<=0)return console.error("[FIX] Invalid payment amount:",Pe.amount),alert("Invalid payment amount. Please enter a valid amount."),!1;try{gt=await Rp(ne,Pe),console.log("[FIX] Updating student fees for edited payment:",$);try{await pt.updateStudentFees($,Te),console.log("[FIX] Student fees updated successfully after edit")}catch(yt){console.error("[FIX] Failed to update student fees after edit:",yt),alert("Payment updated but failed to update student fees. Please refresh the page.")}}catch(yt){return console.error("[FIX] Failed to update payment:",yt),alert("Failed to update payment. Please check the console for details."),!1}}else{console.log("[FIX] Adding new payment");try{gt=await gx(Pe)}catch(yt){return console.error("[FIX] Failed to add payment:",yt),alert("Failed to add payment. Please check the console for details."),!1}}if(console.log("[FIX] Payment saved result:",gt),!gt)return console.error("[FIX] savePayment failed",Pe),alert("Failed to save payment. Check console."),!1;console.log("[FIX] payment saved",Pe),console.log("[FIX] Updating student fees for student:",$);try{await pt.updateStudentFees($,Te),console.log("[FIX] Student fees updated successfully")}catch(yt){console.error("[FIX] Failed to update student fees:",yt),alert("Payment saved but failed to update student fees. Please refresh the page.")}return await new Promise(yt=>setTimeout(yt,150)),console.log("[FIX] Refreshing UI"),await ve(),await new Promise(yt=>setTimeout(yt,50)),window.dispatchEvent(new Event("studentsUpdated")),window.dispatchEvent(new CustomEvent("dashboardRefresh")),window.dispatchEvent(new CustomEvent("paymentsRefresh")),window.dispatchEvent(new Event("paymentAdded")),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:ne?"Payment updated and student updated successfully":"Payment added and student updated successfully"}})),console.log("[FIX] done"),!0}catch(Te){return console.error("[FIX] exception:",Te),alert("Unexpected error. See console."),!1}}const _e=()=>{w(null),Q({studentId:"",amount:"",dueDate:"",description:"",method:"Cash"}),y(!0)},oe=async $=>{const ye=new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"});let me=null;try{me=await pt.getStudentById($.studentId)}catch(Ne){console.error("Error fetching student info for receipt:",Ne)}const ne=(Ne=>{const Te=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],be=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(Ne===0)return"Zero Rupees Only";let le="",we=Math.floor(Ne);return we>=1e5&&(le+=Te[Math.floor(we/1e5)]+" Lakh ",we%=1e5),we>=1e3&&(le+=Te[Math.floor(we/1e3)]+" Thousand ",we%=1e3),we>=100&&(le+=Te[Math.floor(we/100)]+" Hundred ",we%=100),we>=20&&(le+=be[Math.floor(we/10)]+" ",we%=10),we>0&&(le+=Te[we]),le.trim()+" Rupees Only"})(parseFloat($.amount||0)),Se=window.open("","_blank");Se.document.write(`
      <html>
        <head>
          <title>Fee Receipt - ${$.studentName}</title>
          <style>
            @media print {
              @page { margin: 0; }
              body { margin: 1.2cm; }
            }
            
            body { 
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
              max-width: 600px; 
              margin: 0 auto; 
              padding: 15px;
              color: var(--text-primary);
              line-height: 1.4;
              font-size: 14px;
            }
            
            .receipt-container {
              border: 1px solid var(--info-color); /* Blue for neutral info */
              border-radius: 8px;
              padding: 20px;
              box-shadow: 0 0 5px rgba(0,0,0,0.1);
            }
            
            .receipt-header {
              text-align: center;
              border-bottom: 2px double var(--info-color); /* Blue for neutral info */
              padding-bottom: 15px;
              margin-bottom: 20px;
            }
            
            .receipt-logo {
              max-width: 80px;
              height: auto;
              margin-bottom: 10px;
            }
            
            .school-logo {
              font-size: 20px;
              margin-bottom: 8px;
              color: var(--info-color); /* Blue for neutral info */
}

.school-name {
  font-size: 22px;
  font-weight: bold;
  color: var(--info-color-darker);
  margin: 4px 0;
}

.school-address {
  font-size: 14px;
  color: var(--text-secondary);
  margin-bottom: 12px;
}

.receipt-title {
  font-size: 18px;
  font-weight: bold;
  color: var(--danger-color); /* Red for alert/drop */
  margin: 15px 0;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.receipt-details {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
  margin-bottom: 20px;
}

.detail-item {
  display: flex;
  flex-direction: column;
}

.detail-label {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 3px;
}

.detail-value {
  font-weight: 600;
  color: var(--info-color); /* Blue for neutral info */
  font-size: 15px;
}

.amount-section {
  background: var(--bg-primary);
  padding: 15px;
  border-radius: 8px;
  margin: 20px 0;
}

.amount-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.amount-row.total {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  font-size: 16px;
  padding-top: 8px;
  border-top: 1px solid var(--border-color);
  margin-top: 8px;
}

.amount-in-words {
  margin: 20px 0;
  padding: 12px;
  background: var(--bg-primary);
  border-radius: 6px;
  font-style: italic;
}

.signature-section {
  display: flex;
  justify-content: space-between;
  margin-top: 40px;
  padding-top: 20px;
  border-top: 1px solid var(--border-color);
}

.signature-box {
  text-align: center;
  width: 45%;
}

.signature-line {
  margin-top: 40px;
  border-top: 1px solid var(--text-primary);
  padding-top: 5px;
}

/* Official Section for Signature and Stamp */
.official-section {
  margin: 30px 0 20px;
  padding: 20px 0;
  border-top: 1px solid var(--border-color);
}

.official-content {
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 20px;
}

.official-item {
  text-align: center;
  flex: 1;
  min-width: 120px;
}

.official-label {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 10px;
  font-weight: 600;
}

.official-image {
  max-width: 100px;
  max-height: 100px;
  object-fit: contain;
}

.signature-preview {
  /* Signature-specific styling if needed */
}

.stamp-preview {
  /* Stamp-specific styling if needed */
}

.footer {
  text-align: center;
  margin-top: 30px;
  font-size: 12px;
  color: var(--text-secondary);
}

.note {
  background: var(--warning-color-light);
  border: 1px solid var(--warning-color-border);
  border-radius: 6px;
  padding: 12px;
  margin: 20px 0;
  font-size: 13px;
}

@media (max-width: 500px) {
  .receipt-details {
    grid-template-columns: 1fr;
  }
  
  .signature-section {
    flex-direction: column;
    gap: 30px;
  }
  
  .signature-box {
    width: 100%;
  }
  
  .official-content {
    flex-direction: column;
    align-items: center;
    gap: 25px;
  }
  
  .official-item {
    width: 100%;
  }
}

          </style>
        </head>
        <body>
          <div class="receipt-container">
            <div class="receipt-header">
              <div class="school-logo"></div>
              <div class="school-name">${X}</div>
              <div class="school-address">${A}</div>
              <div class="receipt-title">Fee Receipt</div>
            </div>
            
            <div class="receipt-details">
              <div class="detail-item">
                <span class="detail-label">Receipt No.</span>
                <span class="detail-value">${$.id||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Date</span>
                <span class="detail-value">${ye}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Student Name</span>
                <span class="detail-value">${$.studentName||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Student ID</span>
                <span class="detail-value">${$.studentId||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Class</span>
                <span class="detail-value">${$.studentClass||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Description</span>
                <span class="detail-value">${$.description||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Payment Method</span>
                <span class="detail-value">${$.method||"Cash"}</span>
              </div>

              ${me?`
              <div class="detail-item">
                <span class="detail-label">Total Fees</span>
                <span class="detail-value">${parseFloat(me.totalFees||0).toFixed(2)}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Pending Fees</span>
                <span class="detail-value">${parseFloat(me.totalFees-me.feesPaid||0).toFixed(2)}</span>
              </div>
              `:""}
            </div>
            
            <div class="amount-section">
              <div class="amount-row">
                <span>Amount Paid:</span>
                <span>${parseFloat($.amount||0).toFixed(2)}</span>
              </div>
              <div class="amount-row total">
                <span>Total Amount Paid:</span>
                <span>${parseFloat($.amount||0).toFixed(2)}</span>
              </div>
            </div>
            
            <div class="amount-in-words">
              Amount in Words: ${ne}
            </div>
            
            <div class="note">
              <strong>Note:</strong> This is a computer-generated receipt and does not require a signature.
            </div>
            
            <div class="signature-section">
              <div class="signature-box">
                <div>Cashier Signature</div>
                <div class="signature-line"></div>
              </div>
              <div class="signature-box">
                <div>Parent/Guardian</div>
                <div class="signature-line"></div>
              </div>
            </div>
            
            <!-- Academy Signature and Stamp Section -->
            <div class="official-section">
              ${j||U?`
              <div class="official-content">
                ${j?`
                <div class="official-item">
                  <div class="official-label">Authorized Signature:</div>
                  <img src="${j}" alt="Authorized Signature" class="official-image signature-preview" />
                </div>
                `:""}
                ${U?`
                <div class="official-item">
                  <div class="official-label">Official Seal:</div>
                  <img src="${U}" alt="Official Stamp" class="official-image stamp-preview" />
                </div>
                `:""}
              </div>
              `:""}
            </div>
            
            <div class="footer">
              Thank you for your payment! For any queries, contact us at info@victorypointacademy.edu
            </div>
          </div>
          
          <script>
            window.onload = function() {
              window.print();
              // Close window after print dialog is closed
              setTimeout(function() { window.close(); }, 1000);
            };
          <\/script>
        </body>
      </html>
    `),Se.document.close()},Ce=()=>{if(dt())try{const $=Pt(),ye=un(rn,`users/${$}/settings/profile`),me=Pg(ye,H=>{if(H.exists()){const ne=H.data();ne.firmName&&ne.firmName.trim()!==""?pe(ne.firmName):pe("Your Academy"),ne.logoUrl&&N(ne.logoUrl),ne.firmAddress?x(ne.firmAddress):x("Chinchpada, Airoli, Navi Mumbai - 400708"),ne.signatureUrl&&M(ne.signatureUrl),ne.stampUrl&&D(ne.stampUrl)}else pe("Your Academy"),x("Chinchpada, Airoli, Navi Mumbai - 400708")});return()=>me()}catch($){console.error("Error loading branding data:",$)}},Me=()=>{const $=t.map(ye=>{if(!ye.dueDate)return null;const me=new Date(ye.dueDate);return isNaN(me.getTime())?null:me.toLocaleString("default",{month:"long",year:"numeric"})}).filter(Boolean);return[...new Set($)].sort((ye,me)=>{const H=new Date(`01 ${ye}`);return new Date(`01 ${me}`)-H})},Je=$=>{switch($?.toLowerCase()){case"paid":return{text:"Paid",color:"var(--success-color)"};case"pending":return{text:"Pending",color:"var(--warning-color)"};case"overdue":return{text:"Overdue",color:"var(--danger-color)"};case"not started":return{text:"Not Started",color:"var(--info-color)"};default:return{text:"Unknown",color:"var(--info-color)"}}},ae=(()=>{const $=s.reduce((Te,be)=>Te+(parseFloat(be.feesPaid)||0),0),ye=s.reduce((Te,be)=>Te+(parseFloat(be.totalFees)||0),0),me=ye-$,H=s.length,ne=s.filter(Te=>Te.status?.toLowerCase()==="paid").length,Se=ye-$,Ne=t.reduce((Te,be)=>Te+(be.status?.toLowerCase()==="overdue"?parseFloat(be.amount||0):0),0);return{totalCollected:$,pendingFees:me,totalStudents:H,totalFees:ye,paidStudents:ne,pendingPayments:Se,overdueAmount:Ne}})();return h?c.jsx("div",{className:"loading",children:"Loading..."}):c.jsxs("div",{className:"fees-container",children:[c.jsxs("div",{className:"fees-header",children:[c.jsx("div",{className:"header-left",children:c.jsx("h1",{children:"Fee Management"})}),c.jsx("div",{className:"header-right",children:c.jsx("button",{className:"add-btn",onClick:_e,children:"Add Payment"})})]}),c.jsxs("div",{className:"summary-cards",children:[c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--info-color)",color:"var(--info-color)"},children:""}),c.jsxs("div",{className:"card-content",children:[c.jsx("div",{className:"card-title",children:"Total Collected"}),c.jsxs("div",{className:"card-value",children:["",ae.totalCollected.toLocaleString()]})]})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--warning-color)",color:"var(--warning-color)"},children:""}),c.jsxs("div",{className:"card-content",children:[c.jsx("div",{className:"card-title",children:"Pending Payments"}),c.jsxs("div",{className:"card-value",children:["",Math.max(ae.pendingPayments,0).toLocaleString()]})]})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--success-color)",color:"var(--success-color)"},children:""}),c.jsxs("div",{className:"card-content",children:[c.jsx("div",{className:"card-title",children:"Total Fees"}),c.jsxs("div",{className:"card-value",children:["",ae.totalFees.toLocaleString()]})]})]})]}),c.jsxs("div",{className:"search-filters",children:[c.jsxs("div",{className:"search-container",children:[c.jsx("input",{type:"text",placeholder:"Search payments...",className:"search-input",value:b,onChange:$=>k($.target.value)}),c.jsx("span",{className:"search-icon",children:""})]}),c.jsxs("div",{className:"filters",children:[c.jsxs("select",{className:"filter-select",value:O,onChange:$=>B($.target.value),children:[c.jsx("option",{value:"all",children:"All Students"}),s.map($=>c.jsxs("option",{value:$.studentId,children:[$.name," (",$.studentId,")"]},$.id))]}),c.jsxs("select",{className:"filter-select",value:P,onChange:$=>K($.target.value),children:[c.jsx("option",{value:"all",children:"All Months"}),Me().map($=>c.jsx("option",{value:$,children:$},$))]})]})]}),g&&c.jsx("div",{className:"form-overlay",children:c.jsxs("div",{className:"form-container",children:[c.jsxs("div",{className:"form-header",children:[c.jsx("h2",{children:E?"Edit Payment":"Add New Payment"}),c.jsx("button",{className:"close-btn",onClick:()=>y(!1),children:""})]}),c.jsxs("form",{onSubmit:G,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Student"}),c.jsxs("select",{name:"studentId",value:V.studentId,onChange:R,required:!0,disabled:E,children:[c.jsx("option",{value:"",children:"Select a student"}),s.map($=>c.jsxs("option",{value:$.studentId,children:[$.name," (",$.studentId,") - Class ",$.class]},$.id))]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Amount ()"}),c.jsxs("div",{className:"amount-method-container",children:[c.jsx("input",{type:"number",name:"amount",value:V.amount,onChange:R,required:!0,min:"1",className:Ie?"amount-exceeds":"",style:{flex:1,marginRight:"10px"}}),c.jsxs("select",{name:"method",value:V.method,onChange:R,className:"method-select",style:{flex:1,maxWidth:"150px"},children:[c.jsx("option",{value:"Cash",children:"Cash"}),c.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),c.jsx("option",{value:"Cheque",children:"Cheque"}),c.jsx("option",{value:"UPI",children:"UPI"}),c.jsx("option",{value:"Credit Card",children:"Credit Card"}),c.jsx("option",{value:"Debit Card",children:"Debit Card"}),c.jsx("option",{value:"Net Banking",children:"Net Banking"}),c.jsx("option",{value:"Other",children:"Other"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Due Date"}),c.jsx("input",{type:"date",name:"dueDate",value:V.dueDate,onChange:R,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Description"}),c.jsx("textarea",{name:"description",value:V.description,onChange:R,rows:"3",placeholder:"Enter payment description (optional)"})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:()=>y(!1),children:"Cancel"}),c.jsx("button",{type:"submit",className:"save-btn",disabled:q,children:q?"Processing...":E?"Update Payment":"Add Payment"})]})]})]})}),c.jsx("div",{className:"payments-table-container",children:c.jsxs("table",{className:"payments-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Student"}),c.jsx("th",{children:"Amount"}),c.jsx("th",{children:"Due Date"}),c.jsx("th",{children:"Description"}),c.jsx("th",{children:"Status"}),c.jsx("th",{children:"Created"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:o.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"7",className:"no-data",children:"No payments found. Add a new payment to get started."})}):o.map($=>{const ye=Je($.status);return c.jsxs("tr",{className:"payment-row",children:[c.jsxs("td",{children:[c.jsx("div",{className:"student-name",children:$.studentName}),c.jsxs("div",{className:"student-id",children:[$.studentId,"  ",$.studentClass]})]}),c.jsxs("td",{children:["",parseFloat($.amount||0).toLocaleString()]}),c.jsx("td",{children:xe($.dueDate)}),c.jsx("td",{children:$.description||"-"}),c.jsx("td",{children:c.jsx("span",{className:"status-chip",style:{backgroundColor:ye.color},children:ye.text})}),c.jsx("td",{children:xe($.createdAt)}),c.jsx("td",{children:c.jsx("div",{className:"action-buttons",children:c.jsx("button",{className:"print-btn",onClick:async()=>{try{await oe($)}catch(me){console.error("Error printing receipt:",me),alert("Error generating receipt. Please try again.")}},children:"Print"})})})]},$.id)})})]})})]})},OM=()=>{const s=vs(),[e,t]=I.useState({roomRent:"",staffSalary:"",electricityBill:"",internetBill:"",otherExpenses:""}),[i,o]=I.useState({}),[u,h]=I.useState(!1),[p,g]=I.useState(!1);I.useEffect(()=>{y()},[]);const y=async()=>{g(!0);try{const K=new Date().toISOString().slice(0,7),V=await pt.getStaff(),Q=await pt.getStaffAttendance(),X=E(V,Q,K);t(pe=>({...pe,staffSalary:X.toString()})),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff salary automatically calculated from current month attendance"}}))}catch(K){console.error("Error fetching staff salary:",K),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error fetching staff salary data."}}))}finally{g(!1)}},E=(K,V,Q)=>K.map(pe=>{const N=V.filter(x=>x.staffId===pe.staffId&&x.date.startsWith(Q)).filter(x=>x.status==="present").length;return pe.perDaySalary*N}).reduce((pe,ee)=>pe+ee,0),w=K=>{const{name:V,value:Q}=K.target;t(X=>({...X,[V]:Q})),i[V]&&o(X=>({...X,[V]:""}))},b=()=>{const K={};return e.roomRent&&isNaN(e.roomRent)&&(K.roomRent="Room rent must be a valid number"),e.staffSalary&&isNaN(e.staffSalary)&&(K.staffSalary="Staff salary must be a valid number"),e.electricityBill&&isNaN(e.electricityBill)&&(K.electricityBill="Electricity bill must be a valid number"),e.internetBill&&isNaN(e.internetBill)&&(K.internetBill="Internet bill must be a valid number"),e.otherExpenses&&isNaN(e.otherExpenses)&&(K.otherExpenses="Other expenses must be a valid number"),o(K),Object.keys(K).length===0},k=()=>{const K=parseFloat(e.roomRent)||0,V=parseFloat(e.staffSalary)||0,Q=parseFloat(e.electricityBill)||0,X=parseFloat(e.internetBill)||0,pe=parseFloat(e.otherExpenses)||0;return K+V+Q+X+pe},O=async K=>{if(K.preventDefault(),b()){h(!0);try{const V={roomRent:parseFloat(e.roomRent)||0,staffSalary:parseFloat(e.staffSalary)||0,electricityBill:parseFloat(e.electricityBill)||0,internetBill:parseFloat(e.internetBill)||0,otherExpenses:parseFloat(e.otherExpenses)||0,total:k(),date:new Date().toISOString(),createdAt:new Date};await pt.addExpenditure(V),window.dispatchEvent(new CustomEvent("expenseAdded")),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Expense recorded successfully!"}})),s("/expenses")}catch(V){console.error("Error saving expense:",V),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error saving expense. Please try again."}}))}finally{h(!1)}}},B=()=>{s("/dashboard")},P=k();return c.jsx("div",{className:"expense-form-container",children:c.jsxs("div",{className:"expense-form-card",children:[c.jsx("h2",{children:"Add New Expense"}),c.jsxs("form",{onSubmit:O,className:"expense-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"roomRent",children:"Room Rent ()"}),c.jsx("input",{type:"text",id:"roomRent",name:"roomRent",value:e.roomRent,onChange:w,className:i.roomRent?"error":"",placeholder:"Enter room rent amount"}),i.roomRent&&c.jsx("span",{className:"error-message",children:i.roomRent})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"staffSalary",children:"Staff Salary ()"}),c.jsxs("div",{className:"input-with-button",children:[c.jsx("input",{type:"text",id:"staffSalary",name:"staffSalary",value:e.staffSalary,onChange:w,className:i.staffSalary?"error":"",placeholder:"Enter staff salary amount",disabled:p}),c.jsx("button",{type:"button",className:"refresh-button",onClick:y,disabled:p,children:p?"Loading...":"Refresh"})]}),i.staffSalary&&c.jsx("span",{className:"error-message",children:i.staffSalary}),c.jsx("small",{className:"info-text",children:"Auto-calculated from current month's attendance"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"electricityBill",children:"Electricity Bill ()"}),c.jsx("input",{type:"text",id:"electricityBill",name:"electricityBill",value:e.electricityBill,onChange:w,className:i.electricityBill?"error":"",placeholder:"Enter electricity bill amount"}),i.electricityBill&&c.jsx("span",{className:"error-message",children:i.electricityBill})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"internetBill",children:"Internet Bill ()"}),c.jsx("input",{type:"text",id:"internetBill",name:"internetBill",value:e.internetBill,onChange:w,className:i.internetBill?"error":"",placeholder:"Enter internet bill amount"}),i.internetBill&&c.jsx("span",{className:"error-message",children:i.internetBill})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"otherExpenses",children:"Other Expenses ()"}),c.jsx("input",{type:"text",id:"otherExpenses",name:"otherExpenses",value:e.otherExpenses,onChange:w,className:i.otherExpenses?"error":"",placeholder:"Enter other expenses amount"}),i.otherExpenses&&c.jsx("span",{className:"error-message",children:i.otherExpenses})]}),c.jsxs("div",{className:"total-expenses-container",children:[c.jsx("div",{className:"total-label",children:"Total Expenses:"}),c.jsxs("div",{className:"total-amount",children:["",P.toLocaleString()]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:B,className:"cancel-btn",disabled:u,children:"Cancel"}),c.jsx("button",{type:"submit",className:"submit-btn",disabled:u,children:u?"Saving...":"Save Expense"})]})]})]})})},d0=()=>{const s=vs(),[e,t]=I.useState([]),[i,o]=I.useState(!0),[u,h]=I.useState(new Date().toISOString().slice(0,7)),[p,g]=I.useState(""),[y,E]=I.useState("all"),[w,b]=I.useState("all"),[k,O]=I.useState([]),[B,P]=I.useState(!1),[K,V]=I.useState(!1),[Q,X]=I.useState(""),pe=z=>{const R={},G=new Date,ce=`${G.getFullYear()}-${String(G.getMonth()+1).padStart(2,"0")}`,_e=G.toLocaleString("default",{month:"long",year:"numeric"});return R[ce]={label:_e,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},z.forEach(oe=>{const Ce=new Date(oe.date),Me=`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}`,Je=Ce.toLocaleString("default",{month:"long",year:"numeric"});R[Me]||(R[Me]={label:Je,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),R[Me].expenses.push(oe),R[Me].total+=oe.total,R[Me].roomRent+=oe.roomRent,R[Me].staffSalary+=oe.staffSalary,R[Me].otherExpenses+=oe.otherExpenses,R[Me].electricityBill+=oe.electricityBill||0,R[Me].internetBill+=oe.internetBill||0}),Object.entries(R).map(([oe,Ce])=>({key:oe,...Ce})).sort((oe,Ce)=>Ce.key.localeCompare(oe.key))};I.useEffect(()=>{const z=async()=>{try{const G=await pt.getExpenditures(),ce=pe(G);t(ce);const _e=G.flatMap(oe=>{const Ce=new Date(oe.date),Me=`${Ce.getFullYear()}-${String(Ce.getMonth()+1).padStart(2,"0")}`;return[{id:`${oe.id}-rent`,date:oe.date,name:"Room Rent",category:"rent",amount:oe.roomRent,paymentMode:oe.paymentMode||"Cash",addedBy:oe.addedBy||"System",parentId:oe.id},{id:`${oe.id}-salary`,date:oe.date,name:"Staff Salary",category:"salary",amount:oe.staffSalary,paymentMode:oe.paymentMode||"Bank",addedBy:oe.addedBy||"System",parentId:oe.id},{id:`${oe.id}-electricity`,date:oe.date,name:"Electricity Bill",category:"electricity",amount:oe.electricityBill||0,paymentMode:oe.paymentMode||"Cash",addedBy:oe.addedBy||"System",parentId:oe.id},{id:`${oe.id}-internet`,date:oe.date,name:"Internet Bill",category:"internet",amount:oe.internetBill||0,paymentMode:oe.paymentMode||"Cash",addedBy:oe.addedBy||"System",parentId:oe.id},{id:`${oe.id}-other`,date:oe.date,name:"Other Expenses",category:"miscellaneous",amount:oe.otherExpenses,paymentMode:oe.paymentMode||"Cash",addedBy:oe.addedBy||"System",parentId:oe.id}].filter(Je=>Je.amount>0)});O(_e)}catch(G){console.error("Error fetching expenses:",G)}finally{o(!1)}};z();const R=()=>{z()};return window.addEventListener("expenditureUpdated",R),()=>{window.removeEventListener("expenditureUpdated",R)}},[]);const ee=()=>{const z=e.find(de=>de.key===u)||{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},R=new Date(u);R.setMonth(R.getMonth()-1);const G=`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`,ce=e.find(de=>de.key===G)||{total:0},oe=[{name:"Staff Salary",amount:z.staffSalary,icon:""},{name:"Room Rent",amount:z.roomRent,icon:""},{name:"Electricity Bill",amount:z.electricityBill,icon:""},{name:"Internet Bill",amount:z.internetBill,icon:""},{name:"Other Expenses",amount:z.otherExpenses,icon:""}].reduce((de,ae)=>ae.amount>de.amount?ae:de,{name:"None",amount:0,icon:""}),Ce=new Date(parseInt(u.split("-")[0]),parseInt(u.split("-")[1]),0).getDate(),Me=z.total/Ce,Je=z.total*1.1;return{totalExpenditure:z.total,thisMonthSpend:z.total,highestCategory:oe,avgDailySpend:Me,trend:z.total>ce.total?"up":"down",budgetLimit:Je,prevMonthTotal:ce.total}},N=k.filter(z=>{const R=new Date(z.date);return!(`${R.getFullYear()}-${String(R.getMonth()+1).padStart(2,"0")}`!==u||p&&!z.name.toLowerCase().includes(p.toLowerCase())||y!=="all"&&z.category!==y||w!=="all"&&z.paymentMode!==w)}).sort((z,R)=>new Date(R.date)-new Date(z.date)),A=()=>{const z=e.find(ce=>ce.key===u)||{roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0,total:0},R=z.total||1,G=[{name:"Staff Salary",amount:z.staffSalary,percentage:(z.staffSalary/R*100).toFixed(1),color:"var(--info-color)",icon:""},{name:"Room Rent",amount:z.roomRent,percentage:(z.roomRent/R*100).toFixed(1),color:"var(--success-color)",icon:""},{name:"Electricity Bill",amount:z.electricityBill||0,percentage:((z.electricityBill||0)/R*100).toFixed(1),color:"var(--warning-color)",icon:""},{name:"Internet Bill",amount:z.internetBill||0,percentage:((z.internetBill||0)/R*100).toFixed(1),color:"var(--purple-color)",icon:""},{name:"Miscellaneous",amount:z.otherExpenses,percentage:(z.otherExpenses/R*100).toFixed(1),color:"var(--text-secondary)",icon:""}];if(z.staffSalary>0){const ce=G.findIndex(_e=>_e.name==="Staff Salary");G[ce].amount=z.staffSalary,G[ce].percentage=(z.staffSalary/R*100).toFixed(1)}if(z.roomRent>0){const ce=G.findIndex(_e=>_e.name==="Room Rent");G[ce].amount=z.roomRent,G[ce].percentage=(z.roomRent/R*100).toFixed(1)}if(z.electricityBill>0){const ce=G.findIndex(_e=>_e.name==="Electricity Bill");G[ce].amount=z.electricityBill,G[ce].percentage=(z.electricityBill/R*100).toFixed(1)}if(z.internetBill>0){const ce=G.findIndex(_e=>_e.name==="Internet Bill");G[ce].amount=z.internetBill,G[ce].percentage=(z.internetBill/R*100).toFixed(1)}if(z.otherExpenses>0){const ce=G.findIndex(_e=>_e.name==="Miscellaneous");G[ce].amount=z.otherExpenses,G[ce].percentage=(z.otherExpenses/R*100).toFixed(1)}return G},x=ee(),j=A(),M=e.find(z=>z.key===u),U=M?M.label:new Date(u+"-01").toLocaleString("default",{month:"long",year:"numeric"}),D=new Date(parseInt(u.split("-")[0]),parseInt(u.split("-")[1]),0).getDate(),Ie=()=>{const z=[...e].sort((_e,oe)=>_e.key.localeCompare(oe.key)).slice(-6);if(z.length===0)return c.jsx("svg",{viewBox:"0 0 200 40",className:"sparkline-svg",children:c.jsx("line",{x1:"0",y1:"20",x2:"200",y2:"20",stroke:"#ccc",strokeWidth:"2"})});const R=z.map(_e=>_e.total||0),G=Math.max(...R,1),ce=R.map((_e,oe)=>{const Ce=oe/(R.length-1||1)*200,Me=40-_e/G*30-5;return`${Ce},${Me}`}).join(" ");return R[0],R[R.length-1],c.jsxs("svg",{viewBox:"0 0 200 40",className:"sparkline-svg",children:[c.jsx("polygon",{points:`0,40 ${ce} 200,40`,fill:"rgba(52, 152, 219, 0.1)"}),c.jsx("polyline",{points:ce,fill:"none",stroke:"#3498db",strokeWidth:"2"}),ce.split(" ").length>0&&c.jsx("circle",{cx:ce.split(" ")[ce.split(" ").length-1].split(",")[0],cy:ce.split(" ")[ce.split(" ").length-1].split(",")[1],r:"3",fill:"#3498db"})]})},ze=()=>{const z=document.querySelector(".section:last-child");z&&z.scrollIntoView({behavior:"smooth"}),P(!0)},q=()=>{},re=z=>{const G={"Staff Salary":"salary","Room Rent":"rent","Electricity Bill":"electricity","Internet Bill":"internet","Other Expenses":"miscellaneous"}[z];G&&(E(G),X(z))},xe=()=>{V(!0)},ve=z=>{const G={"Staff Salary":"salary","Room Rent":"rent","Electricity Bill":"electricity","Internet Bill":"internet",Miscellaneous:"miscellaneous"}[z];G&&(E(G),X(z))};return i?c.jsxs("div",{className:"expenditure-container",children:[c.jsxs("div",{className:"expenditure-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{children:"Expenditure"}),c.jsx("p",{className:"subtitle",children:"Track and manage academy expenses"})]}),c.jsx("div",{className:"header-right",children:c.jsx("button",{className:"primary-btn",onClick:()=>s("/expense-form"),children:"+ Add Expense"})})]}),c.jsxs("div",{className:"month-selector",children:[c.jsx("label",{htmlFor:"month-select",children:"Select Month:"}),c.jsx("input",{type:"month",id:"month-select",value:u,onChange:z=>h(z.target.value),className:"month-input"})]})]}),c.jsx("div",{className:"kpi-skeleton-grid",children:[1,2,3,4].map(z=>c.jsx("div",{className:"kpi-card skeleton-card"},z))}),c.jsxs("div",{className:"distribution-skeleton",children:[c.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(z=>c.jsx("div",{className:"skeleton-bar"},z))]}),c.jsxs("div",{className:"table-skeleton",children:[c.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(z=>c.jsx("div",{className:"skeleton-row"},z))]})]}):c.jsxs("div",{className:"expenditure-container",children:[c.jsxs("div",{className:"expenditure-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{children:"Expenditure"}),c.jsx("p",{className:"subtitle",children:"Track and manage academy expenses"})]}),c.jsx("div",{className:"header-right",children:c.jsx("button",{className:"primary-btn",onClick:()=>s("/expense-form"),children:"+ Add Expense"})})]}),c.jsxs("div",{className:"month-selector",children:[c.jsx("label",{htmlFor:"month-select",children:"Select Month:"}),c.jsx("input",{type:"month",id:"month-select",value:u,onChange:z=>h(z.target.value),className:"month-input"})]})]}),c.jsxs("div",{className:"kpi-grid",children:[c.jsxs("div",{className:"kpi-card total-expenditure",onClick:ze,style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:""}),c.jsx("span",{className:"kpi-title",children:"Total Expenditure"})]}),c.jsxs("div",{className:"kpi-value",children:["",x.totalExpenditure.toLocaleString()]}),c.jsx("div",{className:"helper-text",children:"Overall spending for the month"}),c.jsx("div",{className:`kpi-context ${x.trend}`,children:x.prevMonthTotal>0?c.jsx(c.Fragment,{children:x.trend==="up"?c.jsxs("span",{style:{color:"var(--danger-color)"},children:[" ",(Math.abs(x.totalExpenditure-x.prevMonthTotal)/x.prevMonthTotal*100).toFixed(1),"% vs last month"]}):c.jsxs("span",{style:{color:"var(--success-color)"},children:[" ",(Math.abs(x.totalExpenditure-x.prevMonthTotal)/x.prevMonthTotal*100).toFixed(1),"% vs last month"]})}):"First month recorded"})]}),c.jsxs("div",{className:"kpi-card this-month-spend",onClick:q,style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:""}),c.jsx("span",{className:"kpi-title",children:"This Month Spend"})]}),c.jsxs("div",{className:"kpi-value",children:["",x.thisMonthSpend.toLocaleString()]}),c.jsx("div",{className:"helper-text",children:"Budget utilization tracking"}),c.jsxs("div",{className:"kpi-context",children:["Budget limit: ",x.budgetLimit.toLocaleString(void 0,{maximumFractionDigits:0})]}),c.jsx("div",{className:"budget-bar-container",children:c.jsx("div",{className:"budget-bar",style:{width:`${Math.min(x.thisMonthSpend/x.budgetLimit*100,100)}%`,backgroundColor:x.thisMonthSpend/x.budgetLimit*100<70?"var(--success-color)":x.thisMonthSpend/x.budgetLimit*100<=90?"var(--warning-color)":"var(--danger-color)"}})}),c.jsxs("div",{className:"budget-percentage",children:[isNaN(x.thisMonthSpend/x.budgetLimit*100)?"0":Math.min(x.thisMonthSpend/x.budgetLimit*100,100).toFixed(1),"% of budget used"]})]}),c.jsxs("div",{className:"kpi-card highest-category",onClick:()=>re(x.highestCategory.name),style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:x.highestCategory.icon}),c.jsx("span",{className:"kpi-title",children:"Highest Category"})]}),c.jsx("div",{className:"kpi-value",children:x.highestCategory.name}),c.jsx("div",{className:"helper-text",children:"Largest expense category"}),c.jsxs("div",{className:"kpi-context",children:["",x.highestCategory.amount.toLocaleString()," spent"]})]}),c.jsxs("div",{className:"kpi-card avg-daily-spend",onClick:xe,style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:""}),c.jsx("span",{className:"kpi-title",children:"Avg. Daily Spend"})]}),c.jsxs("div",{className:"kpi-value",children:["",x.avgDailySpend.toFixed(2)]}),c.jsx("div",{className:"helper-text",children:"Daily spending average"}),c.jsxs("div",{className:"kpi-context",children:[D," days in month"]})]})]}),c.jsxs("div",{className:"section",children:[c.jsx("h2",{className:"section-title",children:"Expense Distribution"}),c.jsxs("div",{className:"sparkline-container",children:[c.jsxs("div",{className:"sparkline-header",children:[c.jsx("span",{className:"sparkline-title",children:"Expense Trend"}),c.jsx("span",{className:"sparkline-subtitle",children:"Last 6 months"})]}),c.jsx("div",{className:"sparkline-chart",children:Ie()})]}),c.jsx("div",{className:"distribution-container",children:j.map((z,R)=>c.jsxs("div",{className:"distribution-item",onClick:()=>ve(z.name),style:{cursor:"pointer"},children:[c.jsxs("div",{className:"distribution-header",children:[c.jsx("span",{className:"distribution-icon",children:z.icon}),c.jsx("span",{className:"distribution-name",children:z.name}),c.jsxs("span",{className:"distribution-amount",children:["",z.amount.toLocaleString()]})]}),c.jsx("div",{className:"distribution-bar-container",children:c.jsx("div",{className:"distribution-bar animate",style:{"--target-width":`${z.percentage}%`,backgroundColor:`var(${z.color})`,animationDelay:`${R*.1}s`},children:c.jsxs("span",{className:"distribution-bar-percentage",children:[z.percentage,"%"]})})})]},R))})]}),c.jsxs("div",{className:"section",children:[c.jsx("div",{className:"table-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"section-title",children:"Expense Records"}),c.jsxs("p",{className:"subtitle",children:["Detailed view of all expenses for ",U]})]}),c.jsxs("div",{className:"filter-controls",children:[c.jsx("input",{type:"text",placeholder:"Search by name, category, date, amount, payment mode...",value:p,onChange:z=>g(z.target.value),className:"search-input"}),c.jsxs("select",{value:y,onChange:z=>E(z.target.value),className:"filter-select",children:[c.jsx("option",{value:"all",children:"All Categories"}),c.jsx("option",{value:"rent",children:"Room Rent"}),c.jsx("option",{value:"salary",children:"Staff Salary"}),c.jsx("option",{value:"electricity",children:"Electricity Bill"}),c.jsx("option",{value:"internet",children:"Internet Bill"}),c.jsx("option",{value:"miscellaneous",children:"Miscellaneous"})]}),c.jsxs("select",{value:w,onChange:z=>b(z.target.value),className:"filter-select",children:[c.jsx("option",{value:"all",children:"All Payment Modes"}),c.jsx("option",{value:"Cash",children:"Cash"}),c.jsx("option",{value:"Bank",children:"Bank Transfer"}),c.jsx("option",{value:"Online",children:"Online Payment"})]}),c.jsx("button",{className:"export-btn",onClick:()=>console.log("Export functionality to be implemented"),children:"Export"})]})]})}),N.length>0?c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"expenses-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Expense Name"}),c.jsx("th",{children:"Category"}),c.jsx("th",{children:"Amount"}),c.jsx("th",{children:"Payment Mode"}),c.jsx("th",{children:"Added By"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:N.map(z=>c.jsxs("tr",{children:[c.jsx("td",{children:new Date(z.date).toLocaleDateString()}),c.jsx("td",{children:z.name}),c.jsx("td",{children:c.jsx("span",{className:`category-badge category-${z.category}`,children:z.category.charAt(0).toUpperCase()+z.category.slice(1)})}),c.jsxs("td",{className:"amount",children:["",z.amount.toLocaleString()]}),c.jsx("td",{children:z.paymentMode}),c.jsx("td",{children:z.addedBy}),c.jsxs("td",{children:[c.jsx("button",{className:"action-btn view-btn",children:"View"}),c.jsx("button",{className:"action-btn edit-btn",children:"Edit"})]})]},z.id))})]})}):c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"No Expenses Found"}),c.jsx("p",{children:"No expenses recorded for the selected month and filters."}),c.jsx("button",{className:"primary-btn",onClick:()=>s("/expense-form"),children:"Add Expense"})]})]}),B&&c.jsx("div",{className:"modal-overlay",onClick:()=>P(!1),children:c.jsxs("div",{className:"modal-content",onClick:z=>z.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Total Monthly Expenditure Breakdown"}),c.jsx("button",{className:"close-btn",onClick:()=>P(!1),children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("p",{children:["Total expenditure for ",U,": ",x.totalExpenditure.toLocaleString()]}),c.jsx("div",{className:"breakdown-list",children:j.map((z,R)=>c.jsxs("div",{className:"breakdown-item",children:[c.jsxs("span",{className:"breakdown-label",children:[c.jsx("span",{className:"breakdown-icon",children:z.icon}),z.name]}),c.jsxs("span",{className:"breakdown-value",children:["",z.amount.toLocaleString()," (",z.percentage,"%)"]})]},R))})]})]})}),K&&c.jsx("div",{className:"modal-overlay",onClick:()=>V(!1),children:c.jsxs("div",{className:"modal-content",onClick:z=>z.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Average Daily Spend Calculation"}),c.jsx("button",{className:"close-btn",onClick:()=>V(!1),children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"calculation-details",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Formula:"})," Total Spend / Number of Days in Month"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Total Spend:"})," ",x.totalExpenditure.toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Number of Days:"})," ",D," days"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Calculation:"})," ",x.totalExpenditure.toLocaleString()," / ",D," days"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Result:"})," ",x.avgDailySpend.toFixed(2)," per day"]})]})})]})})]})},LM=()=>{const s=vs(),[e,t]=I.useState({name:"Admin User",email:"admin@vpa-fees.com",phone:"",firmName:"",role:"Administrator",lastLogin:"",avatar:"AU",department:"Finance Department",joinDate:"",location:"Mumbai, India",employeeId:"EMP-001245"}),[i,o]=I.useState(null),[u,h]=I.useState([{label:"Students Managed",value:"0",icon:"",color:"var(--info-color)"},{label:"Payments Processed",value:"0",icon:"",color:"var(--success-color)"},{label:"Collections",value:"0",icon:"",color:"var(--warning-color)"},{label:"Reports Generated",value:"0",icon:"",color:"var(--danger-color)"}]),[p,g]=I.useState(!0),[y,E]=I.useState({notifications:!0,emailAlerts:!0,darkMode:!1,twoFactorAuth:!0}),[w,b]=I.useState({accuracy:0,responseTime:"0s",uptime:"0%",satisfaction:0}),[k,O]=I.useState([]);I.useEffect(()=>{const ee=ps.onAuthStateChanged(N=>{N?(o(N),t(A=>({...A,name:N.displayName||N.email?.split("@")[0]||"Admin User",email:N.email||"admin@vpa-fees.com",phone:N.phoneNumber||"",firmName:N.providerData?.[0]?.displayName?.includes("@")?"":N.providerData?.[0]?.displayName||"",avatar:N.displayName?N.displayName.substring(0,2).toUpperCase():N.email?N.email.substring(0,2).toUpperCase():"AU",lastLogin:new Date(N.metadata.lastSignInTime).toLocaleString()||new Date().toLocaleString(),joinDate:N.metadata.creationTime?new Date(N.metadata.creationTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"March 1, 2020"}))):o(null)});return()=>ee()},[]),I.useEffect(()=>{let ee=!0;const N=async()=>{try{g(!0);try{const ve=await rM();ve&&ee&&t(z=>({...z,phone:ve.phone||z.phone,firmName:ve.firmName||z.firmName}))}catch(ve){console.error("Error fetching user profile:",ve)}const[x,j]=await Promise.all([Mh(),qc()]);if(!ee)return;const M=x.length,U=j.length,D=j.filter(ve=>ve.status==="paid").reduce((ve,z)=>ve+(parseFloat(z.amount)||0),0),Ie=new Set;j.forEach(ve=>{if(ve.createdAt){let z;if(ve.createdAt&&typeof ve.createdAt.toDate=="function"?z=ve.createdAt.toDate():typeof ve.createdAt=="string"?z=new Date(ve.createdAt):ve.createdAt instanceof Date&&(z=ve.createdAt),z&&!isNaN(z.getTime())){const R=`${z.getFullYear()}-${z.getMonth()}`;Ie.add(R)}}});const ze=Ie.size,q=[{label:"Students Managed",value:M.toLocaleString(),icon:"",color:"var(--info-color)",animate:!0},{label:"Payments Processed",value:U.toLocaleString(),icon:"",color:"var(--success-color)",animate:!0},{label:"Collections",value:`${D.toLocaleString()}`,icon:"",color:"var(--warning-color)",animate:!0},{label:"Reports Generated",value:ze.toLocaleString(),icon:"",color:"var(--danger-color)",animate:!0}];h(q);const re=B(x,j);O(re);const xe=K(x,j,re);b(xe)}catch(x){console.error("Error fetching profile data:",x),ee&&(h([{label:"Students Managed",value:"0",icon:"",color:"var(--info-color)"},{label:"Payments Processed",value:"0",icon:"",color:"var(--success-color)"},{label:"Collections",value:"0",icon:"",color:"var(--warning-color)"},{label:"Reports Generated",value:"0",icon:"",color:"var(--danger-color)"}]),b({accuracy:0,responseTime:"0s",uptime:"0%",satisfaction:0}),O([{id:1,action:"Processed payment",target:"STD001 - John Doe",time:"2 hours ago",status:"success"},{id:2,action:"Generated report",target:"Monthly Collection Report",time:"1 day ago",status:"completed"},{id:3,action:"Updated student record",target:"STD045 - Jane Smith",time:"2 days ago",status:"updated"},{id:4,action:"Resolved issue",target:"Payment discrepancy",time:"3 days ago",status:"resolved"}]))}finally{ee&&g(!1)}};N();const A=()=>{ee&&N()};return window.addEventListener("studentsUpdated",A),window.addEventListener("paymentAdded",A),window.addEventListener("paymentRecorded",A),window.addEventListener("paymentUpdated",A),window.addEventListener("dashboardRefresh",A),window.addEventListener("paymentsRefresh",A),()=>{ee=!1,window.removeEventListener("studentsUpdated",A),window.removeEventListener("paymentAdded",A),window.removeEventListener("paymentRecorded",A),window.removeEventListener("paymentUpdated",A),window.removeEventListener("dashboardRefresh",A),window.removeEventListener("paymentsRefresh",A)}},[]);const B=(ee,N)=>{const A=[];N.forEach((j,M)=>{const U=ee.find(ze=>ze.studentId===j.studentId)||{},D=U.name||"Unknown Student",Ie=U.studentId||j.studentId||"N/A";A.push({id:`payment-${j.id||M}`,action:"Processed payment for",target:`${Ie} - ${D}`,time:j.createdAt,status:"success",type:"payment"})}),ee.forEach((j,M)=>{A.push({id:`student-${j.id||M}`,action:"Added student record",target:`${j.studentId} - ${j.name}`,time:j.createdAt,status:"completed",type:"student"})}),A.sort((j,M)=>{const U=j.time?new Date(j.time):new Date(0),D=M.time?new Date(M.time):new Date(0);return j.time&&typeof j.time.toDate=="function"&&U.setTime(j.time.toDate().getTime()),M.time&&typeof M.time.toDate=="function"&&D.setTime(M.time.toDate().getTime()),D-U});const x=A.slice(0,4);for(x.forEach(j=>{j.time=P(j.time)});x.length<4;){const j=[{id:"fallback-1",action:"System maintenance",target:"Database optimization",time:"1 hour ago",status:"completed"},{id:"fallback-2",action:"Security update",target:"User authentication",time:"3 hours ago",status:"success"},{id:"fallback-3",action:"Feature enhancement",target:"Payment processing",time:"1 day ago",status:"updated"},{id:"fallback-4",action:"Bug fix",target:"Report generation",time:"2 days ago",status:"resolved"}];x.push(j[x.length])}return x},P=ee=>{if(!ee)return"Unknown time";let N;if(ee&&typeof ee.toDate=="function"?N=ee.toDate():typeof ee=="string"?N=new Date(ee):ee instanceof Date?N=ee:typeof ee=="number"&&(N=new Date(ee)),!N||isNaN(N.getTime()))return"Unknown time";const x=Math.floor((new Date-N)/1e3);if(x<60)return"Just now";if(x<3600){const j=Math.floor(x/60);return`${j} minute${j>1?"s":""} ago`}else if(x<86400){const j=Math.floor(x/3600);return`${j} hour${j>1?"s":""} ago`}else if(x<2592e3){const j=Math.floor(x/86400);return`${j} day${j>1?"s":""} ago`}else return N.toLocaleDateString()},K=(ee,N,A)=>{const x=N.length,j=N.filter(R=>R.status==="paid").length,M=x>0?Math.round(j/x*1e3)/10:0;let U=0,D=0;N.forEach(R=>{if(R.createdAt&&R.status==="paid"){let G;if(R.createdAt&&typeof R.createdAt.toDate=="function"?G=R.createdAt.toDate():typeof R.createdAt=="string"?G=new Date(R.createdAt):R.createdAt instanceof Date&&(G=R.createdAt),G&&!isNaN(G.getTime())){const ce=(Date.now()-G.getTime())/1e3;U+=ce,D++}}});const Ie=D>0?U/D:0,ze=Ie<60?`${Math.round(Ie)}s`:`${Math.round(Ie/60)}m`,q=new Date;q.setDate(q.getDate()-30);let re=new Set;A.forEach(R=>{const G=R.time;G&&!G.includes("Unknown")&&re.add("active")});const xe=ee.length+N.length>0?100:0,ve=xe>0?`${Math.min(99.9,95+xe/100*5).toFixed(1)}%`:"0%",z=Math.min(5,M/20+(Ie<3600?1:0));return{accuracy:M,responseTime:ze,uptime:ve,satisfaction:z.toFixed(1)}},V=ee=>{if(ee==="darkMode"){const N=!y.darkMode;E(A=>({...A,[ee]:N})),N?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("darkMode","true")):(document.documentElement.removeAttribute("data-theme"),localStorage.setItem("darkMode","false"))}else E(N=>({...N,[ee]:!N[ee]}));window.dispatchEvent(new CustomEvent("showNotification",{detail:{message:`${ee.replace(/([A-Z])/g," $1").replace(/^./,N=>N.toUpperCase())} setting ${y[ee]?"disabled":"enabled"}`,type:"success"}}))};I.useEffect(()=>{localStorage.getItem("darkMode")==="true"&&(E(x=>({...x,darkMode:!0})),document.documentElement.setAttribute("data-theme","dark"));const N=localStorage.getItem("notificationsEnabled"),A=localStorage.getItem("emailAlertsEnabled");N!==null&&E(x=>({...x,notifications:N==="true"})),A!==null&&E(x=>({...x,emailAlerts:A==="true"}))},[]),I.useEffect(()=>{localStorage.setItem("notificationsEnabled",y.notifications.toString()),localStorage.setItem("emailAlertsEnabled",y.emailAlerts.toString())},[y.notifications,y.emailAlerts]),I.useEffect(()=>{const ee=A=>{const{message:x,type:j="info"}=A.detail;if(y.notifications){const M=document.createElement("div");M.className=`app-notification ${j}`,M.textContent=x,Object.assign(M.style,{position:"fixed",top:"20px",right:"20px",backgroundColor:j==="error"?"var(--danger-color)":j==="success"?"var(--success-color)":"var(--info-color)",color:"white",padding:"15px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:"10000",animation:"slideIn 0.3s ease-out",fontWeight:"500",maxWidth:"300px",wordWrap:"break-word"}),document.body.appendChild(M),setTimeout(()=>{M.parentNode&&M.parentNode.removeChild(M)},3e3)}y.emailAlerts&&console.log(`[Email Alert] ${x}`)};window.addEventListener("showNotification",ee);const N=document.createElement("style");return N.textContent=`
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    `,document.head.appendChild(N),()=>{window.removeEventListener("showNotification",ee),document.head.contains(N)&&document.head.removeChild(N)}},[y.notifications,y.emailAlerts]);const Q=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await Qp(ps),localStorage.removeItem("isLoggedIn"),window.location.reload()}catch(ee){console.error("Logout error:",ee),alert("Error logging out. Please try again.")}},X=()=>{alert("Contacting support team... (This would open a support ticket in a real app)")},pe=()=>{alert("Opening profile edit modal... (This would open a form in a real app)")};return c.jsxs("div",{className:"profile-container",children:[c.jsx("div",{className:"profile-header",children:c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{children:"My Profile"}),c.jsx("p",{className:"header-subtitle",children:"Manage your account settings and preferences"})]})}),c.jsxs("div",{className:"profile-layout",children:[c.jsxs("div",{className:"profile-column",children:[c.jsxs("div",{className:"profile-card",children:[c.jsx("div",{className:"profile-avatar",children:c.jsx("span",{className:"avatar-text",children:e.avatar})}),c.jsxs("div",{className:"profile-info",children:[c.jsx("h2",{children:e.name}),c.jsx("p",{className:"profile-role",children:e.role}),c.jsxs("div",{className:"profile-contact",children:[c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Employee ID"}),c.jsx("span",{className:"contact-value",children:e.employeeId})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Email"}),c.jsx("span",{className:"contact-value",children:e.email})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Phone"}),c.jsx("span",{className:"contact-value",children:e.phone||"Not provided"})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Firm/Organization"}),c.jsx("span",{className:"contact-value",children:e.firmName||"Not provided"})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Department"}),c.jsx("span",{className:"contact-value",children:e.department})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Location"}),c.jsx("span",{className:"contact-value",children:e.location})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Joined"}),c.jsx("span",{className:"contact-value",children:e.joinDate})]})]})]}),c.jsxs("div",{className:"profile-status",children:[c.jsxs("div",{className:"status-item",children:[c.jsx("span",{className:"status-label",children:"Last Login"}),c.jsx("span",{className:"status-value",children:e.lastLogin})]}),c.jsxs("div",{className:"status-item",children:[c.jsx("span",{className:"status-label",children:"Account Status"}),c.jsx("span",{className:"status-value active",children:"Active"})]})]})]}),c.jsxs("div",{className:"metrics-section",children:[c.jsx("h3",{children:"Performance Metrics"}),c.jsxs("div",{className:"metrics-grid",children:[c.jsxs("div",{className:"metric-card",children:[c.jsxs("div",{className:"metric-value",children:[w.accuracy,"%"]}),c.jsx("div",{className:"metric-label",children:"Accuracy"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("div",{className:"metric-value",children:w.responseTime}),c.jsx("div",{className:"metric-label",children:"Avg. Response"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsxs("div",{className:"metric-value",children:[w.uptime,"%"]}),c.jsx("div",{className:"metric-label",children:"Uptime"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsxs("div",{className:"metric-value",children:[w.satisfaction,"/5"]}),c.jsx("div",{className:"metric-label",children:"Satisfaction"})]})]})]})]}),c.jsxs("div",{className:"profile-column",children:[c.jsxs("div",{className:"stats-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"Statistics Overview"}),c.jsx("span",{className:"section-subtitle",children:"Your contribution metrics"})]}),c.jsx("div",{className:"stats-grid",children:u.map((ee,N)=>c.jsx(AM,{title:ee.label,value:ee.value,icon:ee.icon,color:ee.color,animate:ee.animate},N))})]}),c.jsxs("div",{className:"activity-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"Recent Activity"}),c.jsx("span",{className:"section-subtitle",children:"Your latest actions"})]}),c.jsx("div",{className:"activity-list",children:k.length>0?k.map(ee=>c.jsxs("div",{className:"activity-item",children:[c.jsxs("div",{className:"activity-icon",children:[ee.status==="success"&&"",ee.status==="completed"&&"",ee.status==="updated"&&"",ee.status==="resolved"&&""]}),c.jsxs("div",{className:"activity-content",children:[c.jsxs("div",{className:"activity-action",children:[c.jsx("span",{className:"action-text",children:ee.action}),c.jsx("span",{className:"action-target",children:ee.target})]}),c.jsx("div",{className:"activity-time",children:ee.time})]})]},ee.id)):c.jsx("div",{className:"no-activity",children:c.jsx("p",{children:"No recent activity to display"})})})]}),c.jsxs("div",{className:"settings-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"Account Settings"}),c.jsx("span",{className:"section-subtitle",children:"Manage your preferences"})]}),c.jsxs("div",{className:"settings-list",children:[c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Notifications"}),c.jsx("span",{className:"setting-desc",children:"Enable push notifications"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:y.notifications,onChange:()=>V("notifications")}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Email Alerts"}),c.jsx("span",{className:"setting-desc",children:"Receive email notifications"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:y.emailAlerts,onChange:()=>V("emailAlerts")}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Dark Mode"}),c.jsx("span",{className:"setting-desc",children:"Enable dark theme"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:y.darkMode,onChange:()=>V("darkMode")}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Two-Factor Authentication"}),c.jsx("span",{className:"setting-desc",children:"Add extra security to your account"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:y.twoFactorAuth,onChange:()=>V("twoFactorAuth")}),c.jsx("span",{className:"slider"})]})]})]})]})]})]}),c.jsxs("div",{className:"profile-actions",children:[c.jsx("button",{className:"action-btn edit-btn",onClick:pe,children:"Edit Profile"}),c.jsx("button",{className:"action-btn",onClick:()=>s("/subscription"),children:"View Subscription Plans"}),c.jsx("button",{className:"action-btn contact-btn",onClick:X,children:"Contact Support"}),c.jsx("button",{className:"action-btn logout-btn",onClick:Q,children:"Logout"})]}),c.jsxs("div",{className:"app-info",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"App Version"}),c.jsx("span",{className:"info-value",children:"v1.0.0"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Developed by"}),c.jsx("span",{className:"info-value",children:"VPA Technologies"})]})]})]})},UM=()=>{const[s,e]=I.useState({notifications:!0,darkMode:!1,emailReports:!0,autoSync:!0}),[t,i]=I.useState(""),[o,u]=I.useState(""),[h,p]=I.useState(""),[g,y]=I.useState(""),[E,w]=I.useState(""),[b,k]=I.useState(null),[O,B]=I.useState(""),[P,K]=I.useState(null),[V,Q]=I.useState(""),[X,pe]=I.useState(null),[ee,N]=I.useState("#3B82F6"),[A,x]=I.useState("#10B981"),[j,M]=I.useState("#FFFFFF"),[U,D]=I.useState("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),[Ie,ze]=I.useState({show:!1,message:"",type:""}),[q,re]=I.useState(!0),[xe,ve]=I.useState(!1),[z,R]=I.useState(!1),[G,ce]=I.useState(!1);I.useEffect(()=>{const le=localStorage.getItem("appSettings");le&&e(JSON.parse(le)),_e()},[]);const _e=async()=>{if(dt())try{R(!0);const le=Pt(),we=un(rn,`users/${le}/settings/profile`),qe=Pg(we,Ze=>{if(Ze.exists()){const Ue=Ze.data();Ue.firmName&&(i(Ue.firmName),u(Ue.firmName)),Ue.firmAddress&&(p(Ue.firmAddress),y(Ue.firmAddress)),Ue.logoUrl&&w(Ue.logoUrl),Ue.signatureUrl&&B(Ue.signatureUrl),Ue.stampUrl&&Q(Ue.stampUrl),Ue.primaryColor&&N(Ue.primaryColor),Ue.accentColor&&x(Ue.accentColor),Ue.backgroundColor&&M(Ue.backgroundColor),Ue.sidebarGradient&&D(Ue.sidebarGradient)}R(!1)});return()=>qe()}catch(le){console.error("Error loading branding data:",le),R(!1)}},oe=(le,we="success")=>{ze({show:!0,message:le,type:we}),setTimeout(()=>{ze({show:!1,message:"",type:""})},3e3)},Ce=le=>{const we={...s,[le]:!s[le]};e(we),localStorage.setItem("appSettings",JSON.stringify(we));const qe=document.querySelector(`input[name="${le}"]`).closest(".setting-item");qe&&(qe.style.transition="all 0.3s ease",qe.style.transform="scale(0.98)",qe.style.opacity="0.8",setTimeout(()=>{qe.style.transform="scale(1)",qe.style.opacity="1"},150));const Ze=document.querySelector(`input[name="${le}"]`).nextSibling;Ze&&(Ze.classList.add("ripple"),setTimeout(()=>{Ze.classList.remove("ripple")},300)),le==="darkMode"&&(we.darkMode?(document.documentElement.setAttribute("data-theme","dark"),oe("Dark mode enabled","info")):(document.documentElement.removeAttribute("data-theme"),oe("Light mode enabled","info")))},Me=le=>{u(le.target.value);const we=le.target;we.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.4)",setTimeout(()=>{we.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.2)"},300)},Je=le=>{y(le.target.value);const we=le.target;we.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.4)",setTimeout(()=>{we.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.2)"},300)},de=le=>{if(le.target.files&&le.target.files[0]){const we=le.target.files[0];if(we.type.startsWith("image/")){k(we);const qe=document.querySelector('label[for="logo-upload"]');qe&&(qe.classList.add("file-selected"),setTimeout(()=>{qe.classList.remove("file-selected")},1e3)),oe("Logo selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),oe("Invalid file type. Please select PNG or JPG","error")}},ae=le=>{if(le.target.files&&le.target.files[0]){const we=le.target.files[0];if(we.type.startsWith("image/")){K(we);const qe=document.querySelector('label[for="signature-upload"]');qe&&(qe.classList.add("file-selected"),setTimeout(()=>{qe.classList.remove("file-selected")},1e3)),oe("Signature selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),oe("Invalid file type. Please select PNG or JPG","error")}},$=le=>{if(le.target.files&&le.target.files[0]){const we=le.target.files[0];if(we.type.startsWith("image/")){pe(we);const qe=document.querySelector('label[for="stamp-upload"]');qe&&(qe.classList.add("file-selected"),setTimeout(()=>{qe.classList.remove("file-selected")},1e3)),oe("Stamp selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),oe("Invalid file type. Please select PNG or JPG","error")}},ye=async()=>{if(!b||!dt())return null;try{ce(!0);const le=Pt(),we=vc(Po,`users/${le}/branding/logo.png`),qe=await Pd(we,b),Ze=await Od(qe.ref);return w(Ze),Ze}catch(le){return console.error("Error uploading logo:",le),alert("Error uploading logo. Please try again."),oe("Error uploading logo","error"),null}finally{ce(!1)}},me=async()=>{if(!P||!dt())return null;try{ce(!0);const le=Pt(),we=vc(Po,`users/${le}/branding/signature.png`),qe=await Pd(we,P),Ze=await Od(qe.ref);return B(Ze),Ze}catch(le){return console.error("Error uploading signature:",le),alert("Error uploading signature. Please try again."),oe("Error uploading signature","error"),null}finally{ce(!1)}},H=async()=>{if(!X||!dt())return null;try{ce(!0);const le=Pt(),we=vc(Po,`users/${le}/branding/stamp.png`),qe=await Pd(we,X),Ze=await Od(qe.ref);return Q(Ze),Ze}catch(le){return console.error("Error uploading stamp:",le),alert("Error uploading stamp. Please try again."),oe("Error uploading stamp","error"),null}finally{ce(!1)}},ne=async()=>{if(!dt()){alert("Please log in to save settings"),oe("Please log in to save settings","error");return}try{R(!0);const le=Pt(),we=un(rn,`users/${le}/settings/profile`);let qe=E;if(b){if(qe=await ye(),!qe)throw new Error("Failed to upload logo");oe("Logo uploaded successfully","success")}let Ze=O;if(P){if(Ze=await me(),!Ze)throw new Error("Failed to upload signature");oe("Signature uploaded successfully","success")}let Ue=V;if(X){if(Ue=await H(),!Ue)throw new Error("Failed to upload stamp");oe("Stamp uploaded successfully","success")}await XT(we,{firmName:o,firmAddress:g,logoUrl:qe,signatureUrl:Ze,stampUrl:Ue,primaryColor:ee,accentColor:A,backgroundColor:j,sidebarGradient:U},{merge:!0}),i(o),p(g),ve(!0);const ht=document.querySelector(".branding-save");ht&&(ht.classList.add("pulse"),setTimeout(()=>{ht.classList.remove("pulse")},1e3)),Se(),oe("Settings saved successfully!","success"),setTimeout(()=>{ve(!1)},3e3)}catch(le){console.error("Error saving branding data:",le),alert("Error saving branding data. Please try again."),oe("Error saving settings","error")}finally{R(!1)}},Se=()=>{const le=document.querySelector(".branding-save");if(!le)return;const we=le.getBoundingClientRect(),qe=we.left+we.width/2,Ze=we.top+we.height/2;for(let Ue=0;Ue<30;Ue++){const ht=document.createElement("div");ht.className="confetti",ht.style.left=`${qe}px`,ht.style.top=`${Ze}px`,ht.style.backgroundColor=Ne(),ht.style.transform=`rotate(${Math.random()*360}deg)`,document.body.appendChild(ht);const qt=Math.random()*Math.PI*2,dn=2+Math.random()*3;let Nt=Math.cos(qt)*dn,Rt=Math.sin(qt)*dn,Gn=qe,pa=Ze,Ge=1;const Pe=()=>{Gn+=Nt,pa+=Rt,Rt+=.1,Ge-=.02,ht.style.left=`${Gn}px`,ht.style.top=`${pa}px`,ht.style.opacity=Ge,Ge>0?requestAnimationFrame(Pe):ht.remove()};requestAnimationFrame(Pe)}},Ne=()=>{const le=["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#6f42c1"];return le[Math.floor(Math.random()*le.length)]},Te=(le,we)=>{switch(le){case"primary":N(we),oe("Primary color updated","info");break;case"accent":x(we),oe("Accent color updated","info");break;case"background":M(we),oe("Background color updated","info");break;case"sidebar":D(we),oe("Sidebar gradient updated","info");break}},be=()=>{N("#3B82F6"),x("#10B981"),M("#FFFFFF"),D("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),oe("Theme reset to defaults","success")};return I.useEffect(()=>{document.documentElement.style.setProperty("--primary-color",ee),document.documentElement.style.setProperty("--accent-color",A),document.documentElement.style.setProperty("--bg-color",j);const le=document.querySelector(".sidebar");le&&(le.style.background=U)},[ee,A,j,U]),c.jsxs("div",{className:"settings-container",children:[Ie.show&&c.jsx("div",{className:`toast-notification ${Ie.type}`,children:Ie.message}),c.jsxs("div",{className:"settings-header",children:[c.jsx("h1",{children:"Settings"}),c.jsx("p",{children:"Manage your application preferences"})]}),c.jsxs("div",{className:`settings-section ${q?"":"collapsed"}`,children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h2",{children:" Academy Profile & Branding"}),c.jsx("button",{className:"toggle-button",onClick:()=>re(!q),children:q?"Hide":"Show"})]}),c.jsx("div",{className:`section-content ${q?"open":""}`,children:c.jsxs("div",{className:"branding-content",children:[c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Academy Logo"}),c.jsx("p",{children:"Upload your academy logo (PNG or JPG)"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"PNG recommended. Transparent background preferred."})]}),c.jsxs("div",{className:"logo-upload-controls",children:[c.jsx("div",{className:"logo-preview",children:E?c.jsx("img",{src:E,alt:"Academy Logo",className:"logo-image"}):c.jsx("div",{className:"logo-placeholder",children:"Click to Upload"})}),c.jsxs("div",{className:"logo-upload-area",children:[c.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:de,className:"logo-input",id:"logo-upload",disabled:G}),c.jsxs("label",{htmlFor:"logo-upload",className:"upload-button",children:[" ",G?"Uploading...":"Choose File"]}),b&&c.jsx("span",{className:"file-name",children:b.name})]})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Authorized Signature"}),c.jsx("p",{children:"Upload your authorized signature (PNG/JPG with transparent background preferred)"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Used in receipts and payment slips"})]}),c.jsxs("div",{className:"signature-upload-controls",children:[c.jsx("div",{className:"signature-preview",children:O?c.jsx("img",{src:O,alt:"Authorized Signature",className:"signature-image"}):c.jsx("div",{className:"signature-placeholder",children:"Click to Upload"})}),c.jsxs("div",{className:"signature-upload-area",children:[c.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:ae,className:"signature-input",id:"signature-upload",disabled:G}),c.jsxs("label",{htmlFor:"signature-upload",className:"upload-button",children:[" ",G?"Uploading...":"Choose File"]}),P&&c.jsx("span",{className:"file-name",children:P.name})]})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Official Stamp / Seal"}),c.jsx("p",{children:"Upload your official stamp or seal (PNG/JPG, circular preferred)"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Used on receipts & paid invoices"})]}),c.jsxs("div",{className:"stamp-upload-controls",children:[c.jsx("div",{className:"stamp-preview",children:V?c.jsx("img",{src:V,alt:"Official Stamp",className:"stamp-image"}):c.jsx("div",{className:"stamp-placeholder",children:"Click to Upload"})}),c.jsxs("div",{className:"stamp-upload-area",children:[c.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:$,className:"stamp-input",id:"stamp-upload",disabled:G}),c.jsxs("label",{htmlFor:"stamp-upload",className:"upload-button",children:[" ",G?"Uploading...":"Choose File"]}),X&&c.jsx("span",{className:"file-name",children:X.name})]})]})]}),c.jsxs("div",{className:"setting-item form-group-row",children:[c.jsxs("div",{className:"form-group-col",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Academy Name"}),c.jsx("p",{children:"Enter your academy or institution name"})]}),c.jsx("div",{className:"firm-name-controls",children:c.jsx("input",{type:"text",value:o,onChange:Me,placeholder:"Enter Academy Name",className:"firm-name-input",disabled:z})})]}),c.jsxs("div",{className:"form-group-col",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Academy Address"}),c.jsx("p",{children:"Enter your academy's full address"})]}),c.jsx("div",{className:"firm-address-controls",children:c.jsx("textarea",{value:g,onChange:Je,placeholder:"Enter Academy Address",className:"firm-address-input",disabled:z,rows:"3"})})]})]}),c.jsxs("div",{className:"setting-item preview-section",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Live Preview"}),c.jsx("p",{children:"See how your branding will appear in receipts"})]}),c.jsx("div",{className:"live-preview-wrapper",children:c.jsxs("div",{className:"preview-card receipt-preview-mini",children:[c.jsxs("div",{className:"receipt-header-preview",children:[c.jsxs("div",{className:"receipt-header-content",children:[E?c.jsx("img",{src:E,alt:"Preview Logo",className:"receipt-preview-logo"}):c.jsx("div",{className:"receipt-placeholder-logo",children:""}),c.jsxs("div",{className:"receipt-academy-info",children:[c.jsx("h4",{className:"receipt-academy-name",children:o||"Academy Name"}),c.jsx("p",{className:"receipt-academy-address",children:g||"Academy Address"})]})]}),c.jsx("div",{className:"receipt-title-preview",children:"Fee Receipt"})]}),c.jsxs("div",{className:"receipt-body-preview",children:[c.jsxs("div",{className:"receipt-details-preview",children:[c.jsxs("div",{className:"receipt-detail-row",children:[c.jsx("span",{className:"receipt-label",children:"Receipt No:"}),c.jsx("span",{className:"receipt-value",children:"RCT-001"})]}),c.jsxs("div",{className:"receipt-detail-row",children:[c.jsx("span",{className:"receipt-label",children:"Date:"}),c.jsx("span",{className:"receipt-value",children:new Date().toLocaleDateString()})]}),c.jsxs("div",{className:"receipt-detail-row",children:[c.jsx("span",{className:"receipt-label",children:"Student:"}),c.jsx("span",{className:"receipt-value",children:"John Doe"})]})]}),c.jsxs("div",{className:"receipt-amount-preview",children:[c.jsxs("div",{className:"amount-row-preview",children:[c.jsx("span",{children:"Amount Paid:"}),c.jsx("span",{children:"5,000.00"})]}),c.jsxs("div",{className:"amount-row-preview total-preview",children:[c.jsx("span",{children:"Total:"}),c.jsx("span",{children:"5,000.00"})]})]})]}),c.jsx("div",{className:"receipt-signatures-preview",children:c.jsxs("div",{className:"signature-section-preview",children:[O?c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Authorized Signature:"}),c.jsx("img",{src:O,alt:"Signature",className:"signature-preview-img"})]}):c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Authorized Signature:"}),c.jsx("div",{className:"signature-placeholder",children:"[Signature]"})]}),V?c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Official Stamp:"}),c.jsx("img",{src:V,alt:"Stamp",className:"stamp-preview-img"})]}):c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Official Stamp:"}),c.jsx("div",{className:"stamp-placeholder",children:"[Stamp]"})]})]})}),c.jsx("div",{className:"receipt-footer-preview",children:"Thank you for your payment!"})]})})]}),c.jsx("div",{className:"branding-save-controls",children:c.jsxs("button",{className:"save-button branding-save",onClick:ne,disabled:z||G,children:[" ",z||G?"Saving...":"Save Branding"]})}),xe&&c.jsx("div",{className:"success-message",children:"Academy branding saved successfully!"})]})})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h2",{children:" Theme Customization"}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Primary Color"}),c.jsx("p",{children:"Choose your primary brand color"})]}),c.jsx("div",{className:"color-picker",children:c.jsx("input",{type:"color",value:ee,onChange:le=>Te("primary",le.target.value)})})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Accent Color"}),c.jsx("p",{children:"Choose your accent color"})]}),c.jsx("div",{className:"color-picker",children:c.jsx("input",{type:"color",value:A,onChange:le=>Te("accent",le.target.value)})})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Background Color"}),c.jsx("p",{children:"Choose your background color"})]}),c.jsx("div",{className:"color-picker",children:c.jsx("input",{type:"color",value:j,onChange:le=>Te("background",le.target.value)})})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Sidebar Gradient"}),c.jsx("p",{children:"Choose your sidebar gradient"})]}),c.jsx("div",{className:"gradient-picker",children:c.jsxs("select",{value:U,onChange:le=>Te("sidebar",le.target.value),children:[c.jsx("option",{value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",children:"Purple Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",children:"Pink Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",children:"Green Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",children:"Yellow Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",children:"Blue Gradient"})]})})]}),c.jsxs("div",{className:"setting-item preview-section",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Live Theme Preview"}),c.jsx("p",{children:"See how your theme will look"})]}),c.jsxs("div",{className:"theme-preview-box",style:{background:j},children:[c.jsx("div",{className:"theme-sidebar-preview",style:{background:U}}),c.jsxs("div",{className:"theme-content-preview",children:[c.jsx("div",{className:"theme-header-preview",style:{color:ee},children:"Header Text"}),c.jsx("div",{className:"theme-body-preview",children:c.jsxs("div",{className:"theme-card-preview",style:{borderColor:A},children:[c.jsx("div",{className:"theme-card-header",style:{backgroundColor:ee},children:"Card Header"}),c.jsx("div",{className:"theme-card-body",children:"Card Content"})]})})]})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Reset Theme Defaults"}),c.jsx("p",{children:"Reset all theme settings to default values"}),c.jsxs("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:["Primary Color: Controls navbar & header gradients",c.jsx("br",{}),"Accent Color: Controls button colors",c.jsx("br",{}),"Background Color: Controls dashboard background"]})]}),c.jsx("button",{className:"reset-button",onClick:be,children:"Reset to Defaults"})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h2",{children:" Dark Mode & Sync"}),c.jsxs("div",{className:"setting-item dark-mode-toggle-large",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Dark Mode"}),c.jsx("p",{children:"Enable dark theme for the application"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Automatically adapts dashboard, sidebar & charts"})]}),c.jsx("div",{className:"large-toggle-container",children:c.jsxs("label",{className:"switch-large",children:[c.jsx("input",{type:"checkbox",checked:s.darkMode,onChange:()=>Ce("darkMode"),name:"darkMode"}),c.jsx("span",{className:"slider-large"})]})})]}),c.jsxs("div",{className:"setting-item preview-section",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Dark Mode Preview"}),c.jsx("p",{children:"See how the dark theme will look"})]}),c.jsxs("div",{className:"dark-mode-preview-box",children:[c.jsx("div",{className:"preview-header-dark",children:c.jsxs("div",{className:"preview-title-dark",children:[c.jsx("h4",{children:"Dark Mode Preview"}),c.jsx("p",{children:"This is how your app will look in dark mode"})]})}),c.jsx("div",{className:"preview-content-dark",children:c.jsxs("div",{className:"preview-card-dark",children:[c.jsx("div",{className:"preview-card-header-dark",children:"Sample Card"}),c.jsx("div",{className:"preview-card-body-dark",children:"Card content with dark theme styling"})]})})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Auto Sync"}),c.jsx("p",{children:"Automatically sync data with cloud"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:s.autoSync,onChange:()=>Ce("autoSync"),name:"autoSync"}),c.jsx("span",{className:"slider"})]})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h2",{children:" Notifications"}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Email Reports"}),c.jsx("p",{children:"Receive monthly reports via email"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:s.emailReports,onChange:()=>Ce("emailReports"),name:"emailReports"}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Push Notifications"}),c.jsx("p",{children:"Receive notifications for important updates"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:s.notifications,onChange:()=>Ce("notifications"),name:"notifications"}),c.jsx("span",{className:"slider"})]})]})]}),c.jsx("div",{className:"settings-footer",children:c.jsx("button",{className:"save-button",onClick:()=>{oe("All settings saved successfully!","success")},children:" Save All Settings"})})]})},VM=()=>{vs();const[s,e]=I.useState([]),[t,i]=I.useState([]),[o,u]=I.useState([]),[h,p]=I.useState(new Date().toISOString().split("T")[0]),[g,y]=I.useState(new Date().toISOString().slice(0,7)),[E,w]=I.useState({staffName:""}),[b,k]=I.useState([]),[O,B]=I.useState("attendance"),[P,K]=I.useState(!1),[V,Q]=I.useState(null),[X,pe]=I.useState([]),[ee,N]=I.useState(!1),[A,x]=I.useState(null),[j,M]=I.useState(""),[U,D]=I.useState(!1),[Ie,ze]=I.useState({name:"",role:"",perDaySalary:"",contact:"",email:""});I.useEffect(()=>{q()},[h,g]),I.useEffect(()=>{const H=()=>{q()};return window.addEventListener("attendanceUpdated",H),window.addEventListener("staffUpdated",H),window.addEventListener("staffDeleted",H),window.addEventListener("attendanceDeleted",H),()=>{window.removeEventListener("attendanceUpdated",H),window.removeEventListener("staffUpdated",H),window.removeEventListener("staffDeleted",H),window.removeEventListener("attendanceDeleted",H)}},[]);const q=async()=>{try{const H=await pt.getStaff();e(H);const ne=await pt.getStaffAttendance(),Se=ne.filter(Ne=>Ne.date===h);i(Se),u(ne),re(H,ne)}catch(H){console.error("Error loading data:",H)}},re=(H,ne)=>{const Se=H.map(Ne=>{const be=ne.filter(we=>we.staffId===Ne.staffId&&we.date.startsWith(g)).filter(we=>we.status==="present").length,le=Ne.perDaySalary*be;return{staffId:Ne.staffId,staffName:Ne.name,role:Ne.role,perDaySalary:Ne.perDaySalary,presentDays:be,salary:le}});k(Se)},xe=H=>{const ne=t.find(Se=>Se.staffId===H);return ne?ne.status:null},ve=async H=>{const ne=t.find(Se=>Se.staffId===H);if(ne){const Se=ne.status==="present"?"absent":"present",Ne={staffId:H,date:h,status:Se,class:ne.class||"General",createdAt:ne.createdAt||new Date().toISOString(),markedAt:new Date().toISOString()};try{ne.id&&!ne.id.startsWith("temp_")?await pt.updateStaffAttendance({...Ne,id:ne.id}):await pt.addStaffAttendance(Ne),i(Te=>Te.map(be=>be.staffId===H?{...be,status:Se,markedAt:new Date().toISOString()}:be)),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:`Attendance updated to ${Se}!`}})),setTimeout(()=>{q()},100)}catch(Te){console.error("Error updating attendance:",Te),alert(`Error updating attendance: ${Te.message}`)}}else x(H),M(""),N(!0)},z=async H=>{if(H&&(H.preventDefault(),H.stopPropagation()),!(!A||U)){D(!0);try{const ne=t.find(Ne=>Ne.staffId===A);let Se;if(ne?ne.status==="present"?Se="absent":ne.status==="absent"?Se=null:Se="present":Se="present",Se===null)ne&&ne.id&&await pt.deleteStaffAttendance(ne.id),i(Ne=>Ne.filter(Te=>Te.staffId!==A));else{const Ne={staffId:A,date:h,status:Se,class:j||"General",createdAt:new Date().toISOString(),markedAt:new Date().toISOString()};ne&&ne.id&&!ne.id.startsWith("temp_")?ne.id?await pt.updateStaffAttendance({...Ne,id:ne.id}):await pt.addStaffAttendance(Ne):await pt.addStaffAttendance(Ne),i(ne?Te=>Te.map(be=>be.staffId===A?{...be,status:Se,class:j||be.class,markedAt:new Date().toISOString()}:be):Te=>[...Te,{staffId:A,date:h,status:Se,class:j||"General",createdAt:new Date().toISOString(),markedAt:new Date().toISOString(),id:`temp_${Date.now()}`}])}window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Attendance updated successfully!"}})),N(!1),x(null),M(""),setTimeout(()=>{q()},100)}catch(ne){console.error("Error updating attendance:",ne),alert(`Error updating attendance: ${ne.message}`)}finally{D(!1)}}},R=async H=>{if(window.confirm("Are you sure you want to delete this staff member and all their attendance records? This action cannot be undone."))try{const ne=o.filter(Te=>Te.staffId===H),Se=s.find(Te=>Te.staffId===H),Ne=Se?Se.id:null;if(!Ne)throw new Error("Could not find staff member in database");for(const Te of ne)Te.id&&!Te.id.startsWith("temp_")&&await pt.deleteStaffAttendance(Te.id);await pt.deleteStaff(Ne),e(Te=>Te.filter(be=>be.staffId!==H)),u(Te=>Te.filter(be=>be.staffId!==H)),i(Te=>Te.filter(be=>be.staffId!==H)),k(Te=>Te.filter(be=>be.staffId!==H)),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff member and associated attendance records deleted successfully!"}})),setTimeout(()=>{q()},100)}catch(ne){console.error("Error deleting staff:",ne),alert(`Error deleting staff: ${ne.message}. Some data may not have been deleted. Refreshing data to ensure consistency.`),setTimeout(()=>{q()},2e3)}},G=H=>{const ne=H.target.value;if(ne)p(ne);else{const Se=new Date().toISOString().split("T")[0];p(Se)}},ce=H=>{const ne=H.target.value;if(ne)y(ne);else{const Se=new Date().toISOString().slice(0,7);y(Se)}},_e=s.filter(H=>E.staffName===""||H.name.toLowerCase().includes(E.staffName.toLowerCase())),oe=b.filter(H=>E.staffName===""||H.staffName.toLowerCase().includes(E.staffName.toLowerCase())),Ce=async H=>{try{const ne=s.find(Ne=>Ne.staffId===H);if(!ne){console.error("Staff member not found");return}const Se=o.filter(Ne=>Ne.staffId===H).sort((Ne,Te)=>new Date(Te.date)-new Date(Ne.date));Q({...ne,attendanceHistory:Se})}catch(ne){console.error("Error fetching attendance history:",ne),alert("Error fetching attendance history: "+ne.message)}},Me=()=>{Q(null)},Je=b.reduce((H,ne)=>H+ne.salary,0),ae=(()=>{const H=t.filter(Te=>Te.status==="present").length,ne=t.filter(Te=>Te.status==="absent").length,Se=H+ne,Ne=Se>0?Math.round(H/Se*100):0;return{presentCount:H,absentCount:ne,totalCount:Se,percentage:Ne}})(),$=H=>{const{name:ne,value:Se}=H.target;ze(Ne=>({...Ne,[ne]:Se}))},ye=async H=>{if(H.preventDefault(),!U){if(D(!0),!Ie.name||!Ie.role||!Ie.perDaySalary){alert("Please fill in all required fields (Name, Role, and Per Day Salary)"),D(!1);return}try{const Se={staffId:`STF${String(Date.now()).slice(-4)}`,name:Ie.name,role:Ie.role,perDaySalary:parseFloat(Ie.perDaySalary),contact:Ie.contact||"",email:Ie.email||"",createdAt:new Date().toISOString()};await pt.addStaff(Se),ze({name:"",role:"",perDaySalary:"",contact:"",email:""}),K(!1),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff member added successfully!"}}))}catch(ne){console.error("Error adding staff:",ne),alert(`Error adding staff: ${ne.message}`)}finally{D(!1)}}},me=H=>{H&&H.target===H.currentTarget&&(N(!1),x(null),M("")),H||(N(!1),x(null),M(""))};return c.jsxs("div",{className:"attendance-container",children:[c.jsxs("div",{className:"header",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{children:"Staff Attendance & Salary"}),c.jsx("p",{})]}),c.jsx("div",{className:"header-right",children:c.jsxs("div",{className:"tab-navigation",children:[c.jsx("button",{className:`tab-button ${O==="attendance"?"active":""}`,onClick:()=>B("attendance"),children:"Daily Attendance"}),c.jsx("button",{className:`tab-button ${O==="salary"?"active":""}`,onClick:()=>B("salary"),children:"Salary Summary"})]})})]}),O==="attendance"&&c.jsx("div",{className:"add-staff-section",children:c.jsx("button",{className:"add-staff-button",onClick:()=>K(!P),children:P?"Cancel":"Add New Staff Member"})}),O==="attendance"&&P&&c.jsxs("div",{className:"add-staff-form",children:[c.jsx("h2",{children:"Add New Staff Member"}),c.jsxs("form",{onSubmit:ye,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Name *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:Ie.name,onChange:$,placeholder:"Enter staff name",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"role",children:"Role *"}),c.jsx("input",{type:"text",id:"role",name:"role",value:Ie.role,onChange:$,placeholder:"Enter staff role",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"perDaySalary",children:"Per Day Salary *"}),c.jsx("input",{type:"number",id:"perDaySalary",name:"perDaySalary",value:Ie.perDaySalary,onChange:$,placeholder:"Enter per day salary",min:"0",step:"0.01",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"contact",children:"Contact"}),c.jsx("input",{type:"text",id:"contact",name:"contact",value:Ie.contact,onChange:$,placeholder:"Enter contact number"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",name:"email",value:Ie.email,onChange:$,placeholder:"Enter email address"})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"submit-button",disabled:U,children:U?"Adding Staff...":"Add Staff Member"}),c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>K(!1),disabled:U,children:"Cancel"})]})]})]}),O==="salary"&&c.jsxs("div",{className:"filters",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{htmlFor:"staffNameFilter",children:"Staff Name:"}),c.jsx("input",{type:"text",id:"staffNameFilter",placeholder:"Filter by staff name...",value:E.staffName,onChange:H=>w({...E,staffName:H.target.value})})]}),c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{htmlFor:"salary-month",children:"Select Month:"}),c.jsx("input",{type:"month",id:"salary-month",value:g,onChange:ce,required:!0})]})]}),c.jsx("div",{className:"date-selection",children:O==="attendance"?c.jsxs("div",{className:"date-picker-container",children:[c.jsx("label",{htmlFor:"attendance-date",children:"Select Date: "}),c.jsx("input",{type:"date",id:"attendance-date",value:h,onChange:G,max:new Date().toISOString().split("T")[0],required:!0})]}):null}),O==="attendance"&&c.jsxs("div",{className:"attendance-section",children:[c.jsxs("h2",{children:["Attendance for ",new Date(h).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),c.jsxs("div",{className:"attendance-stats",children:[c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.1s"},children:[c.jsx("div",{className:"stat-value",children:ae.presentCount}),c.jsx("div",{className:"stat-label",children:"Present"})]}),c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.2s"},children:[c.jsx("div",{className:"stat-value",children:ae.absentCount}),c.jsx("div",{className:"stat-label",children:"Absent"})]}),c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.3s"},children:[c.jsxs("div",{className:"stat-value",children:[ae.percentage,"%"]}),c.jsx("div",{className:"stat-label",children:"Attendance Rate"})]}),c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.4s"},children:[c.jsxs("div",{className:"stat-value",children:[ae.totalCount,"/",s.length]}),c.jsx("div",{className:"stat-label",children:"Marked"})]})]}),s.length===0?c.jsx("div",{className:"no-staff",children:c.jsx("p",{children:"No staff members found. Please add staff members first."})}):c.jsx("div",{className:"attendance-list",children:_e.map((H,ne)=>{const Se=xe(H.staffId);return c.jsxs("div",{className:"staff-item",style:{animationDelay:`${ne*.1}s`},children:[c.jsxs("div",{className:"staff-info",children:[c.jsx("h3",{children:H.name}),c.jsxs("p",{children:["ID: ",H.staffId||H.id]}),c.jsxs("p",{children:["Role: ",H.role]})]}),c.jsxs("div",{className:"staff-actions",children:[c.jsx("button",{className:`attendance-toggle ${Se||"not-marked"}`,onClick:()=>ve(H.staffId),children:Se==="present"?" Present":Se==="absent"?" Absent":"Mark Attendance"}),c.jsx("button",{className:"delete-button",onClick:()=>R(H.staffId),children:""})]})]},H.staffId)})})]}),O==="salary"&&c.jsxs("div",{className:"salary-section",children:[c.jsxs("h2",{children:["Salary Summary for ",new Date(g+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})]}),c.jsx("div",{className:"summary-card",children:c.jsxs("div",{className:"summary-content",children:[c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.1s"},children:[c.jsx("span",{children:"Total Staff:"}),c.jsx("span",{className:"summary-value",children:oe.length})]}),c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.2s"},children:[c.jsx("span",{children:"Total Salary:"}),c.jsxs("span",{className:"summary-value salary-amount",children:["",Je.toFixed(2)]})]}),c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.3s"},children:[c.jsx("span",{children:"Average Salary:"}),c.jsxs("span",{className:"summary-value salary-amount",children:["",oe.length>0?(Je/oe.length).toFixed(2):"0.00"]})]}),c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.4s"},children:[c.jsx("span",{children:"Month:"}),c.jsx("span",{className:"summary-value",children:new Date(g+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]})}),c.jsx("div",{className:"salary-cards",children:oe.map((H,ne)=>c.jsxs("div",{className:"salary-card",style:{animationDelay:`${ne*.1}s`},onClick:()=>Ce(H.staffId),children:[c.jsxs("div",{className:"card-header",children:[c.jsx("h3",{children:H.staffName}),c.jsx("span",{className:"role-badge",children:H.role})]}),c.jsxs("div",{className:"salary-details",children:[c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{children:"Present Days:"}),c.jsx("span",{className:"present-count",children:H.presentDays})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{children:"Daily Salary:"}),c.jsxs("span",{children:["",H.perDaySalary.toFixed(2)]})]}),c.jsxs("div",{className:"salary-total",children:[c.jsx("span",{children:"Total Salary:"}),c.jsxs("span",{className:"salary-amount",children:["",H.salary.toFixed(2)]})]})]})]},H.staffId))})]}),V&&c.jsx("div",{className:"modal-overlay",onClick:Me,children:c.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:["Attendance History for ",V.name]}),c.jsx("button",{className:"close-button",onClick:Me,children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"staff-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"ID:"})," ",V.staffId]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Role:"})," ",V.role]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Daily Salary:"})," ",V.perDaySalary]})]}),c.jsxs("div",{className:"attendance-history-list",children:[c.jsx("h3",{children:"Attendance Records"}),V.attendanceHistory.length>0?c.jsx("div",{className:"history-records",children:V.attendanceHistory.map((H,ne)=>c.jsxs("div",{className:"history-record",children:[c.jsx("div",{className:"record-date",children:c.jsx("strong",{children:new Date(H.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),c.jsx("div",{className:"record-status",children:c.jsx("span",{className:`status-badge ${H.status}`,children:H.status})}),H.class&&c.jsx("div",{className:"record-class",children:c.jsx("span",{className:"class-badge",children:H.class})}),H.markedAt&&c.jsxs("div",{className:"record-time",children:["Marked at: ",new Date(H.markedAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]})]},H.id||ne))}):c.jsx("p",{className:"no-records",children:"No attendance records found for this staff member."})]})]})]})}),ee&&c.jsx("div",{className:"modal-overlay",onClick:me,children:c.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Select Class"}),c.jsx("button",{className:"close-button",onClick:me,children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"class-select",children:"Choose a class:"}),c.jsxs("select",{id:"class-select",value:j,onChange:H=>M(H.target.value),className:"class-select",children:[c.jsx("option",{value:"",children:"-- Select Class --"}),c.jsx("option",{value:"Nursery",children:"Nursery"}),c.jsx("option",{value:"LKG",children:"LKG"}),c.jsx("option",{value:"UKG",children:"UKG"}),c.jsx("option",{value:"1st",children:"1st"}),c.jsx("option",{value:"2nd",children:"2nd"}),c.jsx("option",{value:"3rd",children:"3rd"}),c.jsx("option",{value:"4th",children:"4th"}),c.jsx("option",{value:"5th",children:"5th"}),c.jsx("option",{value:"6th",children:"6th"}),c.jsx("option",{value:"7th",children:"7th"}),c.jsx("option",{value:"8th",children:"8th"}),c.jsx("option",{value:"9th",children:"9th"}),c.jsx("option",{value:"10th",children:"10th"}),c.jsx("option",{value:"11th",children:"11th"}),c.jsx("option",{value:"12th",children:"12th"})]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{className:"submit-button",onClick:H=>{H.preventDefault(),H.stopPropagation(),z(H)},disabled:!j||U,type:"button",children:U?"Saving...":"Save Attendance"}),c.jsx("button",{className:"cancel-button",onClick:me,children:"Cancel"})]})]})]})})]})},FM=()=>{const[s,e]=I.useState("basic"),[t,i]=I.useState("monthly"),[o,u]=I.useState(!1),h=[{id:"basic",name:"Basic Plan",price:{monthly:499,yearly:4999},features:["Up to 100 students","Basic fee tracking","Email support","Monthly reports"],popular:!1},{id:"premium",name:"Premium Plan",price:{monthly:999,yearly:9999},features:["Unlimited students","Advanced fee tracking","Priority support","Real-time analytics","Custom reports","Attendance tracking","Expense management"],popular:!0},{id:"enterprise",name:"Enterprise Plan",price:{monthly:1999,yearly:19999},features:["Everything in Premium","Multi-school management","Dedicated account manager","API access","Custom integrations","24/7 phone support","On-premise deployment option"],popular:!1}],p=async()=>{u(!0),setTimeout(()=>{u(!1),alert(`Thank you for subscribing to the ${h.find(E=>E.id===s).name}!`)},2e3)},g=E=>t==="monthly"?E.price.monthly:E.price.yearly,y=E=>{const w=E.price.monthly*12,b=E.price.yearly;return Math.round((w-b)/w*100)};return c.jsxs("div",{className:"subscription-container",children:[c.jsxs("div",{className:"subscription-header",children:[c.jsx("h1",{children:"Choose Your Plan"}),c.jsx("p",{children:"Select the perfect plan for your institution's needs"})]}),c.jsxs("div",{className:"billing-toggle",children:[c.jsx("span",{className:t==="monthly"?"active":"",children:"Monthly"}),c.jsx("button",{className:`toggle-switch ${t==="yearly"?"yearly":""}`,onClick:()=>i(t==="monthly"?"yearly":"monthly"),children:c.jsx("div",{className:"toggle-slider"})}),c.jsxs("span",{className:t==="yearly"?"active":"",children:["Yearly ",c.jsx("span",{className:"savings-badge",children:"Save up to 17%"})]})]}),c.jsx("div",{className:"plans-grid",children:h.map(E=>c.jsxs("div",{className:`plan-card ${E.popular?"popular":""} ${s===E.id?"selected":""}`,onClick:()=>e(E.id),children:[E.popular&&c.jsx("div",{className:"popular-badge",children:"Most Popular"}),c.jsxs("div",{className:"plan-header",children:[c.jsx("h3",{children:E.name}),c.jsxs("div",{className:"plan-price",children:[c.jsxs("span",{className:"price",children:["",g(E).toLocaleString()]}),c.jsxs("span",{className:"billing-cycle",children:["/",t==="monthly"?"month":"year"]})]}),t==="yearly"&&c.jsxs("div",{className:"yearly-savings",children:["Save ",y(E),"% with yearly billing"]})]}),c.jsx("ul",{className:"plan-features",children:E.features.map((w,b)=>c.jsxs("li",{children:[c.jsx("span",{className:"checkmark",children:""}),w]},b))}),c.jsx("button",{className:`select-plan-btn ${s===E.id?"selected":""}`,onClick:w=>{w.stopPropagation(),e(E.id)},children:s===E.id?"Selected":"Select Plan"})]},E.id))}),c.jsxs("div",{className:"payment-section",children:[c.jsx("h2",{children:"Secure Payment"}),c.jsxs("div",{className:"payment-methods",children:[c.jsxs("div",{className:"payment-method",children:[c.jsx("input",{type:"radio",id:"credit-card",name:"payment-method",defaultChecked:!0}),c.jsx("label",{htmlFor:"credit-card",children:"Credit/Debit Card"})]}),c.jsxs("div",{className:"payment-method",children:[c.jsx("input",{type:"radio",id:"upi",name:"payment-method"}),c.jsx("label",{htmlFor:"upi",children:"UPI"})]}),c.jsxs("div",{className:"payment-method",children:[c.jsx("input",{type:"radio",id:"net-banking",name:"payment-method"}),c.jsx("label",{htmlFor:"net-banking",children:"Net Banking"})]})]}),c.jsx("button",{className:"subscribe-btn",onClick:p,disabled:o,children:o?"Processing...":`Subscribe Now ${g(h.find(E=>E.id===s)).toLocaleString()}/${t==="monthly"?"month":"year"}`}),c.jsx("p",{className:"secure-note",children:" Secure and encrypted payment. Cancel anytime."})]}),c.jsxs("div",{className:"faq-section",children:[c.jsx("h2",{children:"Frequently Asked Questions"}),c.jsxs("div",{className:"faq-item",children:[c.jsx("h3",{children:"Can I change my plan later?"}),c.jsx("p",{children:"Yes, you can upgrade or downgrade your plan at any time. Changes will be prorated."})]}),c.jsxs("div",{className:"faq-item",children:[c.jsx("h3",{children:"Is there a free trial?"}),c.jsx("p",{children:"We offer a 14-day free trial for the Premium plan. No credit card required."})]}),c.jsxs("div",{className:"faq-item",children:[c.jsx("h3",{children:"How do I cancel my subscription?"}),c.jsx("p",{children:"You can cancel your subscription anytime from your account settings. No cancellation fees."})]})]})]})},BM=()=>{const[s,e]=I.useState(""),[t,i]=I.useState(""),[o,u]=I.useState(""),[h,p]=I.useState(""),[g,y]=I.useState(""),[E,w]=I.useState(!1),[b,k]=I.useState(!1),[O,B]=I.useState(!1),P=vs();ks();const K=async()=>{w(!0),y("");try{const Q=new Pa,X=await PR(ps,Q);if(X.user.metadata.creationTime===X.user.metadata.lastSignInTime){const pe={email:X.user.email,phone:X.user.phoneNumber||"",firmName:h||"",displayName:X.user.displayName||X.user.email?.split("@")[0]||"User",createdAt:new Date,uid:X.user.uid};try{await o0(pe)}catch(ee){console.error("Error creating user profile:",ee)}}localStorage.setItem("isLoggedIn","true"),P("/dashboard")}catch(Q){console.error("Google authentication error:",Q);let X="Google authentication failed. Please try again.";switch(Q.code){case"auth/popup-blocked":X="Popup blocked by browser. Please allow popups and try again.";break;case"auth/cancelled-popup-request":X="Popup closed by user.";break;case"auth/account-exists-with-different-credential":X="Account exists with different credential. Please sign in using your email and password.";break;default:X=Q.message||X}y(X)}finally{w(!1)}},V=async Q=>{Q.preventDefault(),w(!0),y("");try{if(O)await cR(ps,s),y("Password reset email sent. Please check your inbox."),B(!1);else if(b){const X=await uR(ps,s,t);await fR(X.user,{displayName:h||s.split("@")[0]});const pe={email:s,phone:o,firmName:h,displayName:h||s.split("@")[0],createdAt:new Date,uid:X.user.uid};try{await o0(pe)}catch(ee){console.error("Error creating user profile:",ee)}localStorage.setItem("isLoggedIn","true"),P("/dashboard")}else await dR(ps,s,t),localStorage.setItem("isLoggedIn","true"),P("/dashboard")}catch(X){console.error("Authentication error:",X);let pe="Authentication failed. Please try again.";switch(X.code){case"auth/user-not-found":pe="No user found with this email.";break;case"auth/wrong-password":pe="Incorrect password.";break;case"auth/email-already-in-use":pe="Email already in use. Please try logging in instead.";break;case"auth/invalid-email":pe="Invalid email address.";break;case"auth/weak-password":pe="Password should be at least 6 characters.";break;case"auth/too-many-requests":pe="Too many requests. Please try again later.";break;default:pe=X.message||pe}y(pe)}finally{w(!1)}};return c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-card",children:[c.jsxs("div",{className:"login-header",children:[c.jsxs("h1",{children:[" ",O?"Reset Password":b?"Sign Up":"Access Required"]}),c.jsx("p",{children:O?"Enter your email to reset your password":b?"Create a new account":"Please sign in to continue"})]}),c.jsxs("form",{onSubmit:V,className:"login-form",children:[c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",value:s,onChange:Q=>e(Q.target.value),placeholder:"Enter your email",required:!0})]}),!O&&c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{type:"password",id:"password",value:t,onChange:Q=>i(Q.target.value),placeholder:"Enter your password",minLength:"6",required:!O})]}),b&&!O&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"phone",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phone",value:o,onChange:Q=>u(Q.target.value),placeholder:"Enter your phone number"})]}),c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"firmName",children:"Firm/Organization Name"}),c.jsx("input",{type:"text",id:"firmName",value:h,onChange:Q=>p(Q.target.value),placeholder:"Enter your firm or organization name"})]})]}),g&&c.jsx("div",{className:"error-message",children:g}),c.jsx("button",{type:"submit",className:"login-button",disabled:E||!s||!O&&!t,children:E?"Processing...":O?"Send Reset Email":b?"Sign Up":"Sign In"}),!O&&c.jsxs("button",{type:"button",className:"google-login-btn",onClick:K,disabled:E,children:[c.jsx("span",{className:"google-icon",children:"G"}),"Sign in with Google"]}),c.jsx("div",{className:"auth-options",children:O?c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>B(!1),children:"Back to Sign In"}):b?c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>k(!1),children:"Already have an account? Sign In"}):c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>k(!0),children:"Don't have an account? Sign Up"}),c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>B(!0),children:"Forgot Password?"})]})})]})]})})},zM=()=>{const s=vs(),[e,t]=I.useState([]);I.useEffect(()=>{const o=new Date,u=[];for(let h=5;h>=0;h--){const p=new Date(o.getFullYear(),o.getMonth()-h,1),g=p.toLocaleString("default",{month:"short"}),y=p.getFullYear().toString().slice(-2),E=35e3,w=E*.3,b=Math.max(0,E+(Math.random()-.5)*w*2);u.push({month:`${g} '${y}`,amount:Math.round(b)})}t(u)},[]);const i=()=>{if(!e||e.length===0)return"Insufficient data to generate insight.";const o=e[0]?.amount||0,u=e[e.length-1]?.amount||0;return u>o?`Collections show an overall upward trend with ${((u-o)/o*100).toFixed(1)}% growth. Maintaining follow-ups during low months can further stabilize cash flow.`:u<o?`Collections show a declining trend with ${((o-u)/o*100).toFixed(1)}% decrease. Focus on follow-ups to reverse this trend.`:"Collections remain stable over time. Maintaining consistent follow-ups is key to sustaining this performance."};return c.jsxs("div",{className:"collection-trend-page",children:[c.jsxs("div",{className:"page-header",children:[c.jsx("button",{className:"back-button",onClick:()=>s("/dashboard"),children:" Back to Dashboard"}),c.jsxs("div",{className:"header-content",children:[c.jsx("h1",{className:"page-title",children:"Collection Trend Over Time"}),c.jsxs("div",{className:"header-meta",children:[c.jsx("p",{className:"page-subtitle",children:"Month-wise fee collection performance"}),c.jsx("span",{className:"view-badge",children:"Monthly view"})]})]})]}),c.jsx("div",{className:"header-divider"}),c.jsx("div",{className:"chart-page-container",children:c.jsxs("div",{className:"analytics-panel",children:[c.jsxs("div",{className:"analytics-header",children:[c.jsx("h2",{className:"panel-title",children:"Collection Trend"}),c.jsx("p",{className:"panel-subtext",children:"Month-wise fee collection performance"})]}),c.jsxs("div",{className:"chart-card",children:[c.jsx(CM,{data:e,width:"100%",height:420}),c.jsxs("div",{className:"insight-card",children:[c.jsxs("div",{className:"insight-header",children:[c.jsx("span",{className:"insight-icon",children:""}),c.jsx("span",{className:"insight-label",children:"Key Insight"})]}),c.jsx("p",{className:"insight-text",children:i()})]})]})]})})]})},qM=()=>{const s=ks(),e=vs(),[t,i]=I.useState({show:!1,message:""}),o=()=>{switch(s.pathname){case"/":case"/dashboard":return"dashboard";case"/students":return"students";case"/student-details":return"students";case"/fees":return"fees";case"/expenses":return"expenses";case"/profile":return"profile";case"/settings":return"settings";case"/attendance":return"attendance";default:return"dashboard"}},[u,h]=I.useState(o());I.useEffect(()=>{h(o())},[s]),I.useEffect(()=>{const w=b=>{const{message:k}=b.detail;i({show:!0,message:k}),setTimeout(()=>{i({show:!1,message:""})},3e3)};return window.addEventListener("showSuccess",w),()=>{window.removeEventListener("showSuccess",w)}},[]);const p=w=>{switch(h(w),w){case"dashboard":e("/dashboard");break;case"students":e("/students");break;case"fees":e("/fees");break;case"expenses":e("/expenses");break;case"attendance":e("/attendance");break;case"profile":e("/profile");break;case"settings":e("/settings");break;default:e("/dashboard")}},g=async()=>{try{await Qp(ps),localStorage.removeItem("isLoggedIn"),e("/login")}catch(w){console.error("Error signing out:",w)}},y=w=>{switch(w){case"dashboard":return"";case"students":return"";case"fees":return"";case"expenses":return"";case"attendance":return"";case"profile":return"";case"settings":return"";default:return""}},E=w=>{switch(w){case"dashboard":return"Dashboard";case"students":return"Students";case"fees":return"Fees";case"expenses":return"Expenses";case"attendance":return"Attendance";case"profile":return"Profile";case"settings":return"Settings";default:return"Home"}};return c.jsxs("div",{className:"app",children:[t.show&&c.jsx("div",{className:`notification ${t.type}`,children:t.message}),c.jsxs("div",{className:"sidebar",children:[["dashboard","students","fees","expenses","attendance","profile","settings"].map(w=>c.jsxs("button",{className:`nav-item ${u===w?"active":""}`,onClick:()=>p(w),"data-tooltip":E(w),children:[c.jsx("div",{className:"nav-icon-container",children:c.jsx("span",{className:"nav-icon",children:y(w)})}),c.jsx("span",{className:"nav-label",children:E(w)})]},w)),c.jsxs("button",{className:"logout-btn",onClick:g,"data-tooltip":"Logout",children:[c.jsx("div",{className:"logout-icon-container",children:c.jsx("span",{className:"logout-icon",children:""})}),c.jsx("span",{className:"logout-label",children:"Logout"})]})]}),c.jsx("div",{className:"main-content",children:c.jsxs(XA,{children:[c.jsx(Fn,{path:"/",element:c.jsx(u0,{})}),c.jsx(Fn,{path:"/dashboard",element:c.jsx(u0,{})}),c.jsx(Fn,{path:"/students",element:c.jsx(kM,{})}),c.jsx(Fn,{path:"/student-details",element:c.jsx(MM,{})}),c.jsx(Fn,{path:"/fees",element:c.jsx(PM,{})}),c.jsx(Fn,{path:"/expenses",element:c.jsx(d0,{})}),c.jsx(Fn,{path:"/expense-form",element:c.jsx(OM,{})}),c.jsx(Fn,{path:"/monthly-expenses",element:c.jsx(d0,{})}),c.jsx(Fn,{path:"/profile",element:c.jsx(LM,{})}),c.jsx(Fn,{path:"/settings",element:c.jsx(UM,{})}),c.jsx(Fn,{path:"/attendance",element:c.jsx(VM,{})}),c.jsx(Fn,{path:"/subscription",element:c.jsx(FM,{})}),c.jsx(Fn,{path:"/collection-trend",element:c.jsx(zM,{})})]})}),c.jsxs("div",{className:"footer-summary",children:[c.jsxs("div",{className:"footer-left",children:[c.jsx("span",{children:"Last updated: 2 minutes ago"}),c.jsxs("div",{className:"sync-status",children:[c.jsx("span",{className:"sync-indicator"}),c.jsx("span",{children:"Data synced"})]})]}),c.jsx("div",{className:"footer-right",children:c.jsx("span",{children:" 2025 Victory Point Academy"})})]})]})},HM=()=>{const s=ks(),e=vs(),[t,i]=I.useState(()=>localStorage.getItem("isLoggedIn")==="true"),[o,u]=I.useState(!0);return I.useEffect(()=>{localStorage.getItem("darkMode")==="true"&&document.documentElement.setAttribute("data-theme","dark")},[]),I.useEffect(()=>{const h=Xp(ps,p=>{p?(i(!0),localStorage.setItem("isLoggedIn","true"),localStorage.removeItem("freshLogin")):(i(!1),localStorage.removeItem("isLoggedIn")),u(!1)});return()=>h()},[]),o?c.jsx("div",{className:"app-loading",children:c.jsx("div",{className:"loading-spinner",children:"Loading..."})}):t?(t&&s.pathname==="/login"&&e("/dashboard"),c.jsx(qM,{})):(s.pathname!=="/login"&&e("/login"),c.jsx(BM,{}))};function GM(){return c.jsx(vN,{children:c.jsx(HM,{})})}aA.createRoot(document.getElementById("root")).render(c.jsx(Qb.StrictMode,{children:c.jsx(GM,{})}));
