(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var JO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function GS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var K0={exports:{}},tf={};var xb;function g4(){if(xb)return tf;xb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:n,type:r,key:u,ref:s!==void 0?s:null,props:o}}return tf.Fragment=e,tf.jsx=t,tf.jsxs=t,tf}var Sb;function y4(){return Sb||(Sb=1,K0.exports=g4()),K0.exports}var c=y4(),X0={exports:{}},rn={};var _b;function v4(){if(_b)return rn;_b=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),E=Symbol.iterator;function w(Q){return Q===null||typeof Q!="object"?null:(Q=E&&Q[E]||Q["@@iterator"],typeof Q=="function"?Q:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,C={};function k(Q,P,Y){this.props=Q,this.context=P,this.refs=C,this.updater=Y||A}k.prototype.isReactComponent={},k.prototype.setState=function(Q,P){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,P,"setState")},k.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function H(){}H.prototype=k.prototype;function G(Q,P,Y){this.props=Q,this.context=P,this.refs=C,this.updater=Y||A}var V=G.prototype=new H;V.constructor=G,D(V,k.prototype),V.isPureReactComponent=!0;var ce=Array.isArray;function se(){}var U={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function R(Q,P,Y){var re=Y.ref;return{$$typeof:n,type:Q,key:P,ref:re!==void 0?re:null,props:Y}}function q(Q,P){return R(Q.type,P,Q.props)}function j(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===n}function F(Q){var P={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(Y){return P[Y]})}var M=/\/+/g;function ne(Q,P){return typeof Q=="object"&&Q!==null&&Q.key!=null?F(""+Q.key):P.toString(36)}function Se(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(se,se):(Q.status="pending",Q.then(function(P){Q.status==="pending"&&(Q.status="fulfilled",Q.value=P)},function(P){Q.status==="pending"&&(Q.status="rejected",Q.reason=P)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function le(Q,P,Y,re,fe){var me=typeof Q;(me==="undefined"||me==="boolean")&&(Q=null);var _e=!1;if(Q===null)_e=!0;else switch(me){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(Q.$$typeof){case n:case e:_e=!0;break;case m:return _e=Q._init,le(_e(Q._payload),P,Y,re,fe)}}if(_e)return fe=fe(Q),_e=re===""?"."+ne(Q,0):re,ce(fe)?(Y="",_e!=null&&(Y=_e.replace(M,"$&/")+"/"),le(fe,P,Y,"",function(Z){return Z})):fe!=null&&(j(fe)&&(fe=q(fe,Y+(fe.key==null||Q&&Q.key===fe.key?"":(""+fe.key).replace(M,"$&/")+"/")+_e)),P.push(fe)),1;_e=0;var Me=re===""?".":re+":";if(ce(Q))for(var Le=0;Le<Q.length;Le++)re=Q[Le],me=Me+ne(re,Le),_e+=le(re,P,Y,me,fe);else if(Le=w(Q),typeof Le=="function")for(Q=Le.call(Q),Le=0;!(re=Q.next()).done;)re=re.value,me=Me+ne(re,Le++),_e+=le(re,P,Y,me,fe);else if(me==="object"){if(typeof Q.then=="function")return le(Se(Q),P,Y,re,fe);throw P=String(Q),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ve(Q,P,Y){if(Q==null)return Q;var re=[],fe=0;return le(Q,re,"","",function(me){return P.call(Y,me,fe++)}),re}function ye(Q){if(Q._status===-1){var P=Q._result;P=P(),P.then(function(Y){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=Y)},function(Y){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=Y)}),Q._status===-1&&(Q._status=0,Q._result=P)}if(Q._status===1)return Q._result.default;throw Q._result}var ge=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)},we={map:ve,forEach:function(Q,P,Y){ve(Q,function(){P.apply(this,arguments)},Y)},count:function(Q){var P=0;return ve(Q,function(){P++}),P},toArray:function(Q){return ve(Q,function(P){return P})||[]},only:function(Q){if(!j(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}};return rn.Activity=x,rn.Children=we,rn.Component=k,rn.Fragment=t,rn.Profiler=s,rn.PureComponent=G,rn.StrictMode=r,rn.Suspense=f,rn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,rn.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return U.H.useMemoCache(Q)}},rn.cache=function(Q){return function(){return Q.apply(null,arguments)}},rn.cacheSignal=function(){return null},rn.cloneElement=function(Q,P,Y){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var re=D({},Q.props),fe=Q.key;if(P!=null)for(me in P.key!==void 0&&(fe=""+P.key),P)!I.call(P,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&P.ref===void 0||(re[me]=P[me]);var me=arguments.length-2;if(me===1)re.children=Y;else if(1<me){for(var _e=Array(me),Me=0;Me<me;Me++)_e[Me]=arguments[Me+2];re.children=_e}return R(Q.type,fe,re)},rn.createContext=function(Q){return Q={$$typeof:u,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:o,_context:Q},Q},rn.createElement=function(Q,P,Y){var re,fe={},me=null;if(P!=null)for(re in P.key!==void 0&&(me=""+P.key),P)I.call(P,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(fe[re]=P[re]);var _e=arguments.length-2;if(_e===1)fe.children=Y;else if(1<_e){for(var Me=Array(_e),Le=0;Le<_e;Le++)Me[Le]=arguments[Le+2];fe.children=Me}if(Q&&Q.defaultProps)for(re in _e=Q.defaultProps,_e)fe[re]===void 0&&(fe[re]=_e[re]);return R(Q,me,fe)},rn.createRef=function(){return{current:null}},rn.forwardRef=function(Q){return{$$typeof:d,render:Q}},rn.isValidElement=j,rn.lazy=function(Q){return{$$typeof:m,_payload:{_status:-1,_result:Q},_init:ye}},rn.memo=function(Q,P){return{$$typeof:p,type:Q,compare:P===void 0?null:P}},rn.startTransition=function(Q){var P=U.T,Y={};U.T=Y;try{var re=Q(),fe=U.S;fe!==null&&fe(Y,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(se,ge)}catch(me){ge(me)}finally{P!==null&&Y.types!==null&&(P.types=Y.types),U.T=P}},rn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},rn.use=function(Q){return U.H.use(Q)},rn.useActionState=function(Q,P,Y){return U.H.useActionState(Q,P,Y)},rn.useCallback=function(Q,P){return U.H.useCallback(Q,P)},rn.useContext=function(Q){return U.H.useContext(Q)},rn.useDebugValue=function(){},rn.useDeferredValue=function(Q,P){return U.H.useDeferredValue(Q,P)},rn.useEffect=function(Q,P){return U.H.useEffect(Q,P)},rn.useEffectEvent=function(Q){return U.H.useEffectEvent(Q)},rn.useId=function(){return U.H.useId()},rn.useImperativeHandle=function(Q,P,Y){return U.H.useImperativeHandle(Q,P,Y)},rn.useInsertionEffect=function(Q,P){return U.H.useInsertionEffect(Q,P)},rn.useLayoutEffect=function(Q,P){return U.H.useLayoutEffect(Q,P)},rn.useMemo=function(Q,P){return U.H.useMemo(Q,P)},rn.useOptimistic=function(Q,P){return U.H.useOptimistic(Q,P)},rn.useReducer=function(Q,P,Y){return U.H.useReducer(Q,P,Y)},rn.useRef=function(Q){return U.H.useRef(Q)},rn.useState=function(Q){return U.H.useState(Q)},rn.useSyncExternalStore=function(Q,P,Y){return U.H.useSyncExternalStore(Q,P,Y)},rn.useTransition=function(){return U.H.useTransition()},rn.version="19.2.0",rn}var Eb;function U1(){return Eb||(Eb=1,X0.exports=v4()),X0.exports}var K=U1();const b4=GS(K);var Q0={exports:{}},nf={},J0={exports:{}},Z0={};var Nb;function w4(){return Nb||(Nb=1,(function(n){function e(le,ve){var ye=le.length;le.push(ve);e:for(;0<ye;){var ge=ye-1>>>1,we=le[ge];if(0<s(we,ve))le[ge]=ve,le[ye]=we,ye=ge;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var ve=le[0],ye=le.pop();if(ye!==ve){le[0]=ye;e:for(var ge=0,we=le.length,Q=we>>>1;ge<Q;){var P=2*(ge+1)-1,Y=le[P],re=P+1,fe=le[re];if(0>s(Y,ye))re<we&&0>s(fe,Y)?(le[ge]=fe,le[re]=ye,ge=re):(le[ge]=Y,le[P]=ye,ge=P);else if(re<we&&0>s(fe,ye))le[ge]=fe,le[re]=ye,ge=re;else break e}}return ve}function s(le,ve){var ye=le.sortIndex-ve.sortIndex;return ye!==0?ye:le.id-ve.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var f=[],p=[],m=1,x=null,E=3,w=!1,A=!1,D=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function V(le){for(var ve=t(p);ve!==null;){if(ve.callback===null)r(p);else if(ve.startTime<=le)r(p),ve.sortIndex=ve.expirationTime,e(f,ve);else break;ve=t(p)}}function ce(le){if(D=!1,V(le),!A)if(t(f)!==null)A=!0,se||(se=!0,F());else{var ve=t(p);ve!==null&&Se(ce,ve.startTime-le)}}var se=!1,U=-1,I=5,R=-1;function q(){return C?!0:!(n.unstable_now()-R<I)}function j(){if(C=!1,se){var le=n.unstable_now();R=le;var ve=!0;try{e:{A=!1,D&&(D=!1,H(U),U=-1),w=!0;var ye=E;try{t:{for(V(le),x=t(f);x!==null&&!(x.expirationTime>le&&q());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,E=x.priorityLevel;var we=ge(x.expirationTime<=le);if(le=n.unstable_now(),typeof we=="function"){x.callback=we,V(le),ve=!0;break t}x===t(f)&&r(f),V(le)}else r(f);x=t(f)}if(x!==null)ve=!0;else{var Q=t(p);Q!==null&&Se(ce,Q.startTime-le),ve=!1}}break e}finally{x=null,E=ye,w=!1}ve=void 0}}finally{ve?F():se=!1}}}var F;if(typeof G=="function")F=function(){G(j)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,ne=M.port2;M.port1.onmessage=j,F=function(){ne.postMessage(null)}}else F=function(){k(j,0)};function Se(le,ve){U=k(function(){le(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(le){switch(E){case 1:case 2:case 3:var ve=3;break;default:ve=E}var ye=E;E=ve;try{return le()}finally{E=ye}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(le,ve){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var ye=E;E=le;try{return ve()}finally{E=ye}},n.unstable_scheduleCallback=function(le,ve,ye){var ge=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ge+ye:ge):ye=ge,le){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ye+we,le={id:m++,callback:ve,priorityLevel:le,startTime:ye,expirationTime:we,sortIndex:-1},ye>ge?(le.sortIndex=ye,e(p,le),t(f)===null&&le===t(p)&&(D?(H(U),U=-1):D=!0,Se(ce,ye-ge))):(le.sortIndex=we,e(f,le),A||w||(A=!0,se||(se=!0,F()))),le},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(le){var ve=E;return function(){var ye=E;E=ve;try{return le.apply(this,arguments)}finally{E=ye}}}})(Z0)),Z0}var Ab;function x4(){return Ab||(Ab=1,J0.exports=w4()),J0.exports}var ey={exports:{}},ws={};var Tb;function S4(){if(Tb)return ws;Tb=1;var n=U1();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,p,m){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:x==null?null:""+x,children:f,containerInfo:p,implementation:m}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return ws.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ws.createPortal=function(f,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(f,p,null,m)},ws.flushSync=function(f){var p=u.T,m=r.p;try{if(u.T=null,r.p=2,f)return f()}finally{u.T=p,r.p=m,r.d.f()}},ws.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(f,p))},ws.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},ws.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var m=p.as,x=d(m,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?r.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:E,fetchPriority:w}):m==="script"&&r.d.X(f,{crossOrigin:x,integrity:E,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},ws.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=d(p.as,p.crossOrigin);r.d.M(f,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(f)},ws.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,x=d(m,p.crossOrigin);r.d.L(f,m,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},ws.preloadModule=function(f,p){if(typeof f=="string")if(p){var m=d(p.as,p.crossOrigin);r.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(f)},ws.requestFormReset=function(f){r.d.r(f)},ws.unstable_batchedUpdates=function(f,p){return f(p)},ws.useFormState=function(f,p,m){return u.H.useFormState(f,p,m)},ws.useFormStatus=function(){return u.H.useHostTransitionStatus()},ws.version="19.2.0",ws}var Cb;function _4(){if(Cb)return ey.exports;Cb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ey.exports=S4(),ey.exports}var jb;function E4(){if(jb)return nf;jb=1;var n=x4(),e=U1(),t=_4();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function f(i){if(o(i)!==i)throw Error(r(188))}function p(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,h=a;;){var v=l.return;if(v===null)break;var S=v.alternate;if(S===null){if(h=v.return,h!==null){l=h;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===l)return f(v),i;if(S===h)return f(v),a;S=S.sibling}throw Error(r(188))}if(l.return!==h.return)l=v,h=S;else{for(var O=!1,ee=v.child;ee;){if(ee===l){O=!0,l=v,h=S;break}if(ee===h){O=!0,h=v,l=S;break}ee=ee.sibling}if(!O){for(ee=S.child;ee;){if(ee===l){O=!0,l=S,h=v;break}if(ee===h){O=!0,h=S,l=v;break}ee=ee.sibling}if(!O)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function m(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=m(i),a!==null)return a;i=i.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),G=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=j&&i[j]||i["@@iterator"],typeof i=="function"?i:null)}var M=Symbol.for("react.client.reference");function ne(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===M?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case ce:return"Suspense";case se:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case G:return i.displayName||"Context";case H:return(i._context.displayName||"Context")+".Consumer";case V:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return a=i.displayName||null,a!==null?a:ne(i.type)||"Memo";case I:a=i._payload,i=i._init;try{return ne(i(a))}catch{}}return null}var Se=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},ge=[],we=-1;function Q(i){return{current:i}}function P(i){0>we||(i.current=ge[we],ge[we]=null,we--)}function Y(i,a){we++,ge[we]=i.current,i.current=a}var re=Q(null),fe=Q(null),me=Q(null),_e=Q(null);function Me(i,a){switch(Y(me,a),Y(fe,i),Y(re,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?H5(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=H5(a),i=G5(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}P(re),Y(re,i)}function Le(){P(re),P(fe),P(me)}function Z(i){i.memoizedState!==null&&Y(_e,i);var a=re.current,l=G5(a,i.type);a!==l&&(Y(fe,i),Y(re,l))}function ae(i){fe.current===i&&(P(re),P(fe)),_e.current===i&&(P(_e),Qh._currentValue=ye)}var Te,Ee;function pe(i){if(Te===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Te=a&&a[1]||"",Ee=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+i+Ee}var z=!1;function Ie(i,a){if(!i||z)return"";z=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var rt=function(){throw Error()};if(Object.defineProperty(rt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(rt,[])}catch(Ye){var Ge=Ye}Reflect.construct(i,[],rt)}else{try{rt.call()}catch(Ye){Ge=Ye}i.call(rt.prototype)}}else{try{throw Error()}catch(Ye){Ge=Ye}(rt=i())&&typeof rt.catch=="function"&&rt.catch(function(){})}}catch(Ye){if(Ye&&Ge&&typeof Ye.stack=="string")return[Ye.stack,Ge.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=h.DetermineComponentFrameRoot(),O=S[0],ee=S[1];if(O&&ee){var be=O.split(`
`),qe=ee.split(`
`);for(v=h=0;h<be.length&&!be[h].includes("DetermineComponentFrameRoot");)h++;for(;v<qe.length&&!qe[v].includes("DetermineComponentFrameRoot");)v++;if(h===be.length||v===qe.length)for(h=be.length-1,v=qe.length-1;1<=h&&0<=v&&be[h]!==qe[v];)v--;for(;1<=h&&0<=v;h--,v--)if(be[h]!==qe[v]){if(h!==1||v!==1)do if(h--,v--,0>v||be[h]!==qe[v]){var Je=`
`+be[h].replace(" at new "," at ");return i.displayName&&Je.includes("<anonymous>")&&(Je=Je.replace("<anonymous>",i.displayName)),Je}while(1<=h&&0<=v);break}}}finally{z=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?pe(l):""}function Be(i,a){switch(i.tag){case 26:case 27:case 5:return pe(i.type);case 16:return pe("Lazy");case 13:return i.child!==a&&a!==null?pe("Suspense Fallback"):pe("Suspense");case 19:return pe("SuspenseList");case 0:case 15:return Ie(i.type,!1);case 11:return Ie(i.type.render,!1);case 1:return Ie(i.type,!0);case 31:return pe("Activity");default:return""}}function $e(i){try{var a="",l=null;do a+=Be(i,l),l=i,i=i.return;while(i);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ce=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,et=n.unstable_cancelCallback,xt=n.unstable_shouldYield,vt=n.unstable_requestPaint,Ue=n.unstable_now,ot=n.unstable_getCurrentPriorityLevel,dt=n.unstable_ImmediatePriority,gt=n.unstable_UserBlockingPriority,De=n.unstable_NormalPriority,We=n.unstable_LowPriority,pt=n.unstable_IdlePriority,mt=n.log,ft=n.unstable_setDisableYieldValue,ct=null,bt=null;function wt(i){if(typeof mt=="function"&&ft(i),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(ct,i)}catch{}}var qt=Math.clz32?Math.clz32:Bt,Tt=Math.log,dn=Math.LN2;function Bt(i){return i>>>=0,i===0?32:31-(Tt(i)/dn|0)|0}var Ot=256,jn=262144,Dt=4194304;function Lt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function cn(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var v=0,S=i.suspendedLanes,O=i.pingedLanes;i=i.warmLanes;var ee=h&134217727;return ee!==0?(h=ee&~S,h!==0?v=Lt(h):(O&=ee,O!==0?v=Lt(O):l||(l=ee&~i,l!==0&&(v=Lt(l))))):(ee=h&~S,ee!==0?v=Lt(ee):O!==0?v=Lt(O):l||(l=h&~i,l!==0&&(v=Lt(l)))),v===0?0:a!==0&&a!==v&&(a&S)===0&&(S=v&-v,l=a&-a,S>=l||S===32&&(l&4194048)!==0)?a:v}function wi(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function ui(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zs(){var i=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),i}function Zr(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Ft(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function pa(i,a,l,h,v,S){var O=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var ee=i.entanglements,be=i.expirationTimes,qe=i.hiddenUpdates;for(l=O&~l;0<l;){var Je=31-qt(l),rt=1<<Je;ee[Je]=0,be[Je]=-1;var Ge=qe[Je];if(Ge!==null)for(qe[Je]=null,Je=0;Je<Ge.length;Je++){var Ye=Ge[Je];Ye!==null&&(Ye.lane&=-536870913)}l&=~rt}h!==0&&Xi(i,h,0),S!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=S&~(O&~a))}function Xi(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-qt(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&261930}function Pi(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-qt(l),v=1<<h;v&a|i[h]&a&&(i[h]|=a),l&=~v}}function Mi(i,a){var l=a&-a;return l=(l&42)!==0?1:Yn(l),(l&(i.suspendedLanes|a))!==0?0:l}function Yn(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function rr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Br(){var i=ve.p;return i!==0?i:(i=window.event,i===void 0?32:pb(i.type))}function xi(i,a){var l=ve.p;try{return ve.p=i,a()}finally{ve.p=l}}var di=Math.random().toString(36).slice(2),Un="__reactFiber$"+di,Qn="__reactProps$"+di,Vr="__reactContainer$"+di,Oi="__reactEvents$"+di,fs="__reactListeners$"+di,Ia="__reactHandles$"+di,js="__reactResources$"+di,Fi="__reactMarker$"+di;function ma(i){delete i[Un],delete i[Qn],delete i[Oi],delete i[fs],delete i[Ia]}function Qi(i){var a=i[Un];if(a)return a;for(var l=i.parentNode;l;){if(a=l[Vr]||l[Un]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=J5(i);i!==null;){if(l=i[Un])return l;i=J5(i)}return a}i=l,l=i.parentNode}return null}function Si(i){if(i=i[Un]||i[Vr]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function Ji(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function ps(i){var a=i[js];return a||(a=i[js]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yr(i){i[Fi]=!0}var Ro=new Set,Ui={};function ms(i,a){Rs(i,a),Rs(i+"Capture",a)}function Rs(i,a){for(Ui[i]=a,i=0;i<a.length;i++)Ro.add(a[i])}var to=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Io={},Do={};function ml(i){return Ce.call(Do,i)?!0:Ce.call(Io,i)?!1:to.test(i)?Do[i]=!0:(Io[i]=!0,!1)}function Zi(i,a,l){if(ml(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function hi(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function Nr(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}function pn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ga(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function gs(i,a,l){var h=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,S=h.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(O){l=""+O,S.call(this,O)}}),Object.defineProperty(i,a,{enumerable:h.enumerable}),{getValue:function(){return l},setValue:function(O){l=""+O},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Sn(i){if(!i._valueTracker){var a=ga(i)?"checked":"value";i._valueTracker=gs(i,a,""+i[a])}}function Da(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=ga(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function Dr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var hr=/[\n"\\]/g;function Ar(i){return i.replace(hr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function no(i,a,l,h,v,S,O,ee){i.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.type=O:i.removeAttribute("type"),a!=null?O==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+pn(a)):i.value!==""+pn(a)&&(i.value=""+pn(a)):O!=="submit"&&O!=="reset"||i.removeAttribute("value"),a!=null?gl(i,O,pn(a)):l!=null?gl(i,O,pn(l)):h!=null&&i.removeAttribute("value"),v==null&&S!=null&&(i.defaultChecked=!!S),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?i.name=""+pn(ee):i.removeAttribute("name")}function lc(i,a,l,h,v,S,O,ee){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.type=S),a!=null||l!=null){if(!(S!=="submit"&&S!=="reset"||a!=null)){Sn(i);return}l=l!=null?""+pn(l):"",a=a!=null?""+pn(a):l,ee||a===i.value||(i.value=a),i.defaultValue=a}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=ee?i.checked:!!h,i.defaultChecked=!!h,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(i.name=O),Sn(i)}function gl(i,a,l){a==="number"&&Dr(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function _i(i,a,l,h){if(i=i.options,a){a={};for(var v=0;v<l.length;v++)a["$"+l[v]]=!0;for(l=0;l<i.length;l++)v=a.hasOwnProperty("$"+i[l].value),i[l].selected!==v&&(i[l].selected=v),v&&h&&(i[l].defaultSelected=!0)}else{for(l=""+pn(l),a=null,v=0;v<i.length;v++){if(i[v].value===l){i[v].selected=!0,h&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function yl(i,a,l){if(a!=null&&(a=""+pn(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+pn(l):""}function ya(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(r(92));if(Se(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=pn(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h),Sn(i)}function ei(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var ka=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vl(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||ka.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function bl(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var v in a)h=a[v],a.hasOwnProperty(v)&&l[v]!==h&&vl(i,v,h)}else for(var S in a)a.hasOwnProperty(S)&&vl(i,S,a[S])}function ko(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bi(i){return va.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Is(){}var ba=null;function Vi(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var La=null,Vt=null;function ro(i){var a=Si(i);if(a&&(i=a.stateNode)){var l=i[Qn]||null;e:switch(i=a.stateNode,a.type){case"input":if(no(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ar(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var v=h[Qn]||null;if(!v)throw Error(r(90));no(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&Da(h)}break e;case"textarea":yl(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&_i(i,!!l.multiple,a,!1)}}}var Po=!1;function Pa(i,a,l){if(Po)return i(a,l);Po=!0;try{var h=i(a);return h}finally{if(Po=!1,(La!==null||Vt!==null)&&(Ap(),La&&(a=La,i=Vt,Vt=La=null,ro(a),i)))for(a=0;a<i.length;a++)ro(i[a])}}function ti(i,a){var l=i.stateNode;if(l===null)return null;var h=l[Qn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),io=!1;if(zr)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){io=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{io=!1}var es=null,so=null,Ds=null;function wl(){if(Ds)return Ds;var i,a=so,l=a.length,h,v="value"in es?es.value:es.textContent,S=v.length;for(i=0;i<l&&a[i]===v[i];i++);var O=l-i;for(h=1;h<=O&&a[l-h]===v[S-h];h++);return Ds=v.slice(i,1<h?1-h:void 0)}function ts(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function wa(){return!0}function ns(){return!1}function kr(i){function a(l,h,v,S,O){this._reactName=l,this._targetInst=v,this.type=h,this.nativeEvent=S,this.target=O,this.currentTarget=null;for(var ee in i)i.hasOwnProperty(ee)&&(l=i[ee],this[ee]=l?l(S):S[ee]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?wa:ns,this.isPropagationStopped=ns,this}return x(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),a}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fi=kr(qs),Hs=x({},qs,{view:0,detail:0}),Ma=kr(Hs),Gs,$s,ys,ao=x({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ht,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ys&&(ys&&i.type==="mousemove"?(Gs=i.screenX-ys.screenX,$s=i.screenY-ys.screenY):$s=Gs=0,ys=i),Gs)},movementY:function(i){return"movementY"in i?i.movementY:$s}}),Mo=kr(ao),rs=x({},ao,{dataTransfer:0}),Ws=kr(rs),xl=x({},Hs,{relatedTarget:0}),ks=kr(xl),Oo=x({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),_=kr(Oo),$=x({},qs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),de=kr($),xe=x({},qs,{data:0}),Re=kr(xe),Qe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},st={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Et={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jt(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Et[i])?!!a[i]:!1}function Ht(){return jt}var Ut=x({},Hs,{key:function(i){if(i.key){var a=Qe[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ts(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?st[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ht,charCode:function(i){return i.type==="keypress"?ts(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ts(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),gn=kr(Ut),ir=x({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kn=kr(ir),y=x({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ht}),T=kr(y),B=x({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ie=kr(B),Pe=x({},ao,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),He=kr(Pe),ht=x({},qs,{newState:0,oldState:0}),Jt=kr(ht),sr=[9,13,27,32],hn=zr&&"CompositionEvent"in window,Vn=null;zr&&"documentMode"in document&&(Vn=document.documentMode);var pi=zr&&"TextEvent"in window&&!Vn,Ei=zr&&(!hn||Vn&&8<Vn&&11>=Vn),Jn=" ",Ni=!1;function Ls(i,a){switch(i){case"keyup":return sr.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oa(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fa=!1;function is(i,a){switch(i){case"compositionend":return Oa(a);case"keypress":return a.which!==32?null:(Ni=!0,Jn);case"textInput":return i=a.data,i===Jn&&Ni?null:i;default:return null}}function oo(i,a){if(Fa)return i==="compositionend"||!hn&&Ls(i,a)?(i=wl(),Ds=so=es=null,Fa=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ei&&a.locale!=="ko"?null:a.data;default:return null}}var cc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pu(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!cc[i.type]:a==="textarea"}function Ps(i,a,l,h){La?Vt?Vt.push(h):Vt=[h]:La=h,a=kp(a,"onChange"),0<a.length&&(l=new fi("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var xa=null,lo=null;function mu(i){F5(i,0)}function Sa(i){var a=Ji(i);if(Da(a))return i}function Fo(i,a){if(i==="change")return a}var vs=!1;if(zr){var ss;if(zr){var Ua="oninput"in document;if(!Ua){var Ba=document.createElement("div");Ba.setAttribute("oninput","return;"),Ua=typeof Ba.oninput=="function"}ss=Ua}else ss=!1;vs=ss&&(!document.documentMode||9<document.documentMode)}function co(){xa&&(xa.detachEvent("onpropertychange",uc),lo=xa=null)}function uc(i){if(i.propertyName==="value"&&Sa(lo)){var a=[];Ps(a,lo,i,Vi(i)),Pa(mu,a)}}function dc(i,a,l){i==="focusin"?(co(),xa=a,lo=l,xa.attachEvent("onpropertychange",uc)):i==="focusout"&&co()}function Lr(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Sa(lo)}function nd(i,a){if(i==="click")return Sa(a)}function Va(i,a){if(i==="input"||i==="change")return Sa(a)}function za(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Ai=typeof Object.is=="function"?Object.is:za;function uo(i,a){if(Ai(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var v=l[h];if(!Ce.call(a,v)||!Ai(i[v],a[v]))return!1}return!0}function hc(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function fc(i,a){var l=hc(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=hc(l)}}function ho(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ho(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function fo(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Dr(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=Dr(i.document)}return a}function qa(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var Sl=zr&&"documentMode"in document&&11>=document.documentMode,Ms=null,po=null,zi=null,Ys=!1;function Mn(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ys||Ms==null||Ms!==Dr(h)||(h=Ms,"selectionStart"in h&&qa(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),zi&&uo(zi,h)||(zi=h,h=kp(po,"onSelect"),0<h.length&&(a=new fi("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=Ms)))}function Rn(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var ar={animationend:Rn("Animation","AnimationEnd"),animationiteration:Rn("Animation","AnimationIteration"),animationstart:Rn("Animation","AnimationStart"),transitionrun:Rn("Transition","TransitionRun"),transitionstart:Rn("Transition","TransitionStart"),transitioncancel:Rn("Transition","TransitionCancel"),transitionend:Rn("Transition","TransitionEnd")},Pr={},Ha={};zr&&(Ha=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function _a(i){if(Pr[i])return Pr[i];if(!ar[i])return i;var a=ar[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in Ha)return Pr[i]=a[l];return i}var _l=_a("animationend"),gu=_a("animationiteration"),wh=_a("animationstart"),np=_a("transitionrun"),rp=_a("transitionstart"),ip=_a("transitioncancel"),xh=_a("transitionend"),Sh=new Map,El="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");El.push("scrollEnd");function Ks(i,a){Sh.set(i,a),ms(a,[i])}var yu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Os=[],Nl=0,rd=0;function vu(){for(var i=Nl,a=rd=Nl=0;a<i;){var l=Os[a];Os[a++]=null;var h=Os[a];Os[a++]=null;var v=Os[a];Os[a++]=null;var S=Os[a];if(Os[a++]=null,h!==null&&v!==null){var O=h.pending;O===null?v.next=v:(v.next=O.next,O.next=v),h.pending=v}S!==0&&wu(l,v,S)}}function bu(i,a,l,h){Os[Nl++]=i,Os[Nl++]=a,Os[Nl++]=l,Os[Nl++]=h,rd|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function id(i,a,l,h){return bu(i,a,l,h),qi(i)}function mo(i,a){return bu(i,null,null,a),qi(i)}function wu(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var v=!1,S=i.return;S!==null;)S.childLanes|=l,h=S.alternate,h!==null&&(h.childLanes|=l),S.tag===22&&(i=S.stateNode,i===null||i._visibility&1||(v=!0)),i=S,S=S.return;return i.tag===3?(S=i.stateNode,v&&a!==null&&(v=31-qt(l),i=S.hiddenUpdates,h=i[v],h===null?i[v]=[a]:h.push(a),a.lane=l|536870912),S):null}function qi(i){if(50<Hh)throw Hh=0,b0=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Ti={};function sd(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(i,a,l,h){return new sd(i,a,l,h)}function ad(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Xs(i,a){var l=i.alternate;return l===null?(l=Hi(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function xu(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function pc(i,a,l,h,v,S){var O=0;if(h=i,typeof i=="function")ad(i)&&(O=1);else if(typeof i=="string")O=i4(i,l,re.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=Hi(31,l,a,v),i.elementType=R,i.lanes=S,i;case D:return Uo(l.children,v,S,a);case C:O=8,v|=24;break;case k:return i=Hi(12,l,a,v|2),i.elementType=k,i.lanes=S,i;case ce:return i=Hi(13,l,a,v),i.elementType=ce,i.lanes=S,i;case se:return i=Hi(19,l,a,v),i.elementType=se,i.lanes=S,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:O=10;break e;case H:O=9;break e;case V:O=11;break e;case U:O=14;break e;case I:O=16,h=null;break e}O=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return a=Hi(O,l,a,v),a.elementType=i,a.type=h,a.lanes=S,a}function Uo(i,a,l,h){return i=Hi(7,i,h,a),i.lanes=l,i}function Su(i,a,l){return i=Hi(6,i,null,a),i.lanes=l,i}function od(i){var a=Hi(18,null,null,0);return a.stateNode=i,a}function mc(i,a,l){return a=Hi(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var ld=new WeakMap;function Qs(i,a){if(typeof i=="object"&&i!==null){var l=ld.get(i);return l!==void 0?l:(a={value:i,source:a,stack:$e(a)},ld.set(i,a),a)}return{value:i,source:a,stack:$e(a)}}var gc=[],Al=0,cd=null,_u=0,Js=[],Zs=0,Bo=null,ea=1,ta="";function Fs(i,a){gc[Al++]=_u,gc[Al++]=cd,cd=i,_u=a}function sp(i,a,l){Js[Zs++]=ea,Js[Zs++]=ta,Js[Zs++]=Bo,Bo=i;var h=ea;i=ta;var v=32-qt(h)-1;h&=~(1<<v),l+=1;var S=32-qt(a)+v;if(30<S){var O=v-v%5;S=(h&(1<<O)-1).toString(32),h>>=O,v-=O,ea=1<<32-qt(a)+v|l<<v|h,ta=S+i}else ea=1<<S|l<<v|h,ta=i}function _h(i){i.return!==null&&(Fs(i,1),sp(i,1,0))}function ud(i){for(;i===cd;)cd=gc[--Al],gc[Al]=null,_u=gc[--Al],gc[Al]=null;for(;i===Bo;)Bo=Js[--Zs],Js[Zs]=null,ta=Js[--Zs],Js[Zs]=null,ea=Js[--Zs],Js[Zs]=null}function ap(i,a){Js[Zs++]=ea,Js[Zs++]=ta,Js[Zs++]=Bo,ea=a.id,ta=a.overflow,Bo=i}var Ci=null,fr=null,bn=!1,as=null,Tr=!1,Ea=Error(r(519));function Vo(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw yc(Qs(a,i)),Ea}function Eh(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[Un]=i,a[Qn]=h,l){case"dialog":xn("cancel",a),xn("close",a);break;case"iframe":case"object":case"embed":xn("load",a);break;case"video":case"audio":for(l=0;l<$h.length;l++)xn($h[l],a);break;case"source":xn("error",a);break;case"img":case"image":case"link":xn("error",a),xn("load",a);break;case"details":xn("toggle",a);break;case"input":xn("invalid",a),lc(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":xn("invalid",a);break;case"textarea":xn("invalid",a),ya(a,h.value,h.defaultValue,h.children)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||z5(a.textContent,l)?(h.popover!=null&&(xn("beforetoggle",a),xn("toggle",a)),h.onScroll!=null&&xn("scroll",a),h.onScrollEnd!=null&&xn("scrollend",a),h.onClick!=null&&(a.onclick=Is),a=!0):a=!1,a||Vo(i,!0)}function go(i){for(Ci=i.return;Ci;)switch(Ci.tag){case 5:case 31:case 13:Tr=!1;return;case 27:case 3:Tr=!0;return;default:Ci=Ci.return}}function ji(i){if(i!==Ci)return!1;if(!bn)return go(i),bn=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||L0(i.type,i.memoizedProps)),l=!l),l&&fr&&Vo(i),go(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));fr=Q5(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));fr=Q5(i)}else a===27?(a=fr,Ic(i.type)?(i=U0,U0=null,fr=i):fr=a):fr=Ci?Ya(i.stateNode.nextSibling):null;return!0}function Tl(){fr=Ci=null,bn=!1}function Nh(){var i=as;return i!==null&&(oa===null?oa=i:oa.push.apply(oa,i),as=null),i}function yc(i){as===null?as=[i]:as.push(i)}var dd=Q(null),zo=null,Ga=null;function qo(i,a,l){Y(dd,a._currentValue),a._currentValue=l}function na(i){i._currentValue=dd.current,P(dd)}function vc(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function Cl(i,a,l,h){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var S=v.dependencies;if(S!==null){var O=v.child;S=S.firstContext;e:for(;S!==null;){var ee=S;S=v;for(var be=0;be<a.length;be++)if(ee.context===a[be]){S.lanes|=l,ee=S.alternate,ee!==null&&(ee.lanes|=l),vc(S.return,l,i),h||(O=null);break e}S=ee.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(r(341));O.lanes|=l,S=O.alternate,S!==null&&(S.lanes|=l),vc(O,l,i),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===i){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Ho(i,a,l,h){i=null;for(var v=a,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var ee=v.type;Ai(v.pendingProps.value,O.value)||(i!==null?i.push(ee):i=[ee])}}else if(v===_e.current){if(O=v.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(Qh):i=[Qh])}v=v.return}i!==null&&Cl(a,i,l,h),a.flags|=262144}function hd(i){for(i=i.firstContext;i!==null;){if(!Ai(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Go(i){zo=i,Ga=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ri(i){return op(zo,i)}function fd(i,a){return zo===null&&Go(i),op(i,a)}function op(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ga===null){if(i===null)throw Error(r(308));Ga=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Ga=Ga.next=a;return l}var Fg=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},Ug=n.unstable_scheduleCallback,Bg=n.unstable_NormalPriority,Mr={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bc(){return{controller:new Fg,data:new Map,refCount:0}}function Eu(i){i.refCount--,i.refCount===0&&Ug(Bg,function(){i.controller.abort()})}var Nu=null,pd=0,g=0,b=null;function N(i,a){if(Nu===null){var l=Nu=[];pd=0,g=N0(),b={status:"pending",value:void 0,then:function(h){l.push(h)}}}return pd++,a.then(L,L),a}function L(){if(--pd===0&&Nu!==null){b!==null&&(b.status="fulfilled");var i=Nu;Nu=null,g=0,b=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function W(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var v=0;v<l.length;v++)(0,l[v])(a)},function(v){for(h.status="rejected",h.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),h}var X=le.S;le.S=function(i,a){h5=Ue(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&N(i,a),X!==null&&X(i,a)};var J=Q(null);function te(){var i=J.current;return i!==null?i:mr.pooledCache}function oe(i,a){a===null?Y(J,J.current):Y(J,a.pool)}function he(){var i=te();return i===null?null:{parent:Mr._currentValue,pool:i}}var Ne=Error(r(460)),Ve=Error(r(474)),ue=Error(r(542)),je={then:function(){}};function Oe(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xe(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(Is,Is),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,ut(i),i;default:if(typeof a.status=="string")a.then(Is,Is);else{if(i=mr,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=h}},function(h){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,ut(i),i}throw Ke=a,Ne}}function Fe(i){try{var a=i._init;return a(i._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ke=l,Ne):l}}var Ke=null;function tt(){if(Ke===null)throw Error(r(459));var i=Ke;return Ke=null,i}function ut(i){if(i===Ne||i===ue)throw Error(r(483))}var it=null,Rt=0;function St(i){var a=Rt;return Rt+=1,it===null&&(it=[]),Xe(it,i,a)}function Zt(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function At(i,a){throw a.$$typeof===E?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function yn(i){function a(ke,Ae){if(i){var ze=ke.deletions;ze===null?(ke.deletions=[Ae],ke.flags|=16):ze.push(Ae)}}function l(ke,Ae){if(!i)return null;for(;Ae!==null;)a(ke,Ae),Ae=Ae.sibling;return null}function h(ke){for(var Ae=new Map;ke!==null;)ke.key!==null?Ae.set(ke.key,ke):Ae.set(ke.index,ke),ke=ke.sibling;return Ae}function v(ke,Ae){return ke=Xs(ke,Ae),ke.index=0,ke.sibling=null,ke}function S(ke,Ae,ze){return ke.index=ze,i?(ze=ke.alternate,ze!==null?(ze=ze.index,ze<Ae?(ke.flags|=67108866,Ae):ze):(ke.flags|=67108866,Ae)):(ke.flags|=1048576,Ae)}function O(ke){return i&&ke.alternate===null&&(ke.flags|=67108866),ke}function ee(ke,Ae,ze,nt){return Ae===null||Ae.tag!==6?(Ae=Su(ze,ke.mode,nt),Ae.return=ke,Ae):(Ae=v(Ae,ze),Ae.return=ke,Ae)}function be(ke,Ae,ze,nt){var $t=ze.type;return $t===D?Je(ke,Ae,ze.props.children,nt,ze.key):Ae!==null&&(Ae.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===I&&Fe($t)===Ae.type)?(Ae=v(Ae,ze.props),Zt(Ae,ze),Ae.return=ke,Ae):(Ae=pc(ze.type,ze.key,ze.props,null,ke.mode,nt),Zt(Ae,ze),Ae.return=ke,Ae)}function qe(ke,Ae,ze,nt){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==ze.containerInfo||Ae.stateNode.implementation!==ze.implementation?(Ae=mc(ze,ke.mode,nt),Ae.return=ke,Ae):(Ae=v(Ae,ze.children||[]),Ae.return=ke,Ae)}function Je(ke,Ae,ze,nt,$t){return Ae===null||Ae.tag!==7?(Ae=Uo(ze,ke.mode,nt,$t),Ae.return=ke,Ae):(Ae=v(Ae,ze),Ae.return=ke,Ae)}function rt(ke,Ae,ze){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Ae=Su(""+Ae,ke.mode,ze),Ae.return=ke,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case w:return ze=pc(Ae.type,Ae.key,Ae.props,null,ke.mode,ze),Zt(ze,Ae),ze.return=ke,ze;case A:return Ae=mc(Ae,ke.mode,ze),Ae.return=ke,Ae;case I:return Ae=Fe(Ae),rt(ke,Ae,ze)}if(Se(Ae)||F(Ae))return Ae=Uo(Ae,ke.mode,ze,null),Ae.return=ke,Ae;if(typeof Ae.then=="function")return rt(ke,St(Ae),ze);if(Ae.$$typeof===G)return rt(ke,fd(ke,Ae),ze);At(ke,Ae)}return null}function Ge(ke,Ae,ze,nt){var $t=Ae!==null?Ae.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return $t!==null?null:ee(ke,Ae,""+ze,nt);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case w:return ze.key===$t?be(ke,Ae,ze,nt):null;case A:return ze.key===$t?qe(ke,Ae,ze,nt):null;case I:return ze=Fe(ze),Ge(ke,Ae,ze,nt)}if(Se(ze)||F(ze))return $t!==null?null:Je(ke,Ae,ze,nt,null);if(typeof ze.then=="function")return Ge(ke,Ae,St(ze),nt);if(ze.$$typeof===G)return Ge(ke,Ae,fd(ke,ze),nt);At(ke,ze)}return null}function Ye(ke,Ae,ze,nt,$t){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return ke=ke.get(ze)||null,ee(Ae,ke,""+nt,$t);if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case w:return ke=ke.get(nt.key===null?ze:nt.key)||null,be(Ae,ke,nt,$t);case A:return ke=ke.get(nt.key===null?ze:nt.key)||null,qe(Ae,ke,nt,$t);case I:return nt=Fe(nt),Ye(ke,Ae,ze,nt,$t)}if(Se(nt)||F(nt))return ke=ke.get(ze)||null,Je(Ae,ke,nt,$t,null);if(typeof nt.then=="function")return Ye(ke,Ae,ze,St(nt),$t);if(nt.$$typeof===G)return Ye(ke,Ae,ze,fd(Ae,nt),$t);At(Ae,nt)}return null}function Ct(ke,Ae,ze,nt){for(var $t=null,zn=null,Pt=Ae,un=Ae=0,En=null;Pt!==null&&un<ze.length;un++){Pt.index>un?(En=Pt,Pt=null):En=Pt.sibling;var qn=Ge(ke,Pt,ze[un],nt);if(qn===null){Pt===null&&(Pt=En);break}i&&Pt&&qn.alternate===null&&a(ke,Pt),Ae=S(qn,Ae,un),zn===null?$t=qn:zn.sibling=qn,zn=qn,Pt=En}if(un===ze.length)return l(ke,Pt),bn&&Fs(ke,un),$t;if(Pt===null){for(;un<ze.length;un++)Pt=rt(ke,ze[un],nt),Pt!==null&&(Ae=S(Pt,Ae,un),zn===null?$t=Pt:zn.sibling=Pt,zn=Pt);return bn&&Fs(ke,un),$t}for(Pt=h(Pt);un<ze.length;un++)En=Ye(Pt,ke,un,ze[un],nt),En!==null&&(i&&En.alternate!==null&&Pt.delete(En.key===null?un:En.key),Ae=S(En,Ae,un),zn===null?$t=En:zn.sibling=En,zn=En);return i&&Pt.forEach(function(Mc){return a(ke,Mc)}),bn&&Fs(ke,un),$t}function Kt(ke,Ae,ze,nt){if(ze==null)throw Error(r(151));for(var $t=null,zn=null,Pt=Ae,un=Ae=0,En=null,qn=ze.next();Pt!==null&&!qn.done;un++,qn=ze.next()){Pt.index>un?(En=Pt,Pt=null):En=Pt.sibling;var Mc=Ge(ke,Pt,qn.value,nt);if(Mc===null){Pt===null&&(Pt=En);break}i&&Pt&&Mc.alternate===null&&a(ke,Pt),Ae=S(Mc,Ae,un),zn===null?$t=Mc:zn.sibling=Mc,zn=Mc,Pt=En}if(qn.done)return l(ke,Pt),bn&&Fs(ke,un),$t;if(Pt===null){for(;!qn.done;un++,qn=ze.next())qn=rt(ke,qn.value,nt),qn!==null&&(Ae=S(qn,Ae,un),zn===null?$t=qn:zn.sibling=qn,zn=qn);return bn&&Fs(ke,un),$t}for(Pt=h(Pt);!qn.done;un++,qn=ze.next())qn=Ye(Pt,ke,un,qn.value,nt),qn!==null&&(i&&qn.alternate!==null&&Pt.delete(qn.key===null?un:qn.key),Ae=S(qn,Ae,un),zn===null?$t=qn:zn.sibling=qn,zn=qn);return i&&Pt.forEach(function(m4){return a(ke,m4)}),bn&&Fs(ke,un),$t}function ur(ke,Ae,ze,nt){if(typeof ze=="object"&&ze!==null&&ze.type===D&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case w:e:{for(var $t=ze.key;Ae!==null;){if(Ae.key===$t){if($t=ze.type,$t===D){if(Ae.tag===7){l(ke,Ae.sibling),nt=v(Ae,ze.props.children),nt.return=ke,ke=nt;break e}}else if(Ae.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===I&&Fe($t)===Ae.type){l(ke,Ae.sibling),nt=v(Ae,ze.props),Zt(nt,ze),nt.return=ke,ke=nt;break e}l(ke,Ae);break}else a(ke,Ae);Ae=Ae.sibling}ze.type===D?(nt=Uo(ze.props.children,ke.mode,nt,ze.key),nt.return=ke,ke=nt):(nt=pc(ze.type,ze.key,ze.props,null,ke.mode,nt),Zt(nt,ze),nt.return=ke,ke=nt)}return O(ke);case A:e:{for($t=ze.key;Ae!==null;){if(Ae.key===$t)if(Ae.tag===4&&Ae.stateNode.containerInfo===ze.containerInfo&&Ae.stateNode.implementation===ze.implementation){l(ke,Ae.sibling),nt=v(Ae,ze.children||[]),nt.return=ke,ke=nt;break e}else{l(ke,Ae);break}else a(ke,Ae);Ae=Ae.sibling}nt=mc(ze,ke.mode,nt),nt.return=ke,ke=nt}return O(ke);case I:return ze=Fe(ze),ur(ke,Ae,ze,nt)}if(Se(ze))return Ct(ke,Ae,ze,nt);if(F(ze)){if($t=F(ze),typeof $t!="function")throw Error(r(150));return ze=$t.call(ze),Kt(ke,Ae,ze,nt)}if(typeof ze.then=="function")return ur(ke,Ae,St(ze),nt);if(ze.$$typeof===G)return ur(ke,Ae,fd(ke,ze),nt);At(ke,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Ae!==null&&Ae.tag===6?(l(ke,Ae.sibling),nt=v(Ae,ze),nt.return=ke,ke=nt):(l(ke,Ae),nt=Su(ze,ke.mode,nt),nt.return=ke,ke=nt),O(ke)):l(ke,Ae)}return function(ke,Ae,ze,nt){try{Rt=0;var $t=ur(ke,Ae,ze,nt);return it=null,$t}catch(Pt){if(Pt===Ne||Pt===ue)throw Pt;var zn=Hi(29,Pt,null,ke.mode);return zn.lanes=nt,zn.return=ke,zn}finally{}}}var pr=yn(!0),nn=yn(!1),_t=!1;function yt(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vr(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Yt(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ln(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,($n&2)!==0){var v=h.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),h.pending=a,a=qi(i),wu(i,null,l),a}return bu(i,h,a,l),qi(i)}function Hn(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Pi(i,l)}}function ni(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var v=null,S=null;if(l=l.firstBaseUpdate,l!==null){do{var O={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};S===null?v=S=O:S=S.next=O,l=l.next}while(l!==null);S===null?v=S=a:S=S.next=a}else v=S=a;l={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Ii=!1;function or(){if(Ii){var i=b;if(i!==null)throw i}}function qr(i,a,l,h){Ii=!1;var v=i.updateQueue;_t=!1;var S=v.firstBaseUpdate,O=v.lastBaseUpdate,ee=v.shared.pending;if(ee!==null){v.shared.pending=null;var be=ee,qe=be.next;be.next=null,O===null?S=qe:O.next=qe,O=be;var Je=i.alternate;Je!==null&&(Je=Je.updateQueue,ee=Je.lastBaseUpdate,ee!==O&&(ee===null?Je.firstBaseUpdate=qe:ee.next=qe,Je.lastBaseUpdate=be))}if(S!==null){var rt=v.baseState;O=0,Je=qe=be=null,ee=S;do{var Ge=ee.lane&-536870913,Ye=Ge!==ee.lane;if(Ye?(_n&Ge)===Ge:(h&Ge)===Ge){Ge!==0&&Ge===g&&(Ii=!0),Je!==null&&(Je=Je.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var Ct=i,Kt=ee;Ge=a;var ur=l;switch(Kt.tag){case 1:if(Ct=Kt.payload,typeof Ct=="function"){rt=Ct.call(ur,rt,Ge);break e}rt=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Kt.payload,Ge=typeof Ct=="function"?Ct.call(ur,rt,Ge):Ct,Ge==null)break e;rt=x({},rt,Ge);break e;case 2:_t=!0}}Ge=ee.callback,Ge!==null&&(i.flags|=64,Ye&&(i.flags|=8192),Ye=v.callbacks,Ye===null?v.callbacks=[Ge]:Ye.push(Ge))}else Ye={lane:Ge,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},Je===null?(qe=Je=Ye,be=rt):Je=Je.next=Ye,O|=Ge;if(ee=ee.next,ee===null){if(ee=v.shared.pending,ee===null)break;Ye=ee,ee=Ye.next,Ye.next=null,v.lastBaseUpdate=Ye,v.shared.pending=null}}while(!0);Je===null&&(be=rt),v.baseState=be,v.firstBaseUpdate=qe,v.lastBaseUpdate=Je,S===null&&(v.shared.lanes=0),Ac|=O,i.lanes=O,i.memoizedState=rt}}function Gi(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Hr(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Gi(l[i],a)}var fn=Q(null),Dn=Q(0);function br(i,a){i=Fl,Y(Dn,i),Y(fn,a),Fl=i|a.baseLanes}function On(){Y(Dn,Fl),Y(fn,fn.current)}function ri(){Fl=Dn.current,P(fn),P(Dn)}var wr=Q(null),kn=null;function Or(i){var a=i.alternate;Y(In,In.current&1),Y(wr,i),kn===null&&(a===null||fn.current!==null||a.memoizedState!==null)&&(kn=i)}function Gn(i){Y(In,In.current),Y(wr,i),kn===null&&(kn=i)}function Gr(i){i.tag===22?(Y(In,In.current),Y(wr,i),kn===null&&(kn=i)):$r()}function $r(){Y(In,In.current),Y(wr,wr.current)}function Zn(i){P(wr),kn===i&&(kn=null),P(In)}var In=Q(0);function $i(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||O0(l)||F0(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Cr=0,zt=null,Gt=null,Ln=null,bs=!1,ra=!1,os=!1,Wr=0,$o=0,Wo=null,md=0;function lr(){throw Error(r(321))}function Ah(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Ai(i[l],a[l]))return!1;return!0}function Th(i,a,l,h,v,S){return Cr=S,zt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,le.H=i===null||i.memoizedState===null?_2:Yg,os=!1,S=l(h,v),os=!1,ra&&(S=yo(a,l,h,v)),gd(i),S}function gd(i){le.H=Ph;var a=Gt!==null&&Gt.next!==null;if(Cr=0,Ln=Gt=zt=null,bs=!1,$o=0,Wo=null,a)throw Error(r(300));i===null||gi||(i=i.dependencies,i!==null&&hd(i)&&(gi=!0))}function yo(i,a,l,h){zt=i;var v=0;do{if(ra&&(Wo=null),$o=0,ra=!1,25<=v)throw Error(r(301));if(v+=1,Ln=Gt=null,i.updateQueue!=null){var S=i.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}le.H=E2,S=a(l,h)}while(ra);return S}function Vg(){var i=le.H,a=i.useState()[0];return a=typeof a.then=="function"?Yo(a):a,i=i.useState()[0],(Gt!==null?Gt.memoizedState:null)!==i&&(zt.flags|=1024),a}function Ch(){var i=Wr!==0;return Wr=0,i}function jh(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function yd(i){if(bs){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}bs=!1}Cr=0,Ln=Gt=zt=null,ra=!1,$o=Wr=0,Wo=null}function mi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?zt.memoizedState=Ln=i:Ln=Ln.next=i,Ln}function jr(){if(Gt===null){var i=zt.alternate;i=i!==null?i.memoizedState:null}else i=Gt.next;var a=Ln===null?zt.memoizedState:Ln.next;if(a!==null)Ln=a,Gt=i;else{if(i===null)throw zt.alternate===null?Error(r(467)):Error(r(310));Gt=i,i={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Ln===null?zt.memoizedState=Ln=i:Ln=Ln.next=i}return Ln}function Au(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yo(i){var a=$o;return $o+=1,Wo===null&&(Wo=[]),i=Xe(Wo,i,a),a=zt,(Ln===null?a.memoizedState:Ln.next)===null&&(a=a.alternate,le.H=a===null||a.memoizedState===null?_2:Yg),i}function wc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Yo(i);if(i.$$typeof===G)return Ri(i)}throw Error(r(438,String(i)))}function jl(i){var a=null,l=zt.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=zt.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Au(),zt.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=q;return a.index++,l}function $a(i,a){return typeof a=="function"?a(i):a}function vd(i){var a=jr();return xc(a,Gt,i)}function xc(i,a,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var v=i.baseQueue,S=h.pending;if(S!==null){if(v!==null){var O=v.next;v.next=S.next,S.next=O}a.baseQueue=v=S,h.pending=null}if(S=i.baseState,v===null)i.memoizedState=S;else{a=v.next;var ee=O=null,be=null,qe=a,Je=!1;do{var rt=qe.lane&-536870913;if(rt!==qe.lane?(_n&rt)===rt:(Cr&rt)===rt){var Ge=qe.revertLane;if(Ge===0)be!==null&&(be=be.next={lane:0,revertLane:0,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),rt===g&&(Je=!0);else if((Cr&Ge)===Ge){qe=qe.next,Ge===g&&(Je=!0);continue}else rt={lane:0,revertLane:qe.revertLane,gesture:null,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},be===null?(ee=be=rt,O=S):be=be.next=rt,zt.lanes|=Ge,Ac|=Ge;rt=qe.action,os&&l(S,rt),S=qe.hasEagerState?qe.eagerState:l(S,rt)}else Ge={lane:rt,revertLane:qe.revertLane,gesture:qe.gesture,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null},be===null?(ee=be=Ge,O=S):be=be.next=Ge,zt.lanes|=rt,Ac|=rt;qe=qe.next}while(qe!==null&&qe!==a);if(be===null?O=S:be.next=ee,!Ai(S,i.memoizedState)&&(gi=!0,Je&&(l=b,l!==null)))throw l;i.memoizedState=S,i.baseState=O,i.baseQueue=be,h.lastRenderedState=S}return v===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function bd(i){var a=jr(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,v=l.pending,S=a.memoizedState;if(v!==null){l.pending=null;var O=v=v.next;do S=i(S,O.action),O=O.next;while(O!==v);Ai(S,a.memoizedState)||(gi=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),l.lastRenderedState=S}return[S,h]}function wd(i,a,l){var h=zt,v=jr(),S=bn;if(S){if(l===void 0)throw Error(r(407));l=l()}else l=a();var O=!Ai((Gt||v).memoizedState,l);if(O&&(v.memoizedState=l,gi=!0),v=v.queue,zg(Ih.bind(null,h,v,i),[i]),v.getSnapshot!==a||O||Ln!==null&&Ln.memoizedState.tag&1){if(h.flags|=2048,Il(9,{destroy:void 0},Rh.bind(null,h,v,l,a),null),mr===null)throw Error(r(349));S||(Cr&127)!==0||vo(h,a,l)}return l}function vo(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=zt.updateQueue,a===null?(a=Au(),zt.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Rh(i,a,l,h){a.value=l,a.getSnapshot=h,lp(a)&&Dh(i)}function Ih(i,a,l){return l(function(){lp(a)&&Dh(i)})}function lp(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Ai(i,l)}catch{return!0}}function Dh(i){var a=mo(i,2);a!==null&&la(a,i,2)}function Ko(i){var a=mi();if(typeof i=="function"){var l=i;if(i=l(),os){wt(!0);try{l()}finally{wt(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:i},a}function cp(i,a,l,h){return i.baseState=l,xc(i,Gt,typeof h=="function"?h:$a)}function up(i,a,l,h,v){if(pp(i))throw Error(r(485));if(i=a.action,i!==null){var S={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){S.listeners.push(O)}};le.T!==null?l(!0):S.isTransition=!1,h(S),l=a.pending,l===null?(S.next=a.pending=S,dp(a,S)):(S.next=l.next,a.pending=l.next=S)}}function dp(i,a){var l=a.action,h=a.payload,v=i.state;if(a.isTransition){var S=le.T,O={};le.T=O;try{var ee=l(v,h),be=le.S;be!==null&&be(O,ee),kh(i,a,ee)}catch(qe){Rl(i,a,qe)}finally{S!==null&&O.types!==null&&(S.types=O.types),le.T=S}}else try{S=l(v,h),kh(i,a,S)}catch(qe){Rl(i,a,qe)}}function kh(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){hp(i,a,h)},function(h){return Rl(i,a,h)}):hp(i,a,l)}function hp(i,a,l){a.status="fulfilled",a.value=l,xd(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,dp(i,l)))}function Rl(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,xd(a),a=a.next;while(a!==h)}i.action=null}function xd(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Tu(i,a){return a}function Wa(i,a){if(bn){var l=mr.formState;if(l!==null){e:{var h=zt;if(bn){if(fr){t:{for(var v=fr,S=Tr;v.nodeType!==8;){if(!S){v=null;break t}if(v=Ya(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){fr=Ya(v.nextSibling),h=v.data==="F!";break e}}Vo(h)}h=!1}h&&(a=l[0])}}return l=mi(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:a},l.queue=h,l=w2.bind(null,zt,h),h.dispatch=l,h=Ko(!1),S=Wg.bind(null,zt,!1,h.queue),h=mi(),v={state:a,dispatch:null,action:i,pending:null},h.queue=v,l=up.bind(null,zt,v,S,l),v.dispatch=l,h.memoizedState=i,[a,l,!1]}function bo(i){var a=jr();return wo(a,Gt,i)}function wo(i,a,l){if(a=xc(i,a,Tu)[0],i=vd($a)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Yo(a)}catch(O){throw O===Ne?ue:O}else h=a;a=jr();var v=a.queue,S=v.dispatch;return l!==a.memoizedState&&(zt.flags|=2048,Il(9,{destroy:void 0},Sd.bind(null,v,l),null)),[h,S,i]}function Sd(i,a){i.action=a}function _d(i){var a=jr(),l=Gt;if(l!==null)return wo(a,l,i);jr(),a=a.memoizedState,l=jr();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function Il(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=zt.updateQueue,a===null&&(a=Au(),zt.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function fp(){return jr().memoizedState}function Sc(i,a,l,h){var v=mi();zt.flags|=i,v.memoizedState=Il(1|a,{destroy:void 0},l,h===void 0?null:h)}function _c(i,a,l,h){var v=jr();h=h===void 0?null:h;var S=v.memoizedState.inst;Gt!==null&&h!==null&&Ah(h,Gt.memoizedState.deps)?v.memoizedState=Il(a,S,l,h):(zt.flags|=i,v.memoizedState=Il(1|a,S,l,h))}function a2(i,a){Sc(8390656,8,i,a)}function zg(i,a){_c(2048,8,i,a)}function c3(i){zt.flags|=4;var a=zt.updateQueue;if(a===null)a=Au(),zt.updateQueue=a,a.events=[i];else{var l=a.events;l===null?a.events=[i]:l.push(i)}}function o2(i){var a=jr().memoizedState;return c3({ref:a,nextImpl:i}),function(){if(($n&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function l2(i,a){return _c(4,2,i,a)}function c2(i,a){return _c(4,4,i,a)}function u2(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function d2(i,a,l){l=l!=null?l.concat([i]):null,_c(4,4,u2.bind(null,a,i),l)}function qg(){}function h2(i,a){var l=jr();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Ah(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function f2(i,a){var l=jr();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Ah(a,h[1]))return h[0];if(h=i(),os){wt(!0);try{i()}finally{wt(!1)}}return l.memoizedState=[h,a],h}function Hg(i,a,l){return l===void 0||(Cr&1073741824)!==0&&(_n&261930)===0?i.memoizedState=a:(i.memoizedState=l,i=p5(),zt.lanes|=i,Ac|=i,l)}function p2(i,a,l,h){return Ai(l,a)?l:fn.current!==null?(i=Hg(i,l,h),Ai(i,a)||(gi=!0),i):(Cr&42)===0||(Cr&1073741824)!==0&&(_n&261930)===0?(gi=!0,i.memoizedState=l):(i=p5(),zt.lanes|=i,Ac|=i,a)}function m2(i,a,l,h,v){var S=ve.p;ve.p=S!==0&&8>S?S:8;var O=le.T,ee={};le.T=ee,Wg(i,!1,a,l);try{var be=v(),qe=le.S;if(qe!==null&&qe(ee,be),be!==null&&typeof be=="object"&&typeof be.then=="function"){var Je=W(be,h);Lh(i,a,Je,Ta(i))}else Lh(i,a,h,Ta(i))}catch(rt){Lh(i,a,{then:function(){},status:"rejected",reason:rt},Ta())}finally{ve.p=S,O!==null&&ee.types!==null&&(O.types=ee.types),le.T=O}}function u3(){}function Gg(i,a,l,h){if(i.tag!==5)throw Error(r(476));var v=g2(i).queue;m2(i,v,a,ye,l===null?u3:function(){return y2(i),l(h)})}function g2(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:ye},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function y2(i){var a=g2(i);a.next===null&&(a=i.alternate.memoizedState),Lh(i,a.next.queue,{},Ta())}function $g(){return Ri(Qh)}function v2(){return jr().memoizedState}function b2(){return jr().memoizedState}function d3(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Ta();i=Yt(l);var h=ln(a,i,l);h!==null&&(la(h,a,l),Hn(h,a,l)),a={cache:bc()},i.payload=a;return}a=a.return}}function h3(i,a,l){var h=Ta();l={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},pp(i)?x2(a,l):(l=id(i,a,l,h),l!==null&&(la(l,i,h),S2(l,a,h)))}function w2(i,a,l){var h=Ta();Lh(i,a,l,h)}function Lh(i,a,l,h){var v={lane:h,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(pp(i))x2(a,v);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var O=a.lastRenderedState,ee=S(O,l);if(v.hasEagerState=!0,v.eagerState=ee,Ai(ee,O))return bu(i,a,v,0),mr===null&&vu(),!1}catch{}finally{}if(l=id(i,a,v,h),l!==null)return la(l,i,h),S2(l,a,h),!0}return!1}function Wg(i,a,l,h){if(h={lane:2,revertLane:N0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},pp(i)){if(a)throw Error(r(479))}else a=id(i,l,h,2),a!==null&&la(a,i,2)}function pp(i){var a=i.alternate;return i===zt||a!==null&&a===zt}function x2(i,a){ra=bs=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function S2(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,Pi(i,l)}}var Ph={readContext:Ri,use:wc,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useInsertionEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useSyncExternalStore:lr,useId:lr,useHostTransitionStatus:lr,useFormState:lr,useActionState:lr,useOptimistic:lr,useMemoCache:lr,useCacheRefresh:lr};Ph.useEffectEvent=lr;var _2={readContext:Ri,use:wc,useCallback:function(i,a){return mi().memoizedState=[i,a===void 0?null:a],i},useContext:Ri,useEffect:a2,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,Sc(4194308,4,u2.bind(null,a,i),l)},useLayoutEffect:function(i,a){return Sc(4194308,4,i,a)},useInsertionEffect:function(i,a){Sc(4,2,i,a)},useMemo:function(i,a){var l=mi();a=a===void 0?null:a;var h=i();if(os){wt(!0);try{i()}finally{wt(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=mi();if(l!==void 0){var v=l(a);if(os){wt(!0);try{l(a)}finally{wt(!1)}}}else v=a;return h.memoizedState=h.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},h.queue=i,i=i.dispatch=h3.bind(null,zt,i),[h.memoizedState,i]},useRef:function(i){var a=mi();return i={current:i},a.memoizedState=i},useState:function(i){i=Ko(i);var a=i.queue,l=w2.bind(null,zt,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:qg,useDeferredValue:function(i,a){var l=mi();return Hg(l,i,a)},useTransition:function(){var i=Ko(!1);return i=m2.bind(null,zt,i.queue,!0,!1),mi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=zt,v=mi();if(bn){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),mr===null)throw Error(r(349));(_n&127)!==0||vo(h,a,l)}v.memoizedState=l;var S={value:l,getSnapshot:a};return v.queue=S,a2(Ih.bind(null,h,S,i),[i]),h.flags|=2048,Il(9,{destroy:void 0},Rh.bind(null,h,S,l,a),null),l},useId:function(){var i=mi(),a=mr.identifierPrefix;if(bn){var l=ta,h=ea;l=(h&~(1<<32-qt(h)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Wr++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=md++,a="_"+a+"r_"+l.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:$g,useFormState:Wa,useActionState:Wa,useOptimistic:function(i){var a=mi();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Wg.bind(null,zt,!0,l),l.dispatch=a,[i,a]},useMemoCache:jl,useCacheRefresh:function(){return mi().memoizedState=d3.bind(null,zt)},useEffectEvent:function(i){var a=mi(),l={impl:i};return a.memoizedState=l,function(){if(($n&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}},Yg={readContext:Ri,use:wc,useCallback:h2,useContext:Ri,useEffect:zg,useImperativeHandle:d2,useInsertionEffect:l2,useLayoutEffect:c2,useMemo:f2,useReducer:vd,useRef:fp,useState:function(){return vd($a)},useDebugValue:qg,useDeferredValue:function(i,a){var l=jr();return p2(l,Gt.memoizedState,i,a)},useTransition:function(){var i=vd($a)[0],a=jr().memoizedState;return[typeof i=="boolean"?i:Yo(i),a]},useSyncExternalStore:wd,useId:v2,useHostTransitionStatus:$g,useFormState:bo,useActionState:bo,useOptimistic:function(i,a){var l=jr();return cp(l,Gt,i,a)},useMemoCache:jl,useCacheRefresh:b2};Yg.useEffectEvent=o2;var E2={readContext:Ri,use:wc,useCallback:h2,useContext:Ri,useEffect:zg,useImperativeHandle:d2,useInsertionEffect:l2,useLayoutEffect:c2,useMemo:f2,useReducer:bd,useRef:fp,useState:function(){return bd($a)},useDebugValue:qg,useDeferredValue:function(i,a){var l=jr();return Gt===null?Hg(l,i,a):p2(l,Gt.memoizedState,i,a)},useTransition:function(){var i=bd($a)[0],a=jr().memoizedState;return[typeof i=="boolean"?i:Yo(i),a]},useSyncExternalStore:wd,useId:v2,useHostTransitionStatus:$g,useFormState:_d,useActionState:_d,useOptimistic:function(i,a){var l=jr();return Gt!==null?cp(l,Gt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:jl,useCacheRefresh:b2};E2.useEffectEvent=o2;function Kg(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:x({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var Xg={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=Ta(),v=Yt(h);v.payload=a,l!=null&&(v.callback=l),a=ln(i,v,h),a!==null&&(la(a,i,h),Hn(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=Ta(),v=Yt(h);v.tag=1,v.payload=a,l!=null&&(v.callback=l),a=ln(i,v,h),a!==null&&(la(a,i,h),Hn(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Ta(),h=Yt(l);h.tag=2,a!=null&&(h.callback=a),a=ln(i,h,l),a!==null&&(la(a,i,l),Hn(a,i,l))}};function N2(i,a,l,h,v,S,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,S,O):a.prototype&&a.prototype.isPureReactComponent?!uo(l,h)||!uo(v,S):!0}function A2(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&Xg.enqueueReplaceState(a,a.state,null)}function Cu(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=x({},l));for(var v in i)l[v]===void 0&&(l[v]=i[v])}return l}function T2(i){yu(i)}function C2(i){console.error(i)}function j2(i){yu(i)}function mp(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function R2(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Qg(i,a,l){return l=Yt(l),l.tag=3,l.payload={element:null},l.callback=function(){mp(i,a)},l}function I2(i){return i=Yt(i),i.tag=3,i}function D2(i,a,l,h){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var S=h.value;i.payload=function(){return v(S)},i.callback=function(){R2(a,l,h)}}var O=l.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(i.callback=function(){R2(a,l,h),typeof v!="function"&&(Tc===null?Tc=new Set([this]):Tc.add(this));var ee=h.stack;this.componentDidCatch(h.value,{componentStack:ee!==null?ee:""})})}function f3(i,a,l,h,v){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&Ho(a,l,v,!0),l=wr.current,l!==null){switch(l.tag){case 31:case 13:return kn===null?Tp():l.alternate===null&&Yr===0&&(Yr=3),l.flags&=-257,l.flags|=65536,l.lanes=v,h===je?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),S0(i,h,v)),!1;case 22:return l.flags|=65536,h===je?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),S0(i,h,v)),!1}throw Error(r(435,l.tag))}return S0(i,h,v),Tp(),!1}if(bn)return a=wr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,h!==Ea&&(i=Error(r(422),{cause:h}),yc(Qs(i,l)))):(h!==Ea&&(a=Error(r(423),{cause:h}),yc(Qs(a,l))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,h=Qs(h,l),v=Qg(i.stateNode,h,v),ni(i,v),Yr!==4&&(Yr=2)),!1;var S=Error(r(520),{cause:h});if(S=Qs(S,l),qh===null?qh=[S]:qh.push(S),Yr!==4&&(Yr=2),a===null)return!0;h=Qs(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=v&-v,l.lanes|=i,i=Qg(l.stateNode,h,i),ni(l,i),!1;case 1:if(a=l.type,S=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Tc===null||!Tc.has(S))))return l.flags|=65536,v&=-v,l.lanes|=v,v=I2(v),D2(v,i,l,h),ni(l,v),!1}l=l.return}while(l!==null);return!1}var Jg=Error(r(461)),gi=!1;function ls(i,a,l,h){a.child=i===null?nn(a,null,l,h):pr(a,i.child,l,h)}function k2(i,a,l,h,v){l=l.render;var S=a.ref;if("ref"in h){var O={};for(var ee in h)ee!=="ref"&&(O[ee]=h[ee])}else O=h;return Go(a),h=Th(i,a,l,O,S,v),ee=Ch(),i!==null&&!gi?(jh(i,a,v),Dl(i,a,v)):(bn&&ee&&_h(a),a.flags|=1,ls(i,a,h,v),a.child)}function L2(i,a,l,h,v){if(i===null){var S=l.type;return typeof S=="function"&&!ad(S)&&S.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=S,P2(i,a,S,h,v)):(i=pc(l.type,null,h,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(S=i.child,!a0(i,v)){var O=S.memoizedProps;if(l=l.compare,l=l!==null?l:uo,l(O,h)&&i.ref===a.ref)return Dl(i,a,v)}return a.flags|=1,i=Xs(S,h),i.ref=a.ref,i.return=a,a.child=i}function P2(i,a,l,h,v){if(i!==null){var S=i.memoizedProps;if(uo(S,h)&&i.ref===a.ref)if(gi=!1,a.pendingProps=h=S,a0(i,v))(i.flags&131072)!==0&&(gi=!0);else return a.lanes=i.lanes,Dl(i,a,v)}return Zg(i,a,l,h,v)}function M2(i,a,l,h){var v=h.children,S=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(S=S!==null?S.baseLanes|l:l,i!==null){for(h=a.child=i.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~S}else h=0,a.child=null;return O2(i,a,S,l,h)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&oe(a,S!==null?S.cachePool:null),S!==null?br(a,S):On(),Gr(a);else return h=a.lanes=536870912,O2(i,a,S!==null?S.baseLanes|l:l,l,h)}else S!==null?(oe(a,S.cachePool),br(a,S),$r(),a.memoizedState=null):(i!==null&&oe(a,null),On(),$r());return ls(i,a,v,l),a.child}function Mh(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function O2(i,a,l,h,v){var S=te();return S=S===null?null:{parent:Mr._currentValue,pool:S},a.memoizedState={baseLanes:l,cachePool:S},i!==null&&oe(a,null),On(),Gr(a),i!==null&&Ho(i,a,h,!0),a.childLanes=v,null}function gp(i,a){return a=vp({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function F2(i,a,l){return pr(a,i.child,null,l),i=gp(a,a.pendingProps),i.flags|=2,Zn(a),a.memoizedState=null,i}function p3(i,a,l){var h=a.pendingProps,v=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(bn){if(h.mode==="hidden")return i=gp(a,h),a.lanes=536870912,Mh(null,i);if(Gn(a),(i=fr)?(i=X5(i,Tr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Bo!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},l=od(i),l.return=a,a.child=l,Ci=a,fr=null)):i=null,i===null)throw Vo(a);return a.lanes=536870912,null}return gp(a,h)}var S=i.memoizedState;if(S!==null){var O=S.dehydrated;if(Gn(a),v)if(a.flags&256)a.flags&=-257,a=F2(i,a,l);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(gi||Ho(i,a,l,!1),v=(l&i.childLanes)!==0,gi||v){if(h=mr,h!==null&&(O=Mi(h,l),O!==0&&O!==S.retryLane))throw S.retryLane=O,mo(i,O),la(h,i,O),Jg;Tp(),a=F2(i,a,l)}else i=S.treeContext,fr=Ya(O.nextSibling),Ci=a,bn=!0,as=null,Tr=!1,i!==null&&ap(a,i),a=gp(a,h),a.flags|=4096;return a}return i=Xs(i.child,{mode:h.mode,children:h.children}),i.ref=a.ref,a.child=i,i.return=a,i}function yp(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function Zg(i,a,l,h,v){return Go(a),l=Th(i,a,l,h,void 0,v),h=Ch(),i!==null&&!gi?(jh(i,a,v),Dl(i,a,v)):(bn&&h&&_h(a),a.flags|=1,ls(i,a,l,v),a.child)}function U2(i,a,l,h,v,S){return Go(a),a.updateQueue=null,l=yo(a,h,l,v),gd(i),h=Ch(),i!==null&&!gi?(jh(i,a,S),Dl(i,a,S)):(bn&&h&&_h(a),a.flags|=1,ls(i,a,l,S),a.child)}function B2(i,a,l,h,v){if(Go(a),a.stateNode===null){var S=Ti,O=l.contextType;typeof O=="object"&&O!==null&&(S=Ri(O)),S=new l(h,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Xg,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=h,S.state=a.memoizedState,S.refs={},yt(a),O=l.contextType,S.context=typeof O=="object"&&O!==null?Ri(O):Ti,S.state=a.memoizedState,O=l.getDerivedStateFromProps,typeof O=="function"&&(Kg(a,l,O,h),S.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(O=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),O!==S.state&&Xg.enqueueReplaceState(S,S.state,null),qr(a,h,S,v),or(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){S=a.stateNode;var ee=a.memoizedProps,be=Cu(l,ee);S.props=be;var qe=S.context,Je=l.contextType;O=Ti,typeof Je=="object"&&Je!==null&&(O=Ri(Je));var rt=l.getDerivedStateFromProps;Je=typeof rt=="function"||typeof S.getSnapshotBeforeUpdate=="function",ee=a.pendingProps!==ee,Je||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(ee||qe!==O)&&A2(a,S,h,O),_t=!1;var Ge=a.memoizedState;S.state=Ge,qr(a,h,S,v),or(),qe=a.memoizedState,ee||Ge!==qe||_t?(typeof rt=="function"&&(Kg(a,l,rt,h),qe=a.memoizedState),(be=_t||N2(a,l,be,h,Ge,qe,O))?(Je||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=qe),S.props=h,S.state=qe,S.context=O,h=be):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{S=a.stateNode,vr(i,a),O=a.memoizedProps,Je=Cu(l,O),S.props=Je,rt=a.pendingProps,Ge=S.context,qe=l.contextType,be=Ti,typeof qe=="object"&&qe!==null&&(be=Ri(qe)),ee=l.getDerivedStateFromProps,(qe=typeof ee=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==rt||Ge!==be)&&A2(a,S,h,be),_t=!1,Ge=a.memoizedState,S.state=Ge,qr(a,h,S,v),or();var Ye=a.memoizedState;O!==rt||Ge!==Ye||_t||i!==null&&i.dependencies!==null&&hd(i.dependencies)?(typeof ee=="function"&&(Kg(a,l,ee,h),Ye=a.memoizedState),(Je=_t||N2(a,l,Je,h,Ge,Ye,be)||i!==null&&i.dependencies!==null&&hd(i.dependencies))?(qe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(h,Ye,be),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(h,Ye,be)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===i.memoizedProps&&Ge===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&Ge===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=Ye),S.props=h,S.state=Ye,S.context=be,h=Je):(typeof S.componentDidUpdate!="function"||O===i.memoizedProps&&Ge===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&Ge===i.memoizedState||(a.flags|=1024),h=!1)}return S=h,yp(i,a),h=(a.flags&128)!==0,S||h?(S=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,i!==null&&h?(a.child=pr(a,i.child,null,v),a.child=pr(a,null,l,v)):ls(i,a,l,v),a.memoizedState=S.state,i=a.child):i=Dl(i,a,v),i}function V2(i,a,l,h){return Tl(),a.flags|=256,ls(i,a,l,h),a.child}var e0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function t0(i){return{baseLanes:i,cachePool:he()}}function n0(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=Aa),i}function z2(i,a,l){var h=a.pendingProps,v=!1,S=(a.flags&128)!==0,O;if((O=S)||(O=i!==null&&i.memoizedState===null?!1:(In.current&2)!==0),O&&(v=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,i===null){if(bn){if(v?Or(a):$r(),(i=fr)?(i=X5(i,Tr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:Bo!==null?{id:ea,overflow:ta}:null,retryLane:536870912,hydrationErrors:null},l=od(i),l.return=a,a.child=l,Ci=a,fr=null)):i=null,i===null)throw Vo(a);return F0(i)?a.lanes=32:a.lanes=536870912,null}var ee=h.children;return h=h.fallback,v?($r(),v=a.mode,ee=vp({mode:"hidden",children:ee},v),h=Uo(h,v,l,null),ee.return=a,h.return=a,ee.sibling=h,a.child=ee,h=a.child,h.memoizedState=t0(l),h.childLanes=n0(i,O,l),a.memoizedState=e0,Mh(null,h)):(Or(a),r0(a,ee))}var be=i.memoizedState;if(be!==null&&(ee=be.dehydrated,ee!==null)){if(S)a.flags&256?(Or(a),a.flags&=-257,a=i0(i,a,l)):a.memoizedState!==null?($r(),a.child=i.child,a.flags|=128,a=null):($r(),ee=h.fallback,v=a.mode,h=vp({mode:"visible",children:h.children},v),ee=Uo(ee,v,l,null),ee.flags|=2,h.return=a,ee.return=a,h.sibling=ee,a.child=h,pr(a,i.child,null,l),h=a.child,h.memoizedState=t0(l),h.childLanes=n0(i,O,l),a.memoizedState=e0,a=Mh(null,h));else if(Or(a),F0(ee)){if(O=ee.nextSibling&&ee.nextSibling.dataset,O)var qe=O.dgst;O=qe,h=Error(r(419)),h.stack="",h.digest=O,yc({value:h,source:null,stack:null}),a=i0(i,a,l)}else if(gi||Ho(i,a,l,!1),O=(l&i.childLanes)!==0,gi||O){if(O=mr,O!==null&&(h=Mi(O,l),h!==0&&h!==be.retryLane))throw be.retryLane=h,mo(i,h),la(O,i,h),Jg;O0(ee)||Tp(),a=i0(i,a,l)}else O0(ee)?(a.flags|=192,a.child=i.child,a=null):(i=be.treeContext,fr=Ya(ee.nextSibling),Ci=a,bn=!0,as=null,Tr=!1,i!==null&&ap(a,i),a=r0(a,h.children),a.flags|=4096);return a}return v?($r(),ee=h.fallback,v=a.mode,be=i.child,qe=be.sibling,h=Xs(be,{mode:"hidden",children:h.children}),h.subtreeFlags=be.subtreeFlags&65011712,qe!==null?ee=Xs(qe,ee):(ee=Uo(ee,v,l,null),ee.flags|=2),ee.return=a,h.return=a,h.sibling=ee,a.child=h,Mh(null,h),h=a.child,ee=i.child.memoizedState,ee===null?ee=t0(l):(v=ee.cachePool,v!==null?(be=Mr._currentValue,v=v.parent!==be?{parent:be,pool:be}:v):v=he(),ee={baseLanes:ee.baseLanes|l,cachePool:v}),h.memoizedState=ee,h.childLanes=n0(i,O,l),a.memoizedState=e0,Mh(i.child,h)):(Or(a),l=i.child,i=l.sibling,l=Xs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(O=a.deletions,O===null?(a.deletions=[i],a.flags|=16):O.push(i)),a.child=l,a.memoizedState=null,l)}function r0(i,a){return a=vp({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function vp(i,a){return i=Hi(22,i,null,a),i.lanes=0,i}function i0(i,a,l){return pr(a,i.child,null,l),i=r0(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function q2(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),vc(i.return,a,l)}function s0(i,a,l,h,v,S){var O=i.memoizedState;O===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:v,treeForkCount:S}:(O.isBackwards=a,O.rendering=null,O.renderingStartTime=0,O.last=h,O.tail=l,O.tailMode=v,O.treeForkCount=S)}function H2(i,a,l){var h=a.pendingProps,v=h.revealOrder,S=h.tail;h=h.children;var O=In.current,ee=(O&2)!==0;if(ee?(O=O&1|2,a.flags|=128):O&=1,Y(In,O),ls(i,a,h,l),h=bn?_u:0,!ee&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&q2(i,l,a);else if(i.tag===19)q2(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(l=a.child,v=null;l!==null;)i=l.alternate,i!==null&&$i(i)===null&&(v=l),l=l.sibling;l=v,l===null?(v=a.child,a.child=null):(v=l.sibling,l.sibling=null),s0(a,!1,v,l,S,h);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&$i(i)===null){a.child=v;break}i=v.sibling,v.sibling=l,l=v,v=i}s0(a,!0,l,null,S,h);break;case"together":s0(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Dl(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),Ac|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(Ho(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=Xs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=Xs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function a0(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&hd(i)))}function m3(i,a,l){switch(a.tag){case 3:Me(a,a.stateNode.containerInfo),qo(a,Mr,i.memoizedState.cache),Tl();break;case 27:case 5:Z(a);break;case 4:Me(a,a.stateNode.containerInfo);break;case 10:qo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Gn(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Or(a),a.flags|=128,null):(l&a.child.childLanes)!==0?z2(i,a,l):(Or(a),i=Dl(i,a,l),i!==null?i.sibling:null);Or(a);break;case 19:var v=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(Ho(i,a,l,!1),h=(l&a.childLanes)!==0),v){if(h)return H2(i,a,l);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Y(In,In.current),h)break;return null;case 22:return a.lanes=0,M2(i,a,l,a.pendingProps);case 24:qo(a,Mr,i.memoizedState.cache)}return Dl(i,a,l)}function G2(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)gi=!0;else{if(!a0(i,l)&&(a.flags&128)===0)return gi=!1,m3(i,a,l);gi=(i.flags&131072)!==0}else gi=!1,bn&&(a.flags&1048576)!==0&&sp(a,_u,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(i=Fe(a.elementType),a.type=i,typeof i=="function")ad(i)?(h=Cu(i,h),a.tag=1,a=B2(null,a,i,h,l)):(a.tag=0,a=Zg(null,a,i,h,l));else{if(i!=null){var v=i.$$typeof;if(v===V){a.tag=11,a=k2(null,a,i,h,l);break e}else if(v===U){a.tag=14,a=L2(null,a,i,h,l);break e}}throw a=ne(i)||i,Error(r(306,a,""))}}return a;case 0:return Zg(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,v=Cu(h,a.pendingProps),B2(i,a,h,v,l);case 3:e:{if(Me(a,a.stateNode.containerInfo),i===null)throw Error(r(387));h=a.pendingProps;var S=a.memoizedState;v=S.element,vr(i,a),qr(a,h,null,l);var O=a.memoizedState;if(h=O.cache,qo(a,Mr,h),h!==S.cache&&Cl(a,[Mr],l,!0),or(),h=O.element,S.isDehydrated)if(S={element:h,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=V2(i,a,h,l);break e}else if(h!==v){v=Qs(Error(r(424)),a),yc(v),a=V2(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(fr=Ya(i.firstChild),Ci=a,bn=!0,as=null,Tr=!0,l=nn(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Tl(),h===v){a=Dl(i,a,l);break e}ls(i,a,h,l)}a=a.child}return a;case 26:return yp(i,a),i===null?(l=nb(a.type,null,a.pendingProps,null))?a.memoizedState=l:bn||(l=a.type,i=a.pendingProps,h=Lp(me.current).createElement(l),h[Un]=a,h[Qn]=i,cs(h,l,i),yr(h),a.stateNode=h):a.memoizedState=nb(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Z(a),i===null&&bn&&(h=a.stateNode=Z5(a.type,a.pendingProps,me.current),Ci=a,Tr=!0,v=fr,Ic(a.type)?(U0=v,fr=Ya(h.firstChild)):fr=v),ls(i,a,a.pendingProps.children,l),yp(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&bn&&((v=h=fr)&&(h=G3(h,a.type,a.pendingProps,Tr),h!==null?(a.stateNode=h,Ci=a,fr=Ya(h.firstChild),Tr=!1,v=!0):v=!1),v||Vo(a)),Z(a),v=a.type,S=a.pendingProps,O=i!==null?i.memoizedProps:null,h=S.children,L0(v,S)?h=null:O!==null&&L0(v,O)&&(a.flags|=32),a.memoizedState!==null&&(v=Th(i,a,Vg,null,null,l),Qh._currentValue=v),yp(i,a),ls(i,a,h,l),a.child;case 6:return i===null&&bn&&((i=l=fr)&&(l=$3(l,a.pendingProps,Tr),l!==null?(a.stateNode=l,Ci=a,fr=null,i=!0):i=!1),i||Vo(a)),null;case 13:return z2(i,a,l);case 4:return Me(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=pr(a,null,h,l):ls(i,a,h,l),a.child;case 11:return k2(i,a,a.type,a.pendingProps,l);case 7:return ls(i,a,a.pendingProps,l),a.child;case 8:return ls(i,a,a.pendingProps.children,l),a.child;case 12:return ls(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,qo(a,a.type,h.value),ls(i,a,h.children,l),a.child;case 9:return v=a.type._context,h=a.pendingProps.children,Go(a),v=Ri(v),h=h(v),a.flags|=1,ls(i,a,h,l),a.child;case 14:return L2(i,a,a.type,a.pendingProps,l);case 15:return P2(i,a,a.type,a.pendingProps,l);case 19:return H2(i,a,l);case 31:return p3(i,a,l);case 22:return M2(i,a,l,a.pendingProps);case 24:return Go(a),h=Ri(Mr),i===null?(v=te(),v===null&&(v=mr,S=bc(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=l),v=S),a.memoizedState={parent:h,cache:v},yt(a),qo(a,Mr,v)):((i.lanes&l)!==0&&(vr(i,a),qr(a,null,null,l),or()),v=i.memoizedState,S=a.memoizedState,v.parent!==h?(v={parent:h,cache:h},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),qo(a,Mr,h)):(h=S.cache,qo(a,Mr,h),h!==v.cache&&Cl(a,[Mr],l,!0))),ls(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function kl(i){i.flags|=4}function o0(i,a,l,h,v){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(v5())i.flags|=8192;else throw Ke=je,Ve}else i.flags&=-16777217}function $2(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!ob(a))if(v5())i.flags|=8192;else throw Ke=je,Ve}function bp(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?zs():536870912,i.lanes|=a,Td|=a)}function Oh(i,a){if(!bn)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function xr(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var v=i.child;v!==null;)l|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)l|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function g3(i,a,l){var h=a.pendingProps;switch(ud(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xr(a),null;case 1:return xr(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),na(Mr),Le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(ji(a)?kl(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Nh())),xr(a),null;case 26:var v=a.type,S=a.memoizedState;return i===null?(kl(a),S!==null?(xr(a),$2(a,S)):(xr(a),o0(a,v,null,h,l))):S?S!==i.memoizedState?(kl(a),xr(a),$2(a,S)):(xr(a),a.flags&=-16777217):(i=i.memoizedProps,i!==h&&kl(a),xr(a),o0(a,v,i,h,l)),null;case 27:if(ae(a),l=me.current,v=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&kl(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return xr(a),null}i=re.current,ji(a)?Eh(a):(i=Z5(v,h,l),a.stateNode=i,kl(a))}return xr(a),null;case 5:if(ae(a),v=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&kl(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return xr(a),null}if(S=re.current,ji(a))Eh(a);else{var O=Lp(me.current);switch(S){case 1:S=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:S=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":S=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":S=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":S=O.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof h.is=="string"?O.createElement("select",{is:h.is}):O.createElement("select"),h.multiple?S.multiple=!0:h.size&&(S.size=h.size);break;default:S=typeof h.is=="string"?O.createElement(v,{is:h.is}):O.createElement(v)}}S[Un]=a,S[Qn]=h;e:for(O=a.child;O!==null;){if(O.tag===5||O.tag===6)S.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===a)break e;for(;O.sibling===null;){if(O.return===null||O.return===a)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}a.stateNode=S;e:switch(cs(S,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&kl(a)}}return xr(a),o0(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,l),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&kl(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(i=me.current,ji(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,v=Ci,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}i[Un]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||z5(i.nodeValue,l)),i||Vo(a,!0)}else i=Lp(i).createTextNode(h),i[Un]=a,a.stateNode=i}return xr(a),null;case 31:if(l=a.memoizedState,i===null||i.memoizedState!==null){if(h=ji(a),l!==null){if(i===null){if(!h)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Un]=a}else Tl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xr(a),i=!1}else l=Nh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=l),i=!0;if(!i)return a.flags&256?(Zn(a),a):(Zn(a),null);if((a.flags&128)!==0)throw Error(r(558))}return xr(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=ji(a),h!==null&&h.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Un]=a}else Tl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xr(a),v=!1}else v=Nh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(Zn(a),a):(Zn(a),null)}return Zn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=h!==null,i=i!==null&&i.memoizedState!==null,l&&(h=a.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==v&&(h.flags|=2048)),l!==i&&l&&(a.child.flags|=8192),bp(a,a.updateQueue),xr(a),null);case 4:return Le(),i===null&&j0(a.stateNode.containerInfo),xr(a),null;case 10:return na(a.type),xr(a),null;case 19:if(P(In),h=a.memoizedState,h===null)return xr(a),null;if(v=(a.flags&128)!==0,S=h.rendering,S===null)if(v)Oh(h,!1);else{if(Yr!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(S=$i(i),S!==null){for(a.flags|=128,Oh(h,!1),i=S.updateQueue,a.updateQueue=i,bp(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)xu(l,i),l=l.sibling;return Y(In,In.current&1|2),bn&&Fs(a,h.treeForkCount),a.child}i=i.sibling}h.tail!==null&&Ue()>Ep&&(a.flags|=128,v=!0,Oh(h,!1),a.lanes=4194304)}else{if(!v)if(i=$i(S),i!==null){if(a.flags|=128,v=!0,i=i.updateQueue,a.updateQueue=i,bp(a,i),Oh(h,!0),h.tail===null&&h.tailMode==="hidden"&&!S.alternate&&!bn)return xr(a),null}else 2*Ue()-h.renderingStartTime>Ep&&l!==536870912&&(a.flags|=128,v=!0,Oh(h,!1),a.lanes=4194304);h.isBackwards?(S.sibling=a.child,a.child=S):(i=h.last,i!==null?i.sibling=S:a.child=S,h.last=S)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Ue(),i.sibling=null,l=In.current,Y(In,v?l&1|2:l&1),bn&&Fs(a,h.treeForkCount),i):(xr(a),null);case 22:case 23:return Zn(a),ri(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(xr(a),a.subtreeFlags&6&&(a.flags|=8192)):xr(a),l=a.updateQueue,l!==null&&bp(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&P(J),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),na(Mr),xr(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function y3(i,a){switch(ud(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return na(Mr),Le(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return ae(a),null;case 31:if(a.memoizedState!==null){if(Zn(a),a.alternate===null)throw Error(r(340));Tl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(Zn(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Tl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return P(In),null;case 4:return Le(),null;case 10:return na(a.type),null;case 22:case 23:return Zn(a),ri(),i!==null&&P(J),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return na(Mr),null;case 25:return null;default:return null}}function W2(i,a){switch(ud(a),a.tag){case 3:na(Mr),Le();break;case 26:case 27:case 5:ae(a);break;case 4:Le();break;case 31:a.memoizedState!==null&&Zn(a);break;case 13:Zn(a);break;case 19:P(In);break;case 10:na(a.type);break;case 22:case 23:Zn(a),ri(),i!==null&&P(J);break;case 24:na(Mr)}}function Fh(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var v=h.next;l=v;do{if((l.tag&i)===i){h=void 0;var S=l.create,O=l.inst;h=S(),O.destroy=h}l=l.next}while(l!==v)}}catch(ee){tr(a,a.return,ee)}}function Ec(i,a,l){try{var h=a.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var S=v.next;h=S;do{if((h.tag&i)===i){var O=h.inst,ee=O.destroy;if(ee!==void 0){O.destroy=void 0,v=a;var be=l,qe=ee;try{qe()}catch(Je){tr(v,be,Je)}}}h=h.next}while(h!==S)}}catch(Je){tr(a,a.return,Je)}}function Y2(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Hr(a,l)}catch(h){tr(i,i.return,h)}}}function K2(i,a,l){l.props=Cu(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){tr(i,a,h)}}function Uh(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(v){tr(i,a,v)}}function Xo(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(v){tr(i,a,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){tr(i,a,v)}else l.current=null}function X2(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(v){tr(i,i.return,v)}}function l0(i,a,l){try{var h=i.stateNode;U3(h,i.type,l,a),h[Qn]=a}catch(v){tr(i,i.return,v)}}function Q2(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ic(i.type)||i.tag===4}function c0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Q2(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ic(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function u0(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Is));else if(h!==4&&(h===27&&Ic(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(u0(i,a,l),i=i.sibling;i!==null;)u0(i,a,l),i=i.sibling}function wp(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&Ic(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(wp(i,a,l),i=i.sibling;i!==null;)wp(i,a,l),i=i.sibling}function J2(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);cs(a,h,l),a[Un]=i,a[Qn]=l}catch(S){tr(i,i.return,S)}}var Ll=!1,yi=!1,d0=!1,Z2=typeof WeakSet=="function"?WeakSet:Set,Wi=null;function v3(i,a){if(i=i.containerInfo,D0=Vp,i=fo(i),qa(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var v=h.anchorOffset,S=h.focusNode;h=h.focusOffset;try{l.nodeType,S.nodeType}catch{l=null;break e}var O=0,ee=-1,be=-1,qe=0,Je=0,rt=i,Ge=null;t:for(;;){for(var Ye;rt!==l||v!==0&&rt.nodeType!==3||(ee=O+v),rt!==S||h!==0&&rt.nodeType!==3||(be=O+h),rt.nodeType===3&&(O+=rt.nodeValue.length),(Ye=rt.firstChild)!==null;)Ge=rt,rt=Ye;for(;;){if(rt===i)break t;if(Ge===l&&++qe===v&&(ee=O),Ge===S&&++Je===h&&(be=O),(Ye=rt.nextSibling)!==null)break;rt=Ge,Ge=rt.parentNode}rt=Ye}l=ee===-1||be===-1?null:{start:ee,end:be}}else l=null}l=l||{start:0,end:0}}else l=null;for(k0={focusedElem:i,selectionRange:l},Vp=!1,Wi=a;Wi!==null;)if(a=Wi,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,Wi=i;else for(;Wi!==null;){switch(a=Wi,S=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(l=0;l<i.length;l++)v=i[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&S!==null){i=void 0,l=a,v=S.memoizedProps,S=S.memoizedState,h=l.stateNode;try{var Ct=Cu(l.type,v);i=h.getSnapshotBeforeUpdate(Ct,S),h.__reactInternalSnapshotBeforeUpdate=i}catch(Kt){tr(l,l.return,Kt)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)M0(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":M0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Wi=i;break}Wi=a.return}}function e5(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:Ml(i,l),h&4&&Fh(5,l);break;case 1:if(Ml(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(O){tr(l,l.return,O)}else{var v=Cu(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(v,a,i.__reactInternalSnapshotBeforeUpdate)}catch(O){tr(l,l.return,O)}}h&64&&Y2(l),h&512&&Uh(l,l.return);break;case 3:if(Ml(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Hr(i,a)}catch(O){tr(l,l.return,O)}}break;case 27:a===null&&h&4&&J2(l);case 26:case 5:Ml(i,l),a===null&&h&4&&X2(l),h&512&&Uh(l,l.return);break;case 12:Ml(i,l);break;case 31:Ml(i,l),h&4&&r5(i,l);break;case 13:Ml(i,l),h&4&&i5(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=T3.bind(null,l),W3(i,l))));break;case 22:if(h=l.memoizedState!==null||Ll,!h){a=a!==null&&a.memoizedState!==null||yi,v=Ll;var S=yi;Ll=h,(yi=a)&&!S?Ol(i,l,(l.subtreeFlags&8772)!==0):Ml(i,l),Ll=v,yi=S}break;case 30:break;default:Ml(i,l)}}function t5(i){var a=i.alternate;a!==null&&(i.alternate=null,t5(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&ma(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Rr=null,ia=!1;function Pl(i,a,l){for(l=l.child;l!==null;)n5(i,a,l),l=l.sibling}function n5(i,a,l){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(ct,l)}catch{}switch(l.tag){case 26:yi||Xo(l,a),Pl(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:yi||Xo(l,a);var h=Rr,v=ia;Ic(l.type)&&(Rr=l.stateNode,ia=!1),Pl(i,a,l),Yh(l.stateNode),Rr=h,ia=v;break;case 5:yi||Xo(l,a);case 6:if(h=Rr,v=ia,Rr=null,Pl(i,a,l),Rr=h,ia=v,Rr!==null)if(ia)try{(Rr.nodeType===9?Rr.body:Rr.nodeName==="HTML"?Rr.ownerDocument.body:Rr).removeChild(l.stateNode)}catch(S){tr(l,a,S)}else try{Rr.removeChild(l.stateNode)}catch(S){tr(l,a,S)}break;case 18:Rr!==null&&(ia?(i=Rr,Y5(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Pd(i)):Y5(Rr,l.stateNode));break;case 4:h=Rr,v=ia,Rr=l.stateNode.containerInfo,ia=!0,Pl(i,a,l),Rr=h,ia=v;break;case 0:case 11:case 14:case 15:Ec(2,l,a),yi||Ec(4,l,a),Pl(i,a,l);break;case 1:yi||(Xo(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&K2(l,a,h)),Pl(i,a,l);break;case 21:Pl(i,a,l);break;case 22:yi=(h=yi)||l.memoizedState!==null,Pl(i,a,l),yi=h;break;default:Pl(i,a,l)}}function r5(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Pd(i)}catch(l){tr(a,a.return,l)}}}function i5(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Pd(i)}catch(l){tr(a,a.return,l)}}function b3(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new Z2),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new Z2),a;default:throw Error(r(435,i.tag))}}function xp(i,a){var l=b3(i);a.forEach(function(h){if(!l.has(h)){l.add(h);var v=C3.bind(null,i,h);h.then(v,v)}})}function sa(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var v=l[h],S=i,O=a,ee=O;e:for(;ee!==null;){switch(ee.tag){case 27:if(Ic(ee.type)){Rr=ee.stateNode,ia=!1;break e}break;case 5:Rr=ee.stateNode,ia=!1;break e;case 3:case 4:Rr=ee.stateNode.containerInfo,ia=!0;break e}ee=ee.return}if(Rr===null)throw Error(r(160));n5(S,O,v),Rr=null,ia=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)s5(a,i),a=a.sibling}var xo=null;function s5(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:sa(a,i),aa(i),h&4&&(Ec(3,i,i.return),Fh(3,i),Ec(5,i,i.return));break;case 1:sa(a,i),aa(i),h&512&&(yi||l===null||Xo(l,l.return)),h&64&&Ll&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var v=xo;if(sa(a,i),aa(i),h&512&&(yi||l===null||Xo(l,l.return)),h&4){var S=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":S=v.getElementsByTagName("title")[0],(!S||S[Fi]||S[Un]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(h),v.head.insertBefore(S,v.querySelector("head > title"))),cs(S,h,l),S[Un]=i,yr(S),h=S;break e;case"link":var O=sb("link","href",v).get(h+(l.href||""));if(O){for(var ee=0;ee<O.length;ee++)if(S=O[ee],S.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&S.getAttribute("rel")===(l.rel==null?null:l.rel)&&S.getAttribute("title")===(l.title==null?null:l.title)&&S.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){O.splice(ee,1);break t}}S=v.createElement(h),cs(S,h,l),v.head.appendChild(S);break;case"meta":if(O=sb("meta","content",v).get(h+(l.content||""))){for(ee=0;ee<O.length;ee++)if(S=O[ee],S.getAttribute("content")===(l.content==null?null:""+l.content)&&S.getAttribute("name")===(l.name==null?null:l.name)&&S.getAttribute("property")===(l.property==null?null:l.property)&&S.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&S.getAttribute("charset")===(l.charSet==null?null:l.charSet)){O.splice(ee,1);break t}}S=v.createElement(h),cs(S,h,l),v.head.appendChild(S);break;default:throw Error(r(468,h))}S[Un]=i,yr(S),h=S}i.stateNode=h}else ab(v,i.type,i.stateNode);else i.stateNode=ib(v,h,i.memoizedProps);else S!==h?(S===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):S.count--,h===null?ab(v,i.type,i.stateNode):ib(v,h,i.memoizedProps)):h===null&&i.stateNode!==null&&l0(i,i.memoizedProps,l.memoizedProps)}break;case 27:sa(a,i),aa(i),h&512&&(yi||l===null||Xo(l,l.return)),l!==null&&h&4&&l0(i,i.memoizedProps,l.memoizedProps);break;case 5:if(sa(a,i),aa(i),h&512&&(yi||l===null||Xo(l,l.return)),i.flags&32){v=i.stateNode;try{ei(v,"")}catch(Ct){tr(i,i.return,Ct)}}h&4&&i.stateNode!=null&&(v=i.memoizedProps,l0(i,v,l!==null?l.memoizedProps:v)),h&1024&&(d0=!0);break;case 6:if(sa(a,i),aa(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(Ct){tr(i,i.return,Ct)}}break;case 3:if(Op=null,v=xo,xo=Pp(a.containerInfo),sa(a,i),xo=v,aa(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Pd(a.containerInfo)}catch(Ct){tr(i,i.return,Ct)}d0&&(d0=!1,a5(i));break;case 4:h=xo,xo=Pp(i.stateNode.containerInfo),sa(a,i),aa(i),xo=h;break;case 12:sa(a,i),aa(i);break;case 31:sa(a,i),aa(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,xp(i,h)));break;case 13:sa(a,i),aa(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(_p=Ue()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,xp(i,h)));break;case 22:v=i.memoizedState!==null;var be=l!==null&&l.memoizedState!==null,qe=Ll,Je=yi;if(Ll=qe||v,yi=Je||be,sa(a,i),yi=Je,Ll=qe,aa(i),h&8192)e:for(a=i.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(l===null||be||Ll||yi||ju(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){be=l=a;try{if(S=be.stateNode,v)O=S.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{ee=be.stateNode;var rt=be.memoizedProps.style,Ge=rt!=null&&rt.hasOwnProperty("display")?rt.display:null;ee.style.display=Ge==null||typeof Ge=="boolean"?"":(""+Ge).trim()}}catch(Ct){tr(be,be.return,Ct)}}}else if(a.tag===6){if(l===null){be=a;try{be.stateNode.nodeValue=v?"":be.memoizedProps}catch(Ct){tr(be,be.return,Ct)}}}else if(a.tag===18){if(l===null){be=a;try{var Ye=be.stateNode;v?K5(Ye,!0):K5(be.stateNode,!1)}catch(Ct){tr(be,be.return,Ct)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,xp(i,l))));break;case 19:sa(a,i),aa(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,xp(i,h)));break;case 30:break;case 21:break;default:sa(a,i),aa(i)}}function aa(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(Q2(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var v=l.stateNode,S=c0(i);wp(i,S,v);break;case 5:var O=l.stateNode;l.flags&32&&(ei(O,""),l.flags&=-33);var ee=c0(i);wp(i,ee,O);break;case 3:case 4:var be=l.stateNode.containerInfo,qe=c0(i);u0(i,qe,be);break;default:throw Error(r(161))}}catch(Je){tr(i,i.return,Je)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function a5(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;a5(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function Ml(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)e5(i,a.alternate,a),a=a.sibling}function ju(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ec(4,a,a.return),ju(a);break;case 1:Xo(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&K2(a,a.return,l),ju(a);break;case 27:Yh(a.stateNode);case 26:case 5:Xo(a,a.return),ju(a);break;case 22:a.memoizedState===null&&ju(a);break;case 30:ju(a);break;default:ju(a)}i=i.sibling}}function Ol(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,v=i,S=a,O=S.flags;switch(S.tag){case 0:case 11:case 15:Ol(v,S,l),Fh(4,S);break;case 1:if(Ol(v,S,l),h=S,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(qe){tr(h,h.return,qe)}if(h=S,v=h.updateQueue,v!==null){var ee=h.stateNode;try{var be=v.shared.hiddenCallbacks;if(be!==null)for(v.shared.hiddenCallbacks=null,v=0;v<be.length;v++)Gi(be[v],ee)}catch(qe){tr(h,h.return,qe)}}l&&O&64&&Y2(S),Uh(S,S.return);break;case 27:J2(S);case 26:case 5:Ol(v,S,l),l&&h===null&&O&4&&X2(S),Uh(S,S.return);break;case 12:Ol(v,S,l);break;case 31:Ol(v,S,l),l&&O&4&&r5(v,S);break;case 13:Ol(v,S,l),l&&O&4&&i5(v,S);break;case 22:S.memoizedState===null&&Ol(v,S,l),Uh(S,S.return);break;case 30:break;default:Ol(v,S,l)}a=a.sibling}}function h0(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Eu(l))}function f0(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Eu(i))}function So(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)o5(i,a,l,h),a=a.sibling}function o5(i,a,l,h){var v=a.flags;switch(a.tag){case 0:case 11:case 15:So(i,a,l,h),v&2048&&Fh(9,a);break;case 1:So(i,a,l,h);break;case 3:So(i,a,l,h),v&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Eu(i)));break;case 12:if(v&2048){So(i,a,l,h),i=a.stateNode;try{var S=a.memoizedProps,O=S.id,ee=S.onPostCommit;typeof ee=="function"&&ee(O,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(be){tr(a,a.return,be)}}else So(i,a,l,h);break;case 31:So(i,a,l,h);break;case 13:So(i,a,l,h);break;case 23:break;case 22:S=a.stateNode,O=a.alternate,a.memoizedState!==null?S._visibility&2?So(i,a,l,h):Bh(i,a):S._visibility&2?So(i,a,l,h):(S._visibility|=2,Ed(i,a,l,h,(a.subtreeFlags&10256)!==0||!1)),v&2048&&h0(O,a);break;case 24:So(i,a,l,h),v&2048&&f0(a.alternate,a);break;default:So(i,a,l,h)}}function Ed(i,a,l,h,v){for(v=v&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var S=i,O=a,ee=l,be=h,qe=O.flags;switch(O.tag){case 0:case 11:case 15:Ed(S,O,ee,be,v),Fh(8,O);break;case 23:break;case 22:var Je=O.stateNode;O.memoizedState!==null?Je._visibility&2?Ed(S,O,ee,be,v):Bh(S,O):(Je._visibility|=2,Ed(S,O,ee,be,v)),v&&qe&2048&&h0(O.alternate,O);break;case 24:Ed(S,O,ee,be,v),v&&qe&2048&&f0(O.alternate,O);break;default:Ed(S,O,ee,be,v)}a=a.sibling}}function Bh(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,v=h.flags;switch(h.tag){case 22:Bh(l,h),v&2048&&h0(h.alternate,h);break;case 24:Bh(l,h),v&2048&&f0(h.alternate,h);break;default:Bh(l,h)}a=a.sibling}}var Vh=8192;function Nd(i,a,l){if(i.subtreeFlags&Vh)for(i=i.child;i!==null;)l5(i,a,l),i=i.sibling}function l5(i,a,l){switch(i.tag){case 26:Nd(i,a,l),i.flags&Vh&&i.memoizedState!==null&&s4(l,xo,i.memoizedState,i.memoizedProps);break;case 5:Nd(i,a,l);break;case 3:case 4:var h=xo;xo=Pp(i.stateNode.containerInfo),Nd(i,a,l),xo=h;break;case 22:i.memoizedState===null&&(h=i.alternate,h!==null&&h.memoizedState!==null?(h=Vh,Vh=16777216,Nd(i,a,l),Vh=h):Nd(i,a,l));break;default:Nd(i,a,l)}}function c5(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function zh(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Wi=h,d5(h,i)}c5(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)u5(i),i=i.sibling}function u5(i){switch(i.tag){case 0:case 11:case 15:zh(i),i.flags&2048&&Ec(9,i,i.return);break;case 3:zh(i);break;case 12:zh(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Sp(i)):zh(i);break;default:zh(i)}}function Sp(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Wi=h,d5(h,i)}c5(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ec(8,a,a.return),Sp(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,Sp(a));break;default:Sp(a)}i=i.sibling}}function d5(i,a){for(;Wi!==null;){var l=Wi;switch(l.tag){case 0:case 11:case 15:Ec(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Eu(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Wi=h;else e:for(l=i;Wi!==null;){h=Wi;var v=h.sibling,S=h.return;if(t5(h),h===l){Wi=null;break e}if(v!==null){v.return=S,Wi=v;break e}Wi=S}}}var w3={getCacheForType:function(i){var a=Ri(Mr),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l},cacheSignal:function(){return Ri(Mr).controller.signal}},x3=typeof WeakMap=="function"?WeakMap:Map,$n=0,mr=null,wn=null,_n=0,er=0,Na=null,Nc=!1,Ad=!1,p0=!1,Fl=0,Yr=0,Ac=0,Ru=0,m0=0,Aa=0,Td=0,qh=null,oa=null,g0=!1,_p=0,h5=0,Ep=1/0,Np=null,Tc=null,Di=0,Cc=null,Cd=null,Ul=0,y0=0,v0=null,f5=null,Hh=0,b0=null;function Ta(){return($n&2)!==0&&_n!==0?_n&-_n:le.T!==null?N0():Br()}function p5(){if(Aa===0)if((_n&536870912)===0||bn){var i=jn;jn<<=1,(jn&3932160)===0&&(jn=262144),Aa=i}else Aa=536870912;return i=wr.current,i!==null&&(i.flags|=32),Aa}function la(i,a,l){(i===mr&&(er===2||er===9)||i.cancelPendingCommit!==null)&&(jd(i,0),jc(i,_n,Aa,!1)),Ft(i,l),(($n&2)===0||i!==mr)&&(i===mr&&(($n&2)===0&&(Ru|=l),Yr===4&&jc(i,_n,Aa,!1)),Qo(i))}function m5(i,a,l){if(($n&6)!==0)throw Error(r(327));var h=!l&&(a&127)===0&&(a&i.expiredLanes)===0||wi(i,a),v=h?E3(i,a):x0(i,a,!0),S=h;do{if(v===0){Ad&&!h&&jc(i,a,0,!1);break}else{if(l=i.current.alternate,S&&!S3(l)){v=x0(i,a,!1),S=!1;continue}if(v===2){if(S=a,i.errorRecoveryDisabledLanes&S)var O=0;else O=i.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var ee=i;v=qh;var be=ee.current.memoizedState.isDehydrated;if(be&&(jd(ee,O).flags|=256),O=x0(ee,O,!1),O!==2){if(p0&&!be){ee.errorRecoveryDisabledLanes|=S,Ru|=S,v=4;break e}S=oa,oa=v,S!==null&&(oa===null?oa=S:oa.push.apply(oa,S))}v=O}if(S=!1,v!==2)continue}}if(v===1){jd(i,0),jc(i,a,0,!0);break}e:{switch(h=i,S=v,S){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:jc(h,a,Aa,!Nc);break e;case 2:oa=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=_p+300-Ue(),10<v)){if(jc(h,a,Aa,!Nc),cn(h,0,!0)!==0)break e;Ul=a,h.timeoutHandle=$5(g5.bind(null,h,l,oa,Np,g0,a,Aa,Ru,Td,Nc,S,"Throttled",-0,0),v);break e}g5(h,l,oa,Np,g0,a,Aa,Ru,Td,Nc,S,null,-0,0)}}break}while(!0);Qo(i)}function g5(i,a,l,h,v,S,O,ee,be,qe,Je,rt,Ge,Ye){if(i.timeoutHandle=-1,rt=a.subtreeFlags,rt&8192||(rt&16785408)===16785408){rt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Is},l5(a,S,rt);var Ct=(S&62914560)===S?_p-Ue():(S&4194048)===S?h5-Ue():0;if(Ct=a4(rt,Ct),Ct!==null){Ul=S,i.cancelPendingCommit=Ct(E5.bind(null,i,a,S,l,h,v,O,ee,be,Je,rt,null,Ge,Ye)),jc(i,S,O,!qe);return}}E5(i,a,S,l,h,v,O,ee,be)}function S3(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var v=l[h],S=v.getSnapshot;v=v.value;try{if(!Ai(S(),v))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function jc(i,a,l,h){a&=~m0,a&=~Ru,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var v=a;0<v;){var S=31-qt(v),O=1<<S;h[S]=-1,v&=~O}l!==0&&Xi(i,l,a)}function Ap(){return($n&6)===0?(Gh(0),!1):!0}function w0(){if(wn!==null){if(er===0)var i=wn.return;else i=wn,Ga=zo=null,yd(i),it=null,Rt=0,i=wn;for(;i!==null;)W2(i.alternate,i),i=i.return;wn=null}}function jd(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,z3(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ul=0,w0(),mr=i,wn=l=Xs(i.current,null),_n=a,er=0,Na=null,Nc=!1,Ad=wi(i,a),p0=!1,Td=Aa=m0=Ru=Ac=Yr=0,oa=qh=null,g0=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var v=31-qt(h),S=1<<v;a|=i[v],h&=~S}return Fl=a,vu(),l}function y5(i,a){zt=null,le.H=Ph,a===Ne||a===ue?(a=tt(),er=3):a===Ve?(a=tt(),er=4):er=a===Jg?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Na=a,wn===null&&(Yr=1,mp(i,Qs(a,i.current)))}function v5(){var i=wr.current;return i===null?!0:(_n&4194048)===_n?kn===null:(_n&62914560)===_n||(_n&536870912)!==0?i===kn:!1}function b5(){var i=le.H;return le.H=Ph,i===null?Ph:i}function w5(){var i=le.A;return le.A=w3,i}function Tp(){Yr=4,Nc||(_n&4194048)!==_n&&wr.current!==null||(Ad=!0),(Ac&134217727)===0&&(Ru&134217727)===0||mr===null||jc(mr,_n,Aa,!1)}function x0(i,a,l){var h=$n;$n|=2;var v=b5(),S=w5();(mr!==i||_n!==a)&&(Np=null,jd(i,a)),a=!1;var O=Yr;e:do try{if(er!==0&&wn!==null){var ee=wn,be=Na;switch(er){case 8:w0(),O=6;break e;case 3:case 2:case 9:case 6:wr.current===null&&(a=!0);var qe=er;if(er=0,Na=null,Rd(i,ee,be,qe),l&&Ad){O=0;break e}break;default:qe=er,er=0,Na=null,Rd(i,ee,be,qe)}}_3(),O=Yr;break}catch(Je){y5(i,Je)}while(!0);return a&&i.shellSuspendCounter++,Ga=zo=null,$n=h,le.H=v,le.A=S,wn===null&&(mr=null,_n=0,vu()),O}function _3(){for(;wn!==null;)x5(wn)}function E3(i,a){var l=$n;$n|=2;var h=b5(),v=w5();mr!==i||_n!==a?(Np=null,Ep=Ue()+500,jd(i,a)):Ad=wi(i,a);e:do try{if(er!==0&&wn!==null){a=wn;var S=Na;t:switch(er){case 1:er=0,Na=null,Rd(i,a,S,1);break;case 2:case 9:if(Oe(S)){er=0,Na=null,S5(a);break}a=function(){er!==2&&er!==9||mr!==i||(er=7),Qo(i)},S.then(a,a);break e;case 3:er=7;break e;case 4:er=5;break e;case 7:Oe(S)?(er=0,Na=null,S5(a)):(er=0,Na=null,Rd(i,a,S,7));break;case 5:var O=null;switch(wn.tag){case 26:O=wn.memoizedState;case 5:case 27:var ee=wn;if(O?ob(O):ee.stateNode.complete){er=0,Na=null;var be=ee.sibling;if(be!==null)wn=be;else{var qe=ee.return;qe!==null?(wn=qe,Cp(qe)):wn=null}break t}}er=0,Na=null,Rd(i,a,S,5);break;case 6:er=0,Na=null,Rd(i,a,S,6);break;case 8:w0(),Yr=6;break e;default:throw Error(r(462))}}N3();break}catch(Je){y5(i,Je)}while(!0);return Ga=zo=null,le.H=h,le.A=v,$n=l,wn!==null?0:(mr=null,_n=0,vu(),Yr)}function N3(){for(;wn!==null&&!xt();)x5(wn)}function x5(i){var a=G2(i.alternate,i,Fl);i.memoizedProps=i.pendingProps,a===null?Cp(i):wn=a}function S5(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=U2(l,a,a.pendingProps,a.type,void 0,_n);break;case 11:a=U2(l,a,a.pendingProps,a.type.render,a.ref,_n);break;case 5:yd(a);default:W2(l,a),a=wn=xu(a,Fl),a=G2(l,a,Fl)}i.memoizedProps=i.pendingProps,a===null?Cp(i):wn=a}function Rd(i,a,l,h){Ga=zo=null,yd(a),it=null,Rt=0;var v=a.return;try{if(f3(i,v,a,l,_n)){Yr=1,mp(i,Qs(l,i.current)),wn=null;return}}catch(S){if(v!==null)throw wn=v,S;Yr=1,mp(i,Qs(l,i.current)),wn=null;return}a.flags&32768?(bn||h===1?i=!0:Ad||(_n&536870912)!==0?i=!1:(Nc=i=!0,(h===2||h===9||h===3||h===6)&&(h=wr.current,h!==null&&h.tag===13&&(h.flags|=16384))),_5(a,i)):Cp(a)}function Cp(i){var a=i;do{if((a.flags&32768)!==0){_5(a,Nc);return}i=a.return;var l=g3(a.alternate,a,Fl);if(l!==null){wn=l;return}if(a=a.sibling,a!==null){wn=a;return}wn=a=i}while(a!==null);Yr===0&&(Yr=5)}function _5(i,a){do{var l=y3(i.alternate,i);if(l!==null){l.flags&=32767,wn=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){wn=i;return}wn=i=l}while(i!==null);Yr=6,wn=null}function E5(i,a,l,h,v,S,O,ee,be){i.cancelPendingCommit=null;do jp();while(Di!==0);if(($n&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(S=a.lanes|a.childLanes,S|=rd,pa(i,l,S,O,ee,be),i===mr&&(wn=mr=null,_n=0),Cd=a,Cc=i,Ul=l,y0=S,v0=v,f5=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,j3(De,function(){return j5(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=le.T,le.T=null,v=ve.p,ve.p=2,O=$n,$n|=4;try{v3(i,a,l)}finally{$n=O,ve.p=v,le.T=h}}Di=1,N5(),A5(),T5()}}function N5(){if(Di===1){Di=0;var i=Cc,a=Cd,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=le.T,le.T=null;var h=ve.p;ve.p=2;var v=$n;$n|=4;try{s5(a,i);var S=k0,O=fo(i.containerInfo),ee=S.focusedElem,be=S.selectionRange;if(O!==ee&&ee&&ee.ownerDocument&&ho(ee.ownerDocument.documentElement,ee)){if(be!==null&&qa(ee)){var qe=be.start,Je=be.end;if(Je===void 0&&(Je=qe),"selectionStart"in ee)ee.selectionStart=qe,ee.selectionEnd=Math.min(Je,ee.value.length);else{var rt=ee.ownerDocument||document,Ge=rt&&rt.defaultView||window;if(Ge.getSelection){var Ye=Ge.getSelection(),Ct=ee.textContent.length,Kt=Math.min(be.start,Ct),ur=be.end===void 0?Kt:Math.min(be.end,Ct);!Ye.extend&&Kt>ur&&(O=ur,ur=Kt,Kt=O);var ke=fc(ee,Kt),Ae=fc(ee,ur);if(ke&&Ae&&(Ye.rangeCount!==1||Ye.anchorNode!==ke.node||Ye.anchorOffset!==ke.offset||Ye.focusNode!==Ae.node||Ye.focusOffset!==Ae.offset)){var ze=rt.createRange();ze.setStart(ke.node,ke.offset),Ye.removeAllRanges(),Kt>ur?(Ye.addRange(ze),Ye.extend(Ae.node,Ae.offset)):(ze.setEnd(Ae.node,Ae.offset),Ye.addRange(ze))}}}}for(rt=[],Ye=ee;Ye=Ye.parentNode;)Ye.nodeType===1&&rt.push({element:Ye,left:Ye.scrollLeft,top:Ye.scrollTop});for(typeof ee.focus=="function"&&ee.focus(),ee=0;ee<rt.length;ee++){var nt=rt[ee];nt.element.scrollLeft=nt.left,nt.element.scrollTop=nt.top}}Vp=!!D0,k0=D0=null}finally{$n=v,ve.p=h,le.T=l}}i.current=a,Di=2}}function A5(){if(Di===2){Di=0;var i=Cc,a=Cd,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=le.T,le.T=null;var h=ve.p;ve.p=2;var v=$n;$n|=4;try{e5(i,a.alternate,a)}finally{$n=v,ve.p=h,le.T=l}}Di=3}}function T5(){if(Di===4||Di===3){Di=0,vt();var i=Cc,a=Cd,l=Ul,h=f5;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Di=5:(Di=0,Cd=Cc=null,C5(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Tc=null),rr(l),a=a.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(ct,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=le.T,v=ve.p,ve.p=2,le.T=null;try{for(var S=i.onRecoverableError,O=0;O<h.length;O++){var ee=h[O];S(ee.value,{componentStack:ee.stack})}}finally{le.T=a,ve.p=v}}(Ul&3)!==0&&jp(),Qo(i),v=i.pendingLanes,(l&261930)!==0&&(v&42)!==0?i===b0?Hh++:(Hh=0,b0=i):Hh=0,Gh(0)}}function C5(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Eu(a)))}function jp(){return N5(),A5(),T5(),j5()}function j5(){if(Di!==5)return!1;var i=Cc,a=y0;y0=0;var l=rr(Ul),h=le.T,v=ve.p;try{ve.p=32>l?32:l,le.T=null,l=v0,v0=null;var S=Cc,O=Ul;if(Di=0,Cd=Cc=null,Ul=0,($n&6)!==0)throw Error(r(331));var ee=$n;if($n|=4,u5(S.current),o5(S,S.current,O,l),$n=ee,Gh(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(ct,S)}catch{}return!0}finally{ve.p=v,le.T=h,C5(i,a)}}function R5(i,a,l){a=Qs(l,a),a=Qg(i.stateNode,a,2),i=ln(i,a,2),i!==null&&(Ft(i,2),Qo(i))}function tr(i,a,l){if(i.tag===3)R5(i,i,l);else for(;a!==null;){if(a.tag===3){R5(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Tc===null||!Tc.has(h))){i=Qs(l,i),l=I2(2),h=ln(a,l,2),h!==null&&(D2(l,h,a,i),Ft(h,2),Qo(h));break}}a=a.return}}function S0(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new x3;var v=new Set;h.set(a,v)}else v=h.get(a),v===void 0&&(v=new Set,h.set(a,v));v.has(l)||(p0=!0,v.add(l),i=A3.bind(null,i,a,l),a.then(i,i))}function A3(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,mr===i&&(_n&l)===l&&(Yr===4||Yr===3&&(_n&62914560)===_n&&300>Ue()-_p?($n&2)===0&&jd(i,0):m0|=l,Td===_n&&(Td=0)),Qo(i)}function I5(i,a){a===0&&(a=zs()),i=mo(i,a),i!==null&&(Ft(i,a),Qo(i))}function T3(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),I5(i,l)}function C3(i,a){var l=0;switch(i.tag){case 31:case 13:var h=i.stateNode,v=i.memoizedState;v!==null&&(l=v.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),I5(i,l)}function j3(i,a){return Ze(i,a)}var Rp=null,Id=null,_0=!1,Ip=!1,E0=!1,Rc=0;function Qo(i){i!==Id&&i.next===null&&(Id===null?Rp=Id=i:Id=Id.next=i),Ip=!0,_0||(_0=!0,I3())}function Gh(i,a){if(!E0&&Ip){E0=!0;do for(var l=!1,h=Rp;h!==null;){if(i!==0){var v=h.pendingLanes;if(v===0)var S=0;else{var O=h.suspendedLanes,ee=h.pingedLanes;S=(1<<31-qt(42|i)+1)-1,S&=v&~(O&~ee),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(l=!0,P5(h,S))}else S=_n,S=cn(h,h===mr?S:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(S&3)===0||wi(h,S)||(l=!0,P5(h,S));h=h.next}while(l);E0=!1}}function R3(){D5()}function D5(){Ip=_0=!1;var i=0;Rc!==0&&V3()&&(i=Rc);for(var a=Ue(),l=null,h=Rp;h!==null;){var v=h.next,S=k5(h,a);S===0?(h.next=null,l===null?Rp=v:l.next=v,v===null&&(Id=l)):(l=h,(i!==0||(S&3)!==0)&&(Ip=!0)),h=v}Di!==0&&Di!==5||Gh(i),Rc!==0&&(Rc=0)}function k5(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,v=i.expirationTimes,S=i.pendingLanes&-62914561;0<S;){var O=31-qt(S),ee=1<<O,be=v[O];be===-1?((ee&l)===0||(ee&h)!==0)&&(v[O]=ui(ee,a)):be<=a&&(i.expiredLanes|=ee),S&=~ee}if(a=mr,l=_n,l=cn(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(er===2||er===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&et(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||wi(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&et(h),rr(l)){case 2:case 8:l=gt;break;case 32:l=De;break;case 268435456:l=pt;break;default:l=De}return h=L5.bind(null,i),l=Ze(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&et(h),i.callbackPriority=2,i.callbackNode=null,2}function L5(i,a){if(Di!==0&&Di!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(jp()&&i.callbackNode!==l)return null;var h=_n;return h=cn(i,i===mr?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(m5(i,h,a),k5(i,Ue()),i.callbackNode!=null&&i.callbackNode===l?L5.bind(null,i):null)}function P5(i,a){if(jp())return null;m5(i,a,!0)}function I3(){q3(function(){($n&6)!==0?Ze(dt,R3):D5()})}function N0(){if(Rc===0){var i=g;i===0&&(i=Ot,Ot<<=1,(Ot&261888)===0&&(Ot=256)),Rc=i}return Rc}function M5(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Bi(""+i)}function O5(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function D3(i,a,l,h,v){if(a==="submit"&&l&&l.stateNode===v){var S=M5((v[Qn]||null).action),O=h.submitter;O&&(a=(a=O[Qn]||null)?M5(a.formAction):O.getAttribute("formAction"),a!==null&&(S=a,O=null));var ee=new fi("action","action",null,h,v);i.push({event:ee,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Rc!==0){var be=O?O5(v,O):new FormData(v);Gg(l,{pending:!0,data:be,method:v.method,action:S},null,be)}}else typeof S=="function"&&(ee.preventDefault(),be=O?O5(v,O):new FormData(v),Gg(l,{pending:!0,data:be,method:v.method,action:S},S,be))},currentTarget:v}]})}}for(var A0=0;A0<El.length;A0++){var T0=El[A0],k3=T0.toLowerCase(),L3=T0[0].toUpperCase()+T0.slice(1);Ks(k3,"on"+L3)}Ks(_l,"onAnimationEnd"),Ks(gu,"onAnimationIteration"),Ks(wh,"onAnimationStart"),Ks("dblclick","onDoubleClick"),Ks("focusin","onFocus"),Ks("focusout","onBlur"),Ks(np,"onTransitionRun"),Ks(rp,"onTransitionStart"),Ks(ip,"onTransitionCancel"),Ks(xh,"onTransitionEnd"),Rs("onMouseEnter",["mouseout","mouseover"]),Rs("onMouseLeave",["mouseout","mouseover"]),Rs("onPointerEnter",["pointerout","pointerover"]),Rs("onPointerLeave",["pointerout","pointerover"]),ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($h));function F5(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],v=h.event;h=h.listeners;e:{var S=void 0;if(a)for(var O=h.length-1;0<=O;O--){var ee=h[O],be=ee.instance,qe=ee.currentTarget;if(ee=ee.listener,be!==S&&v.isPropagationStopped())break e;S=ee,v.currentTarget=qe;try{S(v)}catch(Je){yu(Je)}v.currentTarget=null,S=be}else for(O=0;O<h.length;O++){if(ee=h[O],be=ee.instance,qe=ee.currentTarget,ee=ee.listener,be!==S&&v.isPropagationStopped())break e;S=ee,v.currentTarget=qe;try{S(v)}catch(Je){yu(Je)}v.currentTarget=null,S=be}}}}function xn(i,a){var l=a[Oi];l===void 0&&(l=a[Oi]=new Set);var h=i+"__bubble";l.has(h)||(U5(a,i,2,!1),l.add(h))}function C0(i,a,l){var h=0;a&&(h|=4),U5(l,i,h,a)}var Dp="_reactListening"+Math.random().toString(36).slice(2);function j0(i){if(!i[Dp]){i[Dp]=!0,Ro.forEach(function(l){l!=="selectionchange"&&(P3.has(l)||C0(l,!1,i),C0(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Dp]||(a[Dp]=!0,C0("selectionchange",!1,a))}}function U5(i,a,l,h){switch(pb(a)){case 2:var v=c4;break;case 8:v=u4;break;default:v=H0}l=v.bind(null,a,l,i),v=void 0,!io||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),h?v!==void 0?i.addEventListener(a,l,{capture:!0,passive:v}):i.addEventListener(a,l,!0):v!==void 0?i.addEventListener(a,l,{passive:v}):i.addEventListener(a,l,!1)}function R0(i,a,l,h,v){var S=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var O=h.tag;if(O===3||O===4){var ee=h.stateNode.containerInfo;if(ee===v)break;if(O===4)for(O=h.return;O!==null;){var be=O.tag;if((be===3||be===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;ee!==null;){if(O=Qi(ee),O===null)return;if(be=O.tag,be===5||be===6||be===26||be===27){h=S=O;continue e}ee=ee.parentNode}}h=h.return}Pa(function(){var qe=S,Je=Vi(l),rt=[];e:{var Ge=Sh.get(i);if(Ge!==void 0){var Ye=fi,Ct=i;switch(i){case"keypress":if(ts(l)===0)break e;case"keydown":case"keyup":Ye=gn;break;case"focusin":Ct="focus",Ye=ks;break;case"focusout":Ct="blur",Ye=ks;break;case"beforeblur":case"afterblur":Ye=ks;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=Mo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=Ws;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=T;break;case _l:case gu:case wh:Ye=_;break;case xh:Ye=ie;break;case"scroll":case"scrollend":Ye=Ma;break;case"wheel":Ye=He;break;case"copy":case"cut":case"paste":Ye=de;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=Kn;break;case"toggle":case"beforetoggle":Ye=Jt}var Kt=(a&4)!==0,ur=!Kt&&(i==="scroll"||i==="scrollend"),ke=Kt?Ge!==null?Ge+"Capture":null:Ge;Kt=[];for(var Ae=qe,ze;Ae!==null;){var nt=Ae;if(ze=nt.stateNode,nt=nt.tag,nt!==5&&nt!==26&&nt!==27||ze===null||ke===null||(nt=ti(Ae,ke),nt!=null&&Kt.push(Wh(Ae,nt,ze))),ur)break;Ae=Ae.return}0<Kt.length&&(Ge=new Ye(Ge,Ct,null,l,Je),rt.push({event:Ge,listeners:Kt}))}}if((a&7)===0){e:{if(Ge=i==="mouseover"||i==="pointerover",Ye=i==="mouseout"||i==="pointerout",Ge&&l!==ba&&(Ct=l.relatedTarget||l.fromElement)&&(Qi(Ct)||Ct[Vr]))break e;if((Ye||Ge)&&(Ge=Je.window===Je?Je:(Ge=Je.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,Ye?(Ct=l.relatedTarget||l.toElement,Ye=qe,Ct=Ct?Qi(Ct):null,Ct!==null&&(ur=o(Ct),Kt=Ct.tag,Ct!==ur||Kt!==5&&Kt!==27&&Kt!==6)&&(Ct=null)):(Ye=null,Ct=qe),Ye!==Ct)){if(Kt=Mo,nt="onMouseLeave",ke="onMouseEnter",Ae="mouse",(i==="pointerout"||i==="pointerover")&&(Kt=Kn,nt="onPointerLeave",ke="onPointerEnter",Ae="pointer"),ur=Ye==null?Ge:Ji(Ye),ze=Ct==null?Ge:Ji(Ct),Ge=new Kt(nt,Ae+"leave",Ye,l,Je),Ge.target=ur,Ge.relatedTarget=ze,nt=null,Qi(Je)===qe&&(Kt=new Kt(ke,Ae+"enter",Ct,l,Je),Kt.target=ze,Kt.relatedTarget=ur,nt=Kt),ur=nt,Ye&&Ct)t:{for(Kt=M3,ke=Ye,Ae=Ct,ze=0,nt=ke;nt;nt=Kt(nt))ze++;nt=0;for(var $t=Ae;$t;$t=Kt($t))nt++;for(;0<ze-nt;)ke=Kt(ke),ze--;for(;0<nt-ze;)Ae=Kt(Ae),nt--;for(;ze--;){if(ke===Ae||Ae!==null&&ke===Ae.alternate){Kt=ke;break t}ke=Kt(ke),Ae=Kt(Ae)}Kt=null}else Kt=null;Ye!==null&&B5(rt,Ge,Ye,Kt,!1),Ct!==null&&ur!==null&&B5(rt,ur,Ct,Kt,!0)}}e:{if(Ge=qe?Ji(qe):window,Ye=Ge.nodeName&&Ge.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Ge.type==="file")var zn=Fo;else if(pu(Ge))if(vs)zn=Va;else{zn=Lr;var Pt=dc}else Ye=Ge.nodeName,!Ye||Ye.toLowerCase()!=="input"||Ge.type!=="checkbox"&&Ge.type!=="radio"?qe&&ko(qe.elementType)&&(zn=Fo):zn=nd;if(zn&&(zn=zn(i,qe))){Ps(rt,zn,l,Je);break e}Pt&&Pt(i,Ge,qe),i==="focusout"&&qe&&Ge.type==="number"&&qe.memoizedProps.value!=null&&gl(Ge,"number",Ge.value)}switch(Pt=qe?Ji(qe):window,i){case"focusin":(pu(Pt)||Pt.contentEditable==="true")&&(Ms=Pt,po=qe,zi=null);break;case"focusout":zi=po=Ms=null;break;case"mousedown":Ys=!0;break;case"contextmenu":case"mouseup":case"dragend":Ys=!1,Mn(rt,l,Je);break;case"selectionchange":if(Sl)break;case"keydown":case"keyup":Mn(rt,l,Je)}var un;if(hn)e:{switch(i){case"compositionstart":var En="onCompositionStart";break e;case"compositionend":En="onCompositionEnd";break e;case"compositionupdate":En="onCompositionUpdate";break e}En=void 0}else Fa?Ls(i,l)&&(En="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(En="onCompositionStart");En&&(Ei&&l.locale!=="ko"&&(Fa||En!=="onCompositionStart"?En==="onCompositionEnd"&&Fa&&(un=wl()):(es=Je,so="value"in es?es.value:es.textContent,Fa=!0)),Pt=kp(qe,En),0<Pt.length&&(En=new Re(En,i,null,l,Je),rt.push({event:En,listeners:Pt}),un?En.data=un:(un=Oa(l),un!==null&&(En.data=un)))),(un=pi?is(i,l):oo(i,l))&&(En=kp(qe,"onBeforeInput"),0<En.length&&(Pt=new Re("onBeforeInput","beforeinput",null,l,Je),rt.push({event:Pt,listeners:En}),Pt.data=un)),D3(rt,i,qe,l,Je)}F5(rt,a)})}function Wh(i,a,l){return{instance:i,listener:a,currentTarget:l}}function kp(i,a){for(var l=a+"Capture",h=[];i!==null;){var v=i,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=ti(i,l),v!=null&&h.unshift(Wh(i,v,S)),v=ti(i,a),v!=null&&h.push(Wh(i,v,S))),i.tag===3)return h;i=i.return}return[]}function M3(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function B5(i,a,l,h,v){for(var S=a._reactName,O=[];l!==null&&l!==h;){var ee=l,be=ee.alternate,qe=ee.stateNode;if(ee=ee.tag,be!==null&&be===h)break;ee!==5&&ee!==26&&ee!==27||qe===null||(be=qe,v?(qe=ti(l,S),qe!=null&&O.unshift(Wh(l,qe,be))):v||(qe=ti(l,S),qe!=null&&O.push(Wh(l,qe,be)))),l=l.return}O.length!==0&&i.push({event:a,listeners:O})}var O3=/\r\n?/g,F3=/\u0000|\uFFFD/g;function V5(i){return(typeof i=="string"?i:""+i).replace(O3,`
`).replace(F3,"")}function z5(i,a){return a=V5(a),V5(i)===a}function cr(i,a,l,h,v,S){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||ei(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&ei(i,""+h);break;case"className":hi(i,"class",h);break;case"tabIndex":hi(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":hi(i,l,h);break;case"style":bl(i,h,S);break;case"data":if(a!=="object"){hi(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Bi(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(l==="formAction"?(a!=="input"&&cr(i,a,"name",v.name,v,null),cr(i,a,"formEncType",v.formEncType,v,null),cr(i,a,"formMethod",v.formMethod,v,null),cr(i,a,"formTarget",v.formTarget,v,null)):(cr(i,a,"encType",v.encType,v,null),cr(i,a,"method",v.method,v,null),cr(i,a,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=Bi(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Is);break;case"onScroll":h!=null&&xn("scroll",i);break;case"onScrollEnd":h!=null&&xn("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=Bi(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":xn("beforetoggle",i),xn("toggle",i),Zi(i,"popover",h);break;case"xlinkActuate":Nr(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Nr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Nr(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Nr(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Nr(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Nr(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Nr(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Nr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Nr(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Zi(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Lo.get(l)||l,Zi(i,l,h))}}function I0(i,a,l,h,v,S){switch(l){case"style":bl(i,h,S);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?ei(i,h):(typeof h=="number"||typeof h=="bigint")&&ei(i,""+h);break;case"onScroll":h!=null&&xn("scroll",i);break;case"onScrollEnd":h!=null&&xn("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Is);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ui.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),a=l.slice(2,v?l.length-7:void 0),S=i[Qn]||null,S=S!=null?S[l]:null,typeof S=="function"&&i.removeEventListener(a,S,v),typeof h=="function")){typeof S!="function"&&S!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,v);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Zi(i,l,h)}}}function cs(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xn("error",i),xn("load",i);var h=!1,v=!1,S;for(S in l)if(l.hasOwnProperty(S)){var O=l[S];if(O!=null)switch(S){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:cr(i,a,S,O,l,null)}}v&&cr(i,a,"srcSet",l.srcSet,l,null),h&&cr(i,a,"src",l.src,l,null);return;case"input":xn("invalid",i);var ee=S=O=v=null,be=null,qe=null;for(h in l)if(l.hasOwnProperty(h)){var Je=l[h];if(Je!=null)switch(h){case"name":v=Je;break;case"type":O=Je;break;case"checked":be=Je;break;case"defaultChecked":qe=Je;break;case"value":S=Je;break;case"defaultValue":ee=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(r(137,a));break;default:cr(i,a,h,Je,l,null)}}lc(i,S,ee,be,qe,O,v,!1);return;case"select":xn("invalid",i),h=O=S=null;for(v in l)if(l.hasOwnProperty(v)&&(ee=l[v],ee!=null))switch(v){case"value":S=ee;break;case"defaultValue":O=ee;break;case"multiple":h=ee;default:cr(i,a,v,ee,l,null)}a=S,l=O,i.multiple=!!h,a!=null?_i(i,!!h,a,!1):l!=null&&_i(i,!!h,l,!0);return;case"textarea":xn("invalid",i),S=v=h=null;for(O in l)if(l.hasOwnProperty(O)&&(ee=l[O],ee!=null))switch(O){case"value":h=ee;break;case"defaultValue":v=ee;break;case"children":S=ee;break;case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(91));break;default:cr(i,a,O,ee,l,null)}ya(i,h,v,S);return;case"option":for(be in l)if(l.hasOwnProperty(be)&&(h=l[be],h!=null))switch(be){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:cr(i,a,be,h,l,null)}return;case"dialog":xn("beforetoggle",i),xn("toggle",i),xn("cancel",i),xn("close",i);break;case"iframe":case"object":xn("load",i);break;case"video":case"audio":for(h=0;h<$h.length;h++)xn($h[h],i);break;case"image":xn("error",i),xn("load",i);break;case"details":xn("toggle",i);break;case"embed":case"source":case"link":xn("error",i),xn("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(qe in l)if(l.hasOwnProperty(qe)&&(h=l[qe],h!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:cr(i,a,qe,h,l,null)}return;default:if(ko(a)){for(Je in l)l.hasOwnProperty(Je)&&(h=l[Je],h!==void 0&&I0(i,a,Je,h,l,void 0));return}}for(ee in l)l.hasOwnProperty(ee)&&(h=l[ee],h!=null&&cr(i,a,ee,h,l,null))}function U3(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,O=null,ee=null,be=null,qe=null,Je=null;for(Ye in l){var rt=l[Ye];if(l.hasOwnProperty(Ye)&&rt!=null)switch(Ye){case"checked":break;case"value":break;case"defaultValue":be=rt;default:h.hasOwnProperty(Ye)||cr(i,a,Ye,null,h,rt)}}for(var Ge in h){var Ye=h[Ge];if(rt=l[Ge],h.hasOwnProperty(Ge)&&(Ye!=null||rt!=null))switch(Ge){case"type":S=Ye;break;case"name":v=Ye;break;case"checked":qe=Ye;break;case"defaultChecked":Je=Ye;break;case"value":O=Ye;break;case"defaultValue":ee=Ye;break;case"children":case"dangerouslySetInnerHTML":if(Ye!=null)throw Error(r(137,a));break;default:Ye!==rt&&cr(i,a,Ge,Ye,h,rt)}}no(i,O,ee,be,qe,Je,S,v);return;case"select":Ye=O=ee=Ge=null;for(S in l)if(be=l[S],l.hasOwnProperty(S)&&be!=null)switch(S){case"value":break;case"multiple":Ye=be;default:h.hasOwnProperty(S)||cr(i,a,S,null,h,be)}for(v in h)if(S=h[v],be=l[v],h.hasOwnProperty(v)&&(S!=null||be!=null))switch(v){case"value":Ge=S;break;case"defaultValue":ee=S;break;case"multiple":O=S;default:S!==be&&cr(i,a,v,S,h,be)}a=ee,l=O,h=Ye,Ge!=null?_i(i,!!l,Ge,!1):!!h!=!!l&&(a!=null?_i(i,!!l,a,!0):_i(i,!!l,l?[]:"",!1));return;case"textarea":Ye=Ge=null;for(ee in l)if(v=l[ee],l.hasOwnProperty(ee)&&v!=null&&!h.hasOwnProperty(ee))switch(ee){case"value":break;case"children":break;default:cr(i,a,ee,null,h,v)}for(O in h)if(v=h[O],S=l[O],h.hasOwnProperty(O)&&(v!=null||S!=null))switch(O){case"value":Ge=v;break;case"defaultValue":Ye=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==S&&cr(i,a,O,v,h,S)}yl(i,Ge,Ye);return;case"option":for(var Ct in l)if(Ge=l[Ct],l.hasOwnProperty(Ct)&&Ge!=null&&!h.hasOwnProperty(Ct))switch(Ct){case"selected":i.selected=!1;break;default:cr(i,a,Ct,null,h,Ge)}for(be in h)if(Ge=h[be],Ye=l[be],h.hasOwnProperty(be)&&Ge!==Ye&&(Ge!=null||Ye!=null))switch(be){case"selected":i.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;default:cr(i,a,be,Ge,h,Ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in l)Ge=l[Kt],l.hasOwnProperty(Kt)&&Ge!=null&&!h.hasOwnProperty(Kt)&&cr(i,a,Kt,null,h,Ge);for(qe in h)if(Ge=h[qe],Ye=l[qe],h.hasOwnProperty(qe)&&Ge!==Ye&&(Ge!=null||Ye!=null))switch(qe){case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(r(137,a));break;default:cr(i,a,qe,Ge,h,Ye)}return;default:if(ko(a)){for(var ur in l)Ge=l[ur],l.hasOwnProperty(ur)&&Ge!==void 0&&!h.hasOwnProperty(ur)&&I0(i,a,ur,void 0,h,Ge);for(Je in h)Ge=h[Je],Ye=l[Je],!h.hasOwnProperty(Je)||Ge===Ye||Ge===void 0&&Ye===void 0||I0(i,a,Je,Ge,h,Ye);return}}for(var ke in l)Ge=l[ke],l.hasOwnProperty(ke)&&Ge!=null&&!h.hasOwnProperty(ke)&&cr(i,a,ke,null,h,Ge);for(rt in h)Ge=h[rt],Ye=l[rt],!h.hasOwnProperty(rt)||Ge===Ye||Ge==null&&Ye==null||cr(i,a,rt,Ge,h,Ye)}function q5(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function B3(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,l=performance.getEntriesByType("resource"),h=0;h<l.length;h++){var v=l[h],S=v.transferSize,O=v.initiatorType,ee=v.duration;if(S&&ee&&q5(O)){for(O=0,ee=v.responseEnd,h+=1;h<l.length;h++){var be=l[h],qe=be.startTime;if(qe>ee)break;var Je=be.transferSize,rt=be.initiatorType;Je&&q5(rt)&&(be=be.responseEnd,O+=Je*(be<ee?1:(ee-qe)/(be-qe)))}if(--h,a+=8*(S+O)/(v.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var D0=null,k0=null;function Lp(i){return i.nodeType===9?i:i.ownerDocument}function H5(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function G5(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function L0(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var P0=null;function V3(){var i=window.event;return i&&i.type==="popstate"?i===P0?!1:(P0=i,!0):(P0=null,!1)}var $5=typeof setTimeout=="function"?setTimeout:void 0,z3=typeof clearTimeout=="function"?clearTimeout:void 0,W5=typeof Promise=="function"?Promise:void 0,q3=typeof queueMicrotask=="function"?queueMicrotask:typeof W5<"u"?function(i){return W5.resolve(null).then(i).catch(H3)}:$5;function H3(i){setTimeout(function(){throw i})}function Ic(i){return i==="head"}function Y5(i,a){var l=a,h=0;do{var v=l.nextSibling;if(i.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(h===0){i.removeChild(v),Pd(a);return}h--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")h++;else if(l==="html")Yh(i.ownerDocument.documentElement);else if(l==="head"){l=i.ownerDocument.head,Yh(l);for(var S=l.firstChild;S;){var O=S.nextSibling,ee=S.nodeName;S[Fi]||ee==="SCRIPT"||ee==="STYLE"||ee==="LINK"&&S.rel.toLowerCase()==="stylesheet"||l.removeChild(S),S=O}}else l==="body"&&Yh(i.ownerDocument.body);l=v}while(l);Pd(a)}function K5(i,a){var l=i;i=0;do{var h=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),h&&h.nodeType===8)if(l=h.data,l==="/$"){if(i===0)break;i--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||i++;l=h}while(l)}function M0(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":M0(l),ma(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function G3(i,a,l,h){for(;i.nodeType===1;){var v=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Fi])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(S=i.getAttribute("rel"),S==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(S!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(S=i.getAttribute("src"),(S!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===S)return i}else return i;if(i=Ya(i.nextSibling),i===null)break}return null}function $3(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=Ya(i.nextSibling),i===null))return null;return i}function X5(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Ya(i.nextSibling),i===null))return null;return i}function O0(i){return i.data==="$?"||i.data==="$~"}function F0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function W3(i,a){var l=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||l.readyState!=="loading")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Ya(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var U0=null;function Q5(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"||l==="/&"){if(a===0)return Ya(i.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}i=i.nextSibling}return null}function J5(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return i;a--}else l!=="/$"&&l!=="/&"||a++}i=i.previousSibling}return null}function Z5(i,a,l){switch(a=Lp(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Yh(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);ma(i)}var Ka=new Map,eb=new Set;function Pp(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Bl=ve.d;ve.d={f:Y3,r:K3,D:X3,C:Q3,L:J3,m:Z3,X:t4,S:e4,M:n4};function Y3(){var i=Bl.f(),a=Ap();return i||a}function K3(i){var a=Si(i);a!==null&&a.tag===5&&a.type==="form"?y2(a):Bl.r(i)}var Dd=typeof document>"u"?null:document;function tb(i,a,l){var h=Dd;if(h&&typeof a=="string"&&a){var v=Ar(a);v='link[rel="'+i+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),eb.has(v)||(eb.add(v),i={rel:i,crossOrigin:l,href:a},h.querySelector(v)===null&&(a=h.createElement("link"),cs(a,"link",i),yr(a),h.head.appendChild(a)))}}function X3(i){Bl.D(i),tb("dns-prefetch",i,null)}function Q3(i,a){Bl.C(i,a),tb("preconnect",i,a)}function J3(i,a,l){Bl.L(i,a,l);var h=Dd;if(h&&i&&a){var v='link[rel="preload"][as="'+Ar(a)+'"]';a==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Ar(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Ar(l.imageSizes)+'"]')):v+='[href="'+Ar(i)+'"]';var S=v;switch(a){case"style":S=kd(i);break;case"script":S=Ld(i)}Ka.has(S)||(i=x({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),Ka.set(S,i),h.querySelector(v)!==null||a==="style"&&h.querySelector(Kh(S))||a==="script"&&h.querySelector(Xh(S))||(a=h.createElement("link"),cs(a,"link",i),yr(a),h.head.appendChild(a)))}}function Z3(i,a){Bl.m(i,a);var l=Dd;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+Ar(h)+'"][href="'+Ar(i)+'"]',S=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Ld(i)}if(!Ka.has(S)&&(i=x({rel:"modulepreload",href:i},a),Ka.set(S,i),l.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Xh(S)))return}h=l.createElement("link"),cs(h,"link",i),yr(h),l.head.appendChild(h)}}}function e4(i,a,l){Bl.S(i,a,l);var h=Dd;if(h&&i){var v=ps(h).hoistableStyles,S=kd(i);a=a||"default";var O=v.get(S);if(!O){var ee={loading:0,preload:null};if(O=h.querySelector(Kh(S)))ee.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":a},l),(l=Ka.get(S))&&B0(i,l);var be=O=h.createElement("link");yr(be),cs(be,"link",i),be._p=new Promise(function(qe,Je){be.onload=qe,be.onerror=Je}),be.addEventListener("load",function(){ee.loading|=1}),be.addEventListener("error",function(){ee.loading|=2}),ee.loading|=4,Mp(O,a,h)}O={type:"stylesheet",instance:O,count:1,state:ee},v.set(S,O)}}}function t4(i,a){Bl.X(i,a);var l=Dd;if(l&&i){var h=ps(l).hoistableScripts,v=Ld(i),S=h.get(v);S||(S=l.querySelector(Xh(v)),S||(i=x({src:i,async:!0},a),(a=Ka.get(v))&&V0(i,a),S=l.createElement("script"),yr(S),cs(S,"link",i),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(v,S))}}function n4(i,a){Bl.M(i,a);var l=Dd;if(l&&i){var h=ps(l).hoistableScripts,v=Ld(i),S=h.get(v);S||(S=l.querySelector(Xh(v)),S||(i=x({src:i,async:!0,type:"module"},a),(a=Ka.get(v))&&V0(i,a),S=l.createElement("script"),yr(S),cs(S,"link",i),l.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},h.set(v,S))}}function nb(i,a,l,h){var v=(v=me.current)?Pp(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=kd(l.href),l=ps(v).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=kd(l.href);var S=ps(v).hoistableStyles,O=S.get(i);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(i,O),(S=v.querySelector(Kh(i)))&&!S._p&&(O.instance=S,O.state.loading=5),Ka.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ka.set(i,l),S||r4(v,i,l,O.state))),a&&h===null)throw Error(r(528,""));return O}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ld(l),l=ps(v).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function kd(i){return'href="'+Ar(i)+'"'}function Kh(i){return'link[rel="stylesheet"]['+i+"]"}function rb(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function r4(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),cs(a,"link",l),yr(a),i.head.appendChild(a))}function Ld(i){return'[src="'+Ar(i)+'"]'}function Xh(i){return"script[async]"+i}function ib(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+Ar(l.href)+'"]');if(h)return a.instance=h,yr(h),h;var v=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),yr(h),cs(h,"style",v),Mp(h,l.precedence,i),a.instance=h;case"stylesheet":v=kd(l.href);var S=i.querySelector(Kh(v));if(S)return a.state.loading|=4,a.instance=S,yr(S),S;h=rb(l),(v=Ka.get(v))&&B0(h,v),S=(i.ownerDocument||i).createElement("link"),yr(S);var O=S;return O._p=new Promise(function(ee,be){O.onload=ee,O.onerror=be}),cs(S,"link",h),a.state.loading|=4,Mp(S,l.precedence,i),a.instance=S;case"script":return S=Ld(l.src),(v=i.querySelector(Xh(S)))?(a.instance=v,yr(v),v):(h=l,(v=Ka.get(S))&&(h=x({},l),V0(h,v)),i=i.ownerDocument||i,v=i.createElement("script"),yr(v),cs(v,"link",h),i.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Mp(h,l.precedence,i));return a.instance}function Mp(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,S=v,O=0;O<h.length;O++){var ee=h[O];if(ee.dataset.precedence===a)S=ee;else if(S!==v)break}S?S.parentNode.insertBefore(i,S.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function B0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function V0(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Op=null;function sb(i,a,l){if(Op===null){var h=new Map,v=Op=new Map;v.set(l,h)}else v=Op,h=v.get(l),h||(h=new Map,v.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),v=0;v<l.length;v++){var S=l[v];if(!(S[Fi]||S[Un]||i==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var O=S.getAttribute(a)||"";O=i+O;var ee=h.get(O);ee?ee.push(S):h.set(O,[S])}}return h}function ab(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function i4(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function ob(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function s4(i,a,l,h){if(l.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=kd(h.href),S=a.querySelector(Kh(v));if(S){a=S._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Fp.bind(i),a.then(i,i)),l.state.loading|=4,l.instance=S,yr(S);return}S=a.ownerDocument||a,h=rb(h),(v=Ka.get(v))&&B0(h,v),S=S.createElement("link"),yr(S);var O=S;O._p=new Promise(function(ee,be){O.onload=ee,O.onerror=be}),cs(S,"link",h),l.instance=S}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(i.count++,l=Fp.bind(i),a.addEventListener("load",l),a.addEventListener("error",l))}}var z0=0;function a4(i,a){return i.stylesheets&&i.count===0&&Bp(i,i.stylesheets),0<i.count||0<i.imgCount?function(l){var h=setTimeout(function(){if(i.stylesheets&&Bp(i,i.stylesheets),i.unsuspend){var S=i.unsuspend;i.unsuspend=null,S()}},6e4+a);0<i.imgBytes&&z0===0&&(z0=62500*B3());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Bp(i,i.stylesheets),i.unsuspend)){var S=i.unsuspend;i.unsuspend=null,S()}},(i.imgBytes>z0?50:800)+a);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function Fp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bp(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Up=null;function Bp(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Up=new Map,a.forEach(o4,i),Up=null,Fp.call(i))}function o4(i,a){if(!(a.state.loading&4)){var l=Up.get(i);if(l)var h=l.get(null);else{l=new Map,Up.set(i,l);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var O=v[S];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(l.set(O.dataset.precedence,O),h=O)}h&&l.set(null,h)}v=a.instance,O=v.getAttribute("data-precedence"),S=l.get(O)||h,S===h&&l.set(null,v),l.set(O,v),this.count++,h=Fp.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),S?S.parentNode.insertBefore(v,S.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),a.state.loading|=4}}var Qh={$$typeof:G,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function l4(i,a,l,h,v,S,O,ee,be){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.hiddenUpdates=Zr(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function lb(i,a,l,h,v,S,O,ee,be,qe,Je,rt){return i=new l4(i,a,l,O,be,qe,Je,rt,ee),a=1,S===!0&&(a|=24),S=Hi(3,null,null,a),i.current=S,S.stateNode=i,a=bc(),a.refCount++,i.pooledCache=a,a.refCount++,S.memoizedState={element:h,isDehydrated:l,cache:a},yt(S),i}function cb(i){return i?(i=Ti,i):Ti}function ub(i,a,l,h,v,S){v=cb(v),h.context===null?h.context=v:h.pendingContext=v,h=Yt(a),h.payload={element:l},S=S===void 0?null:S,S!==null&&(h.callback=S),l=ln(i,h,a),l!==null&&(la(l,i,a),Hn(l,i,a))}function db(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function q0(i,a){db(i,a),(i=i.alternate)&&db(i,a)}function hb(i){if(i.tag===13||i.tag===31){var a=mo(i,67108864);a!==null&&la(a,i,67108864),q0(i,67108864)}}function fb(i){if(i.tag===13||i.tag===31){var a=Ta();a=Yn(a);var l=mo(i,a);l!==null&&la(l,i,a),q0(i,a)}}var Vp=!0;function c4(i,a,l,h){var v=le.T;le.T=null;var S=ve.p;try{ve.p=2,H0(i,a,l,h)}finally{ve.p=S,le.T=v}}function u4(i,a,l,h){var v=le.T;le.T=null;var S=ve.p;try{ve.p=8,H0(i,a,l,h)}finally{ve.p=S,le.T=v}}function H0(i,a,l,h){if(Vp){var v=G0(h);if(v===null)R0(i,a,h,zp,l),mb(i,h);else if(h4(v,i,a,l,h))h.stopPropagation();else if(mb(i,h),a&4&&-1<d4.indexOf(i)){for(;v!==null;){var S=Si(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var O=Lt(S.pendingLanes);if(O!==0){var ee=S;for(ee.pendingLanes|=2,ee.entangledLanes|=2;O;){var be=1<<31-qt(O);ee.entanglements[1]|=be,O&=~be}Qo(S),($n&6)===0&&(Ep=Ue()+500,Gh(0))}}break;case 31:case 13:ee=mo(S,2),ee!==null&&la(ee,S,2),Ap(),q0(S,2)}if(S=G0(h),S===null&&R0(i,a,h,zp,l),S===v)break;v=S}v!==null&&h.stopPropagation()}else R0(i,a,h,null,l)}}function G0(i){return i=Vi(i),$0(i)}var zp=null;function $0(i){if(zp=null,i=Qi(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===31){if(i=d(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return zp=i,null}function pb(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ot()){case dt:return 2;case gt:return 8;case De:case We:return 32;case pt:return 268435456;default:return 32}default:return 32}}var W0=!1,Dc=null,kc=null,Lc=null,Jh=new Map,Zh=new Map,Pc=[],d4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mb(i,a){switch(i){case"focusin":case"focusout":Dc=null;break;case"dragenter":case"dragleave":kc=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":Jh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zh.delete(a.pointerId)}}function ef(i,a,l,h,v,S){return i===null||i.nativeEvent!==S?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:S,targetContainers:[v]},a!==null&&(a=Si(a),a!==null&&hb(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function h4(i,a,l,h,v){switch(a){case"focusin":return Dc=ef(Dc,i,a,l,h,v),!0;case"dragenter":return kc=ef(kc,i,a,l,h,v),!0;case"mouseover":return Lc=ef(Lc,i,a,l,h,v),!0;case"pointerover":var S=v.pointerId;return Jh.set(S,ef(Jh.get(S)||null,i,a,l,h,v)),!0;case"gotpointercapture":return S=v.pointerId,Zh.set(S,ef(Zh.get(S)||null,i,a,l,h,v)),!0}return!1}function gb(i){var a=Qi(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,xi(i.priority,function(){fb(l)});return}}else if(a===31){if(a=d(l),a!==null){i.blockedOn=a,xi(i.priority,function(){fb(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qp(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=G0(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);ba=h,l.target.dispatchEvent(h),ba=null}else return a=Si(l),a!==null&&hb(a),i.blockedOn=l,!1;a.shift()}return!0}function yb(i,a,l){qp(i)&&l.delete(a)}function f4(){W0=!1,Dc!==null&&qp(Dc)&&(Dc=null),kc!==null&&qp(kc)&&(kc=null),Lc!==null&&qp(Lc)&&(Lc=null),Jh.forEach(yb),Zh.forEach(yb)}function Hp(i,a){i.blockedOn===a&&(i.blockedOn=null,W0||(W0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,f4)))}var Gp=null;function vb(i){Gp!==i&&(Gp=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gp===i&&(Gp=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],v=i[a+2];if(typeof h!="function"){if($0(h||l)===null)continue;break}var S=Si(l);S!==null&&(i.splice(a,3),a-=3,Gg(S,{pending:!0,data:v,method:l.method,action:h},h,v))}}))}function Pd(i){function a(be){return Hp(be,i)}Dc!==null&&Hp(Dc,i),kc!==null&&Hp(kc,i),Lc!==null&&Hp(Lc,i),Jh.forEach(a),Zh.forEach(a);for(var l=0;l<Pc.length;l++){var h=Pc[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Pc.length&&(l=Pc[0],l.blockedOn===null);)gb(l),l.blockedOn===null&&Pc.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var v=l[h],S=l[h+1],O=v[Qn]||null;if(typeof S=="function")O||vb(l);else if(O){var ee=null;if(S&&S.hasAttribute("formAction")){if(v=S,O=S[Qn]||null)ee=O.formAction;else if($0(v)!==null)continue}else ee=O.action;typeof ee=="function"?l[h+1]=ee:(l.splice(h,3),h-=3),vb(l)}}}function bb(){function i(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function a(){v!==null&&(v(),v=null),h||setTimeout(l,20)}function l(){if(!h&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){h=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),v!==null&&(v(),v=null)}}}function Y0(i){this._internalRoot=i}$p.prototype.render=Y0.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,h=Ta();ub(l,h,i,a,null,null)},$p.prototype.unmount=Y0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;ub(i.current,2,null,i,null,null),Ap(),a[Vr]=null}};function $p(i){this._internalRoot=i}$p.prototype.unstable_scheduleHydration=function(i){if(i){var a=Br();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Pc.length&&a!==0&&a<Pc[l].priority;l++);Pc.splice(l,0,i),l===0&&gb(i)}};var wb=e.version;if(wb!=="19.2.0")throw Error(r(527,wb,"19.2.0"));ve.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=p(a),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var p4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wp.isDisabled&&Wp.supportsFiber)try{ct=Wp.inject(p4),bt=Wp}catch{}}return nf.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,h="",v=T2,S=C2,O=j2;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),a=lb(i,1,!1,null,null,l,h,null,v,S,O,bb),i[Vr]=a.current,j0(i),new Y0(a)},nf.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var h=!1,v="",S=T2,O=C2,ee=j2,be=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(O=l.onCaughtError),l.onRecoverableError!==void 0&&(ee=l.onRecoverableError),l.formState!==void 0&&(be=l.formState)),a=lb(i,1,!0,a,l??null,h,v,be,S,O,ee,bb),a.context=cb(null),l=a.current,h=Ta(),h=Yn(h),v=Yt(h),v.callback=null,ln(l,v,h),l=h,a.current.lanes=l,Ft(a,l),Qo(a),i[Vr]=a.current,j0(i),new $p(a)},nf.version="19.2.0",nf}var Rb;function N4(){if(Rb)return Q0.exports;Rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Q0.exports=E4(),Q0.exports}var A4=N4();const T4=GS(A4);var Ib="popstate";function C4(n={}){function e(r,s){let{pathname:o,search:u,hash:d}=r.location;return Wy("",{pathname:o,search:u,hash:d},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Tf(s)}return R4(e,t,null,n)}function Fr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ao(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function j4(){return Math.random().toString(36).substring(2,10)}function Db(n,e){return{usr:n.state,key:n.key,idx:e}}function Wy(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?uh(e):e,state:t,key:e&&e.key||r||j4()}}function Tf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function uh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function R4(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,u=s.history,d="POP",f=null,p=m();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function m(){return(u.state||{idx:null}).idx}function x(){d="POP";let C=m(),k=C==null?null:C-p;p=C,f&&f({action:d,location:D.location,delta:k})}function E(C,k){d="PUSH";let H=Wy(D.location,C,k);p=m()+1;let G=Db(H,p),V=D.createHref(H);try{u.pushState(G,"",V)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;s.location.assign(V)}o&&f&&f({action:d,location:D.location,delta:1})}function w(C,k){d="REPLACE";let H=Wy(D.location,C,k);p=m();let G=Db(H,p),V=D.createHref(H);u.replaceState(G,"",V),o&&f&&f({action:d,location:D.location,delta:0})}function A(C){return I4(C)}let D={get action(){return d},get location(){return n(s,u)},listen(C){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Ib,x),f=C,()=>{s.removeEventListener(Ib,x),f=null}},createHref(C){return e(s,C)},createURL:A,encodeLocation(C){let k=A(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:E,replace:w,go(C){return u.go(C)}};return D}function I4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Fr(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Tf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function $S(n,e,t="/"){return D4(n,e,t,!1)}function D4(n,e,t,r){let s=typeof e=="string"?uh(e):e,o=Ql(s.pathname||"/",t);if(o==null)return null;let u=WS(n);k4(u);let d=null;for(let f=0;d==null&&f<u.length;++f){let p=H4(o);d=z4(u[f],p,r)}return d}function WS(n,e=[],t=[],r="",s=!1){let o=(u,d,f=s,p)=>{let m={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&f)return;Fr(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let x=Yl([r,m.relativePath]),E=t.concat(m);u.children&&u.children.length>0&&(Fr(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),WS(u.children,e,E,x,f)),!(u.path==null&&!u.index)&&e.push({path:x,score:B4(x,u.index),routesMeta:E})};return n.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))o(u,d);else for(let f of YS(u.path))o(u,d,!0,f)}),e}function YS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let u=YS(r.join("/")),d=[];return d.push(...u.map(f=>f===""?o:[o,f].join("/"))),s&&d.push(...u),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function k4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:V4(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var L4=/^:[\w-]+$/,P4=3,M4=2,O4=1,F4=10,U4=-2,kb=n=>n==="*";function B4(n,e){let t=n.split("/"),r=t.length;return t.some(kb)&&(r+=U4),e&&(r+=M4),t.filter(s=>!kb(s)).reduce((s,o)=>s+(L4.test(o)?P4:o===""?O4:F4),r)}function V4(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function z4(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",u=[];for(let d=0;d<r.length;++d){let f=r[d],p=d===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",x=Rm({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},m),E=f.route;if(!x&&p&&t&&!r[r.length-1].route.index&&(x=Rm({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},m)),!x)return null;Object.assign(s,x.params),u.push({params:s,pathname:Yl([o,x.pathname]),pathnameBase:K4(Yl([o,x.pathnameBase])),route:E}),x.pathnameBase!=="/"&&(o=Yl([o,x.pathnameBase]))}return u}function Rm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=q4(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:x},E)=>{if(m==="*"){let A=d[E]||"";u=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=d[E];return x&&!w?p[m]=void 0:p[m]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function q4(n,e=!1,t=!0){Ao(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function H4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ao(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ql(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var G4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$4=n=>G4.test(n);function W4(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?uh(n):n,o;if(t)if($4(t))o=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),Ao(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?o=Lb(t.substring(1),"/"):o=Lb(t,e)}else o=e;return{pathname:o,search:X4(r),hash:Q4(s)}}function Lb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function ty(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Y4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function KS(n){let e=Y4(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function XS(n,e,t,r=!1){let s;typeof n=="string"?s=uh(n):(s={...n},Fr(!s.pathname||!s.pathname.includes("?"),ty("?","pathname","search",s)),Fr(!s.pathname||!s.pathname.includes("#"),ty("#","pathname","hash",s)),Fr(!s.search||!s.search.includes("#"),ty("#","search","hash",s)));let o=n===""||s.pathname==="",u=o?"/":s.pathname,d;if(u==null)d=t;else{let x=e.length-1;if(!r&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),x-=1;s.pathname=E.join("/")}d=x>=0?e[x]:"/"}let f=W4(s,d),p=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||m)&&(f.pathname+="/"),f}var Yl=n=>n.join("/").replace(/\/\/+/g,"/"),K4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),X4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Q4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function J4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var QS=["POST","PUT","PATCH","DELETE"];new Set(QS);var Z4=["GET",...QS];new Set(Z4);var dh=K.createContext(null);dh.displayName="DataRouter";var sg=K.createContext(null);sg.displayName="DataRouterState";K.createContext(!1);var JS=K.createContext({isTransitioning:!1});JS.displayName="ViewTransition";var eT=K.createContext(new Map);eT.displayName="Fetchers";var tT=K.createContext(null);tT.displayName="Await";var dl=K.createContext(null);dl.displayName="Navigation";var Uf=K.createContext(null);Uf.displayName="Location";var sc=K.createContext({outlet:null,matches:[],isDataRoute:!1});sc.displayName="Route";var B1=K.createContext(null);B1.displayName="RouteError";function nT(n,{relative:e}={}){Fr(Bf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=K.useContext(dl),{hash:s,pathname:o,search:u}=Vf(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:Yl([t,o])),r.createHref({pathname:d,search:u,hash:s})}function Bf(){return K.useContext(Uf)!=null}function eo(){return Fr(Bf(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(Uf).location}var ZS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function e_(n){K.useContext(dl).static||K.useLayoutEffect(n)}function ci(){let{isDataRoute:n}=K.useContext(sc);return n?mT():rT()}function rT(){Fr(Bf(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(dh),{basename:e,navigator:t}=K.useContext(dl),{matches:r}=K.useContext(sc),{pathname:s}=eo(),o=JSON.stringify(KS(r)),u=K.useRef(!1);return e_(()=>{u.current=!0}),K.useCallback((f,p={})=>{if(Ao(u.current,ZS),!u.current)return;if(typeof f=="number"){t.go(f);return}let m=XS(f,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Yl([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,o,s,n])}K.createContext(null);function Vf(n,{relative:e}={}){let{matches:t}=K.useContext(sc),{pathname:r}=eo(),s=JSON.stringify(KS(t));return K.useMemo(()=>XS(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function iT(n,e){return t_(n,e)}function t_(n,e,t,r,s){Fr(Bf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=K.useContext(dl),{matches:u}=K.useContext(sc),d=u[u.length-1],f=d?d.params:{},p=d?d.pathname:"/",m=d?d.pathnameBase:"/",x=d&&d.route;{let H=x&&x.path||"";n_(p,!x||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let E=eo(),w;if(e){let H=typeof e=="string"?uh(e):e;Fr(m==="/"||H.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${H.pathname}" was given in the \`location\` prop.`),w=H}else w=E;let A=w.pathname||"/",D=A;if(m!=="/"){let H=m.replace(/^\//,"").split("/");D="/"+A.replace(/^\//,"").split("/").slice(H.length).join("/")}let C=$S(n,{pathname:D});Ao(x||C!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Ao(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=cT(C&&C.map(H=>Object.assign({},H,{params:Object.assign({},f,H.params),pathname:Yl([m,o.encodeLocation?o.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?m:Yl([m,o.encodeLocation?o.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),u,t,r,s);return e&&k?K.createElement(Uf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},k):k}function sT(){let n=pT(),e=J4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:o},"ErrorBoundary")," or"," ",K.createElement("code",{style:o},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:s},t):null,u)}var aT=K.createElement(sT,null),oT=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?K.createElement(sc.Provider,{value:this.props.routeContext},K.createElement(B1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lT({routeContext:n,match:e,children:t}){let r=K.useContext(dh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(sc.Provider,{value:n},t)}function cT(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,u=t?.errors;if(u!=null){let m=o.findIndex(x=>x.route.id&&u?.[x.route.id]!==void 0);Fr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,f=-1;if(t)for(let m=0;m<o.length;m++){let x=o[m];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(f=m),x.route.id){let{loaderData:E,errors:w}=t,A=x.route.loader&&!E.hasOwnProperty(x.route.id)&&(!w||w[x.route.id]===void 0);if(x.route.lazy||A){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let p=t&&r?(m,x)=>{r(m,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:x})}:void 0;return o.reduceRight((m,x,E)=>{let w,A=!1,D=null,C=null;t&&(w=u&&x.route.id?u[x.route.id]:void 0,D=x.route.errorElement||aT,d&&(f<0&&E===0?(n_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,C=null):f===E&&(A=!0,C=x.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,E+1)),H=()=>{let G;return w?G=D:A?G=C:x.route.Component?G=K.createElement(x.route.Component,null):x.route.element?G=x.route.element:G=m,K.createElement(lT,{match:x,routeContext:{outlet:m,matches:k,isDataRoute:t!=null},children:G})};return t&&(x.route.ErrorBoundary||x.route.errorElement||E===0)?K.createElement(oT,{location:t.location,revalidation:t.revalidation,component:D,error:w,children:H(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:p}):H()},null)}function V1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uT(n){let e=K.useContext(dh);return Fr(e,V1(n)),e}function dT(n){let e=K.useContext(sg);return Fr(e,V1(n)),e}function hT(n){let e=K.useContext(sc);return Fr(e,V1(n)),e}function z1(n){let e=hT(n),t=e.matches[e.matches.length-1];return Fr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function fT(){return z1("useRouteId")}function pT(){let n=K.useContext(B1),e=dT("useRouteError"),t=z1("useRouteError");return n!==void 0?n:e.errors?.[t]}function mT(){let{router:n}=uT("useNavigate"),e=z1("useNavigate"),t=K.useRef(!1);return e_(()=>{t.current=!0}),K.useCallback(async(s,o={})=>{Ao(t.current,ZS),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Pb={};function n_(n,e,t){!e&&!Pb[n]&&(Pb[n]=!0,Ao(!1,t))}K.memo(gT);function gT({routes:n,future:e,state:t,unstable_onError:r}){return t_(n,void 0,t,r,e)}function Kr(n){Fr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1}){Fr(!Bf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=K.useMemo(()=>({basename:u,navigator:s,static:o,future:{}}),[u,s,o]);typeof t=="string"&&(t=uh(t));let{pathname:f="/",search:p="",hash:m="",state:x=null,key:E="default"}=t,w=K.useMemo(()=>{let A=Ql(f,u);return A==null?null:{location:{pathname:A,search:p,hash:m,state:x,key:E},navigationType:r}},[u,f,p,m,x,E,r]);return Ao(w!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:K.createElement(dl.Provider,{value:d},K.createElement(Uf.Provider,{children:e,value:w}))}function vT({children:n,location:e}){return iT(Yy(n),e)}function Yy(n,e=[]){let t=[];return K.Children.forEach(n,(r,s)=>{if(!K.isValidElement(r))return;let o=[...e,s];if(r.type===K.Fragment){t.push.apply(t,Yy(r.props.children,o));return}Fr(r.type===Kr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Yy(r.props.children,o)),t.push(u)}),t}var hm="get",fm="application/x-www-form-urlencoded";function ag(n){return n!=null&&typeof n.tagName=="string"}function bT(n){return ag(n)&&n.tagName.toLowerCase()==="button"}function wT(n){return ag(n)&&n.tagName.toLowerCase()==="form"}function xT(n){return ag(n)&&n.tagName.toLowerCase()==="input"}function ST(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _T(n,e){return n.button===0&&(!e||e==="_self")&&!ST(n)}var Yp=null;function ET(){if(Yp===null)try{new FormData(document.createElement("form"),0),Yp=!1}catch{Yp=!0}return Yp}var NT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ny(n){return n!=null&&!NT.has(n)?(Ao(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fm}"`),null):n}function AT(n,e){let t,r,s,o,u;if(wT(n)){let d=n.getAttribute("action");r=d?Ql(d,e):null,t=n.getAttribute("method")||hm,s=ny(n.getAttribute("enctype"))||fm,o=new FormData(n)}else if(bT(n)||xT(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?Ql(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||hm,s=ny(n.getAttribute("formenctype"))||ny(d.getAttribute("enctype"))||fm,o=new FormData(d,n),!ET()){let{name:p,type:m,value:x}=n;if(m==="image"){let E=p?`${p}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else p&&o.append(p,x)}}else{if(ag(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hm,r=null,s=fm,u=n}return o&&s==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function q1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function TT(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Ql(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function CT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function RT(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let u=await CT(o,t);return u.links?u.links():[]}return[]}));return LT(r.flat(1).filter(jT).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Mb(n,e,t,r,s,o){let u=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,d=(f,p)=>t[p].pathname!==f.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,p)=>u(f,p)||d(f,p)):o==="data"?e.filter((f,p)=>{let m=r.routes[f.route.id];if(!m||!m.hasLoader)return!1;if(u(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let x=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function IT(n,e,{includeHydrateFallback:t}={}){return DT(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function DT(n){return[...new Set(n)]}function kT(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function LT(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(kT(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function r_(){let n=K.useContext(dh);return q1(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function PT(){let n=K.useContext(sg);return q1(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var H1=K.createContext(void 0);H1.displayName="FrameworkContext";function i_(){let n=K.useContext(H1);return q1(n,"You must render this element inside a <HydratedRouter> element"),n}function MT(n,e){let t=K.useContext(H1),[r,s]=K.useState(!1),[o,u]=K.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:m,onTouchStart:x}=e,E=K.useRef(null);K.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let D=k=>{k.forEach(H=>{u(H.isIntersecting)})},C=new IntersectionObserver(D,{threshold:.5});return E.current&&C.observe(E.current),()=>{C.disconnect()}}},[n]),K.useEffect(()=>{if(r){let D=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(D)}}},[r]);let w=()=>{s(!0)},A=()=>{s(!1),u(!1)};return t?n!=="intent"?[o,E,{}]:[o,E,{onFocus:rf(d,w),onBlur:rf(f,A),onMouseEnter:rf(p,w),onMouseLeave:rf(m,A),onTouchStart:rf(x,w)}]:[!1,E,{}]}function rf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function OT({page:n,...e}){let{router:t}=r_(),r=K.useMemo(()=>$S(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?K.createElement(UT,{page:n,matches:r,...e}):null}function FT(n){let{manifest:e,routeModules:t}=i_(),[r,s]=K.useState([]);return K.useEffect(()=>{let o=!1;return RT(n,e,t).then(u=>{o||s(u)}),()=>{o=!0}},[n,e,t]),r}function UT({page:n,matches:e,...t}){let r=eo(),{manifest:s,routeModules:o}=i_(),{basename:u}=r_(),{loaderData:d,matches:f}=PT(),p=K.useMemo(()=>Mb(n,e,f,s,r,"data"),[n,e,f,s,r]),m=K.useMemo(()=>Mb(n,e,f,s,r,"assets"),[n,e,f,s,r]),x=K.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,D=!1;if(e.forEach(k=>{let H=s.routes[k.route.id];!H||!H.hasLoader||(!p.some(G=>G.route.id===k.route.id)&&k.route.id in d&&o[k.route.id]?.shouldRevalidate||H.hasClientLoader?D=!0:A.add(k.route.id))}),A.size===0)return[];let C=TT(n,u,"data");return D&&A.size>0&&C.searchParams.set("_routes",e.filter(k=>A.has(k.route.id)).map(k=>k.route.id).join(",")),[C.pathname+C.search]},[u,d,r,s,p,e,n,o]),E=K.useMemo(()=>IT(m,s),[m,s]),w=FT(m);return K.createElement(K.Fragment,null,x.map(A=>K.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),E.map(A=>K.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:D})=>K.createElement("link",{key:A,nonce:t.nonce,...D})))}function BT(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var s_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{s_&&(window.__reactRouterVersion="7.9.6")}catch{}function VT({basename:n,children:e,window:t}){let r=K.useRef();r.current==null&&(r.current=C4({window:t,v5Compat:!0}));let s=r.current,[o,u]=K.useState({action:s.action,location:s.location}),d=K.useCallback(f=>{K.startTransition(()=>u(f))},[u]);return K.useLayoutEffect(()=>s.listen(d),[s,d]),K.createElement(yT,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:s})}var a_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,o_=K.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:u,state:d,target:f,to:p,preventScrollReset:m,viewTransition:x,...E},w){let{basename:A}=K.useContext(dl),D=typeof p=="string"&&a_.test(p),C,k=!1;if(typeof p=="string"&&D&&(C=p,s_))try{let R=new URL(window.location.href),q=p.startsWith("//")?new URL(R.protocol+p):new URL(p),j=Ql(q.pathname,A);q.origin===R.origin&&j!=null?p=j+q.search+q.hash:k=!0}catch{Ao(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=nT(p,{relative:s}),[G,V,ce]=MT(r,E),se=GT(p,{replace:u,state:d,target:f,preventScrollReset:m,relative:s,viewTransition:x});function U(R){e&&e(R),R.defaultPrevented||se(R)}let I=K.createElement("a",{...E,...ce,href:C||H,onClick:k||o?e:U,ref:BT(w,V),target:f,"data-discover":!D&&t==="render"?"true":void 0});return G&&!D?K.createElement(K.Fragment,null,I,K.createElement(OT,{page:H})):I});o_.displayName="Link";var zT=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:u,viewTransition:d,children:f,...p},m){let x=Vf(u,{relative:p.relative}),E=eo(),w=K.useContext(sg),{navigator:A,basename:D}=K.useContext(dl),C=w!=null&&XT(x)&&d===!0,k=A.encodeLocation?A.encodeLocation(x).pathname:x.pathname,H=E.pathname,G=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(H=H.toLowerCase(),G=G?G.toLowerCase():null,k=k.toLowerCase()),G&&D&&(G=Ql(G,D)||G);const V=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let ce=H===k||!s&&H.startsWith(k)&&H.charAt(V)==="/",se=G!=null&&(G===k||!s&&G.startsWith(k)&&G.charAt(k.length)==="/"),U={isActive:ce,isPending:se,isTransitioning:C},I=ce?e:void 0,R;typeof r=="function"?R=r(U):R=[r,ce?"active":null,se?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let q=typeof o=="function"?o(U):o;return K.createElement(o_,{...p,"aria-current":I,className:R,ref:m,style:q,to:u,viewTransition:d},typeof f=="function"?f(U):f)});zT.displayName="NavLink";var qT=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:u=hm,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:x,...E},w)=>{let A=YT(),D=KT(d,{relative:p}),C=u.toLowerCase()==="get"?"get":"post",k=typeof d=="string"&&a_.test(d),H=G=>{if(f&&f(G),G.defaultPrevented)return;G.preventDefault();let V=G.nativeEvent.submitter,ce=V?.getAttribute("formmethod")||u;A(V||G.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:s,state:o,relative:p,preventScrollReset:m,viewTransition:x})};return K.createElement("form",{ref:w,method:C,action:D,onSubmit:r?f:H,...E,"data-discover":!k&&n==="render"?"true":void 0})});qT.displayName="Form";function HT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function l_(n){let e=K.useContext(dh);return Fr(e,HT(n)),e}function GT(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:u}={}){let d=ci(),f=eo(),p=Vf(n,{relative:o});return K.useCallback(m=>{if(_T(m,e)){m.preventDefault();let x=t!==void 0?t:Tf(f)===Tf(p);d(n,{replace:x,state:r,preventScrollReset:s,relative:o,viewTransition:u})}},[f,d,p,t,r,e,n,s,o,u])}var $T=0,WT=()=>`__${String(++$T)}__`;function YT(){let{router:n}=l_("useSubmit"),{basename:e}=K.useContext(dl),t=fT();return K.useCallback(async(r,s={})=>{let{action:o,method:u,encType:d,formData:f,body:p}=AT(r,e);if(s.navigate===!1){let m=s.fetcherKey||WT();await n.fetch(m,t,s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||u,formEncType:s.encType||d,flushSync:s.flushSync})}else await n.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||u,formEncType:s.encType||d,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function KT(n,{relative:e}={}){let{basename:t}=K.useContext(dl),r=K.useContext(sc);Fr(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...Vf(n||".",{relative:e})},u=eo();if(n==null){o.search=u.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(m=>m==="")){d.delete("index"),f.filter(x=>x).forEach(x=>d.append("index",x));let m=d.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Yl([t,o.pathname])),Tf(o)}function XT(n,{relative:e}={}){let t=K.useContext(JS);Fr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=l_("useViewTransitionState"),s=Vf(n,{relative:e});if(!t.isTransitioning)return!1;let o=Ql(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Ql(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Rm(s.pathname,u)!=null||Rm(s.pathname,o)!=null}const QT=()=>{};var Ob={};const c_=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},JT=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},u_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,m=o>>2,x=(o&3)<<4|d>>4;let E=(d&15)<<2|p>>6,w=p&63;f||(w=64,u||(E=64)),r.push(t[m],t[x],t[E],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(c_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):JT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const x=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||d==null||p==null||x==null)throw new ZT;const E=o<<2|d>>4;if(r.push(E),p!==64){const w=d<<4&240|p>>2;if(r.push(w),x!==64){const A=p<<6&192|x;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eC=function(n){const e=c_(n);return u_.encodeByteArray(e,!0)},Im=function(n){return eC(n).replace(/\./g,"")},d_=function(n){try{return u_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function tC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const nC=()=>tC().__FIREBASE_DEFAULTS__,rC=()=>{if(typeof process>"u"||typeof Ob>"u")return;const n=Ob.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&d_(n[1]);return e&&JSON.parse(e)},og=()=>{try{return QT()||nC()||rC()||iC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},h_=n=>og()?.emulatorHosts?.[n],f_=n=>{const e=h_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},p_=()=>og()?.config,m_=n=>og()?.[`_${n}`];class sC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function lu(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G1(n){return(await fetch(n,{credentials:"include"})).ok}function g_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Im(JSON.stringify(t)),Im(JSON.stringify(u)),""].join(".")}const mf={};function aC(){const n={prod:[],emulator:[]};for(const e of Object.keys(mf))mf[e]?n.emulator.push(e):n.prod.push(e);return n}function oC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Fb=!1;function $1(n,e){if(typeof window>"u"||typeof document>"u"||!lu(window.location.host)||mf[n]===e||mf[n]||Fb)return;mf[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",o=aC().prod.length>0;function u(){const E=document.getElementById(r);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,w){E.setAttribute("width","24"),E.setAttribute("id",w),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Fb=!0,u()},E}function m(E,w){E.setAttribute("id",w),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function x(){const E=oC(r),w=t("text"),A=document.getElementById(w)||document.createElement("span"),D=t("learnmore"),C=document.getElementById(D)||document.createElement("a"),k=t("preprendIcon"),H=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const G=E.element;d(G),m(C,D);const V=p();f(H,k),G.append(H,A,C,V),document.body.appendChild(G)}o?(A.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}function Cs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cs())}function cC(){const n=og()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function hC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fC(){const n=Cs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pC(){return!cC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mC(){try{return typeof indexedDB=="object"}catch{return!1}}function gC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}const yC="FirebaseError";class hl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yC,Object.setPrototypeOf(this,hl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zf.prototype.create)}}class zf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?vC(o,r):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new hl(s,d,r)}}function vC(n,e){return n.replace(bC,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const bC=/\{\$([^}]+)}/g;function wC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function zu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],u=e[s];if(Ub(o)&&Ub(u)){if(!zu(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function Ub(n){return n!==null&&typeof n=="object"}function qf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function uf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function xC(n,e){const t=new SC(n,e);return t.subscribe.bind(t)}class SC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_C(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=ry),s.error===void 0&&(s.error=ry),s.complete===void 0&&(s.complete=ry);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _C(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ry(){}function Er(n){return n&&n._delegate?n._delegate:n}class Jc{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Iu="[DEFAULT]";class EC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sC;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AC(e))try{this.getOrInitializeService({instanceIdentifier:Iu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Iu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Iu){return this.instances.has(e)}getOptions(e=Iu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&u.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Iu){return this.component?this.component.multipleInstances?e:Iu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NC(n){return n===Iu?void 0:n}function AC(n){return n.instantiationMode==="EAGER"}class TC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new EC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Nn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Nn||(Nn={}));const CC={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},jC=Nn.INFO,RC={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},IC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=RC[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W1{constructor(e){this.name=e,this._logLevel=jC,this._logHandler=IC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const DC=(n,e)=>e.some(t=>n instanceof t);let Bb,Vb;function kC(){return Bb||(Bb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LC(){return Vb||(Vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y_=new WeakMap,Ky=new WeakMap,v_=new WeakMap,iy=new WeakMap,Y1=new WeakMap;function PC(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(Wc(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&y_.set(t,n)}).catch(()=>{}),Y1.set(e,n),e}function MC(n){if(Ky.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});Ky.set(n,e)}let Xy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ky.get(n);if(e==="objectStoreNames")return n.objectStoreNames||v_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Wc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function OC(n){Xy=n(Xy)}function FC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(sy(this),e,...t);return v_.set(r,e.sort?e.sort():[e]),Wc(r)}:LC().includes(n)?function(...e){return n.apply(sy(this),e),Wc(y_.get(this))}:function(...e){return Wc(n.apply(sy(this),e))}}function UC(n){return typeof n=="function"?FC(n):(n instanceof IDBTransaction&&MC(n),DC(n,kC())?new Proxy(n,Xy):n)}function Wc(n){if(n instanceof IDBRequest)return PC(n);if(iy.has(n))return iy.get(n);const e=UC(n);return e!==n&&(iy.set(n,e),Y1.set(e,n)),e}const sy=n=>Y1.get(n);function BC(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(n,e),d=Wc(u);return r&&u.addEventListener("upgradeneeded",f=>{r(Wc(u.result),f.oldVersion,f.newVersion,Wc(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{o&&f.addEventListener("close",()=>o()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const VC=["get","getKey","getAll","getAllKeys","count"],zC=["put","add","delete","clear"],ay=new Map;function zb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ay.get(e))return ay.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=zC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VC.includes(t)))return;const o=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),s&&f.done]))[0]};return ay.set(e,o),o}OC(n=>({...n,get:(e,t,r)=>zb(e,t)||n.get(e,t,r),has:(e,t)=>!!zb(e,t)||n.has(e,t)}));class qC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(HC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function HC(n){return n.getComponent()?.type==="VERSION"}const Qy="@firebase/app",qb="0.14.6";const Jl=new W1("@firebase/app"),GC="@firebase/app-compat",$C="@firebase/analytics-compat",WC="@firebase/analytics",YC="@firebase/app-check-compat",KC="@firebase/app-check",XC="@firebase/auth",QC="@firebase/auth-compat",JC="@firebase/database",ZC="@firebase/data-connect",e6="@firebase/database-compat",t6="@firebase/functions",n6="@firebase/functions-compat",r6="@firebase/installations",i6="@firebase/installations-compat",s6="@firebase/messaging",a6="@firebase/messaging-compat",o6="@firebase/performance",l6="@firebase/performance-compat",c6="@firebase/remote-config",u6="@firebase/remote-config-compat",d6="@firebase/storage",h6="@firebase/storage-compat",f6="@firebase/firestore",p6="@firebase/ai",m6="@firebase/firestore-compat",g6="firebase",y6="12.6.0";const Jy="[DEFAULT]",v6={[Qy]:"fire-core",[GC]:"fire-core-compat",[WC]:"fire-analytics",[$C]:"fire-analytics-compat",[KC]:"fire-app-check",[YC]:"fire-app-check-compat",[XC]:"fire-auth",[QC]:"fire-auth-compat",[JC]:"fire-rtdb",[ZC]:"fire-data-connect",[e6]:"fire-rtdb-compat",[t6]:"fire-fn",[n6]:"fire-fn-compat",[r6]:"fire-iid",[i6]:"fire-iid-compat",[s6]:"fire-fcm",[a6]:"fire-fcm-compat",[o6]:"fire-perf",[l6]:"fire-perf-compat",[c6]:"fire-rc",[u6]:"fire-rc-compat",[d6]:"fire-gcs",[h6]:"fire-gcs-compat",[f6]:"fire-fst",[m6]:"fire-fst-compat",[p6]:"fire-vertex","fire-js":"fire-js",[g6]:"fire-js-all"};const Dm=new Map,b6=new Map,Zy=new Map;function Hb(n,e){try{n.container.addComponent(e)}catch(t){Jl.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function qu(n){const e=n.name;if(Zy.has(e))return Jl.debug(`There were multiple attempts to register component ${e}.`),!1;Zy.set(e,n);for(const t of Dm.values())Hb(t,n);for(const t of b6.values())Hb(t,n);return!0}function lg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ua(n){return n==null?!1:n.settings!==void 0}const w6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yc=new zf("app","Firebase",w6);class x6{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yc.create("app-deleted",{appName:this._name})}}const Qu=y6;function b_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Jy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Yc.create("bad-app-name",{appName:String(s)});if(t||(t=p_()),!t)throw Yc.create("no-options");const o=Dm.get(s);if(o){if(zu(t,o.options)&&zu(r,o.config))return o;throw Yc.create("duplicate-app",{appName:s})}const u=new TC(s);for(const f of Zy.values())u.addComponent(f);const d=new x6(t,r,u);return Dm.set(s,d),d}function K1(n=Jy){const e=Dm.get(n);if(!e&&n===Jy&&p_())return b_();if(!e)throw Yc.create("no-app",{appName:n});return e}function rl(n,e,t){let r=v6[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const u=[`Unable to register library "${r}" with version "${e}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jl.warn(u.join(" "));return}qu(new Jc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const S6="firebase-heartbeat-database",_6=1,Cf="firebase-heartbeat-store";let oy=null;function w_(){return oy||(oy=BC(S6,_6,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yc.create("idb-open",{originalErrorMessage:n.message})})),oy}async function E6(n){try{const t=(await w_()).transaction(Cf),r=await t.objectStore(Cf).get(x_(n));return await t.done,r}catch(e){if(e instanceof hl)Jl.warn(e.message);else{const t=Yc.create("idb-get",{originalErrorMessage:e?.message});Jl.warn(t.message)}}}async function Gb(n,e){try{const r=(await w_()).transaction(Cf,"readwrite");await r.objectStore(Cf).put(e,x_(n)),await r.done}catch(t){if(t instanceof hl)Jl.warn(t.message);else{const r=Yc.create("idb-set",{originalErrorMessage:t?.message});Jl.warn(r.message)}}}function x_(n){return`${n.name}!${n.options.appId}`}const N6=1024,A6=30;class T6{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new j6(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=$b();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>A6){const s=R6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Jl.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=$b(),{heartbeatsToSend:t,unsentEntries:r}=C6(this._heartbeatsCache.heartbeats),s=Im(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Jl.warn(e),""}}}function $b(){return new Date().toISOString().substring(0,10)}function C6(n,e=N6){const t=[];let r=n.slice();for(const s of n){const o=t.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),Wb(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Wb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class j6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mC()?gC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await E6(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Wb(n){return Im(JSON.stringify({version:2,heartbeats:n})).length}function R6(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function I6(n){qu(new Jc("platform-logger",e=>new qC(e),"PRIVATE")),qu(new Jc("heartbeat",e=>new T6(e),"PRIVATE")),rl(Qy,qb,n),rl(Qy,qb,"esm2020"),rl("fire-js","")}I6("");function S_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const D6=S_,__=new zf("auth","Firebase",S_());const km=new W1("@firebase/auth");function k6(n,...e){km.logLevel<=Nn.WARN&&km.warn(`Auth (${Qu}): ${n}`,...e)}function pm(n,...e){km.logLevel<=Nn.ERROR&&km.error(`Auth (${Qu}): ${n}`,...e)}function Ja(n,...e){throw Q1(n,...e)}function No(n,...e){return Q1(n,...e)}function X1(n,e,t){const r={...D6(),[e]:t};return new zf("auth","Firebase",r).create(e,{appName:n.name})}function Kl(n){return X1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function L6(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ja(n,"argument-error"),X1(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Q1(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return __.create(n,...e)}function Xt(n,e,...t){if(!n)throw Q1(e,...t)}function Gl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pm(e),new Error(e)}function Zl(n,e){n||Gl(e)}function e1(){return typeof self<"u"&&self.location?.href||""}function P6(){return Yb()==="http:"||Yb()==="https:"}function Yb(){return typeof self<"u"&&self.location?.protocol||null}function M6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P6()||dC()||"connection"in navigator)?navigator.onLine:!0}function O6(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Hf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zl(t>e,"Short delay should be less than long delay!"),this.isMobile=lC()||hC()}get(){return M6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function J1(n,e){Zl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class E_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const F6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const U6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B6=new Hf(3e4,6e4);function ac(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function fl(n,e,t,r,s={}){return N_(n,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const d=qf({key:n.config.apiKey,...u}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...o};return uC()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&lu(n.emulatorConfig.host)&&(p.credentials="include"),E_.fetch()(await A_(n,n.config.apiHost,t,d),p)})}async function N_(n,e,t){n._canInitEmulator=!1;const r={...F6,...e};try{const s=new z6(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw Kp(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[f,p]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kp(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw Kp(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw Kp(n,"user-disabled",u);const m=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw X1(n,m,p);Ja(n,m)}}catch(s){if(s instanceof hl)throw s;Ja(n,"network-request-failed",{message:String(s)})}}async function Gf(n,e,t,r,s={}){const o=await fl(n,e,t,r,s);return"mfaPendingCredential"in o&&Ja(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function A_(n,e,t,r){const s=`${e}${t}?${r}`,o=n,u=o.config.emulator?J1(n.config,s):`${n.config.apiScheme}://${s}`;return U6.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function V6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class z6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(No(this.auth,"network-request-failed")),B6.get())})}}function Kp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=No(n,e,r);return s.customData._tokenResponse=t,s}function Kb(n){return n!==void 0&&n.enterprise!==void 0}class q6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return V6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H6(n,e){return fl(n,"GET","/v2/recaptchaConfig",ac(n,e))}async function G6(n,e){return fl(n,"POST","/v1/accounts:delete",e)}async function Lm(n,e){return fl(n,"POST","/v1/accounts:lookup",e)}function gf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $6(n,e=!1){const t=Er(n),r=await t.getIdToken(e),s=Z1(r);Xt(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:r,authTime:gf(ly(s.auth_time)),issuedAtTime:gf(ly(s.iat)),expirationTime:gf(ly(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function ly(n){return Number(n)*1e3}function Z1(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return pm("JWT malformed, contained fewer than 3 sections"),null;try{const s=d_(t);return s?JSON.parse(s):(pm("Failed to decode base64 JWT payload"),null)}catch(s){return pm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Xb(n){const e=Z1(n);return Xt(e,"internal-error"),Xt(typeof e.exp<"u","internal-error"),Xt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function rh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof hl&&W6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function W6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class Y6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class t1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gf(this.lastLoginAt),this.creationTime=gf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pm(n){const e=n.auth,t=await n.getIdToken(),r=await rh(n,Lm(e,{idToken:t}));Xt(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=s.providerUserInfo?.length?T_(s.providerUserInfo):[],u=X6(n.providerData,o),d=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!u?.length,p=d?f:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new t1(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function K6(n){const e=Er(n);await Pm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X6(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function T_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Q6(n,e){const t=await N_(n,{},async()=>{const r=qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,u=await A_(n,s,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&lu(n.emulatorConfig.host)&&(f.credentials="include"),E_.fetch()(u,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function J6(n,e){return fl(n,"POST","/v2/accounts:revokeToken",ac(n,e))}class Wd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xt(e.idToken,"internal-error"),Xt(typeof e.idToken<"u","internal-error"),Xt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xt(e.length!==0,"internal-error");const t=Xb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await Q6(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,u=new Wd;return r&&(Xt(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Xt(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Xt(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wd,this.toJSON())}_performRefresh(){return Gl("not implemented")}}function Oc(n,e){Xt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Eo{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Y6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new t1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await rh(this,this.stsTokenManager.getToken(this.auth,e));return Xt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $6(this,e)}reload(){return K6(this)}_assign(e){this!==e&&(Xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Eo({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Pm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ua(this.auth.app))return Promise.reject(Kl(this.auth));const e=await this.getIdToken();return await rh(this,G6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:x,emailVerified:E,isAnonymous:w,providerData:A,stsTokenManager:D}=t;Xt(x&&D,e,"internal-error");const C=Wd.fromJSON(this.name,D);Xt(typeof x=="string",e,"internal-error"),Oc(r,e.name),Oc(s,e.name),Xt(typeof E=="boolean",e,"internal-error"),Xt(typeof w=="boolean",e,"internal-error"),Oc(o,e.name),Oc(u,e.name),Oc(d,e.name),Oc(f,e.name),Oc(p,e.name),Oc(m,e.name);const k=new Eo({uid:x,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:w,photoURL:u,phoneNumber:o,tenantId:d,stsTokenManager:C,createdAt:p,lastLoginAt:m});return A&&Array.isArray(A)&&(k.providerData=A.map(H=>({...H}))),f&&(k._redirectEventId=f),k}static async _fromIdTokenResponse(e,t,r=!1){const s=new Wd;s.updateFromServerResponse(t);const o=new Eo({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Pm(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Xt(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?T_(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,d=new Wd;d.updateFromIdToken(r);const f=new Eo({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new t1(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(f,p),f}}const Qb=new Map;function $l(n){Zl(n instanceof Function,"Expected a class definition");let e=Qb.get(n);return e?(Zl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Qb.set(n,e),e)}class C_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}C_.type="NONE";const Jb=C_;function mm(n,e,t){return`firebase:${n}:${e}:${t}`}class Yd{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=mm(this.userKey,s.apiKey,o),this.fullPersistenceKey=mm("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lm(this.auth,{idToken:e}).catch(()=>{});return t?Eo._fromGetAccountInfoResponse(this.auth,t,e):null}return Eo._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Yd($l(Jb),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||$l(Jb);const u=mm(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const m=await p._get(u);if(m){let x;if(typeof m=="string"){const E=await Lm(e,{idToken:m}).catch(()=>{});if(!E)break;x=await Eo._fromGetAccountInfoResponse(e,E,m)}else x=Eo._fromJSON(e,m);p!==o&&(d=x),o=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Yd(o,e,r):(o=f[0],d&&await o._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new Yd(o,e,r))}}function Zb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(j_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L_(e))return"Blackberry";if(P_(e))return"Webos";if(R_(e))return"Safari";if((e.includes("chrome/")||I_(e))&&!e.includes("edge/"))return"Chrome";if(k_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function j_(n=Cs()){return/firefox\//i.test(n)}function R_(n=Cs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I_(n=Cs()){return/crios\//i.test(n)}function D_(n=Cs()){return/iemobile/i.test(n)}function k_(n=Cs()){return/android/i.test(n)}function L_(n=Cs()){return/blackberry/i.test(n)}function P_(n=Cs()){return/webos/i.test(n)}function ev(n=Cs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Z6(n=Cs()){return ev(n)&&!!window.navigator?.standalone}function ej(){return fC()&&document.documentMode===10}function M_(n=Cs()){return ev(n)||k_(n)||P_(n)||L_(n)||/windows phone/i.test(n)||D_(n)}function O_(n,e=[]){let t;switch(n){case"Browser":t=Zb(Cs());break;case"Worker":t=`${Zb(Cs())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qu}/${r}`}class tj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,d)=>{try{const f=e(o);u(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function nj(n,e={}){return fl(n,"GET","/v2/passwordPolicy",ac(n,e))}const rj=6;class ij{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??rj,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class sj{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ew(this),this.idTokenSubscription=new ew(this),this.beforeStateQueue=new tj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=__,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$l(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Yd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lm(this,{idToken:e}),r=await Eo._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ua(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===u)&&d?.user&&(r=d.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=O6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ua(this.app))return Promise.reject(Kl(this));const t=e?Er(e):null;return t&&Xt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ua(this.app)?Promise.reject(Kl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ua(this.app)?Promise.reject(Kl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($l(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nj(this),t=new ij(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await J6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$l(e)||this._popupRedirectResolver;Xt(t,this,"argument-error"),this.redirectPersistenceManager=await Yd.create(this,[$l(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xt(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(ua(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&k6(`Error while retrieving App Check token: ${e.error}`),e?.token}}function oc(n){return Er(n)}class ew{constructor(e){this.auth=e,this.observer=null,this.addObserver=xC(t=>this.observer=t)}get next(){return Xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let cg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aj(n){cg=n}function F_(n){return cg.loadJS(n)}function oj(){return cg.recaptchaEnterpriseScript}function lj(){return cg.gapiScript}function cj(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class uj{constructor(){this.enterprise=new dj}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class dj{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hj="recaptcha-enterprise",U_="NO_RECAPTCHA";class fj{constructor(e){this.type=hj,this.auth=oc(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,d)=>{H6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new q6(f);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(f=>{d(f)})})}function s(o,u,d){const f=window.grecaptcha;Kb(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(U_)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uj().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(d=>{if(!t&&Kb(window.grecaptcha))s(d,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=oj();f.length!==0&&(f+=d),F_(f).then(()=>{s(d,o,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function tw(n,e,t,r=!1,s=!1){const o=new fj(n);let u;if(s)u=U_;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Mm(n,e,t,r,s){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await tw(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await tw(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(o)})}function pj(n,e){const t=lg(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(zu(o,e??{}))return s;Ja(s,"already-initialized")}return t.initialize({options:e})}function mj(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($l);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function gj(n,e,t){const r=oc(n);Xt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=B_(e),{host:u,port:d}=yj(e),f=d===null?"":`:${d}`,p={url:`${o}//${u}${f}/`},m=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xt(zu(p,r.config.emulator)&&zu(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,lu(u)?(G1(`${o}//${u}${f}`),$1("Auth",!0)):vj()}function B_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function yj(n){const e=B_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:nw(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:nw(u)}}}function nw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function vj(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class tv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gl("not implemented")}_getIdTokenResponse(e){return Gl("not implemented")}_linkToIdToken(e,t){return Gl("not implemented")}_getReauthenticationResolver(e){return Gl("not implemented")}}async function bj(n,e){return fl(n,"POST","/v1/accounts:signUp",e)}async function wj(n,e){return Gf(n,"POST","/v1/accounts:signInWithPassword",ac(n,e))}async function V_(n,e){return fl(n,"POST","/v1/accounts:sendOobCode",ac(n,e))}async function xj(n,e){return V_(n,e)}async function Sj(n,e){return V_(n,e)}async function _j(n,e){return Gf(n,"POST","/v1/accounts:signInWithEmailLink",ac(n,e))}async function Ej(n,e){return Gf(n,"POST","/v1/accounts:signInWithEmailLink",ac(n,e))}class jf extends tv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new jf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new jf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mm(e,t,"signInWithPassword",wj);case"emailLink":return _j(e,{email:this._email,oobCode:this._password});default:Ja(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mm(e,r,"signUpPassword",bj);case"emailLink":return Ej(e,{idToken:t,email:this._email,oobCode:this._password});default:Ja(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Kd(n,e){return Gf(n,"POST","/v1/accounts:signInWithIdp",ac(n,e))}const Nj="http://localhost";class Hu extends tv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Hu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ja("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const u=new Hu(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Kd(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Kd(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kd(e,t)}buildRequest(){const e={requestUri:Nj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qf(t)}return e}}function Aj(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Tj(n){const e=cf(uf(n)).link,t=e?cf(uf(e)).deep_link_id:null,r=cf(uf(n)).deep_link_id;return(r?cf(uf(r)).link:null)||r||t||e||n}class nv{constructor(e){const t=cf(uf(e)),r=t.apiKey??null,s=t.oobCode??null,o=Aj(t.mode??null);Xt(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Tj(e);try{return new nv(t)}catch{return null}}}class hh{constructor(){this.providerId=hh.PROVIDER_ID}static credential(e,t){return jf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=nv.parseLink(t);return Xt(r,"argument-error"),jf._fromEmailAndCode(e,r.code,r.tenantId)}}hh.PROVIDER_ID="password";hh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class $f extends rv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vc extends $f{constructor(){super("facebook.com")}static credential(e){return Hu._fromParams({providerId:Vc.PROVIDER_ID,signInMethod:Vc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vc.credentialFromTaggedObject(e)}static credentialFromError(e){return Vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vc.credential(e.oauthAccessToken)}catch{return null}}}Vc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vc.PROVIDER_ID="facebook.com";class Hl extends $f{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Hu._fromParams({providerId:Hl.PROVIDER_ID,signInMethod:Hl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Hl.credentialFromTaggedObject(e)}static credentialFromError(e){return Hl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Hl.credential(t,r)}catch{return null}}}Hl.GOOGLE_SIGN_IN_METHOD="google.com";Hl.PROVIDER_ID="google.com";class zc extends $f{constructor(){super("github.com")}static credential(e){return Hu._fromParams({providerId:zc.PROVIDER_ID,signInMethod:zc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zc.credentialFromTaggedObject(e)}static credentialFromError(e){return zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zc.credential(e.oauthAccessToken)}catch{return null}}}zc.GITHUB_SIGN_IN_METHOD="github.com";zc.PROVIDER_ID="github.com";class qc extends $f{constructor(){super("twitter.com")}static credential(e,t){return Hu._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qc.credentialFromTaggedObject(e)}static credentialFromError(e){return qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return qc.credential(t,r)}catch{return null}}}qc.TWITTER_SIGN_IN_METHOD="twitter.com";qc.PROVIDER_ID="twitter.com";async function Cj(n,e){return Gf(n,"POST","/v1/accounts:signUp",ac(n,e))}class Gu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await Eo._fromIdTokenResponse(e,r,s),u=rw(r);return new Gu({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=rw(r);return new Gu({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function rw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Om extends hl{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Om.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Om(e,t,r,s)}}function z_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Om._fromErrorAndOperation(n,o,e,r):o})}async function jj(n,e,t=!1){const r=await rh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Gu._forOperation(n,"link",r)}async function Rj(n,e,t=!1){const{auth:r}=n;if(ua(r.app))return Promise.reject(Kl(r));const s="reauthenticate";try{const o=await rh(n,z_(r,s,e,n),t);Xt(o.idToken,r,"internal-error");const u=Z1(o.idToken);Xt(u,r,"internal-error");const{sub:d}=u;return Xt(n.uid===d,r,"user-mismatch"),Gu._forOperation(n,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ja(r,"user-mismatch"),o}}async function q_(n,e,t=!1){if(ua(n.app))return Promise.reject(Kl(n));const r="signIn",s=await z_(n,r,e),o=await Gu._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function Ij(n,e){return q_(oc(n),e)}async function H_(n){const e=oc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function G_(n,e,t){const r=oc(n);await Mm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Sj)}async function $_(n,e,t){if(ua(n.app))return Promise.reject(Kl(n));const r=oc(n),u=await Mm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Cj).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&H_(n),f}),d=await Gu._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function W_(n,e,t){return ua(n.app)?Promise.reject(Kl(n)):Ij(Er(n),hh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&H_(n),r})}async function Y_(n,e){const t=Er(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await xj(t.auth,s);o!==n.email&&await n.reload()}async function Dj(n,e){return fl(n,"POST","/v1/accounts:update",e)}async function K_(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Er(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await rh(r,Dj(r.auth,o));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const d=r.providerData.find(({providerId:f})=>f==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function kj(n,e,t,r){return Er(n).onIdTokenChanged(e,t,r)}function Lj(n,e,t){return Er(n).beforeAuthStateChanged(e,t)}function iv(n,e,t,r){return Er(n).onAuthStateChanged(e,t,r)}function ug(n){return Er(n).signOut()}const Fm="__sak";class X_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fm,"1"),this.storage.removeItem(Fm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pj=1e3,Mj=10;class Q_ extends X_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,f)=>{this.notifyListeners(u,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);ej()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Mj):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Pj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Q_.type="LOCAL";const Oj=Q_;class J_ extends X_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}J_.type="SESSION";const Z_=J_;function Fj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class dg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new dg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,u=this.handlersMap[s];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const d=Array.from(u).map(async p=>p(t.origin,o)),f=await Fj(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}dg.receivers=[];function sv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class Uj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((d,f)=>{const p=sv("",20);s.port1.start();const m=setTimeout(()=>{f(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(x){const E=x;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(E.data.response);break;default:clearTimeout(m),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function il(){return window}function Bj(n){il().location.href=n}function eE(){return typeof il().WorkerGlobalScope<"u"&&typeof il().importScripts=="function"}async function Vj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zj(){return navigator?.serviceWorker?.controller||null}function qj(){return eE()?self:null}const tE="firebaseLocalStorageDb",Hj=1,Um="firebaseLocalStorage",nE="fbase_key";class Wf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hg(n,e){return n.transaction([Um],e?"readwrite":"readonly").objectStore(Um)}function Gj(){const n=indexedDB.deleteDatabase(tE);return new Wf(n).toPromise()}function n1(){const n=indexedDB.open(tE,Hj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Um,{keyPath:nE})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Um)?e(r):(r.close(),await Gj(),e(await n1()))})})}async function iw(n,e,t){const r=hg(n,!0).put({[nE]:e,value:t});return new Wf(r).toPromise()}async function $j(n,e){const t=hg(n,!1).get(e),r=await new Wf(t).toPromise();return r===void 0?null:r.value}function sw(n,e){const t=hg(n,!0).delete(e);return new Wf(t).toPromise()}const Wj=800,Yj=3;class rE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await n1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Yj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=dg._getInstance(qj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Vj(),!this.activeServiceWorker)return;this.sender=new Uj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await n1();return await iw(e,Fm,"1"),await sw(e,Fm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>iw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>$j(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=hg(s,!1).getAll();return new Wf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Wj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rE.type="LOCAL";const Kj=rE;new Hf(3e4,6e4);function iE(n,e){return e?$l(e):(Xt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class av extends tv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Xj(n){return q_(n.auth,new av(n),n.bypassAuthState)}function Qj(n){const{auth:e,user:t}=n;return Xt(t,e,"internal-error"),Rj(t,new av(n),n.bypassAuthState)}async function Jj(n){const{auth:e,user:t}=n;return Xt(t,e,"internal-error"),jj(t,new av(n),n.bypassAuthState)}class sE{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Xj;case"linkViaPopup":case"linkViaRedirect":return Jj;case"reauthViaPopup":case"reauthViaRedirect":return Qj;default:Ja(this.auth,"internal-error")}}resolve(e){Zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zj=new Hf(2e3,1e4);async function eR(n,e,t){if(ua(n.app))return Promise.reject(No(n,"operation-not-supported-in-this-environment"));const r=oc(n);L6(n,e,rv);const s=iE(r,t);return new Lu(r,"signInViaPopup",e,s).executeNotNull()}class Lu extends sE{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Lu.currentPopupAction&&Lu.currentPopupAction.cancel(),Lu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xt(e,this.auth,"internal-error"),e}async onExecution(){Zl(this.filter.length===1,"Popup operations only handle one event");const e=sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(No(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(No(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Lu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(No(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zj.get())};e()}}Lu.currentPopupAction=null;const tR="pendingRedirect",gm=new Map;class nR extends sE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=gm.get(this.auth._key());if(!e){try{const r=await rR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}gm.set(this.auth._key(),e)}return this.bypassAuthState||gm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rR(n,e){const t=aR(e),r=sR(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function iR(n,e){gm.set(n._key(),e)}function sR(n){return $l(n._redirectPersistence)}function aR(n){return mm(tR,n.config.apiKey,n.name)}async function oR(n,e,t=!1){if(ua(n.app))return Promise.reject(Kl(n));const r=oc(n),s=iE(r,e),u=await new nR(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const lR=600*1e3;class cR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!aE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(No(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lR&&this.cachedEventUids.clear(),this.cachedEventUids.has(aw(e))}saveEventToCache(e){this.cachedEventUids.add(aw(e)),this.lastProcessedEventTime=Date.now()}}function aw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function aE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function uR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aE(n);default:return!1}}async function dR(n,e={}){return fl(n,"GET","/v1/projects",e)}const hR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fR=/^https?/;async function pR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dR(n);for(const t of e)try{if(mR(t))return}catch{}Ja(n,"unauthorized-domain")}function mR(n){const e=e1(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!fR.test(t))return!1;if(hR.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const gR=new Hf(3e4,6e4);function ow(){const n=il().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yR(n){return new Promise((e,t)=>{function r(){ow(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ow(),t(No(n,"network-request-failed"))},timeout:gR.get()})}if(il().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(il().gapi?.load)r();else{const s=cj("iframefcb");return il()[s]=()=>{gapi.load?r():t(No(n,"network-request-failed"))},F_(`${lj()}?onload=${s}`).catch(o=>t(o))}}).catch(e=>{throw ym=null,e})}let ym=null;function vR(n){return ym=ym||yR(n),ym}const bR=new Hf(5e3,15e3),wR="__/auth/iframe",xR="emulator/auth/iframe",SR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_R=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ER(n){const e=n.config;Xt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?J1(e,xR):`https://${n.config.authDomain}/${wR}`,r={apiKey:e.apiKey,appName:n.name,v:Qu},s=_R.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${qf(r).slice(1)}`}async function NR(n){const e=await vR(n),t=il().gapi;return Xt(t,n,"internal-error"),e.open({where:document.body,url:ER(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SR,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=No(n,"network-request-failed"),d=il().setTimeout(()=>{o(u)},bR.get());function f(){il().clearTimeout(d),s(r)}r.ping(f).then(f,()=>{o(u)})}))}const AR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TR=500,CR=600,jR="_blank",RR="http://localhost";class lw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IR(n,e,t,r=TR,s=CR){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f={...AR,width:r.toString(),height:s.toString(),top:o,left:u},p=Cs().toLowerCase();t&&(d=I_(p)?jR:t),j_(p)&&(e=e||RR,f.scrollbars="yes");const m=Object.entries(f).reduce((E,[w,A])=>`${E}${w}=${A},`,"");if(Z6(p)&&d!=="_self")return DR(e||"",d),new lw(null);const x=window.open(e||"",d,m);Xt(x,n,"popup-blocked");try{x.focus()}catch{}return new lw(x)}function DR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const kR="__/auth/handler",LR="emulator/auth/handler",PR=encodeURIComponent("fac");async function cw(n,e,t,r,s,o){Xt(n.config.authDomain,n,"auth-domain-config-required"),Xt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qu,eventId:s};if(e instanceof rv){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",wC(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,x]of Object.entries({}))u[m]=x}if(e instanceof $f){const m=e.getScopes().filter(x=>x!=="");m.length>0&&(u.scopes=m.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const m of Object.keys(d))d[m]===void 0&&delete d[m];const f=await n._getAppCheckToken(),p=f?`#${PR}=${encodeURIComponent(f)}`:"";return`${MR(n)}?${qf(d).slice(1)}${p}`}function MR({config:n}){return n.emulator?J1(n,LR):`https://${n.authDomain}/${kR}`}const cy="webStorageSupport";class OR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z_,this._completeRedirectFn=oR,this._overrideRedirectResult=iR}async _openPopup(e,t,r,s){Zl(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await cw(e,t,r,e1(),s);return IR(e,o,sv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await cw(e,t,r,e1(),s);return Bj(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(Zl(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await NR(e),r=new cR(e);return t.register("authEvent",s=>(Xt(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cy,{type:cy},s=>{const o=s?.[0]?.[cy];o!==void 0&&t(!!o),Ja(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return M_()||R_()||ev()}}const FR=OR;var uw="@firebase/auth",dw="1.11.1";class UR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function BR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VR(n){qu(new Jc("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Xt(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O_(n)},p=new sj(r,s,o,f);return mj(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),qu(new Jc("auth-internal",e=>{const t=oc(e.getProvider("auth").getImmediate());return(r=>new UR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rl(uw,dw,BR(n)),rl(uw,dw,"esm2020")}const zR=300,qR=m_("authIdTokenMaxAge")||zR;let hw=null;const HR=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>qR)return;const s=t?.token;hw!==s&&(hw=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function GR(n=K1()){const e=lg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=pj(n,{popupRedirectResolver:FR,persistence:[Kj,Oj,Z_]}),r=m_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=HR(o.toString());Lj(t,u,()=>u(t.currentUser)),kj(t,d=>u(d))}}const s=h_("auth");return s&&gj(t,`http://${s}`),t}function $R(){return document.getElementsByTagName("head")?.[0]??document}aj({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=No("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",$R().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VR("Browser");var WR="firebase",YR="12.6.0";rl(WR,YR,"app");var fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Kc,oE;(function(){var n;function e(U,I){function R(){}R.prototype=I.prototype,U.F=I.prototype,U.prototype=new R,U.prototype.constructor=U,U.D=function(q,j,F){for(var M=Array(arguments.length-2),ne=2;ne<arguments.length;ne++)M[ne-2]=arguments[ne];return I.prototype[j].apply(q,M)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(U,I,R){R||(R=0);const q=Array(16);if(typeof I=="string")for(var j=0;j<16;++j)q[j]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(j=0;j<16;++j)q[j]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=U.g[0],R=U.g[1],j=U.g[2];let F=U.g[3],M;M=I+(F^R&(j^F))+q[0]+3614090360&4294967295,I=R+(M<<7&4294967295|M>>>25),M=F+(j^I&(R^j))+q[1]+3905402710&4294967295,F=I+(M<<12&4294967295|M>>>20),M=j+(R^F&(I^R))+q[2]+606105819&4294967295,j=F+(M<<17&4294967295|M>>>15),M=R+(I^j&(F^I))+q[3]+3250441966&4294967295,R=j+(M<<22&4294967295|M>>>10),M=I+(F^R&(j^F))+q[4]+4118548399&4294967295,I=R+(M<<7&4294967295|M>>>25),M=F+(j^I&(R^j))+q[5]+1200080426&4294967295,F=I+(M<<12&4294967295|M>>>20),M=j+(R^F&(I^R))+q[6]+2821735955&4294967295,j=F+(M<<17&4294967295|M>>>15),M=R+(I^j&(F^I))+q[7]+4249261313&4294967295,R=j+(M<<22&4294967295|M>>>10),M=I+(F^R&(j^F))+q[8]+1770035416&4294967295,I=R+(M<<7&4294967295|M>>>25),M=F+(j^I&(R^j))+q[9]+2336552879&4294967295,F=I+(M<<12&4294967295|M>>>20),M=j+(R^F&(I^R))+q[10]+4294925233&4294967295,j=F+(M<<17&4294967295|M>>>15),M=R+(I^j&(F^I))+q[11]+2304563134&4294967295,R=j+(M<<22&4294967295|M>>>10),M=I+(F^R&(j^F))+q[12]+1804603682&4294967295,I=R+(M<<7&4294967295|M>>>25),M=F+(j^I&(R^j))+q[13]+4254626195&4294967295,F=I+(M<<12&4294967295|M>>>20),M=j+(R^F&(I^R))+q[14]+2792965006&4294967295,j=F+(M<<17&4294967295|M>>>15),M=R+(I^j&(F^I))+q[15]+1236535329&4294967295,R=j+(M<<22&4294967295|M>>>10),M=I+(j^F&(R^j))+q[1]+4129170786&4294967295,I=R+(M<<5&4294967295|M>>>27),M=F+(R^j&(I^R))+q[6]+3225465664&4294967295,F=I+(M<<9&4294967295|M>>>23),M=j+(I^R&(F^I))+q[11]+643717713&4294967295,j=F+(M<<14&4294967295|M>>>18),M=R+(F^I&(j^F))+q[0]+3921069994&4294967295,R=j+(M<<20&4294967295|M>>>12),M=I+(j^F&(R^j))+q[5]+3593408605&4294967295,I=R+(M<<5&4294967295|M>>>27),M=F+(R^j&(I^R))+q[10]+38016083&4294967295,F=I+(M<<9&4294967295|M>>>23),M=j+(I^R&(F^I))+q[15]+3634488961&4294967295,j=F+(M<<14&4294967295|M>>>18),M=R+(F^I&(j^F))+q[4]+3889429448&4294967295,R=j+(M<<20&4294967295|M>>>12),M=I+(j^F&(R^j))+q[9]+568446438&4294967295,I=R+(M<<5&4294967295|M>>>27),M=F+(R^j&(I^R))+q[14]+3275163606&4294967295,F=I+(M<<9&4294967295|M>>>23),M=j+(I^R&(F^I))+q[3]+4107603335&4294967295,j=F+(M<<14&4294967295|M>>>18),M=R+(F^I&(j^F))+q[8]+1163531501&4294967295,R=j+(M<<20&4294967295|M>>>12),M=I+(j^F&(R^j))+q[13]+2850285829&4294967295,I=R+(M<<5&4294967295|M>>>27),M=F+(R^j&(I^R))+q[2]+4243563512&4294967295,F=I+(M<<9&4294967295|M>>>23),M=j+(I^R&(F^I))+q[7]+1735328473&4294967295,j=F+(M<<14&4294967295|M>>>18),M=R+(F^I&(j^F))+q[12]+2368359562&4294967295,R=j+(M<<20&4294967295|M>>>12),M=I+(R^j^F)+q[5]+4294588738&4294967295,I=R+(M<<4&4294967295|M>>>28),M=F+(I^R^j)+q[8]+2272392833&4294967295,F=I+(M<<11&4294967295|M>>>21),M=j+(F^I^R)+q[11]+1839030562&4294967295,j=F+(M<<16&4294967295|M>>>16),M=R+(j^F^I)+q[14]+4259657740&4294967295,R=j+(M<<23&4294967295|M>>>9),M=I+(R^j^F)+q[1]+2763975236&4294967295,I=R+(M<<4&4294967295|M>>>28),M=F+(I^R^j)+q[4]+1272893353&4294967295,F=I+(M<<11&4294967295|M>>>21),M=j+(F^I^R)+q[7]+4139469664&4294967295,j=F+(M<<16&4294967295|M>>>16),M=R+(j^F^I)+q[10]+3200236656&4294967295,R=j+(M<<23&4294967295|M>>>9),M=I+(R^j^F)+q[13]+681279174&4294967295,I=R+(M<<4&4294967295|M>>>28),M=F+(I^R^j)+q[0]+3936430074&4294967295,F=I+(M<<11&4294967295|M>>>21),M=j+(F^I^R)+q[3]+3572445317&4294967295,j=F+(M<<16&4294967295|M>>>16),M=R+(j^F^I)+q[6]+76029189&4294967295,R=j+(M<<23&4294967295|M>>>9),M=I+(R^j^F)+q[9]+3654602809&4294967295,I=R+(M<<4&4294967295|M>>>28),M=F+(I^R^j)+q[12]+3873151461&4294967295,F=I+(M<<11&4294967295|M>>>21),M=j+(F^I^R)+q[15]+530742520&4294967295,j=F+(M<<16&4294967295|M>>>16),M=R+(j^F^I)+q[2]+3299628645&4294967295,R=j+(M<<23&4294967295|M>>>9),M=I+(j^(R|~F))+q[0]+4096336452&4294967295,I=R+(M<<6&4294967295|M>>>26),M=F+(R^(I|~j))+q[7]+1126891415&4294967295,F=I+(M<<10&4294967295|M>>>22),M=j+(I^(F|~R))+q[14]+2878612391&4294967295,j=F+(M<<15&4294967295|M>>>17),M=R+(F^(j|~I))+q[5]+4237533241&4294967295,R=j+(M<<21&4294967295|M>>>11),M=I+(j^(R|~F))+q[12]+1700485571&4294967295,I=R+(M<<6&4294967295|M>>>26),M=F+(R^(I|~j))+q[3]+2399980690&4294967295,F=I+(M<<10&4294967295|M>>>22),M=j+(I^(F|~R))+q[10]+4293915773&4294967295,j=F+(M<<15&4294967295|M>>>17),M=R+(F^(j|~I))+q[1]+2240044497&4294967295,R=j+(M<<21&4294967295|M>>>11),M=I+(j^(R|~F))+q[8]+1873313359&4294967295,I=R+(M<<6&4294967295|M>>>26),M=F+(R^(I|~j))+q[15]+4264355552&4294967295,F=I+(M<<10&4294967295|M>>>22),M=j+(I^(F|~R))+q[6]+2734768916&4294967295,j=F+(M<<15&4294967295|M>>>17),M=R+(F^(j|~I))+q[13]+1309151649&4294967295,R=j+(M<<21&4294967295|M>>>11),M=I+(j^(R|~F))+q[4]+4149444226&4294967295,I=R+(M<<6&4294967295|M>>>26),M=F+(R^(I|~j))+q[11]+3174756917&4294967295,F=I+(M<<10&4294967295|M>>>22),M=j+(I^(F|~R))+q[2]+718787259&4294967295,j=F+(M<<15&4294967295|M>>>17),M=R+(F^(j|~I))+q[9]+3951481745&4294967295,U.g[0]=U.g[0]+I&4294967295,U.g[1]=U.g[1]+(j+(M<<21&4294967295|M>>>11))&4294967295,U.g[2]=U.g[2]+j&4294967295,U.g[3]=U.g[3]+F&4294967295}r.prototype.v=function(U,I){I===void 0&&(I=U.length);const R=I-this.blockSize,q=this.C;let j=this.h,F=0;for(;F<I;){if(j==0)for(;F<=R;)s(this,U,F),F+=this.blockSize;if(typeof U=="string"){for(;F<I;)if(q[j++]=U.charCodeAt(F++),j==this.blockSize){s(this,q),j=0;break}}else for(;F<I;)if(q[j++]=U[F++],j==this.blockSize){s(this,q),j=0;break}}this.h=j,this.o+=I},r.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var I=1;I<U.length-8;++I)U[I]=0;I=this.o*8;for(var R=U.length-8;R<U.length;++R)U[R]=I&255,I/=256;for(this.v(U),U=Array(16),I=0,R=0;R<4;++R)for(let q=0;q<32;q+=8)U[I++]=this.g[R]>>>q&255;return U};function o(U,I){var R=d;return Object.prototype.hasOwnProperty.call(R,U)?R[U]:R[U]=I(U)}function u(U,I){this.h=I;const R=[];let q=!0;for(let j=U.length-1;j>=0;j--){const F=U[j]|0;q&&F==I||(R[j]=F,q=!1)}this.g=R}var d={};function f(U){return-128<=U&&U<128?o(U,function(I){return new u([I|0],I<0?-1:0)}):new u([U|0],U<0?-1:0)}function p(U){if(isNaN(U)||!isFinite(U))return x;if(U<0)return C(p(-U));const I=[];let R=1;for(let q=0;U>=R;q++)I[q]=U/R|0,R*=4294967296;return new u(I,0)}function m(U,I){if(U.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(U.charAt(0)=="-")return C(m(U.substring(1),I));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(I,8));let q=x;for(let F=0;F<U.length;F+=8){var j=Math.min(8,U.length-F);const M=parseInt(U.substring(F,F+j),I);j<8?(j=p(Math.pow(I,j)),q=q.j(j).add(p(M))):(q=q.j(R),q=q.add(p(M)))}return q}var x=f(0),E=f(1),w=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-C(this).m();let U=0,I=1;for(let R=0;R<this.g.length;R++){const q=this.i(R);U+=(q>=0?q:4294967296+q)*I,I*=4294967296}return U},n.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(A(this))return"0";if(D(this))return"-"+C(this).toString(U);const I=p(Math.pow(U,6));var R=this;let q="";for(;;){const j=V(R,I).g;R=k(R,j.j(I));let F=((R.g.length>0?R.g[0]:R.h)>>>0).toString(U);if(R=j,A(R))return F+q;for(;F.length<6;)F="0"+F;q=F+q}},n.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function A(U){if(U.h!=0)return!1;for(let I=0;I<U.g.length;I++)if(U.g[I]!=0)return!1;return!0}function D(U){return U.h==-1}n.l=function(U){return U=k(this,U),D(U)?-1:A(U)?0:1};function C(U){const I=U.g.length,R=[];for(let q=0;q<I;q++)R[q]=~U.g[q];return new u(R,~U.h).add(E)}n.abs=function(){return D(this)?C(this):this},n.add=function(U){const I=Math.max(this.g.length,U.g.length),R=[];let q=0;for(let j=0;j<=I;j++){let F=q+(this.i(j)&65535)+(U.i(j)&65535),M=(F>>>16)+(this.i(j)>>>16)+(U.i(j)>>>16);q=M>>>16,F&=65535,M&=65535,R[j]=M<<16|F}return new u(R,R[R.length-1]&-2147483648?-1:0)};function k(U,I){return U.add(C(I))}n.j=function(U){if(A(this)||A(U))return x;if(D(this))return D(U)?C(this).j(C(U)):C(C(this).j(U));if(D(U))return C(this.j(C(U)));if(this.l(w)<0&&U.l(w)<0)return p(this.m()*U.m());const I=this.g.length+U.g.length,R=[];for(var q=0;q<2*I;q++)R[q]=0;for(q=0;q<this.g.length;q++)for(let j=0;j<U.g.length;j++){const F=this.i(q)>>>16,M=this.i(q)&65535,ne=U.i(j)>>>16,Se=U.i(j)&65535;R[2*q+2*j]+=M*Se,H(R,2*q+2*j),R[2*q+2*j+1]+=F*Se,H(R,2*q+2*j+1),R[2*q+2*j+1]+=M*ne,H(R,2*q+2*j+1),R[2*q+2*j+2]+=F*ne,H(R,2*q+2*j+2)}for(U=0;U<I;U++)R[U]=R[2*U+1]<<16|R[2*U];for(U=I;U<2*I;U++)R[U]=0;return new u(R,0)};function H(U,I){for(;(U[I]&65535)!=U[I];)U[I+1]+=U[I]>>>16,U[I]&=65535,I++}function G(U,I){this.g=U,this.h=I}function V(U,I){if(A(I))throw Error("division by zero");if(A(U))return new G(x,x);if(D(U))return I=V(C(U),I),new G(C(I.g),C(I.h));if(D(I))return I=V(U,C(I)),new G(C(I.g),I.h);if(U.g.length>30){if(D(U)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var R=E,q=I;q.l(U)<=0;)R=ce(R),q=ce(q);var j=se(R,1),F=se(q,1);for(q=se(q,2),R=se(R,2);!A(q);){var M=F.add(q);M.l(U)<=0&&(j=j.add(R),F=M),q=se(q,1),R=se(R,1)}return I=k(U,j.j(I)),new G(j,I)}for(j=x;U.l(I)>=0;){for(R=Math.max(1,Math.floor(U.m()/I.m())),q=Math.ceil(Math.log(R)/Math.LN2),q=q<=48?1:Math.pow(2,q-48),F=p(R),M=F.j(I);D(M)||M.l(U)>0;)R-=q,F=p(R),M=F.j(I);A(F)&&(F=E),j=j.add(F),U=k(U,M)}return new G(j,U)}n.B=function(U){return V(this,U).h},n.and=function(U){const I=Math.max(this.g.length,U.g.length),R=[];for(let q=0;q<I;q++)R[q]=this.i(q)&U.i(q);return new u(R,this.h&U.h)},n.or=function(U){const I=Math.max(this.g.length,U.g.length),R=[];for(let q=0;q<I;q++)R[q]=this.i(q)|U.i(q);return new u(R,this.h|U.h)},n.xor=function(U){const I=Math.max(this.g.length,U.g.length),R=[];for(let q=0;q<I;q++)R[q]=this.i(q)^U.i(q);return new u(R,this.h^U.h)};function ce(U){const I=U.g.length+1,R=[];for(let q=0;q<I;q++)R[q]=U.i(q)<<1|U.i(q-1)>>>31;return new u(R,U.h)}function se(U,I){const R=I>>5;I%=32;const q=U.g.length-R,j=[];for(let F=0;F<q;F++)j[F]=I>0?U.i(F+R)>>>I|U.i(F+R+1)<<32-I:U.i(F+R);return new u(j,U.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=m,Kc=u}).apply(typeof fw<"u"?fw:typeof self<"u"?self:typeof window<"u"?window:{});var Xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var lE,df,cE,vm,r1,uE,dE,hE;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xp=="object"&&Xp];for(var T=0;T<y.length;++T){var B=y[T];if(B&&B.Math==Math)return B}throw Error("Cannot find global object")}var r=t(this);function s(y,T){if(T)e:{var B=r;y=y.split(".");for(var ie=0;ie<y.length-1;ie++){var Pe=y[ie];if(!(Pe in B))break e;B=B[Pe]}y=y[y.length-1],ie=B[y],T=T(ie),T!=ie&&T!=null&&e(B,y,{configurable:!0,writable:!0,value:T})}}s("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(y){return y||function(T){var B=[],ie;for(ie in T)Object.prototype.hasOwnProperty.call(T,ie)&&B.push([ie,T[ie]]);return B}});var o=o||{},u=this||self;function d(y){var T=typeof y;return T=="object"&&y!=null||T=="function"}function f(y,T,B){return y.call.apply(y.bind,arguments)}function p(y,T,B){return p=f,p.apply(null,arguments)}function m(y,T){var B=Array.prototype.slice.call(arguments,1);return function(){var ie=B.slice();return ie.push.apply(ie,arguments),y.apply(this,ie)}}function x(y,T){function B(){}B.prototype=T.prototype,y.Z=T.prototype,y.prototype=new B,y.prototype.constructor=y,y.Ob=function(ie,Pe,He){for(var ht=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)ht[Jt-2]=arguments[Jt];return T.prototype[Pe].apply(ie,ht)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function w(y){const T=y.length;if(T>0){const B=Array(T);for(let ie=0;ie<T;ie++)B[ie]=y[ie];return B}return[]}function A(y,T){for(let ie=1;ie<arguments.length;ie++){const Pe=arguments[ie];var B=typeof Pe;if(B=B!="object"?B:Pe?Array.isArray(Pe)?"array":B:"null",B=="array"||B=="object"&&typeof Pe.length=="number"){B=y.length||0;const He=Pe.length||0;y.length=B+He;for(let ht=0;ht<He;ht++)y[B+ht]=Pe[ht]}else y.push(Pe)}}class D{constructor(T,B){this.i=T,this.j=B,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function C(y){u.setTimeout(()=>{throw y},0)}function k(){var y=U;let T=null;return y.g&&(T=y.g,y.g=y.g.next,y.g||(y.h=null),T.next=null),T}class H{constructor(){this.h=this.g=null}add(T,B){const ie=G.get();ie.set(T,B),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var G=new D(()=>new V,y=>y.reset());class V{constructor(){this.next=this.g=this.h=null}set(T,B){this.h=T,this.g=B,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,se=!1,U=new H,I=()=>{const y=Promise.resolve(void 0);ce=()=>{y.then(R)}};function R(){for(var y;y=k();){try{y.h.call(y.g)}catch(B){C(B)}var T=G;T.j(y),T.h<100&&(T.h++,y.next=T.g,T.g=y)}se=!1}function q(){this.u=this.u,this.C=this.C}q.prototype.u=!1,q.prototype.dispose=function(){this.u||(this.u=!0,this.N())},q.prototype[Symbol.dispose]=function(){this.dispose()},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(y,T){this.type=y,this.g=this.target=T,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var y=!1,T=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const B=()=>{};u.addEventListener("test",B,T),u.removeEventListener("test",B,T)}catch{}return y})();function M(y){return/^[\s\xa0]*$/.test(y)}function ne(y,T){j.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,T)}x(ne,j),ne.prototype.init=function(y,T){const B=this.type=y.type,ie=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=T,T=y.relatedTarget,T||(B=="mouseover"?T=y.fromElement:B=="mouseout"&&(T=y.toElement)),this.relatedTarget=T,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&ne.Z.h.call(this)},ne.prototype.h=function(){ne.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Se="closure_listenable_"+(Math.random()*1e6|0),le=0;function ve(y,T,B,ie,Pe){this.listener=y,this.proxy=null,this.src=T,this.type=B,this.capture=!!ie,this.ha=Pe,this.key=++le,this.da=this.fa=!1}function ye(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function ge(y,T,B){for(const ie in y)T.call(B,y[ie],ie,y)}function we(y,T){for(const B in y)T.call(void 0,y[B],B,y)}function Q(y){const T={};for(const B in y)T[B]=y[B];return T}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(y,T){let B,ie;for(let Pe=1;Pe<arguments.length;Pe++){ie=arguments[Pe];for(B in ie)y[B]=ie[B];for(let He=0;He<P.length;He++)B=P[He],Object.prototype.hasOwnProperty.call(ie,B)&&(y[B]=ie[B])}}function re(y){this.src=y,this.g={},this.h=0}re.prototype.add=function(y,T,B,ie,Pe){const He=y.toString();y=this.g[He],y||(y=this.g[He]=[],this.h++);const ht=me(y,T,ie,Pe);return ht>-1?(T=y[ht],B||(T.fa=!1)):(T=new ve(T,this.src,He,!!ie,Pe),T.fa=B,y.push(T)),T};function fe(y,T){const B=T.type;if(B in y.g){var ie=y.g[B],Pe=Array.prototype.indexOf.call(ie,T,void 0),He;(He=Pe>=0)&&Array.prototype.splice.call(ie,Pe,1),He&&(ye(T),y.g[B].length==0&&(delete y.g[B],y.h--))}}function me(y,T,B,ie){for(let Pe=0;Pe<y.length;++Pe){const He=y[Pe];if(!He.da&&He.listener==T&&He.capture==!!B&&He.ha==ie)return Pe}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Me={};function Le(y,T,B,ie,Pe){if(Array.isArray(T)){for(let He=0;He<T.length;He++)Le(y,T[He],B,ie,Pe);return null}return B=$e(B),y&&y[Se]?y.J(T,B,d(ie)?!!ie.capture:!1,Pe):Z(y,T,B,!1,ie,Pe)}function Z(y,T,B,ie,Pe,He){if(!T)throw Error("Invalid event type");const ht=d(Pe)?!!Pe.capture:!!Pe;let Jt=Ie(y);if(Jt||(y[_e]=Jt=new re(y)),B=Jt.add(T,B,ie,ht,He),B.proxy)return B;if(ie=ae(),B.proxy=ie,ie.src=y,ie.listener=B,y.addEventListener)F||(Pe=ht),Pe===void 0&&(Pe=!1),y.addEventListener(T.toString(),ie,Pe);else if(y.attachEvent)y.attachEvent(pe(T.toString()),ie);else if(y.addListener&&y.removeListener)y.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return B}function ae(){function y(B){return T.call(y.src,y.listener,B)}const T=z;return y}function Te(y,T,B,ie,Pe){if(Array.isArray(T))for(var He=0;He<T.length;He++)Te(y,T[He],B,ie,Pe);else ie=d(ie)?!!ie.capture:!!ie,B=$e(B),y&&y[Se]?(y=y.i,He=String(T).toString(),He in y.g&&(T=y.g[He],B=me(T,B,ie,Pe),B>-1&&(ye(T[B]),Array.prototype.splice.call(T,B,1),T.length==0&&(delete y.g[He],y.h--)))):y&&(y=Ie(y))&&(T=y.g[T.toString()],y=-1,T&&(y=me(T,B,ie,Pe)),(B=y>-1?T[y]:null)&&Ee(B))}function Ee(y){if(typeof y!="number"&&y&&!y.da){var T=y.src;if(T&&T[Se])fe(T.i,y);else{var B=y.type,ie=y.proxy;T.removeEventListener?T.removeEventListener(B,ie,y.capture):T.detachEvent?T.detachEvent(pe(B),ie):T.addListener&&T.removeListener&&T.removeListener(ie),(B=Ie(T))?(fe(B,y),B.h==0&&(B.src=null,T[_e]=null)):ye(y)}}}function pe(y){return y in Me?Me[y]:Me[y]="on"+y}function z(y,T){if(y.da)y=!0;else{T=new ne(T,this);const B=y.listener,ie=y.ha||y.src;y.fa&&Ee(y),y=B.call(ie,T)}return y}function Ie(y){return y=y[_e],y instanceof re?y:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function $e(y){return typeof y=="function"?y:(y[Be]||(y[Be]=function(T){return y.handleEvent(T)}),y[Be])}function Ce(){q.call(this),this.i=new re(this),this.M=this,this.G=null}x(Ce,q),Ce.prototype[Se]=!0,Ce.prototype.removeEventListener=function(y,T,B,ie){Te(this,y,T,B,ie)};function Ze(y,T){var B,ie=y.G;if(ie)for(B=[];ie;ie=ie.G)B.push(ie);if(y=y.M,ie=T.type||T,typeof T=="string")T=new j(T,y);else if(T instanceof j)T.target=T.target||y;else{var Pe=T;T=new j(ie,y),Y(T,Pe)}Pe=!0;let He,ht;if(B)for(ht=B.length-1;ht>=0;ht--)He=T.g=B[ht],Pe=et(He,ie,!0,T)&&Pe;if(He=T.g=y,Pe=et(He,ie,!0,T)&&Pe,Pe=et(He,ie,!1,T)&&Pe,B)for(ht=0;ht<B.length;ht++)He=T.g=B[ht],Pe=et(He,ie,!1,T)&&Pe}Ce.prototype.N=function(){if(Ce.Z.N.call(this),this.i){var y=this.i;for(const T in y.g){const B=y.g[T];for(let ie=0;ie<B.length;ie++)ye(B[ie]);delete y.g[T],y.h--}}this.G=null},Ce.prototype.J=function(y,T,B,ie){return this.i.add(String(y),T,!1,B,ie)},Ce.prototype.K=function(y,T,B,ie){return this.i.add(String(y),T,!0,B,ie)};function et(y,T,B,ie){if(T=y.i.g[String(T)],!T)return!0;T=T.concat();let Pe=!0;for(let He=0;He<T.length;++He){const ht=T[He];if(ht&&!ht.da&&ht.capture==B){const Jt=ht.listener,sr=ht.ha||ht.src;ht.fa&&fe(y.i,ht),Pe=Jt.call(sr,ie)!==!1&&Pe}}return Pe&&!ie.defaultPrevented}function xt(y,T){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=p(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:u.setTimeout(y,T||0)}function vt(y){y.g=xt(()=>{y.g=null,y.i&&(y.i=!1,vt(y))},y.l);const T=y.h;y.h=null,y.m.apply(null,T)}class Ue extends q{constructor(T,B){super(),this.m=T,this.l=B,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:vt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ot(y){q.call(this),this.h=y,this.g={}}x(ot,q);var dt=[];function gt(y){ge(y.g,function(T,B){this.g.hasOwnProperty(B)&&Ee(T)},y),y.g={}}ot.prototype.N=function(){ot.Z.N.call(this),gt(this)},ot.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var De=u.JSON.stringify,We=u.JSON.parse,pt=class{stringify(y){return u.JSON.stringify(y,void 0)}parse(y){return u.JSON.parse(y,void 0)}};function mt(){}function ft(){}var ct={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){j.call(this,"d")}x(bt,j);function wt(){j.call(this,"c")}x(wt,j);var qt={},Tt=null;function dn(){return Tt=Tt||new Ce}qt.Ia="serverreachability";function Bt(y){j.call(this,qt.Ia,y)}x(Bt,j);function Ot(y){const T=dn();Ze(T,new Bt(T))}qt.STAT_EVENT="statevent";function jn(y,T){j.call(this,qt.STAT_EVENT,y),this.stat=T}x(jn,j);function Dt(y){const T=dn();Ze(T,new jn(T,y))}qt.Ja="timingevent";function Lt(y,T){j.call(this,qt.Ja,y),this.size=T}x(Lt,j);function cn(y,T){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){y()},T)}function wi(){this.g=!0}wi.prototype.ua=function(){this.g=!1};function ui(y,T,B,ie,Pe,He){y.info(function(){if(y.g)if(He){var ht="",Jt=He.split("&");for(let hn=0;hn<Jt.length;hn++){var sr=Jt[hn].split("=");if(sr.length>1){const Vn=sr[0];sr=sr[1];const pi=Vn.split("_");ht=pi.length>=2&&pi[1]=="type"?ht+(Vn+"="+sr+"&"):ht+(Vn+"=redacted&")}}}else ht=null;else ht=He;return"XMLHTTP REQ ("+ie+") [attempt "+Pe+"]: "+T+`
`+B+`
`+ht})}function zs(y,T,B,ie,Pe,He,ht){y.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Pe+"]: "+T+`
`+B+`
`+He+" "+ht})}function Zr(y,T,B,ie){y.info(function(){return"XMLHTTP TEXT ("+T+"): "+pa(y,B)+(ie?" "+ie:"")})}function Ft(y,T){y.info(function(){return"TIMEOUT: "+T})}wi.prototype.info=function(){};function pa(y,T){if(!y.g)return T;if(!T)return null;try{const He=JSON.parse(T);if(He){for(y=0;y<He.length;y++)if(Array.isArray(He[y])){var B=He[y];if(!(B.length<2)){var ie=B[1];if(Array.isArray(ie)&&!(ie.length<1)){var Pe=ie[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(let ht=1;ht<ie.length;ht++)ie[ht]=""}}}}return De(He)}catch{return T}}var Xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mi;function Yn(){}x(Yn,mt),Yn.prototype.g=function(){return new XMLHttpRequest},Mi=new Yn;function rr(y){return encodeURIComponent(String(y))}function Br(y){var T=1;y=y.split(":");const B=[];for(;T>0&&y.length;)B.push(y.shift()),T--;return y.length&&B.push(y.join(":")),B}function xi(y,T,B,ie){this.j=y,this.i=T,this.l=B,this.S=ie||1,this.V=new ot(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new di}function di(){this.i=null,this.g="",this.h=!1}var Un={},Qn={};function Vr(y,T,B){y.M=1,y.A=Da(Nr(T)),y.u=B,y.R=!0,Oi(y,null)}function Oi(y,T){y.F=Date.now(),Fi(y),y.B=Nr(y.A);var B=y.B,ie=y.S;Array.isArray(ie)||(ie=[String(ie)]),ko(B.i,"t",ie),y.C=0,B=y.j.L,y.h=new di,y.g=Et(y.j,B?T:null,!y.u),y.P>0&&(y.O=new Ue(p(y.Y,y,y.g),y.P)),T=y.V,B=y.g,ie=y.ba;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(dt[0]=Pe.toString()),Pe=dt);for(let He=0;He<Pe.length;He++){const ht=Le(B,Pe[He],ie||T.handleEvent,!1,T.h||T);if(!ht)break;T.g[ht.key]=ht}T=y.J?Q(y.J):{},y.u?(y.v||(y.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,T)):(y.v="GET",y.g.ea(y.B,y.v,null,T)),Ot(),ui(y.i,y.v,y.B,y.l,y.S,y.u)}xi.prototype.ba=function(y){y=y.target;const T=this.O;T&&ns(y)==3?T.j():this.Y(y)},xi.prototype.Y=function(y){try{if(y==this.g)e:{const Jt=ns(this.g),sr=this.g.ya(),hn=this.g.ca();if(!(Jt<3)&&(Jt!=3||this.g&&(this.h.h||this.g.la()||kr(this.g)))){this.K||Jt!=4||sr==7||(sr==8||hn<=0?Ot(3):Ot(2)),Qi(this);var T=this.g.ca();this.X=T;var B=fs(this);if(this.o=T==200,zs(this.i,this.v,this.B,this.l,this.S,Jt,T),this.o){if(this.U&&!this.L){t:{if(this.g){var ie,Pe=this.g;if((ie=Pe.g?Pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(ie)){var He=ie;break t}}He=null}if(y=He)Zr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ps(this,y);else{this.o=!1,this.m=3,Dt(12),Ji(this),Si(this);break e}}if(this.R){y=!0;let Vn;for(;!this.K&&this.C<B.length;)if(Vn=js(this,B),Vn==Qn){Jt==4&&(this.m=4,Dt(14),y=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Un){this.m=4,Dt(15),Zr(this.i,this.l,B,"[Invalid Chunk]"),y=!1;break}else Zr(this.i,this.l,Vn,null),ps(this,Vn);if(Ia(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||B.length!=0||this.h.h||(this.m=1,Dt(16),y=!1),this.o=this.o&&y,!y)Zr(this.i,this.l,B,"[Invalid Chunked Response]"),Ji(this),Si(this);else if(B.length>0&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.aa&&!ht.P&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Oo(ht),ht.P=!0,Dt(11))}}else Zr(this.i,this.l,B,null),ps(this,B);Jt==4&&Ji(this),this.o&&!this.K&&(Jt==4?de(this.j,this):(this.o=!1,Fi(this)))}else qs(this.g),T==400&&B.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),Ji(this),Si(this)}}}catch{}finally{}};function fs(y){if(!Ia(y))return y.g.la();const T=kr(y.g);if(T==="")return"";let B="";const ie=T.length,Pe=ns(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return Ji(y),Si(y),"";y.h.i=new u.TextDecoder}for(let He=0;He<ie;He++)y.h.h=!0,B+=y.h.i.decode(T[He],{stream:!(Pe&&He==ie-1)});return T.length=0,y.h.g+=B,y.C=0,y.h.g}function Ia(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function js(y,T){var B=y.C,ie=T.indexOf(`
`,B);return ie==-1?Qn:(B=Number(T.substring(B,ie)),isNaN(B)?Un:(ie+=1,ie+B>T.length?Qn:(T=T.slice(ie,ie+B),y.C=ie+B,T)))}xi.prototype.cancel=function(){this.K=!0,Ji(this)};function Fi(y){y.T=Date.now()+y.H,ma(y,y.H)}function ma(y,T){if(y.D!=null)throw Error("WatchDog timer not null");y.D=cn(p(y.aa,y),T)}function Qi(y){y.D&&(u.clearTimeout(y.D),y.D=null)}xi.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Ft(this.i,this.B),this.M!=2&&(Ot(),Dt(17)),Ji(this),this.m=2,Si(this)):ma(this,this.T-y)};function Si(y){y.j.I==0||y.K||de(y.j,y)}function Ji(y){Qi(y);var T=y.O;T&&typeof T.dispose=="function"&&T.dispose(),y.O=null,gt(y.V),y.g&&(T=y.g,y.g=null,T.abort(),T.dispose())}function ps(y,T){try{var B=y.j;if(B.I!=0&&(B.g==y||Rs(B.h,y))){if(!y.L&&Rs(B.h,y)&&B.I==3){try{var ie=B.Ba.g.parse(T)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Pe=ie;if(Pe[0]==0){e:if(!B.v){if(B.g)if(B.g.F+3e3<y.F)$(B),Gs(B);else break e;ks(B),Dt(18)}}else B.xa=Pe[1],0<B.xa-B.K&&Pe[2]<37500&&B.F&&B.A==0&&!B.C&&(B.C=cn(p(B.Va,B),6e3));ms(B.h)<=1&&B.ta&&(B.ta=void 0)}else Re(B,11)}else if((y.L||B.g==y)&&$(B),!M(T))for(Pe=B.Ba.g.parse(T),T=0;T<Pe.length;T++){let hn=Pe[T];const Vn=hn[0];if(!(Vn<=B.K))if(B.K=Vn,hn=hn[1],B.I==2)if(hn[0]=="c"){B.M=hn[1],B.ba=hn[2];const pi=hn[3];pi!=null&&(B.ka=pi,B.j.info("VER="+B.ka));const Ei=hn[4];Ei!=null&&(B.za=Ei,B.j.info("SVER="+B.za));const Jn=hn[5];Jn!=null&&typeof Jn=="number"&&Jn>0&&(ie=1.5*Jn,B.O=ie,B.j.info("backChannelRequestTimeoutMs_="+ie)),ie=B;const Ni=y.g;if(Ni){const Ls=Ni.g?Ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ls){var He=ie.h;He.g||Ls.indexOf("spdy")==-1&&Ls.indexOf("quic")==-1&&Ls.indexOf("h2")==-1||(He.j=He.l,He.g=new Set,He.h&&(to(He,He.h),He.h=null))}if(ie.G){const Oa=Ni.g?Ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Oa&&(ie.wa=Oa,Sn(ie.J,ie.G,Oa))}}B.I=3,B.l&&B.l.ra(),B.aa&&(B.T=Date.now()-y.F,B.j.info("Handshake RTT: "+B.T+"ms")),ie=B;var ht=y;if(ie.na=st(ie,ie.L?ie.ba:null,ie.W),ht.L){Io(ie.h,ht);var Jt=ht,sr=ie.O;sr&&(Jt.H=sr),Jt.D&&(Qi(Jt),Fi(Jt)),ie.g=ht}else xl(ie);B.i.length>0&&ys(B)}else hn[0]!="stop"&&hn[0]!="close"||Re(B,7);else B.I==3&&(hn[0]=="stop"||hn[0]=="close"?hn[0]=="stop"?Re(B,7):Ma(B):hn[0]!="noop"&&B.l&&B.l.qa(hn),B.A=0)}}Ot(4)}catch{}}var yr=class{constructor(y,T){this.g=y,this.map=T}};function Ro(y){this.l=y||10,u.PerformanceNavigationTiming?(y=u.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ui(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function ms(y){return y.h?1:y.g?y.g.size:0}function Rs(y,T){return y.h?y.h==T:y.g?y.g.has(T):!1}function to(y,T){y.g?y.g.add(T):y.h=T}function Io(y,T){y.h&&y.h==T?y.h=null:y.g&&y.g.has(T)&&y.g.delete(T)}Ro.prototype.cancel=function(){if(this.i=Do(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Do(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let T=y.i;for(const B of y.g.values())T=T.concat(B.G);return T}return w(y.i)}var ml=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zi(y,T){if(y){y=y.split("&");for(let B=0;B<y.length;B++){const ie=y[B].indexOf("=");let Pe,He=null;ie>=0?(Pe=y[B].substring(0,ie),He=y[B].substring(ie+1)):Pe=y[B],T(Pe,He?decodeURIComponent(He.replace(/\+/g," ")):"")}}}function hi(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;y instanceof hi?(this.l=y.l,pn(this,y.j),this.o=y.o,this.g=y.g,ga(this,y.u),this.h=y.h,gs(this,Lo(y.i)),this.m=y.m):y&&(T=String(y).match(ml))?(this.l=!1,pn(this,T[1]||"",!0),this.o=Dr(T[2]||""),this.g=Dr(T[3]||"",!0),ga(this,T[4]),this.h=Dr(T[5]||"",!0),gs(this,T[6]||"",!0),this.m=Dr(T[7]||"")):(this.l=!1,this.i=new ya(null,this.l))}hi.prototype.toString=function(){const y=[];var T=this.j;T&&y.push(hr(T,no,!0),":");var B=this.g;return(B||T=="file")&&(y.push("//"),(T=this.o)&&y.push(hr(T,no,!0),"@"),y.push(rr(B).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),B=this.u,B!=null&&y.push(":",String(B))),(B=this.h)&&(this.g&&B.charAt(0)!="/"&&y.push("/"),y.push(hr(B,B.charAt(0)=="/"?gl:lc,!0))),(B=this.i.toString())&&y.push("?",B),(B=this.m)&&y.push("#",hr(B,yl)),y.join("")},hi.prototype.resolve=function(y){const T=Nr(this);let B=!!y.j;B?pn(T,y.j):B=!!y.o,B?T.o=y.o:B=!!y.g,B?T.g=y.g:B=y.u!=null;var ie=y.h;if(B)ga(T,y.u);else if(B=!!y.h){if(ie.charAt(0)!="/")if(this.g&&!this.h)ie="/"+ie;else{var Pe=T.h.lastIndexOf("/");Pe!=-1&&(ie=T.h.slice(0,Pe+1)+ie)}if(Pe=ie,Pe==".."||Pe==".")ie="";else if(Pe.indexOf("./")!=-1||Pe.indexOf("/.")!=-1){ie=Pe.lastIndexOf("/",0)==0,Pe=Pe.split("/");const He=[];for(let ht=0;ht<Pe.length;){const Jt=Pe[ht++];Jt=="."?ie&&ht==Pe.length&&He.push(""):Jt==".."?((He.length>1||He.length==1&&He[0]!="")&&He.pop(),ie&&ht==Pe.length&&He.push("")):(He.push(Jt),ie=!0)}ie=He.join("/")}else ie=Pe}return B?T.h=ie:B=y.i.toString()!=="",B?gs(T,Lo(y.i)):B=!!y.m,B&&(T.m=y.m),T};function Nr(y){return new hi(y)}function pn(y,T,B){y.j=B?Dr(T,!0):T,y.j&&(y.j=y.j.replace(/:$/,""))}function ga(y,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);y.u=T}else y.u=null}function gs(y,T,B){T instanceof ya?(y.i=T,Bi(y.i,y.l)):(B||(T=hr(T,_i)),y.i=new ya(T,y.l))}function Sn(y,T,B){y.i.set(T,B)}function Da(y){return Sn(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function Dr(y,T){return y?T?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function hr(y,T,B){return typeof y=="string"?(y=encodeURI(y).replace(T,Ar),B&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Ar(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var no=/[#\/\?@]/g,lc=/[#\?:]/g,gl=/[#\?]/g,_i=/[#\?@]/g,yl=/#/g;function ya(y,T){this.h=this.g=null,this.i=y||null,this.j=!!T}function ei(y){y.g||(y.g=new Map,y.h=0,y.i&&Zi(y.i,function(T,B){y.add(decodeURIComponent(T.replace(/\+/g," ")),B)}))}n=ya.prototype,n.add=function(y,T){ei(this),this.i=null,y=va(this,y);let B=this.g.get(y);return B||this.g.set(y,B=[]),B.push(T),this.h+=1,this};function ka(y,T){ei(y),T=va(y,T),y.g.has(T)&&(y.i=null,y.h-=y.g.get(T).length,y.g.delete(T))}function vl(y,T){return ei(y),T=va(y,T),y.g.has(T)}n.forEach=function(y,T){ei(this),this.g.forEach(function(B,ie){B.forEach(function(Pe){y.call(T,Pe,ie,this)},this)},this)};function bl(y,T){ei(y);let B=[];if(typeof T=="string")vl(y,T)&&(B=B.concat(y.g.get(va(y,T))));else for(y=Array.from(y.g.values()),T=0;T<y.length;T++)B=B.concat(y[T]);return B}n.set=function(y,T){return ei(this),this.i=null,y=va(this,y),vl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[T]),this.h+=1,this},n.get=function(y,T){return y?(y=bl(this,y),y.length>0?String(y[0]):T):T};function ko(y,T,B){ka(y,T),B.length>0&&(y.i=null,y.g.set(va(y,T),w(B)),y.h+=B.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],T=Array.from(this.g.keys());for(let ie=0;ie<T.length;ie++){var B=T[ie];const Pe=rr(B);B=bl(this,B);for(let He=0;He<B.length;He++){let ht=Pe;B[He]!==""&&(ht+="="+rr(B[He])),y.push(ht)}}return this.i=y.join("&")};function Lo(y){const T=new ya;return T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),T}function va(y,T){return T=String(T),y.j&&(T=T.toLowerCase()),T}function Bi(y,T){T&&!y.j&&(ei(y),y.i=null,y.g.forEach(function(B,ie){const Pe=ie.toLowerCase();ie!=Pe&&(ka(this,ie),ko(this,Pe,B))},y)),y.j=T}function Is(y,T){const B=new wi;if(u.Image){const ie=new Image;ie.onload=m(Vi,B,"TestLoadImage: loaded",!0,T,ie),ie.onerror=m(Vi,B,"TestLoadImage: error",!1,T,ie),ie.onabort=m(Vi,B,"TestLoadImage: abort",!1,T,ie),ie.ontimeout=m(Vi,B,"TestLoadImage: timeout",!1,T,ie),u.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=y}else T(!1)}function ba(y,T){const B=new wi,ie=new AbortController,Pe=setTimeout(()=>{ie.abort(),Vi(B,"TestPingServer: timeout",!1,T)},1e4);fetch(y,{signal:ie.signal}).then(He=>{clearTimeout(Pe),He.ok?Vi(B,"TestPingServer: ok",!0,T):Vi(B,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(Pe),Vi(B,"TestPingServer: error",!1,T)})}function Vi(y,T,B,ie,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),ie(B)}catch{}}function La(){this.g=new pt}function Vt(y){this.i=y.Sb||null,this.h=y.ab||!1}x(Vt,mt),Vt.prototype.g=function(){return new ro(this.i,this.h)};function ro(y,T){Ce.call(this),this.H=y,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}x(ro,Ce),n=ro.prototype,n.open=function(y,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=T,this.readyState=1,ti(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(T.body=y),(this.H||u).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pa(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ti(this)),this.g&&(this.readyState=3,ti(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Po(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Po(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var T=y.value?y.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!y.done}))&&(this.response=this.responseText+=T)}y.done?Pa(this):ti(this),this.readyState==3&&Po(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Pa(this))},n.Na=function(y){this.g&&(this.response=y,Pa(this))},n.ga=function(){this.g&&Pa(this)};function Pa(y){y.readyState=4,y.l=null,y.j=null,y.B=null,ti(y)}n.setRequestHeader=function(y,T){this.A.append(y,T)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],T=this.h.entries();for(var B=T.next();!B.done;)B=B.value,y.push(B[0]+": "+B[1]),B=T.next();return y.join(`\r
`)};function ti(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(ro.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function zr(y){let T="";return ge(y,function(B,ie){T+=ie,T+=":",T+=B,T+=`\r
`}),T}function io(y,T,B){e:{for(ie in B){var ie=!1;break e}ie=!0}ie||(B=zr(B),typeof y=="string"?B!=null&&rr(B):Sn(y,T,B))}function Bn(y){Ce.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}x(Bn,Ce);var es=/^https?$/i,so=["POST","PUT"];n=Bn.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,T,B,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);T=T?T.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mi.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(T,String(y),!0),this.B=!1}catch(He){Ds(this,He);return}if(y=B||"",B=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Pe in ie)B.set(Pe,ie[Pe]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const He of ie.keys())B.set(He,ie.get(He));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(B.keys()).find(He=>He.toLowerCase()=="content-type"),Pe=u.FormData&&y instanceof u.FormData,!(Array.prototype.indexOf.call(so,T,void 0)>=0)||ie||Pe||B.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[He,ht]of B)this.g.setRequestHeader(He,ht);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(He){Ds(this,He)}};function Ds(y,T){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=T,y.o=5,wl(y),wa(y)}function wl(y){y.A||(y.A=!0,Ze(y,"complete"),Ze(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Ze(this,"complete"),Ze(this,"abort"),wa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wa(this,!0)),Bn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ts(this):this.Xa())},n.Xa=function(){ts(this)};function ts(y){if(y.h&&typeof o<"u"){if(y.v&&ns(y)==4)setTimeout(y.Ca.bind(y),0);else if(Ze(y,"readystatechange"),ns(y)==4){y.h=!1;try{const He=y.ca();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var B;if(!(B=T)){var ie;if(ie=He===0){let ht=String(y.D).match(ml)[1]||null;!ht&&u.self&&u.self.location&&(ht=u.self.location.protocol.slice(0,-1)),ie=!es.test(ht?ht.toLowerCase():"")}B=ie}if(B)Ze(y,"complete"),Ze(y,"success");else{y.o=6;try{var Pe=ns(y)>2?y.g.statusText:""}catch{Pe=""}y.l=Pe+" ["+y.ca()+"]",wl(y)}}finally{wa(y)}}}}function wa(y,T){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const B=y.g;y.g=null,T||Ze(y,"ready");try{B.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ns(y){return y.g?y.g.readyState:0}n.ca=function(){try{return ns(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var T=this.g.responseText;return y&&T.indexOf(y)==0&&(T=T.substring(y.length)),We(T)}};function kr(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(y){const T={};y=(y.g&&ns(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<y.length;ie++){if(M(y[ie]))continue;var B=Br(y[ie]);const Pe=B[0];if(B=B[1],typeof B!="string")continue;B=B.trim();const He=T[Pe]||[];T[Pe]=He,He.push(B)}we(T,function(ie){return ie.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fi(y,T,B){return B&&B.internalChannelParams&&B.internalChannelParams[y]||T}function Hs(y){this.za=0,this.i=[],this.j=new wi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fi("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fi("baseRetryDelayMs",5e3,y),this.Za=fi("retryDelaySeedMs",1e4,y),this.Ta=fi("forwardChannelMaxRetries",2,y),this.va=fi("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Ro(y&&y.concurrentRequestLimit),this.Ba=new La,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Hs.prototype,n.ka=8,n.I=1,n.connect=function(y,T,B,ie){Dt(0),this.W=y,this.H=T||{},B&&ie!==void 0&&(this.H.OSID=B,this.H.OAID=ie),this.F=this.X,this.J=st(this,null,this.W),ys(this)};function Ma(y){if($s(y),y.I==3){var T=y.V++,B=Nr(y.J);if(Sn(B,"SID",y.M),Sn(B,"RID",T),Sn(B,"TYPE","terminate"),rs(y,B),T=new xi(y,y.j,T),T.M=2,T.A=Da(Nr(B)),B=!1,u.navigator&&u.navigator.sendBeacon)try{B=u.navigator.sendBeacon(T.A.toString(),"")}catch{}!B&&u.Image&&(new Image().src=T.A,B=!0),B||(T.g=Et(T.j,null),T.g.ea(T.A)),T.F=Date.now(),Fi(T)}Qe(y)}function Gs(y){y.g&&(Oo(y),y.g.cancel(),y.g=null)}function $s(y){Gs(y),y.v&&(u.clearTimeout(y.v),y.v=null),$(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&u.clearTimeout(y.m),y.m=null)}function ys(y){if(!Ui(y.h)&&!y.m){y.m=!0;var T=y.Ea;ce||I(),se||(ce(),se=!0),U.add(T,y),y.D=0}}function ao(y,T){return ms(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=T.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=cn(p(y.Ea,y,T),xe(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const Pe=new xi(this,this.j,y);let He=this.o;if(this.U&&(He?(He=Q(He),Y(He,this.U)):He=this.U),this.u!==null||this.R||(Pe.J=He,He=null),this.S)e:{for(var T=0,B=0;B<this.i.length;B++){t:{var ie=this.i[B];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(T+=ie,T>4096){T=B;break e}if(T===4096||B===this.i.length-1){T=B+1;break e}}T=1e3}else T=1e3;T=Ws(this,Pe,T),B=Nr(this.J),Sn(B,"RID",y),Sn(B,"CVER",22),this.G&&Sn(B,"X-HTTP-Session-Id",this.G),rs(this,B),He&&(this.R?T="headers="+rr(zr(He))+"&"+T:this.u&&io(B,this.u,He)),to(this.h,Pe),this.Ra&&Sn(B,"TYPE","init"),this.S?(Sn(B,"$req",T),Sn(B,"SID","null"),Pe.U=!0,Vr(Pe,B,null)):Vr(Pe,B,T),this.I=2}}else this.I==3&&(y?Mo(this,y):this.i.length==0||Ui(this.h)||Mo(this))};function Mo(y,T){var B;T?B=T.l:B=y.V++;const ie=Nr(y.J);Sn(ie,"SID",y.M),Sn(ie,"RID",B),Sn(ie,"AID",y.K),rs(y,ie),y.u&&y.o&&io(ie,y.u,y.o),B=new xi(y,y.j,B,y.D+1),y.u===null&&(B.J=y.o),T&&(y.i=T.G.concat(y.i)),T=Ws(y,B,1e3),B.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),to(y.h,B),Vr(B,ie,T)}function rs(y,T){y.H&&ge(y.H,function(B,ie){Sn(T,ie,B)}),y.l&&ge({},function(B,ie){Sn(T,ie,B)})}function Ws(y,T,B){B=Math.min(y.i.length,B);const ie=y.l?p(y.l.Ka,y.l,y):null;e:{var Pe=y.i;let Jt=-1;for(;;){const sr=["count="+B];Jt==-1?B>0?(Jt=Pe[0].g,sr.push("ofs="+Jt)):Jt=0:sr.push("ofs="+Jt);let hn=!0;for(let Vn=0;Vn<B;Vn++){var He=Pe[Vn].g;const pi=Pe[Vn].map;if(He-=Jt,He<0)Jt=Math.max(0,Pe[Vn].g-100),hn=!1;else try{He="req"+He+"_"||"";try{var ht=pi instanceof Map?pi:Object.entries(pi);for(const[Ei,Jn]of ht){let Ni=Jn;d(Jn)&&(Ni=De(Jn)),sr.push(He+Ei+"="+encodeURIComponent(Ni))}}catch(Ei){throw sr.push(He+"type="+encodeURIComponent("_badmap")),Ei}}catch{ie&&ie(pi)}}if(hn){ht=sr.join("&");break e}}ht=void 0}return y=y.i.splice(0,B),T.G=y,ht}function xl(y){if(!y.g&&!y.v){y.Y=1;var T=y.Da;ce||I(),se||(ce(),se=!0),U.add(T,y),y.A=0}}function ks(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=cn(p(y.Da,y),xe(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=cn(p(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),Gs(this),_(this))};function Oo(y){y.B!=null&&(u.clearTimeout(y.B),y.B=null)}function _(y){y.g=new xi(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var T=Nr(y.na);Sn(T,"RID","rpc"),Sn(T,"SID",y.M),Sn(T,"AID",y.K),Sn(T,"CI",y.F?"0":"1"),!y.F&&y.ia&&Sn(T,"TO",y.ia),Sn(T,"TYPE","xmlhttp"),rs(y,T),y.u&&y.o&&io(T,y.u,y.o),y.O&&(y.g.H=y.O);var B=y.g;y=y.ba,B.M=1,B.A=Da(Nr(T)),B.u=null,B.R=!0,Oi(B,y)}n.Va=function(){this.C!=null&&(this.C=null,Gs(this),ks(this),Dt(19))};function $(y){y.C!=null&&(u.clearTimeout(y.C),y.C=null)}function de(y,T){var B=null;if(y.g==T){$(y),Oo(y),y.g=null;var ie=2}else if(Rs(y.h,T))B=T.G,Io(y.h,T),ie=1;else return;if(y.I!=0){if(T.o)if(ie==1){B=T.u?T.u.length:0,T=Date.now()-T.F;var Pe=y.D;ie=dn(),Ze(ie,new Lt(ie,B)),ys(y)}else xl(y);else if(Pe=T.m,Pe==3||Pe==0&&T.X>0||!(ie==1&&ao(y,T)||ie==2&&ks(y)))switch(B&&B.length>0&&(T=y.h,T.i=T.i.concat(B)),Pe){case 1:Re(y,5);break;case 4:Re(y,10);break;case 3:Re(y,6);break;default:Re(y,2)}}}function xe(y,T){let B=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(B*=2),B*T}function Re(y,T){if(y.j.info("Error code "+T),T==2){var B=p(y.bb,y),ie=y.Ua;const Pe=!ie;ie=new hi(ie||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||pn(ie,"https"),Da(ie),Pe?Is(ie.toString(),B):ba(ie.toString(),B)}else Dt(2);y.I=0,y.l&&y.l.pa(T),Qe(y),$s(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Qe(y){if(y.I=0,y.ja=[],y.l){const T=Do(y.h);(T.length!=0||y.i.length!=0)&&(A(y.ja,T),A(y.ja,y.i),y.h.i.length=0,w(y.i),y.i.length=0),y.l.oa()}}function st(y,T,B){var ie=B instanceof hi?Nr(B):new hi(B);if(ie.g!="")T&&(ie.g=T+"."+ie.g),ga(ie,ie.u);else{var Pe=u.location;ie=Pe.protocol,T=T?T+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;const He=new hi(null);ie&&pn(He,ie),T&&(He.g=T),Pe&&ga(He,Pe),B&&(He.h=B),ie=He}return B=y.G,T=y.wa,B&&T&&Sn(ie,B,T),Sn(ie,"VER",y.ka),rs(y,ie),ie}function Et(y,T,B){if(T&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=y.Aa&&!y.ma?new Bn(new Vt({ab:B})):new Bn(y.ma),T.Fa(y.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jt(){}n=jt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ht(){}Ht.prototype.g=function(y,T){return new Ut(y,T)};function Ut(y,T){Ce.call(this),this.g=new Hs(T),this.l=y,this.h=T&&T.messageUrlParams||null,y=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(y?y["X-WebChannel-Content-Type"]=T.messageContentType:y={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(y?y["X-WebChannel-Client-Profile"]=T.sa:y={"X-WebChannel-Client-Profile":T.sa}),this.g.U=y,(y=T&&T.Qb)&&!M(y)&&(this.g.u=y),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!M(T)&&(this.g.G=T,y=this.h,y!==null&&T in y&&(y=this.h,T in y&&delete y[T])),this.j=new Kn(this)}x(Ut,Ce),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Ma(this.g)},Ut.prototype.o=function(y){var T=this.g;if(typeof y=="string"){var B={};B.__data__=y,y=B}else this.v&&(B={},B.__data__=De(y),y=B);T.i.push(new yr(T.Ya++,y)),T.I==3&&ys(T)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Ma(this.g),delete this.g,Ut.Z.N.call(this)};function gn(y){bt.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var T=y.__sm__;if(T){e:{for(const B in T){y=B;break e}y=void 0}(this.i=y)&&(y=this.i,T=T!==null&&y in T?T[y]:void 0),this.data=T}else this.data=y}x(gn,bt);function ir(){wt.call(this),this.status=1}x(ir,wt);function Kn(y){this.g=y}x(Kn,jt),Kn.prototype.ra=function(){Ze(this.g,"a")},Kn.prototype.qa=function(y){Ze(this.g,new gn(y))},Kn.prototype.pa=function(y){Ze(this.g,new ir)},Kn.prototype.oa=function(){Ze(this.g,"b")},Ht.prototype.createWebChannel=Ht.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,hE=function(){return new Ht},dE=function(){return dn()},uE=qt,r1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xi.NO_ERROR=0,Xi.TIMEOUT=8,Xi.HTTP_ERROR=6,vm=Xi,Pi.COMPLETE="complete",cE=Pi,ft.EventType=ct,ct.OPEN="a",ct.CLOSE="b",ct.ERROR="c",ct.MESSAGE="d",Ce.prototype.listen=Ce.prototype.J,df=ft,Bn.prototype.listenOnce=Bn.prototype.K,Bn.prototype.getLastError=Bn.prototype.Ha,Bn.prototype.getLastErrorCode=Bn.prototype.ya,Bn.prototype.getStatus=Bn.prototype.ca,Bn.prototype.getResponseJson=Bn.prototype.La,Bn.prototype.getResponseText=Bn.prototype.la,Bn.prototype.send=Bn.prototype.ea,Bn.prototype.setWithCredentials=Bn.prototype.Fa,lE=Bn}).apply(typeof Xp<"u"?Xp:typeof self<"u"?self:typeof window<"u"?window:{});const pw="@firebase/firestore",mw="4.9.2";class As{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let fh="12.3.0";const $u=new W1("@firebase/firestore");function Bd(){return $u.logLevel}function Nt(n,...e){if($u.logLevel<=Nn.DEBUG){const t=e.map(ov);$u.debug(`Firestore (${fh}): ${n}`,...t)}}function ec(n,...e){if($u.logLevel<=Nn.ERROR){const t=e.map(ov);$u.error(`Firestore (${fh}): ${n}`,...t)}}function ih(n,...e){if($u.logLevel<=Nn.WARN){const t=e.map(ov);$u.warn(`Firestore (${fh}): ${n}`,...t)}}function ov(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Qt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,fE(n,r,t)}function fE(n,e,t){let r=`FIRESTORE (${fh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ec(r),new Error(r)}function Xn(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||fE(e,s,r)}function on(n,e){return n}const lt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class kt extends hl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class pE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(As.UNAUTHENTICATED)))}shutdown(){}}class XR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class QR{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Xn(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let o=new Xl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xl,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},d=f=>{Nt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Nt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xl)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Nt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xn(typeof r.accessToken=="string",31837,{l:r}),new pE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xn(e===null||typeof e=="string",2055,{h:e}),new As(e)}}class JR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=As.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new JR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(As.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ua(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Xn(this.o===void 0,3512);const r=o=>{o.error!=null&&Nt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Nt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{Nt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Nt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Xn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gw(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class lv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=tI(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Tn(n,e){return n<e?-1:n>e?1:0}function i1(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return uy(s)===uy(o)?Tn(s,o):uy(s)?1:-1}return Tn(n.length,e.length)}const nI=55296,rI=57343;function uy(n){const e=n.charCodeAt(0);return e>=nI&&e<=rI}function sh(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}const yw="__name__";class el{constructor(e,t,r){t===void 0?t=0:t>e.length&&Qt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Qt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return el.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof el?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=el.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Tn(e.length,t.length)}static compareSegments(e,t){const r=el.isNumericId(e),s=el.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?el.extractNumericId(e).compare(el.extractNumericId(t)):i1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kc.fromString(e.substring(4,e.length-2))}}class Sr extends el{construct(e,t,r){return new Sr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new kt(lt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Sr(t)}static emptyPath(){return new Sr([])}}const iI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ds extends el{construct(e,t,r){return new ds(e,t,r)}static isValidIdentifier(e){return iI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ds.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yw}static keyField(){return new ds([yw])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new kt(lt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new kt(lt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new kt(lt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else d==="`"?(u=!u,s++):d!=="."||u?(r+=d,s++):(o(),s++)}if(o(),u)throw new kt(lt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ds(t)}static emptyPath(){return new ds([])}}class Wt{constructor(e){this.path=e}static fromPath(e){return new Wt(Sr.fromString(e))}static fromName(e){return new Wt(Sr.fromString(e).popFirst(5))}static empty(){return new Wt(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wt(new Sr(e.slice()))}}function mE(n,e,t){if(!t)throw new kt(lt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function sI(n,e,t,r){if(e===!0&&r===!0)throw new kt(lt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vw(n){if(!Wt.isDocumentKey(n))throw new kt(lt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bw(n){if(Wt.isDocumentKey(n))throw new kt(lt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qt(12329,{type:typeof n})}function ha(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new kt(lt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cv(n);throw new kt(lt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function bi(n,e){const t={typeString:n};return e&&(t.value=e),t}function Yf(n,e){if(!gE(n))throw new kt(lt.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(s&&typeof u!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new kt(lt.INVALID_ARGUMENT,t);return!0}const ww=-62135596800,xw=1e6;class an{static now(){return an.fromMillis(Date.now())}static fromDate(e){return an.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*xw);return new an(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new kt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new kt(lt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ww)throw new kt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new kt(lt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xw}_compareTo(e){return this.seconds===e.seconds?Tn(this.nanoseconds,e.nanoseconds):Tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:an._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yf(e,an._jsonSchema))return new an(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ww;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}an._jsonSchemaVersion="firestore/timestamp/1.0",an._jsonSchema={type:bi("string",an._jsonSchemaVersion),seconds:bi("number"),nanoseconds:bi("number")};class tn{static fromTimestamp(e){return new tn(e)}static min(){return new tn(new an(0,0))}static max(){return new tn(new an(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Rf=-1;function aI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=tn.fromTimestamp(r===1e9?new an(t+1,0):new an(t,r));return new Zc(s,Wt.empty(),e)}function oI(n){return new Zc(n.readTime,n.key,Rf)}class Zc{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zc(tn.min(),Wt.empty(),Rf)}static max(){return new Zc(tn.max(),Wt.empty(),Rf)}}function lI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Wt.comparator(n.documentKey,e.documentKey),t!==0?t:Tn(n.largestBatchId,e.largestBatchId))}const cI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ph(n){if(n.code!==lt.FAILED_PRECONDITION||n.message!==cI)throw n;Nt("LocalStore","Unexpectedly lost primary lease")}class at{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new at(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof at?t:at.resolve(t)}catch(t){return at.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):at.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):at.reject(t)}static resolve(e){return new at(((t,r)=>{t(e)}))}static reject(e){return new at(((t,r)=>{r(e)}))}static waitFor(e){return new at(((t,r)=>{let s=0,o=0,u=!1;e.forEach((d=>{++s,d.next((()=>{++o,u&&o===s&&t()}),(f=>r(f)))})),u=!0,o===s&&t()}))}static or(e){let t=at.resolve(!1);for(const r of e)t=t.next((s=>s?at.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new at(((r,s)=>{const o=e.length,u=new Array(o);let d=0;for(let f=0;f<o;f++){const p=f;t(e[p]).next((m=>{u[p]=m,++d,d===o&&r(u)}),(m=>s(m)))}}))}static doWhile(e,t){return new at(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function dI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mh(n){return n.name==="IndexedDbTransactionError"}class fg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}fg.ce=-1;const uv=-1;function pg(n){return n==null}function Bm(n){return n===0&&1/n==-1/0}function hI(n){return typeof n=="number"&&Number.isInteger(n)&&!Bm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yE="";function fI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sw(e)),e=pI(n.get(t),e);return Sw(e)}function pI(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case yE:t+="";break;default:t+=o}}return t}function Sw(n){return n+yE+""}function _w(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Ur{constructor(e,t){this.comparator=e,this.root=t||us.EMPTY}insert(e,t){return new Ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,us.BLACK,null,null))}remove(e){return new Ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qp(this.root,e,this.comparator,!0)}}class Qp{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class us{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??us.RED,this.left=s??us.EMPTY,this.right=o??us.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new us(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return us.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return us.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,us.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,us.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qt(27949);return e+(this.isRed()?0:1)}}us.EMPTY=null,us.RED=!0,us.BLACK=!1;us.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt(57766)}get value(){throw Qt(16141)}get color(){throw Qt(16727)}get left(){throw Qt(29726)}get right(){throw Qt(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new us(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Li{constructor(e){this.comparator=e,this.data=new Ur(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ew(this.data.getIterator())}getIteratorFrom(e){return new Ew(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Li)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Li(this.comparator);return t.data=e,t}}class Ew{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class ja{constructor(e){this.fields=e,e.sort(ds.comparator)}static empty(){return new ja([])}unionWith(e){let t=new Li(ds.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ja(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sh(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class bE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new bE("Invalid base64 string: "+o):o}})(e);return new hs(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o})(e);return new hs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hs.EMPTY_BYTE_STRING=new hs("");const mI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eu(n){if(Xn(!!n,39018),typeof n=="string"){let e=0;const t=mI.exec(n);if(Xn(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ii(n.seconds),nanos:ii(n.nanos)}}function ii(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function tu(n){return typeof n=="string"?hs.fromBase64String(n):hs.fromUint8Array(n)}const wE="server_timestamp",xE="__type__",SE="__previous_value__",_E="__local_write_time__";function dv(n){return(n?.mapValue?.fields||{})[xE]?.stringValue===wE}function mg(n){const e=n.mapValue.fields[SE];return dv(e)?mg(e):e}function If(n){const e=eu(n.mapValue.fields[_E].timestampValue);return new an(e.seconds,e.nanos)}class gI{constructor(e,t,r,s,o,u,d,f,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=m}}const Vm="(default)";class Df{constructor(e,t){this.projectId=e,this.database=t||Vm}static empty(){return new Df("","")}get isDefaultDatabase(){return this.database===Vm}isEqual(e){return e instanceof Df&&e.projectId===this.projectId&&e.database===this.database}}const EE="__type__",yI="__max__",Jp={mapValue:{}},NE="__vector__",zm="value";function nu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dv(n)?4:bI(n)?9007199254740991:vI(n)?10:11:Qt(28295,{value:n})}function cl(n,e){if(n===e)return!0;const t=nu(n);if(t!==nu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return If(n).isEqual(If(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=eu(s.timestampValue),d=eu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return tu(s.bytesValue).isEqual(tu(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return ii(s.geoPointValue.latitude)===ii(o.geoPointValue.latitude)&&ii(s.geoPointValue.longitude)===ii(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return ii(s.integerValue)===ii(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=ii(s.doubleValue),d=ii(o.doubleValue);return u===d?Bm(u)===Bm(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return sh(n.arrayValue.values||[],e.arrayValue.values||[],cl);case 10:case 11:return(function(s,o){const u=s.mapValue.fields||{},d=o.mapValue.fields||{};if(_w(u)!==_w(d))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(d[f]===void 0||!cl(u[f],d[f])))return!1;return!0})(n,e);default:return Qt(52216,{left:n})}}function kf(n,e){return(n.values||[]).find((t=>cl(t,e)))!==void 0}function ah(n,e){if(n===e)return 0;const t=nu(n),r=nu(e);if(t!==r)return Tn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tn(n.booleanValue,e.booleanValue);case 2:return(function(o,u){const d=ii(o.integerValue||o.doubleValue),f=ii(u.integerValue||u.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return Nw(n.timestampValue,e.timestampValue);case 4:return Nw(If(n),If(e));case 5:return i1(n.stringValue,e.stringValue);case 6:return(function(o,u){const d=tu(o),f=tu(u);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,u){const d=o.split("/"),f=u.split("/");for(let p=0;p<d.length&&p<f.length;p++){const m=Tn(d[p],f[p]);if(m!==0)return m}return Tn(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,u){const d=Tn(ii(o.latitude),ii(u.latitude));return d!==0?d:Tn(ii(o.longitude),ii(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Aw(n.arrayValue,e.arrayValue);case 10:return(function(o,u){const d=o.fields||{},f=u.fields||{},p=d[zm]?.arrayValue,m=f[zm]?.arrayValue,x=Tn(p?.values?.length||0,m?.values?.length||0);return x!==0?x:Aw(p,m)})(n.mapValue,e.mapValue);case 11:return(function(o,u){if(o===Jp.mapValue&&u===Jp.mapValue)return 0;if(o===Jp.mapValue)return 1;if(u===Jp.mapValue)return-1;const d=o.fields||{},f=Object.keys(d),p=u.fields||{},m=Object.keys(p);f.sort(),m.sort();for(let x=0;x<f.length&&x<m.length;++x){const E=i1(f[x],m[x]);if(E!==0)return E;const w=ah(d[f[x]],p[m[x]]);if(w!==0)return w}return Tn(f.length,m.length)})(n.mapValue,e.mapValue);default:throw Qt(23264,{he:t})}}function Nw(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Tn(n,e);const t=eu(n),r=eu(e),s=Tn(t.seconds,r.seconds);return s!==0?s:Tn(t.nanos,r.nanos)}function Aw(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=ah(t[s],r[s]);if(o)return o}return Tn(t.length,r.length)}function oh(n){return s1(n)}function s1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=eu(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return tu(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Wt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=s1(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${s1(t.fields[u])}`;return s+"}"})(n.mapValue):Qt(61005,{value:n})}function bm(n){switch(nu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mg(n);return e?16+bm(e):16;case 5:return 2*n.stringValue.length;case 6:return tu(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+bm(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return cu(r.fields,((o,u)=>{s+=o.length+bm(u)})),s})(n.mapValue);default:throw Qt(13486,{value:n})}}function a1(n){return!!n&&"integerValue"in n}function hv(n){return!!n&&"arrayValue"in n}function Tw(n){return!!n&&"nullValue"in n}function Cw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wm(n){return!!n&&"mapValue"in n}function vI(n){return(n?.mapValue?.fields||{})[EE]?.stringValue===NE}function yf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return cu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=yf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yf(n.arrayValue.values[t]);return e}return{...n}}function bI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===yI}class da{constructor(e){this.value=e}static empty(){return new da({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yf(t)}setAll(e){let t=ds.emptyPath(),r={},s=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=d.popLast()}u?r[d.lastSegment()]=yf(u):s.push(d.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return cl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];wm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){cu(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new da(yf(this.value))}}function AE(n){const e=[];return cu(n.fields,((t,r)=>{const s=new ds([t]);if(wm(r)){const o=AE(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)})),new ja(e)}class Ts{constructor(e,t,r,s,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new Ts(e,0,tn.min(),tn.min(),tn.min(),da.empty(),0)}static newFoundDocument(e,t,r,s){return new Ts(e,1,t,tn.min(),r,s,0)}static newNoDocument(e,t){return new Ts(e,2,t,tn.min(),tn.min(),da.empty(),0)}static newUnknownDocument(e,t){return new Ts(e,3,t,tn.min(),tn.min(),da.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=da.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=da.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ts&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ts(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qm{constructor(e,t){this.position=e,this.inclusive=t}}function jw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],u=n.position[s];if(o.field.isKeyField()?r=Wt.comparator(Wt.fromName(u.referenceValue),t.key):r=ah(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Rw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!cl(n.position[t],e.position[t]))return!1;return!0}class Hm{constructor(e,t="asc"){this.field=e,this.dir=t}}function wI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class TE{}class ki extends TE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new SI(e,t,r):t==="array-contains"?new NI(e,r):t==="in"?new AI(e,r):t==="not-in"?new TI(e,r):t==="array-contains-any"?new CI(e,r):new ki(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new _I(e,r):new EI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ah(t,this.value)):t!==null&&nu(this.value)===nu(t)&&this.matchesComparison(ah(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ul extends TE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ul(e,t)}matches(e){return CE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function CE(n){return n.op==="and"}function jE(n){return xI(n)&&CE(n)}function xI(n){for(const e of n.filters)if(e instanceof ul)return!1;return!0}function o1(n){if(n instanceof ki)return n.field.canonicalString()+n.op.toString()+oh(n.value);if(jE(n))return n.filters.map((e=>o1(e))).join(",");{const e=n.filters.map((t=>o1(t))).join(",");return`${n.op}(${e})`}}function RE(n,e){return n instanceof ki?(function(r,s){return s instanceof ki&&r.op===s.op&&r.field.isEqual(s.field)&&cl(r.value,s.value)})(n,e):n instanceof ul?(function(r,s){return s instanceof ul&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,u,d)=>o&&RE(u,s.filters[d])),!0):!1})(n,e):void Qt(19439)}function IE(n){return n instanceof ki?(function(t){return`${t.field.canonicalString()} ${t.op} ${oh(t.value)}`})(n):n instanceof ul?(function(t){return t.op.toString()+" {"+t.getFilters().map(IE).join(" ,")+"}"})(n):"Filter"}class SI extends ki{constructor(e,t,r){super(e,t,r),this.key=Wt.fromName(r.referenceValue)}matches(e){const t=Wt.comparator(e.key,this.key);return this.matchesComparison(t)}}class _I extends ki{constructor(e,t){super(e,"in",t),this.keys=DE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EI extends ki{constructor(e,t){super(e,"not-in",t),this.keys=DE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function DE(n,e){return(e.arrayValue?.values||[]).map((t=>Wt.fromName(t.referenceValue)))}class NI extends ki{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hv(t)&&kf(t.arrayValue,this.value)}}class AI extends ki{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kf(this.value.arrayValue,t)}}class TI extends ki{constructor(e,t){super(e,"not-in",t)}matches(e){if(kf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kf(this.value.arrayValue,t)}}class CI extends ki{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>kf(this.value.arrayValue,r)))}}class jI{constructor(e,t=null,r=[],s=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=d,this.Te=null}}function Iw(n,e=null,t=[],r=[],s=null,o=null,u=null){return new jI(n,e,t,r,s,o,u)}function fv(n){const e=on(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>o1(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),pg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>oh(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>oh(r))).join(",")),e.Te=t}return e.Te}function pv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!wI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!RE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rw(n.startAt,e.startAt)&&Rw(n.endAt,e.endAt)}function l1(n){return Wt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class gg{constructor(e,t=null,r=[],s=[],o=null,u="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RI(n,e,t,r,s,o,u,d){return new gg(n,e,t,r,s,o,u,d)}function yg(n){return new gg(n)}function Dw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function II(n){return n.collectionGroup!==null}function vf(n){const e=on(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Li(ds.comparator);return u.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Hm(o,r))})),t.has(ds.keyField().canonicalString())||e.Ie.push(new Hm(ds.keyField(),r))}return e.Ie}function sl(n){const e=on(n);return e.Ee||(e.Ee=DI(e,vf(n))),e.Ee}function DI(n,e){if(n.limitType==="F")return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Hm(s.field,o)}));const t=n.endAt?new qm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new qm(n.startAt.position,n.startAt.inclusive):null;return Iw(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function c1(n,e,t){return new gg(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vg(n,e){return pv(sl(n),sl(e))&&n.limitType===e.limitType}function kE(n){return`${fv(sl(n))}|lt:${n.limitType}`}function Vd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>IE(s))).join(", ")}]`),pg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>oh(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>oh(s))).join(",")),`Target(${r})`})(sl(n))}; limitType=${n.limitType})`}function bg(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Wt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of vf(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(u,d,f){const p=jw(u,d,f);return u.inclusive?p<=0:p<0})(r.startAt,vf(r),s)||r.endAt&&!(function(u,d,f){const p=jw(u,d,f);return u.inclusive?p>=0:p>0})(r.endAt,vf(r),s))})(n,e)}function kI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LE(n){return(e,t)=>{let r=!1;for(const s of vf(n)){const o=LI(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function LI(n,e,t){const r=n.field.isKeyField()?Wt.comparator(e.key,t.key):(function(o,u,d){const f=u.data.field(o),p=d.data.field(o);return f!==null&&p!==null?ah(f,p):Qt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qt(19790,{direction:n.dir})}}class Ju{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return vE(this.inner)}size(){return this.innerSize}}const PI=new Ur(Wt.comparator);function tc(){return PI}const PE=new Ur(Wt.comparator);function hf(...n){let e=PE;for(const t of n)e=e.insert(t.key,t);return e}function ME(n){let e=PE;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Pu(){return bf()}function OE(){return bf()}function bf(){return new Ju((n=>n.toString()),((n,e)=>n.isEqual(e)))}const MI=new Ur(Wt.comparator),OI=new Li(Wt.comparator);function Cn(...n){let e=OI;for(const t of n)e=e.add(t);return e}const FI=new Li(Tn);function UI(){return FI}function mv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bm(e)?"-0":e}}function FE(n){return{integerValue:""+n}}function BI(n,e){return hI(e)?FE(e):mv(n,e)}class wg{constructor(){this._=void 0}}function VI(n,e,t){return n instanceof Gm?(function(s,o){const u={fields:{[xE]:{stringValue:wE},[_E]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&dv(o)&&(o=mg(o)),o&&(u.fields[SE]=o),{mapValue:u}})(t,e):n instanceof Lf?BE(n,e):n instanceof Pf?VE(n,e):(function(s,o){const u=UE(s,o),d=kw(u)+kw(s.Ae);return a1(u)&&a1(s.Ae)?FE(d):mv(s.serializer,d)})(n,e)}function zI(n,e,t){return n instanceof Lf?BE(n,e):n instanceof Pf?VE(n,e):t}function UE(n,e){return n instanceof $m?(function(r){return a1(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Gm extends wg{}class Lf extends wg{constructor(e){super(),this.elements=e}}function BE(n,e){const t=zE(e);for(const r of n.elements)t.some((s=>cl(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Pf extends wg{constructor(e){super(),this.elements=e}}function VE(n,e){let t=zE(e);for(const r of n.elements)t=t.filter((s=>!cl(s,r)));return{arrayValue:{values:t}}}class $m extends wg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kw(n){return ii(n.integerValue||n.doubleValue)}function zE(n){return hv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qI(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Lf&&s instanceof Lf||r instanceof Pf&&s instanceof Pf?sh(r.elements,s.elements,cl):r instanceof $m&&s instanceof $m?cl(r.Ae,s.Ae):r instanceof Gm&&s instanceof Gm})(n.transform,e.transform)}class HI{constructor(e,t){this.version=e,this.transformResults=t}}class Qa{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qa}static exists(e){return new Qa(void 0,e)}static updateTime(e){return new Qa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class xg{}function qE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gv(n.key,Qa.none()):new Kf(n.key,n.data,Qa.none());{const t=n.data,r=da.empty();let s=new Li(ds.comparator);for(let o of e.fields)if(!s.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new uu(n.key,r,new ja(s.toArray()),Qa.none())}}function GI(n,e,t){n instanceof Kf?(function(s,o,u){const d=s.value.clone(),f=Pw(s.fieldTransforms,o,u.transformResults);d.setAll(f),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof uu?(function(s,o,u){if(!xm(s.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Pw(s.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(HE(s)),f.setAll(d),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):(function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function wf(n,e,t,r){return n instanceof Kf?(function(o,u,d,f){if(!xm(o.precondition,u))return d;const p=o.value.clone(),m=Mw(o.fieldTransforms,f,u);return p.setAll(m),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof uu?(function(o,u,d,f){if(!xm(o.precondition,u))return d;const p=Mw(o.fieldTransforms,f,u),m=u.data;return m.setAll(HE(o)),m.setAll(p),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((x=>x.field)))})(n,e,t,r):(function(o,u,d){return xm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function $I(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=UE(r.transform,s||null);o!=null&&(t===null&&(t=da.empty()),t.set(r.field,o))}return t||null}function Lw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&sh(r,s,((o,u)=>qI(o,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Kf extends xg{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class uu extends xg{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function HE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function Pw(n,e,t){const r=new Map;Xn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const o=n[s],u=o.transform,d=e.data.field(o.field);r.set(o.field,zI(u,d,t[s]))}return r}function Mw(n,e,t){const r=new Map;for(const s of n){const o=s.transform,u=t.data.field(s.field);r.set(s.field,VI(o,u,e))}return r}class gv extends xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WI extends xg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class YI{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&GI(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=OE();return this.mutations.forEach((s=>{const o=e.get(s.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=t.has(s.key)?null:d;const f=qE(u,d);f!==null&&r.set(s.key,f),u.isValidDocument()||u.convertToNoDocument(tn.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Cn())}isEqual(e){return this.batchId===e.batchId&&sh(this.mutations,e.mutations,((t,r)=>Lw(t,r)))&&sh(this.baseMutations,e.baseMutations,((t,r)=>Lw(t,r)))}}class yv{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Xn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return MI})();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new yv(e,t,r,s)}}class KI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class XI{constructor(e,t){this.count=e,this.unchangedNames=t}}var vi,Pn;function QI(n){switch(n){case lt.OK:return Qt(64938);case lt.CANCELLED:case lt.UNKNOWN:case lt.DEADLINE_EXCEEDED:case lt.RESOURCE_EXHAUSTED:case lt.INTERNAL:case lt.UNAVAILABLE:case lt.UNAUTHENTICATED:return!1;case lt.INVALID_ARGUMENT:case lt.NOT_FOUND:case lt.ALREADY_EXISTS:case lt.PERMISSION_DENIED:case lt.FAILED_PRECONDITION:case lt.ABORTED:case lt.OUT_OF_RANGE:case lt.UNIMPLEMENTED:case lt.DATA_LOSS:return!0;default:return Qt(15467,{code:n})}}function GE(n){if(n===void 0)return ec("GRPC error has no .code"),lt.UNKNOWN;switch(n){case vi.OK:return lt.OK;case vi.CANCELLED:return lt.CANCELLED;case vi.UNKNOWN:return lt.UNKNOWN;case vi.DEADLINE_EXCEEDED:return lt.DEADLINE_EXCEEDED;case vi.RESOURCE_EXHAUSTED:return lt.RESOURCE_EXHAUSTED;case vi.INTERNAL:return lt.INTERNAL;case vi.UNAVAILABLE:return lt.UNAVAILABLE;case vi.UNAUTHENTICATED:return lt.UNAUTHENTICATED;case vi.INVALID_ARGUMENT:return lt.INVALID_ARGUMENT;case vi.NOT_FOUND:return lt.NOT_FOUND;case vi.ALREADY_EXISTS:return lt.ALREADY_EXISTS;case vi.PERMISSION_DENIED:return lt.PERMISSION_DENIED;case vi.FAILED_PRECONDITION:return lt.FAILED_PRECONDITION;case vi.ABORTED:return lt.ABORTED;case vi.OUT_OF_RANGE:return lt.OUT_OF_RANGE;case vi.UNIMPLEMENTED:return lt.UNIMPLEMENTED;case vi.DATA_LOSS:return lt.DATA_LOSS;default:return Qt(39323,{code:n})}}(Pn=vi||(vi={}))[Pn.OK=0]="OK",Pn[Pn.CANCELLED=1]="CANCELLED",Pn[Pn.UNKNOWN=2]="UNKNOWN",Pn[Pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pn[Pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pn[Pn.NOT_FOUND=5]="NOT_FOUND",Pn[Pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pn[Pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pn[Pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pn[Pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pn[Pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pn[Pn.ABORTED=10]="ABORTED",Pn[Pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pn[Pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pn[Pn.INTERNAL=13]="INTERNAL",Pn[Pn.UNAVAILABLE=14]="UNAVAILABLE",Pn[Pn.DATA_LOSS=15]="DATA_LOSS";function JI(){return new TextEncoder}const ZI=new Kc([4294967295,4294967295],0);function Ow(n){const e=JI().encode(n),t=new oE;return t.update(e),new Uint8Array(t.digest())}function Fw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Kc([t,r],0),new Kc([s,o],0)]}class vv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ff(`Invalid padding: ${t}`);if(r<0)throw new ff(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ff(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ff(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Kc.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Kc.fromNumber(r)));return s.compare(ZI)===1&&(s=new Kc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Ow(e),[r,s]=Fw(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,s,o);if(!this.we(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new vv(o,s,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=Ow(e),[r,s]=Fw(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,s,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ff extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sg{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Xf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Sg(tn.min(),s,new Ur(Tn),tc(),Cn())}}class Xf{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xf(r,t,Cn(),Cn(),Cn())}}class Sm{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class $E{constructor(e,t){this.targetId=e,this.Ce=t}}class WE{constructor(e,t,r=hs.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Uw{constructor(){this.ve=0,this.Fe=Bw(),this.Me=hs.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Cn(),t=Cn(),r=Cn();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Qt(38017,{changeType:o})}})),new Xf(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Bw()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class eD{constructor(e){this.Ge=e,this.ze=new Map,this.je=tc(),this.Je=Zp(),this.He=Zp(),this.Ye=new Ur(Tn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Qt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(l1(o))if(r===0){const u=new Wt(o.path);this.et(t,u,Ts.newNoDocument(u,tn.min()))}else Xn(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const d=this.ut(e),f=d?this.ct(d,e,u):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let u,d;try{u=tu(r).toUint8Array()}catch(f){if(f instanceof bE)return ih("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new vv(u,s,o)}catch(f){return ih(f instanceof ff?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,u)=>{const d=this.ot(u);if(d){if(o.current&&l1(d.target)){const f=new Wt(d.target.path);this.It(f).has(u)||this.Et(u,f)||this.et(u,f,Ts.newNoDocument(f,e))}o.Be&&(t.set(u,o.ke()),o.qe())}}));let r=Cn();this.He.forEach(((o,u)=>{let d=!0;u.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const s=new Sg(e,t,this.Ye,this.je,r);return this.je=tc(),this.Je=Zp(),this.He=Zp(),this.Ye=new Ur(Tn),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Uw,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Li(Tn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Li(Tn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Nt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Uw),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Zp(){return new Ur(Wt.comparator)}function Bw(){return new Ur(Wt.comparator)}const tD={asc:"ASCENDING",desc:"DESCENDING"},nD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rD={and:"AND",or:"OR"};class iD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function u1(n,e){return n.useProto3Json||pg(e)?e:{value:e}}function Wm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function sD(n,e){return Wm(n,e.toTimestamp())}function al(n){return Xn(!!n,49232),tn.fromTimestamp((function(t){const r=eu(t);return new an(r.seconds,r.nanos)})(n))}function bv(n,e){return d1(n,e).canonicalString()}function d1(n,e){const t=(function(s){return new Sr(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function KE(n){const e=Sr.fromString(n);return Xn(eN(e),10190,{key:e.toString()}),e}function h1(n,e){return bv(n.databaseId,e.path)}function dy(n,e){const t=KE(e);if(t.get(1)!==n.databaseId.projectId)throw new kt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new kt(lt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Wt(QE(t))}function XE(n,e){return bv(n.databaseId,e)}function aD(n){const e=KE(n);return e.length===4?Sr.emptyPath():QE(e)}function f1(n){return new Sr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QE(n){return Xn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Vw(n,e,t){return{name:h1(n,e),fields:t.value.mapValue.fields}}function oD(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Qt(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,m){return p.useProto3Json?(Xn(m===void 0||typeof m=="string",58123),hs.fromBase64String(m||"")):(Xn(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),hs.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const m=p.code===void 0?lt.UNKNOWN:GE(p.code);return new kt(m,p.message||"")})(u);t=new WE(r,s,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=dy(n,r.document.name),o=al(r.document.updateTime),u=r.document.createTime?al(r.document.createTime):tn.min(),d=new da({mapValue:{fields:r.document.fields}}),f=Ts.newFoundDocument(s,o,u,d),p=r.targetIds||[],m=r.removedTargetIds||[];t=new Sm(p,m,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=dy(n,r.document),o=r.readTime?al(r.readTime):tn.min(),u=Ts.newNoDocument(s,o),d=r.removedTargetIds||[];t=new Sm([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=dy(n,r.document),o=r.removedTargetIds||[];t=new Sm([],o,s,null)}else{if(!("filter"in e))return Qt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new XI(s,o),d=r.targetId;t=new $E(d,u)}}return t}function lD(n,e){let t;if(e instanceof Kf)t={update:Vw(n,e.key,e.value)};else if(e instanceof gv)t={delete:h1(n,e.key)};else if(e instanceof uu)t={update:Vw(n,e.key,e.data),updateMask:yD(e.fieldMask)};else{if(!(e instanceof WI))return Qt(16599,{Vt:e.type});t={verify:h1(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const d=u.transform;if(d instanceof Gm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Lf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Pf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $m)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Qt(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:sD(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Qt(27497)})(n,e.precondition)),t}function cD(n,e){return n&&n.length>0?(Xn(e!==void 0,14353),n.map((t=>(function(s,o){let u=s.updateTime?al(s.updateTime):al(o);return u.isEqual(tn.min())&&(u=al(o)),new HI(u,s.transformResults||[])})(t,e)))):[]}function uD(n,e){return{documents:[XE(n,e.path)]}}function dD(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=XE(n,s);const o=(function(p){if(p.length!==0)return ZE(ul.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const u=(function(p){if(p.length!==0)return p.map((m=>(function(E){return{field:zd(E.field),direction:pD(E.dir)}})(m)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=u1(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function hD(n){let e=aD(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Xn(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(x){const E=JE(x);return E instanceof ul&&jE(E)?E.getFilters():[E]})(t.where));let u=[];t.orderBy&&(u=(function(x){return x.map((E=>(function(A){return new Hm(qd(A.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(x){let E;return E=typeof x=="object"?x.value:x,pg(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(x){const E=!!x.before,w=x.values||[];return new qm(w,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(x){const E=!x.before,w=x.values||[];return new qm(w,E)})(t.endAt)),RI(e,s,u,o,d,"F",f,p)}function fD(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qt(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JE(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qd(t.unaryFilter.field);return ki.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qd(t.unaryFilter.field);return ki.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=qd(t.unaryFilter.field);return ki.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=qd(t.unaryFilter.field);return ki.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qt(61313);default:return Qt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ki.create(qd(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qt(58110);default:return Qt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ul.create(t.compositeFilter.filters.map((r=>JE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Qt(1026)}})(t.compositeFilter.op))})(n):Qt(30097,{filter:n})}function pD(n){return tD[n]}function mD(n){return nD[n]}function gD(n){return rD[n]}function zd(n){return{fieldPath:n.canonicalString()}}function qd(n){return ds.fromServerFormat(n.fieldPath)}function ZE(n){return n instanceof ki?(function(t){if(t.op==="=="){if(Cw(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NAN"}};if(Tw(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cw(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NOT_NAN"}};if(Tw(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zd(t.field),op:mD(t.op),value:t.value}}})(n):n instanceof ul?(function(t){const r=t.getFilters().map((s=>ZE(s)));return r.length===1?r[0]:{compositeFilter:{op:gD(t.op),filters:r}}})(n):Qt(54877,{filter:n})}function yD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function eN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Gc{constructor(e,t,r,s,o=tn.min(),u=tn.min(),d=hs.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Gc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vD{constructor(e){this.yt=e}}function bD(n){const e=hD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?c1(e,e.limit,"L"):e}class wD{constructor(){this.Cn=new xD}addToCollectionParentIndex(e,t){return this.Cn.add(t),at.resolve()}getCollectionParents(e,t){return at.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return at.resolve()}deleteFieldIndex(e,t){return at.resolve()}deleteAllFieldIndexes(e){return at.resolve()}createTargetIndexes(e,t){return at.resolve()}getDocumentsMatchingTarget(e,t){return at.resolve(null)}getIndexType(e,t){return at.resolve(0)}getFieldIndexes(e,t){return at.resolve([])}getNextCollectionGroupToUpdate(e){return at.resolve(null)}getMinOffset(e,t){return at.resolve(Zc.min())}getMinOffsetFromCollectionGroup(e,t){return at.resolve(Zc.min())}updateCollectionGroup(e,t,r){return at.resolve()}updateIndexEntries(e,t){return at.resolve()}}class xD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Li(Sr.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Li(Sr.comparator)).toArray()}}const zw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tN=41943040;class ca{static withCacheSize(e){return new ca(e,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ca.DEFAULT_COLLECTION_PERCENTILE=10,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ca.DEFAULT=new ca(tN,ca.DEFAULT_COLLECTION_PERCENTILE,ca.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ca.DISABLED=new ca(-1,0,0);class lh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lh(0)}static cr(){return new lh(-1)}}const qw="LruGarbageCollector",SD=1048576;function Hw([n,e],[t,r]){const s=Tn(n,t);return s===0?Tn(e,r):s}class _D{constructor(e){this.Ir=e,this.buffer=new Li(Hw),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Hw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ED{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Nt(qw,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mh(t)?Nt(qw,"Ignoring IndexedDB error during garbage collection: ",t):await ph(t)}await this.Vr(3e5)}))}}class ND{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return at.resolve(fg.ce);const r=new _D(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Nt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(zw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Nt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zw):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,o,u,d,f,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(Nt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),s=this.params.maximumSequenceNumbersToCollect):s=x,u=Date.now(),this.nthSequenceNumber(e,s)))).next((x=>(r=x,d=Date.now(),this.removeTargets(e,r,t)))).next((x=>(o=x,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((x=>(p=Date.now(),Bd()<=Nn.DEBUG&&Nt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-m}ms
	Determined least recently used ${s} in `+(d-u)+`ms
	Removed ${o} targets in `+(f-d)+`ms
	Removed ${x} documents in `+(p-f)+`ms
Total Duration: ${p-m}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:x}))))}}function AD(n,e){return new ND(n,e)}class TD{constructor(){this.changes=new Ju((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ts.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?at.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class jD{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&wf(r.mutation,s,ja.empty(),an.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Cn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Cn()){const s=Pu();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let u=hf();return o.forEach(((d,f)=>{u=u.insert(d,f.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Pu();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Cn())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,s){let o=tc();const u=bf(),d=(function(){return bf()})();return t.forEach(((f,p)=>{const m=r.get(p.key);s.has(p.key)&&(m===void 0||m.mutation instanceof uu)?o=o.insert(p.key,p):m!==void 0?(u.set(p.key,m.mutation.getFieldMask()),wf(m.mutation,p,m.mutation.getFieldMask(),an.now())):u.set(p.key,ja.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((p,m)=>u.set(p,m))),t.forEach(((p,m)=>d.set(p,new CD(m,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=bf();let s=new Ur(((u,d)=>u-d)),o=Cn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let m=r.get(f)||ja.empty();m=d.applyToLocalView(p,m),r.set(f,m);const x=(s.get(d.batchId)||Cn()).add(f);s=s.insert(d.batchId,x)}))})).next((()=>{const u=[],d=s.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),p=f.key,m=f.value,x=OE();m.forEach((E=>{if(!o.has(E)){const w=qE(t.get(E),r.get(E));w!==null&&x.set(E,w),o=o.add(E)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,x))}return at.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(u){return Wt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):II(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):at.resolve(Pu());let d=Rf,f=o;return u.next((p=>at.forEach(p,((m,x)=>(d<x.largestBatchId&&(d=x.largestBatchId),o.get(m)?at.resolve():this.remoteDocumentCache.getEntry(e,m).next((E=>{f=f.insert(m,E)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,f,p,Cn()))).next((m=>({batchId:d,changes:ME(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Wt(t)).next((r=>{let s=hf();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let u=hf();return this.indexManager.getCollectionParents(e,o).next((d=>at.forEach(d,(f=>{const p=(function(x,E){return new gg(E,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((m=>{m.forEach(((x,E)=>{u=u.insert(x,E)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((u=>{o.forEach(((f,p)=>{const m=p.getKey();u.get(m)===null&&(u=u.insert(m,Ts.newInvalidDocument(m)))}));let d=hf();return u.forEach(((f,p)=>{const m=o.get(f);m!==void 0&&wf(m.mutation,p,ja.empty(),an.now()),bg(t,p)&&(d=d.insert(f,p))})),d}))}}class RD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return at.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:al(s.createTime)}})(t)),at.resolve()}getNamedQuery(e,t){return at.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:bD(s.bundledQuery),readTime:al(s.readTime)}})(t)),at.resolve()}}class ID{constructor(){this.overlays=new Ur(Wt.comparator),this.qr=new Map}getOverlay(e,t){return at.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Pu();return at.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.St(e,t,o)})),at.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),at.resolve()}getOverlaysForCollection(e,t,r){const s=Pu(),o=t.length+1,u=new Wt(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const f=d.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&f.largestBatchId>r&&s.set(f.getKey(),f)}return at.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new Ur(((p,m)=>p-m));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=Pu(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const d=Pu(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,m)=>d.set(p,m))),!(d.size()>=s)););return at.resolve(d)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new KI(t,r));let o=this.qr.get(t);o===void 0&&(o=Cn(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class DD{constructor(){this.sessionToken=hs.EMPTY_BYTE_STRING}getSessionToken(e){return at.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,at.resolve()}}class wv{constructor(){this.Qr=new Li(Yi.$r),this.Ur=new Li(Yi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Yi(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Yi(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Wt(new Sr([])),r=new Yi(t,e),s=new Yi(t,e+1),o=[];return this.Ur.forEachInRange([r,s],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Wt(new Sr([])),r=new Yi(t,e),s=new Yi(t,e+1);let o=Cn();return this.Ur.forEachInRange([r,s],(u=>{o=o.add(u.key)})),o}containsKey(e){const t=new Yi(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Yi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Wt.comparator(e.key,t.key)||Tn(e.Yr,t.Yr)}static Kr(e,t){return Tn(e.Yr,t.Yr)||Wt.comparator(e.key,t.key)}}class kD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Li(Yi.$r)}checkEmpty(e){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new YI(o,t,r,s);this.mutationQueue.push(u);for(const d of s)this.Zr=this.Zr.add(new Yi(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return at.resolve(u)}lookupMutationBatch(e,t){return at.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),o=s<0?0:s;return at.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?uv:this.tr-1)}getAllMutationBatches(e){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yi(t,0),s=new Yi(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(u=>{const d=this.Xr(u.Yr);o.push(d)})),at.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Li(Tn);return t.forEach((s=>{const o=new Yi(s,0),u=new Yi(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(d=>{r=r.add(d.Yr)}))})),at.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;Wt.isDocumentKey(o)||(o=o.child(""));const u=new Yi(new Wt(o),0);let d=new Li(Tn);return this.Zr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(d=d.add(f.Yr)),!0)}),u),at.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Xn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return at.forEach(t.mutations,(s=>{const o=new Yi(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Yi(t,0),s=this.Zr.firstAfterOrEqual(r);return at.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,at.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LD{constructor(e){this.ri=e,this.docs=(function(){return new Ur(Wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return at.resolve(r?r.document.mutableCopy():Ts.newInvalidDocument(t))}getEntries(e,t){let r=tc();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Ts.newInvalidDocument(s))})),at.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=tc();const u=t.path,d=new Wt(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:p,value:{document:m}}=f.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||lI(oI(m),r)<=0||(s.has(m.key)||bg(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return at.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Qt(9500)}ii(e,t){return at.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new PD(this)}getSize(e){return at.resolve(this.size)}}class PD extends TD{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),at.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class MD{constructor(e){this.persistence=e,this.si=new Ju((t=>fv(t)),pv),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.oi=0,this._i=new wv,this.targetCount=0,this.ai=lh.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),at.resolve()}getLastRemoteSnapshotVersion(e){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return at.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),at.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new lh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,at.resolve()}updateTargetData(e,t){return this.Pr(t),at.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,at.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),at.waitFor(o).next((()=>s))}getTargetCount(e){return at.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return at.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),at.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((u=>{o.push(s.markPotentiallyOrphaned(e,u))})),at.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),at.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return at.resolve(r)}containsKey(e,t){return at.resolve(this._i.containsKey(t))}}class nN{constructor(e,t){this.ui={},this.overlays={},this.ci=new fg(0),this.li=!1,this.li=!0,this.hi=new DD,this.referenceDelegate=e(this),this.Pi=new MD(this),this.indexManager=new wD,this.remoteDocumentCache=(function(s){return new LD(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vD(t),this.Ii=new RD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ID,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new kD(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Nt("MemoryPersistence","Starting transaction:",e);const s=new OD(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,t){return at.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class OD extends uI{constructor(e){super(),this.currentSequenceNumber=e}}class xv{constructor(e){this.persistence=e,this.Ri=new wv,this.Vi=null}static mi(e){return new xv(e)}get fi(){if(this.Vi)return this.Vi;throw Qt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),at.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),at.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),at.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.fi,(r=>{const s=Wt.fromPath(r);return this.gi(e,s).next((o=>{o||t.removeEntry(s,tn.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return at.or([()=>at.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ym{constructor(e,t){this.persistence=e,this.pi=new Ju((r=>fI(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=AD(this,t)}static mi(e,t){return new Ym(e,t)}Ei(){}di(e){return at.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return at.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?at.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(u=>this.br(e,u,t).next((d=>{d||(r++,o.removeEntry(u,tn.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),at.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),at.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),at.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),at.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bm(e.data.value)),t}br(e,t,r){return at.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return at.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Sv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=Cn(),s=Cn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Sv(e,t.fromCache,r,s)}}class FD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class UD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return pC()?8:dI(Cs())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.ys(e,t).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,t,s,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new FD;return this.Ss(e,t,u).next((d=>{if(o.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>o.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(Bd()<=Nn.DEBUG&&Nt("QueryEngine","SDK will not create cache indexes for query:",Vd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),at.resolve()):(Bd()<=Nn.DEBUG&&Nt("QueryEngine","Query:",Vd(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Bd()<=Nn.DEBUG&&Nt("QueryEngine","The SDK decides to create cache indexes for query:",Vd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sl(t))):at.resolve())}ys(e,t){if(Dw(t))return at.resolve(null);let r=sl(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=c1(t,null,"F"),r=sl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=Cn(...o);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.Ds(t,d);return this.Cs(t,p,u,f.readTime)?this.ys(e,c1(t,null,"F")):this.vs(e,p,t,f)}))))})))))}ws(e,t,r,s){return Dw(t)||s.isEqual(tn.min())?at.resolve(null):this.ps.getDocuments(e,r).next((o=>{const u=this.Ds(t,o);return this.Cs(t,u,r,s)?at.resolve(null):(Bd()<=Nn.DEBUG&&Nt("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vd(t)),this.vs(e,u,t,aI(s,Rf)).next((d=>d)))}))}Ds(e,t){let r=new Li(LE(e));return t.forEach(((s,o)=>{bg(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,t,r){return Bd()<=Nn.DEBUG&&Nt("QueryEngine","Using full collection scan to execute query:",Vd(t)),this.ps.getDocumentsMatchingQuery(e,t,Zc.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const _v="LocalStore",BD=3e8;class VD{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Ur(Tn),this.xs=new Ju((o=>fv(o)),pv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function zD(n,e,t,r){return new VD(n,e,t,r)}async function rN(n,e){const t=on(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],d=[];let f=Cn();for(const p of s){u.push(p.batchId);for(const m of p.mutations)f=f.add(m.key)}for(const p of o){d.push(p.batchId);for(const m of p.mutations)f=f.add(m.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function qD(n,e){const t=on(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,p,m){const x=p.batch,E=x.keys();let w=at.resolve();return E.forEach((A=>{w=w.next((()=>m.getEntry(f,A))).next((D=>{const C=p.docVersions.get(A);Xn(C!==null,48541),D.version.compareTo(C)<0&&(x.applyToRemoteDocument(D,p),D.isValidDocument()&&(D.setReadTime(p.commitVersion),m.addEntry(D)))}))})),w.next((()=>d.mutationQueue.removeMutationBatch(f,x)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=Cn();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(f=f.add(d.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function iN(n){const e=on(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function HD(n,e){const t=on(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const d=[];e.targetChanges.forEach(((m,x)=>{const E=s.get(x);if(!E)return;d.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,x).next((()=>t.Pi.addMatchingKeys(o,m.addedDocuments,x))));let w=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(x)!==null?w=w.withResumeToken(hs.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(x,w),(function(D,C,k){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=BD?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(E,w,m)&&d.push(t.Pi.updateTargetData(o,w))}));let f=tc(),p=Cn();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),d.push(GD(o,u,e.documentUpdates).next((m=>{f=m.ks,p=m.qs}))),!r.isEqual(tn.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next((x=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(m)}return at.waitFor(d).next((()=>u.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,f,p))).next((()=>f))})).then((o=>(t.Ms=s,o)))}function GD(n,e,t){let r=Cn(),s=Cn();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let u=tc();return t.forEach(((d,f)=>{const p=o.get(d);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(d)),f.isNoDocument()&&f.version.isEqual(tn.min())?(e.removeEntry(d,f.readTime),u=u.insert(d,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),u=u.insert(d,f)):Nt(_v,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",f.version)})),{ks:u,qs:s}}))}function $D(n,e){const t=on(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=uv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function WD(n,e){const t=on(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((o=>o?(s=o,at.resolve(s)):t.Pi.allocateTargetId(r).next((u=>(s=new Gc(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function p1(n,e,t){const r=on(n),s=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!mh(u))throw u;Nt(_v,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Gw(n,e,t){const r=on(n);let s=tn.min(),o=Cn();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(f,p,m){const x=on(f),E=x.xs.get(m);return E!==void 0?at.resolve(x.Ms.get(E)):x.Pi.getTargetData(p,m)})(r,u,sl(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,d.targetId).next((f=>{o=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?s:tn.min(),t?o:Cn()))).next((d=>(YD(r,kI(e),d),{documents:d,Qs:o})))))}function YD(n,e,t){let r=n.Os.get(e)||tn.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class $w{constructor(){this.activeTargetIds=UI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KD{constructor(){this.Mo=new $w,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $w,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XD{Oo(e){}shutdown(){}}const Ww="ConnectivityMonitor";class Yw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Nt(Ww,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Nt(Ww,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let em=null;function m1(){return em===null?em=(function(){return 268435456+Math.round(2147483648*Math.random())})():em++,"0x"+em.toString(16)}const hy="RestConnection",QD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class JD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Vm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,o){const u=m1(),d=this.zo(e,t.toUriEncodedString());Nt(hy,`Sending RPC '${e}' ${u}:`,d,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,s,o);const{host:p}=new URL(d),m=lu(p);return this.Jo(e,d,f,r,m).then((x=>(Nt(hy,`Received RPC '${e}' ${u}: `,x),x)),(x=>{throw ih(hy,`RPC '${e}' ${u} failed with error: `,x,"url: ",d,"request:",r),x}))}Ho(e,t,r,s,o,u){return this.Go(e,t,r,s,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,t){const r=QD[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class ZD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const xs="WebChannelConnection";class ek extends JD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,o){const u=m1();return new Promise(((d,f)=>{const p=new lE;p.setWithCredentials(!0),p.listenOnce(cE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case vm.NO_ERROR:const x=p.getResponseJson();Nt(xs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(x)),d(x);break;case vm.TIMEOUT:Nt(xs,`RPC '${e}' ${u} timed out`),f(new kt(lt.DEADLINE_EXCEEDED,"Request time out"));break;case vm.HTTP_ERROR:const E=p.getStatus();if(Nt(xs,`RPC '${e}' ${u} failed with status:`,E,"response text:",p.getResponseText()),E>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const D=(function(k){const H=k.toLowerCase().replace(/_/g,"-");return Object.values(lt).indexOf(H)>=0?H:lt.UNKNOWN})(A.status);f(new kt(D,A.message))}else f(new kt(lt.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new kt(lt.UNAVAILABLE,"Connection failed."));break;default:Qt(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Nt(xs,`RPC '${e}' ${u} completed.`)}}));const m=JSON.stringify(s);Nt(xs,`RPC '${e}' ${u} sending request:`,s),p.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=m1(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=hE(),d=dE(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=o.join("");Nt(xs,`Creating RPC '${e}' stream ${s}: ${m}`,f);const x=u.createWebChannel(m,f);this.I_(x);let E=!1,w=!1;const A=new ZD({Yo:C=>{w?Nt(xs,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(E||(Nt(xs,`Opening RPC '${e}' stream ${s} transport.`),x.open(),E=!0),Nt(xs,`RPC '${e}' stream ${s} sending:`,C),x.send(C))},Zo:()=>x.close()}),D=(C,k,H)=>{C.listen(k,(G=>{try{H(G)}catch(V){setTimeout((()=>{throw V}),0)}}))};return D(x,df.EventType.OPEN,(()=>{w||(Nt(xs,`RPC '${e}' stream ${s} transport opened.`),A.o_())})),D(x,df.EventType.CLOSE,(()=>{w||(w=!0,Nt(xs,`RPC '${e}' stream ${s} transport closed`),A.a_(),this.E_(x))})),D(x,df.EventType.ERROR,(C=>{w||(w=!0,ih(xs,`RPC '${e}' stream ${s} transport errored. Name:`,C.name,"Message:",C.message),A.a_(new kt(lt.UNAVAILABLE,"The operation could not be completed")))})),D(x,df.EventType.MESSAGE,(C=>{if(!w){const k=C.data[0];Xn(!!k,16349);const H=k,G=H?.error||H[0]?.error;if(G){Nt(xs,`RPC '${e}' stream ${s} received error:`,G);const V=G.status;let ce=(function(I){const R=vi[I];if(R!==void 0)return GE(R)})(V),se=G.message;ce===void 0&&(ce=lt.INTERNAL,se="Unknown error status: "+V+" with message "+G.message),w=!0,A.a_(new kt(ce,se)),x.close()}else Nt(xs,`RPC '${e}' stream ${s} received:`,k),A.u_(k)}})),D(d,uE.STAT_EVENT,(C=>{C.stat===r1.PROXY?Nt(xs,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===r1.NOPROXY&&Nt(xs,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function fy(){return typeof document<"u"?document:null}function _g(n){return new iD(n,!0)}class sN{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&Nt("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Kw="PersistentStream";class aN{constructor(e,t,r,s,o,u,d,f){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===lt.RESOURCE_EXHAUSTED?(ec(t.toString()),ec("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===lt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new kt(lt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Nt(Kw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Nt(Kw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tk extends aN{constructor(e,t,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=oD(this.serializer,e),r=(function(o){if(!("targetChange"in o))return tn.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?tn.min():u.readTime?al(u.readTime):tn.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=f1(this.serializer),t.addTarget=(function(o,u){let d;const f=u.target;if(d=l1(f)?{documents:uD(o,f)}:{query:dD(o,f).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=YE(o,u.resumeToken);const p=u1(o,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(tn.min())>0){d.readTime=Wm(o,u.snapshotVersion.toTimestamp());const p=u1(o,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=fD(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=f1(this.serializer),t.removeTarget=e,this.q_(t)}}class nk extends aN{constructor(e,t,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Xn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=cD(e.writeResults,e.commitTime),r=al(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=f1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>lD(this.serializer,r)))};this.q_(t)}}class rk{}class ik extends rk{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new kt(lt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,d1(t,r),s,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new kt(lt.UNKNOWN,o.toString())}))}Ho(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,d1(t,r),s,u,d,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===lt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new kt(lt.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ec(t),this.aa=!1):Nt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Wu="RemoteStore";class ak{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{Zu(this)&&(Nt(Wu,"Restarting streams for network reachability change."),await(async function(f){const p=on(f);p.Ea.add(4),await Qf(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Eg(p)})(this))}))})),this.Ra=new sk(r,s)}}async function Eg(n){if(Zu(n))for(const e of n.da)await e(!0)}async function Qf(n){for(const e of n.da)await e(!1)}function oN(n,e){const t=on(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Tv(t)?Av(t):gh(t).O_()&&Nv(t,e))}function Ev(n,e){const t=on(n),r=gh(t);t.Ia.delete(e),r.O_()&&lN(t,e),t.Ia.size===0&&(r.O_()?r.L_():Zu(t)&&t.Ra.set("Unknown"))}function Nv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gh(n).Y_(e)}function lN(n,e){n.Va.Ue(e),gh(n).Z_(e)}function Av(n){n.Va=new eD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),gh(n).start(),n.Ra.ua()}function Tv(n){return Zu(n)&&!gh(n).x_()&&n.Ia.size>0}function Zu(n){return on(n).Ea.size===0}function cN(n){n.Va=void 0}async function ok(n){n.Ra.set("Online")}async function lk(n){n.Ia.forEach(((e,t)=>{Nv(n,e)}))}async function ck(n,e){cN(n),Tv(n)?(n.Ra.ha(e),Av(n)):n.Ra.set("Unknown")}async function uk(n,e,t){if(n.Ra.set("Online"),e instanceof WE&&e.state===2&&e.cause)try{await(async function(s,o){const u=o.cause;for(const d of o.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,u),s.Ia.delete(d),s.Va.removeTarget(d))})(n,e)}catch(r){Nt(Wu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Km(n,r)}else if(e instanceof Sm?n.Va.Ze(e):e instanceof $E?n.Va.st(e):n.Va.tt(e),!t.isEqual(tn.min()))try{const r=await iN(n.localStore);t.compareTo(r)>=0&&await(function(o,u){const d=o.Va.Tt(u);return d.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const m=o.Ia.get(p);m&&o.Ia.set(p,m.withResumeToken(f.resumeToken,u))}})),d.targetMismatches.forEach(((f,p)=>{const m=o.Ia.get(f);if(!m)return;o.Ia.set(f,m.withResumeToken(hs.EMPTY_BYTE_STRING,m.snapshotVersion)),lN(o,f);const x=new Gc(m.target,f,p,m.sequenceNumber);Nv(o,x)})),o.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){Nt(Wu,"Failed to raise snapshot:",r),await Km(n,r)}}async function Km(n,e,t){if(!mh(e))throw e;n.Ea.add(1),await Qf(n),n.Ra.set("Offline"),t||(t=()=>iN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Nt(Wu,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Eg(n)}))}function uN(n,e){return e().catch((t=>Km(n,t,e)))}async function Ng(n){const e=on(n),t=ru(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:uv;for(;dk(e);)try{const s=await $D(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,hk(e,s)}catch(s){await Km(e,s)}dN(e)&&hN(e)}function dk(n){return Zu(n)&&n.Ta.length<10}function hk(n,e){n.Ta.push(e);const t=ru(n);t.O_()&&t.X_&&t.ea(e.mutations)}function dN(n){return Zu(n)&&!ru(n).x_()&&n.Ta.length>0}function hN(n){ru(n).start()}async function fk(n){ru(n).ra()}async function pk(n){const e=ru(n);for(const t of n.Ta)e.ea(t.mutations)}async function mk(n,e,t){const r=n.Ta.shift(),s=yv.from(r,e,t);await uN(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ng(n)}async function gk(n,e){e&&ru(n).X_&&await(async function(r,s){if((function(u){return QI(u)&&u!==lt.ABORTED})(s.code)){const o=r.Ta.shift();ru(r).B_(),await uN(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Ng(r)}})(n,e),dN(n)&&hN(n)}async function Xw(n,e){const t=on(n);t.asyncQueue.verifyOperationInProgress(),Nt(Wu,"RemoteStore received new credentials");const r=Zu(t);t.Ea.add(3),await Qf(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Eg(t)}async function yk(n,e){const t=on(n);e?(t.Ea.delete(2),await Eg(t)):e||(t.Ea.add(2),await Qf(t),t.Ra.set("Unknown"))}function gh(n){return n.ma||(n.ma=(function(t,r,s){const o=on(t);return o.sa(),new tk(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:ok.bind(null,n),t_:lk.bind(null,n),r_:ck.bind(null,n),H_:uk.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Tv(n)?Av(n):n.Ra.set("Unknown")):(await n.ma.stop(),cN(n))}))),n.ma}function ru(n){return n.fa||(n.fa=(function(t,r,s){const o=on(t);return o.sa(),new nk(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:fk.bind(null,n),r_:gk.bind(null,n),ta:pk.bind(null,n),na:mk.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ng(n)):(await n.fa.stop(),n.Ta.length>0&&(Nt(Wu,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Cv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Xl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const u=Date.now()+r,d=new Cv(e,t,u,s,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new kt(lt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jv(n,e){if(ec("AsyncQueue",`${e}: ${n}`),mh(n))return new kt(lt.UNAVAILABLE,`${e}: ${n}`);throw n}class Xd{static emptySet(e){return new Xd(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Wt.comparator(t.key,r.key):(t,r)=>Wt.comparator(t.key,r.key),this.keyedMap=hf(),this.sortedSet=new Ur(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Xd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Qw{constructor(){this.ga=new Ur(Wt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Qt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class ch{constructor(e,t,r,s,o,u,d,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new ch(e,t,Xd.emptySet(t),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class vk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bk{constructor(){this.queries=Jw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=on(t),o=s.queries;s.queries=Jw(),o.forEach(((u,d)=>{for(const f of d.Sa)f.onError(r)}))})(this,new kt(lt.ABORTED,"Firestore shutting down"))}}function Jw(){return new Ju((n=>kE(n)),vg)}async function Rv(n,e){const t=on(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new vk,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const d=jv(u,`Initialization of query '${Vd(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Dv(t)}async function Iv(n,e){const t=on(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function wk(n,e){const t=on(n);let r=!1;for(const s of e){const o=s.query,u=t.queries.get(o);if(u){for(const d of u.Sa)d.Fa(s)&&(r=!0);u.wa=s}}r&&Dv(t)}function xk(n,e,t){const r=on(n),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(t);r.queries.delete(e)}function Dv(n){n.Ca.forEach((e=>{e.next()}))}var g1,Zw;(Zw=g1||(g1={})).Ma="default",Zw.Cache="cache";class kv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ch(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ch.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==g1.Cache}}class fN{constructor(e){this.key=e}}class pN{constructor(e){this.key=e}}class Sk{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Cn(),this.mutatedKeys=Cn(),this.eu=LE(e),this.tu=new Xd(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new Qw,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,u=s,d=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,x)=>{const E=s.get(m),w=bg(this.query,x)?x:null,A=!!E&&this.mutatedKeys.has(E.key),D=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;E&&w?E.data.isEqual(w.data)?A!==D&&(r.track({type:3,doc:w}),C=!0):this.su(E,w)||(r.track({type:2,doc:w}),C=!0,(f&&this.eu(w,f)>0||p&&this.eu(w,p)<0)&&(d=!0)):!E&&w?(r.track({type:0,doc:w}),C=!0):E&&!w&&(r.track({type:1,doc:E}),C=!0,(f||p)&&(d=!0)),C&&(w?(u=u.add(w),o=D?o.add(m):o.delete(m)):(u=u.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const m=this.query.limitType==="F"?u.last():u.first();u=u.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:u,iu:r,Cs:d,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((m,x)=>(function(w,A){const D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt(20277,{Rt:C})}};return D(w)-D(A)})(m.type,x.type)||this.eu(m.doc,x.doc))),this.ou(r),s=s??!1;const d=t&&!s?this._u():[],f=this.Xa.size===0&&this.current&&!s?1:0,p=f!==this.Za;return this.Za=f,u.length!==0||p?{snapshot:new ch(this.query,e.tu,o,u,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Cn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new pN(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new fN(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=Cn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ch.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Lv="SyncEngine";class _k{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ek{constructor(e){this.key=e,this.hu=!1}}class Nk{constructor(e,t,r,s,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Ju((d=>kE(d)),vg),this.Iu=new Map,this.Eu=new Set,this.du=new Ur(Wt.comparator),this.Au=new Map,this.Ru=new wv,this.Vu={},this.mu=new Map,this.fu=lh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ak(n,e,t=!0){const r=wN(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await mN(r,e,t,!0),s}async function Tk(n,e){const t=wN(n);await mN(t,e,!0,!1)}async function mN(n,e,t,r){const s=await WD(n.localStore,sl(e)),o=s.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let d;return r&&(d=await Ck(n,e,o,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&oN(n.remoteStore,s),d}async function Ck(n,e,t,r,s){n.pu=(x,E,w)=>(async function(D,C,k,H){let G=C.view.ru(k);G.Cs&&(G=await Gw(D.localStore,C.query,!1).then((({documents:U})=>C.view.ru(U,G))));const V=H&&H.targetChanges.get(C.targetId),ce=H&&H.targetMismatches.get(C.targetId)!=null,se=C.view.applyChanges(G,D.isPrimaryClient,V,ce);return tx(D,C.targetId,se.au),se.snapshot})(n,x,E,w);const o=await Gw(n.localStore,e,!0),u=new Sk(e,o.Qs),d=u.ru(o.documents),f=Xf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=u.applyChanges(d,n.isPrimaryClient,f);tx(n,t,p.au);const m=new _k(e,t,u);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function jk(n,e,t){const r=on(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((u=>!vg(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await p1(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Ev(r.remoteStore,s.targetId),y1(r,s.targetId)})).catch(ph)):(y1(r,s.targetId),await p1(r.localStore,s.targetId,!0))}async function Rk(n,e){const t=on(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ev(t.remoteStore,r.targetId))}async function Ik(n,e,t){const r=Fk(n);try{const s=await(function(u,d){const f=on(u),p=an.now(),m=d.reduce(((w,A)=>w.add(A.key)),Cn());let x,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let A=tc(),D=Cn();return f.Ns.getEntries(w,m).next((C=>{A=C,A.forEach(((k,H)=>{H.isValidDocument()||(D=D.add(k))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,A))).next((C=>{x=C;const k=[];for(const H of d){const G=$I(H,x.get(H.key).overlayedDocument);G!=null&&k.push(new uu(H.key,G,AE(G.value.mapValue),Qa.exists(!0)))}return f.mutationQueue.addMutationBatch(w,p,k,d)})).next((C=>{E=C;const k=C.applyToLocalDocumentSet(x,D);return f.documentOverlayCache.saveOverlays(w,C.batchId,k)}))})).then((()=>({batchId:E.batchId,changes:ME(x)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(u,d,f){let p=u.Vu[u.currentUser.toKey()];p||(p=new Ur(Tn)),p=p.insert(d,f),u.Vu[u.currentUser.toKey()]=p})(r,s.batchId,t),await Jf(r,s.changes),await Ng(r.remoteStore)}catch(s){const o=jv(s,"Failed to persist write");t.reject(o)}}async function gN(n,e){const t=on(n);try{const r=await HD(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const u=t.Au.get(o);u&&(Xn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?Xn(u.hu,14607):s.removedDocuments.size>0&&(Xn(u.hu,42227),u.hu=!1))})),await Jf(t,r,e)}catch(r){await ph(r)}}function ex(n,e,t){const r=on(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,u)=>{const d=u.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(u,d){const f=on(u);f.onlineState=d;let p=!1;f.queries.forEach(((m,x)=>{for(const E of x.Sa)E.va(d)&&(p=!0)})),p&&Dv(f)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Dk(n,e,t){const r=on(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let u=new Ur(Wt.comparator);u=u.insert(o,Ts.newNoDocument(o,tn.min()));const d=Cn().add(o),f=new Sg(tn.min(),new Map,new Ur(Tn),u,d);await gN(r,f),r.du=r.du.remove(o),r.Au.delete(e),Pv(r)}else await p1(r.localStore,e,!1).then((()=>y1(r,e,t))).catch(ph)}async function kk(n,e){const t=on(n),r=e.batch.batchId;try{const s=await qD(t.localStore,e);vN(t,r,null),yN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Jf(t,s)}catch(s){await ph(s)}}async function Lk(n,e,t){const r=on(n);try{const s=await(function(u,d){const f=on(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let m;return f.mutationQueue.lookupMutationBatch(p,d).next((x=>(Xn(x!==null,37113),m=x.keys(),f.mutationQueue.removeMutationBatch(p,x)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,m,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m))).next((()=>f.localDocuments.getDocuments(p,m)))}))})(r.localStore,e);vN(r,e,t),yN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Jf(r,s)}catch(s){await ph(s)}}function yN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vN(n,e,t){const r=on(n);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function y1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||bN(n,r)}))}function bN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ev(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Pv(n))}function tx(n,e,t){for(const r of t)r instanceof fN?(n.Ru.addReference(r.key,e),Pk(n,r)):r instanceof pN?(Nt(Lv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||bN(n,r.key)):Qt(19791,{wu:r})}function Pk(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Nt(Lv,"New document in limbo: "+t),n.Eu.add(r),Pv(n))}function Pv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Wt(Sr.fromString(e)),r=n.fu.next();n.Au.set(r,new Ek(t)),n.du=n.du.insert(t,r),oN(n.remoteStore,new Gc(sl(yg(t.path)),r,"TargetPurposeLimboResolution",fg.ce))}}async function Jf(n,e,t){const r=on(n),s=[],o=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,f)=>{u.push(r.pu(f,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const m=p?!p.fromCache:t?.targetChanges.get(f.targetId)?.current;r.sharedClientState.updateQueryState(f.targetId,m?"current":"not-current")}if(p){s.push(p);const m=Sv.As(f.targetId,p);o.push(m)}})))})),await Promise.all(u),r.Pu.H_(s),await(async function(f,p){const m=on(f);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>at.forEach(p,(E=>at.forEach(E.Es,(w=>m.persistence.referenceDelegate.addReference(x,E.targetId,w))).next((()=>at.forEach(E.ds,(w=>m.persistence.referenceDelegate.removeReference(x,E.targetId,w)))))))))}catch(x){if(!mh(x))throw x;Nt(_v,"Failed to update sequence numbers: "+x)}for(const x of p){const E=x.targetId;if(!x.fromCache){const w=m.Ms.get(E),A=w.snapshotVersion,D=w.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(E,D)}}})(r.localStore,o))}async function Mk(n,e){const t=on(n);if(!t.currentUser.isEqual(e)){Nt(Lv,"User change. New user:",e.toKey());const r=await rN(t.localStore,e);t.currentUser=e,(function(o,u){o.mu.forEach((d=>{d.forEach((f=>{f.reject(new kt(lt.CANCELLED,u))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jf(t,r.Ls)}}function Ok(n,e){const t=on(n),r=t.Au.get(e);if(r&&r.hu)return Cn().add(r.key);{let s=Cn();const o=t.Iu.get(e);if(!o)return s;for(const u of o){const d=t.Tu.get(u);s=s.unionWith(d.view.nu)}return s}}function wN(n){const e=on(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ok.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Dk.bind(null,e),e.Pu.H_=wk.bind(null,e.eventManager),e.Pu.yu=xk.bind(null,e.eventManager),e}function Fk(n){const e=on(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lk.bind(null,e),e}class Xm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_g(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zD(this.persistence,new UD,e.initialUser,this.serializer)}Cu(e){return new nN(xv.mi,this.serializer)}Du(e){return new KD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xm.provider={build:()=>new Xm};class Uk extends Xm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Xn(this.persistence.referenceDelegate instanceof Ym,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ED(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ca.withCacheSize(this.cacheSizeBytes):ca.DEFAULT;return new nN((r=>Ym.mi(r,t)),this.serializer)}}class v1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ex(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mk.bind(null,this.syncEngine),await yk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bk})()}createDatastore(e){const t=_g(e.databaseInfo.databaseId),r=(function(o){return new ek(o)})(e.databaseInfo);return(function(o,u,d,f){return new ik(o,u,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,u,d){return new ak(r,s,o,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>ex(this.syncEngine,t,0)),(function(){return Yw.v()?new Yw:new XD})())}createSyncEngine(e,t){return(function(s,o,u,d,f,p,m){const x=new Nk(s,o,u,d,f,p);return m&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=on(t);Nt(Wu,"RemoteStore shutting down."),r.Ea.add(5),await Qf(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}v1.provider={build:()=>new v1};class Mv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ec("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const iu="FirestoreClient";class Bk{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=As.UNAUTHENTICATED,this.clientId=lv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{Nt(iu,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Nt(iu,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=jv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function py(n,e){n.asyncQueue.verifyOperationInProgress(),Nt(iu,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await rN(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function nx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Vk(n);Nt(iu,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>Xw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>Xw(e.remoteStore,s))),n._onlineComponents=e}async function Vk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Nt(iu,"Using user provided OfflineComponentProvider");try{await py(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===lt.FAILED_PRECONDITION||s.code===lt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ih("Error using user provided cache. Falling back to memory cache: "+t),await py(n,new Xm)}}else Nt(iu,"Using default OfflineComponentProvider"),await py(n,new Uk(void 0));return n._offlineComponents}async function xN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Nt(iu,"Using user provided OnlineComponentProvider"),await nx(n,n._uninitializedComponentsProvider._online)):(Nt(iu,"Using default OnlineComponentProvider"),await nx(n,new v1))),n._onlineComponents}function zk(n){return xN(n).then((e=>e.syncEngine))}async function Qm(n){const e=await xN(n),t=e.eventManager;return t.onListen=Ak.bind(null,e.syncEngine),t.onUnlisten=jk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Tk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rk.bind(null,e.syncEngine),t}function qk(n,e,t={}){const r=new Xl;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,f,p){const m=new Mv({next:E=>{m.Nu(),u.enqueueAndForget((()=>Iv(o,x)));const w=E.docs.has(d);!w&&E.fromCache?p.reject(new kt(lt.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&E.fromCache&&f&&f.source==="server"?p.reject(new kt(lt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),x=new kv(yg(d.path),m,{includeMetadataChanges:!0,qa:!0});return Rv(o,x)})(await Qm(n),n.asyncQueue,e,t,r))),r.promise}function Hk(n,e,t={}){const r=new Xl;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,f,p){const m=new Mv({next:E=>{m.Nu(),u.enqueueAndForget((()=>Iv(o,x))),E.fromCache&&f.source==="server"?p.reject(new kt(lt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),x=new kv(d,m,{includeMetadataChanges:!0,qa:!0});return Rv(o,x)})(await Qm(n),n.asyncQueue,e,t,r))),r.promise}function SN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const rx=new Map;const _N="firestore.googleapis.com",ix=!0;class sx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new kt(lt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_N,this.ssl=ix}else this.host=e.host,this.ssl=e.ssl??ix;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SD)throw new kt(lt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SN(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new kt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new kt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new kt(lt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ag{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new kt(lt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new kt(lt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new KR;switch(r.type){case"firstParty":return new ZR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new kt(lt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=rx.get(t);r&&(Nt("ComponentProvider","Removing Datastore"),rx.delete(t),r.terminate())})(this),Promise.resolve()}}function Gk(n,e,t,r={}){n=ha(n,Ag);const s=lu(e),o=n._getSettings(),u={...o,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(G1(`https://${d}`),$1("Firestore",!0)),o.host!==_N&&o.host!==d&&ih("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...o,host:d,ssl:s,emulatorOptions:r};if(!zu(f,u)&&(n._setSettings(f),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=As.MOCK_USER;else{p=g_(r.mockUserToken,n._app?.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new kt(lt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new As(x)}n._authCredentials=new XR(new pE(p,m))}}class Zf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zf(this.firestore,e,this._query)}}class li{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new li(this.firestore,e,this._key)}toJSON(){return{type:li._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Yf(t,li._jsonSchema))return new li(e,r||null,new Wt(Sr.fromString(t.referencePath)))}}li._jsonSchemaVersion="firestore/documentReference/1.0",li._jsonSchema={type:bi("string",li._jsonSchemaVersion),referencePath:bi("string")};class Xc extends Zf{constructor(e,t,r){super(e,t,yg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new li(this.firestore,null,new Wt(e))}withConverter(e){return new Xc(this.firestore,e,this._path)}}function b1(n,e,...t){if(n=Er(n),mE("collection","path",e),n instanceof Ag){const r=Sr.fromString(e,...t);return bw(r),new Xc(n,null,r)}{if(!(n instanceof li||n instanceof Xc))throw new kt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return bw(r),new Xc(n.firestore,null,r)}}function dr(n,e,...t){if(n=Er(n),arguments.length===1&&(e=lv.newId()),mE("doc","path",e),n instanceof Ag){const r=Sr.fromString(e,...t);return vw(r),new li(n,null,new Wt(r))}{if(!(n instanceof li||n instanceof Xc))throw new kt(lt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return vw(r),new li(n.firestore,n instanceof Xc?n.converter:null,new Wt(r))}}const ax="AsyncQueue";class ox{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sN(this,"async_queue_retry"),this._c=()=>{const r=fy();r&&Nt(ax,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=fy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=fy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Xl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mh(e))throw e;Nt(ax,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ec("INTERNAL UNHANDLED ERROR: ",lx(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Cv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Qt(47125,{Pc:lx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function lx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function cx(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(n,["next","error","complete"])}class nc extends Ag{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new ox,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ox(e),this._firestoreClient=void 0,await e}}}function $k(n,e){const t=typeof n=="object"?n:K1(),r=typeof n=="string"?n:Vm,s=lg(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=f_("firestore");o&&Gk(s,...o)}return s}function Tg(n){if(n._terminated)throw new kt(lt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Wk(n),n._firestoreClient}function Wk(n){const e=n._freezeSettings(),t=(function(s,o,u,d){return new gI(s,o,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,SN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Bk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const o=s?._online.build();return{_offline:s?._offline.build(o),_online:o}})(n._componentsProvider))}class Xa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xa(hs.fromBase64String(e))}catch(t){throw new kt(lt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xa(hs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yf(e,Xa._jsonSchema))return Xa.fromBase64String(e.bytes)}}Xa._jsonSchemaVersion="firestore/bytes/1.0",Xa._jsonSchema={type:bi("string",Xa._jsonSchemaVersion),bytes:bi("string")};class Cg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new kt(lt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ds(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ov{constructor(e){this._methodName=e}}class ol{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new kt(lt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new kt(lt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tn(this._lat,e._lat)||Tn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ol._jsonSchemaVersion}}static fromJSON(e){if(Yf(e,ol._jsonSchema))return new ol(e.latitude,e.longitude)}}ol._jsonSchemaVersion="firestore/geoPoint/1.0",ol._jsonSchema={type:bi("string",ol._jsonSchemaVersion),latitude:bi("number"),longitude:bi("number")};class ll{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ll._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yf(e,ll._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ll(e.vectorValues);throw new kt(lt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ll._jsonSchemaVersion="firestore/vectorValue/1.0",ll._jsonSchema={type:bi("string",ll._jsonSchemaVersion),vectorValues:bi("object")};const Yk=/^__.*__$/;class Kk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new uu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kf(e,this.data,t,this.fieldTransforms)}}class EN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt(40011,{Ac:n})}}class Fv{constructor(e,t,r,s,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NN(this.Ac)&&Yk.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Xk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_g(e)}Cc(e,t,r,s=!1){return new Fv({Ac:e,methodName:t,Dc:r,path:ds.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uv(n){const e=n._freezeSettings(),t=_g(n._databaseId);return new Xk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function AN(n,e,t,r,s,o={}){const u=n.Cc(o.merge||o.mergeFields?2:0,e,t,s);Bv("Data must be an object, but it was:",u,r);const d=TN(r,u);let f,p;if(o.merge)f=new ja(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const m=[];for(const x of o.mergeFields){const E=w1(e,x,t);if(!u.contains(E))throw new kt(lt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);jN(m,E)||m.push(E)}f=new ja(m),p=u.fieldTransforms.filter((x=>f.covers(x.field)))}else f=null,p=u.fieldTransforms;return new Kk(new da(d),f,p)}class jg extends Ov{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jg}}function Qk(n,e,t,r){const s=n.Cc(1,e,t);Bv("Data must be an object, but it was:",s,r);const o=[],u=da.empty();cu(r,((f,p)=>{const m=Vv(e,f,t);p=Er(p);const x=s.yc(m);if(p instanceof jg)o.push(m);else{const E=Rg(p,x);E!=null&&(o.push(m),u.set(m,E))}}));const d=new ja(o);return new EN(u,d,s.fieldTransforms)}function Jk(n,e,t,r,s,o){const u=n.Cc(1,e,t),d=[w1(e,r,t)],f=[s];if(o.length%2!=0)throw new kt(lt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)d.push(w1(e,o[E])),f.push(o[E+1]);const p=[],m=da.empty();for(let E=d.length-1;E>=0;--E)if(!jN(p,d[E])){const w=d[E];let A=f[E];A=Er(A);const D=u.yc(w);if(A instanceof jg)p.push(w);else{const C=Rg(A,D);C!=null&&(p.push(w),m.set(w,C))}}const x=new ja(p);return new EN(m,x,u.fieldTransforms)}function Rg(n,e){if(CN(n=Er(n)))return Bv("Unsupported field value:",e,n),TN(n,e);if(n instanceof Ov)return(function(r,s){if(!NN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let u=0;for(const d of r){let f=Rg(d,s.wc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=Er(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BI(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=an.fromDate(r);return{timestampValue:Wm(s.serializer,o)}}if(r instanceof an){const o=new an(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wm(s.serializer,o)}}if(r instanceof ol)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xa)return{bytesValue:YE(s.serializer,r._byteString)};if(r instanceof li){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:bv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ll)return(function(u,d){return{mapValue:{fields:{[EE]:{stringValue:NE},[zm]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return mv(d.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${cv(r)}`)})(n,e)}function TN(n,e){const t={};return vE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(n,((r,s)=>{const o=Rg(s,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function CN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof an||n instanceof ol||n instanceof Xa||n instanceof li||n instanceof Ov||n instanceof ll)}function Bv(n,e,t){if(!CN(t)||!gE(t)){const r=cv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function w1(n,e,t){if((e=Er(e))instanceof Cg)return e._internalPath;if(typeof e=="string")return Vv(n,e);throw Jm("Field path arguments must be of type string or ",n,!1,void 0,t)}const Zk=new RegExp("[~\\*/\\[\\]]");function Vv(n,e,t){if(e.search(Zk)>=0)throw Jm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cg(...e.split("."))._internalPath}catch{throw Jm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jm(n,e,t,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${r}`),u&&(f+=` in document ${s}`),f+=")"),new kt(lt.INVALID_ARGUMENT,d+n+f)}function jN(n,e){return n.some((t=>t.isEqual(e)))}class RN{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new li(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(IN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eL extends RN{data(){return super.data()}}function IN(n,e){return typeof e=="string"?Vv(n,e):e instanceof Cg?e._internalPath:e._delegate._internalPath}function DN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new kt(lt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tL{convertValue(e,t="none"){switch(nu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return cu(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[zm].arrayValue?.values?.map((r=>ii(r.doubleValue)));return new ll(t)}convertGeoPoint(e){return new ol(ii(e.latitude),ii(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=mg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(If(e));default:return null}}convertTimestamp(e){const t=eu(e);return new an(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Sr.fromString(e);Xn(eN(r),9688,{name:e});const s=new Df(r.get(1),r.get(3)),o=new Wt(r.popFirst(5));return s.isEqual(t)||ec(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function kN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mu extends RN{constructor(e,t,r,s,o,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _m(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(IN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new kt(lt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mu._jsonSchema={type:bi("string",Mu._jsonSchemaVersion),bundleSource:bi("string","DocumentSnapshot"),bundleName:bi("string"),bundle:bi("string")};class _m extends Mu{data(e={}){return super.data(e)}}class Ou{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new pf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new _m(this._firestore,this._userDataWriter,r.key,r,new pf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new kt(lt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((d=>{const f=new _m(s._firestore,s._userDataWriter,d.doc.key,d.doc,new pf(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const f=new _m(s._firestore,s._userDataWriter,d.doc.key,d.doc,new pf(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,m=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),m=u.indexOf(d.doc.key)),{type:nL(d.type),doc:f,oldIndex:p,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new kt(lt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ou._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=lv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt(61501,{type:n})}}function yh(n){n=ha(n,li);const e=ha(n.firestore,nc);return qk(Tg(e),n._key).then((t=>LN(e,n,t)))}Ou._jsonSchemaVersion="firestore/querySnapshot/1.0",Ou._jsonSchema={type:bi("string",Ou._jsonSchemaVersion),bundleSource:bi("string","QuerySnapshot"),bundleName:bi("string"),bundle:bi("string")};class zv extends tL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new li(this.firestore,null,t)}}function du(n){n=ha(n,Zf);const e=ha(n.firestore,nc),t=Tg(e),r=new zv(e);return DN(n._query),Hk(t,n._query).then((s=>new Ou(e,r,n,s)))}function Mf(n,e,t){n=ha(n,li);const r=ha(n.firestore,nc),s=kN(n.converter,e,t);return Ig(r,[AN(Uv(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Qa.none())])}function hu(n,e,t,...r){n=ha(n,li);const s=ha(n.firestore,nc),o=Uv(s);let u;return u=typeof(e=Er(e))=="string"||e instanceof Cg?Jk(o,"updateDoc",n._key,e,t,r):Qk(o,"updateDoc",n._key,e),Ig(s,[u.toMutation(n._key,Qa.exists(!0))])}function vh(n){return Ig(ha(n.firestore,nc),[new gv(n._key,Qa.none())])}function su(n,e){const t=ha(n.firestore,nc),r=dr(n),s=kN(n.converter,e);return Ig(t,[AN(Uv(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Qa.exists(!1))]).then((()=>r))}function qv(n,...e){n=Er(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||cx(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(cx(e[r])){const f=e[r];e[r]=f.next?.bind(f),e[r+1]=f.error?.bind(f),e[r+2]=f.complete?.bind(f)}let o,u,d;if(n instanceof li)u=ha(n.firestore,nc),d=yg(n._key.path),o={next:f=>{e[r]&&e[r](LN(u,n,f))},error:e[r+1],complete:e[r+2]};else{const f=ha(n,Zf);u=ha(f.firestore,nc),d=f._query;const p=new zv(u);o={next:m=>{e[r]&&e[r](new Ou(u,p,f,m))},error:e[r+1],complete:e[r+2]},DN(n._query)}return(function(p,m,x,E){const w=new Mv(E),A=new kv(m,w,x);return p.asyncQueue.enqueueAndForget((async()=>Rv(await Qm(p),A))),()=>{w.Nu(),p.asyncQueue.enqueueAndForget((async()=>Iv(await Qm(p),A)))}})(Tg(u),d,s,o)}function Ig(n,e){return(function(r,s){const o=new Xl;return r.asyncQueue.enqueueAndForget((async()=>Ik(await zk(r),s,o))),o.promise})(Tg(n),e)}function LN(n,e,t){const r=t.docs.get(e._key),s=new zv(n);return new Mu(n,s,e._key,r,new pf(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){fh=s})(Qu),qu(new Jc("firestore",((r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),d=new nc(new QR(r.getProvider("auth-internal")),new eI(u,r.getProvider("app-check-internal")),(function(p,m){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new kt(lt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Df(p.options.projectId,m)})(u,s),u);return o={useFetchStreams:t,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),rl(pw,mw,e),rl(pw,mw,"esm2020")})();const PN="firebasestorage.googleapis.com",MN="storageBucket",rL=120*1e3,iL=600*1e3;class Jr extends hl{constructor(e,t,r=0){super(my(e),`Firebase Storage: ${t} (${my(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return my(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qr||(Qr={}));function my(n){return"storage/"+n}function Hv(){const n="An unknown error occurred, please check the error payload for server response.";return new Jr(Qr.UNKNOWN,n)}function sL(n){return new Jr(Qr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function aL(n){return new Jr(Qr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oL(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Jr(Qr.UNAUTHENTICATED,n)}function lL(){return new Jr(Qr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cL(n){return new Jr(Qr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function uL(){return new Jr(Qr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dL(){return new Jr(Qr.CANCELED,"User canceled the upload/download.")}function hL(n){return new Jr(Qr.INVALID_URL,"Invalid URL '"+n+"'.")}function fL(n){return new Jr(Qr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function pL(){return new Jr(Qr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+MN+"' property when initializing the app?")}function mL(){return new Jr(Qr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gL(){return new Jr(Qr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function yL(n){return new Jr(Qr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function x1(n){return new Jr(Qr.INVALID_ARGUMENT,n)}function ON(){return new Jr(Qr.APP_DELETED,"The Firebase app was deleted.")}function vL(n){return new Jr(Qr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function xf(n,e){return new Jr(Qr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function sf(n){throw new Jr(Qr.INTERNAL_ERROR,"Internal error: "+n)}class Vs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Vs.makeFromUrl(e,t)}catch{return new Vs(e,"")}if(r.path==="")return r;throw fL(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+s+u,"i"),f={bucket:1,path:3};function p(V){V.path_=decodeURIComponent(V.path)}const m="v[A-Za-z0-9_]+",x=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",w=new RegExp(`^https?://${x}/${m}/b/${s}/o${E}`,"i"),A={bucket:1,path:3},D=t===PN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",k=new RegExp(`^https?://${D}/${s}/${C}`,"i"),G=[{regex:d,indices:f,postModify:o},{regex:w,indices:A,postModify:p},{regex:k,indices:{bucket:1,path:2},postModify:p}];for(let V=0;V<G.length;V++){const ce=G[V],se=ce.regex.exec(e);if(se){const U=se[ce.indices.bucket];let I=se[ce.indices.path];I||(I=""),r=new Vs(U,I),ce.postModify(r);break}}if(r==null)throw hL(e);return r}}class bL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function wL(n,e,t){let r=1,s=null,o=null,u=!1,d=0;function f(){return d===2}let p=!1;function m(...C){p||(p=!0,e.apply(null,C))}function x(C){s=setTimeout(()=>{s=null,n(w,f())},C)}function E(){o&&clearTimeout(o)}function w(C,...k){if(p){E();return}if(C){E(),m.call(null,C,...k);return}if(f()||u){E(),m.call(null,C,...k);return}r<64&&(r*=2);let G;d===1?(d=2,G=0):G=(r+Math.random())*1e3,x(G)}let A=!1;function D(C){A||(A=!0,E(),!p&&(s!==null?(C||(d=2),clearTimeout(s),x(0)):C||(d=1)))}return x(0),o=setTimeout(()=>{u=!0,D(!0)},t),D}function xL(n){n(!1)}function SL(n){return n!==void 0}function _L(n){return typeof n=="object"&&!Array.isArray(n)}function Gv(n){return typeof n=="string"||n instanceof String}function ux(n){return $v()&&n instanceof Blob}function $v(){return typeof Blob<"u"}function S1(n,e,t,r){if(r<e)throw x1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw x1(`Invalid value for '${n}'. Expected ${t} or less.`)}function Dg(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function FN(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Fu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Fu||(Fu={}));function EL(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}class NL{constructor(e,t,r,s,o,u,d,f,p,m,x,E=!0,w=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=m,this.connectionFactory_=x,this.retry=E,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,D)=>{this.resolve_=A,this.reject_=D,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new tm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{const f=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===Fu.NO_ERROR,f=o.getStatus();if(!d||EL(f,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Fu.ABORT;r(!1,new tm(!1,null,m));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new tm(p,o))})},t=(r,s)=>{const o=this.resolve_,u=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());SL(f)?o(f):o()}catch(f){u(f)}else if(d!==null){const f=Hv();f.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,f)):u(f)}else if(s.canceled){const f=this.appDelete_?ON():dL();u(f)}else{const f=uL();u(f)}};this.canceled_?t(!1,new tm(!1,null,!0)):this.backoffId_=wL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&xL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function AL(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function TL(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function CL(n,e){e&&(n["X-Firebase-GMPID"]=e)}function jL(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function RL(n,e,t,r,s,o,u=!0,d=!1){const f=FN(n.urlParams),p=n.url+f,m=Object.assign({},n.headers);return CL(m,e),AL(m,t),TL(m,o),jL(m,r),new NL(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u,d)}function IL(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function DL(...n){const e=IL();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if($v())return new Blob(n);throw new Jr(Qr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function kL(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function LL(n){if(typeof atob>"u")throw yL("base-64");return atob(n)}const tl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gy{constructor(e,t){this.data=e,this.contentType=t||null}}function PL(n,e){switch(n){case tl.RAW:return new gy(UN(e));case tl.BASE64:case tl.BASE64URL:return new gy(BN(n,e));case tl.DATA_URL:return new gy(OL(e),FL(e))}throw Hv()}function UN(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=n.charCodeAt(++t);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function ML(n){let e;try{e=decodeURIComponent(n)}catch{throw xf(tl.DATA_URL,"Malformed data URL.")}return UN(e)}function BN(n,e){switch(n){case tl.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw xf(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case tl.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw xf(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=LL(e)}catch(s){throw s.message.includes("polyfill")?s:xf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class VN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw xf(tl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=UL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function OL(n){const e=new VN(n);return e.base64?BN(tl.BASE64,e.rest):ML(e.rest)}function FL(n){return new VN(n).contentType}function UL(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class Hc{constructor(e,t){let r=0,s="";ux(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(ux(this.data_)){const r=this.data_,s=kL(r,e,t);return s===null?null:new Hc(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Hc(r,!0)}}static getBlob(...e){if($v()){const t=e.map(r=>r instanceof Hc?r.data_:r);return new Hc(DL.apply(null,t))}else{const t=e.map(u=>Gv(u)?PL(tl.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)s[o++]=u[d]}),new Hc(s,!0)}}uploadData(){return this.data_}}function Wv(n){let e;try{e=JSON.parse(n)}catch{return null}return _L(e)?e:null}function BL(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function VL(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function zN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function zL(n,e){return e}class Us{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||zL}}let nm=null;function qL(n){return!Gv(n)||n.length<2?n:zN(n)}function qN(){if(nm)return nm;const n=[];n.push(new Us("bucket")),n.push(new Us("generation")),n.push(new Us("metageneration")),n.push(new Us("name","fullPath",!0));function e(o,u){return qL(u)}const t=new Us("name");t.xform=e,n.push(t);function r(o,u){return u!==void 0?Number(u):u}const s=new Us("size");return s.xform=r,n.push(s),n.push(new Us("timeCreated")),n.push(new Us("updated")),n.push(new Us("md5Hash",null,!0)),n.push(new Us("cacheControl",null,!0)),n.push(new Us("contentDisposition",null,!0)),n.push(new Us("contentEncoding",null,!0)),n.push(new Us("contentLanguage",null,!0)),n.push(new Us("contentType",null,!0)),n.push(new Us("metadata","customMetadata",!0)),nm=n,nm}function HL(n,e){function t(){const r=n.bucket,s=n.fullPath,o=new Vs(r,s);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function GL(n,e,t){const r={};r.type="file";const s=t.length;for(let o=0;o<s;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return HL(r,n),r}function HN(n,e,t){const r=Wv(e);return r===null?null:GL(n,r,t)}function $L(n,e,t,r){const s=Wv(e);if(s===null||!Gv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(p=>{const m=n.bucket,x=n.fullPath,E="/b/"+u(m)+"/o/"+u(x),w=Dg(E,t,r),A=FN({alt:"media",token:p});return w+A})[0]}function WL(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const dx="prefixes",hx="items";function YL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[dx])for(const s of t[dx]){const o=s.replace(/\/$/,""),u=n._makeStorageReference(new Vs(e,o));r.prefixes.push(u)}if(t[hx])for(const s of t[hx]){const o=n._makeStorageReference(new Vs(e,s.name));r.items.push(o)}return r}function KL(n,e,t){const r=Wv(t);return r===null?null:YL(n,e,r)}class Yv{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Kv(n){if(!n)throw Hv()}function XL(n,e){function t(r,s){const o=HN(n,s,e);return Kv(o!==null),o}return t}function QL(n,e){function t(r,s){const o=KL(n,e,s);return Kv(o!==null),o}return t}function JL(n,e){function t(r,s){const o=HN(n,s,e);return Kv(o!==null),$L(o,s,n.host,n._protocol)}return t}function Xv(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=lL():s=oL():t.getStatus()===402?s=aL(n.bucket):t.getStatus()===403?s=cL(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ZL(n){const e=Xv(n);function t(r,s){let o=e(r,s);return r.getStatus()===404&&(o=sL(n.path)),o.serverResponse=s.serverResponse,o}return t}function eP(n,e,t,r,s){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),s&&(o.maxResults=s);const u=e.bucketOnlyServerUrl(),d=Dg(u,n.host,n._protocol),f="GET",p=n.maxOperationRetryTime,m=new Yv(d,f,QL(n,e.bucket),p);return m.urlParams=o,m.errorHandler=Xv(e),m}function tP(n,e,t){const r=e.fullServerUrl(),s=Dg(r,n.host,n._protocol),o="GET",u=n.maxOperationRetryTime,d=new Yv(s,o,JL(n,t),u);return d.errorHandler=ZL(e),d}function nP(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function rP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=nP(null,e)),r}function iP(n,e,t,r,s){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let G="";for(let V=0;V<2;V++)G=G+Math.random().toString().slice(2);return G}const f=d();u["Content-Type"]="multipart/related; boundary="+f;const p=rP(e,r,s),m=WL(p,t),x="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+f+"--",w=Hc.getBlob(x,r,E);if(w===null)throw mL();const A={name:p.fullPath},D=Dg(o,n.host,n._protocol),C="POST",k=n.maxUploadRetryTime,H=new Yv(D,C,XL(n,t),k);return H.urlParams=A,H.headers=u,H.body=w.uploadData(),H.errorHandler=Xv(e),H}class sP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,o){if(this.sent_)throw sf("cannot .send() more than once");if(lu(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class aP extends sP{initXhr(){this.xhr_.responseType="text"}}function Qv(){return new aP}class Yu{constructor(e,t){this._service=e,t instanceof Vs?this._location=t:this._location=Vs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yu(e,t)}get root(){const e=new Vs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zN(this._location.path)}get storage(){return this._service}get parent(){const e=BL(this._location.path);if(e===null)return null;const t=new Vs(this._location.bucket,e);return new Yu(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw vL(e)}}function oP(n,e,t){n._throwIfRoot("uploadBytes");const r=iP(n.storage,n._location,qN(),new Hc(e,!0),t);return n.storage.makeRequestWithTokens(r,Qv).then(s=>({metadata:s,ref:n}))}function lP(n){const e={prefixes:[],items:[]};return GN(n,e).then(()=>e)}async function GN(n,e,t){const s=await cP(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await GN(n,e,s.nextPageToken)}function cP(n,e){e!=null&&typeof e.maxResults=="number"&&S1("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eP(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Qv)}function uP(n){n._throwIfRoot("getDownloadURL");const e=tP(n.storage,n._location,qN());return n.storage.makeRequestWithTokens(e,Qv).then(t=>{if(t===null)throw gL();return t})}function dP(n,e){const t=VL(n._location.path,e),r=new Vs(n._location.bucket,t);return new Yu(n.storage,r)}function hP(n){return/^[A-Za-z]+:\/\//.test(n)}function fP(n,e){return new Yu(n,e)}function $N(n,e){if(n instanceof Jv){const t=n;if(t._bucket==null)throw pL();const r=new Yu(t,t._bucket);return e!=null?$N(r,e):r}else return e!==void 0?dP(n,e):n}function pP(n,e){if(e&&hP(e)){if(n instanceof Jv)return fP(n,e);throw x1("To use ref(service, url), the first argument must be a Storage instance.")}else return $N(n,e)}function fx(n,e){const t=e?.[MN];return t==null?null:Vs.makeFromBucketSpec(t,n)}function mP(n,e,t,r={}){n.host=`${e}:${t}`;const s=lu(e);s&&(G1(`https://${n.host}/b`),$1("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:g_(o,n.app.options.projectId))}class Jv{constructor(e,t,r,s,o,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=PN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rL,this._maxUploadRetryTime=iL,this._requests=new Set,s!=null?this._bucket=Vs.makeFromBucketSpec(s,this._host):this._bucket=fx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Vs.makeFromBucketSpec(this._url,e):this._bucket=fx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){S1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){S1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ua(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yu(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new bL(ON());{const u=RL(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const px="@firebase/storage",mx="0.14.0";const WN="storage";function Sf(n,e,t){return n=Er(n),oP(n,e,t)}function gP(n){return n=Er(n),lP(n)}function _f(n){return n=Er(n),uP(n)}function Qd(n,e){return n=Er(n),pP(n,e)}function yP(n=K1(),e){n=Er(n);const r=lg(n,WN).getImmediate({identifier:e}),s=f_("storage");return s&&vP(r,...s),r}function vP(n,e,t,r={}){mP(n,e,t,r)}function bP(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Jv(t,r,s,e,Qu)}function wP(){qu(new Jc(WN,bP,"PUBLIC").setMultipleInstances(!0)),rl(px,mx,""),rl(px,mx,"esm2020")}wP();const xP={apiKey:"AIzaSyBBvchyq9AsOtWmzlVcdnug9FY_MTaz2U8",authDomain:"fees-management-system-70bb7.firebaseapp.com",projectId:"fees-management-system-70bb7",storageBucket:"fees-management-system-70bb7.firebasestorage.app",messagingSenderId:"416490982366",appId:"1:416490982366:web:65c9d54a605950582e6b4f"};console.log("Environment variables:");console.log("VITE_FIREBASE_AUTH_DOMAIN:","[SET]");console.log("VITE_FIREBASE_PROJECT_ID:","[SET]");console.log("VITE_FIREBASE_STORAGE_BUCKET:","[SET]");console.log("VITE_FIREBASE_MESSAGING_SENDER_ID:","[SET]");console.log("VITE_FIREBASE_APP_ID:","[SET]");const kg=b_(xP),Wn=$k(kg),An=GR(kg),Uu=yP(kg);console.log("Firebase app initialized:",!!kg);console.log("Firestore initialized:",!!Wn);console.log("Auth initialized:",!!An);console.log("Storage initialized:",!!Uu);iv(An,n=>{n?console.log("User is signed in:",n.uid):console.log("No user is signed in")});let Bu=null;const mn=()=>{if(!Bu)throw new Error("User not authenticated. Please sign in first.");return Bu},SP=async()=>{console.log("Auto-creating user collections for UID:",Bu)};iv(An,n=>{n?(Bu=n.uid,console.log("User authenticated with UID:",Bu),SP()):(Bu=null,console.log("No user is signed in"))});const vn=()=>Bu?!0:localStorage.getItem("isLoggedIn")==="true",fu=n=>{if(!vn())throw new Error("User not authenticated. Please sign in first.");const e=mn();return b1(Wn,`users/${e}/${n}`)},YN=()=>fu("students"),KN=()=>fu("payments"),XN=()=>fu("expenditures"),QN=()=>fu("attendance"),JN=()=>fu("staff"),_P=()=>fu("feedback"),EP=()=>fu("supportQueries"),ZN=()=>fu("staffAttendance"),_1=async n=>{try{if(console.log("=== FIREBASE CREATE USER PROFILE START ==="),console.log("User Data:",n),!vn())throw new Error("User not authenticated. Please sign in first.");const e=mn(),t=dr(Wn,"userProfiles",e),r=await Mf(t,n);return console.log("=== FIREBASE CREATE USER PROFILE END SUCCESS ==="),r}catch(e){throw console.error("Error creating user profile: ",e),e}},NP=async()=>{try{if(console.log("=== FIREBASE GET USER PROFILE START ==="),!vn())throw new Error("User not authenticated. Please sign in first.");const n=mn(),e=dr(Wn,"userProfiles",n),t=await yh(e);return t.exists()?(console.log("User profile data:",t.data()),console.log("=== FIREBASE GET USER PROFILE END SUCCESS ==="),{id:t.id,...t.data()}):(console.log("No user profile found"),console.log("=== FIREBASE GET USER PROFILE END SUCCESS ==="),null)}catch(n){throw console.error("Error getting user profile: ",n),n}},AP=async n=>{try{console.log("=== FIREBASE ADD STUDENT START ==="),console.log("Student Data:",n);const t={id:(await su(YN(),n)).id,...n};return console.log("=== FIREBASE ADD STUDENT END SUCCESS ==="),t}catch(e){throw console.error("Error adding student: ",e),e}},Lg=async()=>{try{const n=await du(YN()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(n){throw console.error("Error getting students: ",n),n}},TP=async()=>{try{const n=await du(_P()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(n){throw console.error("Error getting feedback: ",n),n}},CP=async()=>{try{const n=await du(EP()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(n){throw console.error("Error getting support queries: ",n),n}},af=async(n,e)=>{try{console.log("=== FIREBASE UPDATE STUDENT START ==="),console.log("Student ID (before conversion):",n,"Type:",typeof n),console.log("Student Data:",e);const t=String(n);console.log("Student ID (after conversion):",t,"Type:",typeof t);const r=dr(Wn,`users/${mn()}/students`,t);console.log("Student document reference created:",r);const s=await hu(r,e);return console.log("Firebase updateDoc result:",s),console.log("=== FIREBASE UPDATE STUDENT END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating student in Firebase: ",t),console.error("Error code:",t.code),console.error("Error message:",t.message),console.error("Error stack:",t.stack),t}},jP=async n=>{try{console.log("=== FIREBASE DELETE STUDENT START ==="),console.log("Student ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Student ID (after conversion):",e,"Type:",typeof e);const t=dr(Wn,`users/${mn()}/students`,e);return await vh(t),console.log("=== FIREBASE DELETE STUDENT END SUCCESS ==="),e}catch(e){throw console.error("Error deleting student: ",e),e}},eA=async n=>{try{console.log("=== FIREBASE ADD PAYMENT START ==="),console.log("Payment Data:",n);const t={id:(await su(KN(),n)).id,...n};return console.log("=== FIREBASE ADD PAYMENT END SUCCESS ==="),t}catch(e){throw console.error("Error adding payment: ",e),e}},ep=async()=>{try{console.log("=== FIREBASE GET PAYMENTS START ===");const n=await du(KN()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET PAYMENTS END SUCCESS ==="),e}catch(n){throw console.error("Error getting payments: ",n),n}},E1=async(n,e)=>{try{console.log("=== FIREBASE UPDATE PAYMENT START ==="),console.log("Payment ID (before conversion):",n,"Type:",typeof n),console.log("Payment Data:",e);const t=String(n);console.log("Payment ID (after conversion):",t,"Type:",typeof t);const r=dr(Wn,`users/${mn()}/payments`,t);return await hu(r,e),console.log("=== FIREBASE UPDATE PAYMENT END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating payment: ",t),t}},gx=async n=>{try{console.log("=== FIREBASE DELETE PAYMENT START ==="),console.log("Payment ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Payment ID (after conversion):",e,"Type:",typeof e);const t=dr(Wn,`users/${mn()}/payments`,e);return await vh(t),console.log("=== FIREBASE DELETE PAYMENT END SUCCESS ==="),e}catch(e){throw console.error("Error deleting payment: ",e),e}},RP=async n=>{try{console.log("=== FIREBASE ADD EXPENDITURE START ==="),console.log("Expenditure Data:",n);const t={id:(await su(XN(),n)).id,...n};return console.log("=== FIREBASE ADD EXPENDITURE END SUCCESS ==="),t}catch(e){throw console.error("Error adding expenditure: ",e),e}},Zv=async()=>{try{console.log("=== FIREBASE GET EXPENDITURES START ===");const n=await du(XN()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET EXPENDITURES END SUCCESS ==="),e}catch(n){throw console.error("Error getting expenditures: ",n),n}},IP=async(n,e)=>{try{console.log("=== FIREBASE UPDATE EXPENDITURE START ==="),console.log("Expenditure ID (before conversion):",n,"Type:",typeof n),console.log("Expenditure Data:",e);const t=String(n);console.log("Expenditure ID (after conversion):",t,"Type:",typeof t);const r=dr(Wn,`users/${mn()}/expenditures`,t);return await hu(r,e),console.log("=== FIREBASE UPDATE EXPENDITURE END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating expenditure: ",t),t}},DP=async n=>{try{console.log("=== FIREBASE DELETE EXPENDITURE START ==="),console.log("Expenditure ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Expenditure ID (after conversion):",e,"Type:",typeof e);const t=dr(Wn,`users/${mn()}/expenditures`,e);return await vh(t),console.log("=== FIREBASE DELETE EXPENDITURE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting expenditure: ",e),e}},kP=async n=>{try{console.log("=== FIREBASE ADD ATTENDANCE START ==="),console.log("Attendance Data:",n);const t={id:(await su(QN(),n)).id,...n};return console.log("=== FIREBASE ADD ATTENDANCE END SUCCESS ==="),t}catch(e){throw console.error("Error adding attendance: ",e),e}},LP=async()=>{try{console.log("=== FIREBASE GET ATTENDANCE START ===");const n=await du(QN()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET ATTENDANCE END SUCCESS ==="),e}catch(n){throw console.error("Error getting attendance: ",n),n}},PP=async(n,e)=>{try{console.log("=== FIREBASE UPDATE ATTENDANCE START ==="),console.log("Attendance ID (before conversion):",n,"Type:",typeof n),console.log("Attendance Data:",e);const t=String(n);console.log("Attendance ID (after conversion):",t,"Type:",typeof t);const r=dr(Wn,`users/${mn()}/attendance`,t);return await hu(r,e),console.log("=== FIREBASE UPDATE ATTENDANCE END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating attendance: ",t),t}},MP=async n=>{try{console.log("=== FIREBASE DELETE ATTENDANCE START ==="),console.log("Attendance ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Attendance ID (after conversion):",e,"Type:",typeof e);const t=dr(Wn,`users/${mn()}/attendance`,e);return await vh(t),console.log("=== FIREBASE DELETE ATTENDANCE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting attendance: ",e),e}},OP=async(n,e)=>{try{console.log("=== FIREBASE UPLOAD STUDENT PHOTO START ==="),console.log("Student ID:",n),console.log("File:",e);const t=Qd(Uu,`users/${mn()}/student-photos/${n}/${e.name}`),r=await Sf(t,e),s=await _f(r.ref);return console.log("=== FIREBASE UPLOAD STUDENT PHOTO END SUCCESS ==="),s}catch(t){throw console.error("Error uploading student photo: ",t),t}},FP=async()=>{try{console.log("Testing Firebase Storage connection...");const n=Qd(Uu,`users/${mn()}`),e=await gP(n);return console.log("Storage connection test successful:",{prefixes:e.prefixes.length,items:e.items.length}),!0}catch(n){return console.error("Storage connection test failed:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),!1}},UP=async n=>{try{console.log("=== FIREBASE ADD STAFF START ==="),console.log("Staff Data:",n);const t={id:(await su(JN(),n)).id,...n};return console.log("=== FIREBASE ADD STAFF END SUCCESS ==="),t}catch(e){throw console.error("Error adding staff: ",e),e}},BP=async()=>{try{console.log("=== FIREBASE GET STAFF START ===");const n=await du(JN()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET STAFF END SUCCESS ==="),e}catch(n){throw console.error("Error getting staff: ",n),n}},VP=async(n,e)=>{try{console.log("=== FIREBASE UPDATE STAFF START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n),console.log("Staff Data:",e);const t=String(n);console.log("Firebase Document ID (after conversion):",t,"Type:",typeof t);const r=dr(Wn,`users/${mn()}/staff`,t);return await hu(r,e),console.log("=== FIREBASE UPDATE STAFF END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating staff: ",t),t}},zP=async n=>{try{console.log("=== FIREBASE DELETE STAFF START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Firebase Document ID (after conversion):",e,"Type:",typeof e);const t=dr(Wn,`users/${mn()}/staff`,e);return await vh(t),console.log("=== FIREBASE DELETE STAFF END SUCCESS ==="),e}catch(e){throw console.error("Error deleting staff: ",e),e}},qP=async n=>{try{console.log("=== FIREBASE ADD STAFF ATTENDANCE START ==="),console.log("Attendance Data:",n);const e={};for(const s in n)n[s]!==void 0?e[s]=n[s]:console.warn("Skipping undefined field in attendanceData:",s);console.log("Cleaned Attendance Data:",e);const r={id:(await su(ZN(),e)).id,...e};return console.log("=== FIREBASE ADD STAFF ATTENDANCE END SUCCESS ==="),r}catch(e){throw console.error("Error adding staff attendance: ",e),e}},HP=async()=>{try{console.log("=== FIREBASE GET STAFF ATTENDANCE START ===");const n=await du(ZN()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET STAFF ATTENDANCE END SUCCESS ==="),e}catch(n){throw console.error("Error getting staff attendance: ",n),n}},GP=async(n,e)=>{try{if(console.log("=== FIREBASE UPDATE STAFF ATTENDANCE START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n),console.log("Attendance Data:",e),!n)throw new Error("Firebase document ID is required for update operation");const t=String(n);console.log("Firebase Document ID (after conversion):",t,"Type:",typeof t);const r={};for(const o in e)e[o]!==void 0?r[o]=e[o]:console.warn("Skipping undefined field in attendanceData:",o);console.log("Cleaned Attendance Data:",r);const s=dr(Wn,`users/${mn()}/staffAttendance`,t);return await hu(s,r),console.log("=== FIREBASE UPDATE STAFF ATTENDANCE END SUCCESS ==="),{id:t,...r}}catch(t){throw console.error("Error updating staff attendance: ",t),t}},$P=async n=>{try{if(console.log("=== FIREBASE DELETE STAFF ATTENDANCE START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n),!n)throw new Error("Firebase document ID is required for delete operation");const e=String(n);console.log("Firebase Document ID (after conversion):",e,"Type:",typeof e);const t=dr(Wn,`users/${mn()}/staffAttendance`,e);return await vh(t),console.log("=== FIREBASE DELETE STAFF ATTENDANCE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting staff attendance: ",e),e}},WP=({title:n,value:e,icon:t,color:r,animate:s=!1})=>{const[o,u]=K.useState(s?0:e);return K.useEffect(()=>{if(s){const d=typeof e=="string"?e.includes("")?parseFloat(e.replace(/[^0-9.]/g,"")):0:e;if(d===0){u(e);return}const p=d/(1e3/16);let m=0;const x=setInterval(()=>{m+=p,m>=d?(clearInterval(x),u(e)):typeof e=="string"&&e.includes("")?u(`${Math.floor(m).toLocaleString()}`):u(Math.floor(m))},16);return()=>clearInterval(x)}},[e,s]),c.jsxs("div",{className:"stat-card",children:[c.jsx("div",{className:"stat-icon",style:{backgroundColor:`${r}20`,color:r},children:c.jsx("span",{className:"stat-icon-content",children:t})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:n}),c.jsx("div",{className:"stat-value",children:s?o:e})]})]})},YP=({data:n})=>{const{collected:e,pending:t}=n,r=e+t;if(r===0)return c.jsx("div",{className:"chart-placeholder",children:"No data available"});const s=e/r*100,o=t/r*100,u=180,d=u/2,f=70,p=45,m=k=>k*Math.PI/180,x=s/100*360,E=(k,H,G,V)=>{const ce=d+G*Math.cos(m(k-90)),se=d+G*Math.sin(m(k-90)),U=d+G*Math.cos(m(H-90)),I=d+G*Math.sin(m(H-90)),R=d+V*Math.cos(m(k-90)),q=d+V*Math.sin(m(k-90)),j=d+V*Math.cos(m(H-90)),F=d+V*Math.sin(m(H-90)),M=H-k<=180?0:1;return[`M ${ce} ${se}`,`A ${G} ${G} 0 ${M} 1 ${U} ${I}`,`L ${j} ${F}`,`A ${V} ${V} 0 ${M} 0 ${R} ${q}`,"Z"].join(" ")},w=E(0,x,f,p),A=E(x,360,f,p),[D,C]=K.useState(null);return c.jsxs("div",{className:"pie-chart-container",children:[c.jsx("div",{className:"pie-chart-wrapper",children:c.jsxs("svg",{viewBox:`0 0 ${u} ${u}`,className:"pie-svg",style:{width:"100%",height:"auto"},children:[c.jsx("path",{d:w,fill:"var(--success-color)",className:"pie-slice",onMouseEnter:()=>C("collected"),onMouseLeave:()=>C(null),style:{transform:D==="collected"?"scale(1.05)":"scale(1)",filter:D==="collected"?"drop-shadow(0 4px 10px rgba(28, 200, 138, 0.3))":"drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1))",transition:"all 0.3s ease"}}),c.jsx("path",{d:A,fill:"var(--warning-color)",className:"pie-slice",onMouseEnter:()=>C("pending"),onMouseLeave:()=>C(null),style:{transform:D==="pending"?"scale(1.05)":"scale(1)",filter:D==="pending"?"drop-shadow(0 4px 10px rgba(246, 194, 62, 0.3))":"drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1))",transition:"all 0.3s ease"}}),c.jsx("circle",{cx:d,cy:d,r:p-6,fill:"white",stroke:"rgba(0, 0, 0, 0.03)",strokeWidth:"1"}),c.jsx("text",{x:d,y:d-6,textAnchor:"middle",className:"center-text",fill:"var(--text-primary)",style:{fontSize:"20px",fontWeight:"800"},children:Math.round(r).toLocaleString()}),c.jsx("text",{x:d,y:d+10,textAnchor:"middle",className:"center-text",fill:"var(--text-secondary)",style:{fontSize:"9px",fontWeight:"700",letterSpacing:"1px"},children:"TOTAL"})]})}),c.jsxs("div",{className:"chart-legend-side",children:[c.jsxs("div",{className:"chart-legend",children:[c.jsxs("div",{className:"legend-item",onMouseEnter:()=>C("collected"),onMouseLeave:()=>C(null),style:{transform:D==="collected"?"translateY(-2px)":"translateY(0)",transition:"all 0.2s ease"},children:[c.jsx("div",{className:"legend-color",style:{backgroundColor:"var(--success-color)"}}),c.jsxs("div",{className:"legend-text",children:[c.jsx("div",{className:"legend-label",children:"Collected"}),c.jsxs("div",{className:"legend-value",children:["",Math.round(e).toLocaleString()]})]}),c.jsxs("div",{className:"legend-percentage",children:[s.toFixed(1),"%"]})]}),c.jsxs("div",{className:"legend-item",onMouseEnter:()=>C("pending"),onMouseLeave:()=>C(null),style:{transform:D==="pending"?"translateY(-2px)":"translateY(0)",transition:"all 0.2s ease"},children:[c.jsx("div",{className:"legend-color",style:{backgroundColor:"var(--warning-color)"}}),c.jsxs("div",{className:"legend-text",children:[c.jsx("div",{className:"legend-label",children:"Pending"}),c.jsxs("div",{className:"legend-value",children:["",Math.round(t).toLocaleString()]})]}),c.jsxs("div",{className:"legend-percentage",children:[o.toFixed(1),"%"]})]})]}),c.jsxs("div",{className:"percentage-display",children:[c.jsxs("div",{className:"percentage-value",children:[s.toFixed(1),"%"]}),c.jsx("div",{className:"percentage-label",children:"Collection Rate"}),c.jsxs("div",{className:"total-amount",children:["Total: ",Math.round(r).toLocaleString()]})]})]})]})},KP=({data:n,width:e="100%",height:t=500})=>{const[r,s]=K.useState(null);if(!n||n.length===0)return c.jsx("div",{className:"chart-placeholder",children:"No data available"});const o=n.map(H=>H.amount),u=Math.max(...o),d=Math.min(...o),f=u-d||1,p=30,m=typeof e=="string"?1e3:e,x=t,E=n.map((H,G)=>{const V=p+G*(m-2*p)/(n.length-1),ce=x-p-(H.amount-d)/f*(x-2*p);return{x:V,y:ce,...H}}),w=H=>{if(H.length<2)return"";let G=`M ${H[0].x} ${H[0].y}`;for(let V=1;V<H.length;V++){const ce=H[V],se=H[V-1],U=se.x+(ce.x-se.x)*.5,I=se.y,R=ce.x-(ce.x-se.x)*.5,q=ce.y;G+=` C ${U} ${I}, ${R} ${q}, ${ce.x} ${ce.y}`}return G},A=w(E),D=()=>[0,.25,.5,.75,1].map((H,G)=>c.jsx("line",{x1:p,y1:p+H*(x-2*p),x2:m-p,y2:p+H*(x-2*p),className:"grid-line"},G)),C=(H,G)=>{s({x:G.clientX,y:G.clientY,content:`${H.amount.toLocaleString()} collected in ${H.month}`})},k=()=>{s(null)};return c.jsxs("div",{className:"line-chart-container",children:[c.jsxs("svg",{width:e,height:t,viewBox:`0 0 ${m} ${x}`,preserveAspectRatio:"xMidYMid meet",className:"line-chart",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:"var(--info-color)"}),c.jsx("stop",{offset:"100%",stopColor:"var(--info-color-darker)"})]}),c.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"var(--info-color)",stopOpacity:"0.2"}),c.jsx("stop",{offset:"100%",stopColor:"var(--info-color)",stopOpacity:"0"})]}),c.jsxs("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[c.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),c.jsx("feOffset",{dx:"2",dy:"2",result:"offsetblur"}),c.jsx("feFlood",{floodColor:"rgba(0,0,0,0.1)"}),c.jsx("feComposite",{in2:"offsetblur",operator:"in"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),D(),E.length>1&&c.jsx("path",{d:`${w(E)} L ${E[E.length-1].x} ${x-p} L ${E[0].x} ${x-p} Z`,fill:"url(#areaGradient)",className:"area-fill"}),c.jsx("path",{d:A,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"2.5",filter:"url(#shadow)",className:"data-line"}),E.map((H,G)=>c.jsx("circle",{cx:H.x,cy:H.y,r:"6",fill:"white",stroke:"var(--info-color)",strokeWidth:"2",className:"data-point",onMouseOver:V=>C(H,V),onMouseOut:k},G)),E.map((H,G)=>c.jsx("text",{x:H.x,y:x-p+20,textAnchor:"middle",fontSize:"10",fill:"var(--text-secondary)",className:"axis-label",children:H.month},G))]}),r&&c.jsx("div",{className:"chart-tooltip",style:{position:"fixed",left:r.x+10,top:r.y-30,background:"white",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"12px",fontWeight:"600",pointerEvents:"none",zIndex:1e3,border:"1px solid rgba(0, 0, 0, 0.05)"},children:r.content})]})},XP=({data:n,width:e="100%",height:t=300})=>{const[r,s]=K.useState(null),u=["Sep 2025","Oct 2025","Nov 2025","Dec 2025"].map(V=>n.find(se=>se.month===V)||{month:V,collected:0,pending:0}),d={top:30,right:20,bottom:50,left:60},f=typeof e=="string"?1e3:e,p=t,m=f-d.left-d.right,x=p-d.top-d.bottom,E=[0,1e4,2e4,3e4,4e4],w=4e4,A=20,D=A*2.5,C=(m-D*u.length)/(u.length-1),k=[];u.forEach((V,ce)=>{const se=d.left+ce*(D+C),U=V.collected/w*x,I=d.top+x-U;k.push({x:se,y:I,width:A,height:U,value:V.collected,month:V.month,type:"Collected",color:"#1cc88a",isCurrent:V.month==="Dec 2025"});const R=V.pending/w*x,q=d.top+x-R;k.push({x:se+A*1.5,y:q,width:A,height:R,value:V.pending,month:V.month,type:"Pending",color:"#f6c23e",isCurrent:V.month==="Dec 2025"})});const H=(V,ce)=>{const se=u.find(U=>U.month===V.month);s({x:ce.clientX,y:ce.clientY,month:V.month,collected:se.collected,pending:se.pending})},G=()=>{s(null)};return c.jsxs("div",{className:"bar-chart-container",children:[c.jsxs("svg",{width:e,height:t,viewBox:`0 0 ${f} ${p}`,preserveAspectRatio:"xMidYMid meet",className:"bar-chart",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"collectedGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#1cc88a"}),c.jsx("stop",{offset:"100%",stopColor:"#139d6d"})]}),c.jsxs("linearGradient",{id:"pendingGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#f6c23e"}),c.jsx("stop",{offset:"100%",stopColor:"#e5a525"})]}),c.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"3",result:"blur"}),c.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),E.map((V,ce)=>{const se=d.top+x-V/w*x;return c.jsx("line",{x1:d.left,y1:se,x2:f-d.right,y2:se,stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:"1"},ce)}),E.map((V,ce)=>{const se=d.top+x-V/w*x;return c.jsxs("text",{x:d.left-10,y:se+4,textAnchor:"end",fontSize:"14",fill:"#6c757d",fontFamily:"sans-serif",children:["",V===0?"0":V>=1e3?`${V/1e3}k`:V]},ce)}),k.map((V,ce)=>c.jsxs("g",{children:[c.jsx("rect",{x:V.x,y:V.y,width:V.width,height:V.height,fill:V.type==="Collected"?"url(#collectedGradient)":"url(#pendingGradient)",rx:"8",ry:"8",onMouseOver:se=>H(V,se),onMouseOut:G,style:{opacity:V.value===0?.3:1,filter:V.isCurrent?"url(#glow)":"none"}}),V.isCurrent&&c.jsx("rect",{x:V.x-1,y:V.y-1,width:V.width+2,height:V.height+2,fill:"none",rx:"9",ry:"9",stroke:"#1cc88a",strokeWidth:"1",strokeDasharray:"3,3"})]},ce)),u.map((V,ce)=>{const se=d.left+ce*(D+C)+D/2;return c.jsxs("g",{children:[c.jsx("text",{x:se,y:p-d.bottom+20,textAnchor:"middle",fontSize:"14",fill:"#6c757d",fontFamily:"sans-serif",children:V.month.split(" ")[0]}),V.month==="Dec 2025"&&c.jsx("text",{x:se,y:p-d.bottom+35,textAnchor:"middle",fontSize:"12",fill:"#1cc88a",fontWeight:"600",fontFamily:"sans-serif",children:"Current"})]},ce)})]}),c.jsxs("div",{className:"chart-legend-top-right",children:[c.jsxs("div",{className:"legend-item-horizontal",children:[c.jsx("div",{className:"legend-color-box",style:{backgroundColor:"#1cc88a"}}),c.jsx("span",{className:"legend-label",children:"Collected"})]}),c.jsxs("div",{className:"legend-item-horizontal",children:[c.jsx("div",{className:"legend-color-box",style:{backgroundColor:"#f6c23e"}}),c.jsx("span",{className:"legend-label",children:"Pending"})]})]}),r&&c.jsxs("div",{className:"chart-tooltip",style:{position:"fixed",left:r.x+10,top:r.y-30,background:"white",padding:"10px 15px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"13px",fontWeight:"600",pointerEvents:"none",zIndex:1e3,border:"1px solid rgba(0, 0, 0, 0.05)",minWidth:"180px"},children:[c.jsx("div",{style:{marginBottom:"5px",fontWeight:"700"},children:r.month}),c.jsxs("div",{style:{color:"#1cc88a"},children:["Collected: ",r.collected.toLocaleString()]}),c.jsxs("div",{style:{color:"#f6c23e"},children:["Pending: ",r.pending.toLocaleString()]})]})]})},QP=({totalFees:n,collectedFees:e})=>{const[t,r]=K.useState([]),[s,o]=K.useState(!0),[u,d]=K.useState(null);K.useEffect(()=>{const x=async()=>{try{o(!0);const w=await Zv();r(w)}catch(w){console.error("Error fetching expenditures:",w),d("Failed to load expenditure data")}finally{o(!1)}};x();const E=()=>{x()};return window.addEventListener("expenditureUpdated",E),()=>{window.removeEventListener("expenditureUpdated",E)}},[]);const f=t.reduce((x,E)=>x+(parseFloat(E.total)||0),0),p=n-f,m=p>=0;return s?c.jsxs("div",{className:"profit-loss-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("h3",{children:"Financial Status"})}),c.jsx("div",{className:"card-content",children:c.jsx("div",{className:"loading",children:"Loading..."})})]}):u?c.jsxs("div",{className:"profit-loss-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("h3",{children:"Financial Status"})}),c.jsx("div",{className:"card-content",children:c.jsx("div",{className:"error",children:u})})]}):c.jsxs("div",{className:"profit-loss-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("h3",{children:"Financial Status"})}),c.jsx("div",{className:"card-content",children:c.jsxs("div",{className:"financial-summary",children:[c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"label",children:"Total Income (Fees)"}),c.jsxs("span",{className:"value income",children:["",n.toLocaleString()]})]}),c.jsxs("div",{className:"summary-item",children:[c.jsx("span",{className:"label",children:"Total Expenditure"}),c.jsxs("span",{className:"value expenditure",children:["",f.toLocaleString()]})]}),c.jsxs("div",{className:`summary-item ${m?"profit":"loss"}`,children:[c.jsxs("div",{children:[c.jsxs("div",{className:"label",children:["Net ",m?"Profit":"Loss"]}),c.jsx("div",{className:"helper-text",children:"Financial health indicator"})]}),c.jsxs("span",{className:`value ${m?"profit":"loss"}`,children:["",Math.abs(p).toLocaleString()]})]})]})})]})},JP=({onClose:n})=>{const[e,t]=K.useState([]),[r,s]=K.useState(!0),[o,u]=K.useState("month"),[d,f]=K.useState("desc");K.useEffect(()=>{p()},[]);const p=async()=>{try{const w=await ep(),A={};w.forEach(C=>{if(!C.createdAt)return;let k;if(C.createdAt instanceof Date?k=C.createdAt:typeof C.createdAt=="string"?k=new Date(C.createdAt):C.createdAt.toDate&&(k=C.createdAt.toDate()),!k||isNaN(k.getTime()))return;const H=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}`,G=k.toLocaleString("en-US",{month:"long",year:"numeric"});A[H]||(A[H]={month:G,totalAmount:0,paymentCount:0}),A[H].totalAmount+=parseFloat(C.amount)||0,A[H].paymentCount+=1});const D=Object.values(A);D.sort((C,k)=>new Date(k.month)-new Date(C.month)),t(D),s(!1)}catch(w){console.error("Error fetching history data:",w),s(!1)}},m=w=>{o===w?f(d==="asc"?"desc":"asc"):(u(w),f("desc"))},x=[...e].sort((w,A)=>{let D,C;switch(o){case"month":D=new Date(w.month),C=new Date(A.month);break;case"amount":D=w.totalAmount,C=A.totalAmount;break;case"count":D=w.paymentCount,C=A.paymentCount;break;default:return 0}return d==="asc"?D>C?1:-1:D<C?1:-1}),E=()=>{const w=[["Month","Total Collected ()","Total Payments"],...x.map(k=>[k.month,k.totalAmount,k.paymentCount])].map(k=>k.join(",")).join(`
`),A=new Blob([w],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(A),C=document.createElement("a");C.setAttribute("href",D),C.setAttribute("download","monthly-history.csv"),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)};return r?c.jsx("div",{className:"modal-overlay",onClick:n,children:c.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Monthly History"}),c.jsx("button",{className:"close-button",onClick:n,children:""})]}),c.jsx("div",{className:"loading",children:"Loading history data..."})]})}):c.jsx("div",{className:"modal-overlay",onClick:n,children:c.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Monthly History"}),c.jsx("button",{className:"close-button",onClick:n,children:""})]}),c.jsx("div",{className:"modal-actions",children:c.jsx("button",{className:"export-button",onClick:E,children:"Export to CSV"})}),c.jsx("div",{className:"history-table-container",children:c.jsxs("table",{className:"history-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsxs("th",{onClick:()=>m("month"),children:["Month ",o==="month"&&(d==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>m("amount"),children:["Total Collected () ",o==="amount"&&(d==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>m("count"),children:["Total Payments ",o==="count"&&(d==="asc"?"":"")]})]})}),c.jsx("tbody",{children:x.map((w,A)=>c.jsxs("tr",{children:[c.jsx("td",{children:w.month}),c.jsxs("td",{children:["",w.totalAmount.toLocaleString()]}),c.jsx("td",{children:w.paymentCount})]},A))})]})})]})})},Fc=({data:n,width:e=40,height:t=20,color:r="var(--info-color)"})=>{if(!n||n.length<2)return null;const s=0,o=e,u=0,d=t,f=Math.min(...n),m=Math.max(...n)-f||1,x=n.map((E,w)=>{const A=s+w/(n.length-1)*(o-s),D=d-(E-f)/m*(d-u);return`${A},${D}`}).join(" ");return c.jsx("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,children:c.jsx("polyline",{points:x,fill:"none",stroke:r,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"})})},yx=({type:n="card",width:e="100%",height:t="auto",count:r=1})=>{const s=()=>{switch(n){case"card":return c.jsxs("div",{className:"skeleton-card",style:{width:e,height:t},children:[c.jsx("div",{className:"skeleton-header"}),c.jsxs("div",{className:"skeleton-content",children:[c.jsx("div",{className:"skeleton-line"}),c.jsx("div",{className:"skeleton-line"}),c.jsx("div",{className:"skeleton-line"})]})]});case"text":return c.jsx("div",{className:"skeleton-text",style:{width:e,height:t},children:c.jsx("div",{className:"skeleton-line"})});case"avatar":return c.jsx("div",{className:"skeleton-avatar",style:{width:e,height:t}});case"image":return c.jsx("div",{className:"skeleton-image",style:{width:e,height:t}});default:return c.jsx("div",{className:"skeleton-default",style:{width:e,height:t}})}};return c.jsx(c.Fragment,{children:Array.from({length:r}).map((o,u)=>c.jsx("div",{className:"skeleton-wrapper",children:s()},u))})},Qc=async(n,e={})=>{try{const t=dr(Wn,`subscriptions/${n}`),r=await yh(t);if(r.exists())return console.log("Subscription already exists for user:",n),r.data();const s=new Date,o=new Date;o.setDate(o.getDate()+7);const u={plan:"trial",isPaid:!1,status:"active",trialStartDate:an.fromDate(s),trialEndsAt:an.fromDate(o),createdAt:an.fromDate(s),userId:n,...e};return await Mf(t,u),console.log("Trial subscription created successfully for user:",n),u}catch(t){throw console.error("Error creating subscription:",t),t}},au=async n=>{try{const e=dr(Wn,`subscriptions/${n}`),t=await yh(e);return t.exists()?t.data():(console.log("No subscription found for user:",n),null)}catch(e){throw console.error("Error getting subscription:",e),e}},vx=async n=>{try{const e=await au(n);if(!e)return console.log("No subscription found for user:",n),!1;const t=new Date,r=e.isPaid===!0,s=e.plan==="trial";let o=!1;if(e.trialEndsAt){let u;e.trialEndsAt&&typeof e.trialEndsAt.toDate=="function"?u=e.trialEndsAt.toDate():e.trialEndsAt instanceof Date?u=e.trialEndsAt:u=new Date(e.trialEndsAt),o=t>u}if(r&&e.expiresAt){let u;if(e.expiresAt&&typeof e.expiresAt.toDate=="function"?u=e.expiresAt.toDate():e.expiresAt instanceof Date?u=e.expiresAt:u=new Date(e.expiresAt),t<=u)return!0}return s&&!o?!0:((s&&o||r&&e.expiresAt&&t>new Date(e.expiresAt.toDate()))&&await hu(dr(Wn,`subscriptions/${n}`),{status:"expired",lastUpdated:an.now()}),!1)}catch(e){return console.error("Error checking subscription status:",e),!1}},tA=n=>{if(!n)return 0;let e;n&&typeof n.toDate=="function"?e=n.toDate():n instanceof Date?e=n:e=new Date(n);const r=e-new Date,s=Math.ceil(r/(1e3*60*60*24));return Math.max(0,s)},yy=n=>{if(!n)return!1;if(n.isPaid===!0&&n.expiresAt){const t=n.expiresAt.toDate();return new Date<=t}return!1},vy=n=>{if(!n)return!1;if(n.plan==="trial"&&n.trialEndsAt){const t=n.trialEndsAt.toDate();return!(new Date>t)}return!1},by=n=>{if(!n)return!1;if(n.plan==="trial"&&n.trialEndsAt){const t=n.trialEndsAt.toDate();return new Date>t}return!1},nA=K.createContext(),Md=new Set,e2=()=>{const n=K.useContext(nA);if(!n)throw new Error("useSubscription must be used within a SubscriptionProvider");return n},ZP=({children:n})=>{console.log("SubscriptionProvider initialized");const[e,t]=K.useState(null),[r,s]=K.useState(!1),[o,u]=K.useState(!0),[d,f]=K.useState(null);K.useEffect(()=>{let A;return An&&(console.log("Setting up auth state listener"),A=An.onAuthStateChanged(async D=>{if(console.log("Auth state changed, user:",D?.uid),D)try{console.log("Subscription context: Checking subscription for user:",D.uid),u(!0),f(null);let C=await au(D.uid);if(console.log("Subscription context: Got subscription data:",C),!C){if(console.log("No subscription found, creating new one for user:",D.uid),Md.has(D.uid)){console.log("Subscription creation already in progress for user:",D.uid),await new Promise(V=>setTimeout(V,100));return}Md.add(D.uid);try{console.log("Creating subscription for user:",D.uid),C=await Qc(D.uid),console.log("Subscription created for user:",D.uid,C)}catch(V){throw console.error("Error creating subscription for user:",D.uid,V),console.error("Error details:",V.message,V.stack),V}finally{Md.delete(D.uid)}}t(C);const k=yy(C),H=vy(C),G=by(C);console.log("Subscription context: Paid user:",k),console.log("Subscription context: Trial user:",H),console.log("Subscription context: Trial expired:",G),console.log("Subscription context: Subscription data:",C),s(k||H)}catch(C){console.error("Error fetching/creating subscription for user:",D?.uid,C),console.error("Error details:",C.message,C.stack),f(C.message),s(!1),t(null)}finally{console.log("Subscription context: Finished loading for user:",D?.uid),u(!1)}else t(null),s(!1),u(!1)})),()=>{A&&A()}},[]);const p=K.useCallback(async()=>{if(An.currentUser)try{u(!0),f(null);let A=await au(An.currentUser.uid);if(!A){if(Md.has(An.currentUser.uid)){await new Promise(H=>setTimeout(H,100));return}Md.add(An.currentUser.uid);try{A=await Qc(An.currentUser.uid)}finally{Md.delete(An.currentUser.uid)}}t(A);const D=yy(A),C=vy(A),k=by(A);console.log("Refresh subscription: Paid user:",D),console.log("Refresh subscription: Trial user:",C),console.log("Refresh subscription: Trial expired:",k),s(D||C)}catch(A){console.error("Error refreshing/creating subscription:",A),f(A.message),s(!1)}finally{u(!1)}},[An.currentUser]),m=yy(e),x=vy(e),E=by(e),w={subscription:e,hasActiveSub:r,loading:o,error:d,refreshSubscription:p,isPaidUser:m,isTrialUser:x,isTrialExpired:E};return c.jsx(nA.Provider,{value:w,children:n})},e8=()=>{const{subscription:n,loading:e}=e2();if(e||!n||n.isPaid===!0||n.plan!=="trial"||n.status==="expired")return null;const t=tA(n.trialEndsAt);return t<=0?null:c.jsxs("div",{className:"trial-banner",style:{backgroundColor:"#e3f2fd",color:"#1976d2",padding:"16px",borderRadius:"8px",marginBottom:"20px",border:"2px solid #bbdefb",textAlign:"center",fontWeight:"500",fontSize:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsx("strong",{children:" Free Trial Active!"})," You have ",t," day",t!==1?"s":""," remaining.",c.jsx("br",{}),c.jsx("small",{style:{display:"block",marginTop:"8px"},children:c.jsx("a",{href:"/subscribe",style:{backgroundColor:"#1976d2",color:"white",padding:"8px 16px",borderRadius:"4px",textDecoration:"none",fontWeight:"600",display:"inline-block",marginTop:"8px"},children:"Subscribe Now for 499/month"})})]})},rc=({children:n})=>c.jsxs("div",{className:"root-layout",children:[c.jsx(e8,{}),c.jsx("div",{className:"main-content-wrapper",children:c.jsx("div",{className:"page-container",children:n})})]}),bx=()=>{const n=ci(),[e,t]=K.useState("Administrator"),[r,s]=K.useState({totalStudents:0,totalFees:0,collectedFees:0,pendingFees:0,todayCollections:0,overduePayments:0,completedPayments:0,avgPaymentAmount:0}),[o,u]=K.useState({totalStudents:0,totalFees:0,collectedFees:0,pendingFees:0,todayCollections:0,overduePayments:0,completedPayments:0,avgPaymentAmount:0,collectionRate:0}),[d,f]=K.useState(!0),[p,m]=K.useState({totalStudents:[],totalFees:[],collectedFees:[],pendingFees:[],todayCollections:[],collectionRate:[],overduePayments:[],completedPayments:[],avgPaymentAmount:[]}),[x,E]=K.useState([]),[w,A]=K.useState({collected:0,pending:0}),[D,C]=K.useState([]),[k,H]=K.useState([]),[G,V]=K.useState(""),[ce,se]=K.useState([]),[U,I]=K.useState(!1),[R,q]=K.useState(!0),[j,F]=K.useState(!1),M=K.useRef(null);K.useEffect(()=>{ne(),we();const Z=()=>{ne()};return window.addEventListener("paymentAdded",Z),window.addEventListener("paymentRecorded",Z),window.addEventListener("paymentUpdated",Z),window.addEventListener("paymentDeleted",Z),window.addEventListener("studentsUpdated",Z),window.addEventListener("dashboardRefresh",Z),window.addEventListener("paymentsRefresh",Z),()=>{window.removeEventListener("paymentAdded",Z),window.removeEventListener("paymentRecorded",Z),window.removeEventListener("paymentUpdated",Z),window.removeEventListener("paymentDeleted",Z),window.removeEventListener("studentsUpdated",Z),window.removeEventListener("dashboardRefresh",Z),window.removeEventListener("paymentsRefresh",Z)}},[]),K.useEffect(()=>{const Z=ae=>{j&&ae.target.closest(".avatar-dropdown")===null&&F(!1)};return document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[j]),K.useEffect(()=>{let Z=null;const ae=1e3,Te=Ee=>{Z||(Z=Ee);const pe=Math.min((Ee-Z)/ae,1);u(z=>({totalStudents:Math.floor(pe*r.totalStudents+(1-pe)*z.totalStudents),totalFees:Math.floor(pe*r.totalFees+(1-pe)*z.totalFees),collectedFees:Math.floor(pe*r.collectedFees+(1-pe)*z.collectedFees),pendingFees:Math.floor(pe*r.pendingFees+(1-pe)*z.pendingFees),todayCollections:Math.floor(pe*r.todayCollections+(1-pe)*z.todayCollections),overduePayments:Math.floor(pe*r.overduePayments+(1-pe)*z.overduePayments),completedPayments:Math.floor(pe*r.completedPayments+(1-pe)*z.completedPayments),avgPaymentAmount:Math.floor(pe*r.avgPaymentAmount+(1-pe)*z.avgPaymentAmount),collectionRate:Math.floor(pe*(r.totalFees>0?Math.round(r.collectedFees/r.totalFees*100):0)+(1-pe)*z.collectionRate)})),pe<1&&requestAnimationFrame(Te)};requestAnimationFrame(Te)},[r]);const ne=async()=>{try{f(!0);const Z=await Lg(),ae=await ep(),Te=await Zv(),Ee=Z.length,pe=Z.reduce((ft,ct)=>ft+(parseFloat(ct.totalFees)||0),0),z=Z.reduce((ft,ct)=>ft+(parseFloat(ct.feesPaid)||0),0),Ie=pe-z,Be=Te.reduce((ft,ct)=>ft+(parseFloat(ct.total)||0),0),$e=new Date,Ce=new Date(Date.UTC($e.getFullYear(),$e.getMonth(),$e.getDate()));let Ze=0,et=0,xt=0,vt=0,Ue=0;ae.forEach(ft=>{if(ft.status==="paid"?(xt++,vt+=parseFloat(ft.amount)||0,Ue++):ft.status==="overdue"&&et++,ft.createdAt){let ct;if(ft.createdAt instanceof an)ct=ft.createdAt.toDate();else if(typeof ft.createdAt=="string")if(ft.createdAt.match(/^\d{4}-\d{2}-\d{2}$/)){const[bt,wt,qt]=ft.createdAt.split("-").map(Number);ct=new Date(bt,wt-1,qt)}else ct=new Date(ft.createdAt);else ft.createdAt instanceof Date?ct=ft.createdAt:typeof ft.createdAt=="number"&&(ct=new Date(ft.createdAt));ct instanceof Date&&!isNaN(ct.getTime())?new Date(Date.UTC(ct.getFullYear(),ct.getMonth(),ct.getDate())).getTime()===Ce.getTime()&&(Ze+=parseFloat(ft.amount)||0):console.log("Invalid date for payment:",ft.id,ft.createdAt)}});const ot=Ue>0?vt/Ue:0;s({totalStudents:Ee,totalFees:pe,collectedFees:z,pendingFees:Ie,todayCollections:Ze,overduePayments:et,completedPayments:xt,avgPaymentAmount:Math.round(ot)}),Se(Ee,pe,z,Ie,Ze,et,xt,ot);const dt=le(ae);E(dt),A({collected:z,pending:Ie});const gt=[{name:"Completed",value:xt,color:"var(--success-color)"},{name:"Pending",value:ae.filter(ft=>ft.status==="pending").length,color:"var(--warning-color)"},{name:"Overdue",value:et,color:"var(--danger-color)"}];se(gt);const De=new Date,We=[];for(let ft=5;ft>=0;ft--){const ct=new Date(De.getFullYear(),De.getMonth()-ft,1),bt=ct.toLocaleString("default",{month:"short"}),wt=ct.getFullYear().toString().slice(-2),qt=z/6,Tt=qt*.3,dn=Math.max(0,qt+(Math.random()-.5)*Tt*2);We.push({month:`${bt} '${wt}`,amount:Math.round(dn)})}C(We);const pt=[];dt.slice(-4).forEach((ft,ct)=>{const bt=ft.income,wt=Math.round(bt*.25),[qt,Tt]=ft.monthLabel.split(" "),dn=qt.substring(0,3);pt.push({month:`${dn} ${Tt}`,collected:bt,pending:wt})}),H(pt)}catch(Z){console.error("Error fetching dashboard data:",Z)}finally{f(!1)}},Se=(Z,ae,Te,Ee,pe,z,Ie,Be)=>{const Ce=[],Ze=[],et=[],xt=[],vt=[],Ue=[],ot=[],dt=[],gt=[];for(let De=6;De>=0;De--){const We=1+(Math.random()-.5)*.2;Ce.push(Math.max(0,Math.round(Z*We*(.8+.2*(De/7))))),Ze.push(Math.max(0,Math.round(ae*We*(.8+.2*(De/7))))),et.push(Math.max(0,Math.round(Te*We*(.7+.3*(De/7))))),xt.push(Math.max(0,Math.round(Ee*We*(.9+.1*(1-De/7))))),vt.push(Math.max(0,Math.round(pe*We*(.5+.5*Math.random())))),Ue.push(Math.max(0,Math.min(100,Math.round(et[et.length-1]/(Ze[Ze.length-1]||1)*100)))),ot.push(Math.max(0,Math.round(z*We*(.95+.05*Math.random())))),dt.push(Math.max(0,Math.round(Ie*We*(.9+.1*(De/7))))),gt.push(Math.max(0,Math.round(Be*We)))}m({totalStudents:Ce,totalFees:Ze,collectedFees:et,pendingFees:xt,todayCollections:vt,collectionRate:Ue,overduePayments:ot,completedPayments:dt,avgPaymentAmount:gt})},le=Z=>{const ae=[],Te=new Date,Ee=Te.getMonth(),pe=Te.getFullYear();for(let z=3;z>=0;z--){const Ie=new Date(Te.getFullYear(),Te.getMonth()-z,1),Be=Ie.getFullYear()+"-"+String(Ie.getMonth()+1).padStart(2,"0"),$e=Z.filter(Ze=>{if(!Ze.createdAt)return!1;let et="";return Ze.createdAt instanceof an?et=Ze.createdAt.toDate().toISOString().split("T")[0]:Ze.createdAt instanceof Date?et=Ze.createdAt.toISOString().split("T")[0]:typeof Ze.createdAt=="string"?et=Ze.createdAt:typeof Ze.createdAt=="number"&&(et=new Date(Ze.createdAt).toISOString().split("T")[0]),et.startsWith(Be)}).reduce((Ze,et)=>Ze+(parseFloat(et.amount)||0),0),Ce=Ie.getMonth()===Ee&&Ie.getFullYear()===pe;ae.push({monthLabel:Ie.toLocaleString("en-US",{month:"long",year:"numeric"}),income:$e,isCurrent:Ce})}return ae},ve=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}),ye=async()=>{try{await ug(An),localStorage.removeItem("isLoggedIn"),n("/login")}catch(Z){console.error("Error signing out:",Z)}};K.useEffect(()=>{const Z=ae=>{const{message:Te}=ae.detail;console.log("Success:",Te)};return window.addEventListener("showSuccess",Z),()=>{window.removeEventListener("showSuccess",Z)}},[]),K.useEffect(()=>{const Z=()=>{ne()};return window.addEventListener("dashboardRefresh",Z),()=>{window.removeEventListener("dashboardRefresh",Z)}},[]);const ge=()=>{R?(M.current&&(M.current.classList.remove("open"),M.current.classList.add("closing")),setTimeout(()=>{q(!1)},500)):q(!0)},we=()=>{if(vn())try{const Z=mn(),ae=dr(Wn,`users/${Z}/settings/profile`),Te=qv(ae,Ee=>{if(Ee.exists()){const pe=Ee.data();pe.firmName&&pe.firmName.trim()!==""?P(pe.firmName):P("Your Academy"),pe.logoUrl&&re(pe.logoUrl),pe.firmAddress&&me(pe.firmAddress)}else P("Your Academy")});return()=>Te()}catch(Z){console.error("Error loading branding data:",Z)}},[Q,P]=K.useState("Your Academy"),[Y,re]=K.useState(""),[fe,me]=K.useState(""),_e=()=>{const Z=r.totalFees>0?r.collectedFees/r.totalFees*100:0,ae=r.totalFees>0?r.pendingFees/r.totalFees*100:0;let Te=0,Ee=0;x&&x.length>=2&&(Te=x[x.length-1]?.income||0,Ee=x[x.length-2]?.income||0);const pe=e==="Administrator"?"admin":"staff";let z,Ie,Be;return console.log("Smart Suggestion Data:",{collectionRate:Z,pendingPercentage:ae,currentMonthCollected:Te,lastMonthCollected:Ee,effectiveUserRole:pe}),ae>25||Z<70?(z="danger",Ie="",Be="Collections at risk. Pending fees are high. Immediate follow-ups required to protect cash flow."):ae>=15&&ae<=25&&Z>=70&&Z<=85?(z="warning",Ie="",Be="Collections are stable, but pending dues are increasing. Prioritize follow-ups on high-value pending payments."):(ae<15&&Z>=85,z="success",Ie="",Be="Collection performance is healthy. Maintain current follow-up consistency."),Te>Ee&&Z>=80&&(Be+=" Strong month-on-month growth observed."),pe==="staff"&&(z==="danger"?Be="Urgent: High pending fees require immediate follow-ups.":z==="warning"?Be="Monitor pending dues and prioritize follow-ups.":Be="Collections are healthy. Maintain follow-up consistency.",Te>Ee&&Z>=80&&(Be+=" Good month-over-month growth.")),console.log("Generated Smart Suggestion:",{level:z,icon:Ie,message:Be}),{level:z,icon:Ie,message:Be}},Me=()=>{const Z=r.totalFees>0?r.collectedFees/r.totalFees*100:0,ae=r.pendingFees,Te=r.totalFees*.1,Ee=[];return e==="Administrator"?(ae>0&&(ae>Te?(Ee.push({text:"Send payment reminders to students with pending dues",priority:"High"}),Ee.push({text:"Prioritize follow-ups for high-amount pending payments",priority:"High"})):Ee.push({text:"Monitor pending payments to prevent accumulation",priority:"Medium"})),Z>=75?(Ee.push({text:"Maintain follow-up consistency to sustain collection performance",priority:"Medium"}),Ee.push({text:"Consider early reminders to reduce next month's pending fees",priority:"Medium"})):Ee.push({text:"Review and optimize collection process for better results",priority:"High"}),Ee.push({text:"Analyze collection trends to identify improvement opportunities",priority:"Medium"})):(ae>0&&(Ee.push({text:"Call students with pending fees to discuss payment options",priority:"High"}),Ee.push({text:"Send reminder messages for upcoming payment deadlines",priority:"Medium"})),Z>=75?Ee.push({text:"Continue regular follow-ups with all assigned accounts",priority:"Medium"}):Ee.push({text:"Increase frequency of follow-ups for better collections",priority:"High"}),Ee.push({text:"Update payment records after each successful collection",priority:"Medium"})),Ee},Le=()=>{const Z=r.totalFees>0?Math.round(r.collectedFees/r.totalFees*1e3)/10:0,ae=Math.round(r.pendingFees).toLocaleString();return`Insight: Collection rate is strong at ${Z}%, but ${ae} is still pending  follow-ups can improve cash flow.`};return c.jsx(rc,{children:c.jsxs("div",{className:"dashboard",children:[c.jsxs("div",{className:"dashboard-header",children:[c.jsx("div",{className:"header-left",children:c.jsxs("div",{className:"app-logo-container",children:[Y?c.jsx("img",{src:Y,alt:"Academy Logo",className:"app-logo"}):c.jsx("img",{src:"/Logo.png",alt:"Victory Point Academy Fees Manager Logo",className:"app-logo"}),c.jsxs("div",{className:"app-title-container",children:[c.jsxs("h1",{className:"app-name",children:[Q," Fees Manager"]}),c.jsxs("div",{className:"app-subtitle",children:[c.jsx("span",{className:"subtitle-text",children:"Managing Fees"}),c.jsx("span",{className:"separator",children:""}),c.jsx("span",{className:"current-month",children:ve()}),c.jsx("span",{className:"separator",children:""}),c.jsxs("span",{className:"status-container",children:[c.jsx("span",{className:"status-dot active"}),c.jsx("span",{className:"status-text",children:"Active"})]})]})]})]})}),c.jsx("div",{className:"header-right",children:c.jsxs("div",{className:"avatar-dropdown",children:[c.jsx("div",{className:"avatar",onClick:()=>F(!j),children:c.jsx("span",{className:"avatar-initials",children:"VP"})}),j&&c.jsxs("div",{className:"dropdown-menu",children:[c.jsx("button",{className:"dropdown-item",onClick:()=>n("/profile"),children:"Profile"}),c.jsx("button",{className:"dropdown-item",onClick:ye,children:"Logout"})]})]})})]}),c.jsx("div",{className:"kpi-cards-grid",children:d?c.jsx(yx,{type:"card",count:5}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Total Students"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsx("div",{className:"kpi-value",children:o.totalStudents}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Fc,{data:p.totalStudents,color:"var(--info-color)"})})]})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 5.2%"})})]}),c.jsxs("div",{className:"kpi-card total-fees",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(28, 200, 138, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Total Fees Collected"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:["",o.collectedFees.toLocaleString()]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Fc,{data:p.collectedFees,color:"var(--success-color)"})})]}),c.jsx("div",{className:"helper-text",children:"Revenue generated this period"})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 12.4%"})})]}),c.jsxs("div",{className:"kpi-card pending-fees",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(246, 194, 62, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Pending Fees"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:["",o.pendingFees.toLocaleString()]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Fc,{data:p.pendingFees,color:"var(--warning-color)"})})]}),c.jsx("div",{className:"helper-text",children:"Requires immediate attention"})]}),c.jsx("div",{className:"kpi-trend negative",children:c.jsx("span",{children:" 3.1%"})})]}),c.jsxs("div",{className:"kpi-card",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(231, 74, 59, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Today's Collections"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:["",o.todayCollections.toLocaleString()]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Fc,{data:p.todayCollections,color:"var(--danger-color)"})})]})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 8.7%"})})]}),c.jsxs("div",{className:"kpi-card collection-rate",children:[c.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:c.jsx("span",{className:"kpi-icon",children:""})}),c.jsxs("div",{className:"kpi-content",children:[c.jsx("div",{className:"kpi-title",children:"Collection Rate"}),c.jsxs("div",{className:"kpi-value-container",children:[c.jsxs("div",{className:"kpi-value",children:[o.collectionRate,"%"]}),c.jsx("div",{className:"kpi-sparkline",children:c.jsx(Fc,{data:p.collectionRate,color:"var(--info-color)"})})]}),c.jsx("div",{className:"helper-text",children:"Overall performance indicator"})]}),c.jsx("div",{className:"kpi-trend positive",children:c.jsx("span",{children:" 2.3%"})})]})]})}),c.jsxs("div",{className:"monthly-collections-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h2",{children:"Monthly Fee Collections"}),c.jsx("button",{onClick:()=>I(!0),className:"history-button",children:"History"})]}),c.jsx("div",{className:"monthly-cards-container",children:d?c.jsx(yx,{type:"card",count:4}):x.map((Z,ae)=>c.jsxs("div",{className:`monthly-card ${Z.isCurrent?"current-month":""}`,children:[c.jsx("div",{className:"monthly-card-header",children:c.jsx("h3",{children:Z.monthLabel})}),c.jsxs("div",{className:"monthly-card-body",children:[c.jsxs("div",{className:"amount",children:["",Z.income.toLocaleString()]}),c.jsx("div",{className:"description",children:"Collected"}),c.jsx("div",{className:"micro-text",children:Z.isCurrent?"Current active month":ae===0?"Highest this quarter":""})]})]},ae))})]}),c.jsxs("div",{className:"insights-section",children:[c.jsx("button",{className:"insights-toggle-btn",onClick:ge,disabled:d,children:R?"Hide Insights ":"View Insights "}),c.jsx("div",{ref:M,className:`insights-content ${R?"open":"initial"}`,children:R&&!d&&c.jsxs("div",{className:"insights-content-inner",children:[c.jsxs("div",{className:"secondary-stats-grid",children:[c.jsxs("div",{className:"secondary-stat-card",children:[c.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(231, 74, 59, 0.1)"},children:c.jsx("span",{className:"stat-icon",children:""})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:"Overdue Payments"}),c.jsxs("div",{className:"stat-value-container",children:[c.jsx("div",{className:"stat-value",children:o.overduePayments}),c.jsx("div",{className:"stat-sparkline",children:c.jsx(Fc,{data:p.overduePayments,color:"var(--danger-color)"})})]})]}),c.jsx("div",{className:"stat-trend negative",children:c.jsx("span",{children:" 2.1%"})})]}),c.jsxs("div",{className:"secondary-stat-card",children:[c.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(28, 200, 138, 0.1)"},children:c.jsx("span",{className:"stat-icon",children:""})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:"Completed Payments"}),c.jsxs("div",{className:"stat-value-container",children:[c.jsx("div",{className:"stat-value",children:o.completedPayments}),c.jsx("div",{className:"stat-sparkline",children:c.jsx(Fc,{data:p.completedPayments,color:"var(--success-color)"})})]})]}),c.jsx("div",{className:"stat-trend positive",children:c.jsx("span",{children:" 7.3%"})})]}),c.jsxs("div",{className:"secondary-stat-card",children:[c.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:c.jsx("span",{className:"stat-icon",children:""})}),c.jsxs("div",{className:"stat-content",children:[c.jsx("div",{className:"stat-title",children:"Average Payment Amount"}),c.jsxs("div",{className:"stat-value-container",children:[c.jsxs("div",{className:"stat-value",children:["",o.avgPaymentAmount.toLocaleString()]}),c.jsx("div",{className:"stat-sparkline",children:c.jsx(Fc,{data:p.avgPaymentAmount,color:"var(--info-color)"})})]})]}),c.jsx("div",{className:"stat-trend positive",children:c.jsx("span",{children:" 1.8%"})})]})]}),c.jsxs("div",{className:"charts-section",children:[c.jsxs("div",{className:"analytics-panel",style:{flex:"1 1 45%"},children:[c.jsxs("div",{className:"analytics-header",children:[c.jsx("h2",{className:"panel-title",children:"Fees Analytics"}),c.jsx("p",{className:"panel-subtext",children:"Distribution overview"})]}),c.jsx("div",{className:"analytics-content",style:{flexDirection:"column"},children:c.jsxs("div",{className:"analytics-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{className:"section-title",children:"Fee Distribution"}),c.jsx("p",{className:"section-subtitle",children:"Collected vs pending fees"})]}),c.jsx(YP,{data:w}),c.jsxs("div",{className:"combined-insight-bar",children:[c.jsx("span",{className:"insight-icon",children:""}),c.jsx("span",{className:"insight-text",children:Le()})]})]})})]}),c.jsxs("div",{className:"analytics-panel",style:{flex:"1 1 45%",position:"relative"},children:[c.jsxs("div",{className:"analytics-header",children:[c.jsx("h2",{className:"panel-title",children:"Monthly Fee Performance"}),c.jsx("p",{className:"panel-subtext",children:"Collected vs pending fees by month"})]}),c.jsx("div",{className:"analytics-content",style:{flexDirection:"row",gap:"20px"},children:c.jsxs("div",{className:"analytics-section",style:{flex:"1"},children:[c.jsx(XP,{data:k,width:"100%",height:300}),c.jsxs("button",{className:"view-trend-button",onClick:()=>n("/collection-trend"),style:{position:"absolute",top:"60px",right:"20px",margin:"0",padding:"0",fontSize:"0.85rem",minWidth:"auto",borderRadius:"6px",width:"81.81px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center"},children:[c.jsx("span",{children:"Trend"}),c.jsx("span",{className:"button-icon",style:{marginLeft:"4px"},children:""})]}),!d&&(()=>{const Z=_e();return c.jsxs("div",{className:"combined-insight-bar",style:{marginTop:"15px",...Z.level==="danger"?{borderLeft:"4px solid #e74c3c",backgroundColor:"rgba(231, 76, 60, 0.05)"}:Z.level==="warning"?{borderLeft:"4px solid #f39c12",backgroundColor:"rgba(243, 156, 18, 0.05)"}:Z.level==="success"?{borderLeft:"4px solid #28a745",backgroundColor:"rgba(40, 167, 69, 0.05)"}:{borderLeft:"4px solid #3498db",backgroundColor:"rgba(52, 152, 219, 0.05)"}},children:[c.jsx("span",{className:"insight-icon",children:Z.icon}),c.jsxs("div",{children:[c.jsx("div",{className:"insight-title",style:{fontWeight:"600",marginBottom:"5px",color:"#1A1A1A"},children:"Smart Suggestion"}),c.jsxs("div",{className:"insight-text",children:["Suggestion: ",Z.message]})]})]})})(),!d&&Me().length>0&&c.jsxs("div",{className:"combined-insight-bar",style:{marginTop:"15px",background:"#f8fafc",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.03)"},children:[c.jsx("div",{className:"insight-title",style:{fontWeight:"600",marginBottom:"12px",color:"#1A1A1A",fontSize:"1.1rem"},children:"Action Suggestions"}),c.jsx("ul",{style:{paddingLeft:"20px",margin:"0",fontSize:"0.95rem"},children:Me().map((Z,ae)=>c.jsxs("li",{style:{marginBottom:"8px",fontWeight:Z.priority==="High"?"600":"normal",color:Z.priority==="High"?"#e74c3c":"#2c3e50"},children:[c.jsx("span",{style:{marginRight:"8px"},children:Z.priority==="High"?"":Z.priority==="Medium"?"":""}),Z.text]},ae))})]})]})})]})]}),c.jsx("div",{className:"profit-loss-section",children:c.jsx(QP,{totalFees:r.totalFees,collectedFees:r.collectedFees})})]})})]}),U&&c.jsx(JP,{onClose:()=>I(!1)})]})})};class t8{constructor(){this.studentsKey="feesManagementStudents",this.paymentsKey="feesManagementPayments",this.useFirebase=!0}enableFirebase(){this.useFirebase=!0}disableFirebase(){this.useFirebase=!1}isFirebaseEnabled(){return this.useFirebase}async getStudents(){if(this.useFirebase&&vn())try{return await Lg()}catch(e){throw console.warn("Failed to get students from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async saveStudents(e){console.warn("saveStudents is deprecated - Firebase handles persistence automatically");try{for(const t of e)if(t.id)try{await af(t.id,t)}catch(r){console.error("Error updating student in Firebase:",r)}}catch(t){console.error("Error saving students to Firebase:",t)}}async getStudentById(e){try{const t=await this.getStudents();let r=t.find(s=>s.studentId==e);return r||(r=t.find(s=>s.id==e)),!r&&typeof e=="string"&&/^\d+$/.test(e)&&(r=t.find(s=>s.id==parseInt(e)||s.studentId==parseInt(e))),r||null}catch(t){return console.error("Error getting student by ID:",t),null}}async addStudent(e){try{if(this.useFirebase&&vn())try{const t=parseFloat(e.totalFees)||0,r=parseFloat(e.feesPaid)||0,s=parseFloat(e.feesDue)!==void 0?parseFloat(e.feesDue):t-r,o={...e,studentId:e.studentId||`STD${String(Date.now()).slice(-4)}`,totalFees:t,feesPaid:r,feesDue:s,feesStructure:e.feesStructure||this.getDefaultFeeStructure(s),reminderEnabled:e.reminderEnabled!==void 0?e.reminderEnabled:!0,lastReminderSent:e.lastReminderSent||null,createdAt:an.now(),updatedAt:an.now(),ownerId:mn()};delete o.id;const u=await AP(o);return window.dispatchEvent(new Event("studentsUpdated")),u}catch(t){throw console.warn("Failed to add student to Firebase:",t),new Error(`Failed to add student to Firebase: ${t.message||"Unknown error occurred"}`)}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}catch(t){throw console.error("Error adding student:",t),t}}getDefaultFeeStructure(e){return e>=1500?"Annual":e>=500?"Quarterly":e>0?"Monthly":"Not Set"}async updateStudent(e){try{if(console.log("=== UPDATE STUDENT FUNCTION START ==="),console.log("Received student data:",JSON.parse(JSON.stringify(e))),this.useFirebase&&vn())try{console.log("Using Firebase for update");const t=isNaN(parseFloat(e.totalFees))?0:parseFloat(e.totalFees),r=isNaN(parseFloat(e.feesPaid))?0:parseFloat(e.feesPaid),s=isNaN(parseFloat(e.feesDue))?t-r:parseFloat(e.feesDue);console.log("Parsed numeric values:",{totalFees:t,feesPaid:r,feesDue:s});let o=e.feesStructure;o||(o=this.getDefaultFeeStructure(s)),console.log("Determined feesStructure:",o);const u={name:e.name||"",class:e.class||"",totalFees:t,feesPaid:r,feesDue:s,feesStructure:o,contact:e.contact||"",email:e.email||"",address:e.address||"",fatherName:e.fatherName||"",motherName:e.motherName||"",status:e.status||"Not Started",studentId:e.studentId||e.id,reminderEnabled:e.reminderEnabled!==void 0?e.reminderEnabled:!0,lastReminderSent:e.lastReminderSent||null,updatedAt:an.now(),ownerId:mn()};e.photoURL&&(u.photoURL=e.photoURL),e.createdAt&&(u.createdAt=e.createdAt),e.reminderEnabled!==void 0&&(u.reminderEnabled=e.reminderEnabled),e.lastReminderSent&&(u.lastReminderSent=e.lastReminderSent),console.log("Prepared student data for Firebase:",u);let d=e.id;if(console.log("Student ID for update:",d,"Type:",typeof d),d&&typeof d=="number"&&d>1e12){console.log("Potential ID mismatch detected - ID looks like timestamp");try{const p=await this.getStudents();console.log("All students for ID matching:",p);const m=p.find(x=>x.studentId===e.studentId||x.name===e.name&&x.class===e.class);m?(console.log("Found matching student with correct ID:",m.id),d=m.id):console.log("No matching student found, using original ID")}catch(p){console.error("Error fetching students for ID matching:",p)}}if(!d){const p=new Error("Student ID is required for update");throw console.error("Validation error:",p.message),p}console.log("Updating student with ID:",d,"and data:",u);const f=await af(d,u);return console.log("Firebase update result:",f),console.log("Dispatching studentsUpdated event"),window.dispatchEvent(new Event("studentsUpdated")),console.log("Dispatching studentUpdated event"),window.dispatchEvent(new CustomEvent("studentUpdated",{detail:{student:f}})),console.log("=== UPDATE STUDENT FUNCTION END SUCCESS ==="),f}catch(t){throw console.error("Failed to update student in Firebase:",t),console.error("Error stack:",t.stack),new Error(`Failed to update student: ${t.message}`)}else{const t=new Error("Firebase is required - localStorage fallback removed");throw console.error("Firebase not enabled:",t.message),t}}catch(t){throw console.error("Error updating student:",t),console.error("Error stack:",t.stack),new Error(`Error updating student: ${t.message}`)}}async deleteStudent(e){if(this.useFirebase&&vn())try{const r=(await this.getPayments()).filter(s=>s.studentId==e);for(const s of r)try{await gx(s.id)}catch(o){console.warn(`Failed to delete payment ${s.id} for student ${e}:`,o)}return await jP(e),window.dispatchEvent(new Event("studentsUpdated")),e}catch(t){throw console.warn("Failed to delete student from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}removeAllStudents(){throw new Error("removeAllStudents is deprecated - use Firebase console to clear data")}async getPayments(){if(this.useFirebase&&vn())try{const e=await ep(),t=new Date;let r=!1;return e.map(o=>{if(o.status==="pending"&&o.dueDate){let u;if(o.dueDate instanceof an?u=o.dueDate.toDate():typeof o.dueDate=="string"?o.dueDate.includes("/")?u=new Date(o.dueDate.split("/").reverse().join("-")):u=new Date(o.dueDate):o.dueDate instanceof Date&&(u=o.dueDate),u instanceof Date&&!isNaN(u)&&u<t){const d=o.createdAt?o.createdAt instanceof an?o.createdAt.toDate():new Date(o.createdAt):new Date,f=new Date(t.getTime()-6e4);if(d<=f)return r=!0,{...o,status:"overdue"}}}return o})}catch(e){throw console.warn("Failed to get payments from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}savePayments(e){console.warn("savePayments is deprecated - Firebase handles persistence automatically")}async addPayment(e){try{const t=await this.getStudentById(e.studentId);if(!t)throw new Error(`Student with ID "${e.studentId}" not found. Please add the student first.`);const r={...e,id:`PAY${Date.now()}`,studentId:e.studentId,studentName:t.name,studentClass:t.class,studentContact:t.contact,status:"pending",paidDate:null,method:null,receipt:null,amount:parseFloat(e.amount)||0,createdAt:an.now(),ownerId:mn()};console.log("Adding new payment:",r);const s=await eA(r);return console.log("Payment added result:",s),await this.updateStudentFees(r.studentId,0),window.dispatchEvent(new CustomEvent("paymentAdded",{detail:{payment:s}})),s}catch(t){throw console.error("Error adding payment:",t),t}}async recordPayment(e,t){try{const r=await this.getPayments(),s=r.findIndex(o=>o.id==e);if(s!==-1){const o=r[s];console.log("Recording payment:",o);const u={...o,status:"paid",paidDate:an.now(),method:t,receipt:`RCT-${Date.now()}`,amount:parseFloat(o.amount)||0};console.log("Updated payment:",u);const d=await E1(e,u);return console.log("Payment update result:",d),await new Promise(f=>setTimeout(f,100)),await this.updateStudentFees(u.studentId,u.amount),window.dispatchEvent(new CustomEvent("paymentRecorded",{detail:{payment:d}})),window.dispatchEvent(new Event("studentsUpdated")),d}return null}catch(r){throw console.error("Error recording payment:",r),r}}async updatePayment(e){try{const t={...e,amount:parseFloat(e.amount)||0},r=await E1(e.id,t);return await this.updateStudentFees(e.studentId,0),await this.bidirectionalSync("payment",e.id),window.dispatchEvent(new CustomEvent("paymentUpdated",{detail:{payment:r}})),r}catch(t){throw console.error("Error updating payment:",t),t}}async deletePayment(e){if(this.useFirebase&&vn())try{return await gx(e),e}catch(t){throw console.error("Failed to delete payment from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStudentFees(e,t){try{await new Promise(D=>setTimeout(D,50));const r=await this.getStudents(),s=await this.getPayments(),o=await this.getStudentById(e);if(!o)return console.warn(`Student with ID ${e} not found for fee update`),null;const u=r.findIndex(D=>D.id==o.id||D.studentId==o.studentId);if(u===-1)return console.warn(`Student index not found for ID ${e}`),null;const d=s.filter(D=>D.studentId==e);let f=0,p=0,m=0;d.forEach(D=>{const C=parseFloat(D.amount)||0;if(C>0)switch(D.status){case"paid":f+=C;break;case"pending":p+=C;break;case"overdue":m+=C;break;default:p+=C}});const x=parseFloat(o.totalFees)||0,E=f+p+m,w={...o,feesPaid:f,feesDue:Math.max(0,x-f),totalFees:x};if(o.feesPaid!==w.feesPaid||o.feesDue!==w.feesDue||o.totalFees!==w.totalFees){console.log(`Updating student fees for ${e}:`,w);const D=await af(o.id,w);return console.log(`Student fees update result for ${e}:`,D),r[u]=w,console.log(`Student fees updated for ${e}: Paid=${f}, Due=${w.feesDue}`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:JSON.stringify(r)})),window.dispatchEvent(new Event("studentsUpdated")),D}return console.log(`No fee changes for student ${e}`),o}catch(r){throw console.error("Error updating student fees:",r),r}}async getPaymentStatistics(){try{const e=await this.getPayments(),t=await this.getStudents(),r=e.filter(w=>w&&w.amount!==void 0&&w.amount!==null&&!isNaN(parseFloat(w.amount)));let s=0,o=0,u=0,d=0;r.forEach(w=>{const A=parseFloat(w.amount)||0;if(A>0)switch(w.status){case"paid":s+=A;break;case"pending":o+=A;break;case"overdue":u+=A;break;default:o+=A}});let f=0,p=0,m=0;t.forEach(w=>{const A=parseFloat(w.feesPaid)||0,D=parseFloat(w.feesDue)||0,C=A+D;p+=A,f+=D,m+=C,C>0&&d++});const x=s+o+u,E=p+f;return{totalStudents:t.length,totalStudentsWithPayments:d,totalCollected:s,totalPending:o,totalOverdue:u,totalStudentPending:f,totalStudentPaid:p,totalStudentFees:m,paymentBasedTotal:x,studentBasedTotal:E,consistencyCheck:{paymentTotal:x,studentTotal:E,difference:Math.abs(x-E)}}}catch(e){return console.error("Error getting payment statistics:",e),{totalStudents:0,totalStudentsWithPayments:0,totalCollected:0,totalPending:0,totalOverdue:0,totalStudentPending:0,totalStudentPaid:0,totalStudentFees:0,paymentBasedTotal:0,studentBasedTotal:0,consistencyCheck:{paymentTotal:0,studentTotal:0,difference:0}}}}async recalculateAllStudentFees(){try{console.log("Recalculating all student fees...");const e=await this.getStudents(),t=await this.getPayments(),r={};t.forEach(o=>{o.studentId&&(r[o.studentId]||(r[o.studentId]=[]),r[o.studentId].push(o))});let s=0;for(const o of e){const u=o.studentId||o.id,d=r[u]||[];let f=0,p=0,m=0;d.forEach(D=>{const C=parseFloat(D.amount)||0;if(C>0)switch(D.status){case"paid":f+=C;break;case"pending":p+=C;break;case"overdue":m+=C;break;default:p+=C}});const x=parseFloat(o.totalFees)||0,E=f+p+m,w={...o,feesPaid:f,feesDue:Math.max(0,x-f),totalFees:x};if(o.feesPaid!==w.feesPaid||o.feesDue!==w.feesDue||o.totalFees!==w.totalFees)try{await af(o.id,w),s++,console.log(`Updated fees for student ${u}: Paid=${f}, Due=${w.feesDue}`)}catch(D){console.error(`Error updating fees for student ${u}:`,D)}}return s>0?(console.log(`Recalculated fees for ${s} students`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:Date.now().toString()})),window.dispatchEvent(new Event("studentsUpdated")),{success:!0,studentsUpdated:s,totalStudents:e.length}):(console.log("No fee changes needed for any students"),{success:!0,studentsUpdated:0,totalStudents:e.length})}catch(e){throw console.error("Error recalculating all student fees:",e),e}}async syncStudentDataToPayments(e){try{console.log(`Syncing student data to payments for student ID: ${e}`);const t=await this.getStudentById(e);if(!t){console.warn(`Student with ID ${e} not found for sync`);return}const r=await this.getPayments();let s=0;const o=r.map(u=>{if(u.studentId===e){const d={...u,studentName:t.name,studentClass:t.class,studentContact:t.contact};return JSON.stringify(u)!==JSON.stringify(d)&&s++,d}return u});return s>0&&(this.savePayments(o),console.log(`Updated ${s} payments with student information`),window.dispatchEvent(new StorageEvent("storage",{key:this.paymentsKey,newValue:JSON.stringify(o)}))),s}catch(t){throw console.error("Error syncing student data to payments:",t),t}}async syncPaymentDataToStudents(e){try{console.log(`Syncing payment data to students for payment ID: ${e}`);const r=(await this.getPayments()).find(o=>o.id===e);if(!r){console.warn(`Payment with ID ${e} not found for sync`);return}return await this.updateStudentFees(r.studentId,0)}catch(t){throw console.error("Error syncing payment data to students:",t),t}}async updateStudentFeesAfterPaymentUpdate(e,t){try{const r=await this.getStudents(),s=await this.getStudentById(e);if(!s)return console.warn(`Student with ID ${e} not found for fee update`),null;if(r.findIndex(A=>A.id==s.id||A.studentId==s.studentId)===-1)return console.warn(`Student index not found for ID ${e}`),null;const d=(await this.getPayments()).filter(A=>A.studentId==e);let f=0,p=0,m=0;d.forEach(A=>{const D=parseFloat(A.amount)||0;if(D>0)switch(A.status){case"paid":f+=D;break;case"pending":p+=D;break;case"overdue":m+=D;break;default:p+=D}});const x=f+p+m,E={...s,feesPaid:f,feesDue:p+m,totalFees:x};if(s.feesPaid!==E.feesPaid||s.feesDue!==E.feesDue||s.totalFees!==E.totalFees){const A=await af(s.id,E);return console.log(`Student fees updated for ${e}: Paid=${f}, Due=${p+m}`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:JSON.stringify(r)})),window.dispatchEvent(new Event("studentsUpdated")),A}return console.log(`No fee changes for student ${e}`),s}catch(r){return console.error("Error updating student fees after payment update:",r),null}}async bidirectionalSync(e,t){try{switch(console.log(`Performing bidirectional sync for ${e} with ID: ${t}`),e){case"student":await this.syncStudentDataToPayments(t);break;case"payment":await this.syncPaymentDataToStudents(t);break;default:console.warn(`Unknown entity type for bidirectional sync: ${e}`)}}catch(r){throw console.error("Error in bidirectional sync:",r),r}}async syncAllData(){try{console.log("Starting comprehensive data synchronization...");const e=await this.getStudents(),t=await this.getPayments();console.log(`Found ${e.length} students and ${t.length} payments`);const r={};e.forEach(f=>{r[f.studentId||f.id]=f});let s=0,o=0;const u=t.map(f=>{const p=r[f.studentId];if(p){const m={...f,studentName:p.name,studentClass:p.class,studentContact:p.contact};if(JSON.stringify(f)!==JSON.stringify(m))return s++,m}return f});return s>0&&(this.savePayments(u),console.log(`Updated ${s} payments with student information`)),o=(await this.recalculateAllStudentFees()).studentsUpdated,(s>0||o>0)&&window.dispatchEvent(new StorageEvent("storage",{key:"feesManagementSync",newValue:Date.now().toString()})),console.log("Comprehensive data synchronization completed successfully"),{paymentsUpdated:s,studentsUpdated:o,totalPayments:u.length,totalStudents:e.length}}catch(e){throw console.error("Error in comprehensive data synchronization:",e),e}}async getStaff(){if(this.useFirebase&&vn())try{const e=await BP();return console.log("Fetched staff from Firebase:",e),e}catch(e){throw console.error("Failed to get staff from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addStaff(e){if(this.useFirebase&&vn())try{const t={...e,staffId:e.staffId||`STF${String(Date.now()).slice(-4)}`,createdAt:e.createdAt||new Date().toISOString(),ownerId:mn()};delete t.id;const r=await UP(t);return console.log("Staff added result:",r),window.dispatchEvent(new Event("staffUpdated")),r}catch(t){throw console.error("Failed to add staff to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStaff(e){if(this.useFirebase&&vn())try{const t=await VP(e.id,e);return console.log("Staff update result:",t),window.dispatchEvent(new Event("staffUpdated")),t}catch(t){throw console.error("Failed to update staff in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteStaff(e){if(this.useFirebase&&vn())try{return await zP(e),window.dispatchEvent(new Event("staffDeleted")),e}catch(t){throw console.error("Failed to delete staff from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getStaffAttendance(){if(this.useFirebase&&vn())try{const e=await HP();return console.log("Fetched staff attendance from Firebase:",e),e}catch(e){throw console.error("Failed to get staff attendance from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addStaffAttendance(e){if(this.useFirebase&&vn())try{const t=await qP(e);return console.log("Staff attendance added result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to add staff attendance to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStaffAttendance(e){if(this.useFirebase&&vn())try{if(!e||!e.id)throw new Error("Valid attendance record with ID is required for update operation");const t=await GP(e.id,e);return console.log("Staff attendance update result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to update staff attendance in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteStaffAttendance(e){if(this.useFirebase&&vn())try{if(!e)throw new Error("Valid attendance ID is required for delete operation");return await $P(e),window.dispatchEvent(new Event("attendanceDeleted")),e}catch(t){throw console.error("Failed to delete staff attendance from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getAttendance(){if(this.useFirebase&&vn())try{const e=await LP();return console.log("Fetched attendance from Firebase:",e),e}catch(e){throw console.error("Failed to get attendance from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addAttendance(e){if(this.useFirebase&&vn())try{const t=await kP(e);return console.log("Attendance added result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to add attendance to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateAttendance(e){if(this.useFirebase&&vn())try{const t=await PP(e.id,e);return console.log("Attendance update result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to update attendance in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteAttendance(e){if(this.useFirebase&&vn())try{return await MP(e),window.dispatchEvent(new Event("attendanceDeleted")),e}catch(t){throw console.error("Failed to delete attendance from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getExpenditures(){if(this.useFirebase&&vn())try{return await Zv()}catch(e){throw console.warn("Failed to get expenditures from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addExpenditure(e){if(this.useFirebase&&vn())try{const t=await RP(e);return console.log("Expenditure added result:",t),window.dispatchEvent(new Event("expenditureUpdated")),t}catch(t){throw console.error("Failed to add expenditure to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateExpenditure(e){if(this.useFirebase&&vn())try{const t=await IP(e.id,e);return console.log("Expenditure update result:",t),window.dispatchEvent(new Event("expenditureUpdated")),t}catch(t){throw console.error("Failed to update expenditure in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteExpenditure(e){if(this.useFirebase&&vn())try{return await DP(e),window.dispatchEvent(new Event("expenditureDeleted")),e}catch(t){throw console.error("Failed to delete expenditure from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getFeedback(){if(this.useFirebase)try{return await TP()}catch(e){throw console.error("DataManager: Error fetching feedback:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getSupportQueries(){if(this.useFirebase)try{return await CP()}catch(e){throw console.error("DataManager: Error fetching support queries:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}}const Fn=new t8,n8="modulepreload",r8=function(n,e){return new URL(n,e).href},wx={},wy=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let p=function(m){return Promise.all(m.map(x=>Promise.resolve(x).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),f=d?.nonce||d?.getAttribute("nonce");s=p(t.map(m=>{if(m=r8(m,r),m in wx)return;wx[m]=!0;const x=m.endsWith(".css"),E=x?'[rel="stylesheet"]':"";if(r)for(let A=u.length-1;A>=0;A--){const D=u[A];if(D.href===m&&(!x||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${E}`))return;const w=document.createElement("link");if(w.rel=x?"stylesheet":n8,x||(w.as="script"),w.crossOrigin="",w.href=m,f&&w.setAttribute("nonce",f),document.head.appendChild(w),x)return new Promise((A,D)=>{w.addEventListener("load",A),w.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function nr(n){"@babel/helpers - typeof";return nr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nr(n)}var To=Uint8Array,Ra=Uint16Array,t2=Int32Array,n2=new To([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),r2=new To([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xx=new To([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rA=function(n,e){for(var t=new Ra(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var s=new t2(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)s[o]=o-t[r]<<5|r;return{b:t,r:s}},iA=rA(n2,2),i8=iA.b,N1=iA.r;i8[28]=258,N1[258]=28;var s8=rA(r2,0),Sx=s8.r,A1=new Ra(32768);for(var _r=0;_r<32768;++_r){var Uc=(_r&43690)>>1|(_r&21845)<<1;Uc=(Uc&52428)>>2|(Uc&13107)<<2,Uc=(Uc&61680)>>4|(Uc&3855)<<4,A1[_r]=((Uc&65280)>>8|(Uc&255)<<8)>>1}var Ef=(function(n,e,t){for(var r=n.length,s=0,o=new Ra(e);s<r;++s)n[s]&&++o[n[s]-1];var u=new Ra(e);for(s=1;s<e;++s)u[s]=u[s-1]+o[s-1]<<1;var d;if(t){d=new Ra(1<<e);var f=15-e;for(s=0;s<r;++s)if(n[s])for(var p=s<<4|n[s],m=e-n[s],x=u[n[s]-1]++<<m,E=x|(1<<m)-1;x<=E;++x)d[A1[x]>>f]=p}else for(d=new Ra(r),s=0;s<r;++s)n[s]&&(d[s]=A1[u[n[s]-1]++]>>15-n[s]);return d}),Ku=new To(288);for(var _r=0;_r<144;++_r)Ku[_r]=8;for(var _r=144;_r<256;++_r)Ku[_r]=9;for(var _r=256;_r<280;++_r)Ku[_r]=7;for(var _r=280;_r<288;++_r)Ku[_r]=8;var Zm=new To(32);for(var _r=0;_r<32;++_r)Zm[_r]=5;var a8=Ef(Ku,9,0),o8=Ef(Zm,5,0),sA=function(n){return(n+7)/8|0},l8=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new To(n.subarray(e,t))},Vl=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},of=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},xy=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var s=t.length,o=t.slice();if(!s)return{t:oA,l:0};if(s==1){var u=new To(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(ce,se){return ce.f-se.f}),t.push({s:-1,f:25001});var d=t[0],f=t[1],p=0,m=1,x=2;for(t[0]={s:-1,f:d.f+f.f,l:d,r:f};m!=s-1;)d=t[t[p].f<t[x].f?p++:x++],f=t[p!=m&&t[p].f<t[x].f?p++:x++],t[m++]={s:-1,f:d.f+f.f,l:d,r:f};for(var E=o[0].s,r=1;r<s;++r)o[r].s>E&&(E=o[r].s);var w=new Ra(E+1),A=T1(t[m-1],w,0);if(A>e){var r=0,D=0,C=A-e,k=1<<C;for(o.sort(function(se,U){return w[U.s]-w[se.s]||se.f-U.f});r<s;++r){var H=o[r].s;if(w[H]>e)D+=k-(1<<A-w[H]),w[H]=e;else break}for(D>>=C;D>0;){var G=o[r].s;w[G]<e?D-=1<<e-w[G]++-1:++r}for(;r>=0&&D;--r){var V=o[r].s;w[V]==e&&(--w[V],++D)}A=e}return{t:new To(w),l:A}},T1=function(n,e,t){return n.s==-1?Math.max(T1(n.l,e,t+1),T1(n.r,e,t+1)):e[n.s]=t},_x=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ra(++e),r=0,s=n[0],o=1,u=function(f){t[r++]=f},d=1;d<=e;++d)if(n[d]==s&&d!=e)++o;else{if(!s&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(s),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(s);o=1,s=n[d]}return{c:t.subarray(0,r),n:e}},lf=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},aA=function(n,e,t){var r=t.length,s=sA(e+2);n[s]=r&255,n[s+1]=r>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var o=0;o<r;++o)n[s+o+4]=t[o];return(s+4+r)*8},Ex=function(n,e,t,r,s,o,u,d,f,p,m){Vl(e,m++,t),++s[256];for(var x=xy(s,15),E=x.t,w=x.l,A=xy(o,15),D=A.t,C=A.l,k=_x(E),H=k.c,G=k.n,V=_x(D),ce=V.c,se=V.n,U=new Ra(19),I=0;I<H.length;++I)++U[H[I]&31];for(var I=0;I<ce.length;++I)++U[ce[I]&31];for(var R=xy(U,7),q=R.t,j=R.l,F=19;F>4&&!q[xx[F-1]];--F);var M=p+5<<3,ne=lf(s,Ku)+lf(o,Zm)+u,Se=lf(s,E)+lf(o,D)+u+14+3*F+lf(U,q)+2*U[16]+3*U[17]+7*U[18];if(f>=0&&M<=ne&&M<=Se)return aA(e,m,n.subarray(f,f+p));var le,ve,ye,ge;if(Vl(e,m,1+(Se<ne)),m+=2,Se<ne){le=Ef(E,w,0),ve=E,ye=Ef(D,C,0),ge=D;var we=Ef(q,j,0);Vl(e,m,G-257),Vl(e,m+5,se-1),Vl(e,m+10,F-4),m+=14;for(var I=0;I<F;++I)Vl(e,m+3*I,q[xx[I]]);m+=3*F;for(var Q=[H,ce],P=0;P<2;++P)for(var Y=Q[P],I=0;I<Y.length;++I){var re=Y[I]&31;Vl(e,m,we[re]),m+=q[re],re>15&&(Vl(e,m,Y[I]>>5&127),m+=Y[I]>>12)}}else le=a8,ve=Ku,ye=o8,ge=Zm;for(var I=0;I<d;++I){var fe=r[I];if(fe>255){var re=fe>>18&31;of(e,m,le[re+257]),m+=ve[re+257],re>7&&(Vl(e,m,fe>>23&31),m+=n2[re]);var me=fe&31;of(e,m,ye[me]),m+=ge[me],me>3&&(of(e,m,fe>>5&8191),m+=r2[me])}else of(e,m,le[fe]),m+=ve[fe]}return of(e,m,le[256]),m+ve[256]},c8=new t2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oA=new To(0),u8=function(n,e,t,r,s,o){var u=o.z||n.length,d=new To(r+u+5*(1+Math.ceil(u/7e3))+s),f=d.subarray(r,d.length-s),p=o.l,m=(o.r||0)&7;if(e){m&&(f[0]=o.r>>3);for(var x=c8[e-1],E=x>>13,w=x&8191,A=(1<<t)-1,D=o.p||new Ra(32768),C=o.h||new Ra(A+1),k=Math.ceil(t/3),H=2*k,G=function(pe){return(n[pe]^n[pe+1]<<k^n[pe+2]<<H)&A},V=new t2(25e3),ce=new Ra(288),se=new Ra(32),U=0,I=0,R=o.i||0,q=0,j=o.w||0,F=0;R+2<u;++R){var M=G(R),ne=R&32767,Se=C[M];if(D[ne]=Se,C[M]=ne,j<=R){var le=u-R;if((U>7e3||q>24576)&&(le>423||!p)){m=Ex(n,f,0,V,ce,se,I,q,F,R-F,m),q=U=I=0,F=R;for(var ve=0;ve<286;++ve)ce[ve]=0;for(var ve=0;ve<30;++ve)se[ve]=0}var ye=2,ge=0,we=w,Q=ne-Se&32767;if(le>2&&M==G(R-Q))for(var P=Math.min(E,le)-1,Y=Math.min(32767,R),re=Math.min(258,le);Q<=Y&&--we&&ne!=Se;){if(n[R+ye]==n[R+ye-Q]){for(var fe=0;fe<re&&n[R+fe]==n[R+fe-Q];++fe);if(fe>ye){if(ye=fe,ge=Q,fe>P)break;for(var me=Math.min(Q,fe-2),_e=0,ve=0;ve<me;++ve){var Me=R-Q+ve&32767,Le=D[Me],Z=Me-Le&32767;Z>_e&&(_e=Z,Se=Me)}}}ne=Se,Se=D[ne],Q+=ne-Se&32767}if(ge){V[q++]=268435456|N1[ye]<<18|Sx[ge];var ae=N1[ye]&31,Te=Sx[ge]&31;I+=n2[ae]+r2[Te],++ce[257+ae],++se[Te],j=R+ye,++U}else V[q++]=n[R],++ce[n[R]]}}for(R=Math.max(R,j);R<u;++R)V[q++]=n[R],++ce[n[R]];m=Ex(n,f,p,V,ce,se,I,q,F,R-F,m),p||(o.r=m&7|f[m/8|0]<<3,m-=7,o.h=C,o.p=D,o.i=R,o.w=j)}else{for(var R=o.w||0;R<u+p;R+=65535){var Ee=R+65535;Ee>=u&&(f[m/8|0]=p,Ee=u),m=aA(f,m+1,n.subarray(R,Ee))}o.i=u}return l8(d,0,r+sA(m)+s)},lA=function(){var n=1,e=0;return{p:function(t){for(var r=n,s=e,o=t.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)s+=r+=t[u];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}n=r,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},d8=function(n,e,t,r,s){if(!s&&(s={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new To(o.length+n.length);u.set(o),u.set(n,o.length),n=u,s.w=o.length}return u8(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,s)},cA=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},h8=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var s=lA();s.p(e.dictionary),cA(n,2,s.d())}};function C1(n,e){e||(e={});var t=lA();t.p(n);var r=d8(n,e,e.dictionary?6:2,4);return h8(r,e),cA(r,r.length-4,t.d()),r}var f8=typeof TextDecoder<"u"&&new TextDecoder,p8=0;try{f8.decode(oA,{stream:!0}),p8=1}catch{}function m8(n){if(Array.isArray(n))return n}function g8(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,o,u,d=[],f=!0,p=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(f=(r=o.call(t)).done)&&(d.push(r.value),d.length!==e);f=!0);}catch(m){p=!0,s=m}finally{try{if(!f&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(p)throw s}}return d}}function Nx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function y8(n,e){if(n){if(typeof n=="string")return Nx(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Nx(n,e):void 0}}function v8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ax(n,e){return m8(n)||g8(n,e)||y8(n,e)||v8()}function Tx(n,e="utf8"){return new TextDecoder(e).decode(n)}const b8=new TextEncoder;function w8(n){return b8.encode(n)}const x8=1024*8,S8=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Sy={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class i2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=x8,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const s=t.offset?t.offset>>>0:0,o=e.byteLength-s;let u=s;(ArrayBuffer.isView(e)||e instanceof i2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+s),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,s=new Uint8Array(r);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=Sy[t].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,o=this.buffer.slice(s,s+r);if(this.littleEndian===S8&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(s,s+r));d.reverse();const f=new Sy[t](d.buffer);return this.offset+=r,f.reverse(),f}const u=new Sy[t](o);return this.offset+=r,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return Tx(this.readBytes(e))}decodeText(e=1,t="utf8"){return Tx(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(w8(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function bh(n){let e=n.length;for(;--e>=0;)n[e]=0}const _8=3,E8=258,uA=29,N8=256,A8=N8+1+uA,dA=30,T8=512,C8=new Array((A8+2)*2);bh(C8);const j8=new Array(dA*2);bh(j8);const R8=new Array(T8);bh(R8);const I8=new Array(E8-_8+1);bh(I8);const D8=new Array(uA);bh(D8);const k8=new Array(dA);bh(k8);const L8=(n,e,t,r)=>{let s=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do s=s+e[r++]|0,o=o+s|0;while(--u);s%=65521,o%=65521}return s|o<<16|0};var j1=L8;const P8=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},M8=new Uint32Array(P8()),O8=(n,e,t,r)=>{const s=M8,o=r+t;n^=-1;for(let u=r;u<o;u++)n=n>>>8^s[(n^e[u])&255];return n^-1};var Jo=O8,R1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},hA={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const F8=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var U8=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)F8(t,r)&&(n[r]=t[r])}}return n},B8=n=>{let e=0;for(let r=0,s=n.length;r<s;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,s=0,o=n.length;r<o;r++){let u=n[r];t.set(u,s),s+=u.length}return t},fA={assign:U8,flattenChunks:B8};let pA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{pA=!1}const Of=new Uint8Array(256);for(let n=0;n<256;n++)Of[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Of[254]=Of[254]=1;var V8=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,s,o,u=n.length,d=0;for(s=0;s<u;s++)t=n.charCodeAt(s),(t&64512)===55296&&s+1<u&&(r=n.charCodeAt(s+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),s++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,s=0;o<d;s++)t=n.charCodeAt(s),(t&64512)===55296&&s+1<u&&(r=n.charCodeAt(s+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),s++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const z8=(n,e)=>{if(e<65534&&n.subarray&&pA)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var q8=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,s;const o=new Array(t*2);for(s=0,r=0;r<t;){let u=n[r++];if(u<128){o[s++]=u;continue}let d=Of[u];if(d>4){o[s++]=65533,r+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&r<t;)u=u<<6|n[r++]&63,d--;if(d>1){o[s++]=65533;continue}u<65536?o[s++]=u:(u-=65536,o[s++]=55296|u>>10&1023,o[s++]=56320|u&1023)}return z8(o,s)},H8=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+Of[n[t]]>e?t:e},I1={string2buf:V8,buf2string:q8,utf8border:H8};function G8(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var $8=G8;const rm=16209,W8=16191;var Y8=function(e,t){let r,s,o,u,d,f,p,m,x,E,w,A,D,C,k,H,G,V,ce,se,U,I,R,q;const j=e.state;r=e.next_in,R=e.input,s=r+(e.avail_in-5),o=e.next_out,q=e.output,u=o-(t-e.avail_out),d=o+(e.avail_out-257),f=j.dmax,p=j.wsize,m=j.whave,x=j.wnext,E=j.window,w=j.hold,A=j.bits,D=j.lencode,C=j.distcode,k=(1<<j.lenbits)-1,H=(1<<j.distbits)-1;e:do{A<15&&(w+=R[r++]<<A,A+=8,w+=R[r++]<<A,A+=8),G=D[w&k];t:for(;;){if(V=G>>>24,w>>>=V,A-=V,V=G>>>16&255,V===0)q[o++]=G&65535;else if(V&16){ce=G&65535,V&=15,V&&(A<V&&(w+=R[r++]<<A,A+=8),ce+=w&(1<<V)-1,w>>>=V,A-=V),A<15&&(w+=R[r++]<<A,A+=8,w+=R[r++]<<A,A+=8),G=C[w&H];n:for(;;){if(V=G>>>24,w>>>=V,A-=V,V=G>>>16&255,V&16){if(se=G&65535,V&=15,A<V&&(w+=R[r++]<<A,A+=8,A<V&&(w+=R[r++]<<A,A+=8)),se+=w&(1<<V)-1,se>f){e.msg="invalid distance too far back",j.mode=rm;break e}if(w>>>=V,A-=V,V=o-u,se>V){if(V=se-V,V>m&&j.sane){e.msg="invalid distance too far back",j.mode=rm;break e}if(U=0,I=E,x===0){if(U+=p-V,V<ce){ce-=V;do q[o++]=E[U++];while(--V);U=o-se,I=q}}else if(x<V){if(U+=p+x-V,V-=x,V<ce){ce-=V;do q[o++]=E[U++];while(--V);if(U=0,x<ce){V=x,ce-=V;do q[o++]=E[U++];while(--V);U=o-se,I=q}}}else if(U+=x-V,V<ce){ce-=V;do q[o++]=E[U++];while(--V);U=o-se,I=q}for(;ce>2;)q[o++]=I[U++],q[o++]=I[U++],q[o++]=I[U++],ce-=3;ce&&(q[o++]=I[U++],ce>1&&(q[o++]=I[U++]))}else{U=o-se;do q[o++]=q[U++],q[o++]=q[U++],q[o++]=q[U++],ce-=3;while(ce>2);ce&&(q[o++]=q[U++],ce>1&&(q[o++]=q[U++]))}}else if((V&64)===0){G=C[(G&65535)+(w&(1<<V)-1)];continue n}else{e.msg="invalid distance code",j.mode=rm;break e}break}}else if((V&64)===0){G=D[(G&65535)+(w&(1<<V)-1)];continue t}else if(V&32){j.mode=W8;break e}else{e.msg="invalid literal/length code",j.mode=rm;break e}break}}while(r<s&&o<d);ce=A>>3,r-=ce,A-=ce<<3,w&=(1<<A)-1,e.next_in=r,e.next_out=o,e.avail_in=r<s?5+(s-r):5-(r-s),e.avail_out=o<d?257+(d-o):257-(o-d),j.hold=w,j.bits=A};const Od=15,Cx=852,jx=592,Rx=0,_y=1,Ix=2,K8=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),X8=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Q8=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),J8=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Z8=(n,e,t,r,s,o,u,d)=>{const f=d.bits;let p=0,m=0,x=0,E=0,w=0,A=0,D=0,C=0,k=0,H=0,G,V,ce,se,U,I=null,R;const q=new Uint16Array(Od+1),j=new Uint16Array(Od+1);let F=null,M,ne,Se;for(p=0;p<=Od;p++)q[p]=0;for(m=0;m<r;m++)q[e[t+m]]++;for(w=f,E=Od;E>=1&&q[E]===0;E--);if(w>E&&(w=E),E===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,d.bits=1,0;for(x=1;x<E&&q[x]===0;x++);for(w<x&&(w=x),C=1,p=1;p<=Od;p++)if(C<<=1,C-=q[p],C<0)return-1;if(C>0&&(n===Rx||E!==1))return-1;for(j[1]=0,p=1;p<Od;p++)j[p+1]=j[p]+q[p];for(m=0;m<r;m++)e[t+m]!==0&&(u[j[e[t+m]]++]=m);if(n===Rx?(I=F=u,R=20):n===_y?(I=K8,F=X8,R=257):(I=Q8,F=J8,R=0),H=0,m=0,p=x,U=o,A=w,D=0,ce=-1,k=1<<w,se=k-1,n===_y&&k>Cx||n===Ix&&k>jx)return 1;for(;;){M=p-D,u[m]+1<R?(ne=0,Se=u[m]):u[m]>=R?(ne=F[u[m]-R],Se=I[u[m]-R]):(ne=96,Se=0),G=1<<p-D,V=1<<A,x=V;do V-=G,s[U+(H>>D)+V]=M<<24|ne<<16|Se|0;while(V!==0);for(G=1<<p-1;H&G;)G>>=1;if(G!==0?(H&=G-1,H+=G):H=0,m++,--q[p]===0){if(p===E)break;p=e[t+u[m]]}if(p>w&&(H&se)!==ce){for(D===0&&(D=w),U+=x,A=p-D,C=1<<A;A+D<E&&(C-=q[A+D],!(C<=0));)A++,C<<=1;if(k+=1<<A,n===_y&&k>Cx||n===Ix&&k>jx)return 1;ce=H&se,s[ce]=w<<24|A<<16|U-o|0}}return H!==0&&(s[U+H]=p-D<<24|64<<16|0),d.bits=w,0};var Nf=Z8;const e7=0,mA=1,gA=2,{Z_FINISH:Dx,Z_BLOCK:t7,Z_TREES:im,Z_OK:Xu,Z_STREAM_END:n7,Z_NEED_DICT:r7,Z_STREAM_ERROR:Za,Z_DATA_ERROR:yA,Z_MEM_ERROR:vA,Z_BUF_ERROR:i7,Z_DEFLATED:kx}=hA,Pg=16180,Lx=16181,Px=16182,Mx=16183,Ox=16184,Fx=16185,Ux=16186,Bx=16187,Vx=16188,zx=16189,eg=16190,zl=16191,Ey=16192,qx=16193,Ny=16194,Hx=16195,Gx=16196,$x=16197,Wx=16198,sm=16199,am=16200,Yx=16201,Kx=16202,Xx=16203,Qx=16204,Jx=16205,Ay=16206,Zx=16207,eS=16208,Ir=16209,bA=16210,wA=16211,s7=852,a7=592,o7=15,l7=o7,tS=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function c7(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ed=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Pg||e.mode>wA?1:0},xA=n=>{if(ed(n))return Za;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Pg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(s7),e.distcode=e.distdyn=new Int32Array(a7),e.sane=1,e.back=-1,Xu},SA=n=>{if(ed(n))return Za;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,xA(n)},_A=(n,e)=>{let t;if(ed(n))return Za;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Za:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,SA(n))},EA=(n,e)=>{if(!n)return Za;const t=new c7;n.state=t,t.strm=n,t.window=null,t.mode=Pg;const r=_A(n,e);return r!==Xu&&(n.state=null),r},u7=n=>EA(n,l7);let nS=!0,Ty,Cy;const d7=n=>{if(nS){Ty=new Int32Array(512),Cy=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(Nf(mA,n.lens,0,288,Ty,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;Nf(gA,n.lens,0,32,Cy,0,n.work,{bits:5}),nS=!1}n.lencode=Ty,n.lenbits=9,n.distcode=Cy,n.distbits=5},NA=(n,e,t,r)=>{let s;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(s=o.wsize-o.wnext,s>r&&(s=r),o.window.set(e.subarray(t-r,t-r+s),o.wnext),r-=s,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0},h7=(n,e)=>{let t,r,s,o,u,d,f,p,m,x,E,w,A,D,C=0,k,H,G,V,ce,se,U,I;const R=new Uint8Array(4);let q,j;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ed(n)||!n.output||!n.input&&n.avail_in!==0)return Za;t=n.state,t.mode===zl&&(t.mode=Ey),u=n.next_out,s=n.output,f=n.avail_out,o=n.next_in,r=n.input,d=n.avail_in,p=t.hold,m=t.bits,x=d,E=f,I=Xu;e:for(;;)switch(t.mode){case Pg:if(t.wrap===0){t.mode=Ey;break}for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.wrap&2&&p===35615){t.wbits===0&&(t.wbits=15),t.check=0,R[0]=p&255,R[1]=p>>>8&255,t.check=Jo(t.check,R,2,0),p=0,m=0,t.mode=Lx;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((p&255)<<8)+(p>>8))%31){n.msg="incorrect header check",t.mode=Ir;break}if((p&15)!==kx){n.msg="unknown compression method",t.mode=Ir;break}if(p>>>=4,m-=4,U=(p&15)+8,t.wbits===0&&(t.wbits=U),U>15||U>t.wbits){n.msg="invalid window size",t.mode=Ir;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=p&512?zx:zl,p=0,m=0;break;case Lx:for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.flags=p,(t.flags&255)!==kx){n.msg="unknown compression method",t.mode=Ir;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Ir;break}t.head&&(t.head.text=p>>8&1),t.flags&512&&t.wrap&4&&(R[0]=p&255,R[1]=p>>>8&255,t.check=Jo(t.check,R,2,0)),p=0,m=0,t.mode=Px;case Px:for(;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.head&&(t.head.time=p),t.flags&512&&t.wrap&4&&(R[0]=p&255,R[1]=p>>>8&255,R[2]=p>>>16&255,R[3]=p>>>24&255,t.check=Jo(t.check,R,4,0)),p=0,m=0,t.mode=Mx;case Mx:for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.head&&(t.head.xflags=p&255,t.head.os=p>>8),t.flags&512&&t.wrap&4&&(R[0]=p&255,R[1]=p>>>8&255,t.check=Jo(t.check,R,2,0)),p=0,m=0,t.mode=Ox;case Ox:if(t.flags&1024){for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.length=p,t.head&&(t.head.extra_len=p),t.flags&512&&t.wrap&4&&(R[0]=p&255,R[1]=p>>>8&255,t.check=Jo(t.check,R,2,0)),p=0,m=0}else t.head&&(t.head.extra=null);t.mode=Fx;case Fx:if(t.flags&1024&&(w=t.length,w>d&&(w=d),w&&(t.head&&(U=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+w),U)),t.flags&512&&t.wrap&4&&(t.check=Jo(t.check,r,w,o)),d-=w,o+=w,t.length-=w),t.length))break e;t.length=0,t.mode=Ux;case Ux:if(t.flags&2048){if(d===0)break e;w=0;do U=r[o+w++],t.head&&U&&t.length<65536&&(t.head.name+=String.fromCharCode(U));while(U&&w<d);if(t.flags&512&&t.wrap&4&&(t.check=Jo(t.check,r,w,o)),d-=w,o+=w,U)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Bx;case Bx:if(t.flags&4096){if(d===0)break e;w=0;do U=r[o+w++],t.head&&U&&t.length<65536&&(t.head.comment+=String.fromCharCode(U));while(U&&w<d);if(t.flags&512&&t.wrap&4&&(t.check=Jo(t.check,r,w,o)),d-=w,o+=w,U)break e}else t.head&&(t.head.comment=null);t.mode=Vx;case Vx:if(t.flags&512){for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.wrap&4&&p!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Ir;break}p=0,m=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=zl;break;case zx:for(;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}n.adler=t.check=tS(p),p=0,m=0,t.mode=eg;case eg:if(t.havedict===0)return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=m,r7;n.adler=t.check=1,t.mode=zl;case zl:if(e===t7||e===im)break e;case Ey:if(t.last){p>>>=m&7,m-=m&7,t.mode=Ay;break}for(;m<3;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}switch(t.last=p&1,p>>>=1,m-=1,p&3){case 0:t.mode=qx;break;case 1:if(d7(t),t.mode=sm,e===im){p>>>=2,m-=2;break e}break;case 2:t.mode=Gx;break;case 3:n.msg="invalid block type",t.mode=Ir}p>>>=2,m-=2;break;case qx:for(p>>>=m&7,m-=m&7;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Ir;break}if(t.length=p&65535,p=0,m=0,t.mode=Ny,e===im)break e;case Ny:t.mode=Hx;case Hx:if(w=t.length,w){if(w>d&&(w=d),w>f&&(w=f),w===0)break e;s.set(r.subarray(o,o+w),u),d-=w,o+=w,f-=w,u+=w,t.length-=w;break}t.mode=zl;break;case Gx:for(;m<14;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.nlen=(p&31)+257,p>>>=5,m-=5,t.ndist=(p&31)+1,p>>>=5,m-=5,t.ncode=(p&15)+4,p>>>=4,m-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Ir;break}t.have=0,t.mode=$x;case $x:for(;t.have<t.ncode;){for(;m<3;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.lens[F[t.have++]]=p&7,p>>>=3,m-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,q={bits:t.lenbits},I=Nf(e7,t.lens,0,19,t.lencode,0,t.work,q),t.lenbits=q.bits,I){n.msg="invalid code lengths set",t.mode=Ir;break}t.have=0,t.mode=Wx;case Wx:for(;t.have<t.nlen+t.ndist;){for(;C=t.lencode[p&(1<<t.lenbits)-1],k=C>>>24,H=C>>>16&255,G=C&65535,!(k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(G<16)p>>>=k,m-=k,t.lens[t.have++]=G;else{if(G===16){for(j=k+2;m<j;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(p>>>=k,m-=k,t.have===0){n.msg="invalid bit length repeat",t.mode=Ir;break}U=t.lens[t.have-1],w=3+(p&3),p>>>=2,m-=2}else if(G===17){for(j=k+3;m<j;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=k,m-=k,U=0,w=3+(p&7),p>>>=3,m-=3}else{for(j=k+7;m<j;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=k,m-=k,U=0,w=11+(p&127),p>>>=7,m-=7}if(t.have+w>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Ir;break}for(;w--;)t.lens[t.have++]=U}}if(t.mode===Ir)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Ir;break}if(t.lenbits=9,q={bits:t.lenbits},I=Nf(mA,t.lens,0,t.nlen,t.lencode,0,t.work,q),t.lenbits=q.bits,I){n.msg="invalid literal/lengths set",t.mode=Ir;break}if(t.distbits=6,t.distcode=t.distdyn,q={bits:t.distbits},I=Nf(gA,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,q),t.distbits=q.bits,I){n.msg="invalid distances set",t.mode=Ir;break}if(t.mode=sm,e===im)break e;case sm:t.mode=am;case am:if(d>=6&&f>=258){n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=m,Y8(n,E),u=n.next_out,s=n.output,f=n.avail_out,o=n.next_in,r=n.input,d=n.avail_in,p=t.hold,m=t.bits,t.mode===zl&&(t.back=-1);break}for(t.back=0;C=t.lencode[p&(1<<t.lenbits)-1],k=C>>>24,H=C>>>16&255,G=C&65535,!(k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(H&&(H&240)===0){for(V=k,ce=H,se=G;C=t.lencode[se+((p&(1<<V+ce)-1)>>V)],k=C>>>24,H=C>>>16&255,G=C&65535,!(V+k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=V,m-=V,t.back+=V}if(p>>>=k,m-=k,t.back+=k,t.length=G,H===0){t.mode=Jx;break}if(H&32){t.back=-1,t.mode=zl;break}if(H&64){n.msg="invalid literal/length code",t.mode=Ir;break}t.extra=H&15,t.mode=Yx;case Yx:if(t.extra){for(j=t.extra;m<j;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.length+=p&(1<<t.extra)-1,p>>>=t.extra,m-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Kx;case Kx:for(;C=t.distcode[p&(1<<t.distbits)-1],k=C>>>24,H=C>>>16&255,G=C&65535,!(k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if((H&240)===0){for(V=k,ce=H,se=G;C=t.distcode[se+((p&(1<<V+ce)-1)>>V)],k=C>>>24,H=C>>>16&255,G=C&65535,!(V+k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=V,m-=V,t.back+=V}if(p>>>=k,m-=k,t.back+=k,H&64){n.msg="invalid distance code",t.mode=Ir;break}t.offset=G,t.extra=H&15,t.mode=Xx;case Xx:if(t.extra){for(j=t.extra;m<j;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.offset+=p&(1<<t.extra)-1,p>>>=t.extra,m-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Ir;break}t.mode=Qx;case Qx:if(f===0)break e;if(w=E-f,t.offset>w){if(w=t.offset-w,w>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Ir;break}w>t.wnext?(w-=t.wnext,A=t.wsize-w):A=t.wnext-w,w>t.length&&(w=t.length),D=t.window}else D=s,A=u-t.offset,w=t.length;w>f&&(w=f),f-=w,t.length-=w;do s[u++]=D[A++];while(--w);t.length===0&&(t.mode=am);break;case Jx:if(f===0)break e;s[u++]=t.length,f--,t.mode=am;break;case Ay:if(t.wrap){for(;m<32;){if(d===0)break e;d--,p|=r[o++]<<m,m+=8}if(E-=f,n.total_out+=E,t.total+=E,t.wrap&4&&E&&(n.adler=t.check=t.flags?Jo(t.check,s,E,u-E):j1(t.check,s,E,u-E)),E=f,t.wrap&4&&(t.flags?p:tS(p))!==t.check){n.msg="incorrect data check",t.mode=Ir;break}p=0,m=0}t.mode=Zx;case Zx:if(t.wrap&&t.flags){for(;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.wrap&4&&p!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Ir;break}p=0,m=0}t.mode=eS;case eS:I=n7;break e;case Ir:I=yA;break e;case bA:return vA;case wA:default:return Za}return n.next_out=u,n.avail_out=f,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=m,(t.wsize||E!==n.avail_out&&t.mode<Ir&&(t.mode<Ay||e!==Dx))&&NA(n,n.output,n.next_out,E-n.avail_out),x-=n.avail_in,E-=n.avail_out,n.total_in+=x,n.total_out+=E,t.total+=E,t.wrap&4&&E&&(n.adler=t.check=t.flags?Jo(t.check,s,E,n.next_out-E):j1(t.check,s,E,n.next_out-E)),n.data_type=t.bits+(t.last?64:0)+(t.mode===zl?128:0)+(t.mode===sm||t.mode===Ny?256:0),(x===0&&E===0||e===Dx)&&I===Xu&&(I=i7),I},f7=n=>{if(ed(n))return Za;let e=n.state;return e.window&&(e.window=null),n.state=null,Xu},p7=(n,e)=>{if(ed(n))return Za;const t=n.state;return(t.wrap&2)===0?Za:(t.head=e,e.done=!1,Xu)},m7=(n,e)=>{const t=e.length;let r,s,o;return ed(n)||(r=n.state,r.wrap!==0&&r.mode!==eg)?Za:r.mode===eg&&(s=1,s=j1(s,e,t,0),s!==r.check)?yA:(o=NA(n,e,t,t),o?(r.mode=bA,vA):(r.havedict=1,Xu))};var g7=SA,y7=_A,v7=xA,b7=u7,w7=EA,x7=h7,S7=f7,_7=p7,E7=m7,N7="pako inflate (from Nodeca project)",ql={inflateReset:g7,inflateReset2:y7,inflateResetKeep:v7,inflateInit:b7,inflateInit2:w7,inflate:x7,inflateEnd:S7,inflateGetHeader:_7,inflateSetDictionary:E7,inflateInfo:N7};function A7(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var T7=A7;const AA=Object.prototype.toString,{Z_NO_FLUSH:C7,Z_FINISH:j7,Z_OK:Ff,Z_STREAM_END:jy,Z_NEED_DICT:Ry,Z_STREAM_ERROR:R7,Z_DATA_ERROR:rS,Z_MEM_ERROR:I7}=hA;function tp(n){this.options=fA.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $8,this.strm.avail_out=0;let t=ql.inflateInit2(this.strm,e.windowBits);if(t!==Ff)throw new Error(R1[t]);if(this.header=new T7,ql.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=I1.string2buf(e.dictionary):AA.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=ql.inflateSetDictionary(this.strm,e.dictionary),t!==Ff)))throw new Error(R1[t])}tp.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let o,u,d;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?j7:C7,AA.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=ql.inflate(t,u),o===Ry&&s&&(o=ql.inflateSetDictionary(t,s),o===Ff?o=ql.inflate(t,u):o===rS&&(o=Ry));t.avail_in>0&&o===jy&&t.state.wrap>0&&n[t.next_in]!==0;)ql.inflateReset(t),o=ql.inflate(t,u);switch(o){case R7:case rS:case Ry:case I7:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===jy))if(this.options.to==="string"){let f=I1.utf8border(t.output,t.next_out),p=t.next_out-f,m=I1.buf2string(t.output,f);t.next_out=p,t.avail_out=r-p,p&&t.output.set(t.output.subarray(f,f+p),0),this.onData(m)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Ff&&d===0)){if(o===jy)return o=ql.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};tp.prototype.onData=function(n){this.chunks.push(n)};tp.prototype.onEnd=function(n){n===Ff&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=fA.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function D7(n,e){const t=new tp(e);if(t.push(n),t.err)throw t.msg||R1[t.err];return t.result}var k7=tp,L7=D7,P7={Inflate:k7,inflate:L7};const{Inflate:M7,inflate:O7}=P7;var iS=M7,F7=O7;const TA=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;TA[n]=e}const sS=4294967295;function U7(n,e,t){let r=n;for(let s=0;s<t;s++)r=TA[(r^e[s])&255]^r>>>8;return r}function B7(n,e){return(U7(sS,n,e)^sS)>>>0}function aS(n,e,t){const r=n.readUint32(),s=B7(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(s!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${s}`)}function CA(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function jA(n,e,t,r){let s=0;for(;s<r;s++)e[s]=n[s];for(;s<t;s++)e[s]=n[s]+e[s-r]&255}function RA(n,e,t,r){let s=0;if(t.length===0)for(;s<r;s++)e[s]=n[s];else for(;s<r;s++)e[s]=n[s]+t[s]&255}function IA(n,e,t,r,s){let o=0;if(t.length===0){for(;o<s;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-s]>>1)&255}else{for(;o<s;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-s]+t[o]>>1)&255}}function DA(n,e,t,r,s){let o=0;if(t.length===0){for(;o<s;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-s]&255}else{for(;o<s;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+V7(e[o-s],t[o],t[o-s])&255}}function V7(n,e,t){const r=n+e-t,s=Math.abs(r-n),o=Math.abs(r-e),u=Math.abs(r-t);return s<=o&&s<=u?n:o<=u?e:t}function z7(n,e,t,r,s,o){switch(n){case 0:CA(e,t,s);break;case 1:jA(e,t,s,o);break;case 2:RA(e,t,r,s);break;case 3:IA(e,t,r,s,o);break;case 4:DA(e,t,r,s,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const q7=new Uint16Array([255]),H7=new Uint8Array(q7.buffer),G7=H7[0]===255;function $7(n){const{data:e,width:t,height:r,channels:s,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*s,f=new Uint8Array(r*t*d);let p=0;for(let m=0;m<7;m++){const x=u[m],E=Math.ceil((t-x.x)/x.xStep),w=Math.ceil((r-x.y)/x.yStep);if(E<=0||w<=0)continue;const A=E*d,D=new Uint8Array(A);for(let C=0;C<w;C++){const k=e[p++],H=e.subarray(p,p+A);p+=A;const G=new Uint8Array(A);z7(k,H,G,D,A,d),D.set(G);for(let V=0;V<E;V++){const ce=x.x+V*x.xStep,se=x.y+C*x.yStep;if(!(ce>=t||se>=r))for(let U=0;U<d;U++)f[(se*t+ce)*d+U]=G[V*d+U]}}}if(o===16){const m=new Uint16Array(f.buffer);if(G7)for(let x=0;x<m.length;x++)m[x]=W7(m[x]);return m}else return f}function W7(n){return(n&255)<<8|n>>8&255}const Y7=new Uint16Array([255]),K7=new Uint8Array(Y7.buffer),X7=K7[0]===255,Q7=new Uint8Array(0);function oS(n){const{data:e,width:t,height:r,channels:s,depth:o}=n,u=Math.ceil(o/8)*s,d=Math.ceil(o/8*s*t),f=new Uint8Array(r*d);let p=Q7,m=0,x,E;for(let w=0;w<r;w++){switch(x=e.subarray(m+1,m+1+d),E=f.subarray(w*d,(w+1)*d),e[m]){case 0:CA(x,E,d);break;case 1:jA(x,E,d,u);break;case 2:RA(x,E,p,d);break;case 3:IA(x,E,p,d,u);break;case 4:DA(x,E,p,d,u);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}p=E,m+=d+1}if(o===16){const w=new Uint16Array(f.buffer);if(X7)for(let A=0;A<w.length;A++)w[A]=J7(w[A]);return w}else return f}function J7(n){return(n&255)<<8|n>>8&255}const Em=Uint8Array.of(137,80,78,71,13,10,26,10);function lS(n){if(!Z7(n.readBytes(Em.length)))throw new Error("wrong PNG signature")}function Z7(n){if(n.length<Em.length)return!1;for(let e=0;e<Em.length;e++)if(n[e]!==Em[e])return!1;return!0}const eM="tEXt",tM=0,kA=new TextDecoder("latin1");function nM(n){if(iM(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const rM=/^[\u0000-\u00FF]*$/;function iM(n){if(!rM.test(n))throw new Error("invalid latin1 text")}function sM(n,e,t){const r=LA(e);n[r]=aM(e,t-r.length-1)}function LA(n){for(n.mark();n.readByte()!==tM;);const e=n.offset;n.reset();const t=kA.decode(n.readBytes(e-n.offset-1));return n.skip(1),nM(t),t}function aM(n,e){return kA.decode(n.readBytes(e))}const Ca={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Iy={UNKNOWN:-1,DEFLATE:0},cS={UNKNOWN:-1,ADAPTIVE:0},Dy={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},om={NONE:0,BACKGROUND:1,PREVIOUS:2},ky={SOURCE:0,OVER:1};class oM extends i2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new iS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Iy.UNKNOWN,this._filterMethod=cS.UNKNOWN,this._interlaceMethod=Dy.UNKNOWN,this._colorType=Ca.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(lS(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(lS(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case eM:sM(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?aS(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?aS(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=lM(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case Ca.GREYSCALE:r=1;break;case Ca.TRUECOLOUR:r=3;break;case Ca.INDEXED_COLOUR:r=1;break;case Ca.GREYSCALE_ALPHA:r=2;break;case Ca.TRUECOLOUR_ALPHA:r=4;break;case Ca.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Iy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let s=0;s<t;s++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ca.GREYSCALE:case Ca.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Ca.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Ca.UNKNOWN:case Ca.GREYSCALE_ALPHA:case Ca.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=LA(this),r=this.readUint8();if(r!==Iy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const s=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:F7(s)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=oS({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const s=this._apng.frames.at(e-1);this.disposeFrame(r,s,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case om.NONE:break;case om.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const u=(s*e.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)r.data[u+d]=0}break;case om.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,s=(o,u)=>{const d=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,f=(o*t.width+u)*this._png.channels;return{index:d,frameIndex:f}};switch(t.blendOp){case ky.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=s(o,u);for(let p=0;p<this._png.channels;p++)e.data[d+p]=t.data[f+p]}break;case ky.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:f}=s(o,u);for(let p=0;p<this._png.channels;p++){const m=t.data[f+this._png.channels-1]/r,x=p%(this._png.channels-1)===0?1:t.data[f+p],E=Math.floor(m*x+(1-m)*e.data[d+p]);e.data[d+p]+=E}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==cS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Dy.NO_INTERLACE)this._png.data=oS({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Dy.ADAM7)this._png.data=$7({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:om.NONE,blendOp:ky.SOURCE,data:e}),this._inflator=new iS,this._writingDataChunks=!1}}function lM(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var uS;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(uS||(uS={}));function cM(n,e){return new oM(n,e).decode()}var en=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Ly(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var gr={log:Ly,warn:function(n){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):Ly.call(null,arguments))},error:function(n){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):Ly(n))}};function Py(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Du(r.response,e,t)},r.onerror=function(){gr.error("could not download file")},r.send()}function dS(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function lm(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Du=en.saveAs||((typeof window>"u"?"undefined":nr(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=en.URL||en.webkitURL,s=document.createElement("a");e=e||n.name||"download",s.download=e,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?dS(s.href)?Py(n,e,t):lm(s,s.target="_blank"):lm(s)):(s.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){lm(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(dS(n))Py(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){lm(r)})}else navigator.msSaveOrOpenBlob((function(s,o){return o===void 0?o={autoBom:!1}:nr(o)!=="object"&&(gr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Py(n,e,t);var s=n.type==="application/octet-stream",o=/constructor/i.test(en.HTMLElement)||en.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&o)&&(typeof FileReader>"u"?"undefined":nr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var m=d.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},d.readAsDataURL(n)}else{var f=en.URL||en.webkitURL,p=f.createObjectURL(n);r?r.location=p:location.href=p,r=null,setTimeout(function(){f.revokeObjectURL(p)},4e4)}});function PA(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<t.length;r++){var s=t[r].re,o=t[r].process,u=s.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),f=this.g.toString(16),p=this.b.toString(16);return d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),p.length==1&&(p="0"+p),"#"+d+f+p}}var Nm=en.atob.bind(en),hS=en.btoa.bind(en);function My(n,e){var t=n[0],r=n[1],s=n[2],o=n[3];t=Ss(t,r,s,o,e[0],7,-680876936),o=Ss(o,t,r,s,e[1],12,-389564586),s=Ss(s,o,t,r,e[2],17,606105819),r=Ss(r,s,o,t,e[3],22,-1044525330),t=Ss(t,r,s,o,e[4],7,-176418897),o=Ss(o,t,r,s,e[5],12,1200080426),s=Ss(s,o,t,r,e[6],17,-1473231341),r=Ss(r,s,o,t,e[7],22,-45705983),t=Ss(t,r,s,o,e[8],7,1770035416),o=Ss(o,t,r,s,e[9],12,-1958414417),s=Ss(s,o,t,r,e[10],17,-42063),r=Ss(r,s,o,t,e[11],22,-1990404162),t=Ss(t,r,s,o,e[12],7,1804603682),o=Ss(o,t,r,s,e[13],12,-40341101),s=Ss(s,o,t,r,e[14],17,-1502002290),t=_s(t,r=Ss(r,s,o,t,e[15],22,1236535329),s,o,e[1],5,-165796510),o=_s(o,t,r,s,e[6],9,-1069501632),s=_s(s,o,t,r,e[11],14,643717713),r=_s(r,s,o,t,e[0],20,-373897302),t=_s(t,r,s,o,e[5],5,-701558691),o=_s(o,t,r,s,e[10],9,38016083),s=_s(s,o,t,r,e[15],14,-660478335),r=_s(r,s,o,t,e[4],20,-405537848),t=_s(t,r,s,o,e[9],5,568446438),o=_s(o,t,r,s,e[14],9,-1019803690),s=_s(s,o,t,r,e[3],14,-187363961),r=_s(r,s,o,t,e[8],20,1163531501),t=_s(t,r,s,o,e[13],5,-1444681467),o=_s(o,t,r,s,e[2],9,-51403784),s=_s(s,o,t,r,e[7],14,1735328473),t=Es(t,r=_s(r,s,o,t,e[12],20,-1926607734),s,o,e[5],4,-378558),o=Es(o,t,r,s,e[8],11,-2022574463),s=Es(s,o,t,r,e[11],16,1839030562),r=Es(r,s,o,t,e[14],23,-35309556),t=Es(t,r,s,o,e[1],4,-1530992060),o=Es(o,t,r,s,e[4],11,1272893353),s=Es(s,o,t,r,e[7],16,-155497632),r=Es(r,s,o,t,e[10],23,-1094730640),t=Es(t,r,s,o,e[13],4,681279174),o=Es(o,t,r,s,e[0],11,-358537222),s=Es(s,o,t,r,e[3],16,-722521979),r=Es(r,s,o,t,e[6],23,76029189),t=Es(t,r,s,o,e[9],4,-640364487),o=Es(o,t,r,s,e[12],11,-421815835),s=Es(s,o,t,r,e[15],16,530742520),t=Ns(t,r=Es(r,s,o,t,e[2],23,-995338651),s,o,e[0],6,-198630844),o=Ns(o,t,r,s,e[7],10,1126891415),s=Ns(s,o,t,r,e[14],15,-1416354905),r=Ns(r,s,o,t,e[5],21,-57434055),t=Ns(t,r,s,o,e[12],6,1700485571),o=Ns(o,t,r,s,e[3],10,-1894986606),s=Ns(s,o,t,r,e[10],15,-1051523),r=Ns(r,s,o,t,e[1],21,-2054922799),t=Ns(t,r,s,o,e[8],6,1873313359),o=Ns(o,t,r,s,e[15],10,-30611744),s=Ns(s,o,t,r,e[6],15,-1560198380),r=Ns(r,s,o,t,e[13],21,1309151649),t=Ns(t,r,s,o,e[4],6,-145523070),o=Ns(o,t,r,s,e[11],10,-1120210379),s=Ns(s,o,t,r,e[2],15,718787259),r=Ns(r,s,o,t,e[9],21,-343485551),n[0]=$c(t,n[0]),n[1]=$c(r,n[1]),n[2]=$c(s,n[2]),n[3]=$c(o,n[3])}function Mg(n,e,t,r,s,o){return e=$c($c(e,n),$c(r,o)),$c(e<<s|e>>>32-s,t)}function Ss(n,e,t,r,s,o,u){return Mg(e&t|~e&r,n,e,s,o,u)}function _s(n,e,t,r,s,o,u){return Mg(e&r|t&~r,n,e,s,o,u)}function Es(n,e,t,r,s,o,u){return Mg(e^t^r,n,e,s,o,u)}function Ns(n,e,t,r,s,o,u){return Mg(t^(e|~r),n,e,s,o,u)}function MA(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)My(r,uM(n.substring(e-64,e)));n=n.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(My(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,My(r,s),r}function uM(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var fS="0123456789abcdef".split("");function dM(n){for(var e="",t=0;t<4;t++)e+=fS[n>>8*t+4&15]+fS[n>>8*t&15];return e}function hM(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function D1(n){return MA(n).map(hM).join("")}var fM=(function(n){for(var e=0;e<n.length;e++)n[e]=dM(n[e]);return n.join("")})(MA("hello"))!="5d41402abc4b2a76b9719d911017c592";function $c(n,e){if(fM){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function k1(n,e){var t,r,s,o;if(n!==t){for(var u=(s=n,o=1+(256/n.length|0),new Array(o+1).join(s)),d=[],f=0;f<256;f++)d[f]=f;var p=0;for(f=0;f<256;f++){var m=d[f];p=(p+m+u.charCodeAt(f))%256,d[f]=d[p],d[p]=m}t=n,r=d}else d=r;var x=e.length,E=0,w=0,A="";for(f=0;f<x;f++)w=(w+(m=d[E=(E+1)%256]))%256,d[E]=d[w],d[w]=m,u=d[(d[E]+d[w])%256],A+=String.fromCharCode(e.charCodeAt(f)^u);return A}var pS={print:4,modify:8,copy:16,"annot-forms":32};function Hd(n,e,t,r){this.v=1,this.r=2;var s=192;n.forEach(function(d){if(pS.perm!==void 0)throw new Error("Invalid permission: "+d);s+=pS[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^s)),this.encryptionKey=D1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=k1(this.encryptionKey,this.padding)}function Gd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var s=n.charCodeAt(r);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):n[r]}return e}function mS(n){if(nr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,s){if(s=s||!1,typeof t!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!s],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,r)}catch(d){en.console&&gr.error("jsPDF PubSub Error",d.message,d)}u[1]&&s.push(o)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function tg(n){if(!(this instanceof tg))return new tg(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function OA(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function ku(n,e,t,r,s){if(!(this instanceof ku))return new ku(n,e,t,r,s);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,OA.call(this,r,s)}function $d(n,e,t,r,s){if(!(this instanceof $d))return new $d(n,e,t,r,s);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,OA.call(this,r,s)}function Mt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],o=arguments[3],u=[],d=1,f=16,p="S",m=null;nr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,s=n.format||s,o=n.compress||n.compressPdf||o,(m=n.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(f=n.floatPrecision),p=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),r=r||"mm",t=(""+(t||"P")).toLowerCase();var x=n.putOnlyUsedFonts||!1,E={},w={internal:{},__private__:{}};w.__private__.PubSub=mS;var A="1.3",D=w.__private__.getPdfVersion=function(){return A};w.__private__.setPdfVersion=function(_){A=_};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};w.__private__.getPageFormats=function(){return C};var k=w.__private__.getPageFormat=function(_){return C[_]};s=s||"a4";var H="compat",G="advanced",V=H;function ce(){this.saveGraphicsState(),z(new Ft(pt,0,0,-pt,0,ks()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),p="n",V=G}function se(){this.restoreGraphicsState(),p="S",V=H}var U=w.__private__.combineFontStyleAndFontWeight=function(_,$){if(_=="bold"&&$=="normal"||_=="bold"&&$==400||_=="normal"&&$=="italic"||_=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(_=$==400||$==="normal"?_==="italic"?"italic":"normal":$!=700&&$!=="bold"||_!=="normal"?($==700?"bold":$)+""+_:"bold"),_};w.advancedAPI=function(_){var $=V===H;return $&&ce.call(this),typeof _!="function"||(_(this),$&&se.call(this)),this},w.compatAPI=function(_){var $=V===G;return $&&se.call(this),typeof _!="function"||(_(this),$&&ce.call(this)),this},w.isAdvancedAPI=function(){return V===G};var I,R=function(_){if(V!==G)throw new Error(_+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},q=w.roundToPrecision=w.__private__.roundToPrecision=function(_,$){var de=e||$;if(isNaN(_)||isNaN(de))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _.toFixed(de).replace(/0+$/,"")};I=w.hpf=w.__private__.hpf=typeof f=="number"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return q(_,f)}:f==="smart"?function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return q(_,_>-1&&_<1?16:5)}:function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.hpf");return q(_,16)};var j=w.f2=w.__private__.f2=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f2");return q(_,2)},F=w.__private__.f3=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.f3");return q(_,3)},M=w.scale=w.__private__.scale=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.scale");return V===H?_*pt:V===G?_:void 0},ne=function(_){return M((function($){return V===H?ks()-$:V===G?$:void 0})(_))};w.__private__.setPrecision=w.setPrecision=function(_){typeof parseInt(_,10)=="number"&&(e=parseInt(_,10))};var Se,le="00000000000000000000000000000000",ve=w.__private__.getFileId=function(){return le},ye=w.__private__.setFileId=function(_){return le=_!==void 0&&/^[a-fA-F0-9]{32}$/.test(_)?_.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(hr=new Hd(m.userPermissions,m.userPassword,m.ownerPassword,le)),le};w.setFileId=function(_){return ye(_),this},w.getFileId=function(){return ve()};var ge=w.__private__.convertDateToPDFDate=function(_){var $=_.getTimezoneOffset(),de=$<0?"+":"-",xe=Math.floor(Math.abs($/60)),Re=Math.abs($%60),Qe=[de,re(xe),"'",re(Re),"'"].join("");return["D:",_.getFullYear(),re(_.getMonth()+1),re(_.getDate()),re(_.getHours()),re(_.getMinutes()),re(_.getSeconds()),Qe].join("")},we=w.__private__.convertPDFDateToDate=function(_){var $=parseInt(_.substr(2,4),10),de=parseInt(_.substr(6,2),10)-1,xe=parseInt(_.substr(8,2),10),Re=parseInt(_.substr(10,2),10),Qe=parseInt(_.substr(12,2),10),st=parseInt(_.substr(14,2),10);return new Date($,de,xe,Re,Qe,st,0)},Q=w.__private__.setCreationDate=function(_){var $;if(_===void 0&&(_=new Date),_ instanceof Date)$=ge(_);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=_}return Se=$},P=w.__private__.getCreationDate=function(_){var $=Se;return _==="jsDate"&&($=we(Se)),$};w.setCreationDate=function(_){return Q(_),this},w.getCreationDate=function(_){return P(_)};var Y,re=w.__private__.padd2=function(_){return("0"+parseInt(_)).slice(-2)},fe=w.__private__.padd2Hex=function(_){return("00"+(_=_.toString())).substr(_.length)},me=0,_e=[],Me=[],Le=0,Z=[],ae=[],Te=!1,Ee=Me;w.__private__.setCustomOutputDestination=function(_){Te=!0,Ee=_};var pe=function(_){Te||(Ee=_)};w.__private__.resetCustomOutputDestination=function(){Te=!1,Ee=Me};var z=w.__private__.out=function(_){return _=_.toString(),Le+=_.length+1,Ee.push(_),Ee},Ie=w.__private__.write=function(_){return z(arguments.length===1?_.toString():Array.prototype.join.call(arguments," "))},Be=w.__private__.getArrayBuffer=function(_){for(var $=_.length,de=new ArrayBuffer($),xe=new Uint8Array(de);$--;)xe[$]=_.charCodeAt($);return de},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];w.__private__.getStandardFonts=function(){return $e};var Ce=n.fontSize||16;w.__private__.setFontSize=w.setFontSize=function(_){return Ce=V===G?_/pt:_,this};var Ze,et=w.__private__.getFontSize=w.getFontSize=function(){return V===H?Ce:Ce*pt},xt=n.R2L||!1;w.__private__.setR2L=w.setR2L=function(_){return xt=_,this},w.__private__.getR2L=w.getR2L=function(){return xt};var vt,Ue=w.__private__.setZoomMode=function(_){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_))Ze=_;else if(isNaN(_)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(_)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_+'" is not recognized.');Ze=_}else Ze=parseInt(_,10)};w.__private__.getZoomMode=function(){return Ze};var ot,dt=w.__private__.setPageMode=function(_){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_+'" is not recognized.');vt=_};w.__private__.getPageMode=function(){return vt};var gt=w.__private__.setLayoutMode=function(_){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_+'" is not recognized.');ot=_};w.__private__.getLayoutMode=function(){return ot},w.__private__.setDisplayMode=w.setDisplayMode=function(_,$,de){return Ue(_),gt($),dt(de),this};var De={title:"",subject:"",author:"",keywords:"",creator:""};w.__private__.getDocumentProperty=function(_){if(Object.keys(De).indexOf(_)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return De[_]},w.__private__.getDocumentProperties=function(){return De},w.__private__.setDocumentProperties=w.setProperties=w.setDocumentProperties=function(_){for(var $ in De)De.hasOwnProperty($)&&_[$]&&(De[$]=_[$]);return this},w.__private__.setDocumentProperty=function(_,$){if(Object.keys(De).indexOf(_)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return De[_]=$};var We,pt,mt,ft,ct,bt={},wt={},qt=[],Tt={},dn={},Bt={},Ot={},jn=null,Dt=0,Lt=[],cn=new mS(w),wi=n.hotfixes||[],ui={},zs={},Zr=[],Ft=function _($,de,xe,Re,Qe,st){if(!(this instanceof _))return new _($,de,xe,Re,Qe,st);isNaN($)&&($=1),isNaN(de)&&(de=0),isNaN(xe)&&(xe=0),isNaN(Re)&&(Re=1),isNaN(Qe)&&(Qe=0),isNaN(st)&&(st=0),this._matrix=[$,de,xe,Re,Qe,st]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(_){this._matrix[0]=_}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(_){this._matrix[1]=_}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(_){this._matrix[2]=_}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(_){this._matrix[3]=_}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(_){this._matrix[4]=_}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(_){this._matrix[5]=_}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(_){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(I).join(_)},Ft.prototype.multiply=function(_){var $=_.sx*this.sx+_.shy*this.shx,de=_.sx*this.shy+_.shy*this.sy,xe=_.shx*this.sx+_.sy*this.shx,Re=_.shx*this.shy+_.sy*this.sy,Qe=_.tx*this.sx+_.ty*this.shx+this.tx,st=_.tx*this.shy+_.ty*this.sy+this.ty;return new Ft($,de,xe,Re,Qe,st)},Ft.prototype.decompose=function(){var _=this.sx,$=this.shy,de=this.shx,xe=this.sy,Re=this.tx,Qe=this.ty,st=Math.sqrt(_*_+$*$),Et=(_/=st)*de+($/=st)*xe;de-=_*Et,xe-=$*Et;var jt=Math.sqrt(de*de+xe*xe);return Et/=jt,_*(xe/=jt)<$*(de/=jt)&&(_=-_,$=-$,Et=-Et,st=-st),{scale:new Ft(st,0,0,jt,0,0),translate:new Ft(1,0,0,1,Re,Qe),rotate:new Ft(_,$,-$,_,0,0),skew:new Ft(1,0,Et,1,0,0)}},Ft.prototype.toString=function(_){return this.join(" ")},Ft.prototype.inversed=function(){var _=this.sx,$=this.shy,de=this.shx,xe=this.sy,Re=this.tx,Qe=this.ty,st=1/(_*xe-$*de),Et=xe*st,jt=-$*st,Ht=-de*st,Ut=_*st;return new Ft(Et,jt,Ht,Ut,-Et*Re-Ht*Qe,-jt*Re-Ut*Qe)},Ft.prototype.applyToPoint=function(_){var $=_.x*this.sx+_.y*this.shx+this.tx,de=_.x*this.shy+_.y*this.sy+this.ty;return new fi($,de)},Ft.prototype.applyToRectangle=function(_){var $=this.applyToPoint(_),de=this.applyToPoint(new fi(_.x+_.w,_.y+_.h));return new Hs($.x,$.y,de.x-$.x,de.y-$.y)},Ft.prototype.clone=function(){var _=this.sx,$=this.shy,de=this.shx,xe=this.sy,Re=this.tx,Qe=this.ty;return new Ft(_,$,de,xe,Re,Qe)},w.Matrix=Ft;var pa=w.matrixMult=function(_,$){return $.multiply(_)},Xi=new Ft(1,0,0,1,0,0);w.unitMatrix=w.identityMatrix=Xi;var Pi=function(_,$){if(!dn[_]){var de=($ instanceof ku?"Sh":"P")+(Object.keys(Tt).length+1).toString(10);$.id=de,dn[_]=de,Tt[de]=$,cn.publish("addPattern",$)}};w.ShadingPattern=ku,w.TilingPattern=$d,w.addShadingPattern=function(_,$){return R("addShadingPattern()"),Pi(_,$),this},w.beginTilingPattern=function(_){R("beginTilingPattern()"),Gs(_.boundingBox[0],_.boundingBox[1],_.boundingBox[2]-_.boundingBox[0],_.boundingBox[3]-_.boundingBox[1],_.matrix)},w.endTilingPattern=function(_,$){R("endTilingPattern()"),$.stream=ae[Y].join(`
`),Pi(_,$),cn.publish("endTilingPattern",$),Zr.pop().restore()};var Mi,Yn=w.__private__.newObject=function(){var _=rr();return Br(_,!0),_},rr=w.__private__.newObjectDeferred=function(){return me++,_e[me]=function(){return Le},me},Br=function(_,$){return $=typeof $=="boolean"&&$,_e[_]=Le,$&&z(_+" 0 obj"),_},xi=w.__private__.newAdditionalObject=function(){var _={objId:rr(),content:""};return Z.push(_),_},di=rr(),Un=rr(),Qn=w.__private__.decodeColorString=function(_){var $=_.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length!==5||$[4]!=="k"&&$[4]!=="K"||($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var de=parseFloat($[0]);$=[de,de,de,"r"]}for(var xe="#",Re=0;Re<3;Re++)xe+=("0"+Math.floor(255*parseFloat($[Re])).toString(16)).slice(-2);return xe},Vr=w.__private__.encodeColorString=function(_){var $;typeof _=="string"&&(_={ch1:_});var de=_.ch1,xe=_.ch2,Re=_.ch3,Qe=_.ch4,st=_.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof de=="string"&&de.charAt(0)!=="#"){var Et=new PA(de);if(Et.ok)de=Et.toHex();else if(!/^\d*\.?\d*$/.test(de))throw new Error('Invalid color "'+de+'" passed to jsPDF.encodeColorString.')}if(typeof de=="string"&&/^#[0-9A-Fa-f]{3}$/.test(de)&&(de="#"+de[1]+de[1]+de[2]+de[2]+de[3]+de[3]),typeof de=="string"&&/^#[0-9A-Fa-f]{6}$/.test(de)){var jt=parseInt(de.substr(1),16);de=jt>>16&255,xe=jt>>8&255,Re=255&jt}if(xe===void 0||Qe===void 0&&de===xe&&xe===Re)$=typeof de=="string"?de+" "+st[0]:_.precision===2?j(de/255)+" "+st[0]:F(de/255)+" "+st[0];else if(Qe===void 0||nr(Qe)==="object"){if(Qe&&!isNaN(Qe.a)&&Qe.a===0)return["1.","1.","1.",st[1]].join(" ");$=typeof de=="string"?[de,xe,Re,st[1]].join(" "):_.precision===2?[j(de/255),j(xe/255),j(Re/255),st[1]].join(" "):[F(de/255),F(xe/255),F(Re/255),st[1]].join(" ")}else $=typeof de=="string"?[de,xe,Re,Qe,st[2]].join(" "):_.precision===2?[j(de),j(xe),j(Re),j(Qe),st[2]].join(" "):[F(de),F(xe),F(Re),F(Qe),st[2]].join(" ");return $},Oi=w.__private__.getFilters=function(){return u},fs=w.__private__.putStream=function(_){var $=(_=_||{}).data||"",de=_.filters||Oi(),xe=_.alreadyAppliedFilters||[],Re=_.addLength1||!1,Qe=$.length,st=_.objectId,Et=function(T){return T};if(m!==null&&st===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Et=hr.encryptor(st,0));var jt={};de===!0&&(de=["FlateEncode"]);var Ht=_.additionalKeyValues||[],Ut=(jt=Mt.API.processDataByFilters!==void 0?Mt.API.processDataByFilters($,de):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(xe)?xe.join(" "):xe.toString());if(jt.data.length!==0&&(Ht.push({key:"Length",value:jt.data.length}),Re===!0&&Ht.push({key:"Length1",value:Qe})),Ut.length!=0)if(Ut.split("/").length-1==1)Ht.push({key:"Filter",value:Ut});else{Ht.push({key:"Filter",value:"["+Ut+"]"});for(var gn=0;gn<Ht.length;gn+=1)if(Ht[gn].key==="DecodeParms"){for(var ir=[],Kn=0;Kn<jt.reverseChain.split("/").length-1;Kn+=1)ir.push("null");ir.push(Ht[gn].value),Ht[gn].value="["+ir.join(" ")+"]"}}z("<<");for(var y=0;y<Ht.length;y++)z("/"+Ht[y].key+" "+Ht[y].value);z(">>"),jt.data.length!==0&&(z("stream"),z(Et(jt.data)),z("endstream"))},Ia=w.__private__.putPage=function(_){var $=_.number,de=_.data,xe=_.objId,Re=_.contentsObjId;Br(xe,!0),z("<</Type /Page"),z("/Parent "+_.rootDictionaryObjId+" 0 R"),z("/Resources "+_.resourceDictionaryObjId+" 0 R"),z("/MediaBox ["+parseFloat(I(_.mediaBox.bottomLeftX))+" "+parseFloat(I(_.mediaBox.bottomLeftY))+" "+I(_.mediaBox.topRightX)+" "+I(_.mediaBox.topRightY)+"]"),_.cropBox!==null&&z("/CropBox ["+I(_.cropBox.bottomLeftX)+" "+I(_.cropBox.bottomLeftY)+" "+I(_.cropBox.topRightX)+" "+I(_.cropBox.topRightY)+"]"),_.bleedBox!==null&&z("/BleedBox ["+I(_.bleedBox.bottomLeftX)+" "+I(_.bleedBox.bottomLeftY)+" "+I(_.bleedBox.topRightX)+" "+I(_.bleedBox.topRightY)+"]"),_.trimBox!==null&&z("/TrimBox ["+I(_.trimBox.bottomLeftX)+" "+I(_.trimBox.bottomLeftY)+" "+I(_.trimBox.topRightX)+" "+I(_.trimBox.topRightY)+"]"),_.artBox!==null&&z("/ArtBox ["+I(_.artBox.bottomLeftX)+" "+I(_.artBox.bottomLeftY)+" "+I(_.artBox.topRightX)+" "+I(_.artBox.topRightY)+"]"),typeof _.userUnit=="number"&&_.userUnit!==1&&z("/UserUnit "+_.userUnit),cn.publish("putPage",{objId:xe,pageContext:Lt[$],pageNumber:$,page:de}),z("/Contents "+Re+" 0 R"),z(">>"),z("endobj");var Qe=de.join(`
`);return V===G&&(Qe+=`
Q`),Br(Re,!0),fs({data:Qe,filters:Oi(),objectId:Re}),z("endobj"),xe},js=w.__private__.putPages=function(){var _,$,de=[];for(_=1;_<=Dt;_++)Lt[_].objId=rr(),Lt[_].contentsObjId=rr();for(_=1;_<=Dt;_++)de.push(Ia({number:_,data:ae[_],objId:Lt[_].objId,contentsObjId:Lt[_].contentsObjId,mediaBox:Lt[_].mediaBox,cropBox:Lt[_].cropBox,bleedBox:Lt[_].bleedBox,trimBox:Lt[_].trimBox,artBox:Lt[_].artBox,userUnit:Lt[_].userUnit,rootDictionaryObjId:di,resourceDictionaryObjId:Un}));Br(di,!0),z("<</Type /Pages");var xe="/Kids [";for($=0;$<Dt;$++)xe+=de[$]+" 0 R ";z(xe+"]"),z("/Count "+Dt),z(">>"),z("endobj"),cn.publish("postPutPages")},Fi=function(_){cn.publish("putFont",{font:_,out:z,newObject:Yn,putStream:fs}),_.isAlreadyPutted!==!0&&(_.objectNumber=Yn(),z("<<"),z("/Type /Font"),z("/BaseFont /"+Gd(_.postScriptName)),z("/Subtype /Type1"),typeof _.encoding=="string"&&z("/Encoding /"+_.encoding),z("/FirstChar 32"),z("/LastChar 255"),z(">>"),z("endobj"))},ma=function(_){_.objectNumber=Yn();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[I(_.x),I(_.y),I(_.x+_.width),I(_.y+_.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+_.matrix.toString()+"]"});var de=_.pages[1].join(`
`);fs({data:de,additionalKeyValues:$,objectId:_.objectNumber}),z("endobj")},Qi=function(_,$){$||($=21);var de=Yn(),xe=(function(st,Et){var jt,Ht=[],Ut=1/(Et-1);for(jt=0;jt<1;jt+=Ut)Ht.push(jt);if(Ht.push(1),st[0].offset!=0){var gn={offset:0,color:st[0].color};st.unshift(gn)}if(st[st.length-1].offset!=1){var ir={offset:1,color:st[st.length-1].color};st.push(ir)}for(var Kn="",y=0,T=0;T<Ht.length;T++){for(jt=Ht[T];jt>st[y+1].offset;)y++;var B=st[y].offset,ie=(jt-B)/(st[y+1].offset-B),Pe=st[y].color,He=st[y+1].color;Kn+=fe(Math.round((1-ie)*Pe[0]+ie*He[0]).toString(16))+fe(Math.round((1-ie)*Pe[1]+ie*He[1]).toString(16))+fe(Math.round((1-ie)*Pe[2]+ie*He[2]).toString(16))}return Kn.trim()})(_.colors,$),Re=[];Re.push({key:"FunctionType",value:"0"}),Re.push({key:"Domain",value:"[0.0 1.0]"}),Re.push({key:"Size",value:"["+$+"]"}),Re.push({key:"BitsPerSample",value:"8"}),Re.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),fs({data:xe,additionalKeyValues:Re,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:de}),z("endobj"),_.objectNumber=Yn(),z("<< /ShadingType "+_.type),z("/ColorSpace /DeviceRGB");var Qe="/Coords ["+I(parseFloat(_.coords[0]))+" "+I(parseFloat(_.coords[1]))+" ";_.type===2?Qe+=I(parseFloat(_.coords[2]))+" "+I(parseFloat(_.coords[3])):Qe+=I(parseFloat(_.coords[2]))+" "+I(parseFloat(_.coords[3]))+" "+I(parseFloat(_.coords[4]))+" "+I(parseFloat(_.coords[5])),z(Qe+="]"),_.matrix&&z("/Matrix ["+_.matrix.toString()+"]"),z("/Function "+de+" 0 R"),z("/Extend [true true]"),z(">>"),z("endobj")},Si=function(_,$){var de=rr(),xe=Yn();$.push({resourcesOid:de,objectOid:xe}),_.objectNumber=xe;var Re=[];Re.push({key:"Type",value:"/Pattern"}),Re.push({key:"PatternType",value:"1"}),Re.push({key:"PaintType",value:"1"}),Re.push({key:"TilingType",value:"1"}),Re.push({key:"BBox",value:"["+_.boundingBox.map(I).join(" ")+"]"}),Re.push({key:"XStep",value:I(_.xStep)}),Re.push({key:"YStep",value:I(_.yStep)}),Re.push({key:"Resources",value:de+" 0 R"}),_.matrix&&Re.push({key:"Matrix",value:"["+_.matrix.toString()+"]"}),fs({data:_.stream,additionalKeyValues:Re,objectId:_.objectNumber}),z("endobj")},Ji=function(_){for(var $ in _.objectNumber=Yn(),z("<<"),_)switch($){case"opacity":z("/ca "+j(_[$]));break;case"stroke-opacity":z("/CA "+j(_[$]))}z(">>"),z("endobj")},ps=function(_){Br(_.resourcesOid,!0),z("<<"),z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var $ in z("/Font <<"),bt)bt.hasOwnProperty($)&&(x===!1||x===!0&&E.hasOwnProperty($))&&z("/"+$+" "+bt[$].objectNumber+" 0 R");z(">>")})(),(function(){if(Object.keys(Tt).length>0){for(var $ in z("/Shading <<"),Tt)Tt.hasOwnProperty($)&&Tt[$]instanceof ku&&Tt[$].objectNumber>=0&&z("/"+$+" "+Tt[$].objectNumber+" 0 R");cn.publish("putShadingPatternDict"),z(">>")}})(),(function($){if(Object.keys(Tt).length>0){for(var de in z("/Pattern <<"),Tt)Tt.hasOwnProperty(de)&&Tt[de]instanceof w.TilingPattern&&Tt[de].objectNumber>=0&&Tt[de].objectNumber<$&&z("/"+de+" "+Tt[de].objectNumber+" 0 R");cn.publish("putTilingPatternDict"),z(">>")}})(_.objectOid),(function(){if(Object.keys(Bt).length>0){var $;for($ in z("/ExtGState <<"),Bt)Bt.hasOwnProperty($)&&Bt[$].objectNumber>=0&&z("/"+$+" "+Bt[$].objectNumber+" 0 R");cn.publish("putGStateDict"),z(">>")}})(),(function(){for(var $ in z("/XObject <<"),ui)ui.hasOwnProperty($)&&ui[$].objectNumber>=0&&z("/"+$+" "+ui[$].objectNumber+" 0 R");cn.publish("putXobjectDict"),z(">>")})(),z(">>"),z("endobj")},yr=function(_){wt[_.fontName]=wt[_.fontName]||{},wt[_.fontName][_.fontStyle]=_.id},Ro=function(_,$,de,xe,Re){var Qe={id:"F"+(Object.keys(bt).length+1).toString(10),postScriptName:_,fontName:$,fontStyle:de,encoding:xe,isStandardFont:Re||!1,metadata:{}};return cn.publish("addFont",{font:Qe,instance:this}),bt[Qe.id]=Qe,yr(Qe),Qe.id},Ui=w.__private__.pdfEscape=w.pdfEscape=function(_,$){return(function(de,xe){var Re,Qe,st,Et,jt,Ht,Ut,gn,ir;if(st=(xe=xe||{}).sourceEncoding||"Unicode",jt=xe.outputEncoding,(xe.autoencode||jt)&&bt[We].metadata&&bt[We].metadata[st]&&bt[We].metadata[st].encoding&&(Et=bt[We].metadata[st].encoding,!jt&&bt[We].encoding&&(jt=bt[We].encoding),!jt&&Et.codePages&&(jt=Et.codePages[0]),typeof jt=="string"&&(jt=Et[jt]),jt)){for(Ut=!1,Ht=[],Re=0,Qe=de.length;Re<Qe;Re++)(gn=jt[de.charCodeAt(Re)])?Ht.push(String.fromCharCode(gn)):Ht.push(de[Re]),Ht[Re].charCodeAt(0)>>8&&(Ut=!0);de=Ht.join("")}for(Re=de.length;Ut===void 0&&Re!==0;)de.charCodeAt(Re-1)>>8&&(Ut=!0),Re--;if(!Ut)return de;for(Ht=xe.noBOM?[]:[254,255],Re=0,Qe=de.length;Re<Qe;Re++){if((ir=(gn=de.charCodeAt(Re))>>8)>>8)throw new Error("Character at position "+Re+" of string '"+de+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(ir),Ht.push(gn-(ir<<8))}return String.fromCharCode.apply(void 0,Ht)})(_,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ms=w.__private__.beginPage=function(_){ae[++Dt]=[],Lt[Dt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_[0]),topRightY:Number(_[1])}},Io(Dt),pe(ae[Y])},Rs=function(_,$){var de,xe,Re;switch(t=$||t,typeof _=="string"&&(de=k(_.toLowerCase()),Array.isArray(de)&&(xe=de[0],Re=de[1])),Array.isArray(_)&&(xe=_[0]*pt,Re=_[1]*pt),isNaN(xe)&&(xe=s[0],Re=s[1]),(xe>14400||Re>14400)&&(gr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),xe=Math.min(14400,xe),Re=Math.min(14400,Re)),s=[xe,Re],t.substr(0,1)){case"l":Re>xe&&(s=[Re,xe]);break;case"p":xe>Re&&(s=[Re,xe])}ms(s),Vt(Vi),z(es),ns!==0&&z(ns+" J"),kr!==0&&z(kr+" j"),cn.publish("addPage",{pageNumber:Dt})},to=function(_){_>0&&_<=Dt&&(ae.splice(_,1),Lt.splice(_,1),Dt--,Y>Dt&&(Y=Dt),this.setPage(Y))},Io=function(_){_>0&&_<=Dt&&(Y=_)},Do=w.__private__.getNumberOfPages=w.getNumberOfPages=function(){return ae.length-1},ml=function(_,$,de){var xe,Re=void 0;return de=de||{},_=_!==void 0?_:bt[We].fontName,$=$!==void 0?$:bt[We].fontStyle,xe=_.toLowerCase(),wt[xe]!==void 0&&wt[xe][$]!==void 0?Re=wt[xe][$]:wt[_]!==void 0&&wt[_][$]!==void 0?Re=wt[_][$]:de.disableWarning===!1&&gr.warn("Unable to look up font label for font '"+_+"', '"+$+"'. Refer to getFontList() for available fonts."),Re||de.noFallback||(Re=wt.times[$])==null&&(Re=wt.times.normal),Re},Zi=w.__private__.putInfo=function(){var _=Yn(),$=function(xe){return xe};for(var de in m!==null&&($=hr.encryptor(_,0)),z("<<"),z("/Producer ("+Ui($("jsPDF "+Mt.version))+")"),De)De.hasOwnProperty(de)&&De[de]&&z("/"+de.substr(0,1).toUpperCase()+de.substr(1)+" ("+Ui($(De[de]))+")");z("/CreationDate ("+Ui($(Se))+")"),z(">>"),z("endobj")},hi=w.__private__.putCatalog=function(_){var $=(_=_||{}).rootDictionaryObjId||di;switch(Yn(),z("<<"),z("/Type /Catalog"),z("/Pages "+$+" 0 R"),Ze||(Ze="fullwidth"),Ze){case"fullwidth":z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":z("/OpenAction [3 0 R /Fit]");break;case"original":z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var de=""+Ze;de.substr(de.length-1)==="%"&&(Ze=parseInt(Ze)/100),typeof Ze=="number"&&z("/OpenAction [3 0 R /XYZ null null "+j(Ze)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":z("/PageLayout /OneColumn");break;case"single":z("/PageLayout /SinglePage");break;case"two":case"twoleft":z("/PageLayout /TwoColumnLeft");break;case"tworight":z("/PageLayout /TwoColumnRight")}vt&&z("/PageMode /"+vt),cn.publish("putCatalog"),z(">>"),z("endobj")},Nr=w.__private__.putTrailer=function(){z("trailer"),z("<<"),z("/Size "+(me+1)),z("/Root "+me+" 0 R"),z("/Info "+(me-1)+" 0 R"),m!==null&&z("/Encrypt "+hr.oid+" 0 R"),z("/ID [ <"+le+"> <"+le+"> ]"),z(">>")},pn=w.__private__.putHeader=function(){z("%PDF-"+A),z("%")},ga=w.__private__.putXRef=function(){var _="0000000000";z("xref"),z("0 "+(me+1)),z("0000000000 65535 f ");for(var $=1;$<=me;$++)typeof _e[$]=="function"?z((_+_e[$]()).slice(-10)+" 00000 n "):_e[$]!==void 0?z((_+_e[$]).slice(-10)+" 00000 n "):z("0000000000 00000 n ")},gs=w.__private__.buildDocument=function(){var _;me=0,Le=0,Me=[],_e=[],Z=[],di=rr(),Un=rr(),pe(Me),cn.publish("buildDocument"),pn(),js(),(function(){cn.publish("putAdditionalObjects");for(var de=0;de<Z.length;de++){var xe=Z[de];Br(xe.objId,!0),z(xe.content),z("endobj")}cn.publish("postPutAdditionalObjects")})(),_=[],(function(){for(var de in bt)bt.hasOwnProperty(de)&&(x===!1||x===!0&&E.hasOwnProperty(de))&&Fi(bt[de])})(),(function(){var de;for(de in Bt)Bt.hasOwnProperty(de)&&Ji(Bt[de])})(),(function(){for(var de in ui)ui.hasOwnProperty(de)&&ma(ui[de])})(),(function(de){var xe;for(xe in Tt)Tt.hasOwnProperty(xe)&&(Tt[xe]instanceof ku?Qi(Tt[xe]):Tt[xe]instanceof $d&&Si(Tt[xe],de))})(_),cn.publish("putResources"),_.forEach(ps),ps({resourcesOid:Un,objectOid:Number.MAX_SAFE_INTEGER}),cn.publish("postPutResources"),m!==null&&(hr.oid=Yn(),z("<<"),z("/Filter /Standard"),z("/V "+hr.v),z("/R "+hr.r),z("/U <"+hr.toHexString(hr.U)+">"),z("/O <"+hr.toHexString(hr.O)+">"),z("/P "+hr.P),z(">>"),z("endobj")),Zi(),hi();var $=Le;return ga(),Nr(),z("startxref"),z(""+$),z("%%EOF"),pe(ae[Y]),Me.join(`
`)},Sn=w.__private__.getBlob=function(_){return new Blob([Be(_)],{type:"application/pdf"})},Da=w.output=w.__private__.output=(Mi=function(_,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",_){case void 0:return gs();case"save":w.save($.filename);break;case"arraybuffer":return Be(gs());case"blob":return Sn(gs());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(Sn(gs()))||void 0;gr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var de="",xe=gs();try{de=hS(xe)}catch{de=hS(unescape(encodeURIComponent(xe)))}return"data:application/pdf;filename="+$.filename+";base64,"+de;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Re="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(Re=$.pdfObjectUrl,Qe="");var st='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Re+'"'+Qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Et=en.open();return Et!==null&&Et.document.write(st),Et}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',Ht=en.open();if(Ht!==null){Ht.document.write(jt);var Ut=this;Ht.document.documentElement.querySelector("#pdfViewer").onload=function(){Ht.document.title=$.filename,Ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ut.output("bloburl"))}}return Ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var gn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',ir=en.open();if(ir!==null&&(ir.document.write(gn),ir.document.title=$.filename),ir||typeof safari>"u")return ir;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",$);default:return null}},Mi.foo=function(){try{return Mi.apply(this,arguments)}catch(de){var _=de.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var $="Error in function "+_.split(`
`)[0].split("<")[0]+": "+de.message;if(!en.console)throw new Error($);en.console.error($,de),en.alert&&alert($)}},Mi.foo.bar=Mi,Mi.foo),Dr=function(_){return Array.isArray(wi)===!0&&wi.indexOf(_)>-1};switch(r){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=Dr("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);pt=r}var hr=null;Q(),ye();var Ar=w.__private__.getPageInfo=w.getPageInfo=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Lt[_].objId,pageNumber:_,pageContext:Lt[_]}},no=w.__private__.getPageInfoByObjId=function(_){if(isNaN(_)||_%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in Lt)if(Lt[$].objId===_)break;return Ar($)},lc=w.__private__.getCurrentPageInfo=w.getCurrentPageInfo=function(){return{objId:Lt[Y].objId,pageNumber:Y,pageContext:Lt[Y]}};w.addPage=function(){return Rs.apply(this,arguments),this},w.setPage=function(){return Io.apply(this,arguments),pe.call(this,ae[Y]),this},w.insertPage=function(_){return this.addPage(),this.movePage(Y,_),this},w.movePage=function(_,$){var de,xe;if(_>$){de=ae[_],xe=Lt[_];for(var Re=_;Re>$;Re--)ae[Re]=ae[Re-1],Lt[Re]=Lt[Re-1];ae[$]=de,Lt[$]=xe,this.setPage($)}else if(_<$){de=ae[_],xe=Lt[_];for(var Qe=_;Qe<$;Qe++)ae[Qe]=ae[Qe+1],Lt[Qe]=Lt[Qe+1];ae[$]=de,Lt[$]=xe,this.setPage($)}return this},w.deletePage=function(){return to.apply(this,arguments),this},w.__private__.text=w.text=function(_,$,de,xe,Re){var Qe,st,Et,jt,Ht,Ut,gn,ir,Kn,y=(xe=xe||{}).scope||this;if(typeof _=="number"&&typeof $=="number"&&(typeof de=="string"||Array.isArray(de))){var T=de;de=$,$=_,_=T}if(arguments[3]instanceof Ft==0?(Et=arguments[4],jt=arguments[5],nr(gn=arguments[3])==="object"&&gn!==null||(typeof Et=="string"&&(jt=Et,Et=null),typeof gn=="string"&&(jt=gn,gn=null),typeof gn=="number"&&(Et=gn,gn=null),xe={flags:gn,angle:Et,align:jt})):(R("The transform parameter of text() with a Matrix value"),Kn=Re),isNaN($)||isNaN(de)||_==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_.length===0)return y;var B,ie="",Pe=typeof xe.lineHeightFactor=="number"?xe.lineHeightFactor:ba,He=y.internal.scaleFactor;function ht(Mn){return Mn=Mn.split("	").join(Array(xe.TabLen||9).join(" ")),Ui(Mn,gn)}function Jt(Mn){for(var Rn,ar=Mn.concat(),Pr=[],Ha=ar.length;Ha--;)typeof(Rn=ar.shift())=="string"?Pr.push(Rn):Array.isArray(Mn)&&(Rn.length===1||Rn[1]===void 0&&Rn[2]===void 0)?Pr.push(Rn[0]):Pr.push([Rn[0],Rn[1],Rn[2]]);return Pr}function sr(Mn,Rn){var ar;if(typeof Mn=="string")ar=Rn(Mn)[0];else if(Array.isArray(Mn)){for(var Pr,Ha,_a=Mn.concat(),_l=[],gu=_a.length;gu--;)typeof(Pr=_a.shift())=="string"?_l.push(Rn(Pr)[0]):Array.isArray(Pr)&&typeof Pr[0]=="string"&&(Ha=Rn(Pr[0],Pr[1],Pr[2]),_l.push([Ha[0],Ha[1],Ha[2]]));ar=_l}return ar}var hn=!1,Vn=!0;if(typeof _=="string")hn=!0;else if(Array.isArray(_)){var pi=_.concat();st=[];for(var Ei,Jn=pi.length;Jn--;)(typeof(Ei=pi.shift())!="string"||Array.isArray(Ei)&&typeof Ei[0]!="string")&&(Vn=!1);hn=Vn}if(hn===!1)throw new Error('Type of text must be string or Array. "'+_+'" is not recognized.');typeof _=="string"&&(_=_.match(/[\r?\n]/)?_.split(/\r\n|\r|\n/g):[_]);var Ni=Ce/y.internal.scaleFactor,Ls=Ni*(Pe-1);switch(xe.baseline){case"bottom":de-=Ls;break;case"top":de+=Ni-Ls;break;case"hanging":de+=Ni-2*Ls;break;case"middle":de+=Ni/2-Ls}if((Ut=xe.maxWidth||0)>0&&(typeof _=="string"?_=y.splitTextToSize(_,Ut):Object.prototype.toString.call(_)==="[object Array]"&&(_=_.reduce(function(Mn,Rn){return Mn.concat(y.splitTextToSize(Rn,Ut))},[]))),Qe={text:_,x:$,y:de,options:xe,mutex:{pdfEscape:Ui,activeFontKey:We,fonts:bt,activeFontSize:Ce}},cn.publish("preProcessText",Qe),_=Qe.text,Et=(xe=Qe.options).angle,Kn instanceof Ft==0&&Et&&typeof Et=="number"){Et*=Math.PI/180,xe.rotationDirection===0&&(Et=-Et),V===G&&(Et=-Et);var Oa=Math.cos(Et),Fa=Math.sin(Et);Kn=new Ft(Oa,Fa,-Fa,Oa,0,0)}else Et&&Et instanceof Ft&&(Kn=Et);V!==G||Kn||(Kn=Xi),(Ht=xe.charSpace||ts)!==void 0&&(ie+=I(M(Ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ir=xe.horizontalScale)!==void 0&&(ie+=I(100*ir)+` Tz
`),xe.lang;var is=-1,oo=xe.renderingMode!==void 0?xe.renderingMode:xe.stroke,cc=y.internal.getCurrentPageInfo().pageContext;switch(oo){case 0:case!1:case"fill":is=0;break;case 1:case!0:case"stroke":is=1;break;case 2:case"fillThenStroke":is=2;break;case 3:case"invisible":is=3;break;case 4:case"fillAndAddForClipping":is=4;break;case 5:case"strokeAndAddPathForClipping":is=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":is=6;break;case 7:case"addToPathForClipping":is=7}var pu=cc.usedRenderingMode!==void 0?cc.usedRenderingMode:-1;is!==-1?ie+=is+` Tr
`:pu!==-1&&(ie+=`0 Tr
`),is!==-1&&(cc.usedRenderingMode=is),jt=xe.align||"left";var Ps,xa=Ce*Pe,lo=y.internal.pageSize.getWidth(),mu=bt[We];Ht=xe.charSpace||ts,Ut=xe.maxWidth||0,gn=Object.assign({autoencode:!0,noBOM:!0},xe.flags);var Sa=[],Fo=function(Mn){return y.getStringUnitWidth(Mn,{font:mu,charSpace:Ht,fontSize:Ce,doKerning:!1})*Ce/He};if(Object.prototype.toString.call(_)==="[object Array]"){var vs;st=Jt(_),jt!=="left"&&(Ps=st.map(Fo));var ss,Ua=0;if(jt==="right"){$-=Ps[0],_=[],Jn=st.length;for(var Ba=0;Ba<Jn;Ba++)Ba===0?(ss=ti($),vs=zr(de)):(ss=M(Ua-Ps[Ba]),vs=-xa),_.push([st[Ba],ss,vs]),Ua=Ps[Ba]}else if(jt==="center"){$-=Ps[0]/2,_=[],Jn=st.length;for(var co=0;co<Jn;co++)co===0?(ss=ti($),vs=zr(de)):(ss=M((Ua-Ps[co])/2),vs=-xa),_.push([st[co],ss,vs]),Ua=Ps[co]}else if(jt==="left"){_=[],Jn=st.length;for(var uc=0;uc<Jn;uc++)_.push(st[uc])}else if(jt==="justify"&&mu.encoding==="Identity-H"){_=[],Jn=st.length,Ut=Ut!==0?Ut:lo;for(var dc=0,Lr=0;Lr<Jn;Lr++)if(vs=Lr===0?zr(de):-xa,ss=Lr===0?ti($):dc,Lr<Jn-1){var nd=M((Ut-Ps[Lr])/(st[Lr].split(" ").length-1)),Va=st[Lr].split(" ");_.push([Va[0]+" ",ss,vs]),dc=0;for(var za=1;za<Va.length;za++){var Ai=(Fo(Va[za-1]+" "+Va[za])-Fo(Va[za]))*He+nd;za==Va.length-1?_.push([Va[za],Ai,0]):_.push([Va[za]+" ",Ai,0]),dc-=Ai}}else _.push([st[Lr],ss,vs]);_.push(["",dc,0])}else{if(jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_=[],Jn=st.length,Ut=Ut!==0?Ut:lo,Lr=0;Lr<Jn;Lr++){vs=Lr===0?zr(de):-xa,ss=Lr===0?ti($):0;var uo=st[Lr].split(" ").length-1,hc=uo>0?(Ut-Ps[Lr])/uo:0;Lr<Jn-1?Sa.push(I(M(hc))):Sa.push(0),_.push([st[Lr],ss,vs])}}}(typeof xe.R2L=="boolean"?xe.R2L:xt)===!0&&(_=sr(_,function(Mn,Rn,ar){return[Mn.split("").reverse().join(""),Rn,ar]})),Qe={text:_,x:$,y:de,options:xe,mutex:{pdfEscape:Ui,activeFontKey:We,fonts:bt,activeFontSize:Ce}},cn.publish("postProcessText",Qe),_=Qe.text,B=Qe.mutex.isHex||!1;var fc=bt[We].encoding;fc!=="WinAnsiEncoding"&&fc!=="StandardEncoding"||(_=sr(_,function(Mn,Rn,ar){return[ht(Mn),Rn,ar]})),st=Jt(_),_=[];for(var ho,fo,qa,Sl=Array.isArray(st[0])?1:0,Ms="",po=function(Mn,Rn,ar){var Pr="";return ar instanceof Ft?(ar=typeof xe.angle=="number"?pa(ar,new Ft(1,0,0,1,Mn,Rn)):pa(new Ft(1,0,0,1,Mn,Rn),ar),V===G&&(ar=pa(new Ft(1,0,0,-1,0,0),ar)),Pr=ar.join(" ")+` Tm
`):Pr=I(Mn)+" "+I(Rn)+` Td
`,Pr},zi=0;zi<st.length;zi++){switch(Ms="",Sl){case 1:qa=(B?"<":"(")+st[zi][0]+(B?">":")"),ho=parseFloat(st[zi][1]),fo=parseFloat(st[zi][2]);break;case 0:qa=(B?"<":"(")+st[zi]+(B?">":")"),ho=ti($),fo=zr(de)}Sa!==void 0&&Sa[zi]!==void 0&&(Ms=Sa[zi]+` Tw
`),zi===0?_.push(Ms+po(ho,fo,Kn)+qa):Sl===0?_.push(Ms+qa):Sl===1&&_.push(Ms+po(ho,fo,Kn)+qa)}_=Sl===0?_.join(` Tj
T* `):_.join(` Tj
`),_+=` Tj
`;var Ys=`BT
/`;return Ys+=We+" "+Ce+` Tf
`,Ys+=I(Ce*Pe)+` TL
`,Ys+=Ds+`
`,Ys+=ie,Ys+=_,z(Ys+="ET"),E[We]=!0,y};var gl=w.__private__.clip=w.clip=function(_){return z(_==="evenodd"?"W*":"W"),this};w.clipEvenOdd=function(){return gl("evenodd")},w.__private__.discardPath=w.discardPath=function(){return z("n"),this};var _i=w.__private__.isValidStyle=function(_){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_)!==-1&&($=!0),$};w.__private__.setDefaultPathOperation=w.setDefaultPathOperation=function(_){return _i(_)&&(p=_),this};var yl=w.__private__.getStyle=w.getStyle=function(_){var $=p;switch(_){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=_}return $},ya=w.close=function(){return z("h"),this};w.stroke=function(){return z("S"),this},w.fill=function(_){return ei("f",_),this},w.fillEvenOdd=function(_){return ei("f*",_),this},w.fillStroke=function(_){return ei("B",_),this},w.fillStrokeEvenOdd=function(_){return ei("B*",_),this};var ei=function(_,$){nr($)==="object"?bl($,_):z(_)},ka=function(_){_===null||V===G&&_===void 0||(_=yl(_),z(_))};function vl(_,$,de,xe,Re){var Qe=new $d($||this.boundingBox,de||this.xStep,xe||this.yStep,this.gState,Re||this.matrix);Qe.stream=this.stream;var st=_+"$$"+this.cloneIndex+++"$$";return Pi(st,Qe),Qe}var bl=function(_,$){var de=dn[_.key],xe=Tt[de];if(xe instanceof ku)z("q"),z(ko($)),xe.gState&&w.setGState(xe.gState),z(_.matrix.toString()+" cm"),z("/"+de+" sh"),z("Q");else if(xe instanceof $d){var Re=new Ft(1,0,0,-1,0,ks());_.matrix&&(Re=Re.multiply(_.matrix||Xi),de=vl.call(xe,_.key,_.boundingBox,_.xStep,_.yStep,Re).id),z("q"),z("/Pattern cs"),z("/"+de+" scn"),xe.gState&&w.setGState(xe.gState),z($),z("Q")}},ko=function(_){switch(_){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Lo=w.moveTo=function(_,$){return z(I(M(_))+" "+I(ne($))+" m"),this},va=w.lineTo=function(_,$){return z(I(M(_))+" "+I(ne($))+" l"),this},Bi=w.curveTo=function(_,$,de,xe,Re,Qe){return z([I(M(_)),I(ne($)),I(M(de)),I(ne(xe)),I(M(Re)),I(ne(Qe)),"c"].join(" ")),this};w.__private__.line=w.line=function(_,$,de,xe,Re){if(isNaN(_)||isNaN($)||isNaN(de)||isNaN(xe)||!_i(Re))throw new Error("Invalid arguments passed to jsPDF.line");return V===H?this.lines([[de-_,xe-$]],_,$,[1,1],Re||"S"):this.lines([[de-_,xe-$]],_,$,[1,1]).stroke()},w.__private__.lines=w.lines=function(_,$,de,xe,Re,Qe){var st,Et,jt,Ht,Ut,gn,ir,Kn,y,T,B,ie;if(typeof _=="number"&&(ie=de,de=$,$=_,_=ie),xe=xe||[1,1],Qe=Qe||!1,isNaN($)||isNaN(de)||!Array.isArray(_)||!Array.isArray(xe)||!_i(Re)||typeof Qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lo($,de),st=xe[0],Et=xe[1],Ht=_.length,T=$,B=de,jt=0;jt<Ht;jt++)(Ut=_[jt]).length===2?(T=Ut[0]*st+T,B=Ut[1]*Et+B,va(T,B)):(gn=Ut[0]*st+T,ir=Ut[1]*Et+B,Kn=Ut[2]*st+T,y=Ut[3]*Et+B,T=Ut[4]*st+T,B=Ut[5]*Et+B,Bi(gn,ir,Kn,y,T,B));return Qe&&ya(),ka(Re),this},w.path=function(_){for(var $=0;$<_.length;$++){var de=_[$],xe=de.c;switch(de.op){case"m":Lo(xe[0],xe[1]);break;case"l":va(xe[0],xe[1]);break;case"c":Bi.apply(this,xe);break;case"h":ya()}}return this},w.__private__.rect=w.rect=function(_,$,de,xe,Re){if(isNaN(_)||isNaN($)||isNaN(de)||isNaN(xe)||!_i(Re))throw new Error("Invalid arguments passed to jsPDF.rect");return V===H&&(xe=-xe),z([I(M(_)),I(ne($)),I(M(de)),I(M(xe)),"re"].join(" ")),ka(Re),this},w.__private__.triangle=w.triangle=function(_,$,de,xe,Re,Qe,st){if(isNaN(_)||isNaN($)||isNaN(de)||isNaN(xe)||isNaN(Re)||isNaN(Qe)||!_i(st))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[de-_,xe-$],[Re-de,Qe-xe],[_-Re,$-Qe]],_,$,[1,1],st,!0),this},w.__private__.roundedRect=w.roundedRect=function(_,$,de,xe,Re,Qe,st){if(isNaN(_)||isNaN($)||isNaN(de)||isNaN(xe)||isNaN(Re)||isNaN(Qe)||!_i(st))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Et=4/3*(Math.SQRT2-1);return Re=Math.min(Re,.5*de),Qe=Math.min(Qe,.5*xe),this.lines([[de-2*Re,0],[Re*Et,0,Re,Qe-Qe*Et,Re,Qe],[0,xe-2*Qe],[0,Qe*Et,-Re*Et,Qe,-Re,Qe],[2*Re-de,0],[-Re*Et,0,-Re,-Qe*Et,-Re,-Qe],[0,2*Qe-xe],[0,-Qe*Et,Re*Et,-Qe,Re,-Qe]],_+Re,$,[1,1],st,!0),this},w.__private__.ellipse=w.ellipse=function(_,$,de,xe,Re){if(isNaN(_)||isNaN($)||isNaN(de)||isNaN(xe)||!_i(Re))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Qe=4/3*(Math.SQRT2-1)*de,st=4/3*(Math.SQRT2-1)*xe;return Lo(_+de,$),Bi(_+de,$-st,_+Qe,$-xe,_,$-xe),Bi(_-Qe,$-xe,_-de,$-st,_-de,$),Bi(_-de,$+st,_-Qe,$+xe,_,$+xe),Bi(_+Qe,$+xe,_+de,$+st,_+de,$),ka(Re),this},w.__private__.circle=w.circle=function(_,$,de,xe){if(isNaN(_)||isNaN($)||isNaN(de)||!_i(xe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_,$,de,de,xe)},w.setFont=function(_,$,de){return de&&($=U($,de)),We=ml(_,$,{disableWarning:!1}),this};var Is=w.__private__.getFont=w.getFont=function(){return bt[ml.apply(w,arguments)]};w.__private__.getFontList=w.getFontList=function(){var _,$,de={};for(_ in wt)if(wt.hasOwnProperty(_))for($ in de[_]=[],wt[_])wt[_].hasOwnProperty($)&&de[_].push($);return de},w.addFont=function(_,$,de,xe,Re){var Qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Qe.indexOf(arguments[3])!==-1?Re=arguments[3]:arguments[3]&&Qe.indexOf(arguments[3])==-1&&(de=U(de,xe)),Ro.call(this,_,$,de,Re=Re||"Identity-H")};var ba,Vi=n.lineWidth||.200025,La=w.__private__.getLineWidth=w.getLineWidth=function(){return Vi},Vt=w.__private__.setLineWidth=w.setLineWidth=function(_){return Vi=_,z(I(M(_))+" w"),this};w.__private__.setLineDash=Mt.API.setLineDash=Mt.API.setLineDashPattern=function(_,$){if(_=_||[],$=$||0,isNaN($)||!Array.isArray(_))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _=_.map(function(de){return I(M(de))}).join(" "),$=I(M($)),z("["+_+"] "+$+" d"),this};var ro=w.__private__.getLineHeight=w.getLineHeight=function(){return Ce*ba};w.__private__.getLineHeight=w.getLineHeight=function(){return Ce*ba};var Po=w.__private__.setLineHeightFactor=w.setLineHeightFactor=function(_){return typeof(_=_||1.15)=="number"&&(ba=_),this},Pa=w.__private__.getLineHeightFactor=w.getLineHeightFactor=function(){return ba};Po(n.lineHeight);var ti=w.__private__.getHorizontalCoordinate=function(_){return M(_)},zr=w.__private__.getVerticalCoordinate=function(_){return V===G?_:Lt[Y].mediaBox.topRightY-Lt[Y].mediaBox.bottomLeftY-M(_)},io=w.__private__.getHorizontalCoordinateString=w.getHorizontalCoordinateString=function(_){return I(ti(_))},Bn=w.__private__.getVerticalCoordinateString=w.getVerticalCoordinateString=function(_){return I(zr(_))},es=n.strokeColor||"0 G";w.__private__.getStrokeColor=w.getDrawColor=function(){return Qn(es)},w.__private__.setStrokeColor=w.setDrawColor=function(_,$,de,xe){return es=Vr({ch1:_,ch2:$,ch3:de,ch4:xe,pdfColorType:"draw",precision:2}),z(es),this};var so=n.fillColor||"0 g";w.__private__.getFillColor=w.getFillColor=function(){return Qn(so)},w.__private__.setFillColor=w.setFillColor=function(_,$,de,xe){return so=Vr({ch1:_,ch2:$,ch3:de,ch4:xe,pdfColorType:"fill",precision:2}),z(so),this};var Ds=n.textColor||"0 g",wl=w.__private__.getTextColor=w.getTextColor=function(){return Qn(Ds)};w.__private__.setTextColor=w.setTextColor=function(_,$,de,xe){return Ds=Vr({ch1:_,ch2:$,ch3:de,ch4:xe,pdfColorType:"text",precision:3}),this};var ts=n.charSpace,wa=w.__private__.getCharSpace=w.getCharSpace=function(){return parseFloat(ts||0)};w.__private__.setCharSpace=w.setCharSpace=function(_){if(isNaN(_))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ts=_,this};var ns=0;w.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},w.__private__.setLineCap=w.setLineCap=function(_){var $=w.CapJoinStyles[_];if($===void 0)throw new Error("Line cap style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ns=$,z($+" J"),this};var kr=0;w.__private__.setLineJoin=w.setLineJoin=function(_){var $=w.CapJoinStyles[_];if($===void 0)throw new Error("Line join style of '"+_+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return kr=$,z($+" j"),this},w.__private__.setLineMiterLimit=w.__private__.setMiterLimit=w.setLineMiterLimit=w.setMiterLimit=function(_){if(_=_||0,isNaN(_))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return z(I(M(_))+" M"),this},w.GState=tg,w.setGState=function(_){(_=typeof _=="string"?Bt[Ot[_]]:qs(null,_)).equals(jn)||(z("/"+_.id+" gs"),jn=_)};var qs=function(_,$){if(!_||!Ot[_]){var de=!1;for(var xe in Bt)if(Bt.hasOwnProperty(xe)&&Bt[xe].equals($)){de=!0;break}if(de)$=Bt[xe];else{var Re="GS"+(Object.keys(Bt).length+1).toString(10);Bt[Re]=$,$.id=Re}return _&&(Ot[_]=$.id),cn.publish("addGState",$),$}};w.addGState=function(_,$){return qs(_,$),this},w.saveGraphicsState=function(){return z("q"),qt.push({key:We,size:Ce,color:Ds}),this},w.restoreGraphicsState=function(){z("Q");var _=qt.pop();return We=_.key,Ce=_.size,Ds=_.color,jn=null,this},w.setCurrentTransformationMatrix=function(_){return z(_.toString()+" cm"),this},w.comment=function(_){return z("#"+_),this};var fi=function(_,$){var de=_||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return de},set:function(Qe){isNaN(Qe)||(de=parseFloat(Qe))}});var xe=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return xe},set:function(Qe){isNaN(Qe)||(xe=parseFloat(Qe))}});var Re="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Re},set:function(Qe){Re=Qe.toString()}}),this},Hs=function(_,$,de,xe){fi.call(this,_,$),this.type="rect";var Re=de||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Re},set:function(st){isNaN(st)||(Re=parseFloat(st))}});var Qe=xe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Qe},set:function(st){isNaN(st)||(Qe=parseFloat(st))}}),this},Ma=function(){this.page=Dt,this.currentPage=Y,this.pages=ae.slice(0),this.pagesContext=Lt.slice(0),this.x=mt,this.y=ft,this.matrix=ct,this.width=ys(Y),this.height=Mo(Y),this.outputDestination=Ee,this.id="",this.objectNumber=-1};Ma.prototype.restore=function(){Dt=this.page,Y=this.currentPage,Lt=this.pagesContext,ae=this.pages,mt=this.x,ft=this.y,ct=this.matrix,ao(Y,this.width),rs(Y,this.height),Ee=this.outputDestination};var Gs=function(_,$,de,xe,Re){Zr.push(new Ma),Dt=Y=0,ae=[],mt=_,ft=$,ct=Re,ms([de,xe])};for(var $s in w.beginFormObject=function(_,$,de,xe,Re){return Gs(_,$,de,xe,Re),this},w.endFormObject=function(_){return(function($){if(zs[$])Zr.pop().restore();else{var de=new Ma,xe="Xo"+(Object.keys(ui).length+1).toString(10);de.id=xe,zs[$]=xe,ui[xe]=de,cn.publish("addFormObject",de),Zr.pop().restore()}})(_),this},w.doFormObject=function(_,$){var de=ui[zs[_]];return z("q"),z($.toString()+" cm"),z("/"+de.id+" Do"),z("Q"),this},w.getFormObject=function(_){var $=ui[zs[_]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},w.save=function(_,$){return _=_||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Du(Sn(gs()),_),typeof Du.unload=="function"&&en.setTimeout&&setTimeout(Du.unload,911),this):new Promise(function(de,xe){try{var Re=Du(Sn(gs()),_);typeof Du.unload=="function"&&en.setTimeout&&setTimeout(Du.unload,911),de(Re)}catch(Qe){xe(Qe.message)}})},Mt.API)Mt.API.hasOwnProperty($s)&&($s==="events"&&Mt.API.events.length?(function(_,$){var de,xe,Re;for(Re=$.length-1;Re!==-1;Re--)de=$[Re][0],xe=$[Re][1],_.subscribe.apply(_,[de].concat(typeof xe=="function"?[xe]:xe))})(cn,Mt.API.events):w[$s]=Mt.API[$s]);function ys(_){return Lt[_].mediaBox.topRightX-Lt[_].mediaBox.bottomLeftX}function ao(_,$){Lt[_].mediaBox.topRightX=$+Lt[_].mediaBox.bottomLeftX}function Mo(_){return Lt[_].mediaBox.topRightY-Lt[_].mediaBox.bottomLeftY}function rs(_,$){Lt[_].mediaBox.topRightY=$+Lt[_].mediaBox.bottomLeftY}var Ws=w.getPageWidth=function(_){return ys(_=_||Y)/pt},xl=w.setPageWidth=function(_,$){ao(_,$*pt)},ks=w.getPageHeight=function(_){return Mo(_=_||Y)/pt},Oo=w.setPageHeight=function(_,$){rs(_,$*pt)};return w.internal={pdfEscape:Ui,getStyle:yl,getFont:Is,getFontSize:et,getCharSpace:wa,getTextColor:wl,getLineHeight:ro,getLineHeightFactor:Pa,getLineWidth:La,write:Ie,getHorizontalCoordinate:ti,getVerticalCoordinate:zr,getCoordinateString:io,getVerticalCoordinateString:Bn,collections:{},newObject:Yn,newAdditionalObject:xi,newObjectDeferred:rr,newObjectDeferredBegin:Br,getFilters:Oi,putStream:fs,events:cn,scaleFactor:pt,pageSize:{getWidth:function(){return Ws(Y)},setWidth:function(_){xl(Y,_)},getHeight:function(){return ks(Y)},setHeight:function(_){Oo(Y,_)}},encryptionOptions:m,encryption:hr,getEncryptor:function(_){return m!==null?hr.encryptor(_,0):function($){return $}},output:Da,getNumberOfPages:Do,get pages(){return ae},out:z,f2:j,f3:F,getPageInfo:Ar,getPageInfoByObjId:no,getCurrentPageInfo:lc,getPDFVersion:D,Point:fi,Rectangle:Hs,Matrix:Ft,hasHotfix:Dr},Object.defineProperty(w.internal.pageSize,"width",{get:function(){return Ws(Y)},set:function(_){xl(Y,_)},enumerable:!0,configurable:!0}),Object.defineProperty(w.internal.pageSize,"height",{get:function(){return ks(Y)},set:function(_){Oo(Y,_)},enumerable:!0,configurable:!0}),(function(_){for(var $=0,de=$e.length;$<de;$++){var xe=Ro.call(this,_[$][0],_[$][1],_[$][2],$e[$][3],!0);x===!1&&(E[xe]=!0);var Re=_[$][0].split("-");yr({id:xe,fontName:Re[0],fontStyle:Re[1]||""})}cn.publish("addFonts",{fonts:bt,dictionary:wt})}).call(w,$e),We="F1",Rs(s,t),cn.publish("initialized"),w}Hd.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Hd.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Hd.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Hd.prototype.processOwnerPassword=function(n,e){return k1(D1(e).substr(0,5),n)},Hd.prototype.encryptor=function(n,e){var t=D1(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return k1(t,r)}},tg.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||nr(n)!==nr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Mt.API={events:[]},Mt.version="3.0.4";var Xr=Mt.API,s2=1,td=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sn=function(n){return n.toFixed(2)},Bc=function(n){return n.toFixed(5)};Xr.__acroform__={};var fa=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},gS=function(n){return n*s2},Zo=function(n){var e=new UA,t=It.internal.getHeight(n)||0,r=It.internal.getWidth(n)||0;return e.BBox=[0,0,Number(sn(r)),Number(sn(t))],e},pM=Xr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},mM=Xr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},gM=Xr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},si=Xr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return gM(n,e-1)},ai=Xr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return pM(n,e-1)},oi=Xr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return mM(n,e-1)},yM=Xr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=n[0],o=n[1],u=n[2],d=n[3],f={};return f.lowerLeft_X=t(s)||0,f.lowerLeft_Y=r(o+d)||0,f.upperRight_X=t(s+u)||0,f.upperRight_Y=r(o)||0,[Number(sn(f.lowerLeft_X)),Number(sn(f.lowerLeft_Y)),Number(sn(f.upperRight_X)),Number(sn(f.upperRight_Y))]},vM=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=L1(n,t),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+s+" "+sn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=Zo(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},L1=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=n.multiline?s.map(function(j){return j.split(`
`)}):s.map(function(j){return[j]});var o=t,u=It.internal.getHeight(n)||0;u=u<0?-u:u;var d=It.internal.getWidth(n)||0;d=d<0?-d:d;var f=function(j,F,M){if(j+1<s.length){var ne=F+" "+s[j+1][0];return cm(ne,n,M).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var p,m,x=cm("3",n,o).height,E=n.multiline?u-o:(u-x)/2,w=E+=2,A=0,D=0,C=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+cm(e,n,o=12).width+", FieldWidth:"+d+`
`;break}for(var k="",H=0,G=0;G<s.length;G++)if(s.hasOwnProperty(G)){var V=!1;if(s[G].length!==1&&C!==s[G].length-1){if((x+2)*(H+2)+2>u)continue e;k+=s[G][C],V=!0,D=G,G--}else{k=(k+=s[G][C]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var ce=parseInt(G),se=f(ce,k,o),U=G>=s.length-1;if(se&&!U){k+=" ",C=0;continue}if(se||U){if(U)D=ce;else if(n.multiline&&(x+2)*(H+2)+2>u)continue e}else{if(!n.multiline||(x+2)*(H+2)+2>u)continue e;D=ce}}for(var I="",R=A;R<=D;R++){var q=s[R];if(n.multiline){if(R===D){I+=q[C]+" ",C=(C+1)%q.length;continue}if(R===A){I+=q[q.length-1]+" ";continue}}I+=q[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,m=cm(I,n,o).width,n.textAlign){case"right":p=d-m-2;break;case"center":p=(d-m)/2;break;default:p=2}e+=sn(p)+" "+sn(w)+` Td
`,e+="("+td(I)+`) Tj
`,e+=-sn(p)+` 0 Td
`,w=-(o+2),m=0,A=V?D:D+1,H++,k=""}break}return r.text=e,r.fontSize=o,r},cm=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},bM={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},wM=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},xM=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Co.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(bM)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");s2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new BA,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];o.objId=void 0,o.hasAnnotation&&wM(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,s){var o=!r;for(var u in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var d=r[u],f=[],p=d.Rect;if(d.Rect&&(d.Rect=yM(d.Rect,s)),s.internal.newObjectDeferredBegin(d.objId,!0),d.DA=It.createDefaultAppearanceStream(d),nr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(f=d.getKeyValueListForStream()),d.Rect=p,d.hasAppearanceStream&&!d.appearanceStreamContent){var m=vM(d);f.push({key:"AP",value:"<</N "+m+">>"}),s.internal.acroformPlugin.xForms.push(m)}if(d.appearanceStreamContent){var x="";for(var E in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(E)){var w=d.appearanceStreamContent[E];if(x+="/"+E+" ",x+="<<",Object.keys(w).length>=1||Array.isArray(w)){for(var u in w)if(w.hasOwnProperty(u)){var A=w[u];typeof A=="function"&&(A=A.call(s,d)),x+="/"+u+" "+A+" ",s.internal.acroformPlugin.xForms.indexOf(A)>=0||s.internal.acroformPlugin.xForms.push(A)}}else typeof(A=w)=="function"&&(A=A.call(s,d)),x+="/"+u+" "+A,s.internal.acroformPlugin.xForms.indexOf(A)>=0||s.internal.acroformPlugin.xForms.push(A);x+=">>"}f.push({key:"AP",value:`<<
`+x+">>"})}s.internal.putStream({additionalKeyValues:f,objectId:d.objId}),s.internal.out("endobj")}o&&(function(D,C){for(var k in D)if(D.hasOwnProperty(k)){var H=k,G=D[k];C.internal.newObjectDeferredBegin(G.objId,!0),nr(G)==="object"&&typeof G.putStream=="function"&&G.putStream(),delete D[H]}})(s.internal.acroformPlugin.xForms,s)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},FA=Xr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(u){return u};if(Array.isArray(n)){for(var s="[",o=0;o<n.length;o++)switch(o!==0&&(s+=" "),nr(n[o])){case"boolean":case"number":case"object":s+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),s+="("+td(r(n[o].toString()))+")"):s+=n[o].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Oy=function(n,e,t){var r=function(s){return s};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+td(r(n))+")"},nl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nl.prototype.toString=function(){return this.objId+" 0 R"},nl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},nl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],s=this[r];s&&(Array.isArray(s)?n.push({key:r,value:FA(s,this.objId,this.scope)}):s instanceof nl?(s.scope=this.scope,n.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:r,value:s}))}return n};var UA=function(){nl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};fa(UA,nl);var BA=function(){nl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+td(t(n))+")"}},set:function(t){n=t}})};fa(BA,nl);var Co=function n(){nl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!si(e,3)},set:function(k){k?this.F=ai(e,3):this.F=oi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');t=k}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(k){r=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(k){r[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(k){r[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(k){r[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(k){r[3]=k}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ng)return;o="FieldObject"+n.FieldNum++}var k=function(H){return H};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+td(k(o))+")"},set:function(k){o=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(k){o=k}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(k){d=k}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(k){f=k}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/s2:p},set:function(k){p=k}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(k){m=k}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof ng||this instanceof Vu))return Oy(x,this.objId,this.scope)},set:function(k){k=k.toString(),x=k}});var E=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof Ki==0?Oy(E,this.objId,this.scope):E},set:function(k){k=k.toString(),E=this instanceof Ki==0?k.substr(0,1)==="("?Fd(k.substr(1,k.length-2)):Fd(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?Fd(E.substr(1,E.length-1)):E},set:function(k){k=k.toString(),E=this instanceof Ki==1?"/"+k:k}});var w=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(w)return w},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Ki==0?Oy(w,this.objId,this.scope):w},set:function(k){k=k.toString(),w=this instanceof Ki==0?k.substr(0,1)==="("?Fd(k.substr(1,k.length-2)):Fd(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki==1?Fd(w.substr(1,w.length-1)):w},set:function(k){k=k.toString(),w=this instanceof Ki==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,D=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return D},set:function(k){k=!!k,D=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(k){A=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,1)},set:function(k){k?this.Ff=ai(this.Ff,1):this.Ff=oi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,2)},set:function(k){k?this.Ff=ai(this.Ff,2):this.Ff=oi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,3)},set:function(k){k?this.Ff=ai(this.Ff,3):this.Ff=oi(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');C=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(C){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};fa(Co,nl);var Jd=function(){Co.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return FA(e,this.objId,this.scope)},set:function(t){var r,s;s=[],typeof(r=t)=="string"&&(s=(function(o,u,d){d||(d=1);for(var f,p=[];f=u.exec(o);)p.push(f[d]);return p})(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,18)},set:function(t){t?this.Ff=ai(this.Ff,18):this.Ff=oi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ai(this.Ff,19):this.Ff=oi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,20)},set:function(t){t?(this.Ff=ai(this.Ff,20),e.sort()):this.Ff=oi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,22)},set:function(t){t?this.Ff=ai(this.Ff,22):this.Ff=oi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,23)},set:function(t){t?this.Ff=ai(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,27)},set:function(t){t?this.Ff=ai(this.Ff,27):this.Ff=oi(this.Ff,27)}}),this.hasAppearanceStream=!1};fa(Jd,Co);var Zd=function(){Jd.call(this),this.fontName="helvetica",this.combo=!1};fa(Zd,Jd);var eh=function(){Zd.call(this),this.combo=!0};fa(eh,Zd);var Am=function(){eh.call(this),this.edit=!0};fa(Am,eh);var Ki=function(){Co.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,15)},set:function(t){t?this.Ff=ai(this.Ff,15):this.Ff=oi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,16)},set:function(t){t?this.Ff=ai(this.Ff,16):this.Ff=oi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,17)},set:function(t){t?this.Ff=ai(this.Ff,17):this.Ff=oi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,26)},set:function(t){t?this.Ff=ai(this.Ff,26):this.Ff=oi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+td(t(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){nr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};fa(Ki,Co);var Tm=function(){Ki.call(this),this.pushButton=!0};fa(Tm,Ki);var th=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};fa(th,Ki);var ng=function(){var n,e;Co.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(d){return d};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),r)u.push("/"+o+" ("+td(s(r[o]))+")");return u.push(">>"),u.join(`
`)},set:function(s){nr(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=It.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};fa(ng,Co),th.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},th.prototype.createOption=function(n){var e=new ng;return e.Parent=this,e.optionName=n,this.Kids.push(e),SM.call(this.scope,e),e};var Cm=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=It.CheckBox.createAppearanceStream()};fa(Cm,Ki);var Vu=function(){Co.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,13)},set:function(e){e?this.Ff=ai(this.Ff,13):this.Ff=oi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,21)},set:function(e){e?this.Ff=ai(this.Ff,21):this.Ff=oi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,23)},set:function(e){e?this.Ff=ai(this.Ff,23):this.Ff=oi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,24)},set:function(e){e?this.Ff=ai(this.Ff,24):this.Ff=oi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,25)},set:function(e){e?this.Ff=ai(this.Ff,25):this.Ff=oi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,26)},set:function(e){e?this.Ff=ai(this.Ff,26):this.Ff=oi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};fa(Vu,Co);var jm=function(){Vu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!si(this.Ff,14)},set:function(n){n?this.Ff=ai(this.Ff,14):this.Ff=oi(this.Ff,14)}}),this.password=!0};fa(jm,Vu);var It={CheckBox:{createAppearanceStream:function(){return{N:{On:It.CheckBox.YesNormal},D:{On:It.CheckBox.YesPushDown,Off:It.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=Zo(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),o=L1(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+sn(It.internal.getWidth(n))+" "+sn(It.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+sn(o.fontSize)+" Tf "+s),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=Zo(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=[],o=It.internal.getHeight(n),u=It.internal.getWidth(n),d=L1(n,n.caption);return s.push("1 g"),s.push("0 0 "+sn(u)+" "+sn(o)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+sn(u-1)+" "+sn(o-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+sn(d.fontSize)+" Tf "+r),s.push(d.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=Zo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+sn(It.internal.getWidth(n))+" "+sn(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Circle.YesNormal,e.D[n]=It.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=Zo(n);e.scope=n.scope;var t=[],r=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=It.internal.Bezier_C,o=Number((r*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Bc(It.internal.getWidth(n)/2)+" "+Bc(It.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Zo(n);e.scope=n.scope;var t=[],r=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),o=Number((s*It.internal.Bezier_C).toFixed(5)),u=Number((r*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bc(It.internal.getWidth(n)/2)+" "+Bc(It.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Bc(It.internal.getWidth(n)/2)+" "+Bc(It.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),t.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),t.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),t.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=Zo(n);e.scope=n.scope;var t=[],r=It.internal.getWidth(n)<=It.internal.getHeight(n)?It.internal.getWidth(n)/4:It.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),o=Number((s*It.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Bc(It.internal.getWidth(n)/2)+" "+Bc(It.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),t.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),t.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),t.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:It.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=It.RadioButton.Cross.YesNormal,e.D[n]=It.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=Zo(n);e.scope=n.scope;var t=[],r=It.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+sn(It.internal.getWidth(n)-2)+" "+sn(It.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(sn(r.x1.x)+" "+sn(r.x1.y)+" m"),t.push(sn(r.x2.x)+" "+sn(r.x2.y)+" l"),t.push(sn(r.x4.x)+" "+sn(r.x4.y)+" m"),t.push(sn(r.x3.x)+" "+sn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=Zo(n);e.scope=n.scope;var t=It.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+sn(It.internal.getWidth(n))+" "+sn(It.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+sn(It.internal.getWidth(n)-2)+" "+sn(It.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(sn(t.x1.x)+" "+sn(t.x1.y)+" m"),r.push(sn(t.x2.x)+" "+sn(t.x2.y)+" l"),r.push(sn(t.x4.x)+" "+sn(t.x4.y)+" m"),r.push(sn(t.x3.x)+" "+sn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=Zo(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+sn(It.internal.getWidth(n))+" "+sn(It.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};It.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=It.internal.getWidth(n),t=It.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},It.internal.getWidth=function(n){var e=0;return nr(n)==="object"&&(e=gS(n.Rect[2])),e},It.internal.getHeight=function(n){var e=0;return nr(n)==="object"&&(e=gS(n.Rect[3])),e};var SM=Xr.addField=function(n){if(xM(this,n),!(n instanceof Co))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Xr.AcroFormChoiceField=Jd,Xr.AcroFormListBox=Zd,Xr.AcroFormComboBox=eh,Xr.AcroFormEditBox=Am,Xr.AcroFormButton=Ki,Xr.AcroFormPushButton=Tm,Xr.AcroFormRadioButton=th,Xr.AcroFormCheckBox=Cm,Xr.AcroFormTextField=Vu,Xr.AcroFormPasswordField=jm,Xr.AcroFormAppearance=It,Xr.AcroForm={ChoiceField:Jd,ListBox:Zd,ComboBox:eh,EditBox:Am,Button:Ki,PushButton:Tm,RadioButton:th,CheckBox:Cm,TextField:Vu,PasswordField:jm,Appearance:It},Mt.AcroForm={ChoiceField:Jd,ListBox:Zd,ComboBox:eh,EditBox:Am,Button:Ki,PushButton:Tm,RadioButton:th,CheckBox:Cm,TextField:Vu,PasswordField:jm,Appearance:It};Mt.AcroForm;function VA(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=n.__addimage__.getImageFileTypeByImageData=function(j,F){var M,ne,Se,le,ve,ye=t;if((F=F||t)==="RGBA"||j.data!==void 0&&j.data instanceof Uint8ClampedArray&&"height"in j&&"width"in j)return"RGBA";if(se(j))for(ve in r)for(Se=r[ve],M=0;M<Se.length;M+=1){for(le=!0,ne=0;ne<Se[M].length;ne+=1)if(Se[M][ne]!==void 0&&Se[M][ne]!==j[ne]){le=!1;break}if(le===!0){ye=ve;break}}else for(ve in r)for(Se=r[ve],M=0;M<Se.length;M+=1){for(le=!0,ne=0;ne<Se[M].length;ne+=1)if(Se[M][ne]!==void 0&&Se[M][ne]!==j.charCodeAt(ne)){le=!1;break}if(le===!0){ye=ve;break}}return ye===t&&F!==t&&(ye=F),ye},o=function j(F){for(var M=this.internal.write,ne=this.internal.putStream,Se=(0,this.internal.getFilters)();Se.indexOf("FlateEncode")!==-1;)Se.splice(Se.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:F.width}),le.push({key:"Height",value:F.height}),F.colorSpace===k.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===k.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var ve="",ye=0,ge=F.transparency.length;ye<ge;ye++)ve+=F.transparency[ye]+" "+F.transparency[ye]+" ";le.push({key:"Mask",value:"["+ve+"]"})}F.sMask!==void 0&&le.push({key:"SMask",value:F.objectId+1+" 0 R"});var we=F.filter!==void 0?["/"+F.filter]:void 0;if(ne({data:F.data,additionalKeyValues:le,alreadyAppliedFilters:we,objectId:F.objectId}),M("endobj"),"sMask"in F&&F.sMask!==void 0){var Q,P=(Q=F.sMaskBitsPerComponent)!==null&&Q!==void 0?Q:F.bitsPerComponent,Y={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:P,data:F.sMask};"filter"in F&&(Y.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(P," /Columns ").concat(F.width),Y.filter=F.filter),j.call(this,Y)}if(F.colorSpace===k.INDEXED){var re=this.internal.newObject();ne({data:I(new Uint8Array(F.palette)),objectId:re}),M("endobj")}},u=function(){var j=this.internal.collections[e+"images"];for(var F in j)o.call(this,j[F])},d=function(){var j,F=this.internal.collections[e+"images"],M=this.internal.write;for(var ne in F)M("/I"+(j=F[ne]).index,j.objectId,"0","R")},f=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",d))},p=function(){var j=this.internal.collections[e+"images"];return f.call(this),j},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},x=function(j){return typeof n["process"+j.toUpperCase()]=="function"},E=function(j){return nr(j)==="object"&&j.nodeType===1},w=function(j,F){if(j.nodeName==="IMG"&&j.hasAttribute("src")){var M=""+j.getAttribute("src");if(M.indexOf("data:image/")===0)return Nm(unescape(M).split("base64,").pop());var ne=n.loadFile(M,!0);if(ne!==void 0)return ne}if(j.nodeName==="CANVAS"){if(j.width===0||j.height===0)throw new Error("Given canvas must have data. Canvas width: "+j.width+", height: "+j.height);var Se;switch(F){case"PNG":Se="image/png";break;case"WEBP":Se="image/webp";break;default:Se="image/jpeg"}return Nm(j.toDataURL(Se,1).split("base64,").pop())}},A=function(j){var F=this.internal.collections[e+"images"];if(F){for(var M in F)if(j===F[M].alias)return F[M]}},D=function(j,F,M){return j||F||(j=-96,F=-96),j<0&&(j=-1*M.width*72/j/this.internal.scaleFactor),F<0&&(F=-1*M.height*72/F/this.internal.scaleFactor),j===0&&(j=F*M.width/M.height),F===0&&(F=j*M.height/M.width),[j,F]},C=function(j,F,M,ne,Se,le){var ve=D.call(this,M,ne,Se),ye=this.internal.getCoordinateString,ge=this.internal.getVerticalCoordinateString,we=p.call(this);if(M=ve[0],ne=ve[1],we[Se.index]=Se,le){le*=Math.PI/180;var Q=Math.cos(le),P=Math.sin(le),Y=function(fe){return fe.toFixed(4)},re=[Y(Q),Y(P),Y(-1*P),Y(Q),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,ye(j),ge(F+ne),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([ye(M),"0","0",ye(ne),"0","0","cm"].join(" "))):this.internal.write([ye(M),"0","0",ye(ne),ye(j),ge(F+ne),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Se.index+" Do"),this.internal.write("Q")},k=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var H=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},G=n.__addimage__.sHashCode=function(j){var F,M,ne=0;if(typeof j=="string")for(M=j.length,F=0;F<M;F++)ne=(ne<<5)-ne+j.charCodeAt(F),ne|=0;else if(se(j))for(M=j.byteLength/2,F=0;F<M;F++)ne=(ne<<5)-ne+j[F],ne|=0;return ne},V=n.__addimage__.validateStringAsBase64=function(j){(j=j||"").toString().trim();var F=!0;return j.length===0&&(F=!1),j.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(j.substr(0,j.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(j.substr(-2))===!1&&(F=!1),F},ce=n.__addimage__.extractImageFromDataUrl=function(j){if(j==null||!(j=j.trim()).startsWith("data:"))return null;var F=j.indexOf(",");return F<0?null:j.substring(0,F).trim().endsWith("base64")?j.substring(F+1):null};n.__addimage__.isArrayBuffer=function(j){return j instanceof ArrayBuffer};var se=n.__addimage__.isArrayBufferView=function(j){return j instanceof Int8Array||j instanceof Uint8Array||j instanceof Uint8ClampedArray||j instanceof Int16Array||j instanceof Uint16Array||j instanceof Int32Array||j instanceof Uint32Array||j instanceof Float32Array||j instanceof Float64Array},U=n.__addimage__.binaryStringToUint8Array=function(j){for(var F=j.length,M=new Uint8Array(F),ne=0;ne<F;ne++)M[ne]=j.charCodeAt(ne);return M},I=n.__addimage__.arrayBufferToBinaryString=function(j){for(var F="",M=se(j)?j:new Uint8Array(j),ne=0;ne<M.length;ne+=8192)F+=String.fromCharCode.apply(null,M.subarray(ne,ne+8192));return F};n.addImage=function(){var j,F,M,ne,Se,le,ve,ye,ge;if(typeof arguments[1]=="number"?(F=t,M=arguments[1],ne=arguments[2],Se=arguments[3],le=arguments[4],ve=arguments[5],ye=arguments[6],ge=arguments[7]):(F=arguments[1],M=arguments[2],ne=arguments[3],Se=arguments[4],le=arguments[5],ve=arguments[6],ye=arguments[7],ge=arguments[8]),nr(j=arguments[0])==="object"&&!E(j)&&"imageData"in j){var we=j;j=we.imageData,F=we.format||F||t,M=we.x||M||0,ne=we.y||ne||0,Se=we.w||we.width||Se,le=we.h||we.height||le,ve=we.alias||ve,ye=we.compression||ye,ge=we.rotation||we.angle||ge}var Q=this.internal.getFilters();if(ye===void 0&&Q.indexOf("FlateEncode")!==-1&&(ye="SLOW"),isNaN(M)||isNaN(ne))throw new Error("Invalid coordinates passed to jsPDF.addImage");f.call(this);var P=R.call(this,j,F,ve,ye);return C.call(this,M,ne,Se,le,P,ge),this};var R=function(j,F,M,ne){var Se,le,ve;if(typeof j=="string"&&s(j)===t){j=unescape(j);var ye=q(j,!1);(ye!==""||(ye=n.loadFile(j,!0))!==void 0)&&(j=ye)}if(E(j)&&(j=w(j,F)),F=s(j,F),!x(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((ve=M)==null||ve.length===0)&&(M=(function(ge){return typeof ge=="string"||se(ge)?G(ge):se(ge.data)?G(ge.data):null})(j)),(Se=A.call(this,M))||(j instanceof Uint8Array||F==="RGBA"||(le=j,j=U(j)),Se=this["process"+F.toUpperCase()](j,m.call(this),M,(function(ge){return ge&&typeof ge=="string"&&(ge=ge.toUpperCase()),ge in n.image_compression?ge:H.NONE})(ne),le)),!Se)throw new Error("An unknown error occurred whilst processing the image.");return Se},q=n.__addimage__.convertBase64ToBinaryString=function(j,F){F=typeof F!="boolean"||F;var M,ne="";if(typeof j=="string"){var Se;M=(Se=ce(j))!==null&&Se!==void 0?Se:j;try{ne=Nm(M)}catch(le){if(F)throw V(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};n.getImageProperties=function(j){var F,M,ne="";if(E(j)&&(j=w(j)),typeof j=="string"&&s(j)===t&&((ne=q(j,!1))===""&&(ne=n.loadFile(j)||""),j=ne),M=s(j),!x(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(j instanceof Uint8Array||(j=U(j)),!(F=this["process"+M.toUpperCase()](j)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=M,F}})(Mt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Mt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,s,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(t.objId),p=t.pageContext.annotations,m=!1,x=0;x<p.length&&!m;x++)switch((r=p[x]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var E=0;E<p.length;E++){r=p[E];var w=this.internal.pdfEscape,A=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var D=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(D.objId),H=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(s="/Rect ["+u(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+w(k(r.contents))+")",o+=" /Popup "+C.objId+" 0 R",o+=" /P "+f.objId+" 0 R",o+=" /T ("+w(k(H))+") >>",D.content=o;var G=D.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+u(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+G,r.open&&(o+=" /Open true"),o+=" >>",C.content=o,this.internal.write(D.objId,"0 R",C.objId,"0 R");break;case"freetext":s="/Rect ["+u(r.bounds.x)+" "+d(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var V=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+w(A(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var ce=this.annotations._nameMap[r.options.name];r.options.pageNumber=ce.page,r.options.top=ce.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+w(A(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var se=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+se+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,s,o,u){var d=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:f(t),y:p(r),w:f(t+s),h:p(r+o)},options:u,type:"link"})},n.textWithLink=function(t,r,s,o){var u,d,f=this.getTextWidth(t),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var m=this.splitTextToSize(t,d).length;u=Math.ceil(p*m)}else d=f,u=p;return this.text(t,r,s,o),s+=.2*p,o.align==="center"&&(r-=f/2),o.align==="right"&&(r-=f),this.link(r,s-p,d,u,o),f},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Mt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(D){return e[D.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(D){return typeof D=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(D)},d=n.__arabicParser__.isArabicEndLetter=function(D){return u(D)&&o(D)&&e[D.charCodeAt(0)].length<=2},f=n.__arabicParser__.isArabicAlfLetter=function(D){return u(D)&&s.indexOf(D.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(D){return u(D)&&o(D)&&e[D.charCodeAt(0)].length>=1};var p=n.__arabicParser__.arabicLetterHasFinalForm=function(D){return u(D)&&o(D)&&e[D.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(D){return u(D)&&o(D)&&e[D.charCodeAt(0)].length>=3};var m=n.__arabicParser__.arabicLetterHasMedialForm=function(D){return u(D)&&o(D)&&e[D.charCodeAt(0)].length==4},x=n.__arabicParser__.resolveLigatures=function(D){var C=0,k=t,H="",G=0;for(C=0;C<D.length;C+=1)k[D.charCodeAt(C)]!==void 0?(G++,typeof(k=k[D.charCodeAt(C)])=="number"&&(H+=String.fromCharCode(k),k=t,G=0),C===D.length-1&&(k=t,H+=D.charAt(C-(G-1)),C-=G-1,G=0)):(k=t,H+=D.charAt(C-G),C-=G,G=0);return H};n.__arabicParser__.isArabicDiacritic=function(D){return D!==void 0&&r[D.charCodeAt(0)]!==void 0};var E=n.__arabicParser__.getCorrectForm=function(D,C,k){return u(D)?o(D)===!1?-1:!p(D)||!u(C)&&!u(k)||!u(k)&&d(C)||d(D)&&!u(C)||d(D)&&f(C)||d(D)&&d(C)?0:m(D)&&u(C)&&!d(C)&&u(k)&&p(k)?3:d(D)||!u(k)?1:2:-1},w=function(D){var C=0,k=0,H=0,G="",V="",ce="",se=(D=D||"").split("\\s+"),U=[];for(C=0;C<se.length;C+=1){for(U.push(""),k=0;k<se[C].length;k+=1)G=se[C][k],V=se[C][k-1],ce=se[C][k+1],u(G)?(H=E(G,V,ce),U[C]+=H!==-1?String.fromCharCode(e[G.charCodeAt(0)][H]):G):U[C]+=G;U[C]=x(U[C])}return U.join(" ")},A=n.__arabicParser__.processArabic=n.processArabic=function(){var D,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(C)){var H=0;for(k=[],H=0;H<C.length;H+=1)Array.isArray(C[H])?k.push([w(C[H][0]),C[H][1],C[H][2]]):k.push([w(C[H])]);D=k}else D=w(C);return typeof arguments[0]=="string"?D:(arguments[0].text=D,arguments[0])};n.events.push(["preProcessText",A])})(Mt.API),Mt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var s;if((t=t||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Mt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(D){f=D}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(D){p=D}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(D){m=D}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(D){x=D}});var E=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return E},set:function(D){E=D}});var w=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return w},set:function(D){w=D}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(D){A=D}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},n.getTextDimensions=function(f,p){r.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),x=p.font||this.getFont(),E=p.scaleFactor||this.internal.scaleFactor,w=0,A=0,D=0,C=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var k=p.maxWidth;k>0?typeof f=="string"?f=this.splitTextToSize(f,k):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(G,V){return G.concat(C.splitTextToSize(V,k))},[])):f=Array.isArray(f)?f:[f];for(var H=0;H<f.length;H++)w<(D=this.getStringUnitWidth(f[H],{font:x})*m)&&(w=D);return w!==0&&(A=f.length),{w:w/=E,h:Math.max((A*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/E,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var f;f=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,x=this.internal.__cell__.margins||e,E=this.internal.__cell__.tableHeaderRow,w=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===f.lineNumber?(f.x=(p.x||0)+(p.width||0),f.y=p.y||0):p.y+p.height+f.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=x.top,w&&E&&(this.printHeaderRow(f.lineNumber,!0),f.y+=E[0].height)):f.y=p.y+p.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,t===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-m,f.y+m,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+m,{align:"center",baseline:"top",maxWidth:f.width-m-m}):this.text(f.text,f.x+m,f.y+m,{align:"left",baseline:"top",maxWidth:f.width-m-m})),this.internal.__cell__.lastCell=f,this};n.table=function(f,p,m,x,E){if(r.call(this),!m)throw new Error("No data for PDF table.");var w,A,D,C,k=[],H=[],G=[],V={},ce={},se=[],U=[],I=(E=E||{}).autoSize||!1,R=E.printHeaders!==!1,q=E.css&&E.css["font-size"]!==void 0?16*E.css["font-size"]:E.fontSize||12,j=E.margins||Object.assign({width:this.getPageWidth()},e),F=typeof E.padding=="number"?E.padding:3,M=E.headerBackgroundColor||"#c8c8c8",ne=E.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=ne,this.setFontSize(q),x==null)H=k=Object.keys(m[0]),G=k.map(function(){return"left"});else if(Array.isArray(x)&&nr(x[0])==="object")for(k=x.map(function(we){return we.name}),H=x.map(function(we){return we.prompt||we.name||""}),G=x.map(function(we){return we.align||"left"}),w=0;w<x.length;w+=1)ce[x[w].name]=.7499990551181103*x[w].width;else Array.isArray(x)&&typeof x[0]=="string"&&(H=k=x,G=k.map(function(){return"left"}));if(I||Array.isArray(x)&&typeof x[0]=="string")for(w=0;w<k.length;w+=1){for(V[C=k[w]]=m.map(function(we){return we[C]}),this.setFont(void 0,"bold"),se.push(this.getTextDimensions(H[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=V[C],this.setFont(void 0,"normal"),D=0;D<A.length;D+=1)se.push(this.getTextDimensions(A[D],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ce[C]=Math.max.apply(null,se)+F+F,se=[]}if(R){var Se={};for(w=0;w<k.length;w+=1)Se[k[w]]={},Se[k[w]].text=H[w],Se[k[w]].align=G[w];var le=d.call(this,Se,ce);U=k.map(function(we){return new o(f,p,ce[we],le,Se[we].text,void 0,Se[we].align)}),this.setTableHeaderRow(U),this.printHeaderRow(1,!1)}var ve=x.reduce(function(we,Q){return we[Q.name]=Q.align,we},{});for(w=0;w<m.length;w+=1){"rowStart"in E&&E.rowStart instanceof Function&&E.rowStart({row:w,data:m[w]},this);var ye=d.call(this,m[w],ce);for(D=0;D<k.length;D+=1){var ge=m[w][k[D]];"cellStart"in E&&E.cellStart instanceof Function&&E.cellStart({row:w,col:D,data:ge},this),u.call(this,new o(f,p,ce[k[D]],ye,ge,w+2,ve[k[D]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=p,this};var d=function(f,p){var m=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,E=this.internal.scaleFactor;return Object.keys(f).map(function(w){var A=f[w];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,p[w]-m-m)},this).map(function(w){return this.getLineHeightFactor()*w.length*x/E+m+m},this).reduce(function(w,A){return Math.max(w,A)},0)};n.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},n.printHeaderRow=function(f,p){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var E=[],w=0;w<this.internal.__cell__.tableHeaderRow.length;w+=1){m=this.internal.__cell__.tableHeaderRow[w].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,E.push(m)),m.lineNumber=f;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(A)}E.length>0&&this.setTableHeaderRow(E),this.setFont(void 0,"normal"),t=!1}})(Mt.API);var zA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},qA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],P1=VA(qA),HA=[100,200,300,400,500,600,700,800,900],_M=VA(HA);function Fy(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return zA[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),s=(function(o){return typeof P1[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:s,src:n.src||[],ref:n.ref||{name:e,style:[s,t,r].join(" ")}}}function yS(n,e,t,r){var s;for(s=t;s>=0&&s<e.length;s+=r)if(n[e[s]])return n[e[s]];for(s=t;s>=0&&s<e.length;s-=r)if(n[e[s]])return n[e[s]]}var EM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},vS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function bS(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function wS(n){return n.trimLeft()}function NM(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function AM(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var um,xS,SS,Ud,dm,_S,ES,NS,Uy=["times"];function AS(n,e,t,r,s){var o=4,u=CS;switch(s){case Mt.API.image_compression.FAST:o=1,u=TS;break;case Mt.API.image_compression.MEDIUM:o=6,u=jS;break;case Mt.API.image_compression.SLOW:o=9,u=RS}n=(function(f,p,m,x){for(var E,w=f.length/p,A=new Uint8Array(f.length+w),D=[TM,TS,CS,jS,RS],C=0;C<w;C+=1){var k=C*p,H=f.subarray(k,k+p);if(x)A.set(x(H,m,E),k+C);else{for(var G=D.length,V=[],ce=0;ce<G;ce+=1)V[ce]=D[ce](H,m,E);var se=jM(V.concat());A.set(V[se],k+C)}E=H}return A})(n,e,Math.ceil(t*r/8),u);var d=C1(n,{level:o});return Mt.API.__addimage__.arrayBufferToBinaryString(d)}function TM(n){var e=Array.apply([],n);return e.unshift(0),e}function TS(n,e){var t=n.length,r=[];r[0]=1;for(var s=0;s<t;s+=1){var o=n[s-e]||0;r[s+1]=n[s]-o+256&255}return r}function CS(n,e,t){var r=n.length,s=[];s[0]=2;for(var o=0;o<r;o+=1){var u=t&&t[o]||0;s[o+1]=n[o]-u+256&255}return s}function jS(n,e,t){var r=n.length,s=[];s[0]=3;for(var o=0;o<r;o+=1){var u=n[o-e]||0,d=t&&t[o]||0;s[o+1]=n[o]+256-(u+d>>>1)&255}return s}function RS(n,e,t){var r=n.length,s=[];s[0]=4;for(var o=0;o<r;o+=1){var u=CM(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);s[o+1]=n[o]-u+256&255}return s}function CM(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),s=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=s&&r<=o?n:s<=o?e:t}function jM(n){var e=n.map(function(t){return t.reduce(function(r,s){return r+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function By(n,e,t){var r=e*t,s=Math.floor(r/8),o=16-(r-8*s+t),u=(1<<t)-1;return GA(n,s)>>o&u}function IS(n,e,t,r){var s=t*r,o=Math.floor(s/8),u=16-(s-8*o+r),d=(1<<r)-1,f=(e&d)<<u;(function(p,m,x){if(m+1<p.byteLength)p.setUint16(m,x,!1);else{var E=x>>8&255;p.setUint8(m,E)}})(n,o,GA(n,o)&~(d<<u)&65535|f)}function GA(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function RM(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,s=n[e++],o=s>>7,u=1<<1+(7&s);n[e++],n[e++];var d=null,f=null;o&&(d=e,f=u,e+=3*u);var p=!0,m=[],x=0,E=null,w=0,A=null;for(this.width=t,this.height=r;p&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,A=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var D=n[e++];x=n[e++]|n[e++]<<8,E=n[e++],1&D||(E=null),w=D>>2&7,e++;break;case 254:for(;;){if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var C=n[e++]|n[e++]<<8,k=n[e++]|n[e++]<<8,H=n[e++]|n[e++]<<8,G=n[e++]|n[e++]<<8,V=n[e++],ce=V>>6&1,se=1<<1+(7&V),U=d,I=f,R=!1;V>>7&&(R=!0,U=e,I=se,e+=3*se);var q=e;for(e++;;){var j;if(!((j=n[e++])>=0))throw Error("Invalid block size");if(j===0)break;e+=j}m.push({x:C,y:k,width:H,height:G,has_local_palette:R,palette_offset:U,palette_size:I,data_offset:q,data_length:e-q,transparent_index:E,interlaced:!!ce,delay:x,disposal:w});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return A},this.frameInfo=function(F){if(F<0||F>=m.length)throw new Error("Frame index out of range.");return m[F]},this.decodeAndBlitFrameBGRA=function(F,M){var ne=this.frameInfo(F),Se=ne.width*ne.height,le=new Uint8Array(Se);DS(n,ne.data_offset,le,Se);var ve=ne.palette_offset,ye=ne.transparent_index;ye===null&&(ye=256);var ge=ne.width,we=t-ge,Q=ge,P=4*(ne.y*t+ne.x),Y=4*((ne.y+ne.height)*t+ne.x),re=P,fe=4*we;ne.interlaced===!0&&(fe+=4*t*7);for(var me=8,_e=0,Me=le.length;_e<Me;++_e){var Le=le[_e];if(Q===0&&(Q=ge,(re+=fe)>=Y&&(fe=4*we+4*t*(me-1),re=P+(ge+we)*(me<<1),me>>=1)),Le===ye)re+=4;else{var Z=n[ve+3*Le],ae=n[ve+3*Le+1],Te=n[ve+3*Le+2];M[re++]=Te,M[re++]=ae,M[re++]=Z,M[re++]=255}--Q}},this.decodeAndBlitFrameRGBA=function(F,M){var ne=this.frameInfo(F),Se=ne.width*ne.height,le=new Uint8Array(Se);DS(n,ne.data_offset,le,Se);var ve=ne.palette_offset,ye=ne.transparent_index;ye===null&&(ye=256);var ge=ne.width,we=t-ge,Q=ge,P=4*(ne.y*t+ne.x),Y=4*((ne.y+ne.height)*t+ne.x),re=P,fe=4*we;ne.interlaced===!0&&(fe+=4*t*7);for(var me=8,_e=0,Me=le.length;_e<Me;++_e){var Le=le[_e];if(Q===0&&(Q=ge,(re+=fe)>=Y&&(fe=4*we+4*t*(me-1),re=P+(ge+we)*(me<<1),me>>=1)),Le===ye)re+=4;else{var Z=n[ve+3*Le],ae=n[ve+3*Le+1],Te=n[ve+3*Le+2];M[re++]=Z,M[re++]=ae,M[re++]=Te,M[re++]=255}--Q}}}function DS(n,e,t,r){for(var s=n[e++],o=1<<s,u=o+1,d=u+1,f=s+1,p=(1<<f)-1,m=0,x=0,E=0,w=n[e++],A=new Int32Array(4096),D=null;;){for(;m<16&&w!==0;)x|=n[e++]<<m,m+=8,w===1?w=n[e++]:--w;if(m<f)break;var C=x&p;if(x>>=f,m-=f,C!==o){if(C===u)break;for(var k=C<d?C:D,H=0,G=k;G>o;)G=A[G]>>8,++H;var V=G;if(E+H+(k!==C?1:0)>r)return void gr.log("Warning, gif stream longer than expected.");t[E++]=V;var ce=E+=H;for(k!==C&&(t[E++]=V),G=k;H--;)G=A[G],t[--ce]=255&G,G>>=8;D!==null&&d<4096&&(A[d++]=D<<8|V,d>=p+1&&f<12&&(++f,p=p<<1|1)),D=C}else d=u+1,p=(1<<(f=s+1))-1,D=null}return E!==r&&gr.log("Warning, gif stream shorter than expected."),t}function Vy(n){var e,t,r,s,o,u=Math.floor,d=new Array(64),f=new Array(64),p=new Array(64),m=new Array(64),x=new Array(65535),E=new Array(65535),w=new Array(64),A=new Array(64),D=[],C=0,k=7,H=new Array(64),G=new Array(64),V=new Array(64),ce=new Array(256),se=new Array(2048),U=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(P,Y){for(var re=0,fe=0,me=new Array,_e=1;_e<=16;_e++){for(var Me=1;Me<=P[_e];Me++)me[Y[fe]]=[],me[Y[fe]][0]=re,me[Y[fe]][1]=_e,fe++,re++;re*=2}return me}function ve(P){for(var Y=P[0],re=P[1]-1;re>=0;)Y&1<<re&&(C|=1<<k),re--,--k<0&&(C==255?(ye(255),ye(0)):ye(C),k=7,C=0)}function ye(P){D.push(P)}function ge(P){ye(P>>8&255),ye(255&P)}function we(P,Y,re,fe,me){for(var _e,Me=me[0],Le=me[240],Z=(function(Ce,Ze){var et,xt,vt,Ue,ot,dt,gt,De,We,pt,mt=0;for(We=0;We<8;++We){et=Ce[mt],xt=Ce[mt+1],vt=Ce[mt+2],Ue=Ce[mt+3],ot=Ce[mt+4],dt=Ce[mt+5],gt=Ce[mt+6];var ft=et+(De=Ce[mt+7]),ct=et-De,bt=xt+gt,wt=xt-gt,qt=vt+dt,Tt=vt-dt,dn=Ue+ot,Bt=Ue-ot,Ot=ft+dn,jn=ft-dn,Dt=bt+qt,Lt=bt-qt;Ce[mt]=Ot+Dt,Ce[mt+4]=Ot-Dt;var cn=.707106781*(Lt+jn);Ce[mt+2]=jn+cn,Ce[mt+6]=jn-cn;var wi=.382683433*((Ot=Bt+Tt)-(Lt=wt+ct)),ui=.5411961*Ot+wi,zs=1.306562965*Lt+wi,Zr=.707106781*(Dt=Tt+wt),Ft=ct+Zr,pa=ct-Zr;Ce[mt+5]=pa+ui,Ce[mt+3]=pa-ui,Ce[mt+1]=Ft+zs,Ce[mt+7]=Ft-zs,mt+=8}for(mt=0,We=0;We<8;++We){et=Ce[mt],xt=Ce[mt+8],vt=Ce[mt+16],Ue=Ce[mt+24],ot=Ce[mt+32],dt=Ce[mt+40],gt=Ce[mt+48];var Xi=et+(De=Ce[mt+56]),Pi=et-De,Mi=xt+gt,Yn=xt-gt,rr=vt+dt,Br=vt-dt,xi=Ue+ot,di=Ue-ot,Un=Xi+xi,Qn=Xi-xi,Vr=Mi+rr,Oi=Mi-rr;Ce[mt]=Un+Vr,Ce[mt+32]=Un-Vr;var fs=.707106781*(Oi+Qn);Ce[mt+16]=Qn+fs,Ce[mt+48]=Qn-fs;var Ia=.382683433*((Un=di+Br)-(Oi=Yn+Pi)),js=.5411961*Un+Ia,Fi=1.306562965*Oi+Ia,ma=.707106781*(Vr=Br+Yn),Qi=Pi+ma,Si=Pi-ma;Ce[mt+40]=Si+js,Ce[mt+24]=Si-js,Ce[mt+8]=Qi+Fi,Ce[mt+56]=Qi-Fi,mt++}for(We=0;We<64;++We)pt=Ce[We]*Ze[We],w[We]=pt>0?pt+.5|0:pt-.5|0;return w})(P,Y),ae=0;ae<64;++ae)A[U[ae]]=Z[ae];var Te=A[0]-re;re=A[0],Te==0?ve(fe[0]):(ve(fe[E[_e=32767+Te]]),ve(x[_e]));for(var Ee=63;Ee>0&&A[Ee]==0;)Ee--;if(Ee==0)return ve(Me),re;for(var pe,z=1;z<=Ee;){for(var Ie=z;A[z]==0&&z<=Ee;)++z;var Be=z-Ie;if(Be>=16){pe=Be>>4;for(var $e=1;$e<=pe;++$e)ve(Le);Be&=15}_e=32767+A[z],ve(me[(Be<<4)+E[_e]]),ve(x[_e]),z++}return Ee!=63&&ve(Me),re}function Q(P){P=Math.min(Math.max(P,1),100),o!=P&&((function(Y){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],fe=0;fe<64;fe++){var me=u((re[fe]*Y+50)/100);me=Math.min(Math.max(me,1),255),d[U[fe]]=me}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Me=0;Me<64;Me++){var Le=u((_e[Me]*Y+50)/100);Le=Math.min(Math.max(Le,1),255),f[U[Me]]=Le}for(var Z=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ae=0,Te=0;Te<8;Te++)for(var Ee=0;Ee<8;Ee++)p[ae]=1/(d[U[ae]]*Z[Te]*Z[Ee]*8),m[ae]=1/(f[U[ae]]*Z[Te]*Z[Ee]*8),ae++})(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),o=P)}this.encode=function(P,Y){Y&&Q(Y),D=new Array,C=0,k=7,ge(65496),ge(65504),ge(16),ye(74),ye(70),ye(73),ye(70),ye(0),ye(1),ye(1),ye(0),ge(1),ge(1),ye(0),ye(0),(function(){ge(65499),ge(132),ye(0);for(var xt=0;xt<64;xt++)ye(d[xt]);ye(1);for(var vt=0;vt<64;vt++)ye(f[vt])})(),(function(xt,vt){ge(65472),ge(17),ye(8),ge(vt),ge(xt),ye(3),ye(1),ye(17),ye(0),ye(2),ye(17),ye(1),ye(3),ye(17),ye(1)})(P.width,P.height),(function(){ge(65476),ge(418),ye(0);for(var xt=0;xt<16;xt++)ye(I[xt+1]);for(var vt=0;vt<=11;vt++)ye(R[vt]);ye(16);for(var Ue=0;Ue<16;Ue++)ye(q[Ue+1]);for(var ot=0;ot<=161;ot++)ye(j[ot]);ye(1);for(var dt=0;dt<16;dt++)ye(F[dt+1]);for(var gt=0;gt<=11;gt++)ye(M[gt]);ye(17);for(var De=0;De<16;De++)ye(ne[De+1]);for(var We=0;We<=161;We++)ye(Se[We])})(),ge(65498),ge(12),ye(3),ye(1),ye(0),ye(2),ye(17),ye(3),ye(17),ye(0),ye(63),ye(0);var re=0,fe=0,me=0;C=0,k=7,this.encode.displayName="_encode_";for(var _e,Me,Le,Z,ae,Te,Ee,pe,z,Ie=P.data,Be=P.width,$e=P.height,Ce=4*Be,Ze=0;Ze<$e;){for(_e=0;_e<Ce;){for(ae=Ce*Ze+_e,Ee=-1,pe=0,z=0;z<64;z++)Te=ae+(pe=z>>3)*Ce+(Ee=4*(7&z)),Ze+pe>=$e&&(Te-=Ce*(Ze+1+pe-$e)),_e+Ee>=Ce&&(Te-=_e+Ee-Ce+4),Me=Ie[Te++],Le=Ie[Te++],Z=Ie[Te++],H[z]=(se[Me]+se[Le+256|0]+se[Z+512|0]>>16)-128,G[z]=(se[Me+768|0]+se[Le+1024|0]+se[Z+1280|0]>>16)-128,V[z]=(se[Me+1280|0]+se[Le+1536|0]+se[Z+1792|0]>>16)-128;re=we(H,p,re,e,r),fe=we(G,m,fe,t,s),me=we(V,m,me,t,s),_e+=32}Ze+=8}if(k>=0){var et=[];et[1]=k+1,et[0]=(1<<k+1)-1,ve(et)}return ge(65497),new Uint8Array(D)},n=n||50,(function(){for(var P=String.fromCharCode,Y=0;Y<256;Y++)ce[Y]=P(Y)})(),e=le(I,R),t=le(F,M),r=le(q,j),s=le(ne,Se),(function(){for(var P=1,Y=2,re=1;re<=15;re++){for(var fe=P;fe<Y;fe++)E[32767+fe]=re,x[32767+fe]=[],x[32767+fe][1]=re,x[32767+fe][0]=fe;for(var me=-(Y-1);me<=-P;me++)E[32767+me]=re,x[32767+me]=[],x[32767+me][1]=re,x[32767+me][0]=Y-1+me;P<<=1,Y<<=1}})(),(function(){for(var P=0;P<256;P++)se[P]=19595*P,se[P+256|0]=38470*P,se[P+512|0]=7471*P+32768,se[P+768|0]=-11059*P,se[P+1024|0]=-21709*P,se[P+1280|0]=32768*P+8421375,se[P+1536|0]=-27439*P,se[P+1792|0]=-5329*P})(),Q(n)}function _o(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function kS(n){function e(R){if(!R)throw Error("assert :P")}function t(R,q,j){for(var F=0;4>F;F++)if(R[q+F]!=j.charCodeAt(F))return!0;return!1}function r(R,q,j,F,M){for(var ne=0;ne<M;ne++)R[q+ne]=j[F+ne]}function s(R,q,j,F){for(var M=0;M<F;M++)R[q+M]=j}function o(R){return new Int32Array(R)}function u(R,q){for(var j=[],F=0;F<R;F++)j.push(new q);return j}function d(R,q){var j=[];return(function F(M,ne,Se){for(var le=Se[ne],ve=0;ve<le&&(M.push(Se.length>ne+1?[]:new q),!(Se.length<ne+1));ve++)F(M[ve],ne+1,Se)})(j,0,R),j}var f=function(){var R=this;function q(g,b){for(var N=1<<b-1>>>0;g&N;)N>>>=1;return N?(g&N-1)+N:g}function j(g,b,N,L,W){e(!(L%N));do g[b+(L-=N)]=W;while(0<L)}function F(g,b,N,L,W){if(e(2328>=W),512>=W)var X=o(512);else if((X=o(W))==null)return 0;return(function(J,te,oe,he,Ne,Ve){var ue,je,Oe=te,Xe=1<<oe,Fe=o(16),Ke=o(16);for(e(Ne!=0),e(he!=null),e(J!=null),e(0<oe),je=0;je<Ne;++je){if(15<he[je])return 0;++Fe[he[je]]}if(Fe[0]==Ne)return 0;for(Ke[1]=0,ue=1;15>ue;++ue){if(Fe[ue]>1<<ue)return 0;Ke[ue+1]=Ke[ue]+Fe[ue]}for(je=0;je<Ne;++je)ue=he[je],0<he[je]&&(Ve[Ke[ue]++]=je);if(Ke[15]==1)return(he=new M).g=0,he.value=Ve[0],j(J,Oe,1,Xe,he),Xe;var tt,ut=-1,it=Xe-1,Rt=0,St=1,Zt=1,At=1<<oe;for(je=0,ue=1,Ne=2;ue<=oe;++ue,Ne<<=1){if(St+=Zt<<=1,0>(Zt-=Fe[ue]))return 0;for(;0<Fe[ue];--Fe[ue])(he=new M).g=ue,he.value=Ve[je++],j(J,Oe+Rt,Ne,At,he),Rt=q(Rt,ue)}for(ue=oe+1,Ne=2;15>=ue;++ue,Ne<<=1){if(St+=Zt<<=1,0>(Zt-=Fe[ue]))return 0;for(;0<Fe[ue];--Fe[ue]){if(he=new M,(Rt&it)!=ut){for(Oe+=At,tt=1<<(ut=ue)-oe;15>ut&&!(0>=(tt-=Fe[ut]));)++ut,tt<<=1;Xe+=At=1<<(tt=ut-oe),J[te+(ut=Rt&it)].g=tt+oe,J[te+ut].value=Oe-te-ut}he.g=ue-oe,he.value=Ve[je++],j(J,Oe+(Rt>>oe),Ne,At,he),Rt=q(Rt,ue)}}return St!=2*Ke[15]-1?0:Xe})(g,b,N,L,W,X)}function M(){this.value=this.g=0}function ne(){this.value=this.g=0}function Se(){this.G=u(5,M),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Fo,ne)}function le(g,b,N,L){e(g!=null),e(b!=null),e(2147483648>L),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=b,g.pa=N,g.Jd=b,g.Yc=N+L,g.Zc=4<=L?N+L-4+1:N,Me(g)}function ve(g,b){for(var N=0;0<b--;)N|=Z(g,128)<<b;return N}function ye(g,b){var N=ve(g,b);return Le(g)?-N:N}function ge(g,b,N,L){var W,X=0;for(e(g!=null),e(b!=null),e(4294967288>L),g.Sb=L,g.Ra=0,g.u=0,g.h=0,4<L&&(L=4),W=0;W<L;++W)X+=b[N+W]<<8*W;g.Ra=X,g.bb=L,g.oa=b,g.pa=N}function we(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Ua-8>>>0,++g.bb,g.u-=8;fe(g)&&(g.h=1,g.u=0)}function Q(g,b){if(e(0<=b),!g.h&&b<=ss){var N=re(g)&vs[b];return g.u+=b,we(g),N}return g.h=1,g.u=0}function P(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function re(g){return g.Ra>>>(g.u&Ua-1)>>>0}function fe(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Ua}function me(g,b){g.u=b,g.h=fe(g)}function _e(g){g.u>=Ba&&(e(g.u>=Ba),we(g))}function Me(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Le(g){return ve(g,1)}function Z(g,b){var N=g.Ca;0>g.b&&Me(g);var L=g.b,W=N*b>>>8,X=(g.I>>>L>W)+0;for(X?(N-=W,g.I-=W+1<<L>>>0):N=W+1,L=N,W=0;256<=L;)W+=8,L>>=8;return L=7^W+co[L],g.b-=L,g.Ca=(N<<L)-1,X}function ae(g,b,N){g[b+0]=N>>24&255,g[b+1]=N>>16&255,g[b+2]=N>>8&255,g[b+3]=255&N}function Te(g,b){return g[b+0]|g[b+1]<<8}function Ee(g,b){return Te(g,b)|g[b+2]<<16}function pe(g,b){return Te(g,b)|Te(g,b+2)<<16}function z(g,b){var N=1<<b;return e(g!=null),e(0<b),g.X=o(N),g.X==null?0:(g.Mb=32-b,g.Xa=b,1)}function Ie(g,b){e(g!=null),e(b!=null),e(g.Xa==b.Xa),r(b.X,0,g.X,0,1<<b.Xa)}function Be(){this.X=[],this.Xa=this.Mb=0}function $e(g,b,N,L){e(N!=null),e(L!=null);var W=N[0],X=L[0];return W==0&&(W=(g*X+b/2)/b),X==0&&(X=(b*W+g/2)/g),0>=W||0>=X?0:(N[0]=W,L[0]=X,1)}function Ce(g,b){return g+(1<<b)-1>>>b}function Ze(g,b){return((4278255360&g)+(4278255360&b)>>>0&4278255360)+((16711935&g)+(16711935&b)>>>0&16711935)>>>0}function et(g,b){R[b]=function(N,L,W,X,J,te,oe){var he;for(he=0;he<J;++he){var Ne=R[g](te[oe+he-1],W,X+he);te[oe+he]=Ze(N[L+he],Ne)}}}function xt(){this.ud=this.hd=this.jd=0}function vt(g,b){return((4278124286&(g^b))>>>1)+(g&b)>>>0}function Ue(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function ot(g,b){return Ue(g+(g-b+.5>>1))}function dt(g,b,N){return Math.abs(b-N)-Math.abs(g-N)}function gt(g,b,N,L,W,X,J){for(L=X[J-1],N=0;N<W;++N)X[J+N]=L=Ze(g[b+N],L)}function De(g,b,N,L,W){var X;for(X=0;X<N;++X){var J=g[b+X],te=J>>8&255,oe=16711935&(oe=(oe=16711935&J)+((te<<16)+te));L[W+X]=(4278255360&J)+oe>>>0}}function We(g,b){b.jd=255&g,b.hd=g>>8&255,b.ud=g>>16&255}function pt(g,b,N,L,W,X){var J;for(J=0;J<L;++J){var te=b[N+J],oe=te>>>8,he=te,Ne=255&(Ne=(Ne=te>>>16)+((g.jd<<24>>24)*(oe<<24>>24)>>>5));he=255&(he=(he+=(g.hd<<24>>24)*(oe<<24>>24)>>>5)+((g.ud<<24>>24)*(Ne<<24>>24)>>>5)),W[X+J]=(4278255360&te)+(Ne<<16)+he}}function mt(g,b,N,L,W){R[b]=function(X,J,te,oe,he,Ne,Ve,ue,je){for(oe=Ve;oe<ue;++oe)for(Ve=0;Ve<je;++Ve)he[Ne++]=W(te[L(X[J++])])},R[g]=function(X,J,te,oe,he,Ne,Ve){var ue=8>>X.b,je=X.Ea,Oe=X.K[0],Xe=X.w;if(8>ue)for(X=(1<<X.b)-1,Xe=(1<<ue)-1;J<te;++J){var Fe,Ke=0;for(Fe=0;Fe<je;++Fe)Fe&X||(Ke=L(oe[he++])),Ne[Ve++]=W(Oe[Ke&Xe]),Ke>>=ue}else R["VP8LMapColor"+N](oe,he,Oe,Xe,Ne,Ve,J,te,je)}}function ft(g,b,N,L,W){for(N=b+N;b<N;){var X=g[b++];L[W++]=X>>16&255,L[W++]=X>>8&255,L[W++]=255&X}}function ct(g,b,N,L,W){for(N=b+N;b<N;){var X=g[b++];L[W++]=X>>16&255,L[W++]=X>>8&255,L[W++]=255&X,L[W++]=X>>24&255}}function bt(g,b,N,L,W){for(N=b+N;b<N;){var X=(J=g[b++])>>16&240|J>>12&15,J=240&J|J>>28&15;L[W++]=X,L[W++]=J}}function wt(g,b,N,L,W){for(N=b+N;b<N;){var X=(J=g[b++])>>16&248|J>>13&7,J=J>>5&224|J>>3&31;L[W++]=X,L[W++]=J}}function qt(g,b,N,L,W){for(N=b+N;b<N;){var X=g[b++];L[W++]=255&X,L[W++]=X>>8&255,L[W++]=X>>16&255}}function Tt(g,b,N,L,W,X){if(X==0)for(N=b+N;b<N;)ae(L,((X=g[b++])[0]>>24|X[1]>>8&65280|X[2]<<8&16711680|X[3]<<24)>>>0),W+=32;else r(L,W,g,b,N)}function dn(g,b){R[b][0]=R[g+"0"],R[b][1]=R[g+"1"],R[b][2]=R[g+"2"],R[b][3]=R[g+"3"],R[b][4]=R[g+"4"],R[b][5]=R[g+"5"],R[b][6]=R[g+"6"],R[b][7]=R[g+"7"],R[b][8]=R[g+"8"],R[b][9]=R[g+"9"],R[b][10]=R[g+"10"],R[b][11]=R[g+"11"],R[b][12]=R[g+"12"],R[b][13]=R[g+"13"],R[b][14]=R[g+"0"],R[b][15]=R[g+"0"]}function Bt(g){return g==Su||g==od||g==mc||g==ld}function Ot(){this.eb=[],this.size=this.A=this.fb=0}function jn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Dt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ot,this.f.kb=new jn,this.sd=null}function Lt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function cn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wi(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function ui(g,b){var N=g.T,L=b.ba.f.RGBA,W=L.eb,X=L.fb+g.ka*L.A,J=ji[b.ba.S],te=g.y,oe=g.O,he=g.f,Ne=g.N,Ve=g.ea,ue=g.W,je=b.cc,Oe=b.dc,Xe=b.Mc,Fe=b.Nc,Ke=g.ka,tt=g.ka+g.T,ut=g.U,it=ut+1>>1;for(Ke==0?J(te,oe,null,null,he,Ne,Ve,ue,he,Ne,Ve,ue,W,X,null,null,ut):(J(b.ec,b.fc,te,oe,je,Oe,Xe,Fe,he,Ne,Ve,ue,W,X-L.A,W,X,ut),++N);Ke+2<tt;Ke+=2)je=he,Oe=Ne,Xe=Ve,Fe=ue,Ne+=g.Rc,ue+=g.Rc,X+=2*L.A,J(te,(oe+=2*g.fa)-g.fa,te,oe,je,Oe,Xe,Fe,he,Ne,Ve,ue,W,X-L.A,W,X,ut);return oe+=g.fa,g.j+tt<g.o?(r(b.ec,b.fc,te,oe,ut),r(b.cc,b.dc,he,Ne,it),r(b.Mc,b.Nc,Ve,ue,it),N--):1&tt||J(te,oe,null,null,he,Ne,Ve,ue,he,Ne,Ve,ue,W,X+L.A,null,null,ut),N}function zs(g,b,N){var L=g.F,W=[g.J];if(L!=null){var X=g.U,J=b.ba.S,te=J==xu||J==mc;b=b.ba.f.RGBA;var oe=[0],he=g.ka;oe[0]=g.T,g.Kb&&(he==0?--oe[0]:(--he,W[0]-=g.width),g.j+g.ka+g.T==g.o&&(oe[0]=g.o-g.j-he));var Ne=b.eb;he=b.fb+he*b.A,g=yu(L,W[0],g.width,X,oe,Ne,he+(te?0:3),b.A),e(N==oe),g&&Bt(J)&&El(Ne,he,te,X,oe,b.A)}return 0}function Zr(g){var b=g.ma,N=b.ba.S,L=11>N,W=N==Hi||N==Xs||N==xu||N==pc||N==12||Bt(N);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!lo(b.Oa,g,W?11:12))return 0;if(W&&Bt(N)&&Jt(),g.da)alert("todo:use_scaling");else{if(L){if(b.Ib=wi,g.Kb){if(N=g.U+1>>1,b.memory=o(g.U+2*N),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+g.U,b.Mc=b.cc,b.Nc=b.dc+N,b.Ib=ui,Jt()}}else alert("todo:EmitYUV");W&&(b.Jb=zs,L&&He())}if(L&&!Go){for(g=0;256>g;++g)Ri[g]=89858*(g-128)+vc>>na,Fg[g]=-22014*(g-128)+vc,op[g]=-45773*(g-128),fd[g]=113618*(g-128)+vc>>na;for(g=Cl;g<Ho;++g)b=76283*(g-16)+vc>>na,Ug[g-Cl]=Zi(b,255),Bg[g-Cl]=Zi(b+8>>4,15);Go=1}return 1}function Ft(g){var b=g.ma,N=g.U,L=g.T;return e(!(1&g.ka)),0>=N||0>=L?0:(N=b.Ib(g,b),b.Jb!=null&&b.Jb(g,b,N),b.Dc+=N,1)}function pa(g){g.ma.memory=null}function Xi(g,b,N,L){return Q(g,8)!=47?0:(b[0]=Q(g,14)+1,N[0]=Q(g,14)+1,L[0]=Q(g,1),Q(g,3)!=0?0:!g.h)}function Pi(g,b){if(4>g)return g+1;var N=g-2>>1;return(2+(1&g)<<N)+Q(b,N)+1}function Mi(g,b){return 120<b?b-120:1<=(N=((N=Js[b-1])>>4)*g+(8-(15&N)))?N:1;var N}function Yn(g,b,N){var L=re(N),W=g[b+=255&L].g-8;return 0<W&&(me(N,N.u+8),L=re(N),b+=g[b].value,b+=L&(1<<W)-1),me(N,N.u+g[b].g),g[b].value}function rr(g,b,N){return N.g+=g.g,N.value+=g.value<<b>>>0,e(8>=N.g),g.g}function Br(g,b,N){var L=g.xc;return e((b=L==0?0:g.vc[g.md*(N>>L)+(b>>L)])<g.Wb),g.Ya[b]}function xi(g,b,N,L){var W=g.ab,X=g.c*b,J=g.C;b=J+b;var te=N,oe=L;for(L=g.Ta,N=g.Ua;0<W--;){var he=g.gc[W],Ne=J,Ve=b,ue=te,je=oe,Oe=(oe=L,te=N,he.Ea);switch(e(Ne<Ve),e(Ve<=he.nc),he.hc){case 2:Lr(ue,je,(Ve-Ne)*Oe,oe,te);break;case 0:var Xe=Ne,Fe=Ve,Ke=oe,tt=te,ut=(At=he).Ea;Xe==0&&(uc(ue,je,null,null,1,Ke,tt),gt(ue,je+1,0,0,ut-1,Ke,tt+1),je+=ut,tt+=ut,++Xe);for(var it=1<<At.b,Rt=it-1,St=Ce(ut,At.b),Zt=At.K,At=At.w+(Xe>>At.b)*St;Xe<Fe;){var yn=Zt,pr=At,nn=1;for(dc(ue,je,Ke,tt-ut,1,Ke,tt);nn<ut;){var _t=(nn&~Rt)+it;_t>ut&&(_t=ut),(0,uo[yn[pr++]>>8&15])(ue,je+ +nn,Ke,tt+nn-ut,_t-nn,Ke,tt+nn),nn=_t}je+=ut,tt+=ut,++Xe&Rt||(At+=St)}Ve!=he.nc&&r(oe,te-Oe,oe,te+(Ve-Ne-1)*Oe,Oe);break;case 1:for(Oe=ue,Fe=je,ut=(ue=he.Ea)-(tt=ue&~(Ke=(je=1<<he.b)-1)),Xe=Ce(ue,he.b),it=he.K,he=he.w+(Ne>>he.b)*Xe;Ne<Ve;){for(Rt=it,St=he,Zt=new xt,At=Fe+tt,yn=Fe+ue;Fe<At;)We(Rt[St++],Zt),hc(Zt,Oe,Fe,je,oe,te),Fe+=je,te+=je;Fe<yn&&(We(Rt[St++],Zt),hc(Zt,Oe,Fe,ut,oe,te),Fe+=ut,te+=ut),++Ne&Ke||(he+=Xe)}break;case 3:if(ue==oe&&je==te&&0<he.b){for(Fe=oe,ue=Oe=te+(Ve-Ne)*Oe-(tt=(Ve-Ne)*Ce(he.Ea,he.b)),je=oe,Ke=te,Xe=[],tt=(ut=tt)-1;0<=tt;--tt)Xe[tt]=je[Ke+tt];for(tt=ut-1;0<=tt;--tt)Fe[ue+tt]=Xe[tt];nd(he,Ne,Ve,oe,Oe,oe,te)}else nd(he,Ne,Ve,ue,je,oe,te)}te=L,oe=N}oe!=N&&r(L,N,te,oe,X)}function di(g,b){var N=g.V,L=g.Ba+g.c*g.C,W=b-g.C;if(e(b<=g.l.o),e(16>=W),0<W){var X=g.l,J=g.Ta,te=g.Ua,oe=X.width;if(xi(g,W,N,L),W=te=[te],e((N=g.C)<(L=b)),e(X.v<X.va),L>X.o&&(L=X.o),N<X.j){var he=X.j-N;N=X.j,W[0]+=he*oe}if(N>=L?N=0:(W[0]+=4*X.v,X.ka=N-X.j,X.U=X.va-X.v,X.T=L-N,N=1),N){if(te=te[0],11>(N=g.ca).S){var Ne=N.f.RGBA,Ve=(L=N.S,W=X.U,X=X.T,he=Ne.eb,Ne.A),ue=X;for(Ne=Ne.fb+g.Ma*Ne.A;0<ue--;){var je=J,Oe=te,Xe=W,Fe=he,Ke=Ne;switch(L){case sd:fc(je,Oe,Xe,Fe,Ke);break;case Hi:ho(je,Oe,Xe,Fe,Ke);break;case Su:ho(je,Oe,Xe,Fe,Ke),El(Fe,Ke,0,Xe,1,0);break;case ad:Sl(je,Oe,Xe,Fe,Ke);break;case Xs:Tt(je,Oe,Xe,Fe,Ke,1);break;case od:Tt(je,Oe,Xe,Fe,Ke,1),El(Fe,Ke,0,Xe,1,0);break;case xu:Tt(je,Oe,Xe,Fe,Ke,0);break;case mc:Tt(je,Oe,Xe,Fe,Ke,0),El(Fe,Ke,1,Xe,1,0);break;case pc:fo(je,Oe,Xe,Fe,Ke);break;case ld:fo(je,Oe,Xe,Fe,Ke),Ks(Fe,Ke,Xe,1,0);break;case Uo:qa(je,Oe,Xe,Fe,Ke);break;default:e(0)}te+=oe,Ne+=Ve}g.Ma+=X}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=N.height)}}g.C=b,e(g.C<=g.i)}function Un(g){var b;if(0<g.ua)return 0;for(b=0;b<g.Wb;++b){var N=g.Ya[b].G,L=g.Ya[b].H;if(0<N[1][L[1]+0].g||0<N[2][L[2]+0].g||0<N[3][L[3]+0].g)return 0}return 1}function Qn(g,b,N,L,W,X){if(g.Z!=0){var J=g.qd,te=g.rd;for(e(go[g.Z]!=null);b<N;++b)go[g.Z](J,te,L,W,L,W,X),J=L,te=W,W+=X;g.qd=J,g.rd=te}}function Vr(g,b){var N=g.l.ma,L=N.Z==0||N.Z==1?g.l.j:g.C;if(L=g.C<L?L:g.C,e(b<=g.l.o),b>L){var W=g.l.width,X=N.ca,J=N.tb+W*L,te=g.V,oe=g.Ba+g.c*L,he=g.gc;e(g.ab==1),e(he[0].hc==3),za(he[0],L,b,te,oe,X,J),Qn(N,L,b,X,J,W)}g.C=g.Ma=b}function Oi(g,b,N,L,W,X,J){var te=g.$/L,oe=g.$%L,he=g.m,Ne=g.s,Ve=N+g.$,ue=Ve;W=N+L*W;var je=N+L*X,Oe=280+Ne.ua,Xe=g.Pb?te:16777216,Fe=0<Ne.ua?Ne.Wa:null,Ke=Ne.wc,tt=Ve<je?Br(Ne,oe,te):null;e(g.C<X),e(je<=W);var ut=!1;e:for(;;){for(;ut||Ve<je;){var it=0;if(te>=Xe){var Rt=Ve-N;e((Xe=g).Pb),Xe.wd=Xe.m,Xe.xd=Rt,0<Xe.s.ua&&Ie(Xe.s.Wa,Xe.s.vb),Xe=te+Bo}if(oe&Ke||(tt=Br(Ne,oe,te)),e(tt!=null),tt.Qb&&(b[Ve]=tt.qb,ut=!0),!ut)if(_e(he),tt.jc){it=he,Rt=b;var St=Ve,Zt=tt.pd[re(it)&Fo-1];e(tt.jc),256>Zt.g?(me(it,it.u+Zt.g),Rt[St]=Zt.value,it=0):(me(it,it.u+Zt.g-256),e(256<=Zt.value),it=Zt.value),it==0&&(ut=!0)}else it=Yn(tt.G[0],tt.H[0],he);if(he.h)break;if(ut||256>it){if(!ut)if(tt.nd)b[Ve]=(tt.qb|it<<8)>>>0;else{if(_e(he),ut=Yn(tt.G[1],tt.H[1],he),_e(he),Rt=Yn(tt.G[2],tt.H[2],he),St=Yn(tt.G[3],tt.H[3],he),he.h)break;b[Ve]=(St<<24|ut<<16|it<<8|Rt)>>>0}if(ut=!1,++Ve,++oe>=L&&(oe=0,++te,J!=null&&te<=X&&!(te%16)&&J(g,te),Fe!=null))for(;ue<Ve;)it=b[ue++],Fe.X[(506832829*it&4294967295)>>>Fe.Mb]=it}else if(280>it){if(it=Pi(it-256,he),Rt=Yn(tt.G[4],tt.H[4],he),_e(he),Rt=Mi(L,Rt=Pi(Rt,he)),he.h)break;if(Ve-N<Rt||W-Ve<it)break e;for(St=0;St<it;++St)b[Ve+St]=b[Ve+St-Rt];for(Ve+=it,oe+=it;oe>=L;)oe-=L,++te,J!=null&&te<=X&&!(te%16)&&J(g,te);if(e(Ve<=W),oe&Ke&&(tt=Br(Ne,oe,te)),Fe!=null)for(;ue<Ve;)it=b[ue++],Fe.X[(506832829*it&4294967295)>>>Fe.Mb]=it}else{if(!(it<Oe))break e;for(ut=it-280,e(Fe!=null);ue<Ve;)it=b[ue++],Fe.X[(506832829*it&4294967295)>>>Fe.Mb]=it;it=Ve,e(!(ut>>>(Rt=Fe).Xa)),b[it]=Rt.X[ut],ut=!0}ut||e(he.h==fe(he))}if(g.Pb&&he.h&&Ve<W)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&Ie(g.s.vb,g.s.Wa);else{if(he.h)break e;J?.(g,te>X?X:te),g.a=0,g.$=Ve-N}return 1}return g.a=3,0}function fs(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var b=g.Wa;b!=null&&(b.X=null),g.vb=null,e(g!=null)}function Ia(){var g=new Ht;return g==null?null:(g.a=0,g.xb=Eh,dn("Predictor","VP8LPredictors"),dn("Predictor","VP8LPredictors_C"),dn("PredictorAdd","VP8LPredictorsAdd"),dn("PredictorAdd","VP8LPredictorsAdd_C"),Lr=De,hc=pt,fc=ft,ho=ct,fo=bt,qa=wt,Sl=qt,R.VP8LMapColor32b=Va,R.VP8LMapColor8b=Ai,g)}function js(g,b,N,L,W){var X=1,J=[g],te=[b],oe=L.m,he=L.s,Ne=null,Ve=0;e:for(;;){if(N)for(;X&&Q(oe,1);){var ue=J,je=te,Oe=L,Xe=1,Fe=Oe.m,Ke=Oe.gc[Oe.ab],tt=Q(Fe,2);if(Oe.Oc&1<<tt)X=0;else{switch(Oe.Oc|=1<<tt,Ke.hc=tt,Ke.Ea=ue[0],Ke.nc=je[0],Ke.K=[null],++Oe.ab,e(4>=Oe.ab),tt){case 0:case 1:Ke.b=Q(Fe,3)+2,Xe=js(Ce(Ke.Ea,Ke.b),Ce(Ke.nc,Ke.b),0,Oe,Ke.K),Ke.K=Ke.K[0];break;case 3:var ut,it=Q(Fe,8)+1,Rt=16<it?0:4<it?1:2<it?2:3;if(ue[0]=Ce(Ke.Ea,Rt),Ke.b=Rt,ut=Xe=js(it,1,0,Oe,Ke.K)){var St,Zt=it,At=Ke,yn=1<<(8>>At.b),pr=o(yn);if(pr==null)ut=0;else{var nn=At.K[0],_t=At.w;for(pr[0]=At.K[0][0],St=1;St<1*Zt;++St)pr[St]=Ze(nn[_t+St],pr[St-1]);for(;St<4*yn;++St)pr[St]=0;At.K[0]=null,At.K[0]=pr,ut=1}}Xe=ut;break;case 2:break;default:e(0)}X=Xe}}if(J=J[0],te=te[0],X&&Q(oe,1)&&!(X=1<=(Ve=Q(oe,4))&&11>=Ve)){L.a=3;break e}var yt;if(yt=X)t:{var vr,Yt,ln,Hn=L,ni=J,Ii=te,or=Ve,qr=N,Gi=Hn.m,Hr=Hn.s,fn=[null],Dn=1,br=0,On=Zs[or];n:for(;;){if(qr&&Q(Gi,1)){var ri=Q(Gi,3)+2,wr=Ce(ni,ri),kn=Ce(Ii,ri),Or=wr*kn;if(!js(wr,kn,0,Hn,fn))break n;for(fn=fn[0],Hr.xc=ri,vr=0;vr<Or;++vr){var Gn=fn[vr]>>8&65535;fn[vr]=Gn,Gn>=Dn&&(Dn=Gn+1)}}if(Gi.h)break n;for(Yt=0;5>Yt;++Yt){var Gr=Al[Yt];!Yt&&0<or&&(Gr+=1<<or),br<Gr&&(br=Gr)}var $r=u(Dn*On,M),Zn=Dn,In=u(Zn,Se);if(In==null)var $i=null;else e(65536>=Zn),$i=In;var Cr=o(br);if($i==null||Cr==null||$r==null){Hn.a=1;break n}var zt=$r;for(vr=ln=0;vr<Dn;++vr){var Gt=$i[vr],Ln=Gt.G,bs=Gt.H,ra=0,os=1,Wr=0;for(Yt=0;5>Yt;++Yt){Gr=Al[Yt],Ln[Yt]=zt,bs[Yt]=ln,!Yt&&0<or&&(Gr+=1<<or);i:{var $o,Wo=Gr,md=Hn,lr=Cr,Ah=zt,Th=ln,gd=0,yo=md.m,Vg=Q(yo,1);if(s(lr,0,0,Wo),Vg){var Ch=Q(yo,1)+1,jh=Q(yo,1),yd=Q(yo,jh==0?1:8);lr[yd]=1,Ch==2&&(lr[yd=Q(yo,8)]=1);var mi=1}else{var jr=o(19),Au=Q(yo,4)+4;if(19<Au){md.a=3;var Yo=0;break i}for($o=0;$o<Au;++$o)jr[_u[$o]]=Q(yo,3);var wc=void 0,jl=void 0,$a=md,vd=jr,xc=Wo,bd=lr,wd=0,vo=$a.m,Rh=8,Ih=u(128,M);r:for(;F(Ih,0,7,vd,19);){if(Q(vo,1)){var lp=2+2*Q(vo,3);if((wc=2+Q(vo,lp))>xc)break r}else wc=xc;for(jl=0;jl<xc&&wc--;){_e(vo);var Dh=Ih[0+(127&re(vo))];me(vo,vo.u+Dh.g);var Ko=Dh.value;if(16>Ko)bd[jl++]=Ko,Ko!=0&&(Rh=Ko);else{var cp=Ko==16,up=Ko-16,dp=gc[up],kh=Q(vo,Qs[up])+dp;if(jl+kh>xc)break r;for(var hp=cp?Rh:0;0<kh--;)bd[jl++]=hp}}wd=1;break r}wd||($a.a=3),mi=wd}(mi=mi&&!yo.h)&&(gd=F(Ah,Th,8,lr,Wo)),mi&&gd!=0?Yo=gd:(md.a=3,Yo=0)}if(Yo==0)break n;if(os&&cd[Yt]==1&&(os=zt[ln].g==0),ra+=zt[ln].g,ln+=Yo,3>=Yt){var Rl,xd=Cr[0];for(Rl=1;Rl<Gr;++Rl)Cr[Rl]>xd&&(xd=Cr[Rl]);Wr+=xd}}if(Gt.nd=os,Gt.Qb=0,os&&(Gt.qb=(Ln[3][bs[3]+0].value<<24|Ln[1][bs[1]+0].value<<16|Ln[2][bs[2]+0].value)>>>0,ra==0&&256>Ln[0][bs[0]+0].value&&(Gt.Qb=1,Gt.qb+=Ln[0][bs[0]+0].value<<8)),Gt.jc=!Gt.Qb&&6>Wr,Gt.jc){var Tu,Wa=Gt;for(Tu=0;Tu<Fo;++Tu){var bo=Tu,wo=Wa.pd[bo],Sd=Wa.G[0][Wa.H[0]+bo];256<=Sd.value?(wo.g=Sd.g+256,wo.value=Sd.value):(wo.g=0,wo.value=0,bo>>=rr(Sd,8,wo),bo>>=rr(Wa.G[1][Wa.H[1]+bo],16,wo),bo>>=rr(Wa.G[2][Wa.H[2]+bo],0,wo),rr(Wa.G[3][Wa.H[3]+bo],24,wo))}}}Hr.vc=fn,Hr.Wb=Dn,Hr.Ya=$i,Hr.yc=$r,yt=1;break t}yt=0}if(!(X=yt)){L.a=3;break e}if(0<Ve){if(he.ua=1<<Ve,!z(he.Wa,Ve)){L.a=1,X=0;break e}}else he.ua=0;var _d=L,Il=J,fp=te,Sc=_d.s,_c=Sc.xc;if(_d.c=Il,_d.i=fp,Sc.md=Ce(Il,_c),Sc.wc=_c==0?-1:(1<<_c)-1,N){L.xb=Vo;break e}if((Ne=o(J*te))==null){L.a=1,X=0;break e}X=(X=Oi(L,Ne,0,J,te,te,null))&&!oe.h;break e}return X?(W!=null?W[0]=Ne:(e(Ne==null),e(N)),L.$=0,N||fs(he)):fs(he),X}function Fi(g,b){var N=g.c*g.i,L=N+b+16*b;return e(g.c<=b),g.V=o(L),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+N+b,1)}function ma(g,b){var N=g.C,L=b-N,W=g.V,X=g.Ba+g.c*N;for(e(b<=g.l.o);0<L;){var J=16<L?16:L,te=g.l.ma,oe=g.l.width,he=oe*J,Ne=te.ca,Ve=te.tb+oe*N,ue=g.Ta,je=g.Ua;xi(g,J,W,X),Os(ue,je,Ne,Ve,he),Qn(te,N,N+J,Ne,Ve,oe),L-=J,W+=J*g.c,N+=J}e(N==b),g.C=g.Ma=b}function Qi(){this.ub=this.yd=this.td=this.Rb=0}function Si(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ji(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function ps(){this.Yb=(function(){var g=[];return(function b(N,L,W){for(var X=W[L],J=0;J<X&&(N.push(W.length>L+1?[]:0),!(W.length<L+1));J++)b(N[J],L+1,W)})(g,0,[3,11]),g})()}function yr(){this.jb=o(3),this.Wc=d([4,8],ps),this.Xc=d([4,17],ps)}function Ro(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ui(){this.ld=this.La=this.dd=this.tc=0}function ms(){this.Na=this.la=0}function Rs(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function to(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Io(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ui),this.Y=0,this.ya=Array(new to),this.aa=0,this.l=new hi}function Do(){this.y=o(16),this.f=o(8),this.ea=o(8)}function ml(){this.cb=this.a=0,this.sc="",this.m=new P,this.Od=new Qi,this.Kc=new Si,this.ed=new Ro,this.Qa=new Ji,this.Ic=this.$c=this.Aa=0,this.D=new Io,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,P),this.ia=0,this.pb=u(4,Rs),this.Pa=new yr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Do),this.Hd=0,this.rb=Array(new ms),this.sb=0,this.wa=Array(new Ui),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new to),this.L=this.aa=0,this.gd=d([4,2],Ui),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zi(g,b){return 0>g?0:g>b?b:g}function hi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Nr(){var g=new ml;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,Fs||(Fs=Sn)),g}function pn(g,b,N){return g.a==0&&(g.a=b,g.sc=N,g.cb=0),0}function ga(g,b,N){return 3<=N&&g[b+0]==157&&g[b+1]==1&&g[b+2]==42}function gs(g,b){if(g==null)return 0;if(g.a=0,g.sc="OK",b==null)return pn(g,2,"null VP8Io passed to VP8GetHeaders()");var N=b.data,L=b.w,W=b.ha;if(4>W)return pn(g,7,"Truncated header.");var X=N[L+0]|N[L+1]<<8|N[L+2]<<16,J=g.Od;if(J.Rb=!(1&X),J.td=X>>1&7,J.yd=X>>4&1,J.ub=X>>5,3<J.td)return pn(g,3,"Incorrect keyframe parameters.");if(!J.yd)return pn(g,4,"Frame not displayable.");L+=3,W-=3;var te=g.Kc;if(J.Rb){if(7>W)return pn(g,7,"cannot parse picture header");if(!ga(N,L,W))return pn(g,3,"Bad code word");te.c=16383&(N[L+4]<<8|N[L+3]),te.Td=N[L+4]>>6,te.i=16383&(N[L+6]<<8|N[L+5]),te.Ud=N[L+6]>>6,L+=7,W-=7,g.za=te.c+15>>4,g.Ub=te.i+15>>4,b.width=te.c,b.height=te.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,s((X=g.Pa).jb,0,255,X.jb.length),e((X=g.Qa)!=null),X.Cb=0,X.Bb=0,X.Fb=1,s(X.Zb,0,0,X.Zb.length),s(X.Lb,0,0,X.Lb)}if(J.ub>W)return pn(g,7,"bad partition length");le(X=g.m,N,L,J.ub),L+=J.ub,W-=J.ub,J.Rb&&(te.Ld=Le(X),te.Kd=Le(X)),te=g.Qa;var oe,he=g.Pa;if(e(X!=null),e(te!=null),te.Cb=Le(X),te.Cb){if(te.Bb=Le(X),Le(X)){for(te.Fb=Le(X),oe=0;4>oe;++oe)te.Zb[oe]=Le(X)?ye(X,7):0;for(oe=0;4>oe;++oe)te.Lb[oe]=Le(X)?ye(X,6):0}if(te.Bb)for(oe=0;3>oe;++oe)he.jb[oe]=Le(X)?ve(X,8):255}else te.Bb=0;if(X.Ka)return pn(g,3,"cannot parse segment header");if((te=g.ed).zd=Le(X),te.Tb=ve(X,6),te.wb=ve(X,3),te.Pc=Le(X),te.Pc&&Le(X)){for(he=0;4>he;++he)Le(X)&&(te.vd[he]=ye(X,6));for(he=0;4>he;++he)Le(X)&&(te.od[he]=ye(X,6))}if(g.L=te.Tb==0?0:te.zd?1:2,X.Ka)return pn(g,3,"cannot parse filter header");var Ne=W;if(W=oe=L,L=oe+Ne,te=Ne,g.Xb=(1<<ve(g.m,2))-1,Ne<3*(he=g.Xb))N=7;else{for(oe+=3*he,te-=3*he,Ne=0;Ne<he;++Ne){var Ve=N[W+0]|N[W+1]<<8|N[W+2]<<16;Ve>te&&(Ve=te),le(g.Jc[+Ne],N,oe,Ve),oe+=Ve,te-=Ve,W+=3}le(g.Jc[+he],N,oe,te),N=oe<L?0:5}if(N!=0)return pn(g,N,"cannot parse partitions");for(N=ve(oe=g.m,7),W=Le(oe)?ye(oe,4):0,L=Le(oe)?ye(oe,4):0,te=Le(oe)?ye(oe,4):0,he=Le(oe)?ye(oe,4):0,oe=Le(oe)?ye(oe,4):0,Ne=g.Qa,Ve=0;4>Ve;++Ve){if(Ne.Cb){var ue=Ne.Zb[Ve];Ne.Fb||(ue+=N)}else{if(0<Ve){g.pb[Ve]=g.pb[0];continue}ue=N}var je=g.pb[Ve];je.Sc[0]=ea[Zi(ue+W,127)],je.Sc[1]=ta[Zi(ue+0,127)],je.Eb[0]=2*ea[Zi(ue+L,127)],je.Eb[1]=101581*ta[Zi(ue+te,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=ea[Zi(ue+he,117)],je.Qc[1]=ta[Zi(ue+oe,127)],je.lc=ue+oe}if(!J.Rb)return pn(g,4,"Not a key frame.");for(Le(X),J=g.Pa,N=0;4>N;++N){for(W=0;8>W;++W)for(L=0;3>L;++L)for(te=0;11>te;++te)he=Z(X,fr[N][W][L][te])?ve(X,8):ap[N][W][L][te],J.Wc[N][W].Yb[L][te]=he;for(W=0;17>W;++W)J.Xc[N][W]=J.Wc[N][bn[W]]}return g.kc=Le(X),g.kc&&(g.Bd=ve(X,8)),g.cb=1}function Sn(g,b,N,L,W,X,J){var te=b[W].Yb[N];for(N=0;16>W;++W){if(!Z(g,te[N+0]))return W;for(;!Z(g,te[N+1]);)if(te=b[++W].Yb[0],N=0,W==16)return 16;var oe=b[W+1].Yb;if(Z(g,te[N+2])){var he=g,Ne=0;if(Z(he,(ue=te)[(Ve=N)+3]))if(Z(he,ue[Ve+6])){for(te=0,Ve=2*(Ne=Z(he,ue[Ve+8]))+(ue=Z(he,ue[Ve+9+Ne])),Ne=0,ue=sp[Ve];ue[te];++te)Ne+=Ne+Z(he,ue[te]);Ne+=3+(8<<Ve)}else Z(he,ue[Ve+7])?(Ne=7+2*Z(he,165),Ne+=Z(he,145)):Ne=5+Z(he,159);else Ne=Z(he,ue[Ve+4])?3+Z(he,ue[Ve+5]):2;te=oe[2]}else Ne=1,te=oe[1];oe=J+_h[W],0>(he=g).b&&Me(he);var Ve,ue=he.b,je=(Ve=he.Ca>>1)-(he.I>>ue)>>31;--he.b,he.Ca+=je,he.Ca|=1,he.I-=(Ve+1&je)<<ue,X[oe]=((Ne^je)-je)*L[(0<W)+0]}return 16}function Da(g){var b=g.rb[g.sb-1];b.la=0,b.Na=0,s(g.zc,0,0,g.zc.length),g.ja=0}function Dr(g,b,N,L,W){W=g[b+N+32*L]+(W>>3),g[b+N+32*L]=-256&W?0>W?0:255:W}function hr(g,b,N,L,W,X){Dr(g,b,0,N,L+W),Dr(g,b,1,N,L+X),Dr(g,b,2,N,L-X),Dr(g,b,3,N,L-W)}function Ar(g){return(20091*g>>16)+g}function no(g,b,N,L){var W,X=0,J=o(16);for(W=0;4>W;++W){var te=g[b+0]+g[b+8],oe=g[b+0]-g[b+8],he=(35468*g[b+4]>>16)-Ar(g[b+12]),Ne=Ar(g[b+4])+(35468*g[b+12]>>16);J[X+0]=te+Ne,J[X+1]=oe+he,J[X+2]=oe-he,J[X+3]=te-Ne,X+=4,b++}for(W=X=0;4>W;++W)te=(g=J[X+0]+4)+J[X+8],oe=g-J[X+8],he=(35468*J[X+4]>>16)-Ar(J[X+12]),Dr(N,L,0,0,te+(Ne=Ar(J[X+4])+(35468*J[X+12]>>16))),Dr(N,L,1,0,oe+he),Dr(N,L,2,0,oe-he),Dr(N,L,3,0,te-Ne),X++,L+=32}function lc(g,b,N,L){var W=g[b+0]+4,X=35468*g[b+4]>>16,J=Ar(g[b+4]),te=35468*g[b+1]>>16;hr(N,L,0,W+J,g=Ar(g[b+1]),te),hr(N,L,1,W+X,g,te),hr(N,L,2,W-X,g,te),hr(N,L,3,W-J,g,te)}function gl(g,b,N,L,W){no(g,b,N,L),W&&no(g,b+16,N,L+4)}function _i(g,b,N,L){po(g,b+0,N,L,1),po(g,b+32,N,L+128,1)}function yl(g,b,N,L){var W;for(g=g[b+0]+4,W=0;4>W;++W)for(b=0;4>b;++b)Dr(N,L,b,W,g)}function ya(g,b,N,L){g[b+0]&&Mn(g,b+0,N,L),g[b+16]&&Mn(g,b+16,N,L+4),g[b+32]&&Mn(g,b+32,N,L+128),g[b+48]&&Mn(g,b+48,N,L+128+4)}function ei(g,b,N,L){var W,X=o(16);for(W=0;4>W;++W){var J=g[b+0+W]+g[b+12+W],te=g[b+4+W]+g[b+8+W],oe=g[b+4+W]-g[b+8+W],he=g[b+0+W]-g[b+12+W];X[0+W]=J+te,X[8+W]=J-te,X[4+W]=he+oe,X[12+W]=he-oe}for(W=0;4>W;++W)J=(g=X[0+4*W]+3)+X[3+4*W],te=X[1+4*W]+X[2+4*W],oe=X[1+4*W]-X[2+4*W],he=g-X[3+4*W],N[L+0]=J+te>>3,N[L+16]=he+oe>>3,N[L+32]=J-te>>3,N[L+48]=he-oe>>3,L+=64}function ka(g,b,N){var L,W=b-32,X=qi,J=255-g[W-1];for(L=0;L<N;++L){var te,oe=X,he=J+g[b-1];for(te=0;te<N;++te)g[b+te]=oe[he+g[W+te]];b+=32}}function vl(g,b){ka(g,b,4)}function bl(g,b){ka(g,b,8)}function ko(g,b){ka(g,b,16)}function Lo(g,b){var N;for(N=0;16>N;++N)r(g,b+32*N,g,b-32,16)}function va(g,b){var N;for(N=16;0<N;--N)s(g,b,g[b-1],16),b+=32}function Bi(g,b,N){var L;for(L=0;16>L;++L)s(b,N+32*L,g,16)}function Is(g,b){var N,L=16;for(N=0;16>N;++N)L+=g[b-1+32*N]+g[b+N-32];Bi(L>>5,g,b)}function ba(g,b){var N,L=8;for(N=0;16>N;++N)L+=g[b-1+32*N];Bi(L>>4,g,b)}function Vi(g,b){var N,L=8;for(N=0;16>N;++N)L+=g[b+N-32];Bi(L>>4,g,b)}function La(g,b){Bi(128,g,b)}function Vt(g,b,N){return g+2*b+N+2>>2}function ro(g,b){var N,L=b-32;for(L=new Uint8Array([Vt(g[L-1],g[L+0],g[L+1]),Vt(g[L+0],g[L+1],g[L+2]),Vt(g[L+1],g[L+2],g[L+3]),Vt(g[L+2],g[L+3],g[L+4])]),N=0;4>N;++N)r(g,b+32*N,L,0,L.length)}function Po(g,b){var N=g[b-1],L=g[b-1+32],W=g[b-1+64],X=g[b-1+96];ae(g,b+0,16843009*Vt(g[b-1-32],N,L)),ae(g,b+32,16843009*Vt(N,L,W)),ae(g,b+64,16843009*Vt(L,W,X)),ae(g,b+96,16843009*Vt(W,X,X))}function Pa(g,b){var N,L=4;for(N=0;4>N;++N)L+=g[b+N-32]+g[b-1+32*N];for(L>>=3,N=0;4>N;++N)s(g,b+32*N,L,4)}function ti(g,b){var N=g[b-1+0],L=g[b-1+32],W=g[b-1+64],X=g[b-1-32],J=g[b+0-32],te=g[b+1-32],oe=g[b+2-32],he=g[b+3-32];g[b+0+96]=Vt(L,W,g[b-1+96]),g[b+1+96]=g[b+0+64]=Vt(N,L,W),g[b+2+96]=g[b+1+64]=g[b+0+32]=Vt(X,N,L),g[b+3+96]=g[b+2+64]=g[b+1+32]=g[b+0+0]=Vt(J,X,N),g[b+3+64]=g[b+2+32]=g[b+1+0]=Vt(te,J,X),g[b+3+32]=g[b+2+0]=Vt(oe,te,J),g[b+3+0]=Vt(he,oe,te)}function zr(g,b){var N=g[b+1-32],L=g[b+2-32],W=g[b+3-32],X=g[b+4-32],J=g[b+5-32],te=g[b+6-32],oe=g[b+7-32];g[b+0+0]=Vt(g[b+0-32],N,L),g[b+1+0]=g[b+0+32]=Vt(N,L,W),g[b+2+0]=g[b+1+32]=g[b+0+64]=Vt(L,W,X),g[b+3+0]=g[b+2+32]=g[b+1+64]=g[b+0+96]=Vt(W,X,J),g[b+3+32]=g[b+2+64]=g[b+1+96]=Vt(X,J,te),g[b+3+64]=g[b+2+96]=Vt(J,te,oe),g[b+3+96]=Vt(te,oe,oe)}function io(g,b){var N=g[b-1+0],L=g[b-1+32],W=g[b-1+64],X=g[b-1-32],J=g[b+0-32],te=g[b+1-32],oe=g[b+2-32],he=g[b+3-32];g[b+0+0]=g[b+1+64]=X+J+1>>1,g[b+1+0]=g[b+2+64]=J+te+1>>1,g[b+2+0]=g[b+3+64]=te+oe+1>>1,g[b+3+0]=oe+he+1>>1,g[b+0+96]=Vt(W,L,N),g[b+0+64]=Vt(L,N,X),g[b+0+32]=g[b+1+96]=Vt(N,X,J),g[b+1+32]=g[b+2+96]=Vt(X,J,te),g[b+2+32]=g[b+3+96]=Vt(J,te,oe),g[b+3+32]=Vt(te,oe,he)}function Bn(g,b){var N=g[b+0-32],L=g[b+1-32],W=g[b+2-32],X=g[b+3-32],J=g[b+4-32],te=g[b+5-32],oe=g[b+6-32],he=g[b+7-32];g[b+0+0]=N+L+1>>1,g[b+1+0]=g[b+0+64]=L+W+1>>1,g[b+2+0]=g[b+1+64]=W+X+1>>1,g[b+3+0]=g[b+2+64]=X+J+1>>1,g[b+0+32]=Vt(N,L,W),g[b+1+32]=g[b+0+96]=Vt(L,W,X),g[b+2+32]=g[b+1+96]=Vt(W,X,J),g[b+3+32]=g[b+2+96]=Vt(X,J,te),g[b+3+64]=Vt(J,te,oe),g[b+3+96]=Vt(te,oe,he)}function es(g,b){var N=g[b-1+0],L=g[b-1+32],W=g[b-1+64],X=g[b-1+96];g[b+0+0]=N+L+1>>1,g[b+2+0]=g[b+0+32]=L+W+1>>1,g[b+2+32]=g[b+0+64]=W+X+1>>1,g[b+1+0]=Vt(N,L,W),g[b+3+0]=g[b+1+32]=Vt(L,W,X),g[b+3+32]=g[b+1+64]=Vt(W,X,X),g[b+3+64]=g[b+2+64]=g[b+0+96]=g[b+1+96]=g[b+2+96]=g[b+3+96]=X}function so(g,b){var N=g[b-1+0],L=g[b-1+32],W=g[b-1+64],X=g[b-1+96],J=g[b-1-32],te=g[b+0-32],oe=g[b+1-32],he=g[b+2-32];g[b+0+0]=g[b+2+32]=N+J+1>>1,g[b+0+32]=g[b+2+64]=L+N+1>>1,g[b+0+64]=g[b+2+96]=W+L+1>>1,g[b+0+96]=X+W+1>>1,g[b+3+0]=Vt(te,oe,he),g[b+2+0]=Vt(J,te,oe),g[b+1+0]=g[b+3+32]=Vt(N,J,te),g[b+1+32]=g[b+3+64]=Vt(L,N,J),g[b+1+64]=g[b+3+96]=Vt(W,L,N),g[b+1+96]=Vt(X,W,L)}function Ds(g,b){var N;for(N=0;8>N;++N)r(g,b+32*N,g,b-32,8)}function wl(g,b){var N;for(N=0;8>N;++N)s(g,b,g[b-1],8),b+=32}function ts(g,b,N){var L;for(L=0;8>L;++L)s(b,N+32*L,g,8)}function wa(g,b){var N,L=8;for(N=0;8>N;++N)L+=g[b+N-32]+g[b-1+32*N];ts(L>>4,g,b)}function ns(g,b){var N,L=4;for(N=0;8>N;++N)L+=g[b+N-32];ts(L>>3,g,b)}function kr(g,b){var N,L=4;for(N=0;8>N;++N)L+=g[b-1+32*N];ts(L>>3,g,b)}function qs(g,b){ts(128,g,b)}function fi(g,b,N){var L=g[b-N],W=g[b+0],X=3*(W-L)+mo[1020+g[b-2*N]-g[b+N]],J=wu[112+(X+4>>3)];g[b-N]=qi[255+L+wu[112+(X+3>>3)]],g[b+0]=qi[255+W-J]}function Hs(g,b,N,L){var W=g[b+0],X=g[b+N];return Ti[255+g[b-2*N]-g[b-N]]>L||Ti[255+X-W]>L}function Ma(g,b,N,L){return 4*Ti[255+g[b-N]-g[b+0]]+Ti[255+g[b-2*N]-g[b+N]]<=L}function Gs(g,b,N,L,W){var X=g[b-3*N],J=g[b-2*N],te=g[b-N],oe=g[b+0],he=g[b+N],Ne=g[b+2*N],Ve=g[b+3*N];return 4*Ti[255+te-oe]+Ti[255+J-he]>L?0:Ti[255+g[b-4*N]-X]<=W&&Ti[255+X-J]<=W&&Ti[255+J-te]<=W&&Ti[255+Ve-Ne]<=W&&Ti[255+Ne-he]<=W&&Ti[255+he-oe]<=W}function $s(g,b,N,L){var W=2*L+1;for(L=0;16>L;++L)Ma(g,b+L,N,W)&&fi(g,b+L,N)}function ys(g,b,N,L){var W=2*L+1;for(L=0;16>L;++L)Ma(g,b+L*N,1,W)&&fi(g,b+L*N,1)}function ao(g,b,N,L){var W;for(W=3;0<W;--W)$s(g,b+=4*N,N,L)}function Mo(g,b,N,L){var W;for(W=3;0<W;--W)ys(g,b+=4,N,L)}function rs(g,b,N,L,W,X,J,te){for(X=2*X+1;0<W--;){if(Gs(g,b,N,X,J))if(Hs(g,b,N,te))fi(g,b,N);else{var oe=g,he=b,Ne=N,Ve=oe[he-2*Ne],ue=oe[he-Ne],je=oe[he+0],Oe=oe[he+Ne],Xe=oe[he+2*Ne],Fe=27*(tt=mo[1020+3*(je-ue)+mo[1020+Ve-Oe]])+63>>7,Ke=18*tt+63>>7,tt=9*tt+63>>7;oe[he-3*Ne]=qi[255+oe[he-3*Ne]+tt],oe[he-2*Ne]=qi[255+Ve+Ke],oe[he-Ne]=qi[255+ue+Fe],oe[he+0]=qi[255+je-Fe],oe[he+Ne]=qi[255+Oe-Ke],oe[he+2*Ne]=qi[255+Xe-tt]}b+=L}}function Ws(g,b,N,L,W,X,J,te){for(X=2*X+1;0<W--;){if(Gs(g,b,N,X,J))if(Hs(g,b,N,te))fi(g,b,N);else{var oe=g,he=b,Ne=N,Ve=oe[he-Ne],ue=oe[he+0],je=oe[he+Ne],Oe=wu[112+(4+(Xe=3*(ue-Ve))>>3)],Xe=wu[112+(Xe+3>>3)],Fe=Oe+1>>1;oe[he-2*Ne]=qi[255+oe[he-2*Ne]+Fe],oe[he-Ne]=qi[255+Ve+Xe],oe[he+0]=qi[255+ue-Oe],oe[he+Ne]=qi[255+je-Fe]}b+=L}}function xl(g,b,N,L,W,X){rs(g,b,N,1,16,L,W,X)}function ks(g,b,N,L,W,X){rs(g,b,1,N,16,L,W,X)}function Oo(g,b,N,L,W,X){var J;for(J=3;0<J;--J)Ws(g,b+=4*N,N,1,16,L,W,X)}function _(g,b,N,L,W,X){var J;for(J=3;0<J;--J)Ws(g,b+=4,1,N,16,L,W,X)}function $(g,b,N,L,W,X,J,te){rs(g,b,W,1,8,X,J,te),rs(N,L,W,1,8,X,J,te)}function de(g,b,N,L,W,X,J,te){rs(g,b,1,W,8,X,J,te),rs(N,L,1,W,8,X,J,te)}function xe(g,b,N,L,W,X,J,te){Ws(g,b+4*W,W,1,8,X,J,te),Ws(N,L+4*W,W,1,8,X,J,te)}function Re(g,b,N,L,W,X,J,te){Ws(g,b+4,1,W,8,X,J,te),Ws(N,L+4,1,W,8,X,J,te)}function Qe(){this.ba=new Dt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new cn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function st(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Et(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function jt(){this.ua=0,this.Wa=new Be,this.vb=new Be,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Se,this.yc=new M}function Ht(){this.xb=this.a=0,this.l=new hi,this.ca=new Dt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new jt,this.ab=0,this.gc=u(4,Et),this.Oc=0}function Ut(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new hi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gn(g,b,N,L,W,X,J){for(g=g==null?0:g[b+0],b=0;b<J;++b)W[X+b]=g+N[L+b]&255,g=W[X+b]}function ir(g,b,N,L,W,X,J){var te;if(g==null)gn(null,null,N,L,W,X,J);else for(te=0;te<J;++te)W[X+te]=g[b+te]+N[L+te]&255}function Kn(g,b,N,L,W,X,J){if(g==null)gn(null,null,N,L,W,X,J);else{var te,oe=g[b+0],he=oe,Ne=oe;for(te=0;te<J;++te)he=Ne+(oe=g[b+te])-he,Ne=N[L+te]+(-256&he?0>he?0:255:he)&255,he=oe,W[X+te]=Ne}}function y(g,b,N,L){var W=b.width,X=b.o;if(e(g!=null&&b!=null),0>N||0>=L||N+L>X)return null;if(!g.Cc){if(g.ga==null){var J;if(g.ga=new Ut,(J=g.ga==null)||(J=b.width*b.o,e(g.Gb.length==0),g.Gb=o(J),g.Uc=0,g.Gb==null?J=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,J=1),J=!J),!J){J=g.ga;var te=g.Fa,oe=g.P,he=g.qc,Ne=g.mb,Ve=g.nb,ue=oe+1,je=he-1,Oe=J.l;if(e(te!=null&&Ne!=null&&b!=null),go[0]=null,go[1]=gn,go[2]=ir,go[3]=Kn,J.ca=Ne,J.tb=Ve,J.c=b.width,J.i=b.height,e(0<J.c&&0<J.i),1>=he)b=0;else if(J.$a=3&te[oe+0],J.Z=te[oe+0]>>2&3,J.Lc=te[oe+0]>>4&3,oe=te[oe+0]>>6&3,0>J.$a||1<J.$a||4<=J.Z||1<J.Lc||oe)b=0;else if(Oe.put=Ft,Oe.ac=Zr,Oe.bc=pa,Oe.ma=J,Oe.width=b.width,Oe.height=b.height,Oe.Da=b.Da,Oe.v=b.v,Oe.va=b.va,Oe.j=b.j,Oe.o=b.o,J.$a)e:{e(J.$a==1),b=Ia();t:for(;;){if(b==null){b=0;break e}if(e(J!=null),J.mc=b,b.c=J.c,b.i=J.i,b.l=J.l,b.l.ma=J,b.l.width=J.c,b.l.height=J.i,b.a=0,ge(b.m,te,ue,je),!js(J.c,J.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Un(b.s)?(J.ic=1,te=b.c*b.i,b.Ta=null,b.Ua=0,b.V=o(te),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(J.ic=0,b=Fi(b,J.c)),!b))break t;b=1;break e}J.mc=null,b=0}else b=je>=J.c*J.i;J=!b}if(J)return null;g.ga.Lc!=1?g.Ga=0:L=X-N}e(g.ga!=null),e(N+L<=X);e:{if(b=(te=g.ga).c,X=te.l.o,te.$a==0){if(ue=g.rc,je=g.Vc,Oe=g.Fa,oe=g.P+1+N*b,he=g.mb,Ne=g.nb+N*b,e(oe<=g.P+g.qc),te.Z!=0)for(e(go[te.Z]!=null),J=0;J<L;++J)go[te.Z](ue,je,Oe,oe,he,Ne,b),ue=he,je=Ne,Ne+=b,oe+=b;else for(J=0;J<L;++J)r(he,Ne,Oe,oe,b),ue=he,je=Ne,Ne+=b,oe+=b;g.rc=ue,g.Vc=je}else{if(e(te.mc!=null),b=N+L,e((J=te.mc)!=null),e(b<=J.i),J.C>=b)b=1;else if(te.ic||He(),te.ic){te=J.V,ue=J.Ba,je=J.c;var Xe=J.i,Fe=(Oe=1,oe=J.$/je,he=J.$%je,Ne=J.m,Ve=J.s,J.$),Ke=je*Xe,tt=je*b,ut=Ve.wc,it=Fe<tt?Br(Ve,he,oe):null;e(Fe<=Ke),e(b<=Xe),e(Un(Ve));t:for(;;){for(;!Ne.h&&Fe<tt;){if(he&ut||(it=Br(Ve,he,oe)),e(it!=null),_e(Ne),256>(Xe=Yn(it.G[0],it.H[0],Ne)))te[ue+Fe]=Xe,++Fe,++he>=je&&(he=0,++oe<=b&&!(oe%16)&&Vr(J,oe));else{if(!(280>Xe)){Oe=0;break t}Xe=Pi(Xe-256,Ne);var Rt,St=Yn(it.G[4],it.H[4],Ne);if(_e(Ne),!(Fe>=(St=Mi(je,St=Pi(St,Ne)))&&Ke-Fe>=Xe)){Oe=0;break t}for(Rt=0;Rt<Xe;++Rt)te[ue+Fe+Rt]=te[ue+Fe+Rt-St];for(Fe+=Xe,he+=Xe;he>=je;)he-=je,++oe<=b&&!(oe%16)&&Vr(J,oe);Fe<tt&&he&ut&&(it=Br(Ve,he,oe))}e(Ne.h==fe(Ne))}Vr(J,oe>b?b:oe);break t}!Oe||Ne.h&&Fe<Ke?(Oe=0,J.a=Ne.h?5:3):J.$=Fe,b=Oe}else b=Oi(J,J.V,J.Ba,J.c,J.i,b,ma);if(!b){L=0;break e}}N+L>=X&&(g.Cc=1),L=1}if(!L)return null;if(g.Cc&&((L=g.ga)!=null&&(L.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+N*W}function T(g,b,N,L,W,X){for(;0<W--;){var J,te=g,oe=b+(N?1:0),he=g,Ne=b+(N?0:3);for(J=0;J<L;++J){var Ve=he[Ne+4*J];Ve!=255&&(Ve*=32897,te[oe+4*J+0]=te[oe+4*J+0]*Ve>>23,te[oe+4*J+1]=te[oe+4*J+1]*Ve>>23,te[oe+4*J+2]=te[oe+4*J+2]*Ve>>23)}b+=X}}function B(g,b,N,L,W){for(;0<L--;){var X;for(X=0;X<N;++X){var J=g[b+2*X+0],te=15&(he=g[b+2*X+1]),oe=4369*te,he=(240&he|he>>4)*oe>>16;g[b+2*X+0]=(240&J|J>>4)*oe>>16&240|(15&J|J<<4)*oe>>16>>4&15,g[b+2*X+1]=240&he|te}b+=W}}function ie(g,b,N,L,W,X,J,te){var oe,he,Ne=255;for(he=0;he<W;++he){for(oe=0;oe<L;++oe){var Ve=g[b+oe];X[J+4*oe]=Ve,Ne&=Ve}b+=N,J+=te}return Ne!=255}function Pe(g,b,N,L,W){var X;for(X=0;X<W;++X)N[L+X]=g[b+X]>>8}function He(){El=T,Ks=B,yu=ie,Os=Pe}function ht(g,b,N){R[g]=function(L,W,X,J,te,oe,he,Ne,Ve,ue,je,Oe,Xe,Fe,Ke,tt,ut){var it,Rt=ut-1>>1,St=te[oe+0]|he[Ne+0]<<16,Zt=Ve[ue+0]|je[Oe+0]<<16;e(L!=null);var At=3*St+Zt+131074>>2;for(b(L[W+0],255&At,At>>16,Xe,Fe),X!=null&&(At=3*Zt+St+131074>>2,b(X[J+0],255&At,At>>16,Ke,tt)),it=1;it<=Rt;++it){var yn=te[oe+it]|he[Ne+it]<<16,pr=Ve[ue+it]|je[Oe+it]<<16,nn=St+yn+Zt+pr+524296,_t=nn+2*(yn+Zt)>>3;At=_t+St>>1,St=(nn=nn+2*(St+pr)>>3)+yn>>1,b(L[W+2*it-1],255&At,At>>16,Xe,Fe+(2*it-1)*N),b(L[W+2*it-0],255&St,St>>16,Xe,Fe+(2*it-0)*N),X!=null&&(At=nn+Zt>>1,St=_t+pr>>1,b(X[J+2*it-1],255&At,At>>16,Ke,tt+(2*it-1)*N),b(X[J+2*it+0],255&St,St>>16,Ke,tt+(2*it+0)*N)),St=yn,Zt=pr}1&ut||(At=3*St+Zt+131074>>2,b(L[W+ut-1],255&At,At>>16,Xe,Fe+(ut-1)*N),X!=null&&(At=3*Zt+St+131074>>2,b(X[J+ut-1],255&At,At>>16,Ke,tt+(ut-1)*N)))}}function Jt(){ji[sd]=Tl,ji[Hi]=yc,ji[ad]=Nh,ji[Xs]=dd,ji[xu]=zo,ji[pc]=Ga,ji[Uo]=qo,ji[Su]=yc,ji[od]=dd,ji[mc]=zo,ji[ld]=Ga}function sr(g){return g&-16384?0>g?0:255:g>>hd}function hn(g,b){return sr((19077*g>>8)+(26149*b>>8)-14234)}function Vn(g,b,N){return sr((19077*g>>8)-(6419*b>>8)-(13320*N>>8)+8708)}function pi(g,b){return sr((19077*g>>8)+(33050*b>>8)-17685)}function Ei(g,b,N,L,W){L[W+0]=hn(g,N),L[W+1]=Vn(g,b,N),L[W+2]=pi(g,b)}function Jn(g,b,N,L,W){L[W+0]=pi(g,b),L[W+1]=Vn(g,b,N),L[W+2]=hn(g,N)}function Ni(g,b,N,L,W){var X=Vn(g,b,N);b=X<<3&224|pi(g,b)>>3,L[W+0]=248&hn(g,N)|X>>5,L[W+1]=b}function Ls(g,b,N,L,W){var X=240&pi(g,b)|15;L[W+0]=240&hn(g,N)|Vn(g,b,N)>>4,L[W+1]=X}function Oa(g,b,N,L,W){L[W+0]=255,Ei(g,b,N,L,W+1)}function Fa(g,b,N,L,W){Jn(g,b,N,L,W),L[W+3]=255}function is(g,b,N,L,W){Ei(g,b,N,L,W),L[W+3]=255}function oo(g,b,N){R[g]=function(L,W,X,J,te,oe,he,Ne,Ve){for(var ue=Ne+(-2&Ve)*N;Ne!=ue;)b(L[W+0],X[J+0],te[oe+0],he,Ne),b(L[W+1],X[J+0],te[oe+0],he,Ne+N),W+=2,++J,++oe,Ne+=2*N;1&Ve&&b(L[W+0],X[J+0],te[oe+0],he,Ne)}}function cc(g,b,N){return N==0?g==0?b==0?6:5:b==0?4:0:N}function pu(g,b,N,L,W){switch(g>>>30){case 3:po(b,N,L,W,0);break;case 2:zi(b,N,L,W);break;case 1:Mn(b,N,L,W)}}function Ps(g,b){var N,L,W=b.M,X=b.Nb,J=g.oc,te=g.pc+40,oe=g.oc,he=g.pc+584,Ne=g.oc,Ve=g.pc+600;for(N=0;16>N;++N)J[te+32*N-1]=129;for(N=0;8>N;++N)oe[he+32*N-1]=129,Ne[Ve+32*N-1]=129;for(0<W?J[te-1-32]=oe[he-1-32]=Ne[Ve-1-32]=129:(s(J,te-32-1,127,21),s(oe,he-32-1,127,9),s(Ne,Ve-32-1,127,9)),L=0;L<g.za;++L){var ue=b.ya[b.aa+L];if(0<L){for(N=-1;16>N;++N)r(J,te+32*N-4,J,te+32*N+12,4);for(N=-1;8>N;++N)r(oe,he+32*N-4,oe,he+32*N+4,4),r(Ne,Ve+32*N-4,Ne,Ve+32*N+4,4)}var je=g.Gd,Oe=g.Hd+L,Xe=ue.ad,Fe=ue.Hc;if(0<W&&(r(J,te-32,je[Oe].y,0,16),r(oe,he-32,je[Oe].f,0,8),r(Ne,Ve-32,je[Oe].ea,0,8)),ue.Za){var Ke=J,tt=te-32+16;for(0<W&&(L>=g.za-1?s(Ke,tt,je[Oe].y[15],4):r(Ke,tt,je[Oe+1].y,0,4)),N=0;4>N;N++)Ke[tt+128+N]=Ke[tt+256+N]=Ke[tt+384+N]=Ke[tt+0+N];for(N=0;16>N;++N,Fe<<=2)Ke=J,tt=te+Mr[N],Tr[ue.Ob[N]](Ke,tt),pu(Fe,Xe,16*+N,Ke,tt)}else if(Ke=cc(L,W,ue.Ob[0]),as[Ke](J,te),Fe!=0)for(N=0;16>N;++N,Fe<<=2)pu(Fe,Xe,16*+N,J,te+Mr[N]);for(N=ue.Gc,Ke=cc(L,W,ue.Dd),Ea[Ke](oe,he),Ea[Ke](Ne,Ve),Fe=Xe,Ke=oe,tt=he,255&(ue=0|N)&&(170&ue?Ys(Fe,256,Ke,tt):Rn(Fe,256,Ke,tt)),ue=Ne,Fe=Ve,255&(N>>=8)&&(170&N?Ys(Xe,320,ue,Fe):Rn(Xe,320,ue,Fe)),W<g.Ub-1&&(r(je[Oe].y,0,J,te+480,16),r(je[Oe].f,0,oe,he+224,8),r(je[Oe].ea,0,Ne,Ve+224,8)),N=8*X*g.B,je=g.sa,Oe=g.ta+16*L+16*X*g.R,Xe=g.qa,ue=g.ra+8*L+N,Fe=g.Ha,Ke=g.Ia+8*L+N,N=0;16>N;++N)r(je,Oe+N*g.R,J,te+32*N,16);for(N=0;8>N;++N)r(Xe,ue+N*g.B,oe,he+32*N,8),r(Fe,Ke+N*g.B,Ne,Ve+32*N,8)}}function xa(g,b,N,L,W,X,J,te,oe){var he=[0],Ne=[0],Ve=0,ue=oe!=null?oe.kd:0,je=oe??new st;if(g==null||12>N)return 7;je.data=g,je.w=b,je.ha=N,b=[b],N=[N],je.gb=[je.gb];e:{var Oe=b,Xe=N,Fe=je.gb;if(e(g!=null),e(Xe!=null),e(Fe!=null),Fe[0]=0,12<=Xe[0]&&!t(g,Oe[0],"RIFF")){if(t(g,Oe[0]+8,"WEBP")){Fe=3;break e}var Ke=pe(g,Oe[0]+4);if(12>Ke||4294967286<Ke){Fe=3;break e}if(ue&&Ke>Xe[0]-8){Fe=7;break e}Fe[0]=Ke,Oe[0]+=12,Xe[0]-=12}Fe=0}if(Fe!=0)return Fe;for(Ke=0<je.gb[0],N=N[0];;){e:{var tt=g;Xe=b,Fe=N;var ut=he,it=Ne,Rt=Oe=[0];if((At=Ve=[Ve])[0]=0,8>Fe[0])Fe=7;else{if(!t(tt,Xe[0],"VP8X")){if(pe(tt,Xe[0]+4)!=10){Fe=3;break e}if(18>Fe[0]){Fe=7;break e}var St=pe(tt,Xe[0]+8),Zt=1+Ee(tt,Xe[0]+12);if(2147483648<=Zt*(tt=1+Ee(tt,Xe[0]+15))){Fe=3;break e}Rt!=null&&(Rt[0]=St),ut!=null&&(ut[0]=Zt),it!=null&&(it[0]=tt),Xe[0]+=18,Fe[0]-=18,At[0]=1}Fe=0}}if(Ve=Ve[0],Oe=Oe[0],Fe!=0)return Fe;if(Xe=!!(2&Oe),!Ke&&Ve)return 3;if(X!=null&&(X[0]=!!(16&Oe)),J!=null&&(J[0]=Xe),te!=null&&(te[0]=0),J=he[0],Oe=Ne[0],Ve&&Xe&&oe==null){Fe=0;break}if(4>N){Fe=7;break}if(Ke&&Ve||!Ke&&!Ve&&!t(g,b[0],"ALPH")){N=[N],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{St=g,Fe=b,Ke=N;var At=je.gb;ut=je.na,it=je.P,Rt=je.Sa,Zt=22,e(St!=null),e(Ke!=null),tt=Fe[0];var yn=Ke[0];for(e(ut!=null),e(Rt!=null),ut[0]=null,it[0]=null,Rt[0]=0;;){if(Fe[0]=tt,Ke[0]=yn,8>yn){Fe=7;break e}var pr=pe(St,tt+4);if(4294967286<pr){Fe=3;break e}var nn=8+pr+1&-2;if(Zt+=nn,0<At&&Zt>At){Fe=3;break e}if(!t(St,tt,"VP8 ")||!t(St,tt,"VP8L")){Fe=0;break e}if(yn[0]<nn){Fe=7;break e}t(St,tt,"ALPH")||(ut[0]=St,it[0]=tt+8,Rt[0]=pr),tt+=nn,yn-=nn}}if(N=N[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],Fe!=0)break}N=[N],je.Ja=[je.Ja],je.xa=[je.xa];e:if(At=g,Fe=b,Ke=N,ut=je.gb[0],it=je.Ja,Rt=je.xa,St=Fe[0],tt=!t(At,St,"VP8 "),Zt=!t(At,St,"VP8L"),e(At!=null),e(Ke!=null),e(it!=null),e(Rt!=null),8>Ke[0])Fe=7;else{if(tt||Zt){if(At=pe(At,St+4),12<=ut&&At>ut-12){Fe=3;break e}if(ue&&At>Ke[0]-8){Fe=7;break e}it[0]=At,Fe[0]+=8,Ke[0]-=8,Rt[0]=Zt}else Rt[0]=5<=Ke[0]&&At[St+0]==47&&!(At[St+4]>>5),it[0]=Ke[0];Fe=0}if(N=N[0],je.Ja=je.Ja[0],je.xa=je.xa[0],b=b[0],Fe!=0)break;if(4294967286<je.Ja)return 3;if(te==null||Xe||(te[0]=je.xa?2:1),J=[J],Oe=[Oe],je.xa){if(5>N){Fe=7;break}te=J,ue=Oe,Xe=X,g==null||5>N?g=0:5<=N&&g[b+0]==47&&!(g[b+4]>>5)?(Ke=[0],At=[0],ut=[0],ge(it=new Y,g,b,N),Xi(it,Ke,At,ut)?(te!=null&&(te[0]=Ke[0]),ue!=null&&(ue[0]=At[0]),Xe!=null&&(Xe[0]=ut[0]),g=1):g=0):g=0}else{if(10>N){Fe=7;break}te=Oe,g==null||10>N||!ga(g,b+3,N-3)?g=0:(ue=g[b+0]|g[b+1]<<8|g[b+2]<<16,Xe=16383&(g[b+7]<<8|g[b+6]),g=16383&(g[b+9]<<8|g[b+8]),1&ue||3<(ue>>1&7)||!(ue>>4&1)||ue>>5>=je.Ja||!Xe||!g?g=0:(J&&(J[0]=Xe),te&&(te[0]=g),g=1))}if(!g||(J=J[0],Oe=Oe[0],Ve&&(he[0]!=J||Ne[0]!=Oe)))return 3;oe!=null&&(oe[0]=je,oe.offset=b-oe.w,e(4294967286>b-oe.w),e(oe.offset==oe.ha-N));break}return Fe==0||Fe==7&&Ve&&oe==null?(X!=null&&(X[0]|=je.na!=null&&0<je.na.length),L!=null&&(L[0]=J),W!=null&&(W[0]=Oe),0):Fe}function lo(g,b,N){var L=b.width,W=b.height,X=0,J=0,te=L,oe=W;if(b.Da=g!=null&&0<g.Da,b.Da&&(te=g.cd,oe=g.bd,X=g.v,J=g.j,11>N||(X&=-2,J&=-2),0>X||0>J||0>=te||0>=oe||X+te>L||J+oe>W))return 0;if(b.v=X,b.j=J,b.va=X+te,b.o=J+oe,b.U=te,b.T=oe,b.da=g!=null&&0<g.da,b.da){if(!$e(te,oe,N=[g.ib],X=[g.hb]))return 0;b.ib=N[0],b.hb=X[0]}return b.ob=g!=null&&g.ob,b.Kb=g==null||!g.Sd,b.da&&(b.ob=b.ib<3*L/4&&b.hb<3*W/4,b.Kb=0),1}function mu(g){if(g==null)return 2;if(11>g.S){var b=g.f.RGBA;b.fb+=(g.height-1)*b.A,b.A=-b.A}else b=g.f.kb,g=g.height,b.O+=(g-1)*b.fa,b.fa=-b.fa,b.N+=(g-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(g-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(g-1)*b.lb,b.lb=-b.lb);return 0}function Sa(g,b,N,L){if(L==null||0>=g||0>=b)return 2;if(N!=null){if(N.Da){var W=N.cd,X=N.bd,J=-2&N.v,te=-2&N.j;if(0>J||0>te||0>=W||0>=X||J+W>g||te+X>b)return 2;g=W,b=X}if(N.da){if(!$e(g,b,W=[N.ib],X=[N.hb]))return 2;g=W[0],b=X[0]}}L.width=g,L.height=b;e:{var oe=L.width,he=L.height;if(g=L.S,0>=oe||0>=he||!(g>=sd&&13>g))g=2;else{if(0>=L.Rd&&L.sd==null){J=X=W=b=0;var Ne=(te=oe*pd[g])*he;if(11>g||(X=(he+1)/2*(b=(oe+1)/2),g==12&&(J=(W=oe)*he)),(he=o(Ne+2*X+J))==null){g=1;break e}L.sd=he,11>g?((oe=L.f.RGBA).eb=he,oe.fb=0,oe.A=te,oe.size=Ne):((oe=L.f.kb).y=he,oe.O=0,oe.fa=te,oe.Fd=Ne,oe.f=he,oe.N=0+Ne,oe.Ab=b,oe.Cd=X,oe.ea=he,oe.W=0+Ne+X,oe.Db=b,oe.Ed=X,g==12&&(oe.F=he,oe.J=0+Ne+2*X),oe.Tc=J,oe.lb=W)}if(b=1,W=L.S,X=L.width,J=L.height,W>=sd&&13>W)if(11>W)g=L.f.RGBA,b&=(te=Math.abs(g.A))*(J-1)+X<=g.size,b&=te>=X*pd[W],b&=g.eb!=null;else{g=L.f.kb,te=(X+1)/2,Ne=(J+1)/2,oe=Math.abs(g.fa),he=Math.abs(g.Ab);var Ve=Math.abs(g.Db),ue=Math.abs(g.lb),je=ue*(J-1)+X;b&=oe*(J-1)+X<=g.Fd,b&=he*(Ne-1)+te<=g.Cd,b=(b&=Ve*(Ne-1)+te<=g.Ed)&oe>=X&he>=te&Ve>=te,b&=g.y!=null,b&=g.f!=null,b&=g.ea!=null,W==12&&(b&=ue>=X,b&=je<=g.Tc,b&=g.F!=null)}else b=0;g=b?0:2}}return g!=0||N!=null&&N.fd&&(g=mu(L)),g}var Fo=64,vs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ss=24,Ua=32,Ba=8,co=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];et("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(g){return g},R.Predictor2=function(g,b,N){return b[N+0]},R.Predictor3=function(g,b,N){return b[N+1]},R.Predictor4=function(g,b,N){return b[N-1]},R.Predictor5=function(g,b,N){return vt(vt(g,b[N+1]),b[N+0])},R.Predictor6=function(g,b,N){return vt(g,b[N-1])},R.Predictor7=function(g,b,N){return vt(g,b[N+0])},R.Predictor8=function(g,b,N){return vt(b[N-1],b[N+0])},R.Predictor9=function(g,b,N){return vt(b[N+0],b[N+1])},R.Predictor10=function(g,b,N){return vt(vt(g,b[N-1]),vt(b[N+0],b[N+1]))},R.Predictor11=function(g,b,N){var L=b[N+0];return 0>=dt(L>>24&255,g>>24&255,(b=b[N-1])>>24&255)+dt(L>>16&255,g>>16&255,b>>16&255)+dt(L>>8&255,g>>8&255,b>>8&255)+dt(255&L,255&g,255&b)?L:g},R.Predictor12=function(g,b,N){var L=b[N+0];return(Ue((g>>24&255)+(L>>24&255)-((b=b[N-1])>>24&255))<<24|Ue((g>>16&255)+(L>>16&255)-(b>>16&255))<<16|Ue((g>>8&255)+(L>>8&255)-(b>>8&255))<<8|Ue((255&g)+(255&L)-(255&b)))>>>0},R.Predictor13=function(g,b,N){var L=b[N-1];return(ot((g=vt(g,b[N+0]))>>24&255,L>>24&255)<<24|ot(g>>16&255,L>>16&255)<<16|ot(g>>8&255,L>>8&255)<<8|ot(255&g,255&L))>>>0};var uc=R.PredictorAdd0;R.PredictorAdd1=gt,et("Predictor2","PredictorAdd2"),et("Predictor3","PredictorAdd3"),et("Predictor4","PredictorAdd4"),et("Predictor5","PredictorAdd5"),et("Predictor6","PredictorAdd6"),et("Predictor7","PredictorAdd7"),et("Predictor8","PredictorAdd8"),et("Predictor9","PredictorAdd9"),et("Predictor10","PredictorAdd10"),et("Predictor11","PredictorAdd11"),et("Predictor12","PredictorAdd12"),et("Predictor13","PredictorAdd13");var dc=R.PredictorAdd2;mt("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Lr,nd=R.ColorIndexInverseTransform,Va=R.MapARGB,za=R.VP8LColorIndexInverseTransformAlpha,Ai=R.MapAlpha,uo=R.VP8LPredictorsAdd=[];uo.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var hc,fc,ho,fo,qa,Sl,Ms,po,zi,Ys,Mn,Rn,ar,Pr,Ha,_a,_l,gu,wh,np,rp,ip,xh,Sh,El,Ks,yu,Os,Nl=o(511),rd=o(2041),vu=o(225),bu=o(767),id=0,mo=rd,wu=vu,qi=bu,Ti=Nl,sd=0,Hi=1,ad=2,Xs=3,xu=4,pc=5,Uo=6,Su=7,od=8,mc=9,ld=10,Qs=[2,3,7],gc=[3,3,11],Al=[280,256,256,256,40],cd=[0,1,1,1,0],_u=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Js=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Zs=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Bo=8,ea=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ta=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fs=null,sp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_h=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ud=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ap=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ci=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],as=[],Tr=[],Ea=[],Vo=1,Eh=2,go=[],ji=[];ht("UpsampleRgbLinePair",Ei,3),ht("UpsampleBgrLinePair",Jn,3),ht("UpsampleRgbaLinePair",is,4),ht("UpsampleBgraLinePair",Fa,4),ht("UpsampleArgbLinePair",Oa,4),ht("UpsampleRgba4444LinePair",Ls,2),ht("UpsampleRgb565LinePair",Ni,2);var Tl=R.UpsampleRgbLinePair,Nh=R.UpsampleBgrLinePair,yc=R.UpsampleRgbaLinePair,dd=R.UpsampleBgraLinePair,zo=R.UpsampleArgbLinePair,Ga=R.UpsampleRgba4444LinePair,qo=R.UpsampleRgb565LinePair,na=16,vc=1<<na-1,Cl=-227,Ho=482,hd=6,Go=0,Ri=o(256),fd=o(256),op=o(256),Fg=o(256),Ug=o(Ho-Cl),Bg=o(Ho-Cl);oo("YuvToRgbRow",Ei,3),oo("YuvToBgrRow",Jn,3),oo("YuvToRgbaRow",is,4),oo("YuvToBgraRow",Fa,4),oo("YuvToArgbRow",Oa,4),oo("YuvToRgba4444Row",Ls,2),oo("YuvToRgb565Row",Ni,2);var Mr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bc=[0,2,8],Eu=[8,7,6,4,4,2,2,2,1,1,1,1],Nu=1;this.WebPDecodeRGBA=function(g,b,N,L,W){var X=Hi,J=new Qe,te=new Dt;J.ba=te,te.S=X,te.width=[te.width],te.height=[te.height];var oe=te.width,he=te.height,Ne=new Lt;if(Ne==null||g==null)var Ve=2;else e(Ne!=null),Ve=xa(g,b,N,Ne.width,Ne.height,Ne.Pd,Ne.Qd,Ne.format,null);if(Ve!=0?oe=0:(oe!=null&&(oe[0]=Ne.width[0]),he!=null&&(he[0]=Ne.height[0]),oe=1),oe){te.width=te.width[0],te.height=te.height[0],L!=null&&(L[0]=te.width),W!=null&&(W[0]=te.height);e:{if(L=new hi,(W=new st).data=g,W.w=b,W.ha=N,W.kd=1,b=[0],e(W!=null),((g=xa(W.data,W.w,W.ha,null,null,null,b,null,W))==0||g==7)&&b[0]&&(g=4),(b=g)==0){if(e(J!=null),L.data=W.data,L.w=W.w+W.offset,L.ha=W.ha-W.offset,L.put=Ft,L.ac=Zr,L.bc=pa,L.ma=J,W.xa){if((g=Ia())==null){J=1;break e}if((function(ue,je){var Oe=[0],Xe=[0],Fe=[0];t:for(;;){if(ue==null)return 0;if(je==null)return ue.a=2,0;if(ue.l=je,ue.a=0,ge(ue.m,je.data,je.w,je.ha),!Xi(ue.m,Oe,Xe,Fe)){ue.a=3;break t}if(ue.xb=Eh,je.width=Oe[0],je.height=Xe[0],!js(Oe[0],Xe[0],1,ue,null))break t;return 1}return e(ue.a!=0),0})(g,L)){if(L=(b=Sa(L.width,L.height,J.Oa,J.ba))==0){t:{L=g;n:for(;;){if(L==null){L=0;break t}if(e(L.s.yc!=null),e(L.s.Ya!=null),e(0<L.s.Wb),e((N=L.l)!=null),e((W=N.ma)!=null),L.xb!=0){if(L.ca=W.ba,L.tb=W.tb,e(L.ca!=null),!lo(W.Oa,N,Xs)){L.a=2;break n}if(!Fi(L,N.width)||N.da)break n;if((N.da||Bt(L.ca.S))&&He(),11>L.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),L.ca.f.kb.F!=null&&He()),L.Pb&&0<L.s.ua&&L.s.vb.X==null&&!z(L.s.vb,L.s.Wa.Xa)){L.a=1;break n}L.xb=0}if(!Oi(L,L.V,L.Ba,L.c,L.i,N.o,di))break n;W.Dc=L.Ma,L=1;break t}e(L.a!=0),L=0}L=!L}L&&(b=g.a)}else b=g.a}else{if((g=new Nr)==null){J=1;break e}if(g.Fa=W.na,g.P=W.P,g.qc=W.Sa,gs(g,L)){if((b=Sa(L.width,L.height,J.Oa,J.ba))==0){if(g.Aa=0,N=J.Oa,e((W=g)!=null),N!=null){if(0<(oe=0>(oe=N.Md)?0:100<oe?255:255*oe/100)){for(he=Ne=0;4>he;++he)12>(Ve=W.pb[he]).lc&&(Ve.ia=oe*Eu[0>Ve.lc?0:Ve.lc]>>3),Ne|=Ve.ia;Ne&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=N.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}(function(ue,je){if(ue==null)return 0;if(je==null)return pn(ue,2,"NULL VP8Io parameter in VP8Decode().");if(!ue.cb&&!gs(ue,je))return 0;if(e(ue.cb),je.ac==null||je.ac(je)){je.ob&&(ue.L=0);var Oe=bc[ue.L];if(ue.L==2?(ue.yb=0,ue.zb=0):(ue.yb=je.v-Oe>>4,ue.zb=je.j-Oe>>4,0>ue.yb&&(ue.yb=0),0>ue.zb&&(ue.zb=0)),ue.Va=je.o+15+Oe>>4,ue.Hb=je.va+15+Oe>>4,ue.Hb>ue.za&&(ue.Hb=ue.za),ue.Va>ue.Ub&&(ue.Va=ue.Ub),0<ue.L){var Xe=ue.ed;for(Oe=0;4>Oe;++Oe){var Fe;if(ue.Qa.Cb){var Ke=ue.Qa.Lb[Oe];ue.Qa.Fb||(Ke+=Xe.Tb)}else Ke=Xe.Tb;for(Fe=0;1>=Fe;++Fe){var tt=ue.gd[Oe][Fe],ut=Ke;if(Xe.Pc&&(ut+=Xe.vd[0],Fe&&(ut+=Xe.od[0])),0<(ut=0>ut?0:63<ut?63:ut)){var it=ut;0<Xe.wb&&(it=4<Xe.wb?it>>2:it>>1)>9-Xe.wb&&(it=9-Xe.wb),1>it&&(it=1),tt.dd=it,tt.tc=2*ut+it,tt.ld=40<=ut?2:15<=ut?1:0}else tt.tc=0;tt.La=Fe}}}Oe=0}else pn(ue,6,"Frame setup failed"),Oe=ue.a;if(Oe=Oe==0){if(Oe){ue.$c=0,0<ue.Aa||(ue.Ic=Nu);t:{Oe=ue.Ic,Xe=4*(it=ue.za);var Rt=32*it,St=it+1,Zt=0<ue.L?it*(0<ue.Aa?2:1):0,At=(ue.Aa==2?2:1)*it;if((tt=Xe+832+(Fe=3*(16*Oe+bc[ue.L])/2*Rt)+(Ke=ue.Fa!=null&&0<ue.Fa.length?ue.Kc.c*ue.Kc.i:0))!=tt)Oe=0;else{if(tt>ue.Vb){if(ue.Vb=0,ue.Ec=o(tt),ue.Fc=0,ue.Ec==null){Oe=pn(ue,1,"no memory during frame initialization.");break t}ue.Vb=tt}tt=ue.Ec,ut=ue.Fc,ue.Ac=tt,ue.Bc=ut,ut+=Xe,ue.Gd=u(Rt,Do),ue.Hd=0,ue.rb=u(St+1,ms),ue.sb=1,ue.wa=Zt?u(Zt,Ui):null,ue.Y=0,ue.D.Nb=0,ue.D.wa=ue.wa,ue.D.Y=ue.Y,0<ue.Aa&&(ue.D.Y+=it),e(!0),ue.oc=tt,ue.pc=ut,ut+=832,ue.ya=u(At,to),ue.aa=0,ue.D.ya=ue.ya,ue.D.aa=ue.aa,ue.Aa==2&&(ue.D.aa+=it),ue.R=16*it,ue.B=8*it,it=(Rt=bc[ue.L])*ue.R,Rt=Rt/2*ue.B,ue.sa=tt,ue.ta=ut+it,ue.qa=ue.sa,ue.ra=ue.ta+16*Oe*ue.R+Rt,ue.Ha=ue.qa,ue.Ia=ue.ra+8*Oe*ue.B+Rt,ue.$c=0,ut+=Fe,ue.mb=Ke?tt:null,ue.nb=Ke?ut:null,e(ut+Ke<=ue.Fc+ue.Vb),Da(ue),s(ue.Ac,ue.Bc,0,Xe),Oe=1}}if(Oe){if(je.ka=0,je.y=ue.sa,je.O=ue.ta,je.f=ue.qa,je.N=ue.ra,je.ea=ue.Ha,je.Vd=ue.Ia,je.fa=ue.R,je.Rc=ue.B,je.F=null,je.J=0,!id){for(Oe=-255;255>=Oe;++Oe)Nl[255+Oe]=0>Oe?-Oe:Oe;for(Oe=-1020;1020>=Oe;++Oe)rd[1020+Oe]=-128>Oe?-128:127<Oe?127:Oe;for(Oe=-112;112>=Oe;++Oe)vu[112+Oe]=-16>Oe?-16:15<Oe?15:Oe;for(Oe=-255;510>=Oe;++Oe)bu[255+Oe]=0>Oe?0:255<Oe?255:Oe;id=1}Ms=ei,po=gl,Ys=_i,Mn=yl,Rn=ya,zi=lc,ar=xl,Pr=ks,Ha=$,_a=de,_l=Oo,gu=_,wh=xe,np=Re,rp=$s,ip=ys,xh=ao,Sh=Mo,Tr[0]=Pa,Tr[1]=vl,Tr[2]=ro,Tr[3]=Po,Tr[4]=ti,Tr[5]=io,Tr[6]=zr,Tr[7]=Bn,Tr[8]=so,Tr[9]=es,as[0]=Is,as[1]=ko,as[2]=Lo,as[3]=va,as[4]=ba,as[5]=Vi,as[6]=La,Ea[0]=wa,Ea[1]=bl,Ea[2]=Ds,Ea[3]=wl,Ea[4]=kr,Ea[5]=ns,Ea[6]=qs,Oe=1}else Oe=0}Oe&&(Oe=(function(yn,pr){for(yn.M=0;yn.M<yn.Va;++yn.M){var nn,_t=yn.Jc[yn.M&yn.Xb],yt=yn.m,vr=yn;for(nn=0;nn<vr.za;++nn){var Yt=yt,ln=vr,Hn=ln.Ac,ni=ln.Bc+4*nn,Ii=ln.zc,or=ln.ya[ln.aa+nn];if(ln.Qa.Bb?or.$b=Z(Yt,ln.Pa.jb[0])?2+Z(Yt,ln.Pa.jb[2]):Z(Yt,ln.Pa.jb[1]):or.$b=0,ln.kc&&(or.Ad=Z(Yt,ln.Bd)),or.Za=!Z(Yt,145)+0,or.Za){var qr=or.Ob,Gi=0;for(ln=0;4>ln;++ln){var Hr,fn=Ii[0+ln];for(Hr=0;4>Hr;++Hr){fn=Ci[Hn[ni+Hr]][fn];for(var Dn=ud[Z(Yt,fn[0])];0<Dn;)Dn=ud[2*Dn+Z(Yt,fn[Dn])];fn=-Dn,Hn[ni+Hr]=fn}r(qr,Gi,Hn,ni,4),Gi+=4,Ii[0+ln]=fn}}else fn=Z(Yt,156)?Z(Yt,128)?1:3:Z(Yt,163)?2:0,or.Ob[0]=fn,s(Hn,ni,fn,4),s(Ii,0,fn,4);or.Dd=Z(Yt,142)?Z(Yt,114)?Z(Yt,183)?1:3:2:0}if(vr.m.Ka)return pn(yn,7,"Premature end-of-partition0 encountered.");for(;yn.ja<yn.za;++yn.ja){if(vr=_t,Yt=(yt=yn).rb[yt.sb-1],Hn=yt.rb[yt.sb+yt.ja],nn=yt.ya[yt.aa+yt.ja],ni=yt.kc?nn.Ad:0)Yt.la=Hn.la=0,nn.Za||(Yt.Na=Hn.Na=0),nn.Hc=0,nn.Gc=0,nn.ia=0;else{var br,On;if(Yt=Hn,Hn=vr,ni=yt.Pa.Xc,Ii=yt.ya[yt.aa+yt.ja],or=yt.pb[Ii.$b],ln=Ii.ad,qr=0,Gi=yt.rb[yt.sb-1],fn=Hr=0,s(ln,qr,0,384),Ii.Za)var ri=0,wr=ni[3];else{Dn=o(16);var kn=Yt.Na+Gi.Na;if(kn=Fs(Hn,ni[1],kn,or.Eb,0,Dn,0),Yt.Na=Gi.Na=(0<kn)+0,1<kn)Ms(Dn,0,ln,qr);else{var Or=Dn[0]+3>>3;for(Dn=0;256>Dn;Dn+=16)ln[qr+Dn]=Or}ri=1,wr=ni[0]}var Gn=15&Yt.la,Gr=15&Gi.la;for(Dn=0;4>Dn;++Dn){var $r=1&Gr;for(Or=On=0;4>Or;++Or)Gn=Gn>>1|($r=(kn=Fs(Hn,wr,kn=$r+(1&Gn),or.Sc,ri,ln,qr))>ri)<<7,On=On<<2|(3<kn?3:1<kn?2:ln[qr+0]!=0),qr+=16;Gn>>=4,Gr=Gr>>1|$r<<7,Hr=(Hr<<8|On)>>>0}for(wr=Gn,ri=Gr>>4,br=0;4>br;br+=2){for(On=0,Gn=Yt.la>>4+br,Gr=Gi.la>>4+br,Dn=0;2>Dn;++Dn){for($r=1&Gr,Or=0;2>Or;++Or)kn=$r+(1&Gn),Gn=Gn>>1|($r=0<(kn=Fs(Hn,ni[2],kn,or.Qc,0,ln,qr)))<<3,On=On<<2|(3<kn?3:1<kn?2:ln[qr+0]!=0),qr+=16;Gn>>=2,Gr=Gr>>1|$r<<5}fn|=On<<4*br,wr|=Gn<<4<<br,ri|=(240&Gr)<<br}Yt.la=wr,Gi.la=ri,Ii.Hc=Hr,Ii.Gc=fn,Ii.ia=43690&fn?0:or.ia,ni=!(Hr|fn)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[nn.$b][nn.Za],yt.wa[yt.Y+yt.ja].La|=!ni),vr.Ka)return pn(yn,7,"Premature end-of-file encountered.")}if(Da(yn),yt=pr,vr=1,nn=(_t=yn).D,Yt=0<_t.L&&_t.M>=_t.zb&&_t.M<=_t.Va,_t.Aa==0)t:{if(nn.M=_t.M,nn.uc=Yt,Ps(_t,nn),vr=1,nn=(On=_t.D).Nb,Yt=(fn=bc[_t.L])*_t.R,Hn=fn/2*_t.B,Dn=16*nn*_t.R,Or=8*nn*_t.B,ni=_t.sa,Ii=_t.ta-Yt+Dn,or=_t.qa,ln=_t.ra-Hn+Or,qr=_t.Ha,Gi=_t.Ia-Hn+Or,Gr=(Gn=On.M)==0,Hr=Gn>=_t.Va-1,_t.Aa==2&&Ps(_t,On),On.uc)for($r=(kn=_t).D.M,e(kn.D.uc),On=kn.yb;On<kn.Hb;++On){ri=On,wr=$r;var Zn=(In=(Wr=kn).D).Nb;br=Wr.R;var In=In.wa[In.Y+ri],$i=Wr.sa,Cr=Wr.ta+16*Zn*br+16*ri,zt=In.dd,Gt=In.tc;if(Gt!=0)if(e(3<=Gt),Wr.L==1)0<ri&&ip($i,Cr,br,Gt+4),In.La&&Sh($i,Cr,br,Gt),0<wr&&rp($i,Cr,br,Gt+4),In.La&&xh($i,Cr,br,Gt);else{var Ln=Wr.B,bs=Wr.qa,ra=Wr.ra+8*Zn*Ln+8*ri,os=Wr.Ha,Wr=Wr.Ia+8*Zn*Ln+8*ri;Zn=In.ld,0<ri&&(Pr($i,Cr,br,Gt+4,zt,Zn),_a(bs,ra,os,Wr,Ln,Gt+4,zt,Zn)),In.La&&(gu($i,Cr,br,Gt,zt,Zn),np(bs,ra,os,Wr,Ln,Gt,zt,Zn)),0<wr&&(ar($i,Cr,br,Gt+4,zt,Zn),Ha(bs,ra,os,Wr,Ln,Gt+4,zt,Zn)),In.La&&(_l($i,Cr,br,Gt,zt,Zn),wh(bs,ra,os,Wr,Ln,Gt,zt,Zn))}}if(_t.ia&&alert("todo:DitherRow"),yt.put!=null){if(On=16*Gn,Gn=16*(Gn+1),Gr?(yt.y=_t.sa,yt.O=_t.ta+Dn,yt.f=_t.qa,yt.N=_t.ra+Or,yt.ea=_t.Ha,yt.W=_t.Ia+Or):(On-=fn,yt.y=ni,yt.O=Ii,yt.f=or,yt.N=ln,yt.ea=qr,yt.W=Gi),Hr||(Gn-=fn),Gn>yt.o&&(Gn=yt.o),yt.F=null,yt.J=null,_t.Fa!=null&&0<_t.Fa.length&&On<Gn&&(yt.J=y(_t,yt,On,Gn-On),yt.F=_t.mb,yt.F==null&&yt.F.length==0)){vr=pn(_t,3,"Could not decode alpha data.");break t}On<yt.j&&(fn=yt.j-On,On=yt.j,e(!(1&fn)),yt.O+=_t.R*fn,yt.N+=_t.B*(fn>>1),yt.W+=_t.B*(fn>>1),yt.F!=null&&(yt.J+=yt.width*fn)),On<Gn&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=On-yt.j,yt.U=yt.va-yt.v,yt.T=Gn-On,vr=yt.put(yt))}nn+1!=_t.Ic||Hr||(r(_t.sa,_t.ta-Yt,ni,Ii+16*_t.R,Yt),r(_t.qa,_t.ra-Hn,or,ln+8*_t.B,Hn),r(_t.Ha,_t.Ia-Hn,qr,Gi+8*_t.B,Hn))}if(!vr)return pn(yn,6,"Output aborted.")}return 1})(ue,je)),je.bc!=null&&je.bc(je),Oe&=1}return Oe?(ue.cb=0,Oe):0})(g,L)||(b=g.a)}}else b=g.a}b==0&&J.Oa!=null&&J.Oa.fd&&(b=mu(J.ba))}J=b}X=J!=0?null:11>X?te.f.RGBA.eb:te.f.kb.y}else X=null;return X};var pd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(R,q){for(var j="",F=0;F<4;F++)j+=String.fromCharCode(R[q++]);return j}function m(R,q){return R[q+0]|R[q+1]<<8}function x(R,q){return(R[q+0]|R[q+1]<<8|R[q+2]<<16)>>>0}function E(R,q){return(R[q+0]|R[q+1]<<8|R[q+2]<<16|R[q+3]<<24)>>>0}new f;var w=[0],A=[0],D=[],C=new f,k=n,H=(function(R,q){var j={},F=0,M=!1,ne=0,Se=0;if(j.frames=[],!(function(P,Y){for(var re=0;re<4;re++)if(P[Y+re]!="RIFF".charCodeAt(re))return!0;return!1})(R,q)){for(E(R,q+=4),q+=8;q<R.length;){var le=p(R,q),ve=E(R,q+=4);q+=4;var ye=ve+(1&ve);switch(le){case"VP8 ":case"VP8L":j.frames[F]===void 0&&(j.frames[F]={}),(Q=j.frames[F]).src_off=M?Se:q-8,Q.src_size=ne+ve+8,F++,M&&(M=!1,ne=0,Se=0);break;case"VP8X":(Q=j.header={}).feature_flags=R[q];var ge=q+4;Q.canvas_width=1+x(R,ge),ge+=3,Q.canvas_height=1+x(R,ge),ge+=3;break;case"ALPH":M=!0,ne=ye+8,Se=q-8;break;case"ANIM":(Q=j.header).bgcolor=E(R,q),ge=q+4,Q.loop_count=m(R,ge),ge+=2;break;case"ANMF":var we,Q;(Q=j.frames[F]={}).offset_x=2*x(R,q),q+=3,Q.offset_y=2*x(R,q),q+=3,Q.width=1+x(R,q),q+=3,Q.height=1+x(R,q),q+=3,Q.duration=x(R,q),q+=3,we=R[q++],Q.dispose=1&we,Q.blend=we>>1&1}le!="ANMF"&&(q+=ye)}return j}})(k,0);H.response=k,H.rgbaoutput=!0,H.dataurl=!1;var G=H.header?H.header:null,V=H.frames?H.frames:null;if(G){G.loop_counter=G.loop_count,w=[G.canvas_height],A=[G.canvas_width];for(var ce=0;ce<V.length&&V[ce].blend!=0;ce++);}var se=V[0],U=C.WebPDecodeRGBA(k,se.src_off,se.src_size,A,w);se.rgba=U,se.imgwidth=A[0],se.imgheight=w[0];for(var I=0;I<A[0]*w[0]*4;I++)D[I]=U[I];return this.width=A,this.height=w,this.data=D,this}(function(n){var e,t,r,s,o,u,d,f,p,m=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new f,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new u,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new u,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new x(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,f=this.internal.Matrix,p=new m}]);var x=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=P;Object.defineProperty(this,"pdf",{get:function(){return Y}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(z){re=!!z}});var fe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return fe},set:function(z){fe=!!z}});var me=0;Object.defineProperty(this,"posX",{get:function(){return me},set:function(z){isNaN(z)||(me=z)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(z){isNaN(z)||(_e=z)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(z){var Ie;typeof z=="number"?Ie=[z,z,z,z]:((Ie=new Array(4))[0]=z[0],Ie[1]=z.length>=2?z[1]:Ie[0],Ie[2]=z.length>=3?z[2]:Ie[0],Ie[3]=z.length>=4?z[3]:Ie[1]),p.margin=Ie}});var Me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Me},set:function(z){Me=z}});var Le=0;Object.defineProperty(this,"lastBreak",{get:function(){return Le},set:function(z){Le=z}});var Z=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Z},set:function(z){Z=z}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(z){z instanceof m&&(p=z)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(z){p.path=z}});var ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return ae},set:function(z){ae=z}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(z){var Ie;Ie=E(z),this.ctx.fillStyle=Ie.style,this.ctx.isFillTransparent=Ie.a===0,this.ctx.fillOpacity=Ie.a,this.pdf.setFillColor(Ie.r,Ie.g,Ie.b,{a:Ie.a}),this.pdf.setTextColor(Ie.r,Ie.g,Ie.b,{a:Ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(z){var Ie=E(z);this.ctx.strokeStyle=Ie.style,this.ctx.isStrokeTransparent=Ie.a===0,this.ctx.strokeOpacity=Ie.a,Ie.a===0?this.pdf.setDrawColor(255,255,255):(Ie.a,this.pdf.setDrawColor(Ie.r,Ie.g,Ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(z){["butt","round","square"].indexOf(z)!==-1&&(this.ctx.lineCap=z,this.pdf.setLineCap(z))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(z){isNaN(z)||(this.ctx.lineWidth=z,this.pdf.setLineWidth(z))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(z){["bevel","round","miter"].indexOf(z)!==-1&&(this.ctx.lineJoin=z,this.pdf.setLineJoin(z))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(z){isNaN(z)||(this.ctx.miterLimit=z,this.pdf.setMiterLimit(z))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(z){this.ctx.textBaseline=z}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(z){["right","end","center","left","start"].indexOf(z)!==-1&&(this.ctx.textAlign=z)}});var Te=null,Ee=null,pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return pe},set:function(z){Te=null,Ee=null,pe=z}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(z){var Ie;if(this.ctx.font=z,(Ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(z))!==null){var Be=Ie[1];Ie[2];var $e=Ie[3],Ce=Ie[4];Ie[5];var Ze=Ie[6],et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ce)[2];Ce=Math.floor(et==="px"?parseFloat(Ce)*this.pdf.internal.scaleFactor:et==="em"?parseFloat(Ce)*this.pdf.getFontSize():parseFloat(Ce)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ce);var xt=(function(mt){var ft,ct,bt=[],wt=mt.trim();if(wt==="")return Uy;if(wt in vS)return[vS[wt]];for(;wt!=="";){switch(ct=null,ft=(wt=wS(wt)).charAt(0)){case'"':case"'":ct=NM(wt.substring(1),ft);break;default:ct=AM(wt)}if(ct===null||(bt.push(ct[0]),(wt=wS(ct[1]))!==""&&wt.charAt(0)!==","))return Uy;wt=wt.replace(/^,/,"")}return bt})(Ze);if(this.fontFaces){var vt=(function(mt,ft){var ct=mt.getFontList(),bt=JSON.stringify(ct);if(Te===null||Ee!==bt){var wt=(function(qt){var Tt=[];return Object.keys(qt).forEach(function(dn){qt[dn].forEach(function(Bt){var Ot=null;switch(Bt){case"bold":Ot={family:dn,weight:"bold"};break;case"italic":Ot={family:dn,style:"italic"};break;case"bolditalic":Ot={family:dn,weight:"bold",style:"italic"};break;case"":case"normal":Ot={family:dn}}Ot!==null&&(Ot.ref={name:dn,style:Bt},Tt.push(Ot))})}),Tt})(ct);Te=(function(qt){for(var Tt={},dn=0;dn<qt.length;++dn){var Bt=Fy(qt[dn]),Ot=Bt.family,jn=Bt.stretch,Dt=Bt.style,Lt=Bt.weight;Tt[Ot]=Tt[Ot]||{},Tt[Ot][jn]=Tt[Ot][jn]||{},Tt[Ot][jn][Dt]=Tt[Ot][jn][Dt]||{},Tt[Ot][jn][Dt][Lt]=Bt}return Tt})(wt.concat(ft)),Ee=bt}return Te})(this.pdf,this.fontFaces),Ue=xt.map(function(mt){return{family:mt,stretch:"normal",weight:$e,style:Be}}),ot=(function(mt,ft,ct){for(var bt=(ct=ct||{}).defaultFontFamily||"times",wt=Object.assign({},EM,ct.genericFontFamilies||{}),qt=null,Tt=null,dn=0;dn<ft.length;++dn)if(wt[(qt=Fy(ft[dn])).family]&&(qt.family=wt[qt.family]),mt.hasOwnProperty(qt.family)){Tt=mt[qt.family];break}if(!(Tt=Tt||mt[bt]))throw new Error("Could not find a font-family for the rule '"+bS(qt)+"' and default family '"+bt+"'.");if(Tt=(function(Bt,Ot){if(Ot[Bt])return Ot[Bt];var jn=P1[Bt],Dt=jn<=P1.normal?-1:1,Lt=yS(Ot,qA,jn,Dt);if(!Lt)throw new Error("Could not find a matching font-stretch value for "+Bt);return Lt})(qt.stretch,Tt),Tt=(function(Bt,Ot){if(Ot[Bt])return Ot[Bt];for(var jn=zA[Bt],Dt=0;Dt<jn.length;++Dt)if(Ot[jn[Dt]])return Ot[jn[Dt]];throw new Error("Could not find a matching font-style for "+Bt)})(qt.style,Tt),!(Tt=(function(Bt,Ot){if(Ot[Bt])return Ot[Bt];if(Bt===400&&Ot[500])return Ot[500];if(Bt===500&&Ot[400])return Ot[400];var jn=_M[Bt],Dt=yS(Ot,HA,jn,Bt<400?-1:1);if(!Dt)throw new Error("Could not find a matching font-weight for value "+Bt);return Dt})(qt.weight,Tt)))throw new Error("Failed to resolve a font for the rule '"+bS(qt)+"'.");return Tt})(vt,Ue);this.pdf.setFont(ot.ref.name,ot.ref.style)}else{var dt="";($e==="bold"||parseInt($e,10)>=700||Be==="bold")&&(dt="bold"),Be==="italic"&&(dt+="italic"),dt.length===0&&(dt="normal");for(var gt="",De={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<xt.length;We++){if(this.pdf.internal.getFont(xt[We],dt,{noFallback:!0,disableWarning:!0})!==void 0){gt=xt[We];break}if(dt==="bolditalic"&&this.pdf.internal.getFont(xt[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)gt=xt[We],dt="bold";else if(this.pdf.internal.getFont(xt[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){gt=xt[We],dt="normal";break}}if(gt===""){for(var pt=0;pt<xt.length;pt++)if(De[xt[pt]]){gt=De[xt[pt]];break}}gt=gt===""?"Times":gt,this.pdf.setFont(gt,dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(z){this.ctx.globalCompositeOperation=z}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(z){this.ctx.globalAlpha=z}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(z){this.ctx.lineDashOffset=z,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(z){this.ctx.lineDash=z,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(z){this.ctx.ignoreClearRect=!!z}})};x.prototype.setLineDash=function(P){this.lineDash=P},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){V.call(this,"fill",!1)},x.prototype.stroke=function(){V.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(P,Y){if(isNaN(P)||isNaN(Y))throw gr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new u(P,Y));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new u(P,Y)},x.prototype.closePath=function(){var P=new u(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&nr(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){P=new u(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(P.x,P.y)},x.prototype.lineTo=function(P,Y){if(isNaN(P)||isNaN(Y))throw gr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new u(P,Y));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new u(re.x,re.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},x.prototype.quadraticCurveTo=function(P,Y,re,fe){if(isNaN(re)||isNaN(fe)||isNaN(P)||isNaN(Y))throw gr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var me=this.ctx.transform.applyToPoint(new u(re,fe)),_e=this.ctx.transform.applyToPoint(new u(P,Y));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:me.x,y:me.y}),this.ctx.lastPoint=new u(me.x,me.y)},x.prototype.bezierCurveTo=function(P,Y,re,fe,me,_e){if(isNaN(me)||isNaN(_e)||isNaN(P)||isNaN(Y)||isNaN(re)||isNaN(fe))throw gr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Me=this.ctx.transform.applyToPoint(new u(me,_e)),Le=this.ctx.transform.applyToPoint(new u(P,Y)),Z=this.ctx.transform.applyToPoint(new u(re,fe));this.path.push({type:"bct",x1:Le.x,y1:Le.y,x2:Z.x,y2:Z.y,x:Me.x,y:Me.y}),this.ctx.lastPoint=new u(Me.x,Me.y)},x.prototype.arc=function(P,Y,re,fe,me,_e){if(isNaN(P)||isNaN(Y)||isNaN(re)||isNaN(fe)||isNaN(me))throw gr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var Me=this.ctx.transform.applyToPoint(new u(P,Y));P=Me.x,Y=Me.y;var Le=this.ctx.transform.applyToPoint(new u(0,re)),Z=this.ctx.transform.applyToPoint(new u(0,0));re=Math.sqrt(Math.pow(Le.x-Z.x,2)+Math.pow(Le.y-Z.y,2))}Math.abs(me-fe)>=2*Math.PI&&(fe=0,me=2*Math.PI),this.path.push({type:"arc",x:P,y:Y,radius:re,startAngle:fe,endAngle:me,counterclockwise:_e})},x.prototype.arcTo=function(P,Y,re,fe,me){throw new Error("arcTo not implemented.")},x.prototype.rect=function(P,Y,re,fe){if(isNaN(P)||isNaN(Y)||isNaN(re)||isNaN(fe))throw gr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,Y),this.lineTo(P+re,Y),this.lineTo(P+re,Y+fe),this.lineTo(P,Y+fe),this.lineTo(P,Y),this.lineTo(P+re,Y),this.lineTo(P,Y)},x.prototype.fillRect=function(P,Y,re,fe){if(isNaN(P)||isNaN(Y)||isNaN(re)||isNaN(fe))throw gr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!w.call(this)){var me={};this.lineCap!=="butt"&&(me.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(me.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,Y,re,fe),this.fill(),me.hasOwnProperty("lineCap")&&(this.lineCap=me.lineCap),me.hasOwnProperty("lineJoin")&&(this.lineJoin=me.lineJoin)}},x.prototype.strokeRect=function(P,Y,re,fe){if(isNaN(P)||isNaN(Y)||isNaN(re)||isNaN(fe))throw gr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(P,Y,re,fe),this.stroke())},x.prototype.clearRect=function(P,Y,re,fe){if(isNaN(P)||isNaN(Y)||isNaN(re)||isNaN(fe))throw gr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,Y,re,fe))},x.prototype.save=function(P){P=typeof P!="boolean"||P;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var fe=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=fe}},x.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var E=function(P){var Y,re,fe,me;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))Y=0,re=0,fe=0,me=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(_e!==null)Y=parseInt(_e[1]),re=parseInt(_e[2]),fe=parseInt(_e[3]),me=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)Y=parseInt(_e[1]),re=parseInt(_e[2]),fe=parseInt(_e[3]),me=parseFloat(_e[4]);else{if(me=1,typeof P=="string"&&P.charAt(0)!=="#"){var Me=new PA(P);P=Me.ok?Me.toHex():"#000000"}P.length===4?(Y=P.substring(1,2),Y+=Y,re=P.substring(2,3),re+=re,fe=P.substring(3,4),fe+=fe):(Y=P.substring(1,3),re=P.substring(3,5),fe=P.substring(5,7)),Y=parseInt(Y,16),re=parseInt(re,16),fe=parseInt(fe,16)}}return{r:Y,g:re,b:fe,a:me,style:P}},w=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(P,Y,re,fe){if(isNaN(Y)||isNaN(re)||typeof P!="string")throw gr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(fe=isNaN(fe)?void 0:fe,!w.call(this)){var me=ye(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;F.call(this,{text:P,x:Y,y:re,scale:_e,angle:me,align:this.textAlign,maxWidth:fe})}},x.prototype.strokeText=function(P,Y,re,fe){if(isNaN(Y)||isNaN(re)||typeof P!="string")throw gr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){fe=isNaN(fe)?void 0:fe;var me=ye(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;F.call(this,{text:P,x:Y,y:re,scale:_e,renderingMode:"stroke",angle:me,align:this.textAlign,maxWidth:fe})}},x.prototype.measureText=function(P){if(typeof P!="string")throw gr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,re=this.pdf.internal.scaleFactor,fe=Y.internal.getFontSize(),me=Y.getStringUnitWidth(P)*fe/Y.internal.scaleFactor;return new function(_e){var Me=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Me}}),this}({width:me*=Math.round(96*re/72*1e4)/1e4})},x.prototype.scale=function(P,Y){if(isNaN(P)||isNaN(Y))throw gr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new f(P,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},x.prototype.rotate=function(P){if(isNaN(P))throw gr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new f(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},x.prototype.translate=function(P,Y){if(isNaN(P)||isNaN(Y))throw gr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new f(1,0,0,1,P,Y);this.ctx.transform=this.ctx.transform.multiply(re)},x.prototype.transform=function(P,Y,re,fe,me,_e){if(isNaN(P)||isNaN(Y)||isNaN(re)||isNaN(fe)||isNaN(me)||isNaN(_e))throw gr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Me=new f(P,Y,re,fe,me,_e);this.ctx.transform=this.ctx.transform.multiply(Me)},x.prototype.setTransform=function(P,Y,re,fe,me,_e){P=isNaN(P)?1:P,Y=isNaN(Y)?0:Y,re=isNaN(re)?0:re,fe=isNaN(fe)?1:fe,me=isNaN(me)?0:me,_e=isNaN(_e)?0:_e,this.ctx.transform=new f(P,Y,re,fe,me,_e)};var D=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(P,Y,re,fe,me,_e,Me,Le,Z){var ae=this.pdf.getImageProperties(P),Te=1,Ee=1,pe=1,z=1;fe!==void 0&&Le!==void 0&&(pe=Le/fe,z=Z/me,Te=ae.width/fe*Le/fe,Ee=ae.height/me*Z/me),_e===void 0&&(_e=Y,Me=re,Y=0,re=0),fe!==void 0&&Le===void 0&&(Le=fe,Z=me),fe===void 0&&Le===void 0&&(Le=ae.width,Z=ae.height);var Ie=this.ctx.transform.decompose(),Be=ye(Ie.rotate.shx),$e=new f,Ce=($e=($e=($e=$e.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new d(_e-Y*pe,Me-re*z,fe*Te,me*Ee));if(this.autoPaging){for(var Ze,et=C.call(this,Ce),xt=[],vt=0;vt<et.length;vt+=1)xt.indexOf(et[vt])===-1&&xt.push(et[vt]);G(xt);for(var Ue=xt[0],ot=xt[xt.length-1],dt=Ue;dt<ot+1;dt++){this.pdf.setPage(dt);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],De=dt===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=dt===1?0:We+(dt-2)*pt;if(this.ctx.clip_path.length!==0){var ft=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=H(Ze,this.posX+this.margin[3],-mt+De+this.ctx.prevPageLastElemOffset),ce.call(this,"fill",!0),this.path=ft}var ct=JSON.parse(JSON.stringify(Ce));ct=H([ct],this.posX+this.margin[3],-mt+De+this.ctx.prevPageLastElemOffset)[0];var bt=(dt>Ue||dt<ot)&&D.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,pt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,Be),bt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(P,"JPEG",Ce.x,Ce.y,Ce.w,Ce.h,null,null,Be)};var C=function(P,Y,re){var fe=[];Y=Y||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var me=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":fe.push(Math.floor((P.y+me)/re)+1);break;case"arc":fe.push(Math.floor((P.y+me-P.radius)/re)+1),fe.push(Math.floor((P.y+me+P.radius)/re)+1);break;case"qct":var _e=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);fe.push(Math.floor((_e.y+me)/re)+1),fe.push(Math.floor((_e.y+_e.h+me)/re)+1);break;case"bct":var Me=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);fe.push(Math.floor((Me.y+me)/re)+1),fe.push(Math.floor((Me.y+Me.h+me)/re)+1);break;case"rect":fe.push(Math.floor((P.y+me)/re)+1),fe.push(Math.floor((P.y+P.h+me)/re)+1)}for(var Le=0;Le<fe.length;Le+=1)for(;this.pdf.internal.getNumberOfPages()<fe[Le];)k.call(this);return fe},k=function(){var P=this.fillStyle,Y=this.strokeStyle,re=this.font,fe=this.lineCap,me=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=Y,this.font=re,this.lineCap=fe,this.lineWidth=me,this.lineJoin=_e},H=function(P,Y,re){for(var fe=0;fe<P.length;fe++)switch(P[fe].type){case"bct":P[fe].x2+=Y,P[fe].y2+=re;case"qct":P[fe].x1+=Y,P[fe].y1+=re;default:P[fe].x+=Y,P[fe].y+=re}return P},G=function(P){return P.sort(function(Y,re){return Y-re})},V=function(P,Y){var re=this.fillStyle,fe=this.strokeStyle,me=this.lineCap,_e=this.lineWidth,Me=Math.abs(_e*this.ctx.transform.scaleX),Le=this.lineJoin;if(this.autoPaging){for(var Z,ae,Te=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),pe=[],z=0;z<Ee.length;z++)if(Ee[z].x!==void 0)for(var Ie=C.call(this,Ee[z]),Be=0;Be<Ie.length;Be+=1)pe.indexOf(Ie[Be])===-1&&pe.push(Ie[Be]);for(var $e=0;$e<pe.length;$e++)for(;this.pdf.internal.getNumberOfPages()<pe[$e];)k.call(this);G(pe);for(var Ce=pe[0],Ze=pe[pe.length-1],et=Ce;et<Ze+1;et++){this.pdf.setPage(et),this.fillStyle=re,this.strokeStyle=fe,this.lineCap=me,this.lineWidth=Me,this.lineJoin=Le;var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=et===1?this.posY+this.margin[0]:this.margin[0],Ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],dt=et===1?0:Ue+(et-2)*ot;if(this.ctx.clip_path.length!==0){var gt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=H(Z,this.posX+this.margin[3],-dt+vt+this.ctx.prevPageLastElemOffset),ce.call(this,P,!0),this.path=gt}if(ae=JSON.parse(JSON.stringify(Te)),this.path=H(ae,this.posX+this.margin[3],-dt+vt+this.ctx.prevPageLastElemOffset),Y===!1||et===0){var De=(et>Ce||et<Ze)&&D.call(this);De&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,ot,null).clip().discardPath()),ce.call(this,P,Y),De&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}this.path=Te}else this.lineWidth=Me,ce.call(this,P,Y),this.lineWidth=_e},ce=function(P,Y){if((P!=="stroke"||Y||!A.call(this))&&(P==="stroke"||Y||!w.call(this))){for(var re,fe,me=[],_e=this.path,Me=0;Me<_e.length;Me++){var Le=_e[Me];switch(Le.type){case"begin":me.push({begin:!0});break;case"close":me.push({close:!0});break;case"mt":me.push({start:Le,deltas:[],abs:[]});break;case"lt":var Z=me.length;if(_e[Me-1]&&!isNaN(_e[Me-1].x)&&(re=[Le.x-_e[Me-1].x,Le.y-_e[Me-1].y],Z>0)){for(;Z>=0;Z--)if(me[Z-1].close!==!0&&me[Z-1].begin!==!0){me[Z-1].deltas.push(re),me[Z-1].abs.push(Le);break}}break;case"bct":re=[Le.x1-_e[Me-1].x,Le.y1-_e[Me-1].y,Le.x2-_e[Me-1].x,Le.y2-_e[Me-1].y,Le.x-_e[Me-1].x,Le.y-_e[Me-1].y],me[me.length-1].deltas.push(re);break;case"qct":var ae=_e[Me-1].x+2/3*(Le.x1-_e[Me-1].x),Te=_e[Me-1].y+2/3*(Le.y1-_e[Me-1].y),Ee=Le.x+2/3*(Le.x1-Le.x),pe=Le.y+2/3*(Le.y1-Le.y),z=Le.x,Ie=Le.y;re=[ae-_e[Me-1].x,Te-_e[Me-1].y,Ee-_e[Me-1].x,pe-_e[Me-1].y,z-_e[Me-1].x,Ie-_e[Me-1].y],me[me.length-1].deltas.push(re);break;case"arc":me.push({deltas:[],abs:[],arc:!0}),Array.isArray(me[me.length-1].abs)&&me[me.length-1].abs.push(Le)}}fe=Y?null:P==="stroke"?"stroke":"fill";for(var Be=!1,$e=0;$e<me.length;$e++)if(me[$e].arc)for(var Ce=me[$e].abs,Ze=0;Ze<Ce.length;Ze++){var et=Ce[Ze];et.type==="arc"?I.call(this,et.x,et.y,et.radius,et.startAngle,et.endAngle,et.counterclockwise,void 0,Y,!Be):M.call(this,et.x,et.y),Be=!0}else if(me[$e].close===!0)this.pdf.internal.out("h"),Be=!1;else if(me[$e].begin!==!0){var xt=me[$e].start.x,vt=me[$e].start.y;ne.call(this,me[$e].deltas,xt,vt),Be=!0}fe&&R.call(this,fe),Y&&q.call(this)}},se=function(P){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-re;case"top":return P+Y-re;case"hanging":return P+Y-2*re;case"middle":return P+Y/2-re;default:return P}},U=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(Y,re){this.colorStops.push([Y,re])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(P,Y,re,fe,me,_e,Me,Le,Z){for(var ae=le.call(this,re,fe,me,_e),Te=0;Te<ae.length;Te++){var Ee=ae[Te];Te===0&&(Z?j.call(this,Ee.x1+P,Ee.y1+Y):M.call(this,Ee.x1+P,Ee.y1+Y)),Se.call(this,P,Y,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}Le?q.call(this):R.call(this,Me)},R=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(P,Y){this.pdf.internal.out(t(P)+" "+r(Y)+" m")},F=function(P){var Y;switch(P.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var re,fe,me,_e=this.pdf.getTextDimensions(P.text),Me=se.call(this,P.y),Le=U.call(this,Me)-_e.h,Z=this.ctx.transform.applyToPoint(new u(P.x,Me));if(this.autoPaging){var ae=this.ctx.transform.decompose(),Te=new f;Te=(Te=(Te=Te.multiply(ae.translate)).multiply(ae.skew)).multiply(ae.scale);for(var Ee=this.ctx.transform.applyToRectangle(new d(P.x,Me,_e.w,_e.h)),pe=Te.applyToRectangle(new d(P.x,Le,_e.w,_e.h)),z=C.call(this,pe),Ie=[],Be=0;Be<z.length;Be+=1)Ie.indexOf(z[Be])===-1&&Ie.push(z[Be]);G(Ie);for(var $e=Ie[0],Ce=Ie[Ie.length-1],Ze=$e;Ze<Ce+1;Ze++){this.pdf.setPage(Ze);var et=Ze===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vt=this.pdf.internal.pageSize.height-this.margin[2],Ue=vt-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],dt=ot-this.margin[3],gt=Ze===1?0:xt+(Ze-2)*Ue;if(this.ctx.clip_path.length!==0){var De=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=H(re,this.posX+this.margin[3],-1*gt+et),ce.call(this,"fill",!0),this.path=De}var We=H([JSON.parse(JSON.stringify(pe))],this.posX+this.margin[3],-gt+et+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*P.scale),me=this.lineWidth,this.lineWidth=me*P.scale);var pt=this.autoPaging!=="text";if(pt||We.y+We.h<=vt){if(pt||We.y>=et&&We.x<=ot){var mt=pt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ot-We.x)[0],ft=H([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-gt+et+this.ctx.prevPageLastElemOffset)[0],ct=pt&&(Ze>$e||Ze<Ce)&&D.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dt,Ue,null).clip().discardPath()),this.pdf.text(mt,ft.x,ft.y,{angle:P.angle,align:Y,renderingMode:P.renderingMode}),ct&&this.pdf.restoreGraphicsState()}}else We.y<vt&&(this.ctx.prevPageLastElemOffset+=vt-We.y);P.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=me)}}else P.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*P.scale),me=this.lineWidth,this.lineWidth=me*P.scale),this.pdf.text(P.text,Z.x+this.posX,Z.y+this.posY,{angle:P.angle,align:Y,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=me)},M=function(P,Y,re,fe){re=re||0,fe=fe||0,this.pdf.internal.out(t(P+re)+" "+r(Y+fe)+" l")},ne=function(P,Y,re){return this.pdf.lines(P,Y,re,null,null)},Se=function(P,Y,re,fe,me,_e,Me,Le){this.pdf.internal.out([e(s(re+P)),e(o(fe+Y)),e(s(me+P)),e(o(_e+Y)),e(s(Me+P)),e(o(Le+Y)),"c"].join(" "))},le=function(P,Y,re,fe){for(var me=2*Math.PI,_e=Math.PI/2;Y>re;)Y-=me;var Me=Math.abs(re-Y);Me<me&&fe&&(Me=me-Me);for(var Le=[],Z=fe?-1:1,ae=Y;Me>1e-5;){var Te=ae+Z*Math.min(Me,_e);Le.push(ve.call(this,P,ae,Te)),Me-=Math.abs(Te-ae),ae=Te}return Le},ve=function(P,Y,re){var fe=(re-Y)/2,me=P*Math.cos(fe),_e=P*Math.sin(fe),Me=me,Le=-_e,Z=Me*Me+Le*Le,ae=Z+Me*me+Le*_e,Te=4/3*(Math.sqrt(2*Z*ae)-ae)/(Me*_e-Le*me),Ee=Me-Te*Le,pe=Le+Te*Me,z=Ee,Ie=-pe,Be=fe+Y,$e=Math.cos(Be),Ce=Math.sin(Be);return{x1:P*Math.cos(Y),y1:P*Math.sin(Y),x2:Ee*$e-pe*Ce,y2:Ee*Ce+pe*$e,x3:z*$e-Ie*Ce,y3:z*Ce+Ie*$e,x4:P*Math.cos(re),y4:P*Math.sin(re)}},ye=function(P){return 180*P/Math.PI},ge=function(P,Y,re,fe,me,_e){var Me=P+.5*(re-P),Le=Y+.5*(fe-Y),Z=me+.5*(re-me),ae=_e+.5*(fe-_e),Te=Math.min(P,me,Me,Z),Ee=Math.max(P,me,Me,Z),pe=Math.min(Y,_e,Le,ae),z=Math.max(Y,_e,Le,ae);return new d(Te,pe,Ee-Te,z-pe)},we=function(P,Y,re,fe,me,_e,Me,Le){var Z,ae,Te,Ee,pe,z,Ie,Be,$e,Ce,Ze,et,xt,vt,Ue=re-P,ot=fe-Y,dt=me-re,gt=_e-fe,De=Me-me,We=Le-_e;for(ae=0;ae<41;ae++)$e=(Ie=(Te=P+(Z=ae/40)*Ue)+Z*((pe=re+Z*dt)-Te))+Z*(pe+Z*(me+Z*De-pe)-Ie),Ce=(Be=(Ee=Y+Z*ot)+Z*((z=fe+Z*gt)-Ee))+Z*(z+Z*(_e+Z*We-z)-Be),ae==0?(Ze=$e,et=Ce,xt=$e,vt=Ce):(Ze=Math.min(Ze,$e),et=Math.min(et,Ce),xt=Math.max(xt,$e),vt=Math.max(vt,Ce));return new d(Math.round(Ze),Math.round(et),Math.round(xt-Ze),Math.round(vt-et))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,Y,re=(P=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:Y}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Mt.API),(function(n){var e=function(u){var d,f,p,m,x,E,w,A,D,C;for(f=[],p=0,m=(u+=d="\0\0\0\0".slice(u.length%4||4)).length;m>p;p+=4)(x=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(E=(x=((x=((x=((x=(x-(C=x%85))/85)-(D=x%85))/85)-(A=x%85))/85)-(w=x%85))/85)%85,f.push(E+33,w+33,A+33,D+33,C+33)):f.push(122);return(function(k,H){for(var G=H;G>0;G--)k.pop()})(f,d.length),String.fromCharCode.apply(String,f)+"~>"},t=function(u){var d,f,p,m,x,E=String,w="length",A=255,D="charCodeAt",C="slice",k="replace";for(u[C](-2),u=u[C](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),p=[],m=0,x=(u+=d="uuuuu"[C](u[w]%5||5))[w];x>m;m+=5)f=52200625*(u[D](m)-33)+614125*(u[D](m+1)-33)+7225*(u[D](m+2)-33)+85*(u[D](m+3)-33)+(u[D](m+4)-33),p.push(A&f>>24,A&f>>16,A&f>>8,A&f);return(function(H,G){for(var V=G;V>0;V--)H.pop()})(p,d[w]),E.fromCharCode.apply(E,p)},r=function(u){return u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(u){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),d.test(u)===!1)return"";for(var f="",p=0;p<u.length;p+=2)f+=String.fromCharCode("0x"+(u[p]+u[p+1]));return f},o=function(u){for(var d=new Uint8Array(u.length),f=u.length;f--;)d[f]=u.charCodeAt(f);return(d=C1(d)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};n.processDataByFilters=function(u,d){var f=0,p=u||"",m=[];for(typeof(d=d||[])=="string"&&(d=[d]),f=0;f<d.length;f+=1)switch(d[f]){case"ASCII85Decode":case"/ASCII85Decode":p=t(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=s(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=r(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[f]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(Mt.API),(function(n){n.loadFile=function(e,t,r){return(function(s,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(f,p,m){var x=new XMLHttpRequest,E=0,w=function(A){var D=A.length,C=[],k=String.fromCharCode;for(E=0;E<D;E+=1)C.push(k(255&A.charCodeAt(E)));return C.join("")};if(x.open("GET",f,!p),x.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(x.onload=function(){x.status===200?m(w(this.responseText)):m(void 0)}),x.send(null),p&&x.status===200)return w(x.responseText)})(s,o,u)}catch{}return d})(e,t,r)},n.loadImageFile=n.loadFile})(Mt.API),(function(n){function e(){return(en.html2canvas?Promise.resolve(en.html2canvas):wy(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[],import.meta.url)).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):wy(()=>import("./purify.es-C65SP4u9.js"),[],import.meta.url)).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var r=function(d){var f=nr(d);return f==="undefined"?"undefined":f==="string"||d instanceof String?"string":f==="number"||d instanceof Number?"number":f==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":f==="object"?"object":"unknown"},s=function(d,f){var p=document.createElement(d);for(var m in f.className&&(p.className=f.className),f.innerHTML&&f.dompurify&&(p.innerHTML=f.dompurify.sanitize(f.innerHTML)),f.style)p.style[m]=f.style[m];return p},o=function d(f,p){for(var m=f.nodeType===3?document.createTextNode(f.nodeValue):f.cloneNode(!1),x=f.firstChild;x;x=x.nextSibling)p!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||m.appendChild(d(x,p));return f.nodeType===1&&(f.nodeName==="CANVAS"?(m.width=f.width,m.height=f.height,m.getContext("2d").drawImage(f,0,0)):f.nodeName!=="TEXTAREA"&&f.nodeName!=="SELECT"||(m.value=f.value),m.addEventListener("load",function(){m.scrollTop=f.scrollTop,m.scrollLeft=f.scrollLeft},!0)),m},u=function d(f){var p=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),m=d.convert(Promise.resolve(),p);return(m=m.setProgress(1,d,1,[d])).set(f)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(d,f){return d.__proto__=f||u.prototype,d},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(d,f){return this.then(function(){switch(f=f||(function(p){switch(r(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),f){case"string":return this.then(t).then(function(p){return this.set({src:s("div",{innerHTML:d,dompurify:p})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},u.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},f=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);f.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(f),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,f(this.prop.container,p)}).then(function(f){(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(f){var p=this.opt.jsPDF,m=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var w=0;w<m.length;++w){var A=m[w],D=A.src.find(function(C){return C.format==="truetype"});D&&p.addFont(D.url,A.ref.name,A.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,p.context2d.save(!0),f(this.prop.container,E)}).then(function(f){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(f),this.prop.canvas=f,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(d,f,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(d,f):this.outputPdf(d,f)},u.prototype.outputPdf=function(d,f){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,f)})},u.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},u.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(d){if(r(d)!=="object")return this;var f=Object.keys(d||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=d[p]};switch(p){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[p]=d[p]}}},this);return this.then(function(){return this.thenList(f)})},u.prototype.get=function(d,f){return this.then(function(){var p=d in u.template.prop?this.prop[d]:this.opt[d];return f?f(p):p})},u.prototype.setMargin=function(d){return this.then(function(){switch(r(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},u.prototype.setPageSize=function(d){function f(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(d=d||Mt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:f(d.inner.width,d.k),height:f(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},u.prototype.setProgress=function(d,f,p,m){return d!=null&&(this.progress.val=d),f!=null&&(this.progress.state=f),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(d,f,p,m){return this.setProgress(d?this.progress.val+d:null,f||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(d,f){var p=this;return this.thenCore(d,f,function(m,x){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(E){return p.updateProgress(null,m),E}).then(m,x).then(function(E){return p.updateProgress(1),E})})},u.prototype.thenCore=function(d,f,p){p=p||Promise.prototype.then;var m=this;d&&(d=d.bind(m)),f&&(f=f.bind(m));var x=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),E=p.call(x,d,f);return u.convert(E,m.__proto__)},u.prototype.thenExternal=function(d,f){return Promise.prototype.then.call(this,d,f)},u.prototype.thenList=function(d){var f=this;return d.forEach(function(p){f=f.thenCore(p)}),f},u.prototype.catch=function(d){d&&(d=d.bind(this));var f=Promise.prototype.catch.call(this,d);return u.convert(f,this)},u.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},u.prototype.error=function(d){return this.then(function(){throw new Error(d)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Mt.getPageSize=function(d,f,p){if(nr(d)==="object"){var m=d;d=m.orientation,f=m.unit||f,p=m.format||p}f=f||"mm",p=p||"a4",d=(""+(d||"P")).toLowerCase();var x,E=(""+p).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(f){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+f}var A,D=0,C=0;if(w.hasOwnProperty(E))D=w[E][1]/x,C=w[E][0]/x;else try{D=p[1],C=p[0]}catch{throw new Error("Invalid format: "+p)}if(d==="p"||d==="portrait")d="p",C>D&&(A=C,C=D,D=A);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",D>C&&(A=C,C=D,D=A)}return{width:C,height:D,unit:f,k:x,orientation:d}},n.html=function(d,f){(f=f||{}).callback=f.callback||function(){},f.html2canvas=f.html2canvas||{},f.html2canvas.canvas=f.html2canvas.canvas||this.canvas,f.jsPDF=f.jsPDF||this,f.fontFaces=f.fontFaces?f.fontFaces.map(Fy):null;var p=new u(f);return f.worker?p:p.from(d).doCallback()}})(Mt.API),Mt.API.addJS=function(n){return SS=n,this.internal.events.subscribe("postPutResources",function(){um=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(um+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+SS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){um!==void 0&&xS!==void 0&&this.internal.out("/Names <</JavaScript "+um+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),o=0;o<s.length;o++){var u=s[o],d=r.exec(u);if(d!=null){var f=d[1];t.internal.newObjectDeferredBegin(f,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(o=0;o<p;o++){var x=t.internal.newObject();m.push(x);var E=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+E.objId+" 0 R /XYZ null null null]>> endobj")}var w=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<m.length;o++)t.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+w+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,s,o){var u={title:s,options:o,children:[]};return r==null&&(r=this.root),r.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var u=r.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var f=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var p=0;p<r.children.length;p++)this.renderItems(r.children[p])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,s){for(var o=0;o<s.children.length;o++)r.count++,this.count_r(r,s.children[o]);return r.count}}])})(Mt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,s,o,u,d){var f,p=this.decode.DCT_DECODE,m=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,f=(function(x){for(var E,w=256*x.charCodeAt(4)+x.charCodeAt(5),A=x.length,D={width:0,height:0,numcomponents:1},C=4;C<A;C+=2){if(C+=w,e.indexOf(x.charCodeAt(C+1))!==-1){E=256*x.charCodeAt(C+5)+x.charCodeAt(C+6),D={width:256*x.charCodeAt(C+7)+x.charCodeAt(C+8),height:E,numcomponents:x.charCodeAt(C+9)};break}w=256*x.charCodeAt(C+2)+x.charCodeAt(C+3)}return D})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),f.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}m={data:t,width:f.width,height:f.height,colorSpace:d,bitsPerComponent:8,filter:p,index:r,alias:s}}return m}})(Mt.API),Mt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var s,o=cM(n,{checkCrc:!0}),u=o.width,d=o.height,f=o.channels,p=o.palette,m=o.depth;s=p&&f===1?(function(I){for(var R=I.width,q=I.height,j=I.data,F=I.palette,M=I.depth,ne=!1,Se=[],le=[],ve=void 0,ye=!1,ge=0,we=0;we<F.length;we++){var Q=Ax(F[we],4),P=Q[0],Y=Q[1],re=Q[2],fe=Q[3];Se.push(P,Y,re),fe!=null&&(fe===0?(ge++,le.length<1&&le.push(we)):fe<255&&(ye=!0))}if(ye||ge>1){ne=!0,le=void 0;var me=R*q;ve=new Uint8Array(me);for(var _e=new DataView(j.buffer),Me=0;Me<me;Me++){var Le=By(_e,Me,M),Z=Ax(F[Le],4)[3];ve[Me]=Z}}else ge===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ne?8:void 0,colorBytes:j,alphaBytes:ve,needSMask:ne,palette:Se,mask:le}})(o):f===2||f===4?(function(I){for(var R=I.data,q=I.width,j=I.height,F=I.channels,M=I.depth,ne=F===2?"DeviceGray":"DeviceRGB",Se=F-1,le=q*j,ve=Se,ye=le*ve,ge=1*le,we=Math.ceil(ye*M/8),Q=Math.ceil(ge*M/8),P=new Uint8Array(we),Y=new Uint8Array(Q),re=new DataView(R.buffer),fe=new DataView(P.buffer),me=new DataView(Y.buffer),_e=!1,Me=0;Me<le;Me++){for(var Le=Me*F,Z=0;Z<ve;Z++)IS(fe,By(re,Le+Z,M),Me*ve+Z,M);var ae=By(re,Le+ve,M);ae<(1<<M)-1&&(_e=!0),IS(me,ae,1*Me,M)}return{colorSpace:ne,colorsPerPixel:Se,sMaskBitsPerComponent:_e?M:void 0,colorBytes:P,alphaBytes:Y,needSMask:_e}})(o):(function(I){var R=I.data,q=I.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:q,colorsPerPixel:q==="DeviceGray"?1:3,colorBytes:R instanceof Uint16Array?(function(j){for(var F=j.length,M=new Uint8Array(2*F),ne=new DataView(M.buffer,M.byteOffset,M.byteLength),Se=0;Se<F;Se++)ne.setUint16(2*Se,j[Se],!1);return M})(R):R,needSMask:!1}})(o);var x,E,w,A=s,D=A.colorSpace,C=A.colorsPerPixel,k=A.sMaskBitsPerComponent,H=A.colorBytes,G=A.alphaBytes,V=A.needSMask,ce=A.palette,se=A.mask,U=null;return r!==Mt.API.image_compression.NONE&&typeof C1=="function"?(U=(function(I){var R;switch(I){case Mt.API.image_compression.FAST:R=11;break;case Mt.API.image_compression.MEDIUM:R=13;break;case Mt.API.image_compression.SLOW:R=14;break;default:R=12}return R})(r),x=this.decode.FLATE_DECODE,E="/Predictor ".concat(U," /Colors ").concat(C," /BitsPerComponent ").concat(m," /Columns ").concat(u),n=AS(H,Math.ceil(u*C*m/8),C,m,r),V&&(w=AS(G,Math.ceil(u*k/8),1,k,r))):(x=void 0,E=void 0,n=H,V&&(w=G)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(w&&this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),{alias:t,data:n,index:e,filter:x,decodeParameters:E,transparency:se,palette:ce,sMask:w,predictor:U,width:u,height:d,bitsPerComponent:m,sMaskBitsPerComponent:k,colorSpace:D}}},(function(n){n.processGIF89A=function(e,t,r,s){var o=new RM(e),u=o.width,d=o.height,f=[];o.decodeAndBlitFrameRGBA(0,f);var p={data:f,width:u,height:d},m=new Vy(100).encode(p,100);return n.processJPEG.call(this,m,t,r,s)},n.processGIF87A=n.processGIF89A})(Mt.API),_o.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},_o.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){gr.log("bit decode error:"+t)}},_o.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++)for(var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*s*4,d=0;d<8&&8*s+d<this.width;d++){var f=this.palette[o>>7-d&1];this.data[u+4*d]=f.blue,this.data[u+4*d+1]=f.green,this.data[u+4*d+2]=f.red,this.data[u+4*d+3]=255}t!==0&&(this.pos+=4-t)}},_o.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<n;s++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*s*4,d=o>>4,f=15&o,p=this.palette[d];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*s+1>=this.width)break;p=this.palette[f],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},_o.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(s<this.palette.length){var u=this.palette[s];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},_o.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,f=(o>>10&e)/e*255|0,p=o>>15?255:0,m=r*this.width*4+4*s;this.data[m]=f,this.data[m+1]=d,this.data[m+2]=u,this.data[m+3]=p}this.pos+=n}},_o.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&e)/e*255|0,f=(u>>5&t)/t*255|0,p=(u>>11)/e*255|0,m=s*this.width*4+4*o;this.data[m]=p,this.data[m+1]=f,this.data[m+2]=d,this.data[m+3]=255}this.pos+=n}},_o.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=s,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},_o.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=s,this.data[d+2]=r,this.data[d+3]=u}},_o.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,s){var o=new _o(e,!1),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},p=new Vy(100).encode(f,100);return n.processJPEG.call(this,p,t,r,s)}})(Mt.API),kS.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,s){var o=new kS(e),u=o.width,d=o.height,f={data:o.getData(),width:u,height:d},p=new Vy(100).encode(f,100);return n.processJPEG.call(this,p,t,r,s)}})(Mt.API),Mt.API.processRGBA=function(n,e,t){for(var r=n.data,s=r.length,o=new Uint8Array(s/4*3),u=new Uint8Array(s/4),d=0,f=0,p=0;p<s;p+=4){var m=r[p],x=r[p+1],E=r[p+2],w=r[p+3];o[d++]=m,o[d++]=x,o[d++]=E,u[f++]=w}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:A,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Mt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ud=Mt.API,dm=Ud.getCharWidthsArray=function(n,e){var t,r,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:s.metadata.Unicode.widths,f=d.fof?d.fof:1,p=e.kerning?e.kerning:s.metadata.Unicode.kerning,m=p.fof?p.fof:1,x=e.doKerning!==!1,E=0,w=n.length,A=0,D=d[0]||f,C=[];for(t=0;t<w;t++)r=n.charCodeAt(t),typeof s.metadata.widthOfString=="function"?C.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+u*(1e3/o)||0)/1e3):(E=x&&nr(p[r])==="object"&&!isNaN(parseInt(p[r][A],10))?p[r][A]/m:0,C.push((d[r]||D)/f+E)),A=r;return C},_S=Ud.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return Ud.processArabic&&(n=Ud.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,s)/t:dm.apply(this,arguments).reduce(function(o,u){return o+u},0)},ES=function(n,e,t,r){for(var s=[],o=0,u=n.length,d=0;o!==u&&d+e[o]<t;)d+=e[o],o++;s.push(n.slice(0,o));var f=o;for(d=0;o!==u;)d+e[o]>r&&(s.push(n.slice(f,o)),d=0,f=o),d+=e[o],o++;return f!==o&&s.push(n.slice(f,o)),s},NS=function(n,e,t){t||(t={});var r,s,o,u,d,f,p,m=[],x=[m],E=t.textIndent||0,w=0,A=0,D=n.split(" "),C=dm.apply(this,[" ",t])[0];if(f=t.lineIndent===-1?D[0].length+2:t.lineIndent||0){var k=Array(f).join(" "),H=[];D.map(function(V){(V=V.split(/\s*\n/)).length>1?H=H.concat(V.map(function(ce,se){return(se&&ce.length?`
`:"")+ce})):H.push(V[0])}),D=H,f=_S.apply(this,[k,t])}for(o=0,u=D.length;o<u;o++){var G=0;if(r=D[o],f&&r[0]==`
`&&(r=r.substr(1),G=1),E+w+(A=(s=dm.apply(this,[r,t])).reduce(function(V,ce){return V+ce},0))>e||G){if(A>e){for(d=ES.apply(this,[r,s,e-(E+w),e]),m.push(d.shift()),m=[d.pop()];d.length;)x.push([d.shift()]);A=s.slice(r.length-(m[0]?m[0].length:0)).reduce(function(V,ce){return V+ce},0)}else m=[r];x.push(m),E=A+f,w=C}else m.push(r),E+=w+A,w=C}return p=f?function(V,ce){return(ce?k:"")+V.join(" ")}:function(V){return V.join(" ")},x.map(p)},Ud.splitTextToSize=function(n,e,t){var r,s=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var x=this.internal.getFont(m.fontName,m.fontStyle),E="Unicode";return x.metadata[E]?{widths:x.metadata[E].widths||{0:1},kerning:x.metadata[E].kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/s;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,o.lineIndent=t.lineIndent;var d,f,p=[];for(d=0,f=r.length;d<f;d++)p=p.concat(NS.apply(this,[r[d],u,o]));return p},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},s={},o=0;o<16;o++)r[t[o]]=e[o],s[e[o]]=t[o];var u=function(E){return"0x"+parseInt(E,10).toString(16)},d=n.__fontmetrics__.compress=function(E){var w,A,D,C,k=["{"];for(var H in E){if(w=E[H],isNaN(parseInt(H,10))?A="'"+H+"'":(H=parseInt(H,10),A=(A=u(H).slice(2)).slice(0,-1)+s[A.slice(-1)]),typeof w=="number")w<0?(D=u(w).slice(3),C="-"):(D=u(w).slice(2),C=""),D=C+D.slice(0,-1)+s[D.slice(-1)];else{if(nr(w)!=="object")throw new Error("Don't know what to do with value type "+nr(w)+".");D=d(w)}k.push(A+D)}return k.push("}"),k.join("")},f=n.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,A,D,C,k={},H=1,G=k,V=[],ce="",se="",U=E.length-1,I=1;I<U;I+=1)(C=E[I])=="'"?w?(D=w.join(""),w=void 0):w=[]:w?w.push(C):C=="{"?(V.push([G,D]),G={},D=void 0):C=="}"?((A=V.pop())[0][A[1]]=G,D=void 0,G=A[0]):C=="-"?H=-1:D===void 0?r.hasOwnProperty(C)?(ce+=r[C],D=parseInt(ce,16)*H,H=1,ce=""):ce+=C:r.hasOwnProperty(C)?(se+=r[C],G[D]=parseInt(se,16)*H,H=1,D=void 0,se=""):se+=C;return k},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:f("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},x={Unicode:{"Courier-Oblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":f("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":f("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:f("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":f("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:f("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":f("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":f("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":f("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":f("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(E){var w=E.font,A=x.Unicode[w.postScriptName];A&&(w.metadata.Unicode={},w.metadata.Unicode.widths=A.widths,w.metadata.Unicode.kerning=A.kerning);var D=m.Unicode[w.postScriptName];D&&(w.metadata.Unicode.encoding=D,w.encoding=D.codePages[0])}])})(Mt.API),(function(n){var e=function(t){for(var r=t.length,s=new Uint8Array(r),o=0;o<r;o++)s[o]=t.charCodeAt(o);return s};n.API.events.push(["addFont",function(t){var r=void 0,s=t.font,o=t.instance;if(!s.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=o.existsFileInVFS(s.postScriptName)===!1?o.loadFile(s.postScriptName):o.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Nm(d)),u.metadata=n.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(s,r)}}])})(Mt),Mt.API.addSvgAsImage=function(n,e,t,r,s,o,u,d){if(isNaN(e)||isNaN(t))throw gr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw gr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=r,f.height=s;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return(en.canvg?Promise.resolve(en.canvg):wy(()=>import("./index.es-vQ7nX7V_.js"),[],import.meta.url)).catch(function(E){return Promise.reject(new Error("Could not load canvg: "+E))}).then(function(E){return E.default?E.default:E}).then(function(E){return E.fromString(p,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(E){return E.render(m)}).then(function(){x.addImage(f.toDataURL("image/jpeg",1),e,t,r,s,u,d)})},Mt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,t);return this},Mt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,s,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),f=[],p=0,m=0,x=0;function E(A,D){var C,k=!1;for(C=0;C<A.length;C+=1)A[C]===D&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var w=d.length;for(x=0;x<w;x+=1)t[d[x]].value=t[d[x]].defaultValue,t[d[x]].explicitSet=!1}if(nr(n)==="object"){for(s in n)if(o=n[s],E(d,s)&&o!==void 0){if(t[s].type==="boolean"&&typeof o=="boolean")t[s].value=o;else if(t[s].type==="name"&&E(t[s].valueSet,o))t[s].value=o;else if(t[s].type==="integer"&&Number.isInteger(o))t[s].value=o;else if(t[s].type==="array"){for(p=0;p<o.length;p+=1)if(r=!0,o[p].length===1&&typeof o[p][0]=="number")f.push(String(o[p]-1));else if(o[p].length>1){for(m=0;m<o[p].length;m+=1)typeof o[p][m]!="number"&&(r=!1);r===!0&&f.push([o[p][0]-1,o[p][1]-1].join(" "))}t[s].value="["+f.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,D=[];for(A in t)t[A].explicitSet===!0&&(t[A].type==="name"?D.push("/"+A+" /"+t[A].value):D.push("/"+A+" "+t[A].value));D.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+D.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+d.length+s.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(s+o+u+d+f),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Mt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var d,f=u.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],x=0,E=o.length;x<E;++x){if(d=u.metadata.characterToGlyph(o.charCodeAt(x)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(x),f.indexOf(d)==-1&&(f.push(d),f.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return m.join("");d=d.toString(16),m.push(p[4-d.length],d)}return m.join("")},r=function(o){var u,d,f,p,m,x,E;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],x=0,E=(d=Object.keys(o).sort(function(w,A){return w-A})).length;x<E;x++)u=d[x],f.length>=100&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),f.push("<"+u+"><"+p+">"));return f.length&&(m+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,p=u.newObject,m=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var x=d.metadata.Unicode.widths,E=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),w="",A=0;A<E.length;A++)w+=String.fromCharCode(E[A]);var D=p();m({data:w,addLength1:!0,objectId:D}),f("endobj");var C=p();m({data:r(d.metadata.toUnicode),addLength1:!0,objectId:C}),f("endobj");var k=p();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+Gd(d.fontName)),f("/FontFile2 "+D+" 0 R"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/Flags "+d.metadata.flags),f("/StemV "+d.metadata.stemV),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f(">>"),f("endobj");var H=p();f("<<"),f("/Type /Font"),f("/BaseFont /"+Gd(d.fontName)),f("/FontDescriptor "+k+" 0 R"),f("/W "+n.API.PDFObject.convert(x)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+d.encoding+")"),f(">>"),f(">>"),f("endobj"),d.objectNumber=p(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+C+" 0 R"),f("/BaseFont /"+Gd(d.fontName)),f("/Encoding /"+d.encoding),f("/DescendantFonts ["+H+" 0 R]"),f(">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var d=u.font,f=u.out,p=u.newObject,m=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var x=d.metadata.rawData,E="",w=0;w<x.length;w++)E+=String.fromCharCode(x[w]);var A=p();m({data:E,addLength1:!0,objectId:A}),f("endobj");var D=p();m({data:r(d.metadata.toUnicode),addLength1:!0,objectId:D}),f("endobj");var C=p();f("<<"),f("/Descent "+d.metadata.decender),f("/CapHeight "+d.metadata.capHeight),f("/StemV "+d.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+A+" 0 R"),f("/Flags 96"),f("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),f("/FontName /"+Gd(d.fontName)),f("/ItalicAngle "+d.metadata.italicAngle),f("/Ascent "+d.metadata.ascender),f(">>"),f("endobj"),d.objectNumber=p();for(var k=0;k<d.metadata.hmtx.widths.length;k++)d.metadata.hmtx.widths[k]=parseInt(d.metadata.hmtx.widths[k]*(1e3/d.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+D+" 0 R/BaseFont/"+Gd(d.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),f("endobj"),d.isAlreadyPutted=!0}})(o)}]);var s=function(o){var u,d=o.text||"",f=o.x,p=o.y,m=o.options||{},x=o.mutex||{},E=x.pdfEscape,w=x.activeFontKey,A=x.fonts,D=w,C="",k=0,H="",G=A[D].encoding;if(A[D].encoding!=="Identity-H")return{text:d,x:f,y:p,options:m,mutex:x};for(H=d,D=w,Array.isArray(d)&&(H=d[0]),k=0;k<H.length;k+=1)A[D].metadata.hasOwnProperty("cmap")&&(u=A[D].metadata.cmap.unicode.codeMap[H[k].charCodeAt(0)]),u||H[k].charCodeAt(0)<256&&A[D].metadata.hasOwnProperty("Unicode")?C+=H[k]:C+="";var V="";return parseInt(D.slice(1))<14||G==="WinAnsiEncoding"?V=E(C,D).split("").map(function(ce){return ce.charCodeAt(0).toString(16)}).join(""):G==="Identity-H"&&(V=t(C,A[D])),x.isHex=!0,{text:V,x:f,y:p,options:m,mutex:x}};e.events.push(["postProcessText",function(o){var u=o.text||"",d=[],f={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?d.push([s(Object.assign({},f,{text:u[p][0]})).text,u[p][1],u[p][2]]):d.push(s(Object.assign({},f,{text:u[p]})).text);o.text=d}else o.text=s(Object.assign({},f,{text:u})).text}])})(Mt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Mt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var s,o,u,d,f,p,m,x=e,E=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],w=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},D={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),H=!1,G=0;this.__bidiEngine__={};var V=function(j){var F=j.charCodeAt(),M=F>>8,ne=D[M];return ne!==void 0?x[256*ne+(255&F)]:M===252||M===253?"AL":k.test(M)?"L":M===8?"R":"N"},ce=function(j){for(var F,M=0;M<j.length;M++){if((F=V(j.charAt(M)))==="L")return!1;if(F==="R")return!0}return!1},se=function(j,F,M,ne){var Se,le,ve,ye,ge=F[ne];switch(ge){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":H=!1;break;case"N":case"AN":break;case"EN":H&&(ge="AN");break;case"AL":H=!0,ge="R";break;case"WS":case"BN":ge="N";break;case"CS":ne<1||ne+1>=F.length||(Se=M[ne-1])!=="EN"&&Se!=="AN"||(le=F[ne+1])!=="EN"&&le!=="AN"?ge="N":H&&(le="AN"),ge=le===Se?le:"N";break;case"ES":ge=(Se=ne>0?M[ne-1]:"B")==="EN"&&ne+1<F.length&&F[ne+1]==="EN"?"EN":"N";break;case"ET":if(ne>0&&M[ne-1]==="EN"){ge="EN";break}if(H){ge="N";break}for(ve=ne+1,ye=F.length;ve<ye&&F[ve]==="ET";)ve++;ge=ve<ye&&F[ve]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(ye=F.length,ve=ne+1;ve<ye&&F[ve]==="NSM";)ve++;if(ve<ye){var we=j[ne],Q=we>=1425&&we<=2303||we===64286;if(Se=F[ve],Q&&(Se==="R"||Se==="AL")){ge="R";break}}}ge=ne<1||(Se=F[ne-1])==="B"?"N":M[ne-1];break;case"B":H=!1,s=!0,ge=G;break;case"S":o=!0,ge="N"}return ge},U=function(j,F,M){var ne=j.split("");return M&&I(ne,M,{hiLevel:G}),ne.reverse(),F&&F.reverse(),ne.join("")},I=function(j,F,M){var ne,Se,le,ve,ye,ge=-1,we=j.length,Q=0,P=[],Y=G?w:E,re=[];for(H=!1,s=!1,o=!1,Se=0;Se<we;Se++)re[Se]=V(j[Se]);for(le=0;le<we;le++){if(ye=Q,P[le]=se(j,re,P,le),ne=240&(Q=Y[ye][A[P[le]]]),Q&=15,F[le]=ve=Y[Q][5],ne>0)if(ne===16){for(Se=ge;Se<le;Se++)F[Se]=1;ge=-1}else ge=-1;if(Y[Q][6])ge===-1&&(ge=le);else if(ge>-1){for(Se=ge;Se<le;Se++)F[Se]=ve;ge=-1}re[le]==="B"&&(F[le]=0),M.hiLevel|=ve}o&&(function(fe,me,_e){for(var Me=0;Me<_e;Me++)if(fe[Me]==="S"){me[Me]=G;for(var Le=Me-1;Le>=0&&fe[Le]==="WS";Le--)me[Le]=G}})(re,F,we)},R=function(j,F,M,ne,Se){if(!(Se.hiLevel<j)){if(j===1&&G===1&&!s)return F.reverse(),void(M&&M.reverse());for(var le,ve,ye,ge,we=F.length,Q=0;Q<we;){if(ne[Q]>=j){for(ye=Q+1;ye<we&&ne[ye]>=j;)ye++;for(ge=Q,ve=ye-1;ge<ve;ge++,ve--)le=F[ge],F[ge]=F[ve],F[ve]=le,M&&(le=M[ge],M[ge]=M[ve],M[ve]=le);Q=ye}Q++}}},q=function(j,F,M){var ne=j.split(""),Se={hiLevel:G};return M||(M=[]),I(ne,M,Se),(function(le,ve,ye){if(ye.hiLevel!==0&&m)for(var ge,we=0;we<le.length;we++)ve[we]===1&&(ge=C.indexOf(le[we]))>=0&&(le[we]=C[ge+1])})(ne,M,Se),R(2,ne,F,M,Se),R(1,ne,F,M,Se),ne.join("")};return this.__bidiEngine__.doBidiReorder=function(j,F,M){if((function(Se,le){if(le)for(var ve=0;ve<Se.length;ve++)le[ve]=ve;d===void 0&&(d=ce(Se)),p===void 0&&(p=ce(Se))})(j,F),u||!f||p)if(u&&f&&d^p)G=d?1:0,j=U(j,F,M);else if(!u&&f&&p)G=d?1:0,j=q(j,F,M),j=U(j,F);else if(!u||d||f||p){if(u&&!f&&d^p)j=U(j,F),d?(G=0,j=q(j,F,M)):(G=1,j=q(j,F,M),j=U(j,F));else if(u&&d&&!f&&p)G=1,j=q(j,F,M),j=U(j,F);else if(!u&&!f&&d^p){var ne=m;d?(G=1,j=q(j,F,M),G=0,m=!1,j=q(j,F,M),m=ne):(G=0,j=q(j,F,M),j=U(j,F),G=1,m=!1,j=q(j,F,M),m=ne,j=U(j,F))}}else G=0,j=q(j,F,M);else G=d?1:0,j=q(j,F,M);return j},this.__bidiEngine__.setOptions=function(j){j&&(u=j.isInputVisual,f=j.isOutputVisual,d=j.isInputRtl,p=j.isOutputRtl,m=j.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var s=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(s)==="[object Array]"){var d=0;for(u=[],d=0;d<s.length;d+=1)Object.prototype.toString.call(s[d])==="[object Array]"?u.push([t.doBidiReorder(s[d][0]),s[d][1],s[d][2]]):u.push([t.doBidiReorder(s[d])]);r.text=u}else r.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])})(Mt),Mt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ou(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new GM(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new IM(this.contents),this.head=new kM(this),this.name=new FM(this),this.cmap=new $A(this),this.toUnicode={},this.hhea=new LM(this),this.maxp=new UM(this),this.hmtx=new BM(this),this.post=new MM(this),this.os2=new PM(this),this.loca=new HM(this),this.glyf=new VM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,s,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,f,p;for(p=[],u=0,d=(f=this.bbox).length;u<d;u++)e=f[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(t=s>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var s,o,u,d;for(u=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)s=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var jo,ou=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,s;for(s=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,s,o,u,d,f;return e=this.readByte(),t=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),f=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^f)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*s+16777216*o+65536*u+256*d+f},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,s,o;for(o=[],r=0,s=e.length;r<s;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),IM=(function(){var n;function e(t){var r,s,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,o=this.tableCount;0<=o?s<o:s>o;s=0<=o?++s:--s)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,s,o,u,d,f,p,m,x,E,w,A,D;for(D in w=Object.keys(t).length,f=Math.log(2),x=16*Math.floor(Math.log(w)/f),u=Math.floor(x/f),m=16*w-x,(s=new ou).writeInt(this.scalarType),s.writeShort(w),s.writeShort(x),s.writeShort(u),s.writeShort(m),o=16*w,p=s.pos+o,d=null,A=[],t)for(E=t[D],s.writeString(D),s.writeInt(n(E)),s.writeInt(p),s.writeInt(E.length),A=A.concat(E),D==="head"&&(d=p),p+=E.length;p%4;)A.push(0),p++;return s.write(A),r=2981146554-n(s.data),s.pos=d+8,s.writeUInt32(r),s.data},n=function(t){var r,s,o,u;for(t=WA.call(t);t.length%4;)t.push(0);for(o=new ou(t),s=0,r=0,u=t.length;r<u;r=r+=4)s+=o.readUInt32();return 4294967295&s},e})(),DM={}.hasOwnProperty,pl=function(n,e){for(var t in e)DM.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};jo=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var kM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new ou).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),LS=(function(){function n(e,t){var r,s,o,u,d,f,p,m,x,E,w,A,D,C,k,H,G;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),x=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=e.readByte();break;case 4:for(w=e.readUInt16(),E=w/2,e.pos+=6,o=(function(){var V,ce;for(ce=[],f=V=0;0<=E?V<E:V>E;f=0<=E?++V:--V)ce.push(e.readUInt16());return ce})(),e.pos+=2,D=(function(){var V,ce;for(ce=[],f=V=0;0<=E?V<E:V>E;f=0<=E?++V:--V)ce.push(e.readUInt16());return ce})(),p=(function(){var V,ce;for(ce=[],f=V=0;0<=E?V<E:V>E;f=0<=E?++V:--V)ce.push(e.readUInt16());return ce})(),m=(function(){var V,ce;for(ce=[],f=V=0;0<=E?V<E:V>E;f=0<=E?++V:--V)ce.push(e.readUInt16());return ce})(),s=(this.length-e.pos+this.offset)/2,d=(function(){var V,ce;for(ce=[],f=V=0;0<=s?V<s:V>s;f=0<=s?++V:--V)ce.push(e.readUInt16());return ce})(),f=k=0,G=o.length;k<G;f=++k)for(C=o[f],r=H=A=D[f];A<=C?H<=C:H>=C;r=A<=C?++H:--H)m[f]===0?u=r+p[f]:(u=d[m[f]/2+(r-A)-(E-f)]||0)!==0&&(u+=p[f]),this.codeMap[r]=65535&u}e.pos=x}return n.encode=function(e,t){var r,s,o,u,d,f,p,m,x,E,w,A,D,C,k,H,G,V,ce,se,U,I,R,q,j,F,M,ne,Se,le,ve,ye,ge,we,Q,P,Y,re,fe,me,_e,Me,Le,Z,ae,Te;switch(ne=new ou,u=Object.keys(e).sort(function(Ee,pe){return Ee-pe}),t){case"macroman":for(D=0,C=(function(){var Ee=[];for(A=0;A<256;++A)Ee.push(0);return Ee})(),H={0:0},o={},Se=0,ge=u.length;Se<ge;Se++)H[Le=e[s=u[Se]]]==null&&(H[Le]=++D),o[s]={old:e[s],new:H[e[s]]},C[s]=H[e[s]];return ne.writeUInt16(1),ne.writeUInt16(0),ne.writeUInt32(12),ne.writeUInt16(0),ne.writeUInt16(262),ne.writeUInt16(0),ne.write(C),{charMap:o,subtable:ne.data,maxGlyphID:D+1};case"unicode":for(F=[],x=[],G=0,H={},r={},k=p=null,le=0,we=u.length;le<we;le++)H[ce=e[s=u[le]]]==null&&(H[ce]=++G),r[s]={old:ce,new:H[ce]},d=H[ce]-s,k!=null&&d===p||(k&&x.push(k),F.push(s),p=d),k=s;for(k&&x.push(k),x.push(65535),F.push(65535),q=2*(R=F.length),I=2*Math.pow(Math.log(R)/Math.LN2,2),E=Math.log(I/2)/Math.LN2,U=2*R-I,f=[],se=[],w=[],A=ve=0,Q=F.length;ve<Q;A=++ve){if(j=F[A],m=x[A],j===65535){f.push(0),se.push(0);break}if(j-(M=r[j].new)>=32768)for(f.push(0),se.push(2*(w.length+R-A)),s=ye=j;j<=m?ye<=m:ye>=m;s=j<=m?++ye:--ye)w.push(r[s].new);else f.push(M-j),se.push(0)}for(ne.writeUInt16(3),ne.writeUInt16(1),ne.writeUInt32(12),ne.writeUInt16(4),ne.writeUInt16(16+8*R+2*w.length),ne.writeUInt16(0),ne.writeUInt16(q),ne.writeUInt16(I),ne.writeUInt16(E),ne.writeUInt16(U),_e=0,P=x.length;_e<P;_e++)s=x[_e],ne.writeUInt16(s);for(ne.writeUInt16(0),Me=0,Y=F.length;Me<Y;Me++)s=F[Me],ne.writeUInt16(s);for(Z=0,re=f.length;Z<re;Z++)d=f[Z],ne.writeUInt16(d);for(ae=0,fe=se.length;ae<fe;ae++)V=se[ae],ne.writeUInt16(V);for(Te=0,me=w.length;Te<me;Te++)D=w[Te],ne.writeUInt16(D);return{charMap:r,subtable:ne.data,maxGlyphID:G+1}}},n})(),$A=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=s?r<s:r>s;r=0<=s?++r:--r)t=new LS(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,s;return t==null&&(t="macroman"),r=LS.encode(e,t),(s=new ou).writeUInt16(0),s.writeUInt16(1),r.table=s.data.concat(r.subtable),r},n})(),LM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),PM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),MM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)t=e.readByte(),s.push(this.names.push(e.readString(t)));return s;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var u,d,f;for(f=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)f.push(e.readUInt32());return f}).call(this)}},n})(),OM=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},FM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,s,o,u,d,f,p,m,x,E;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(f={},o=m=0,x=r.length;m<x;o=++m)s=r[o],e.pos=s.offset,p=e.readString(s.length),u=new OM(p,s),f[E=s.nameID]==null&&(f[E]=[]),f[s.nameID].push(u);this.strings=f,this.copyright=f[0],this.fontFamily=f[1],this.fontSubfamily=f[2],this.uniqueSubfamily=f[3],this.fontName=f[4],this.version=f[5];try{this.postscriptName=f[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=f[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=f[7],this.manufacturer=f[8],this.designer=f[9],this.description=f[10],this.vendorUrl=f[11],this.designerUrl=f[12],this.license=f[13],this.licenseUrl=f[14],this.preferredFamily=f[15],this.preferredSubfamily=f[17],this.compatibleFull=f[18],this.sampleText=f[19]},n})(),UM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),BM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,s,o,u,d,f;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],t=p=0;0<=s?p<s:p>s;t=0<=s?++p:--p)m.push(e.readInt16());return m})(),this.widths=(function(){var p,m,x,E;for(E=[],p=0,m=(x=this.metrics).length;p<m;p++)o=x[p],E.push(o.advance);return E}).call(this),r=this.widths[this.widths.length-1],f=[],t=u=0;0<=s?u<s:u>s;t=0<=s?++u:--u)f.push(this.widths.push(r));return f},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),WA=[].slice,VM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,s,o,u,d,f,p,m,x;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(s=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,u=(d=new ou(t.read(s))).readShort(),p=d.readShort(),x=d.readShort(),f=d.readShort(),m=d.readShort(),this.cache[e]=u===-1?new qM(d,p,x,f,m):new zM(d,u,p,x,f,m),this.cache[e]))},n.prototype.encode=function(e,t,r){var s,o,u,d,f;for(u=[],o=[],d=0,f=t.length;d<f;d++)s=e[t[d]],o.push(u.length),s&&(u=u.concat(s.encode(r)));return o.push(u.length),{table:u,offsets:o}},n})(),zM=(function(){function n(e,t,r,s,o,u){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=s,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),qM=(function(){function n(e,t,r,s,o){var u,d;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=s,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ou(WA.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),HM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return pl(n,jo),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],r=0,s=this.length;r<s;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),s=0,o=0,u=0;u<r.length;++u)if(r[u]=s,o<t.length&&t[o]==u){++o,r[u]=s;var d=this.offsets[u],f=this.offsets[u+1]-d;f>0&&(s+=f)}for(var p=new Array(4*r.length),m=0;m<r.length;++m)p[4*m+3]=255&r[m],p[4*m+2]=(65280&r[m])>>8,p[4*m+1]=(16711680&r[m])>>16,p[4*m]=(4278190080&r[m])>>24;return p},n})(),GM=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,s,o;for(t in s=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=s[r];return e},n.prototype.glyphsFor=function(e){var t,r,s,o,u,d,f;for(s={},u=0,d=e.length;u<d;u++)s[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],s)(r=s[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in f=this.glyphsFor(t))r=f[o],s[o]=r;return s},n.prototype.encode=function(e,t){var r,s,o,u,d,f,p,m,x,E,w,A,D,C,k;for(s in r=$A.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),w={0:0},k=r.charMap)w[(f=k[s]).old]=f.new;for(A in E=r.maxGlyphID,u)A in w||(w[A]=E++);return m=(function(H){var G,V;for(G in V={},H)V[H[G]]=G;return V})(w),x=Object.keys(m).sort(function(H,G){return H-G}),D=(function(){var H,G,V;for(V=[],H=0,G=x.length;H<G;H++)d=x[H],V.push(m[d]);return V})(),o=this.font.glyf.encode(u,D,w),p=this.font.loca.encode(o.offsets,D),C={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},n})();Mt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,s,o,u;if(Array.isArray(t))return"["+(function(){var d,f,p;for(p=[],d=0,f=t.length;d<f;d++)r=t[d],p.push(e.convert(r));return p})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in o=["<<"],t)u=t[s],o.push("/"+s+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();function YA(n,e,t,r,s){r=r||{};var o=1.15,u=s.internal.scaleFactor,d=s.internal.getFontSize()/u,f=s.getLineHeightFactor?s.getLineHeightFactor():o,p=d*f,m=/\r\n|\r|\n/g,x="",E=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(x=typeof n=="string"?n.split(m):n,E=x.length||1),t+=d*(2-o),r.valign==="middle"?t-=E/2*p:r.valign==="bottom"&&(t-=E*p),r.halign==="center"||r.halign==="right"){var w=d;if(r.halign==="center"&&(w*=.5),x&&E>=1){for(var A=0;A<x.length;A++)s.text(x[A],e-s.getStringUnitWidth(x[A])*w,t),t+=p;return s}e-=s.getStringUnitWidth(n)*w}return r.halign==="justify"?s.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):s.text(n,e,t),s}var PS={},nh=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:PS=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,s,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var u=this.jsPDFDocument.internal.getFont(),d=u.fontStyle,f=u.fontName;if(e.font&&(f=e.font),e.fontStyle){d=e.fontStyle;var p=this.getFontList()[f];p&&p.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(p[0]),d=p[0])}if(this.jsPDFDocument.setFont(f,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var m=n.unifyColor(e.fillColor);m&&(r=this.jsPDFDocument).setFillColor.apply(r,m),m=n.unifyColor(e.textColor),m&&(s=this.jsPDFDocument).setTextColor.apply(s,m),m=n.unifyColor(e.lineColor),m&&(o=this.jsPDFDocument).setDrawColor.apply(o,m),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,s,o){return this.jsPDFDocument.rect(e,t,r,s,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return PS||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),M1=function(n,e){return M1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])},M1(n,e)};function KA(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M1(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var XA=(function(n){KA(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function $M(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function WM(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function rg(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],s=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,u){return Math.max(o,u)},0);return s}function QA(n,e,t,r){var s=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:s,lineColor:o});var u=JA(s,!1);u&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,u)}function JA(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function Og(n,e){var t,r,s,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(s=n.right)!==null&&s!==void 0?s:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function ZA(n,e){var t=Og(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function YM(n,e,t,r,s){var o={},u=1.3333333333333333,d=zy(e,function(G){return s.getComputedStyle(G).backgroundColor});d!=null&&(o.fillColor=d);var f=zy(e,function(G){return s.getComputedStyle(G).color});f!=null&&(o.textColor=f);var p=XM(r,t);p&&(o.cellPadding=p);var m="borderTopColor",x=u*t,E=r.borderTopWidth;if(r.borderBottomWidth===E&&r.borderRightWidth===E&&r.borderLeftWidth===E){var w=(parseFloat(E)||0)/x;w&&(o.lineWidth=w)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/x,right:(parseFloat(r.borderRightWidth)||0)/x,bottom:(parseFloat(r.borderBottomWidth)||0)/x,left:(parseFloat(r.borderLeftWidth)||0)/x},o.lineWidth.top||(o.lineWidth.right?m="borderRightColor":o.lineWidth.bottom?m="borderBottomColor":o.lineWidth.left&&(m="borderLeftColor"));var A=zy(e,function(G){return s.getComputedStyle(G)[m]});A!=null&&(o.lineColor=A);var D=["left","right","center","justify"];D.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),D=["middle","bottom","top"],D.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(o.fontSize=C/u);var k=KM(r);k&&(o.fontStyle=k);var H=(r.fontFamily||"").toLowerCase();return n.indexOf(H)!==-1&&(o.font=H),o}function KM(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function zy(n,e){var t=e3(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var s=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function e3(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:e3(n.parentElement,e):t}function XM(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),s=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(d){return parseInt(d||"0")/r}),u=Og(o,0);return s>u.top&&(u.top=s),s>u.bottom&&(u.bottom=s),u}function t3(n,e,t,r,s){var o,u;r===void 0&&(r=!1),s===void 0&&(s=!1);var d;typeof e=="string"?d=t.document.querySelector(e):d=e;var f=Object.keys(n.getFontList()),p=n.scaleFactor(),m=[],x=[],E=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:m,body:x,foot:E};for(var w=0;w<d.rows.length;w++){var A=d.rows[w],D=(u=(o=A?.parentElement)===null||o===void 0?void 0:o.tagName)===null||u===void 0?void 0:u.toLowerCase(),C=QM(f,p,t,A,r,s);C&&(D==="thead"?m.push(C):D==="tfoot"?E.push(C):x.push(C))}return{head:m,body:x,foot:E}}function QM(n,e,t,r,s,o){for(var u=new XA(r),d=0;d<r.cells.length;d++){var f=r.cells[d],p=t.getComputedStyle(f);if(s||p.display!=="none"){var m=void 0;o&&(m=YM(n,f,e,p,t)),u.push({rowSpan:f.rowSpan,colSpan:f.colSpan,styles:m,_element:f,content:JM(f)})}}var x=t.getComputedStyle(r);if(u.length>0&&(s||x.display!=="none"))return u}function JM(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function ZM(n,e,t){for(var r=0,s=[n,e,t];r<s.length;r++){var o=s[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Wl(n,e,t,r,s){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),u=1;u<arguments.length;u++){var d=arguments[u];if(d!=null)for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(o[f]=d[f])}return o}function eO(n,e){var t=new nh(n),r=t.getDocumentOptions(),s=t.getGlobalOptions();ZM(s,r,e);var o=Wl({},s,r,e),u;typeof window<"u"&&(u=window);var d=tO(s,r,e),f=nO(s,r,e),p=rO(t,o),m=sO(t,o,u);return{id:e.tableId,content:m,hooks:f,styles:d,settings:p}}function tO(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(f){if(f==="columnStyles"){var p=n[f],m=e[f],x=t[f];r.columnStyles=Wl({},p,m,x)}else{var E=[n,e,t],w=E.map(function(A){return A[f]||{}});r[f]=Wl({},w[0],w[1],w[2])}},o=0,u=Object.keys(r);o<u.length;o++){var d=u[o];s(d)}return r}function nO(n,e,t){for(var r=[n,e,t],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,u=r;o<u.length;o++){var d=u[o];d.didParseCell&&s.didParseCell.push(d.didParseCell),d.willDrawCell&&s.willDrawCell.push(d.willDrawCell),d.didDrawCell&&s.didDrawCell.push(d.didDrawCell),d.willDrawPage&&s.willDrawPage.push(d.willDrawPage),d.didDrawPage&&s.didDrawPage.push(d.didDrawPage)}return s}function rO(n,e){var t,r,s,o,u,d,f,p,m,x,E,w,A=Og(e.margin,40/n.scaleFactor()),D=(t=iO(n,e.startY))!==null&&t!==void 0?t:A.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var H=(o=e.useCss)!==null&&o!==void 0?o:!1,G=e.theme||(H?"plain":"striped"),V=!!e.horizontalPageBreak,ce=(u=e.horizontalPageBreakRepeat)!==null&&u!==void 0?u:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:H,theme:G,startY:D,margin:A,pageBreak:(f=e.pageBreak)!==null&&f!==void 0?f:"auto",rowPageBreak:(p=e.rowPageBreak)!==null&&p!==void 0?p:"auto",tableWidth:(m=e.tableWidth)!==null&&m!==void 0?m:"auto",showHead:k,showFoot:C,tableLineWidth:(x=e.tableLineWidth)!==null&&x!==void 0?x:0,tableLineColor:(E=e.tableLineColor)!==null&&E!==void 0?E:200,horizontalPageBreak:V,horizontalPageBreakRepeat:ce,horizontalPageBreakBehaviour:(w=e.horizontalPageBreakBehaviour)!==null&&w!==void 0?w:"afterAllRows"}}function iO(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),s=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var u=t.startPageNumber+t.pageNumber-1;o=u===s}return typeof e=="number"?e:(e==null||e===!1)&&o&&t?.finalY!=null?t.finalY+20/r:null}function sO(n,e,t){var r=e.head||[],s=e.body||[],o=e.foot||[];if(e.html){var u=e.includeHiddenHtml;if(t){var d=t3(n,e.html,t,u,e.useCss)||{};r=d.head||r,s=d.body||r,o=d.foot||r}else console.error("Cannot parse html in non browser environment")}var f=e.columns||aO(r,s,o);return{columns:f,head:r,body:s,foot:o}}function aO(n,e,t){var r=n[0]||e[0]||t[0]||[],s=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var u=1,d;Array.isArray(r)?d=r[parseInt(o)]:d=r[o],typeof d=="object"&&!Array.isArray(d)&&(u=d?.colSpan||1);for(var f=0;f<u;f++){var p=void 0;Array.isArray(r)?p=s.length:p=o+(f>0?"_".concat(f):"");var m={dataKey:p};s.push(m)}}),s}var O1=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),oO=(function(n){KA(e,n);function e(t,r,s,o,u,d){var f=n.call(this,t,r,d)||this;return f.cell=s,f.row=o,f.column=u,f.section=o.section,f}return e})(O1),lO=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,s,o,u){for(var d=0,f=t;d<f.length;d++){var p=f[d],m=new oO(e,this,r,s,o,u),x=p(m)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],x)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,s=this.hooks.didDrawPage;r<s.length;r++){var o=s[r];o(new O1(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,s=this.hooks.willDrawPage;r<s.length;r++){var o=s[r];o(new O1(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(s,o){return s+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),n3=(function(){function n(e,t,r,s,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof XA&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=s,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,s){var o;return Math.max(r,((o=t.cells[s.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var s=t.cells[r.index];return s?s.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(s,o){var u=r.cells[o.index];if(!u)return 0;var d=t.getLineHeight(u.styles.fontSize),f=u.padding("vertical"),p=f+d;return p>s?p:s},0)},n})(),r3=(function(){function n(e,t,r){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var u=o!=null?""+o:"",d=/\r\n|\r|\n/g;this.text=u.split(d)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");r=this.x+s/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*t,o=r*s+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=Og(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),cO=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,s=e.allRows();r<s.length;r++){var o=s[r],u=o.cells[this.index];u&&typeof u.styles.cellWidth=="number"&&(t=Math.max(t,u.styles.cellWidth))}return t},n})();function uO(n,e){dO(n,e);var t=[],r=0;e.columns.forEach(function(o){var u=o.getMaxCustomCellWidth(e);u?o.width=u:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var s=e.getWidth(n.pageSize().width)-r;s&&(s=F1(t,s,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),s&&(s=F1(t,s,function(o){return o.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/n.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),fO(e),pO(e,n),hO(e)}function dO(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,s=ZA(n,e);e.allRows().forEach(function(o){for(var u=0,d=e.columns;u<d.length;u++){var f=d[u],p=o.cells[f.index];if(p){var m=e.hooks.didParseCell;e.callCellHooks(n,m,p,o,f,null);var x=p.padding("horizontal");p.contentWidth=rg(p.text,p.styles,n)+x;var E=rg(p.text.join(" ").split(/[^\S\u00A0]+/),p.styles,n);if(p.minReadableWidth=E+p.padding("horizontal"),typeof p.styles.cellWidth=="number")p.minWidth=p.styles.cellWidth,p.wrappedWidth=p.styles.cellWidth;else if(p.styles.cellWidth==="wrap"||r===!0)p.contentWidth>s?(p.minWidth=s,p.wrappedWidth=s):(p.minWidth=p.contentWidth,p.wrappedWidth=p.contentWidth);else{var w=10/t;p.minWidth=p.styles.minCellWidth||w,p.wrappedWidth=p.contentWidth,p.minWidth>p.wrappedWidth&&(p.wrappedWidth=p.minWidth)}}}}),e.allRows().forEach(function(o){for(var u=0,d=e.columns;u<d.length;u++){var f=d[u],p=o.cells[f.index];if(p&&p.colSpan===1)f.wrappedWidth=Math.max(f.wrappedWidth,p.wrappedWidth),f.minWidth=Math.max(f.minWidth,p.minWidth),f.minReadableWidth=Math.max(f.minReadableWidth,p.minReadableWidth);else{var m=e.styles.columnStyles[f.dataKey]||e.styles.columnStyles[f.index]||{},x=m.cellWidth||m.minCellWidth;x&&typeof x=="number"&&(f.minWidth=x,f.wrappedWidth=x)}p&&(p.colSpan>1&&!f.minWidth&&(f.minWidth=p.minWidth),p.colSpan>1&&!f.wrappedWidth&&(f.wrappedWidth=p.minWidth))}})}function F1(n,e,t){for(var r=e,s=n.reduce(function(w,A){return w+A.wrappedWidth},0),o=0;o<n.length;o++){var u=n[o],d=u.wrappedWidth/s,f=r*d,p=u.width+f,m=t(u),x=p<m?m:p;e-=x-u.width,u.width=x}if(e=Math.round(e*1e10)/1e10,e){var E=n.filter(function(w){return e<0?w.width>t(w):!0});E.length&&(e=F1(E,e,t))}return e}function hO(n){for(var e={},t=1,r=n.allRows(),s=0;s<r.length;s++)for(var o=r[s],u=0,d=n.columns;u<d.length;u++){var f=d[u],p=e[f.index];if(t>1)t--,delete o.cells[f.index];else if(p)p.cell.height+=o.height,t=p.cell.colSpan,delete o.cells[f.index],p.left--,p.left<=1&&delete e[f.index];else{var m=o.cells[f.index];if(!m)continue;if(m.height=o.height,m.rowSpan>1){var x=r.length-s,E=m.rowSpan>x?x:m.rowSpan;e[f.index]={cell:m,left:E,row:o}}}}}function fO(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],s=null,o=0,u=0,d=0;d<n.columns.length;d++){var f=n.columns[d];if(u-=1,u>1&&n.columns[d+1])o+=f.width,delete r.cells[f.index];else if(s){var p=s;delete r.cells[f.index],s=null,p.width=f.width+o}else{var p=r.cells[f.index];if(!p)continue;if(u=p.colSpan,o=0,p.colSpan>1){s=p,o+=f.width;continue}p.width=f.width+o}}}function pO(n,e){for(var t={count:0,height:0},r=0,s=n.allRows();r<s.length;r++){for(var o=s[r],u=0,d=n.columns;u<d.length;u++){var f=d[u],p=o.cells[f.index];if(p){e.applyStyles(p.styles,!0);var m=p.width-p.padding("horizontal");if(p.styles.overflow==="linebreak")p.text=e.splitTextToSize(p.text,m+1/e.scaleFactor(),{fontSize:p.styles.fontSize});else if(p.styles.overflow==="ellipsize")p.text=MS(p.text,m,p.styles,e,"...");else if(p.styles.overflow==="hidden")p.text=MS(p.text,m,p.styles,e,"");else if(typeof p.styles.overflow=="function"){var x=p.styles.overflow(p.text,m);typeof x=="string"?p.text=[x]:p.text=x}p.contentHeight=p.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var E=p.contentHeight/p.rowSpan;p.rowSpan>1&&t.count*t.height<E*p.rowSpan?t={height:E,count:p.rowSpan}:t&&t.count>0&&t.height>E&&(E=t.height),E>o.height&&(o.height=E)}}t.count--}}function MS(n,e,t,r,s){return n.map(function(o){return mO(o,e,t,r,s)})}function mO(n,e,t,r,s){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=rg(n,t,r))return n;for(;e<rg(n+s,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+s}function gO(n,e){var t=new nh(n),r=yO(e,t.scaleFactor()),s=new lO(e,r);return uO(t,s),t.applyStyles(t.userStyles),s}function yO(n,e){var t=n.content,r=bO(t.columns);if(t.head.length===0){var s=OS(r,"head");s&&t.head.push(s)}if(t.foot.length===0){var s=OS(r,"foot");s&&t.foot.push(s)}var o=n.settings.theme,u=n.styles;return{columns:r,head:qy("head",t.head,r,u,o,e),body:qy("body",t.body,r,u,o,e),foot:qy("foot",t.foot,r,u,o,e)}}function qy(n,e,t,r,s,o){var u={},d=e.map(function(f,p){for(var m=0,x={},E=0,w=0,A=0,D=t;A<D.length;A++){var C=D[A];if(u[C.index]==null||u[C.index].left===0)if(w===0){var k=void 0;Array.isArray(f)?k=f[C.index-E-m]:k=f[C.dataKey];var H={};typeof k=="object"&&!Array.isArray(k)&&(H=k?.styles||{});var G=wO(n,C,p,s,r,o,H),V=new r3(k,G,n);x[C.dataKey]=V,x[C.index]=V,w=V.colSpan-1,u[C.index]={left:V.rowSpan-1,times:w}}else w--,E++;else u[C.index].left--,w=u[C.index].times,m++}return new n3(f,p,n,x)});return d}function OS(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var s=vO(e,r.raw);s!=null&&(t[r.dataKey]=s)}}),Object.keys(t).length>0?t:null}function vO(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function bO(n){return n.map(function(e,t){var r,s;return typeof e=="object"?s=(r=e.dataKey)!==null&&r!==void 0?r:t:s=t,new cO(s,e,t)})}function wO(n,e,t,r,s,o,u){var d=WM(r),f;n==="head"?f=s.headStyles:n==="body"?f=s.bodyStyles:n==="foot"&&(f=s.footStyles);var p=Wl({},d.table,d[n],s.styles,f),m=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},x=n==="body"?m:{},E=n==="body"&&t%2===0?Wl({},d.alternateRow,s.alternateRowStyles):{},w=$M(o),A=Wl({},w,p,E,x);return Wl(A,u)}function xO(n,e,t){var r;t===void 0&&(t={});var s=ZA(n,e),o=new Map,u=[],d=[],f=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?f=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(f=[e.settings.horizontalPageBreakRepeat]),f.forEach(function(E){var w=e.columns.find(function(A){return A.dataKey===E||A.index===E});w&&!o.has(w.index)&&(o.set(w.index,!0),u.push(w.index),d.push(e.columns[w.index]),s-=w.wrappedWidth)});for(var p=!0,m=(r=t?.start)!==null&&r!==void 0?r:0;m<e.columns.length;){if(o.has(m)){m++;continue}var x=e.columns[m].wrappedWidth;if(p||s>=x)p=!1,u.push(m),d.push(e.columns[m]),s-=x;else break;m++}return{colIndexes:u,columns:d,lastIndex:m-1}}function SO(n,e){for(var t=[],r=0;r<e.columns.length;r++){var s=xO(n,e,{start:r});s.columns.length&&(t.push(s),r=s.lastIndex)}return t}function _O(n,e){var t=e.settings,r=t.startY,s=t.margin,o={x:s.left,y:r},u=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=r+s.bottom+u;if(t.pageBreak==="avoid"){var f=e.body,p=f.reduce(function(E,w){return E+w.height},0);d+=p}var m=new nh(n);(t.pageBreak==="always"||t.startY!=null&&d>m.pageSize().height)&&(s3(m),o.y=s.top),e.callWillDrawPageHooks(m,o);var x=Wl({},o);e.startPageNumber=m.pageNumber(),t.horizontalPageBreak?EO(m,e,x,o):(m.applyStyles(m.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(E){return ic(m,e,E,o,e.columns)}),m.applyStyles(m.userStyles),e.body.forEach(function(E,w){var A=w===e.body.length-1;ig(m,e,E,A,x,o,e.columns)}),m.applyStyles(m.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(E){return ic(m,e,E,o,e.columns)})),QA(m,e,x,o),e.callEndPageHooks(m,o),e.finalY=o.y,n.lastAutoTable=e,m.applyStyles(m.userStyles)}function EO(n,e,t,r){var s=SO(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(p,m){n.applyStyles(n.userStyles),m>0?Af(n,e,t,r,p.columns,!0):FS(n,e,r,p.columns),NO(n,e,t,r,p.columns),Hy(n,e,r,p.columns)});else for(var u=-1,d=s[0],f=function(){var p=u;if(d){n.applyStyles(n.userStyles);var m=d.columns;u>=0?Af(n,e,t,r,m,!0):FS(n,e,r,m),p=US(n,e,u+1,r,m),Hy(n,e,r,m)}var x=p-u;s.slice(1).forEach(function(E){n.applyStyles(n.userStyles),Af(n,e,t,r,E.columns,!0),US(n,e,u+1,r,E.columns,x),Hy(n,e,r,E.columns)}),u=p};u<e.body.length-1;)f()}function FS(n,e,t,r){var s=e.settings;n.applyStyles(n.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(o){return ic(n,e,o,t,r)})}function NO(n,e,t,r,s){n.applyStyles(n.userStyles),e.body.forEach(function(o,u){var d=u===e.body.length-1;ig(n,e,o,d,t,r,s)})}function US(n,e,t,r,s,o){n.applyStyles(n.userStyles),o=o??e.body.length;var u=Math.min(t+o,e.body.length),d=-1;return e.body.slice(t,u).forEach(function(f,p){var m=t+p===e.body.length-1,x=i3(n,e,m,r);f.canEntireRowFit(x,s)&&(ic(n,e,f,r,s),d=t+p)}),d}function Hy(n,e,t,r){var s=e.settings;n.applyStyles(n.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(o){return ic(n,e,o,t,r)})}function AO(n,e,t){var r=t.getLineHeight(n.styles.fontSize),s=n.padding("vertical"),o=Math.floor((e-s)/r);return Math.max(0,o)}function TO(n,e,t,r){var s={};n.spansMultiplePages=!0,n.height=0;for(var o=0,u=0,d=t.columns;u<d.length;u++){var f=d[u],p=n.cells[f.index];if(p){Array.isArray(p.text)||(p.text=[p.text]);var m=new r3(p.raw,p.styles,p.section);m=Wl(m,p),m.text=[];var x=AO(p,e,r);p.text.length>x&&(m.text=p.text.splice(x,p.text.length));var E=r.scaleFactor(),w=r.getLineHeightFactor();p.contentHeight=p.getContentHeight(E,w),p.contentHeight>=e&&(p.contentHeight=e,m.styles.minCellHeight-=e),p.contentHeight>n.height&&(n.height=p.contentHeight),m.contentHeight=m.getContentHeight(E,w),m.contentHeight>o&&(o=m.contentHeight),s[f.index]=m}}var A=new n3(n.raw,-1,n.section,s,!0);A.height=o;for(var D=0,C=t.columns;D<C.length;D++){var f=C[D],m=A.cells[f.index];m&&(m.height=A.height);var p=n.cells[f.index];p&&(p.height=n.height)}return A}function CO(n,e,t,r){var s=n.pageSize().height,o=r.settings.margin,u=o.top+o.bottom,d=s-u;e.section==="body"&&(d-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var f=e.getMinimumRowHeight(r.columns,n),p=f<t;if(f>d)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!p)return!1;var m=e.hasRowSpan(r.columns),x=e.getMaxCellHeight(r.columns)>d;return x?(m&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(m||r.settings.rowPageBreak==="avoid")}function ig(n,e,t,r,s,o,u){var d=i3(n,e,r,o);if(t.canEntireRowFit(d,u))ic(n,e,t,o,u);else if(CO(n,t,d,e)){var f=TO(t,d,e,n);ic(n,e,t,o,u),Af(n,e,s,o,u),ig(n,e,f,r,s,o,u)}else Af(n,e,s,o,u),ig(n,e,t,r,s,o,u)}function ic(n,e,t,r,s){r.x=e.settings.margin.left;for(var o=0,u=s;o<u.length;o++){var d=u[o],f=t.cells[d.index];if(!f){r.x+=d.width;continue}n.applyStyles(f.styles),f.x=r.x,f.y=r.y;var p=e.callCellHooks(n,e.hooks.willDrawCell,f,t,d,r);if(p===!1){r.x+=d.width;continue}jO(n,f,r);var m=f.getTextPos();YA(f.text,m.x,m.y,{halign:f.styles.halign,valign:f.styles.valign,maxWidth:Math.ceil(f.width-f.padding("left")-f.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,f,t,d,r),r.x+=d.width}r.y+=t.height}function jO(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var s=JA(r.lineWidth,r.fillColor);s&&n.rect(e.x,t.y,e.width,e.height,s)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),RO(n,e,t,r.lineWidth))}function RO(n,e,t,r){var s,o,u,d;r.top&&(s=t.x,o=t.y,u=t.x+e.width,d=t.y,r.right&&(u+=.5*r.right),r.left&&(s-=.5*r.left),f(r.top,s,o,u,d)),r.bottom&&(s=t.x,o=t.y+e.height,u=t.x+e.width,d=t.y+e.height,r.right&&(u+=.5*r.right),r.left&&(s-=.5*r.left),f(r.bottom,s,o,u,d)),r.left&&(s=t.x,o=t.y,u=t.x,d=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(d+=.5*r.bottom),f(r.left,s,o,u,d)),r.right&&(s=t.x+e.width,o=t.y,u=t.x+e.width,d=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(d+=.5*r.bottom),f(r.right,s,o,u,d));function f(p,m,x,E,w){n.getDocument().setLineWidth(p),n.getDocument().line(m,x,E,w,"S")}}function i3(n,e,t,r){var s=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(s+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-s}function Af(n,e,t,r,s,o){s===void 0&&(s=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(d){return ic(n,e,d,r,s)}),e.callEndPageHooks(n,r);var u=e.settings.margin;QA(n,e,t,r),s3(n),e.pageNumber++,r.x=u.left,r.y=u.top,t.y=u.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return ic(n,e,d,r,s)}),n.applyStyles(n.userStyles))}function s3(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function IO(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],s=eO(this,r),o=gO(this,s);return _O(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,s){YA(e,t,r,s,this)},n.API.autoTableSetDefaults=function(e){return nh.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){nh.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new nh(this),o=t3(s,e,window,t,!1),u=o.head,d=o.body,f=((r=u[0])===null||r===void 0?void 0:r.map(function(p){return p.content}))||[];return{columns:f,rows:d,data:d}}}var Gy;try{if(typeof window<"u"&&window){var BS=window,VS=BS.jsPDF||((Gy=BS.jspdf)===null||Gy===void 0?void 0:Gy.jsPDF);VS&&IO(VS)}}catch(n){console.error("Could not apply autoTable plugin",n)}const DO=()=>{const[n,e]=K.useState([]),[t,r]=K.useState([]),[s,o]=K.useState(!0),[u,d]=K.useState(!1),[f,p]=K.useState(null),[m,x]=K.useState(!1);K.useEffect(()=>{console.log("showExportDropdown changed:",m)},[m]);const[E,w]=K.useState({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),[A,D]=K.useState(""),[C,k]=K.useState("name"),[H,G]=K.useState("asc"),[V,ce]=K.useState([]),[se,U]=K.useState(""),[I,R]=K.useState(""),[q,j]=K.useState(!1),[F,M]=K.useState(!1),[ne,Se]=K.useState(""),[le,ve]=K.useState(""),[ye,ge]=K.useState(null),[we,Q]=K.useState(!1),[P,Y]=K.useState(""),[re,fe]=K.useState(!1),me=ci();K.useEffect(()=>{_e();const Ue=()=>{_e()};window.addEventListener("studentsUpdated",Ue);const ot=localStorage.getItem("studentDeletePin");return ot&&ve(ot),()=>{window.removeEventListener("studentsUpdated",Ue)}},[]),K.useEffect(()=>{le&&localStorage.setItem("studentDeletePin",le)},[le]),K.useEffect(()=>{Me()},[n,A,C,H,I]),K.useEffect(()=>{const Ue=ot=>{m&&!ot.target.closest(".export-dropdown")&&x(!1)};return document.addEventListener("mousedown",Ue),()=>{document.removeEventListener("mousedown",Ue)}},[m]);const _e=async()=>{try{const Ue=await Fn.getStudents();e(Ue),o(!1)}catch(Ue){console.error("Error fetching students:",Ue),o(!1)}},Me=()=>{let Ue=[...n];A&&(Ue=Ue.filter(ot=>ot.name.toLowerCase().includes(A.toLowerCase())||ot.class.toLowerCase().includes(A.toLowerCase())||ot.studentId.toLowerCase().includes(A.toLowerCase())||ot.contact&&ot.contact.includes(A)||ot.email&&ot.email.toLowerCase().includes(A.toLowerCase()))),I&&(Ue=Ue.filter(ot=>ot.class.toLowerCase()===I.toLowerCase())),Ue.sort((ot,dt)=>{let gt,De;switch(C){case"name":gt=ot.name.toLowerCase(),De=dt.name.toLowerCase();break;case"class":gt=ot.class.toLowerCase(),De=dt.class.toLowerCase();break;case"pending":gt=(ot.totalFees||0)-(ot.feesPaid||0),De=(dt.totalFees||0)-(dt.feesPaid||0);break;case"status":gt=vt(ot),De=vt(dt);break;default:gt=ot[C],De=dt[C]}return typeof gt=="string"?H==="asc"?gt.localeCompare(De):De.localeCompare(gt):H==="asc"?gt-De:De-gt}),r(Ue)},Le=Ue=>{const{name:ot,value:dt}=Ue.target;if(ot==="totalFees"||ot==="feesPaid"){if(dt===""||dt===null||dt===void 0){w(De=>({...De,[ot]:""}));return}const gt=parseFloat(dt);if(!isNaN(gt))w(De=>({...De,[ot]:dt}));else return}else w(gt=>({...gt,[ot]:dt}))},Z=async Ue=>{if(Ue.preventDefault(),console.log("=== HANDLE SUBMIT START ==="),re){console.log("Form is already submitting, ignoring duplicate submission");return}fe(!0);try{if(console.log("Form data before processing:",E),console.log("Editing student:",f),console.log("Is editing student:",!!f),console.log("Editing student ID:",f?.id),console.log("Editing student studentId:",f?.studentId),!E.name||!E.class||E.totalFees===""||E.totalFees===void 0){const We="Please fill in all required fields: Name, Class, and Total Fees";console.log("Validation error:",We),alert(We),fe(!1);return}const ot=parseFloat(E.totalFees),dt=parseFloat(E.feesPaid)||0;if(console.log("Parsed values:",{totalFees:ot,feesPaid:dt}),isNaN(ot)||ot<0){const We="Please enter a valid total fees amount (must be a positive number)";console.log("Validation error:",We),alert(We),fe(!1);return}if(isNaN(dt)||dt<0){const We="Please enter a valid fees paid amount (must be a positive number or zero)";console.log("Validation error:",We),alert(We),fe(!1);return}if(dt>ot){const We="Fees paid cannot exceed total fees";console.log("Validation error:",We),alert(We),fe(!1);return}const gt={...E,totalFees:ot,feesPaid:dt,feesDue:ot-dt};console.log("Student data to save:",gt),f?(console.log("Updating existing student"),await Fn.updateStudent(f.id,gt)):(console.log("Adding new student"),await Fn.addStudent(gt)),d(!1),p(null),w({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),await _e();const De=f?"Student updated successfully!":"Student added successfully!";window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:De}})),console.log("=== HANDLE SUBMIT END SUCCESS ===")}catch(ot){console.error("Error saving student:",ot),alert("Error saving student. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error saving student. Please try again."}})),console.log("=== HANDLE SUBMIT END ERROR ===")}finally{fe(!1)}},ae=()=>{p(null),w({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),d(!0)},Te=Ue=>{console.log("Editing student:",Ue),p(Ue),w({name:Ue.name||"",class:Ue.class||"",contact:Ue.contact||"",email:Ue.email||"",address:Ue.address||"",fatherName:Ue.fatherName||"",motherName:Ue.motherName||"",totalFees:Ue.totalFees!==void 0?Ue.totalFees.toString():"",feesPaid:Ue.feesPaid!==void 0?Ue.feesPaid.toString():""}),d(!0)},Ee=async Ue=>{if(window.confirm("Are you sure you want to delete this student? This action cannot be undone.")){if(!le){ge(Ue),M(!0);return}if(prompt("Enter PIN to delete student:")!==le){alert("Incorrect PIN. Delete operation cancelled.");return}await pe(Ue)}},pe=async Ue=>{try{await Fn.deleteStudent(Ue),await _e(),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Student deleted successfully!"}}))}catch(ot){console.error("Error deleting student:",ot),alert("Error deleting student. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error deleting student. Please try again."}}))}},z=Ue=>{ce(ot=>ot.includes(Ue)?ot.filter(dt=>dt!==Ue):[...ot,Ue])},Ie=()=>{V.length===t.length?ce([]):ce(t.map(Ue=>Ue.id))},Be=Ue=>{C===Ue?G(H==="asc"?"desc":"asc"):(k(Ue),G("asc"))},$e=async()=>{if(se)if(se==="delete"){if(window.confirm(`Are you sure you want to delete ${V.length} selected student(s)? This action cannot be undone.`)){if(!le){Q(!0),M(!0);return}if(prompt("Enter PIN to delete students:")!==le){alert("Incorrect PIN. Delete operation cancelled.");return}await Ce()}}else se==="export"?Ze():se==="export-pdf"&&et()},Ce=async()=>{try{for(const Ue of V)await Fn.deleteStudent(Ue);ce([]),U(""),await _e(),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:`${V.length} student(s) deleted successfully!`}}))}catch(Ue){console.error("Error deleting students:",Ue),alert("Error deleting students. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error deleting students. Please try again."}}))}},Ze=()=>{const Ue=[["Name","Class","Contact","Email","Address","Father Name","Mother Name","Total Fees","Fees Paid","Fees Due"],...t.map(De=>[De.name,De.class,De.contact||"",De.email||"",De.address||"",De.fatherName||"",De.motherName||"",De.totalFees||0,De.feesPaid||0,(De.totalFees||0)-(De.feesPaid||0)])].map(De=>De.join(",")).join(`
`),ot=new Blob([Ue],{type:"text/csv;charset=utf-8;"}),dt=URL.createObjectURL(ot),gt=document.createElement("a");gt.setAttribute("href",dt),gt.setAttribute("download","students_export.csv"),gt.style.visibility="hidden",document.body.appendChild(gt),gt.click(),document.body.removeChild(gt)},et=()=>{try{console.log("Starting PDF export function");const Ue=new Mt;Ue.setFontSize(18),Ue.text("Students Report",20,20);const ot=new Date().toLocaleDateString();if(Ue.setFontSize(12),Ue.text(`Generated on: ${ot}`,20,30),t&&t.length>0){const dt=[["Name","Class","Contact","Email","Total Fees","Fees Paid","Fees Due"]],gt=t.map(De=>[De.name||"N/A",De.class||"N/A",De.contact||"N/A",De.email||"N/A",De.totalFees?`${Number(De.totalFees).toLocaleString()}`:"0",De.feesPaid?`${Number(De.feesPaid).toLocaleString()}`:"0",De.totalFees&&De.feesPaid?`${Number(De.totalFees-De.feesPaid).toLocaleString()}`:"0"]);Ue.autoTable({head:dt,body:gt,startY:40,styles:{fontSize:10},headStyles:{fillColor:[52,152,219]},alternateRowStyles:{fillColor:[240,240,240]},margin:{horizontal:10}})}else Ue.text("No student data available.",20,40);Ue.save("students_export.pdf")}catch(Ue){console.error("Error generating PDF:",Ue),alert("Failed to generate PDF. Please check console for details.")}},xt=Ue=>{me("/student-details",{state:{student:Ue}})},vt=Ue=>{const ot=parseFloat(Ue.totalFees)||0,dt=parseFloat(Ue.feesPaid)||0,gt=ot-dt;return dt===0?"Not Started":gt<=0?"Paid":"Pending"};return s?c.jsx("div",{className:"loading",children:"Loading students..."}):c.jsx(rc,{children:c.jsxs("div",{className:"students-container",children:[c.jsxs("div",{className:"students-header",children:[c.jsx("div",{className:"header-left",children:c.jsx("h1",{children:"Students Management"})}),c.jsx("div",{className:"header-right",children:c.jsxs("div",{className:"header-actions",children:[c.jsx("button",{className:"add-btn",onClick:ae,children:"+ Add Student"}),c.jsxs("div",{className:"export-dropdown",children:[c.jsx("button",{className:"export-btn",onClick:()=>{console.log("Export button clicked, current state:",m),x(!m)},children:" Export "}),m&&c.jsxs("div",{className:"export-dropdown-menu",children:[c.jsx("button",{className:"export-option",onClick:()=>{Ze(),x(!1)},children:"Export as CSV"}),c.jsx("button",{className:"export-option",onClick:()=>{console.log("PDF export button clicked"),et(),x(!1)},children:"Export as PDF"})]})]})]})})]}),c.jsxs("div",{className:"search-filters",children:[c.jsxs("div",{className:"search-container",children:[c.jsx("input",{type:"text",placeholder:"Search students by name, class, ID, contact or email...",className:"search-input",value:A,onChange:Ue=>D(Ue.target.value)}),c.jsx("span",{className:"search-icon",children:""})]}),c.jsx("div",{className:"filter-container",children:c.jsxs("button",{className:`filter-btn ${I?"active":""}`,onClick:()=>{Y(I),j(!0)},children:["Filter ",I&&`(${I})`,I&&c.jsx("span",{className:"clear-filter",onClick:Ue=>{Ue.stopPropagation(),R("")},children:""})]})}),t.length>0&&c.jsx("div",{className:"bulk-actions-container",children:c.jsxs("div",{className:"bulk-actions",children:[c.jsx("input",{type:"checkbox",checked:V.length===t.length&&t.length>0,onChange:Ie,className:"select-all-checkbox"}),c.jsx("span",{className:"bulk-label",children:V.length>0?`${V.length} selected`:"Select all"}),V.length>0&&c.jsxs("div",{className:"bulk-action-controls",children:[c.jsxs("select",{value:se,onChange:Ue=>U(Ue.target.value),className:"bulk-action-select",children:[c.jsx("option",{value:"",children:"Choose action..."}),c.jsx("option",{value:"delete",children:"Delete Selected"}),c.jsx("option",{value:"export",children:"Export Selected (CSV)"}),c.jsx("option",{value:"export-pdf",children:"Export Selected (PDF)"})]}),c.jsx("button",{onClick:$e,disabled:!se,className:"bulk-action-btn",children:"Apply"})]})]})})]}),u&&c.jsx("div",{className:"form-overlay",children:c.jsxs("div",{className:"form-container",children:[c.jsxs("div",{className:"form-header",children:[c.jsx("h2",{children:f?"Edit Student":"Add New Student"}),c.jsx("button",{className:"close-btn",onClick:()=>d(!1),children:""})]}),c.jsxs("form",{onSubmit:Z,children:[c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Name *"}),c.jsx("input",{type:"text",name:"name",value:E.name,onChange:Le,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Class *"}),c.jsxs("select",{name:"class",value:E.class,onChange:Le,required:!0,children:[c.jsx("option",{value:"",children:"Select Class"}),c.jsx("option",{value:"Nursery",children:"Nursery"}),c.jsx("option",{value:"LKG",children:"LKG"}),c.jsx("option",{value:"UKG",children:"UKG"}),c.jsx("option",{value:"1st",children:"1st"}),c.jsx("option",{value:"2nd",children:"2nd"}),c.jsx("option",{value:"3rd",children:"3rd"}),c.jsx("option",{value:"4th",children:"4th"}),c.jsx("option",{value:"5th",children:"5th"}),c.jsx("option",{value:"6th",children:"6th"}),c.jsx("option",{value:"7th",children:"7th"}),c.jsx("option",{value:"8th",children:"8th"}),c.jsx("option",{value:"9th",children:"9th"}),c.jsx("option",{value:"10th",children:"10th"}),c.jsx("option",{value:"11th",children:"11th"}),c.jsx("option",{value:"12th",children:"12th"})]})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Contact"}),c.jsx("input",{type:"text",name:"contact",value:E.contact,onChange:Le,placeholder:"Phone number"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Email"}),c.jsx("input",{type:"email",name:"email",value:E.email,onChange:Le,placeholder:"Email address"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Address"}),c.jsx("textarea",{name:"address",value:E.address,onChange:Le,placeholder:"Full address",className:"address-input",rows:"3"})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Father's Name"}),c.jsx("input",{type:"text",name:"fatherName",value:E.fatherName,onChange:Le})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Mother's Name"}),c.jsx("input",{type:"text",name:"motherName",value:E.motherName,onChange:Le})]})]}),c.jsxs("div",{className:"form-row",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Total Fees () *"}),c.jsx("input",{type:"number",name:"totalFees",value:E.totalFees,onChange:Le,required:!0,min:"0",step:"0.01"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Fees Paid () *"}),c.jsx("input",{type:"number",name:"feesPaid",value:E.feesPaid,onChange:Le,required:!0,min:"0",step:"0.01"})]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:()=>d(!1),disabled:re,children:"Cancel"}),c.jsx("button",{type:"submit",className:"save-btn",disabled:re,children:re?"Saving...":f?"Update Student":"Add Student"})]})]})]})}),q&&c.jsx("div",{className:"form-overlay",children:c.jsxs("div",{className:"form-container filter-modal",children:[c.jsxs("div",{className:"form-header",children:[c.jsx("h2",{children:"Filter by Class"}),c.jsx("button",{className:"close-btn",onClick:()=>j(!1),children:""})]}),c.jsxs("div",{className:"filter-content",children:[c.jsx("div",{className:"filter-options",children:["Nursery","LKG","UKG","1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"].map(Ue=>c.jsx("div",{className:`filter-option ${P===Ue?"active":""}`,onClick:()=>Y(P===Ue?"":Ue),children:Ue},Ue))}),c.jsxs("div",{className:"filter-actions",children:[c.jsx("button",{className:"clear-btn",onClick:()=>{Y(""),R(""),j(!1)},children:"Clear"}),c.jsx("button",{className:"save-btn",onClick:()=>{R(P),j(!1)},children:"Apply Filter"})]})]})]})}),c.jsx("div",{className:"students-table-container",children:c.jsxs("table",{className:"students-table",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"students-table-grid",children:[c.jsx("th",{className:"checkbox-header",children:c.jsx("input",{type:"checkbox",checked:V.length===t.length&&t.length>0,onChange:Ie})}),c.jsxs("th",{onClick:()=>Be("name"),children:["Name ",C==="name"&&(H==="asc"?"":"")]}),c.jsxs("th",{onClick:()=>Be("class"),children:["Class ",C==="class"&&(H==="asc"?"":"")]}),c.jsx("th",{children:"Contact"}),c.jsx("th",{children:"Total Fees"}),c.jsx("th",{children:"Paid Fees"}),c.jsx("th",{children:"Pending Fees"}),c.jsxs("th",{onClick:()=>Be("status"),children:["Status ",C==="status"&&(H==="asc"?"":"")]}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:t.length===0?c.jsx("tr",{className:"students-table-grid",children:c.jsx("td",{colSpan:"9",className:"no-data-container",children:c.jsx("div",{className:"no-data",children:"No students found. Add a new student to get started."})})}):t.map(Ue=>{const ot={...Ue,status:vt(Ue)},dt=(Ue.totalFees||0)-(Ue.feesPaid||0);return c.jsxs("tr",{className:"student-row students-table-grid",children:[c.jsx("td",{children:c.jsx("input",{type:"checkbox",checked:V.includes(Ue.id),onChange:()=>z(Ue.id),className:"student-checkbox"})}),c.jsx("td",{children:c.jsxs("div",{className:"student-info",children:[c.jsx("div",{className:"student-name",children:Ue.name}),c.jsx("div",{className:"student-id",children:Ue.studentId}),Ue.email&&c.jsx("div",{className:"student-email",children:Ue.email})]})}),c.jsx("td",{children:Ue.class}),c.jsx("td",{children:Ue.contact&&c.jsxs("div",{className:"contact-info",children:[c.jsx("div",{children:Ue.contact}),Ue.fatherName&&c.jsxs("div",{className:"parent-name",children:["Father: ",Ue.fatherName]})]})}),c.jsxs("td",{children:["",parseFloat(Ue.totalFees||0).toLocaleString()]}),c.jsxs("td",{children:["",parseFloat(Ue.feesPaid||0).toLocaleString()]}),c.jsxs("td",{className:"fee-pending",children:["",dt.toLocaleString()]}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${ot.status.toLowerCase().replace(" ","-")}`,children:ot.status==="Pending"?" Pending":ot.status==="Paid"?" Paid":" Not Started"})}),c.jsx("td",{children:c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"view-btn",onClick:()=>xt(Ue),children:"View"}),c.jsx("button",{className:"edit-btn",onClick:()=>Te(Ue),children:"Edit"}),c.jsx("button",{className:"delete-btn",onClick:()=>Ee(Ue.id),children:"Delete"})]})})]},Ue.id)})})]})}),F&&c.jsx("div",{className:"pin-dialog-overlay",children:c.jsxs("div",{className:"pin-dialog",children:[c.jsx("h3",{children:"Set PIN for Student Deletion Protection"}),c.jsx("p",{children:"Enter a 4-digit PIN to protect student deletion:"}),c.jsx("input",{type:"password",maxLength:"4",value:ne,onChange:Ue=>Se(Ue.target.value.replace(/\D/g,"")),placeholder:"Enter 4-digit PIN",className:"pin-input"}),c.jsxs("div",{className:"pin-dialog-buttons",children:[c.jsx("button",{className:"cancel-button",onClick:()=>{M(!1),Se(""),ge(null),Q(!1)},children:"Cancel"}),c.jsx("button",{className:"save-button",onClick:()=>{ne.length===4?(ve(ne),M(!1),ye?(pe(ye),ge(null)):we&&(Ce(),Q(!1))):alert("PIN must be 4 digits")},children:"Set PIN & Proceed"})]})]})})]})})},kO=()=>{const n=ci(),e=eo(),[t,r]=K.useState(null),[s,o]=K.useState(!0),[u,d]=K.useState(null),[f,p]=K.useState([]),[m,x]=K.useState(!0),[E,w]=K.useState(null),[A,D]=K.useState(null),[C,k]=K.useState(!1),[H,G]=K.useState(!1),[V,ce]=K.useState("Victory Point Academy");K.useEffect(()=>{(async()=>{if(vn())try{const we=mn(),Q=dr(Wn,`users/${we}/settings/profile`),P=await yh(Q);if(P.exists()){const Y=P.data();Y.firmName&&ce(Y.firmName)}}catch(we){console.error("Error fetching firm name:",we)}})()},[]),K.useEffect(()=>{(async()=>{try{console.log("Testing Firebase Storage connection on component mount...");const we=await FP();console.log("Firebase Storage connection test result:",we)}catch(we){console.error("Error during storage connection test:",we)}})()},[]);const se=ge=>{try{return ge&&typeof ge=="object"&&ge.seconds!==void 0?new Date(ge.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):ge instanceof Date?ge.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):typeof ge=="string"?new Date(ge).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):typeof ge=="number"?ge>1e10?new Date(ge).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):new Date(ge*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}catch(we){return console.error("Error formatting date:",we),"N/A"}},U=ge=>`${parseFloat(ge||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,I=async ge=>{try{x(!0);const P=(await Fn.getPayments()).filter(Y=>Y.studentId===ge).sort((Y,re)=>{const fe=Y.createdAt instanceof Date?Y.createdAt:new Date(Y.createdAt?.seconds*1e3||Y.createdAt);return(re.createdAt instanceof Date?re.createdAt:new Date(re.createdAt?.seconds*1e3||re.createdAt))-fe});p(P)}catch(we){console.error("Error fetching student payments:",we)}finally{x(!1)}};K.useEffect(()=>{(async()=>{try{o(!0);const we=e.state?.student;if(we)r(we),we.photoURL&&D(we.photoURL),I(we.studentId||we.id);else{const P=new URLSearchParams(window.location.search).get("id");if(P){const Y=await Fn.getStudentById(P);Y?(r(Y),Y.photoURL&&D(Y.photoURL),I(P)):d("Student not found")}else d("No student data provided")}}catch(we){console.error("Error fetching student details:",we),d("Error loading student details")}finally{o(!1)}})()},[e.state]),K.useEffect(()=>{const ge=async()=>{try{const Q=t?.studentId||t?.id;if(Q){const P=await Fn.getStudentById(Q);P&&(r(P),P.photoURL&&D(P.photoURL),I(Q))}}catch(Q){console.error("Error refreshing student details:",Q)}},we=Q=>{if(Q.detail&&Q.detail.student){const P=Q.detail.student,Y=t?.studentId||t?.id,re=P.studentId||P.id;Y===re&&(r(P),P.photoURL&&D(P.photoURL),I(re))}};return window.addEventListener("studentsUpdated",ge),window.addEventListener("studentUpdated",we),()=>{window.removeEventListener("studentsUpdated",ge),window.removeEventListener("studentUpdated",we)}},[t]);const R=ge=>{const we=parseFloat(ge.totalFees)||0,Q=parseFloat(ge.feesPaid)||0;return Q>=we?"Paid":Q>0?"Pending":"Not Started"},q=()=>{n("/students")},j=()=>{n("/students",{state:{editingStudent:t}})},F=()=>{const ge=document.querySelector(".student-profile-card");if(!ge){console.error("Print content not found");return}const we=window.open("","_blank"),Q=`
      <style>
        @media print {
          @page { 
            size: A4; 
            margin: 1cm; 
          }
          body { 
            margin: 0; 
            padding: 0; 
            font-family: 'Times New Roman', serif; 
            color: black; 
          }
          .student-profile-card { 
            max-width: 90%; 
            margin: 0 auto; 
            padding: 15px; 
            box-shadow: none; 
            background: white; 
            font-size: 11px; /* Professional font size */
          }
          .photo-upload-section { 
            display: none; 
          }
          .upload-photo-btn { 
            display: none; 
          }
          .upload-success-message { 
            display: none; 
          }
          .watermark-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            pointer-events: none;
            z-index: 1000;
            opacity: 0.05;
            font-size: 5em;
            color: #cccccc;
            font-weight: bold;
            text-align: center;
          }
          .student-photo-preview {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
            display: block;
            border: 1px solid #ddd;
          }
          .photo-preview img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
          }
          .student-header {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #4e73df; /* Professional border */
          }
          .student-basic-info {
            flex: 1;
          }
          .student-basic-info h2 {
            margin: 0 0 8px 0;
            font-size: 18px;
            color: #2c3e50;
            font-weight: bold;
            text-transform: uppercase;
          }
          .student-id, .student-class {
            font-size: 12px;
            margin: 4px 0;
            font-weight: bold;
          }
          .summary-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
          }
          .summary-card {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            margin-bottom: 0;
            background: #f8f9fa;
          }
          .summary-card-title {
            font-size: 10px;
            margin-bottom: 5px;
            color: #495057;
            font-weight: bold;
          }
          .summary-card-value {
            font-size: 14px;
            font-weight: bold;
            color: #2c3e50;
          }
          .payment-progress-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #f8f9fa;
          }
          .payment-progress-section h3 {
            font-size: 14px;
            margin: 0 0 12px 0;
            color: #2c3e50;
            font-weight: bold;
          }
          .progress-container {
            display: flex;
            flex-direction: column;
            gap: 6px;
          }
          .progress-bar {
            height: 12px;
            background-color: #e9ecef;
            border-radius: 6px;
            overflow: hidden;
          }
          .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4e73df, #224abe);
            border-radius: 6px;
          }
          .progress-text {
            font-size: 11px;
            font-weight: bold;
            color: #495057;
          }
          .personal-info-section, .system-info-section {
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 6px;
            page-break-inside: avoid;
          }
          .personal-info-section h3, .system-info-section h3 {
            padding: 12px 15px;
            margin: 0;
            font-size: 14px;
            background: #4e73df;
            color: white;
          }
          .personal-info-content, .system-info-content {
            padding: 15px;
          }
          .info-category {
            margin-bottom: 15px;
          }
          .info-category h4 {
            font-size: 12px;
            margin: 0 0 10px 0;
            color: #2c3e50;
            font-weight: bold;
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 5px;
          }
          .student-details-grid, .contact-info-grid, .family-info-grid, .system-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 10px;
          }
          .student-detail-item, .contact-detail-item, .family-detail-item, .system-item {
            margin-bottom: 10px;
            page-break-inside: avoid;
          }
          .student-detail-item label, .contact-detail-item label, .family-detail-item label, .system-item label {
            display: block;
            font-weight: bold;
            margin-bottom: 3px;
            font-size: 10px;
            color: #495057;
          }
          .student-detail-item span, .contact-detail-item span, .family-detail-item span, .system-item span {
            display: block;
            padding: 6px;
            background: #ffffff;
            border-radius: 4px;
            font-size: 11px;
            border: 1px solid #dee2e6;
            min-height: 20px;
          }
          .payments-table {
            overflow-x: auto;
            margin-top: 10px;
          }
          .payments-table table {
            width: 100%;
            border-collapse: collapse;
          }
          .payments-table th,
          .payments-table td {
            padding: 8px;
            text-align: left;
            border: 1px solid #dee2e6;
            font-size: 10px;
          }
          .payments-table th {
            background-color: #e9ecef;
            font-weight: bold;
            color: #495057;
          }
          .payments-table tr:nth-child(even) {
            background-color: #f8f9fa;
          }
          .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 9px;
            font-weight: bold;
          }
          .status-paid {
            background: #d4edda;
            color: #155724;
          }
          .status-pending {
            background: #fff3cd;
            color: #856404;
          }
          .status-overdue {
            background: #f8d7da;
            color: #721c24;
          }
          .status-not-started {
            background: #d1ecf1;
            color: #0c5460;
          }
          .print-only {
            display: block !important;
          }
          /* Ensure single page layout */
          .student-profile-card {
            display: block;
            width: 100%;
            overflow: hidden;
          }
          .details-section {
            page-break-inside: avoid;
            margin-bottom: 20px;
          }
        }
        @media screen {
          .print-only {
            display: none;
          }
        }
      </style>
    `,P=`
      <div class="watermark-container">
        ${V}
      </div>
    `,Y=ge.innerHTML;we.document.write(`
      <html>
        <head>
          <title>Student Profile - ${t.name}</title>
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          ${Q}
        </head>
        <body>
          ${P}
          <div class="student-profile-card">
            ${Y}
          </div>
          <script>
            // Add delay to ensure content renders before printing
            setTimeout(() => {
              window.print();
              window.close();
            }, 500);
          <\/script>
        </body>
      </html>
    `),we.document.close()},M=async ge=>{const we=ge.target.files[0];if(console.log("File selected:",we),we){if(G(!1),!we.type.startsWith("image/")){console.log("File type not supported:",we.type),alert("Please select an image file (JPEG, PNG, etc.)");return}if(we.size>5*1024*1024){console.log("File too large:",we.size),alert("File size exceeds 5MB limit");return}console.log("File validation passed");const Q=new FileReader;Q.onload=P=>{console.log("File read complete"),D(P.target.result)},Q.onerror=P=>{console.error("Error reading file:",P)},Q.readAsDataURL(we),w(we);try{if(console.log("Starting upload process..."),k(!0),!t)throw new Error("No student data available");console.log("Student data available:",t);const P=String(t.studentId||t.id);if(console.log("Student ID for upload:",P),!P)throw new Error("No valid student ID available");console.log("Calling uploadStudentPhoto function...");const Y=await OP(P,we);console.log("Photo uploaded successfully:",Y);const re={...t,photoURL:Y};await Fn.updateStudent(re),r(re),D(Y),G(!0),k(!1),setTimeout(()=>{G(!1)},3e3)}catch(P){console.error("Error uploading photo:",P),console.error("Error details:",P.message,P.name,P.stack),console.error("Full error object:",JSON.stringify(P,null,2));let Y="Error uploading photo. Please try again.";if(P.code)switch(P.code){case"storage/unauthorized":Y="Unauthorized: Check your Firebase Storage permissions.";break;case"storage/canceled":Y="Upload canceled.";break;case"storage/unknown":Y="Unknown error occurred during upload.";break;default:Y=`Error: ${P.message||P.code}`}else P.message&&(Y=`Error: ${P.message}`);alert(Y),k(!1)}}else console.log("No file selected")};if(s)return c.jsx("div",{className:"loading",children:"Loading student details..."});if(u)return c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-message",children:u}),c.jsxs("button",{onClick:q,className:"back-button",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{}),c.jsx("path",{})]}),"Back to Students"]})]});if(!t)return c.jsxs("div",{className:"error-container",children:[c.jsx("div",{className:"error-message",children:"No student data available"}),c.jsxs("button",{onClick:q,className:"back-button",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{}),c.jsx("path",{})]}),"Back to Students"]})]});const ne=R(t),Se=(parseFloat(t.totalFees)||0)-(parseFloat(t.feesPaid)||0),le=parseFloat(t.totalFees)||0,ve=parseFloat(t.feesPaid)||0,ye=le>0?Math.round(ve/le*100):0;return c.jsxs("div",{className:"student-details-container",children:[c.jsxs("div",{className:"details-header",children:[c.jsxs("button",{onClick:q,className:"back-button",children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{}),c.jsx("path",{})]}),"Back to Students"]}),c.jsx("h1",{children:"Student Profile"}),c.jsxs("div",{className:"header-buttons",children:[c.jsx("button",{onClick:F,className:"print-button",children:"Print Profile"}),c.jsx("button",{onClick:j,className:"edit-button",children:"Edit Student"})]})]}),c.jsxs("div",{className:"student-profile-card",children:[c.jsxs("div",{className:"student-header",children:[c.jsx("div",{className:"student-avatar-container",children:c.jsxs("div",{className:"photo-upload-section",children:[c.jsx("div",{className:"photo-preview",children:A?c.jsx("img",{src:A,alt:"Student",className:"student-photo-preview"}):c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"photo-placeholder",children:""}),c.jsx("span",{className:"photo-label",children:"Upload Photo"})]})}),c.jsxs("label",{className:`upload-photo-btn ${C?"uploading":""}`,children:[C?"Uploading...":H?"Uploaded!":"Choose File",c.jsx("input",{type:"file",accept:"image/*",onChange:M,style:{display:"none"},disabled:C})]}),H&&c.jsx("div",{className:"upload-success-message",children:"Photo uploaded successfully!"})]})}),c.jsxs("div",{className:"student-basic-info",children:[c.jsx("h2",{children:t.name}),c.jsxs("div",{className:"student-id",children:["ID: ",t.studentId||t.id]}),c.jsxs("div",{className:"student-class",children:["Class: ",t.class]}),c.jsx("span",{className:`status-badge status-${ne.toLowerCase().replace(" ","-")}`,children:ne==="Pending"?" Pending":ne==="Paid"?" Paid":" Not Started"})]})]}),c.jsxs("div",{className:"summary-cards",children:[c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Total Fees"}),c.jsx("div",{className:"summary-card-value fee-total",children:U(le)})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Fees Paid"}),c.jsx("div",{className:"summary-card-value fee-paid",children:U(ve)})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Pending Fees"}),c.jsx("div",{className:"summary-card-value fee-pending",children:U(Se)})]}),t.feesStructure&&c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"summary-card-title",children:"Fee Structure"}),c.jsx("div",{className:"summary-card-value fee-structure",children:t.feesStructure})]})]}),c.jsxs("div",{className:"payment-progress-section",children:[c.jsx("h3",{children:"Payment Progress"}),c.jsxs("div",{className:"progress-container",children:[c.jsx("div",{className:"progress-bar",children:c.jsx("div",{className:"progress-fill",style:{width:`${ye}%`}})}),c.jsxs("div",{className:"progress-text",children:[ye,"% Complete"]})]})]}),c.jsxs("div",{className:"personal-info-section",children:[c.jsx("h3",{children:"Personal Information"}),c.jsxs("div",{className:"personal-info-content",children:[c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Student Details"}),c.jsxs("div",{className:"student-details-grid",children:[c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Full Name"}),c.jsx("span",{children:t.name})]}),c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Student ID"}),c.jsx("span",{children:t.studentId||t.id})]}),c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Class"}),c.jsx("span",{children:t.class})]}),t.feesStructure&&c.jsxs("div",{className:"student-detail-item",children:[c.jsx("label",{children:"Fee Structure"}),c.jsx("span",{children:t.feesStructure})]})]})]}),t.address&&c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Address Information"}),c.jsxs("div",{className:"address-detail-item",children:[c.jsx("label",{children:"Address"}),c.jsx("span",{className:"address-value",children:t.address})]})]}),c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Contact Information"}),c.jsxs("div",{className:"contact-info-grid",children:[c.jsxs("div",{className:"contact-detail-item",children:[c.jsx("label",{children:"Contact Number"}),c.jsx("span",{children:t.contact||"N/A"})]}),t.email&&c.jsxs("div",{className:"contact-detail-item",children:[c.jsx("label",{children:"Email Address"}),c.jsx("span",{children:t.email})]})]})]}),(t.fatherName||t.motherName)&&c.jsxs("div",{className:"info-category",children:[c.jsx("h4",{children:"Family Information"}),c.jsxs("div",{className:"family-info-grid",children:[t.fatherName&&c.jsxs("div",{className:"family-detail-item",children:[c.jsx("label",{children:"Father's Name"}),c.jsx("span",{children:t.fatherName})]}),t.motherName&&c.jsxs("div",{className:"family-detail-item",children:[c.jsx("label",{children:"Mother's Name"}),c.jsx("span",{children:t.motherName})]})]})]})]})]}),c.jsxs("div",{className:"system-info-section",children:[c.jsx("h3",{children:"System Information"}),c.jsx("div",{className:"system-info-content",children:c.jsxs("div",{className:"system-grid",children:[c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Created At"}),c.jsx("span",{children:t.createdAt?se(t.createdAt):"N/A"})]}),c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Last Updated"}),c.jsx("span",{children:t.updatedAt?se(t.updatedAt):"N/A"})]}),c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Database ID"}),c.jsx("span",{children:t.id})]}),t.studentId&&t.id!==t.studentId&&c.jsxs("div",{className:"system-item",children:[c.jsx("label",{children:"Student ID (Display)"}),c.jsx("span",{children:t.studentId})]})]})})]}),c.jsxs("div",{className:"details-section",children:[c.jsx("h3",{children:"Payment History"}),m?c.jsx("div",{className:"loading",children:"Loading payment history..."}):f.length===0?c.jsx("div",{className:"no-payments",children:"No payment history available"}):c.jsx("div",{className:"payments-table",children:c.jsxs("table",{children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Description"}),c.jsx("th",{children:"Amount"}),c.jsx("th",{children:"Status"})]})}),c.jsx("tbody",{children:f.map(ge=>c.jsxs("tr",{children:[c.jsx("td",{children:se(ge.createdAt)}),c.jsx("td",{children:ge.description||"Payment"}),c.jsx("td",{className:"amount",children:U(ge.amount)}),c.jsx("td",{children:c.jsx("span",{className:`status-badge status-${ge.status}`,children:ge.status==="paid"?" Paid":ge.status==="pending"?" Pending":" Overdue"})})]},ge.id))})]})})]})]})]})},LO=()=>{const[n,e]=K.useState([]),[t,r]=K.useState([]),[s,o]=K.useState([]),[u,d]=K.useState(!0),[f,p]=K.useState(!1),[m,x]=K.useState(null),[E,w]=K.useState(""),[A,D]=K.useState("all"),[C,k]=K.useState("all"),[H,G]=K.useState({studentId:"",amount:"",dueDate:"",description:"",method:"Cash"}),[V,ce]=K.useState("Your Academy"),[se,U]=K.useState(""),[I,R]=K.useState("Chinchpada, Airoli, Navi Mumbai - 400708"),[q,j]=K.useState(""),[F,M]=K.useState(""),[ne,Se]=K.useState(!1),[le,ve]=K.useState(!1),ye=ae=>{if(!ae)return"N/A";if(ae instanceof an)return ae.toDate().toLocaleDateString();if(typeof ae=="string"){if(ae.match(/^\d{4}-\d{2}-\d{2}$/)){const[Ee,pe,z]=ae.split("-");return new Date(Ee,pe-1,z).toLocaleDateString()}const Te=new Date(ae);if(!isNaN(Te.getTime()))return Te.toLocaleDateString()}return ae instanceof Date&&!isNaN(ae.getTime())?ae.toLocaleDateString():String(ae)};K.useEffect(()=>{ge(),me();const ae=z=>{const{message:Ie}=z.detail;console.log("Success:",Ie),alert(Ie)},Te=()=>{p(!1),x(null)},Ee=()=>{ge()},pe=()=>{ge()};return window.addEventListener("showSuccess",ae),window.addEventListener("navigateBack",Te),window.addEventListener("studentsUpdated",Ee),window.addEventListener("paymentAdded",pe),()=>{window.removeEventListener("showSuccess",ae),window.removeEventListener("navigateBack",Te),window.removeEventListener("studentsUpdated",Ee),window.removeEventListener("paymentAdded",pe)}},[]),K.useEffect(()=>{we()},[t,E,A,C]);const ge=async()=>{try{const[ae,Te]=await Promise.all([Lg(),ep()]);e(ae),r(Te),d(!1)}catch(ae){console.error("Error fetching data:",ae),d(!1)}},we=()=>{let ae=[...t];E&&(ae=ae.filter(Te=>Te.studentName.toLowerCase().includes(E.toLowerCase())||Te.description.toLowerCase().includes(E.toLowerCase())||Te.studentId.toLowerCase().includes(E.toLowerCase()))),A!=="all"&&(ae=ae.filter(Te=>Te.studentId===A)),C!=="all"&&(ae=ae.filter(Te=>new Date(Te.dueDate).toLocaleString("default",{month:"long",year:"numeric"})===C)),ae.sort((Te,Ee)=>{const pe=Te.createdAt?new Date(Te.createdAt):new Date(0),z=Ee.createdAt?new Date(Ee.createdAt):new Date(0);return!isNaN(pe.getTime())&&!isNaN(z.getTime())?z-pe:isNaN(pe.getTime())?isNaN(z.getTime())?0:1:-1}),o(ae)},Q=async ae=>{const{name:Te,value:Ee}=ae.target,pe=z=>{if(!z)return"";const Ie=new Date(z);return isNaN(Ie.getTime())?"":Ie.getFullYear()+"-"+String(Ie.getMonth()+1).padStart(2,"0")+"-"+String(Ie.getDate()).padStart(2,"0")};if(Te==="dueDate"&&Ee){const z=pe(Ee);G(Ie=>({...Ie,[Te]:z}));return}if(G(z=>({...z,[Te]:Ee})),Te==="amount"&&Ee&&H.studentId){const z=await Fn.getStudentById(H.studentId);if(z){const Ie=parseFloat(Ee)||0,Be=parseFloat(z.totalFees)||0,$e=parseFloat(z.feesPaid)||0;let Ce=Be-$e;if(m){const Ze=parseFloat(m.amount)||0;Ce=Be-$e+Ze}Se(Ie>Ce)}}if(Te==="studentId"&&H.amount&&Ee){const z=await Fn.getStudentById(Ee);if(z){const Ie=parseFloat(H.amount)||0,Be=parseFloat(z.totalFees)||0,$e=parseFloat(z.feesPaid)||0;let Ce=Be-$e;if(m){const Ze=parseFloat(m.amount)||0;Ce=Be-$e+Ze}Se(Ie>Ce)}}},P=async ae=>{if(ae.preventDefault(),!le){ve(!0);try{await Y(H.studentId,H.amount,H.dueDate,H.description,m?m.id:null)&&(G({studentId:"",amount:"",dueDate:"",description:""}),x(null),p(!1))}catch(Te){console.error("Error saving payment:",Te),alert("Error saving payment. Please try again.")}finally{ve(!1)}}};async function Y(ae,Te,Ee,pe,z=null){const Ie=$e=>{if($e==null)return 0;const Ce=parseFloat($e);return Number.isFinite(Ce)?Ce:0},Be=$e=>{if(!$e)return"";const Ce=$e instanceof Date?$e:new Date($e);return isNaN(Ce.getTime())?"":Ce.getFullYear()+"-"+String(Ce.getMonth()+1).padStart(2,"0")+"-"+String(Ce.getDate()).padStart(2,"0")};try{if(console.log("[FIX] start add/edit payment"),console.log("[FIX] Parameters:",{selectedStudentId:ae,paymentAmountRaw:Te,dueDateRaw:Ee,descriptionRaw:pe,editingPaymentId:z}),!ae)return console.log("[FIX] Validation failed: No student selected"),alert("Select a student"),!1;const $e=Ie(Te);if($e<=0)return console.log("[FIX] Validation failed: Invalid amount",Te),alert("Enter valid amount"),!1;console.log("[FIX] Fetching student with ID:",ae);const Ce=await Fn.getStudentById(ae);if(console.log("[FIX] Student fetched:",Ce),!Ce)return console.error("[FIX] student not found",ae),alert("Student not found"),!1;const Ze=Ie(Ce.totalFees),et=Ie(Ce.feesPaid),xt=Ie(Ce.feesDue);console.log("[FIX] Student numeric fields:",{totalFees:Ze,feesPaid:et,feesDue:xt});const vt=Ze-et;if($e>vt)return console.log("[FIX] Validation failed: Amount exceeds remaining fees",{amount:$e,totalFees:Ze,feesPaid:et,maxAllowedAmount:vt}),alert(`Payment amount (${$e}) exceeds the remaining fees balance (${vt}). Maximum allowed amount is ${vt}.`),!1;const Ue=et,ot=et+$e,dt=Math.max(0,ot),gt=Math.max(0,Ze-dt);console.log("[FIX] Student fees calculations:",{oldFeesPaid:Ue,newFeesPaid:ot,finalFeesPaid:dt,finalFeesDue:gt,amountAdded:$e,totalFees:Ze,feesPaid:et});let De="Pending";console.log("[FIX] Determining student status with:",{finalFeesPaid:dt,totalFees:Ze,finalFeesDue:gt}),dt===0?De="Not Started":Ze>0&&dt>=Ze?De="Paid":gt>0&&(De="Pending"),console.log("[FIX] Student status set to:",De);const We={...Ce,totalFees:Ze,feesPaid:dt,feesDue:gt,status:De,updatedAt:an.now()};console.log("[FIX] Updated student object:",We),console.log("[FIX] Student ID for update:",We.id||We.studentId),console.log("[FIX] Saving student:",We);const pt=await Fn.updateStudent(We);if(console.log("[FIX] Student saved result:",pt),!pt)return console.error("[FIX] saveStudent failed",We),alert("Failed to save student. Check console."),!1;console.log("[FIX] student saved");const mt=Be(new Date),ft=Ee?Be(Ee):"";let ct={studentId:ae,amount:$e,dueDate:ft,description:pe||"",createdAt:an.now(),status:"paid",studentName:Ce.name,studentClass:Ce.class,paidDate:an.now(),method:H.method||"Cash",receipt:`RCT-${Date.now()}`};if(!ct.studentId||!ct.studentName||!ct.studentClass)return console.error("[FIX] Missing required student information:",ct),alert("Missing required student information. Please try again."),!1;if(!ct.amount||ct.amount<=0)return console.error("[FIX] Invalid payment amount:",ct.amount),alert("Invalid payment amount. Please enter a valid amount."),!1;console.log("[FIX] Payment object created:",ct);let bt;if(z){if(console.log("[FIX] Updating existing payment:",z),ct={...m,studentId:ae,amount:$e,dueDate:ft,description:pe||"",studentName:Ce.name,studentClass:Ce.class,updatedAt:an.now(),status:m?.status||"paid",paidDate:m?.paidDate||an.now(),method:H.method||m?.method||"Cash",receipt:m?.receipt||`RCT-${Date.now()}`},!ct.studentId||!ct.studentName||!ct.studentClass)return console.error("[FIX] Missing required student information:",ct),alert("Missing required student information. Please try again."),!1;if(!ct.amount||ct.amount<=0)return console.error("[FIX] Invalid payment amount:",ct.amount),alert("Invalid payment amount. Please enter a valid amount."),!1;try{bt=await E1(z,ct),console.log("[FIX] Updating student fees for edited payment:",ae);try{await Fn.updateStudentFees(ae,$e),console.log("[FIX] Student fees updated successfully after edit")}catch(wt){console.error("[FIX] Failed to update student fees after edit:",wt),alert("Payment updated but failed to update student fees. Please refresh the page.")}}catch(wt){return console.error("[FIX] Failed to update payment:",wt),alert("Failed to update payment. Please check the console for details."),!1}}else{console.log("[FIX] Adding new payment");try{bt=await eA(ct)}catch(wt){return console.error("[FIX] Failed to add payment:",wt),alert("Failed to add payment. Please check the console for details."),!1}}if(console.log("[FIX] Payment saved result:",bt),!bt)return console.error("[FIX] savePayment failed",ct),alert("Failed to save payment. Check console."),!1;console.log("[FIX] payment saved",ct),console.log("[FIX] Updating student fees for student:",ae);try{await Fn.updateStudentFees(ae,$e),console.log("[FIX] Student fees updated successfully")}catch(wt){console.error("[FIX] Failed to update student fees:",wt),alert("Payment saved but failed to update student fees. Please refresh the page.")}return await new Promise(wt=>setTimeout(wt,150)),console.log("[FIX] Refreshing UI"),await ge(),await new Promise(wt=>setTimeout(wt,50)),window.dispatchEvent(new Event("studentsUpdated")),window.dispatchEvent(new CustomEvent("dashboardRefresh")),window.dispatchEvent(new CustomEvent("paymentsRefresh")),window.dispatchEvent(new Event("paymentAdded")),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:z?"Payment updated and student updated successfully":"Payment added and student updated successfully"}})),console.log("[FIX] done"),!0}catch($e){return console.error("[FIX] exception:",$e),alert("Unexpected error. See console."),!1}}const re=()=>{x(null),G({studentId:"",amount:"",dueDate:"",description:"",method:"Cash"}),p(!0)},fe=async ae=>{const Te=new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"});let Ee=null;try{Ee=await Fn.getStudentById(ae.studentId)}catch(Be){console.error("Error fetching student info for receipt:",Be)}const z=(Be=>{const $e=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],Ce=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(Be===0)return"Zero Rupees Only";let Ze="",et=Math.floor(Be);return et>=1e5&&(Ze+=$e[Math.floor(et/1e5)]+" Lakh ",et%=1e5),et>=1e3&&(Ze+=$e[Math.floor(et/1e3)]+" Thousand ",et%=1e3),et>=100&&(Ze+=$e[Math.floor(et/100)]+" Hundred ",et%=100),et>=20&&(Ze+=Ce[Math.floor(et/10)]+" ",et%=10),et>0&&(Ze+=$e[et]),Ze.trim()+" Rupees Only"})(parseFloat(ae.amount||0)),Ie=window.open("","_blank");Ie.document.write(`
      <html>
        <head>
          <title>Fee Receipt - ${ae.studentName}</title>
          <style>
            @media print {
              @page { margin: 0; size: A4; }
              body { margin: 0.5cm; }
            }
            
            body { 
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
              max-width: 600px; 
              margin: 0 auto; 
              padding: 10px;
              color: var(--text-primary);
              line-height: 1.3;
              font-size: 13px;
              position: relative;
            }
            
            .receipt-container {
              border: 1px solid var(--info-color); /* Blue for neutral info */
              border-radius: 8px;
              padding: 15px;
              background: white;
              position: relative;
              overflow: hidden;
              box-shadow: none;
            }
            
            .receipt-container::before {
              content: "ORIGINAL COPY";
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%) rotate(-30deg);
              font-size: 36px;
              font-weight: bold;
              color: rgba(78, 115, 223, 0.05);
              pointer-events: none;
              z-index: 0;
            }
            
            .receipt-header {
              text-align: center;
              border-bottom: 2px double var(--info-color); /* Blue for neutral info */
              padding-bottom: 10px;
              margin-bottom: 15px;
              position: relative;
              background: linear-gradient(135deg, #e3f2fd, #bbdefb);
              border-radius: 6px;
              margin: -15px -15px 15px -15px;
              padding: 15px;
              border-bottom: 2px solid var(--info-color);
            }
            
            .receipt-logo {
              max-width: 80px;
              height: auto;
              margin-bottom: 10px;
            }
            
            .school-logo {
              font-size: 20px;
              margin-bottom: 8px;
              color: var(--info-color); /* Blue for neutral info */
}

.school-name {
  font-size: 20px;
  font-weight: bold;
  color: var(--info-color-darker);
  margin: 2px 0;
}

.school-address {
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 8px;
  font-weight: 500;
}

.receipt-title {
  font-size: 18px;
  font-weight: bold;
  color: var(--danger-color); /* Red for alert/drop */
  margin: 10px 0;
  text-transform: uppercase;
  letter-spacing: 1px;
  background: linear-gradient(90deg, var(--info-color), var(--info-color-darker));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.receipt-details {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-bottom: 15px;
  background: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
  border: 1px solid #e9ecef;
}

.detail-item {
  display: flex;
  flex-direction: column;
  padding: 5px 0;
}

.detail-label {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 3px;
  font-weight: 600;
}

.detail-value {
  font-weight: 700;
  color: var(--info-color-darker); /* Blue for neutral info */
  font-size: 14px;
  background: white;
  padding: 3px 8px;
  border-radius: 4px;
  border: 1px solid #e9ecef;
}

.amount-section {
  background: linear-gradient(135deg, #f8f9fa, #e9ecef);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
  border: 1px solid #dee2e6;
}

.amount-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 5px;
}

.amount-row.total {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  font-size: 16px;
  padding-top: 8px;
  border-top: 2px solid var(--info-color);
  margin-top: 8px;
  color: var(--info-color-darker);
}

.amount-in-words {
  margin: 15px 0;
  padding: 10px;
  background: linear-gradient(135deg, #e3f2fd, #bbdefb);
  border-radius: 6px;
  font-style: italic;
  font-weight: 500;
  border: 1px solid #90caf9;
  text-align: center;
  color: #1976d2;
  font-size: 12px;
}

.signature-section {
  display: flex;
  justify-content: space-between;
  margin-top: 25px;
  padding-top: 15px;
  border-top: 1px dashed var(--info-color);
}

.signature-box {
  text-align: center;
  width: 45%;
  background: #f8f9fa;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #e9ecef;
}

.signature-line {
  margin-top: 25px;
  border-top: 1px solid var(--text-primary);
  padding-top: 5px;
  color: var(--text-secondary);
  font-size: 12px;
}

/* Official Section for Signature and Stamp */
.official-section {
  margin: 20px 0 15px;
  padding: 15px 0;
  border-top: 1px solid var(--border-color);
  text-align: center;
}

.official-content {
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 10px;
}

.official-item {
  text-align: center;
  flex: 1;
  min-width: 100px;
  background: #f8f9fa;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #e9ecef;
}

.official-label {
  font-size: 11px;
  color: var(--info-color-darker);
  margin-bottom: 8px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.official-image {
  max-width: 80px;
  max-height: 80px;
  object-fit: contain;
}

.signature-preview {
  /* Signature-specific styling if needed */
}

.stamp-preview {
  /* Stamp-specific styling if needed */
}

.footer {
  text-align: center;
  margin-top: 20px;
  padding-top: 15px;
  font-size: 12px;
  color: var(--text-secondary);
  border-top: 1px solid #e9ecef;
}

.note {
  background: linear-gradient(135deg, #fff8e1, #ffecb3);
  border: 1px solid #ffd54f;
  border-radius: 6px;
  padding: 10px;
  margin: 15px 0;
  font-size: 12px;
  text-align: center;
  font-weight: 500;
  color: #e65100;
}

@media (max-width: 500px) {
  .receipt-details {
    grid-template-columns: 1fr;
  }
  
  .signature-section {
    flex-direction: column;
    gap: 30px;
  }
  
  .signature-box {
    width: 100%;
  }
  
  .official-content {
    flex-direction: column;
    align-items: center;
    gap: 25px;
  }
  
  .official-item {
    width: 100%;
  }
}

          </style>
        </head>
        <body>
          <div class="receipt-container">
            <div class="receipt-header">
              <div class="school-logo"></div>
              <div class="school-name">${V}</div>
              <div class="school-address">${I}</div>
              <div class="receipt-title">Fee Receipt</div>
            </div>
            
            <div class="receipt-details">
              <div class="detail-item">
                <span class="detail-label">Receipt No.</span>
                <span class="detail-value">${ae.id||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Date</span>
                <span class="detail-value">${Te}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Student Name</span>
                <span class="detail-value">${ae.studentName||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Student ID</span>
                <span class="detail-value">${ae.studentId||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Class</span>
                <span class="detail-value">${ae.studentClass||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Description</span>
                <span class="detail-value">${ae.description||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Payment Method</span>
                <span class="detail-value">${ae.method||"Cash"}</span>
              </div>

              ${Ee?`
              <div class="detail-item">
                <span class="detail-label">Total Fees</span>
                <span class="detail-value">${parseFloat(Ee.totalFees||0).toFixed(2)}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Fees Paid (This Payment)</span>
                <span class="detail-value">${parseFloat(ae.amount||0).toFixed(2)}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Total Fees Paid (Cumulative)</span>
                <span class="detail-value">${parseFloat(Ee.feesPaid||0).toFixed(2)}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Pending Fees</span>
                <span class="detail-value">${parseFloat(Ee.totalFees-Ee.feesPaid||0).toFixed(2)}</span>
              </div>
              `:""}
            </div>
            
            <div class="amount-section">
              <div class="amount-row">
                <span>Amount Paid (This Receipt):</span>
                <span>${parseFloat(ae.amount||0).toFixed(2)}</span>
              </div>
              ${Ee?`
              <div class="amount-row">
                <span>Total Fees Paid (Cumulative):</span>
                <span>${parseFloat(Ee.feesPaid||0).toFixed(2)}</span>
              </div>
              <div class="amount-row">
                <span>Total Fees:</span>
                <span>${parseFloat(Ee.totalFees||0).toFixed(2)}</span>
              </div>
              <div class="amount-row">
                <span>Pending Fees:</span>
                <span>${parseFloat(Ee.totalFees-Ee.feesPaid||0).toFixed(2)}</span>
              </div>
              `:""}
              <div class="amount-row total">
                <span>Balance Due:</span>
                <span>${Ee?parseFloat(Ee.totalFees-Ee.feesPaid||0).toFixed(2):"0.00"}</span>
              </div>
            </div>
            
            <div class="amount-in-words">
              Amount in Words: ${z}
            </div>
            
            <div class="note">
              <strong>Note:</strong> This is a computer-generated receipt and does not require a signature.
            </div>
            
            <div class="signature-section">
              <div class="signature-box">
                <div>Cashier Signature</div>
                <div class="signature-line"></div>
              </div>
              <div class="signature-box">
                <div>Parent/Guardian</div>
                <div class="signature-line"></div>
              </div>
            </div>
            
            <!-- Academy Signature and Stamp Section -->
            <div class="official-section">
              ${q||F?`
              <div class="official-content">
                ${q?`
                <div class="official-item">
                  <div class="official-label">Authorized Signature:</div>
                  <img src="${q}" alt="Authorized Signature" class="official-image signature-preview" />
                </div>
                `:""}
                ${F?`
                <div class="official-item">
                  <div class="official-label">Official Seal:</div>
                  <img src="${F}" alt="Official Stamp" class="official-image stamp-preview" />
                </div>
                `:""}
              </div>
              `:""}
            </div>
            
            <div class="footer">
              Thank you for your payment! For any queries, contact us at info@victorypointacademy.edu
            </div>
          </div>
          
          <script>
            window.onload = function() {
              window.print();
              // Close window after print dialog is closed
              setTimeout(function() { window.close(); }, 1000);
            };
          <\/script>
        </body>
      </html>
    `),Ie.document.close()},me=()=>{if(vn())try{const ae=mn(),Te=dr(Wn,`users/${ae}/settings/profile`),Ee=qv(Te,pe=>{if(pe.exists()){const z=pe.data();z.firmName&&z.firmName.trim()!==""?ce(z.firmName):ce("Your Academy"),z.logoUrl&&U(z.logoUrl),z.firmAddress?R(z.firmAddress):R("Chinchpada, Airoli, Navi Mumbai - 400708"),z.signatureUrl&&j(z.signatureUrl),z.stampUrl&&M(z.stampUrl)}else ce("Your Academy"),R("Chinchpada, Airoli, Navi Mumbai - 400708")});return()=>Ee()}catch(ae){console.error("Error loading branding data:",ae)}},_e=()=>{const ae=t.map(Te=>{if(!Te.dueDate)return null;const Ee=new Date(Te.dueDate);return isNaN(Ee.getTime())?null:Ee.toLocaleString("default",{month:"long",year:"numeric"})}).filter(Boolean);return[...new Set(ae)].sort((Te,Ee)=>{const pe=new Date(`01 ${Te}`);return new Date(`01 ${Ee}`)-pe})},Me=ae=>{switch(ae?.toLowerCase()){case"paid":return{text:"Paid",color:"var(--success-color)"};case"pending":return{text:"Pending",color:"var(--warning-color)"};case"overdue":return{text:"Overdue",color:"var(--danger-color)"};case"not started":return{text:"Not Started",color:"var(--info-color)"};default:return{text:"Unknown",color:"var(--info-color)"}}},Z=(()=>{const ae=n.reduce(($e,Ce)=>$e+(parseFloat(Ce.feesPaid)||0),0),Te=n.reduce(($e,Ce)=>$e+(parseFloat(Ce.totalFees)||0),0),Ee=Te-ae,pe=n.length,z=n.filter($e=>$e.status?.toLowerCase()==="paid").length,Ie=Te-ae,Be=t.reduce(($e,Ce)=>$e+(Ce.status?.toLowerCase()==="overdue"?parseFloat(Ce.amount||0):0),0);return{totalCollected:ae,pendingFees:Ee,totalStudents:pe,totalFees:Te,paidStudents:z,pendingPayments:Ie,overdueAmount:Be}})();return u?c.jsx(rc,{children:c.jsx("div",{className:"loading",children:"Loading..."})}):c.jsx(rc,{children:c.jsxs("div",{className:"fees-container",children:[c.jsxs("div",{className:"fees-header",children:[c.jsx("div",{className:"header-left",children:c.jsx("h1",{children:"Fee Management"})}),c.jsx("div",{className:"header-right",children:c.jsx("button",{className:"add-btn",onClick:re,children:"Add Payment"})})]}),c.jsxs("div",{className:"summary-cards",children:[c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--info-color)",color:"var(--info-color)"},children:""}),c.jsxs("div",{className:"card-content",children:[c.jsx("div",{className:"card-title",children:"Total Collected"}),c.jsxs("div",{className:"card-value",children:["",Z.totalCollected.toLocaleString()]})]})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--warning-color)",color:"var(--warning-color)"},children:""}),c.jsxs("div",{className:"card-content",children:[c.jsx("div",{className:"card-title",children:"Pending Payments"}),c.jsxs("div",{className:"card-value",children:["",Math.max(Z.pendingPayments,0).toLocaleString()]})]})]}),c.jsxs("div",{className:"summary-card",children:[c.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--success-color)",color:"var(--success-color)"},children:""}),c.jsxs("div",{className:"card-content",children:[c.jsx("div",{className:"card-title",children:"Total Fees"}),c.jsxs("div",{className:"card-value",children:["",Z.totalFees.toLocaleString()]})]})]})]}),c.jsxs("div",{className:"search-filters",children:[c.jsxs("div",{className:"search-container",children:[c.jsx("input",{type:"text",placeholder:"Search payments...",className:"search-input",value:E,onChange:ae=>w(ae.target.value)}),c.jsx("span",{className:"search-icon",children:""})]}),c.jsxs("div",{className:"filters",children:[c.jsxs("select",{className:"filter-select",value:A,onChange:ae=>D(ae.target.value),children:[c.jsx("option",{value:"all",children:"All Students"}),n.map(ae=>c.jsxs("option",{value:ae.studentId,children:[ae.name," (",ae.studentId,")"]},ae.id))]}),c.jsxs("select",{className:"filter-select",value:C,onChange:ae=>k(ae.target.value),children:[c.jsx("option",{value:"all",children:"All Months"}),_e().map(ae=>c.jsx("option",{value:ae,children:ae},ae))]})]})]}),f&&c.jsx("div",{className:"form-overlay",children:c.jsxs("div",{className:"form-container",children:[c.jsxs("div",{className:"form-header",children:[c.jsx("h2",{children:m?"Edit Payment":"Add New Payment"}),c.jsx("button",{className:"close-btn",onClick:()=>p(!1),children:""})]}),c.jsxs("form",{onSubmit:P,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Student"}),c.jsxs("select",{name:"studentId",value:H.studentId,onChange:Q,required:!0,disabled:m,children:[c.jsx("option",{value:"",children:"Select a student"}),n.map(ae=>c.jsxs("option",{value:ae.studentId,children:[ae.name," (",ae.studentId,") - Class ",ae.class]},ae.id))]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Amount ()"}),c.jsxs("div",{className:"amount-method-container",children:[c.jsx("input",{type:"number",name:"amount",value:H.amount,onChange:Q,required:!0,min:"1",className:ne?"amount-exceeds":"",style:{flex:1,marginRight:"10px"}}),c.jsxs("select",{name:"method",value:H.method,onChange:Q,className:"method-select",style:{flex:1,maxWidth:"150px"},children:[c.jsx("option",{value:"Cash",children:"Cash"}),c.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),c.jsx("option",{value:"Cheque",children:"Cheque"}),c.jsx("option",{value:"UPI",children:"UPI"}),c.jsx("option",{value:"Credit Card",children:"Credit Card"}),c.jsx("option",{value:"Debit Card",children:"Debit Card"}),c.jsx("option",{value:"Net Banking",children:"Net Banking"}),c.jsx("option",{value:"Other",children:"Other"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Due Date"}),c.jsx("input",{type:"date",name:"dueDate",value:H.dueDate,onChange:Q,required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{children:"Description"}),c.jsx("textarea",{name:"description",value:H.description,onChange:Q,rows:"3",placeholder:"Enter payment description (optional)"})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:()=>p(!1),children:"Cancel"}),c.jsx("button",{type:"submit",className:"save-btn",disabled:le,children:le?"Processing...":m?"Update Payment":"Add Payment"})]})]})]})}),c.jsx("div",{className:"payments-table-container",children:c.jsxs("table",{className:"payments-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Student"}),c.jsx("th",{children:"Amount"}),c.jsx("th",{children:"Due Date"}),c.jsx("th",{children:"Description"}),c.jsx("th",{children:"Status"}),c.jsx("th",{children:"Created"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:s.length===0?c.jsx("tr",{children:c.jsx("td",{colSpan:"7",className:"no-data",children:"No payments found. Add a new payment to get started."})}):s.map(ae=>{const Te=Me(ae.status);return c.jsxs("tr",{className:"payment-row",children:[c.jsxs("td",{children:[c.jsx("div",{className:"student-name",children:ae.studentName}),c.jsxs("div",{className:"student-id",children:[ae.studentId,"  ",ae.studentClass]})]}),c.jsxs("td",{children:["",parseFloat(ae.amount||0).toLocaleString()]}),c.jsx("td",{children:ye(ae.dueDate)}),c.jsx("td",{children:ae.description||"-"}),c.jsx("td",{children:c.jsx("span",{className:"status-chip",style:{backgroundColor:Te.color},children:Te.text})}),c.jsx("td",{children:ye(ae.createdAt)}),c.jsx("td",{children:c.jsx("div",{className:"action-buttons",children:c.jsx("button",{className:"print-btn",onClick:async()=>{try{await fe(ae)}catch(Ee){console.error("Error printing receipt:",Ee),alert("Error generating receipt. Please try again.")}},children:"Print"})})})]},ae.id)})})]})})]})})},PO=()=>{const n=ci(),[e,t]=K.useState({roomRent:"",staffSalary:"",electricityBill:"",internetBill:"",otherExpenses:""}),[r,s]=K.useState({}),[o,u]=K.useState(!1),[d,f]=K.useState(!1);K.useEffect(()=>{p()},[]);const p=async()=>{f(!0);try{const k=new Date().toISOString().slice(0,7),H=await Fn.getStaff(),G=await Fn.getStaffAttendance(),V=m(H,G,k);t(ce=>({...ce,staffSalary:V.toString()})),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff salary automatically calculated from current month attendance"}}))}catch(k){console.error("Error fetching staff salary:",k),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error fetching staff salary data."}}))}finally{f(!1)}},m=(k,H,G)=>k.map(ce=>{const U=H.filter(R=>R.staffId===ce.staffId&&R.date.startsWith(G)).filter(R=>R.status==="present").length;return ce.perDaySalary*U}).reduce((ce,se)=>ce+se,0),x=k=>{const{name:H,value:G}=k.target;t(V=>({...V,[H]:G})),r[H]&&s(V=>({...V,[H]:""}))},E=()=>{const k={};return e.roomRent&&isNaN(e.roomRent)&&(k.roomRent="Room rent must be a valid number"),e.staffSalary&&isNaN(e.staffSalary)&&(k.staffSalary="Staff salary must be a valid number"),e.electricityBill&&isNaN(e.electricityBill)&&(k.electricityBill="Electricity bill must be a valid number"),e.internetBill&&isNaN(e.internetBill)&&(k.internetBill="Internet bill must be a valid number"),e.otherExpenses&&isNaN(e.otherExpenses)&&(k.otherExpenses="Other expenses must be a valid number"),s(k),Object.keys(k).length===0},w=()=>{const k=parseFloat(e.roomRent)||0,H=parseFloat(e.staffSalary)||0,G=parseFloat(e.electricityBill)||0,V=parseFloat(e.internetBill)||0,ce=parseFloat(e.otherExpenses)||0;return k+H+G+V+ce},A=async k=>{if(k.preventDefault(),E()){u(!0);try{const H={roomRent:parseFloat(e.roomRent)||0,staffSalary:parseFloat(e.staffSalary)||0,electricityBill:parseFloat(e.electricityBill)||0,internetBill:parseFloat(e.internetBill)||0,otherExpenses:parseFloat(e.otherExpenses)||0,total:w(),date:new Date().toISOString(),createdAt:new Date};await Fn.addExpenditure(H),window.dispatchEvent(new CustomEvent("expenseAdded")),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Expense recorded successfully!"}})),n("/expenses")}catch(H){console.error("Error saving expense:",H),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error saving expense. Please try again."}}))}finally{u(!1)}}},D=()=>{n("/dashboard")},C=w();return c.jsx("div",{className:"expense-form-container",children:c.jsxs("div",{className:"expense-form-card",children:[c.jsx("h2",{children:"Add New Expense"}),c.jsxs("form",{onSubmit:A,className:"expense-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"roomRent",children:"Room Rent ()"}),c.jsx("input",{type:"text",id:"roomRent",name:"roomRent",value:e.roomRent,onChange:x,className:r.roomRent?"error":"",placeholder:"Enter room rent amount"}),r.roomRent&&c.jsx("span",{className:"error-message",children:r.roomRent})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"staffSalary",children:"Staff Salary ()"}),c.jsxs("div",{className:"input-with-button",children:[c.jsx("input",{type:"text",id:"staffSalary",name:"staffSalary",value:e.staffSalary,onChange:x,className:r.staffSalary?"error":"",placeholder:"Enter staff salary amount",disabled:d}),c.jsx("button",{type:"button",className:"refresh-button",onClick:p,disabled:d,children:d?"Loading...":"Refresh"})]}),r.staffSalary&&c.jsx("span",{className:"error-message",children:r.staffSalary}),c.jsx("small",{className:"info-text",children:"Auto-calculated from current month's attendance"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"electricityBill",children:"Electricity Bill ()"}),c.jsx("input",{type:"text",id:"electricityBill",name:"electricityBill",value:e.electricityBill,onChange:x,className:r.electricityBill?"error":"",placeholder:"Enter electricity bill amount"}),r.electricityBill&&c.jsx("span",{className:"error-message",children:r.electricityBill})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"internetBill",children:"Internet Bill ()"}),c.jsx("input",{type:"text",id:"internetBill",name:"internetBill",value:e.internetBill,onChange:x,className:r.internetBill?"error":"",placeholder:"Enter internet bill amount"}),r.internetBill&&c.jsx("span",{className:"error-message",children:r.internetBill})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"otherExpenses",children:"Other Expenses ()"}),c.jsx("input",{type:"text",id:"otherExpenses",name:"otherExpenses",value:e.otherExpenses,onChange:x,className:r.otherExpenses?"error":"",placeholder:"Enter other expenses amount"}),r.otherExpenses&&c.jsx("span",{className:"error-message",children:r.otherExpenses})]}),c.jsxs("div",{className:"total-expenses-container",children:[c.jsx("div",{className:"total-label",children:"Total Expenses:"}),c.jsxs("div",{className:"total-amount",children:["",C.toLocaleString()]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:D,className:"cancel-btn",disabled:o,children:"Cancel"}),c.jsx("button",{type:"submit",className:"submit-btn",disabled:o,children:o?"Saving...":"Save Expense"})]})]})]})})},zS=()=>{const n=ci(),[e,t]=K.useState([]),[r,s]=K.useState(!0),[o,u]=K.useState(new Date().toISOString().slice(0,7)),[d,f]=K.useState(""),[p,m]=K.useState("all"),[x,E]=K.useState("all"),[w,A]=K.useState([]),[D,C]=K.useState(!1),[k,H]=K.useState(!1),[G,V]=K.useState(""),[ce,se]=K.useState(!1),[U,I]=K.useState(null),R=async()=>{try{if(!vn())return;const Z=mn(),ae=dr(Wn,`users/${Z}/settings/budget`),Te=await yh(ae);if(Te.exists()){const Ee=Te.data();I(Ee.monthlyBudget||null)}else I(null)}catch(Z){console.error("Error loading budget limit:",Z),I(null)}},q=Z=>{const ae={},Te=new Date,Ee=`${Te.getFullYear()}-${String(Te.getMonth()+1).padStart(2,"0")}`,pe=Te.toLocaleString("default",{month:"long",year:"numeric"});return ae[Ee]={label:pe,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},Z.forEach(z=>{const Ie=new Date(z.date),Be=`${Ie.getFullYear()}-${String(Ie.getMonth()+1).padStart(2,"0")}`,$e=Ie.toLocaleString("default",{month:"long",year:"numeric"});ae[Be]||(ae[Be]={label:$e,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),ae[Be].expenses.push(z),ae[Be].total+=z.total,ae[Be].roomRent+=z.roomRent,ae[Be].staffSalary+=z.staffSalary,ae[Be].otherExpenses+=z.otherExpenses,ae[Be].electricityBill+=z.electricityBill||0,ae[Be].internetBill+=z.internetBill||0}),Object.entries(ae).map(([z,Ie])=>({key:z,...Ie})).sort((z,Ie)=>Ie.key.localeCompare(z.key))};K.useEffect(()=>{let Z=!0;const ae=async()=>{try{const pe=await Fn.getExpenditures();if(!Z)return;const z=q(pe);t(z),await R();const Ie=pe.flatMap(Be=>{const $e=new Date(Be.date),Ce=`${$e.getFullYear()}-${String($e.getMonth()+1).padStart(2,"0")}`;return[{id:`${Be.id}-rent`,date:Be.date,name:"Room Rent",category:"rent",amount:Be.roomRent,paymentMode:Be.paymentMode||"Cash",addedBy:Be.addedBy||"System",parentId:Be.id},{id:`${Be.id}-salary`,date:Be.date,name:"Staff Salary",category:"salary",amount:Be.staffSalary,paymentMode:Be.paymentMode||"Bank",addedBy:Be.addedBy||"System",parentId:Be.id},{id:`${Be.id}-electricity`,date:Be.date,name:"Electricity Bill",category:"electricity",amount:Be.electricityBill||0,paymentMode:Be.paymentMode||"Cash",addedBy:Be.addedBy||"System",parentId:Be.id},{id:`${Be.id}-internet`,date:Be.date,name:"Internet Bill",category:"internet",amount:Be.internetBill||0,paymentMode:Be.paymentMode||"Cash",addedBy:Be.addedBy||"System",parentId:Be.id},{id:`${Be.id}-other`,date:Be.date,name:"Other Expenses",category:"miscellaneous",amount:Be.otherExpenses,paymentMode:Be.paymentMode||"Cash",addedBy:Be.addedBy||"System",parentId:Be.id}].filter(Ze=>Ze.amount>0)});A(Ie)}catch(pe){console.error("Error fetching expenses:",pe)}finally{Z&&s(!1)}};ae();const Te=()=>{Z&&ae()},Ee=pe=>{if(Z){const{budget:z}=pe.detail;I(z)}};return window.addEventListener("expenditureUpdated",Te),window.addEventListener("budgetUpdated",Ee),()=>{Z=!1,window.removeEventListener("expenditureUpdated",Te),window.removeEventListener("budgetUpdated",Ee)}},[]),K.useEffect(()=>{const Z=ae=>{ce&&!ae.target.closest(".export-dropdown")&&se(!1)};return document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[ce]);const j=Z=>new Date(Z).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),F=Z=>({rent:"",salary:"",electricity:"",internet:"",miscellaneous:""})[Z]||"",M=Z=>({rent:"Room Rent",salary:"Staff Salary",electricity:"Electricity",internet:"Internet",miscellaneous:"Miscellaneous"})[Z]||Z,ne=()=>U?(e.find(ae=>ae.key===o)||{total:0}).total>U:!1,Se=async()=>{let Z=`Date,Expense Name,Category,Amount,Payment Mode,Added By
`;ye.forEach(pe=>{const z=[`"${new Date(pe.date).toLocaleDateString()}"`,`"${pe.name}"`,`"${M(pe.category)}"`,`"${pe.amount.toLocaleString()}"`,`"${pe.paymentMode}"`,`"${pe.addedBy}"`];Z+=z.join(",")+`
`});const ae=new Blob([Z],{type:"text/csv;charset=utf-8;"}),Te=URL.createObjectURL(ae),Ee=document.createElement("a");Ee.setAttribute("href",Te),Ee.setAttribute("download",`expenses_${o}.csv`),Ee.style.visibility="hidden",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee)},le=async()=>{try{console.log("Starting PDF export...");const Z=new Mt;Z.setFontSize(18),Z.text(`Expense Report - ${o}`,20,20);const ae=new Date().toLocaleDateString();if(Z.setFontSize(12),Z.text(`Generated on: ${ae}`,20,30),ye&&ye.length>0){const Te=[["Date","Expense Name","Category","Amount","Payment Mode","Added By"]],Ee=ye.map(pe=>[pe.date?new Date(pe.date).toLocaleDateString():"N/A",pe.name||"N/A",M(pe.category||"miscellaneous"),pe.amount?`${Number(pe.amount).toLocaleString()}`:"0",pe.paymentMode||"N/A",pe.addedBy||"System"]);Z.autoTable({head:Te,body:Ee,startY:40,styles:{fontSize:10},headStyles:{fillColor:[52,152,219]},alternateRowStyles:{fillColor:[240,240,240]},margin:{horizontal:10}})}else Z.text("No expense data available for this period.",20,40);Z.save(`expenses_${o}.pdf`),console.log("PDF export completed successfully")}catch(Z){console.error("Error generating PDF:",Z),alert("Failed to generate PDF. Please check console for details.")}},ve=()=>{const Z=e.find(Ce=>Ce.key===o)||{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},ae=new Date(o);ae.setMonth(ae.getMonth()-1);const Te=`${ae.getFullYear()}-${String(ae.getMonth()+1).padStart(2,"0")}`,Ee=e.find(Ce=>Ce.key===Te)||{total:0},z=[{name:"Staff Salary",amount:Z.staffSalary,icon:""},{name:"Room Rent",amount:Z.roomRent,icon:""},{name:"Electricity Bill",amount:Z.electricityBill,icon:""},{name:"Internet Bill",amount:Z.internetBill,icon:""},{name:"Other Expenses",amount:Z.otherExpenses,icon:""}].reduce((Ce,Ze)=>Ze.amount>Ce.amount?Ze:Ce,{name:"None",amount:0,icon:""}),Ie=new Date(parseInt(o.split("-")[0]),parseInt(o.split("-")[1]),0).getDate(),Be=Z.total/Ie,$e=U||Z.total*1.1;return{totalExpenditure:Z.total,thisMonthSpend:Z.total,highestCategory:z,avgDailySpend:Be,trend:Z.total>Ee.total?"up":"down",budgetLimit:$e,prevMonthTotal:Ee.total}},ye=w.filter(Z=>{const ae=new Date(Z.date);return!(`${ae.getFullYear()}-${String(ae.getMonth()+1).padStart(2,"0")}`!==o||d&&!Z.name.toLowerCase().includes(d.toLowerCase())||p!=="all"&&Z.category!==p||x!=="all"&&Z.paymentMode!==x)}).sort((Z,ae)=>new Date(ae.date)-new Date(Z.date)),ge=()=>{const Z=e.find(Ee=>Ee.key===o)||{roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0,total:0},ae=Z.total||1,Te=[{name:"Staff Salary",amount:Z.staffSalary,percentage:(Z.staffSalary/ae*100).toFixed(1),color:"var(--info-color)",icon:""},{name:"Room Rent",amount:Z.roomRent,percentage:(Z.roomRent/ae*100).toFixed(1),color:"var(--success-color)",icon:""},{name:"Electricity Bill",amount:Z.electricityBill||0,percentage:((Z.electricityBill||0)/ae*100).toFixed(1),color:"var(--warning-color)",icon:""},{name:"Internet Bill",amount:Z.internetBill||0,percentage:((Z.internetBill||0)/ae*100).toFixed(1),color:"var(--purple-color)",icon:""},{name:"Miscellaneous",amount:Z.otherExpenses,percentage:(Z.otherExpenses/ae*100).toFixed(1),color:"var(--text-secondary)",icon:""}];if(Z.staffSalary>0){const Ee=Te.findIndex(pe=>pe.name==="Staff Salary");Te[Ee].amount=Z.staffSalary,Te[Ee].percentage=(Z.staffSalary/ae*100).toFixed(1)}if(Z.roomRent>0){const Ee=Te.findIndex(pe=>pe.name==="Room Rent");Te[Ee].amount=Z.roomRent,Te[Ee].percentage=(Z.roomRent/ae*100).toFixed(1)}if(Z.electricityBill>0){const Ee=Te.findIndex(pe=>pe.name==="Electricity Bill");Te[Ee].amount=Z.electricityBill,Te[Ee].percentage=(Z.electricityBill/ae*100).toFixed(1)}if(Z.internetBill>0){const Ee=Te.findIndex(pe=>pe.name==="Internet Bill");Te[Ee].amount=Z.internetBill,Te[Ee].percentage=(Z.internetBill/ae*100).toFixed(1)}if(Z.otherExpenses>0){const Ee=Te.findIndex(pe=>pe.name==="Miscellaneous");Te[Ee].amount=Z.otherExpenses,Te[Ee].percentage=(Z.otherExpenses/ae*100).toFixed(1)}return Te},we=ve(),Q=ge(),P=e.find(Z=>Z.key===o),Y=P?P.label:new Date(o+"-01").toLocaleString("default",{month:"long",year:"numeric"}),re=new Date(parseInt(o.split("-")[0]),parseInt(o.split("-")[1]),0).getDate(),fe=()=>{const Z=document.querySelector(".section:last-child");Z&&Z.scrollIntoView({behavior:"smooth"}),C(!0)},me=()=>{},_e=Z=>{const Te={"Staff Salary":"salary","Room Rent":"rent","Electricity Bill":"electricity","Internet Bill":"internet","Other Expenses":"miscellaneous"}[Z];Te&&(m(Te),V(Z))},Me=()=>{H(!0)},Le=Z=>{const Te={"Staff Salary":"salary","Room Rent":"rent","Electricity Bill":"electricity","Internet Bill":"internet",Miscellaneous:"miscellaneous"}[Z];Te&&(m(Te),V(Z),setTimeout(()=>{const Ee=document.querySelector(".section:last-child");Ee&&Ee.scrollIntoView({behavior:"smooth",block:"start"})},100))};return r?c.jsx(rc,{children:c.jsxs("div",{className:"expenditure-container",children:[c.jsxs("div",{className:"expenditure-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{children:"Expenditure"}),c.jsx("p",{className:"subtitle",children:"Track and manage academy expenses"})]}),c.jsx("div",{className:"header-right",children:c.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-form"),children:"+ Add Expense"})})]}),c.jsxs("div",{className:"month-selector",children:[c.jsx("label",{htmlFor:"month-select",children:"Select Month:"}),c.jsx("input",{type:"month",id:"month-select",value:o,onChange:Z=>u(Z.target.value),className:"month-input"})]})]}),c.jsx("div",{className:"kpi-skeleton-grid",children:[1,2,3,4].map(Z=>c.jsx("div",{className:"kpi-card skeleton-card"},Z))}),c.jsxs("div",{className:"distribution-skeleton",children:[c.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(Z=>c.jsx("div",{className:"skeleton-bar"},Z))]}),c.jsxs("div",{className:"table-skeleton",children:[c.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(Z=>c.jsx("div",{className:"skeleton-row"},Z))]})]})}):c.jsx(rc,{children:c.jsxs("div",{className:"expenditure-container",children:[ne()&&c.jsx("div",{className:"budget-exceeded-notification",children:c.jsxs("div",{className:"notification-content",children:[c.jsx("span",{className:"notification-icon",children:""}),c.jsx("span",{className:"notification-message",children:"Your spending has crossed the set monthly budget. Review high-expense categories and adjust allocations to maintain financial control."})]})}),c.jsxs("div",{className:"expenditure-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{children:"Expenditure"}),c.jsx("p",{className:"subtitle",children:"Track and manage academy expenses"})]}),c.jsx("div",{className:"header-right",children:c.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-form"),children:"+ Add Expense"})})]}),c.jsxs("div",{className:"month-selector",children:[c.jsx("label",{htmlFor:"month-select",children:"Select Month:"}),c.jsx("input",{type:"month",id:"month-select",value:o,onChange:Z=>u(Z.target.value),className:"month-input"})]})]}),c.jsxs("div",{className:"kpi-grid",children:[c.jsxs("div",{className:"kpi-card total-expenditure",onClick:fe,style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:""}),c.jsx("span",{className:"kpi-title",children:"Total Expenditure"})]}),c.jsxs("div",{className:"kpi-value",children:["",we.totalExpenditure.toLocaleString()]}),c.jsx("div",{className:"helper-text",children:"Overall spending for the month"}),c.jsx("div",{className:`kpi-context ${we.trend}`,children:we.prevMonthTotal>0?c.jsx(c.Fragment,{children:we.trend==="up"?c.jsxs("span",{style:{color:"var(--danger-color)"},children:[" ",(Math.abs(we.totalExpenditure-we.prevMonthTotal)/we.prevMonthTotal*100).toFixed(1),"% vs last month"]}):c.jsxs("span",{style:{color:"var(--success-color)"},children:[" ",(Math.abs(we.totalExpenditure-we.prevMonthTotal)/we.prevMonthTotal*100).toFixed(1),"% vs last month"]})}):"First month recorded"})]}),c.jsxs("div",{className:"kpi-card this-month-spend",onClick:me,style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:""}),c.jsx("span",{className:"kpi-title",children:"This Month Spend"})]}),c.jsxs("div",{className:"kpi-value",children:["",we.thisMonthSpend.toLocaleString()]}),c.jsx("div",{className:"helper-text",children:"Budget utilization tracking"}),c.jsxs("div",{className:"kpi-context",children:["Budget limit: ",c.jsxs("a",{href:"/budget-management",className:"budget-link",children:["",we.budgetLimit.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),c.jsx("div",{className:"budget-bar-container",children:c.jsx("div",{className:"budget-bar",style:{width:`${Math.min(we.thisMonthSpend/we.budgetLimit*100,100)}%`,backgroundColor:we.thisMonthSpend/we.budgetLimit*100<70?"var(--success-color)":we.thisMonthSpend/we.budgetLimit*100<=90?"var(--warning-color)":"var(--danger-color)"}})}),c.jsxs("div",{className:"budget-percentage",children:[isNaN(we.thisMonthSpend/we.budgetLimit*100)?"0":Math.min(we.thisMonthSpend/we.budgetLimit*100,100).toFixed(1),"% of budget used",U&&we.thisMonthSpend/U*100>=90&&we.thisMonthSpend/U*100<100&&c.jsx("span",{className:"budget-warning",children:"  Approaching budget limit"}),U&&we.thisMonthSpend/U*100>=100&&c.jsx("span",{className:"budget-exceeded",children:"  Budget exceeded"})]})]}),c.jsxs("div",{className:"kpi-card highest-category",onClick:()=>_e(we.highestCategory.name),style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:we.highestCategory.icon}),c.jsx("span",{className:"kpi-title",children:"Highest Category"})]}),c.jsx("div",{className:"kpi-value",children:we.highestCategory.name}),c.jsx("div",{className:"helper-text",children:"Largest expense category"}),c.jsxs("div",{className:"kpi-context",children:["",we.highestCategory.amount.toLocaleString()," spent"]})]}),c.jsxs("div",{className:"kpi-card avg-daily-spend",onClick:Me,style:{cursor:"pointer"},children:[c.jsxs("div",{className:"kpi-header",children:[c.jsx("span",{className:"kpi-icon",children:""}),c.jsx("span",{className:"kpi-title",children:"Avg. Daily Spend"})]}),c.jsxs("div",{className:"kpi-value",children:["",we.avgDailySpend.toFixed(2)]}),c.jsx("div",{className:"helper-text",children:"Daily spending average"}),c.jsxs("div",{className:"kpi-context",children:[re," days in month"]})]})]}),c.jsxs("div",{className:"section",children:[c.jsx("h2",{className:"section-title",children:"Expense Distribution"}),c.jsx("div",{className:"distribution-container",children:Q.map((Z,ae)=>c.jsxs("div",{className:`distribution-item ${G===Z.name?"highlighted":""}`,onClick:()=>Le(Z.name),style:{cursor:"pointer"},children:[c.jsxs("div",{className:"distribution-header",children:[c.jsx("span",{className:"distribution-icon",children:Z.icon}),c.jsx("span",{className:"distribution-name",children:Z.name}),c.jsxs("span",{className:"distribution-amount",children:["",Z.amount.toLocaleString()]})]}),c.jsx("div",{className:"distribution-bar-container",children:c.jsx("div",{className:"distribution-bar animate",style:{"--target-width":`${Z.percentage}%`,backgroundColor:`var(${Z.color})`,animationDelay:`${ae*.1}s`},children:c.jsxs("span",{className:"distribution-bar-percentage",children:[Z.percentage,"%"]})})})]},ae))})]}),c.jsx("div",{className:"section",children:c.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-trend"),children:" View Expense Trend Analysis"})}),c.jsxs("div",{className:"section",children:[c.jsx("div",{className:"table-header",children:c.jsxs("div",{className:"header-content",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"section-title",children:"Expense Records"}),c.jsxs("p",{className:"subtitle",children:["Detailed view of all expenses for ",Y]})]}),c.jsxs("div",{className:"filter-controls",children:[c.jsx("input",{type:"text",placeholder:"Search by name, category, date, amount, payment mode...",value:d,onChange:Z=>f(Z.target.value),className:"search-input"}),c.jsxs("select",{value:p,onChange:Z=>m(Z.target.value),className:"filter-select",children:[c.jsx("option",{value:"all",children:"All Categories"}),c.jsx("option",{value:"rent",children:"Room Rent"}),c.jsx("option",{value:"salary",children:"Staff Salary"}),c.jsx("option",{value:"electricity",children:"Electricity Bill"}),c.jsx("option",{value:"internet",children:"Internet Bill"}),c.jsx("option",{value:"miscellaneous",children:"Miscellaneous"})]}),c.jsxs("select",{value:x,onChange:Z=>E(Z.target.value),className:"filter-select",children:[c.jsx("option",{value:"all",children:"All Payment Modes"}),c.jsx("option",{value:"Cash",children:"Cash"}),c.jsx("option",{value:"Bank",children:"Bank Transfer"}),c.jsx("option",{value:"Online",children:"Online Payment"})]}),c.jsxs("div",{className:"export-dropdown",children:[c.jsx("button",{className:"export-btn",onClick:()=>se(!ce),children:"Export "}),ce&&c.jsxs("div",{className:"export-dropdown-menu",children:[c.jsx("button",{className:"export-option",onClick:async()=>{await Se(),se(!1)},children:"Export as CSV"}),c.jsx("button",{className:"export-option",onClick:async()=>{await le(),se(!1)},children:"Export as PDF"})]})]})]})]})}),ye.length>0?c.jsx("div",{className:"table-container",children:c.jsxs("table",{className:"expenses-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"Date"}),c.jsx("th",{children:"Expense Name"}),c.jsx("th",{children:"Category"}),c.jsx("th",{children:"Amount"}),c.jsx("th",{children:"Payment Mode"}),c.jsx("th",{children:"Added By"}),c.jsx("th",{children:"Actions"})]})}),c.jsx("tbody",{children:ye.map(Z=>c.jsxs("tr",{children:[c.jsx("td",{children:j(Z.date)}),c.jsx("td",{children:Z.name}),c.jsx("td",{children:c.jsxs("span",{className:`category-badge category-${Z.category}`,children:[F(Z.category)," ",M(Z.category)]})}),c.jsxs("td",{className:"amount",children:["",Z.amount.toLocaleString()]}),c.jsx("td",{children:Z.paymentMode}),c.jsx("td",{children:Z.addedBy}),c.jsxs("td",{children:[c.jsx("button",{className:"action-btn view-btn",children:"View"}),c.jsx("button",{className:"action-btn edit-btn",children:"Edit"})]})]},Z.id))})]})}):c.jsxs("div",{className:"empty-state",children:[c.jsx("div",{className:"empty-icon",children:""}),c.jsx("h3",{children:"No Expenses Found"}),c.jsx("p",{children:"No expenses recorded for the selected month and filters."}),c.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-form"),children:"Add Expense"})]})]}),D&&c.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:c.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Total Monthly Expenditure Breakdown"}),c.jsx("button",{className:"close-btn",onClick:()=>C(!1),children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("p",{children:["Total expenditure for ",Y,": ",we.totalExpenditure.toLocaleString()]}),c.jsx("div",{className:"breakdown-list",children:Q.map((Z,ae)=>c.jsxs("div",{className:"breakdown-item",children:[c.jsxs("span",{className:"breakdown-label",children:[c.jsx("span",{className:"breakdown-icon",children:Z.icon}),Z.name]}),c.jsxs("span",{className:"breakdown-value",children:["",Z.amount.toLocaleString()," (",Z.percentage,"%)"]})]},ae))})]})]})}),k&&c.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:c.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Average Daily Spend Calculation"}),c.jsx("button",{className:"close-btn",onClick:()=>H(!1),children:""})]}),c.jsx("div",{className:"modal-body",children:c.jsxs("div",{className:"calculation-details",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Formula:"})," Total Spend / Number of Days in Month"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Total Spend:"})," ",we.totalExpenditure.toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Number of Days:"})," ",re," days"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Calculation:"})," ",we.totalExpenditure.toLocaleString()," / ",re," days"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Result:"})," ",we.avgDailySpend.toFixed(2)," per day"]})]})})]})})]})})},MO=()=>{const n=ci(),[e,t]=K.useState({name:"Admin User",email:"admin@vpa-fees.com",phone:"",firmName:"",role:"Administrator",lastLogin:"",avatar:"AU",department:"Finance Department",joinDate:"",location:"Mumbai, India",employeeId:"EMP-001245"}),[r,s]=K.useState(null),[o,u]=K.useState([{label:"Students Managed",value:"0",icon:"",color:"var(--info-color)"},{label:"Payments Processed",value:"0",icon:"",color:"var(--success-color)"},{label:"Collections",value:"0",icon:"",color:"var(--warning-color)"},{label:"Reports Generated",value:"0",icon:"",color:"var(--danger-color)"}]),[d,f]=K.useState(!0),[p,m]=K.useState({notifications:!0,emailAlerts:!0,darkMode:!1,twoFactorAuth:!0}),[x,E]=K.useState({accuracy:0,responseTime:"0s",uptime:"0%",satisfaction:0}),[w,A]=K.useState([]);K.useEffect(()=>{const se=An.onAuthStateChanged(U=>{U?(s(U),t(I=>({...I,name:U.displayName||U.email?.split("@")[0]||"Admin User",email:U.email||"admin@vpa-fees.com",phone:U.phoneNumber||"",firmName:U.providerData?.[0]?.displayName?.includes("@")?"":U.providerData?.[0]?.displayName||"",avatar:U.displayName?U.displayName.substring(0,2).toUpperCase():U.email?U.email.substring(0,2).toUpperCase():"AU",lastLogin:new Date(U.metadata.lastSignInTime).toLocaleString()||new Date().toLocaleString(),joinDate:U.metadata.creationTime?new Date(U.metadata.creationTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"March 1, 2020"}))):s(null)});return()=>se()},[]),K.useEffect(()=>{let se=!0;const U=async()=>{try{f(!0);try{const ge=await NP();ge&&se&&t(we=>({...we,phone:ge.phone||we.phone,firmName:ge.firmName||we.firmName}))}catch(ge){console.error("Error fetching user profile:",ge)}const[R,q]=await Promise.all([Lg(),ep()]);if(!se)return;const j=R.length,F=q.length,M=q.filter(ge=>ge.status==="paid").reduce((ge,we)=>ge+(parseFloat(we.amount)||0),0),ne=new Set;q.forEach(ge=>{if(ge.createdAt){let we;if(ge.createdAt&&typeof ge.createdAt.toDate=="function"?we=ge.createdAt.toDate():typeof ge.createdAt=="string"?we=new Date(ge.createdAt):ge.createdAt instanceof Date&&(we=ge.createdAt),we&&!isNaN(we.getTime())){const Q=`${we.getFullYear()}-${we.getMonth()}`;ne.add(Q)}}});const Se=ne.size,le=[{label:"Students Managed",value:j.toLocaleString(),icon:"",color:"var(--info-color)",animate:!0},{label:"Payments Processed",value:F.toLocaleString(),icon:"",color:"var(--success-color)",animate:!0},{label:"Collections",value:`${M.toLocaleString()}`,icon:"",color:"var(--warning-color)",animate:!0},{label:"Reports Generated",value:Se.toLocaleString(),icon:"",color:"var(--danger-color)",animate:!0}];u(le);const ve=D(R,q);A(ve);const ye=k(R,q,ve);E(ye)}catch(R){console.error("Error fetching profile data:",R),se&&(u([{label:"Students Managed",value:"0",icon:"",color:"var(--info-color)"},{label:"Payments Processed",value:"0",icon:"",color:"var(--success-color)"},{label:"Collections",value:"0",icon:"",color:"var(--warning-color)"},{label:"Reports Generated",value:"0",icon:"",color:"var(--danger-color)"}]),E({accuracy:0,responseTime:"0s",uptime:"0%",satisfaction:0}),A([{id:1,action:"Processed payment",target:"STD001 - John Doe",time:"2 hours ago",status:"success"},{id:2,action:"Generated report",target:"Monthly Collection Report",time:"1 day ago",status:"completed"},{id:3,action:"Updated student record",target:"STD045 - Jane Smith",time:"2 days ago",status:"updated"},{id:4,action:"Resolved issue",target:"Payment discrepancy",time:"3 days ago",status:"resolved"}]))}finally{se&&f(!1)}};U();const I=()=>{se&&U()};return window.addEventListener("studentsUpdated",I),window.addEventListener("paymentAdded",I),window.addEventListener("paymentRecorded",I),window.addEventListener("paymentUpdated",I),window.addEventListener("dashboardRefresh",I),window.addEventListener("paymentsRefresh",I),()=>{se=!1,window.removeEventListener("studentsUpdated",I),window.removeEventListener("paymentAdded",I),window.removeEventListener("paymentRecorded",I),window.removeEventListener("paymentUpdated",I),window.removeEventListener("dashboardRefresh",I),window.removeEventListener("paymentsRefresh",I)}},[]);const D=(se,U)=>{const I=[];U.forEach((q,j)=>{const F=se.find(Se=>Se.studentId===q.studentId)||{},M=F.name||"Unknown Student",ne=F.studentId||q.studentId||"N/A";I.push({id:`payment-${q.id||j}`,action:"Processed payment for",target:`${ne} - ${M}`,time:q.createdAt,status:"success",type:"payment"})}),se.forEach((q,j)=>{I.push({id:`student-${q.id||j}`,action:"Added student record",target:`${q.studentId} - ${q.name}`,time:q.createdAt,status:"completed",type:"student"})}),I.sort((q,j)=>{const F=q.time?new Date(q.time):new Date(0),M=j.time?new Date(j.time):new Date(0);return q.time&&typeof q.time.toDate=="function"&&F.setTime(q.time.toDate().getTime()),j.time&&typeof j.time.toDate=="function"&&M.setTime(j.time.toDate().getTime()),M-F});const R=I.slice(0,4);for(R.forEach(q=>{q.time=C(q.time)});R.length<4;){const q=[{id:"fallback-1",action:"System maintenance",target:"Database optimization",time:"1 hour ago",status:"completed"},{id:"fallback-2",action:"Security update",target:"User authentication",time:"3 hours ago",status:"success"},{id:"fallback-3",action:"Feature enhancement",target:"Payment processing",time:"1 day ago",status:"updated"},{id:"fallback-4",action:"Bug fix",target:"Report generation",time:"2 days ago",status:"resolved"}];R.push(q[R.length])}return R},C=se=>{if(!se)return"Unknown time";let U;if(se&&typeof se.toDate=="function"?U=se.toDate():typeof se=="string"?U=new Date(se):se instanceof Date?U=se:typeof se=="number"&&(U=new Date(se)),!U||isNaN(U.getTime()))return"Unknown time";const R=Math.floor((new Date-U)/1e3);if(R<60)return"Just now";if(R<3600){const q=Math.floor(R/60);return`${q} minute${q>1?"s":""} ago`}else if(R<86400){const q=Math.floor(R/3600);return`${q} hour${q>1?"s":""} ago`}else if(R<2592e3){const q=Math.floor(R/86400);return`${q} day${q>1?"s":""} ago`}else return U.toLocaleDateString()},k=(se,U,I)=>{const R=U.length,q=U.filter(Q=>Q.status==="paid").length,j=R>0?Math.round(q/R*1e3)/10:0;let F=0,M=0;U.forEach(Q=>{if(Q.createdAt&&Q.status==="paid"){let P;if(Q.createdAt&&typeof Q.createdAt.toDate=="function"?P=Q.createdAt.toDate():typeof Q.createdAt=="string"?P=new Date(Q.createdAt):Q.createdAt instanceof Date&&(P=Q.createdAt),P&&!isNaN(P.getTime())){const Y=(Date.now()-P.getTime())/1e3;F+=Y,M++}}});const ne=M>0?F/M:0,Se=ne<60?`${Math.round(ne)}s`:`${Math.round(ne/60)}m`,le=new Date;le.setDate(le.getDate()-30);let ve=new Set;I.forEach(Q=>{const P=Q.time;P&&!P.includes("Unknown")&&ve.add("active")});const ye=se.length+U.length>0?100:0,ge=ye>0?`${Math.min(99.9,95+ye/100*5).toFixed(1)}%`:"0%",we=Math.min(5,j/20+(ne<3600?1:0));return{accuracy:j,responseTime:Se,uptime:ge,satisfaction:we.toFixed(1)}},H=se=>{if(se==="darkMode"){const U=!p.darkMode;m(I=>({...I,[se]:U})),U?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("darkMode","true")):(document.documentElement.removeAttribute("data-theme"),localStorage.setItem("darkMode","false"))}else m(U=>({...U,[se]:!U[se]}));window.dispatchEvent(new CustomEvent("showNotification",{detail:{message:`${se.replace(/([A-Z])/g," $1").replace(/^./,U=>U.toUpperCase())} setting ${p[se]?"disabled":"enabled"}`,type:"success"}}))};K.useEffect(()=>{localStorage.getItem("darkMode")==="true"&&(m(R=>({...R,darkMode:!0})),document.documentElement.setAttribute("data-theme","dark"));const U=localStorage.getItem("notificationsEnabled"),I=localStorage.getItem("emailAlertsEnabled");U!==null&&m(R=>({...R,notifications:U==="true"})),I!==null&&m(R=>({...R,emailAlerts:I==="true"}))},[]),K.useEffect(()=>{localStorage.setItem("notificationsEnabled",p.notifications.toString()),localStorage.setItem("emailAlertsEnabled",p.emailAlerts.toString())},[p.notifications,p.emailAlerts]),K.useEffect(()=>{const se=I=>{const{message:R,type:q="info"}=I.detail;if(p.notifications){const j=document.createElement("div");j.className=`app-notification ${q}`,j.textContent=R,Object.assign(j.style,{position:"fixed",top:"20px",right:"20px",backgroundColor:q==="error"?"var(--danger-color)":q==="success"?"var(--success-color)":"var(--info-color)",color:"white",padding:"15px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:"10000",animation:"slideIn 0.3s ease-out",fontWeight:"500",maxWidth:"300px",wordWrap:"break-word"}),document.body.appendChild(j),setTimeout(()=>{j.parentNode&&j.parentNode.removeChild(j)},3e3)}p.emailAlerts&&console.log(`[Email Alert] ${R}`)};window.addEventListener("showNotification",se);const U=document.createElement("style");return U.textContent=`
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    `,document.head.appendChild(U),()=>{window.removeEventListener("showNotification",se),document.head.contains(U)&&document.head.removeChild(U)}},[p.notifications,p.emailAlerts]);const G=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await ug(An),localStorage.removeItem("isLoggedIn"),window.location.reload()}catch(se){console.error("Logout error:",se),alert("Error logging out. Please try again.")}},V=()=>{n("/feedback-support")},ce=()=>{alert("Opening profile edit modal... (This would open a form in a real app)")};return c.jsx(rc,{children:c.jsxs("div",{className:"profile-container",children:[c.jsx("div",{className:"profile-header",children:c.jsxs("div",{className:"header-left",children:[c.jsx("h1",{children:"My Profile"}),c.jsx("p",{className:"header-subtitle",children:"Manage your account settings and preferences"})]})}),c.jsxs("div",{className:"profile-layout",children:[c.jsxs("div",{className:"profile-column",children:[c.jsxs("div",{className:"profile-card",children:[c.jsx("div",{className:"profile-avatar",children:c.jsx("span",{className:"avatar-text",children:e.avatar})}),c.jsxs("div",{className:"profile-info",children:[c.jsx("h2",{children:e.name}),c.jsx("p",{className:"profile-role",children:e.role}),c.jsxs("div",{className:"profile-contact",children:[c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Employee ID"}),c.jsx("span",{className:"contact-value",children:e.employeeId})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Email"}),c.jsx("span",{className:"contact-value",children:e.email})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Phone"}),c.jsx("span",{className:"contact-value",children:e.phone||"Not provided"})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Firm/Organization"}),c.jsx("span",{className:"contact-value",children:e.firmName||"Not provided"})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Department"}),c.jsx("span",{className:"contact-value",children:e.department})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Location"}),c.jsx("span",{className:"contact-value",children:e.location})]}),c.jsxs("div",{className:"contact-item",children:[c.jsx("span",{className:"contact-label",children:"Joined"}),c.jsx("span",{className:"contact-value",children:e.joinDate})]})]})]}),c.jsxs("div",{className:"profile-status",children:[c.jsxs("div",{className:"status-item",children:[c.jsx("span",{className:"status-label",children:"Last Login"}),c.jsx("span",{className:"status-value",children:e.lastLogin})]}),c.jsxs("div",{className:"status-item",children:[c.jsx("span",{className:"status-label",children:"Account Status"}),c.jsx("span",{className:"status-value active",children:"Active"})]})]})]}),c.jsxs("div",{className:"metrics-section",children:[c.jsx("h3",{children:"Performance Metrics"}),c.jsxs("div",{className:"metrics-grid",children:[c.jsxs("div",{className:"metric-card",children:[c.jsxs("div",{className:"metric-value",children:[x.accuracy,"%"]}),c.jsx("div",{className:"metric-label",children:"Accuracy"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsx("div",{className:"metric-value",children:x.responseTime}),c.jsx("div",{className:"metric-label",children:"Avg. Response"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsxs("div",{className:"metric-value",children:[x.uptime,"%"]}),c.jsx("div",{className:"metric-label",children:"Uptime"})]}),c.jsxs("div",{className:"metric-card",children:[c.jsxs("div",{className:"metric-value",children:[x.satisfaction,"/5"]}),c.jsx("div",{className:"metric-label",children:"Satisfaction"})]})]})]})]}),c.jsxs("div",{className:"profile-column",children:[c.jsxs("div",{className:"stats-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"Statistics Overview"}),c.jsx("span",{className:"section-subtitle",children:"Your contribution metrics"})]}),c.jsx("div",{className:"stats-grid",children:o.map((se,U)=>c.jsx(WP,{title:se.label,value:se.value,icon:se.icon,color:se.color,animate:se.animate},U))})]}),c.jsxs("div",{className:"activity-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"Recent Activity"}),c.jsx("span",{className:"section-subtitle",children:"Your latest actions"})]}),c.jsx("div",{className:"activity-list",children:w.length>0?w.map(se=>c.jsxs("div",{className:"activity-item",children:[c.jsxs("div",{className:"activity-icon",children:[se.status==="success"&&"",se.status==="completed"&&"",se.status==="updated"&&"",se.status==="resolved"&&""]}),c.jsxs("div",{className:"activity-content",children:[c.jsxs("div",{className:"activity-action",children:[c.jsx("span",{className:"action-text",children:se.action}),c.jsx("span",{className:"action-target",children:se.target})]}),c.jsx("div",{className:"activity-time",children:se.time})]})]},se.id)):c.jsx("div",{className:"no-activity",children:c.jsx("p",{children:"No recent activity to display"})})})]}),c.jsxs("div",{className:"settings-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h3",{children:"Account Settings"}),c.jsx("span",{className:"section-subtitle",children:"Manage your preferences"})]}),c.jsxs("div",{className:"settings-list",children:[c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Notifications"}),c.jsx("span",{className:"setting-desc",children:"Enable push notifications"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:p.notifications,onChange:()=>H("notifications")}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Email Alerts"}),c.jsx("span",{className:"setting-desc",children:"Receive email notifications"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:p.emailAlerts,onChange:()=>H("emailAlerts")}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Dark Mode"}),c.jsx("span",{className:"setting-desc",children:"Enable dark theme"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:p.darkMode,onChange:()=>H("darkMode")}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("span",{className:"setting-label",children:"Two-Factor Authentication"}),c.jsx("span",{className:"setting-desc",children:"Add extra security to your account"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:p.twoFactorAuth,onChange:()=>H("twoFactorAuth")}),c.jsx("span",{className:"slider"})]})]})]})]})]})]}),c.jsxs("div",{className:"profile-actions",children:[c.jsx("button",{className:"action-btn edit-btn",onClick:ce,children:"Edit Profile"}),c.jsx("button",{className:"action-btn contact-btn",onClick:V,children:"Contact Support"}),c.jsx("button",{className:"action-btn logout-btn",onClick:G,children:"Logout"})]}),c.jsxs("div",{className:"app-info",children:[c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"App Version"}),c.jsx("span",{className:"info-value",children:"v1.0.0"})]}),c.jsxs("div",{className:"info-item",children:[c.jsx("span",{className:"info-label",children:"Developed by"}),c.jsx("span",{className:"info-value",children:"VPA Technologies"})]})]})]})})},OO=()=>{ci();const[n,e]=K.useState({notifications:!0,darkMode:!1,emailReports:!0,autoSync:!0}),[t,r]=K.useState(""),[s,o]=K.useState(""),[u,d]=K.useState(""),[f,p]=K.useState(""),[m,x]=K.useState(""),[E,w]=K.useState(null),[A,D]=K.useState(""),[C,k]=K.useState(null),[H,G]=K.useState(""),[V,ce]=K.useState(null),[se,U]=K.useState("#3B82F6"),[I,R]=K.useState("#10B981"),[q,j]=K.useState("#FFFFFF"),[F,M]=K.useState("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),[ne,Se]=K.useState({show:!1,message:"",type:""}),[le,ve]=K.useState(!0),[ye,ge]=K.useState(!1),[we,Q]=K.useState(!1),[P,Y]=K.useState(!1),[re,fe]=K.useState(!1),[me,_e]=K.useState(""),[Me,Le]=K.useState("");K.useEffect(()=>{const De=localStorage.getItem("appSettings");De&&e(JSON.parse(De)),Z();const We=localStorage.getItem("brandingPin");We&&Le(We)},[]),K.useEffect(()=>{Me&&localStorage.setItem("brandingPin",Me)},[Me]),K.useEffect(()=>{document.documentElement.style.setProperty("--primary-color",se),document.documentElement.style.setProperty("--accent-color",I),document.documentElement.style.setProperty("--bg-color",q),document.documentElement.style.setProperty("--sidebar-gradient",F)},[se,I,q,F]);const Z=async()=>{if(!vn()){Y(!0);return}try{ge(!0);const De=mn(),We=dr(Wn,`users/${De}/settings/profile`),pt=qv(We,mt=>{if(mt.exists()){const ft=mt.data();ft.firmName!==void 0&&(r(ft.firmName||""),o(ft.firmName||"")),ft.firmAddress!==void 0&&(d(ft.firmAddress||""),p(ft.firmAddress||"")),ft.logoUrl!==void 0&&x(ft.logoUrl||""),ft.signatureUrl!==void 0&&D(ft.signatureUrl||""),ft.stampUrl!==void 0&&G(ft.stampUrl||""),ft.primaryColor&&U(ft.primaryColor),ft.accentColor&&R(ft.accentColor),ft.backgroundColor&&j(ft.backgroundColor),ft.sidebarGradient&&M(ft.sidebarGradient)}Y(!0),ge(!1)},mt=>{console.error("Error loading branding data:",mt),Y(!0),ge(!1)});return()=>pt()}catch(De){console.error("Error setting up branding data listener:",De),Y(!0),ge(!1)}},ae=(De,We="success")=>{Se({show:!0,message:De,type:We}),setTimeout(()=>{Se({show:!1,message:"",type:""})},3e3)},Te=async()=>{if(!vn()){alert("Please log in to save settings"),ae("Please log in to save settings","error");return}try{const De=mn(),We=dr(Wn,`users/${De}/settings/profile`);await Mf(We,{firmName:s,firmAddress:f,primaryColor:se,accentColor:I,backgroundColor:q,sidebarGradient:F},{merge:!0}),r(s),d(f),ae("All settings saved successfully!","success"),document.documentElement.style.setProperty("--primary-color",se),document.documentElement.style.setProperty("--accent-color",I),document.documentElement.style.setProperty("--bg-color",q),document.documentElement.style.setProperty("--sidebar-gradient",F)}catch(De){console.error("Error saving settings:",De),alert("Error saving settings. Please try again."),ae("Error saving settings","error")}},Ee=De=>{const We={...n,[De]:!n[De]};e(We),localStorage.setItem("appSettings",JSON.stringify(We));const pt=document.querySelector(`input[name="${De}"]`).closest(".setting-item");pt&&(pt.style.transition="all 0.3s ease",pt.style.transform="scale(0.98)",pt.style.opacity="0.8",setTimeout(()=>{pt.style.transform="scale(1)",pt.style.opacity="1"},150));const mt=document.querySelector(`input[name="${De}"]`).nextSibling;mt&&(mt.classList.add("ripple"),setTimeout(()=>{mt.classList.remove("ripple")},300)),De==="darkMode"&&(We.darkMode?(document.documentElement.setAttribute("data-theme","dark"),ae("Dark mode enabled","info")):(document.documentElement.removeAttribute("data-theme"),ae("Light mode enabled","info")))},pe=De=>{o(De.target.value);const We=De.target;We.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.4)",setTimeout(()=>{We.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.2)"},300)},z=De=>{p(De.target.value);const We=De.target;We.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.4)",setTimeout(()=>{We.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.2)"},300)},Ie=De=>{if(De.target.files&&De.target.files[0]){const We=De.target.files[0];if(We.type.startsWith("image/")){w(We);const pt=document.querySelector('label[for="logo-upload"]');pt&&(pt.classList.add("file-selected"),setTimeout(()=>{pt.classList.remove("file-selected")},1e3)),ae("Logo selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),ae("Invalid file type. Please select PNG or JPG","error")}},Be=De=>{if(De.target.files&&De.target.files[0]){const We=De.target.files[0];if(We.type.startsWith("image/")){k(We);const pt=document.querySelector('label[for="signature-upload"]');pt&&(pt.classList.add("file-selected"),setTimeout(()=>{pt.classList.remove("file-selected")},1e3)),ae("Signature selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),ae("Invalid file type. Please select PNG or JPG","error")}},$e=De=>{if(De.target.files&&De.target.files[0]){const We=De.target.files[0];if(We.type.startsWith("image/")){ce(We);const pt=document.querySelector('label[for="stamp-upload"]');pt&&(pt.classList.add("file-selected"),setTimeout(()=>{pt.classList.remove("file-selected")},1e3)),ae("Stamp selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),ae("Invalid file type. Please select PNG or JPG","error")}},Ce=async()=>{if(!E||!vn())return null;try{const De=mn(),We=Qd(Uu,`users/${De}/branding/logo.png`),pt=await Sf(We,E);return await _f(pt.ref)}catch(De){return console.error("Error uploading logo:",De),alert("Error uploading logo. Please try again."),ae("Error uploading logo","error"),null}},Ze=async()=>{if(!C||!vn())return null;try{const De=mn(),We=Qd(Uu,`users/${De}/branding/signature.png`),pt=await Sf(We,C);return await _f(pt.ref)}catch(De){return console.error("Error uploading signature:",De),alert("Error uploading signature. Please try again."),ae("Error uploading signature","error"),null}},et=async()=>{if(!V||!vn())return null;try{const De=mn(),We=Qd(Uu,`users/${De}/branding/stamp.png`),pt=await Sf(We,V);return await _f(pt.ref)}catch(De){return console.error("Error uploading stamp:",De),alert("Error uploading stamp. Please try again."),ae("Error uploading stamp","error"),null}},xt=async()=>{if(!vn()){alert("Please log in to save settings"),ae("Please log in to save settings","error");return}if(!Me){fe(!0);return}if(prompt("Enter PIN to save branding:")!==Me){alert("Incorrect PIN. Save operation cancelled."),ae("Incorrect PIN. Save operation cancelled.","error");return}await vt()},vt=async()=>{try{ge(!0),Q(!0);const De=mn(),We=dr(Wn,`users/${De}/settings/profile`);let pt=m;if(E){if(pt=await Ce(),!pt)throw new Error("Failed to upload logo");ae("Logo uploaded successfully","success")}let mt=A;if(C){if(mt=await Ze(),!mt)throw new Error("Failed to upload signature");ae("Signature uploaded successfully","success")}let ft=H;if(V){if(ft=await et(),!ft)throw new Error("Failed to upload stamp");ae("Stamp uploaded successfully","success")}await Mf(We,{firmName:s||"",firmAddress:f||"",logoUrl:pt||"",signatureUrl:mt||"",stampUrl:ft||"",lastUpdated:new Date},{merge:!0}),ae("Branding saved successfully!","success"),Ue(),r(s),d(f),x(pt||""),D(mt||""),G(ft||""),w(null),k(null),ce(null)}catch(De){console.error("Error saving branding:",De),ae("Error saving branding: "+De.message,"error")}finally{ge(!1),Q(!1)}},Ue=()=>{const De=document.querySelector(".branding-save");if(!De)return;const We=De.getBoundingClientRect(),pt=We.left+We.width/2,mt=We.top+We.height/2;for(let ft=0;ft<50;ft++){const ct=document.createElement("div");ct.className="confetti",ct.style.left=`${pt}px`,ct.style.top=`${mt}px`,ct.style.backgroundColor=ot(),ct.style.transform=`rotate(${Math.random()*360}deg)`,ct.style.width=`${Math.random()*10+5}px`,ct.style.height=ct.style.width,document.body.appendChild(ct);const bt=Math.random()*Math.PI*2,wt=3+Math.random()*4;let qt=Math.cos(bt)*wt,Tt=Math.sin(bt)*wt,dn=pt,Bt=mt,Ot=1,jn=0;const Dt=()=>{dn+=qt,Bt+=Tt,Tt+=.2,Ot-=.015,jn+=5,ct.style.left=`${dn}px`,ct.style.top=`${Bt}px`,ct.style.opacity=Ot,ct.style.transform=`rotate(${jn}deg)`,Ot>0?requestAnimationFrame(Dt):ct.remove()};requestAnimationFrame(Dt)}},ot=()=>{const De=["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#6f42c1"];return De[Math.floor(Math.random()*De.length)]},dt=(De,We)=>{switch(De){case"primary":U(We),ae("Primary color updated","info");break;case"accent":R(We),ae("Accent color updated","info");break;case"background":j(We),ae("Background color updated","info");break;case"sidebar":M(We),ae("Sidebar gradient updated","info");break}},gt=()=>{U("#3B82F6"),R("#10B981"),j("#FFFFFF"),M("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),ae("Theme reset to defaults","success")};return K.useEffect(()=>{document.documentElement.style.setProperty("--primary-color",se),document.documentElement.style.setProperty("--accent-color",I),document.documentElement.style.setProperty("--bg-color",q);const De=document.querySelector(".sidebar");De&&(De.style.background=F)},[se,I,q,F]),P?c.jsxs("div",{className:"settings-container",children:[ne.show&&c.jsx("div",{className:`toast-notification ${ne.type}`,children:ne.message}),c.jsxs("div",{className:"settings-header",children:[c.jsx("h1",{children:"Settings"}),c.jsx("p",{children:"Manage your application preferences"})]}),c.jsxs("div",{className:`settings-section ${le?"":"collapsed"}`,children:[c.jsxs("div",{className:"section-header",children:[c.jsx("h2",{children:" Academy Profile & Branding"}),c.jsx("button",{className:"toggle-button",onClick:()=>ve(!le),children:le?"Hide":"Show"})]}),c.jsx("div",{className:`section-content ${le?"open":""}`,children:c.jsxs("div",{className:"branding-content",children:[c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Academy Logo"}),c.jsx("p",{children:"Upload your academy logo (PNG or JPG)"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"PNG recommended. Transparent background preferred."})]}),c.jsxs("div",{className:"logo-upload-controls",children:[c.jsx("div",{className:"logo-preview",children:m?c.jsx("img",{src:m,alt:"Academy Logo",className:"logo-image"}):c.jsx("div",{className:"logo-placeholder",children:"Click to Upload"})}),c.jsxs("div",{className:"logo-upload-area",children:[c.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:Ie,className:"logo-input",id:"logo-upload",disabled:we}),c.jsxs("label",{htmlFor:"logo-upload",className:"upload-button",children:[" ",we?"Uploading...":"Choose File"]}),E&&c.jsx("span",{className:"file-name",children:E.name})]})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Authorized Signature"}),c.jsx("p",{children:"Upload your authorized signature (PNG/JPG with transparent background preferred)"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Used in receipts and payment slips"})]}),c.jsxs("div",{className:"signature-upload-controls",children:[c.jsx("div",{className:"signature-preview",children:A?c.jsx("img",{src:A,alt:"Authorized Signature",className:"signature-image"}):c.jsx("div",{className:"signature-placeholder",children:"Click to Upload"})}),c.jsxs("div",{className:"signature-upload-area",children:[c.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:Be,className:"signature-input",id:"signature-upload",disabled:we}),c.jsxs("label",{htmlFor:"signature-upload",className:"upload-button",children:[" ",we?"Uploading...":"Choose File"]}),C&&c.jsx("span",{className:"file-name",children:C.name})]})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Official Stamp / Seal"}),c.jsx("p",{children:"Upload your official stamp or seal (PNG/JPG, circular preferred)"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Used on receipts & paid invoices"})]}),c.jsxs("div",{className:"stamp-upload-controls",children:[c.jsx("div",{className:"stamp-preview",children:H?c.jsx("img",{src:H,alt:"Official Stamp",className:"stamp-image"}):c.jsx("div",{className:"stamp-placeholder",children:"Click to Upload"})}),c.jsxs("div",{className:"stamp-upload-area",children:[c.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:$e,className:"stamp-input",id:"stamp-upload",disabled:we}),c.jsxs("label",{htmlFor:"stamp-upload",className:"upload-button",children:[" ",we?"Uploading...":"Choose File"]}),V&&c.jsx("span",{className:"file-name",children:V.name})]})]})]}),c.jsxs("div",{className:"setting-item form-group-row",children:[c.jsxs("div",{className:"form-group-col",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Academy Name"}),c.jsx("p",{children:"Enter your academy or institution name"})]}),c.jsx("div",{className:"firm-name-controls",children:c.jsx("input",{type:"text",value:s,onChange:pe,placeholder:"Enter Academy Name",className:"firm-name-input",disabled:ye})})]}),c.jsxs("div",{className:"form-group-col",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Academy Address"}),c.jsx("p",{children:"Enter your academy's full address"})]}),c.jsx("div",{className:"firm-address-controls",children:c.jsx("textarea",{value:f,onChange:z,placeholder:"Enter Academy Address",className:"firm-address-input",disabled:ye,rows:"3"})})]})]}),c.jsxs("div",{className:"setting-item preview-section",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Live Preview"}),c.jsx("p",{children:"See how your branding will appear in receipts"})]}),c.jsx("div",{className:"live-preview-wrapper",children:c.jsxs("div",{className:"preview-card receipt-preview-mini",children:[c.jsxs("div",{className:"receipt-header-preview",children:[c.jsxs("div",{className:"receipt-header-content",children:[m?c.jsx("img",{src:m,alt:"Preview Logo",className:"receipt-preview-logo"}):c.jsx("div",{className:"receipt-placeholder-logo",children:""}),c.jsxs("div",{className:"receipt-academy-info",children:[c.jsx("h4",{className:"receipt-academy-name",children:s||"Academy Name"}),c.jsx("p",{className:"receipt-academy-address",children:f||"Academy Address"})]})]}),c.jsx("div",{className:"receipt-title-preview",children:"Fee Receipt"})]}),c.jsxs("div",{className:"receipt-body-preview",children:[c.jsxs("div",{className:"receipt-details-preview",children:[c.jsxs("div",{className:"receipt-detail-row",children:[c.jsx("span",{className:"receipt-label",children:"Receipt No:"}),c.jsx("span",{className:"receipt-value",children:"RCT-001"})]}),c.jsxs("div",{className:"receipt-detail-row",children:[c.jsx("span",{className:"receipt-label",children:"Date:"}),c.jsx("span",{className:"receipt-value",children:new Date().toLocaleDateString()})]}),c.jsxs("div",{className:"receipt-detail-row",children:[c.jsx("span",{className:"receipt-label",children:"Student:"}),c.jsx("span",{className:"receipt-value",children:"John Doe"})]})]}),c.jsxs("div",{className:"receipt-amount-preview",children:[c.jsxs("div",{className:"amount-row-preview",children:[c.jsx("span",{children:"Amount Paid:"}),c.jsx("span",{children:"5,000.00"})]}),c.jsxs("div",{className:"amount-row-preview total-preview",children:[c.jsx("span",{children:"Total:"}),c.jsx("span",{children:"5,000.00"})]})]})]}),c.jsx("div",{className:"receipt-signatures-preview",children:c.jsxs("div",{className:"signature-section-preview",children:[A?c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Authorized Signature:"}),c.jsx("img",{src:A,alt:"Signature",className:"signature-preview-img"})]}):c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Authorized Signature:"}),c.jsx("div",{className:"signature-placeholder",children:"[Signature]"})]}),H?c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Official Stamp:"}),c.jsx("img",{src:H,alt:"Stamp",className:"stamp-preview-img"})]}):c.jsxs("div",{className:"signature-item",children:[c.jsx("div",{className:"signature-label",children:"Official Stamp:"}),c.jsx("div",{className:"stamp-placeholder",children:"[Stamp]"})]})]})}),c.jsx("div",{className:"receipt-footer-preview",children:"Thank you for your payment!"})]})})]}),c.jsx("div",{className:"branding-save-controls",children:c.jsxs("button",{className:"save-button branding-save",onClick:xt,disabled:ye||we,children:[" ",ye||we?"Saving...":"Save Branding"]})})]})})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h2",{children:" Theme Customization"}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Primary Color"}),c.jsx("p",{children:"Choose your primary brand color"})]}),c.jsx("div",{className:"color-picker",children:c.jsx("input",{type:"color",value:se,onChange:De=>dt("primary",De.target.value)})})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Accent Color"}),c.jsx("p",{children:"Choose your accent color"})]}),c.jsx("div",{className:"color-picker",children:c.jsx("input",{type:"color",value:I,onChange:De=>dt("accent",De.target.value)})})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Background Color"}),c.jsx("p",{children:"Choose your background color"})]}),c.jsx("div",{className:"color-picker",children:c.jsx("input",{type:"color",value:q,onChange:De=>dt("background",De.target.value)})})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Sidebar Gradient"}),c.jsx("p",{children:"Choose your sidebar gradient"})]}),c.jsx("div",{className:"gradient-picker",children:c.jsxs("select",{value:F,onChange:De=>dt("sidebar",De.target.value),children:[c.jsx("option",{value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",children:"Purple Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",children:"Pink Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",children:"Green Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",children:"Yellow Gradient"}),c.jsx("option",{value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",children:"Blue Gradient"})]})})]}),c.jsxs("div",{className:"setting-item preview-section",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Live Theme Preview"}),c.jsx("p",{children:"See how your theme will look"})]}),c.jsxs("div",{className:"theme-preview-box",style:{background:q},children:[c.jsx("div",{className:"theme-sidebar-preview",style:{background:F}}),c.jsxs("div",{className:"theme-content-preview",children:[c.jsx("div",{className:"theme-header-preview",style:{color:se},children:"Header Text"}),c.jsx("div",{className:"theme-body-preview",children:c.jsxs("div",{className:"theme-card-preview",style:{borderColor:I},children:[c.jsx("div",{className:"theme-card-header",style:{backgroundColor:se},children:"Card Header"}),c.jsx("div",{className:"theme-card-body",children:"Card Content"})]})})]})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Reset Theme Defaults"}),c.jsx("p",{children:"Reset all theme settings to default values"}),c.jsxs("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:["Primary Color: Controls navbar & header gradients",c.jsx("br",{}),"Accent Color: Controls button colors",c.jsx("br",{}),"Background Color: Controls dashboard background"]})]}),c.jsx("button",{className:"reset-button",onClick:gt,children:"Reset to Defaults"})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h2",{children:" Dark Mode & Sync"}),c.jsxs("div",{className:"setting-item dark-mode-toggle-large",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Dark Mode"}),c.jsx("p",{children:"Enable dark theme for the application"}),c.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Automatically adapts dashboard, sidebar & charts"})]}),c.jsx("div",{className:"large-toggle-container",children:c.jsxs("label",{className:"switch-large",children:[c.jsx("input",{type:"checkbox",checked:n.darkMode,onChange:()=>Ee("darkMode"),name:"darkMode"}),c.jsx("span",{className:"slider-large"})]})})]}),c.jsxs("div",{className:"setting-item preview-section",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Dark Mode Preview"}),c.jsx("p",{children:"See how the dark theme will look"})]}),c.jsxs("div",{className:"dark-mode-preview-box",children:[c.jsx("div",{className:"preview-header-dark",children:c.jsxs("div",{className:"preview-title-dark",children:[c.jsx("h4",{children:"Dark Mode Preview"}),c.jsx("p",{children:"This is how your app will look in dark mode"})]})}),c.jsx("div",{className:"preview-content-dark",children:c.jsxs("div",{className:"preview-card-dark",children:[c.jsx("div",{className:"preview-card-header-dark",children:"Sample Card"}),c.jsx("div",{className:"preview-card-body-dark",children:"Card content with dark theme styling"})]})})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Auto Sync"}),c.jsx("p",{children:"Automatically sync data with cloud"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:n.autoSync,onChange:()=>Ee("autoSync"),name:"autoSync"}),c.jsx("span",{className:"slider"})]})]})]}),c.jsxs("div",{className:"settings-section",children:[c.jsx("h2",{children:" Notifications"}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Email Reports"}),c.jsx("p",{children:"Receive monthly reports via email"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:n.emailReports,onChange:()=>Ee("emailReports"),name:"emailReports"}),c.jsx("span",{className:"slider"})]})]}),c.jsxs("div",{className:"setting-item",children:[c.jsxs("div",{className:"setting-info",children:[c.jsx("h3",{children:" Push Notifications"}),c.jsx("p",{children:"Receive notifications for important updates"})]}),c.jsxs("label",{className:"switch",children:[c.jsx("input",{type:"checkbox",checked:n.notifications,onChange:()=>Ee("notifications"),name:"notifications"}),c.jsx("span",{className:"slider"})]})]})]}),re&&c.jsx("div",{className:"pin-dialog-overlay",children:c.jsxs("div",{className:"pin-dialog",children:[c.jsx("h3",{children:"Set PIN for Branding Protection"}),c.jsx("p",{children:"Enter a 4-digit PIN to protect your branding settings:"}),c.jsx("input",{type:"password",maxLength:"4",value:me,onChange:De=>_e(De.target.value.replace(/\D/g,"")),placeholder:"Enter 4-digit PIN",className:"pin-input"}),c.jsxs("div",{className:"pin-dialog-buttons",children:[c.jsx("button",{className:"cancel-button",onClick:()=>{fe(!1),_e("")},children:"Cancel"}),c.jsx("button",{className:"save-button",onClick:async()=>{me.length===4?(Le(me),fe(!1),await vt()):alert("PIN must be 4 digits")},children:"Set PIN & Save"})]})]})}),c.jsx("div",{className:"settings-footer",children:c.jsx("button",{className:"save-button",onClick:Te,children:" Save All Settings"})})]}):c.jsx("div",{className:"settings-container",children:c.jsx("div",{className:"loading-indicator",children:"Loading settings..."})})},qS=({children:n})=>c.jsx("div",{className:"shared-page-wrapper",children:n}),FO=()=>{ci();const[n,e]=K.useState([]),[t,r]=K.useState([]),[s,o]=K.useState([]),[u,d]=K.useState(new Date().toISOString().split("T")[0]),[f,p]=K.useState(new Date().toISOString().slice(0,7)),[m,x]=K.useState({staffName:""}),[E,w]=K.useState([]),[A,D]=K.useState("attendance"),[C,k]=K.useState(!1),[H,G]=K.useState(null),[V,ce]=K.useState([]),[se,U]=K.useState(!1),[I,R]=K.useState(null),[q,j]=K.useState(""),[F,M]=K.useState(!1),[ne,Se]=K.useState({name:"",role:"",perDaySalary:"",contact:"",email:""});K.useEffect(()=>{le()},[u,f]),K.useEffect(()=>{const pe=()=>{le()};return window.addEventListener("attendanceUpdated",pe),window.addEventListener("staffUpdated",pe),window.addEventListener("staffDeleted",pe),window.addEventListener("attendanceDeleted",pe),()=>{window.removeEventListener("attendanceUpdated",pe),window.removeEventListener("staffUpdated",pe),window.removeEventListener("staffDeleted",pe),window.removeEventListener("attendanceDeleted",pe)}},[]);const le=async()=>{try{const pe=await Fn.getStaff();e(pe);const z=await Fn.getStaffAttendance(),Ie=z.filter(Be=>Be.date===u);r(Ie),o(z),ve(pe,z)}catch(pe){console.error("Error loading data:",pe)}},ve=(pe,z)=>{const Ie=pe.map(Be=>{const Ce=z.filter(et=>et.staffId===Be.staffId&&et.date.startsWith(f)).filter(et=>et.status==="present").length,Ze=Be.perDaySalary*Ce;return{staffId:Be.staffId,staffName:Be.name,role:Be.role,perDaySalary:Be.perDaySalary,presentDays:Ce,salary:Ze}});w(Ie)},ye=pe=>{const z=t.find(Ie=>Ie.staffId===pe);return z?z.status:null},ge=async pe=>{const z=t.find(Ie=>Ie.staffId===pe);if(z){const Ie=z.status==="present"?"absent":"present",Be={staffId:pe,date:u,status:Ie,class:z.class||"General",createdAt:z.createdAt||new Date().toISOString(),markedAt:new Date().toISOString()};try{z.id&&!z.id.startsWith("temp_")?await Fn.updateStaffAttendance({...Be,id:z.id}):await Fn.addStaffAttendance(Be),r($e=>$e.map(Ce=>Ce.staffId===pe?{...Ce,status:Ie,markedAt:new Date().toISOString()}:Ce)),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:`Attendance updated to ${Ie}!`}})),setTimeout(()=>{le()},100)}catch($e){console.error("Error updating attendance:",$e),alert(`Error updating attendance: ${$e.message}`)}}else R(pe),j(""),U(!0)},we=async pe=>{if(pe&&(pe.preventDefault(),pe.stopPropagation()),!(!I||F)){M(!0);try{const z=t.find(Be=>Be.staffId===I);let Ie;if(z?z.status==="present"?Ie="absent":z.status==="absent"?Ie=null:Ie="present":Ie="present",Ie===null)z&&z.id&&await Fn.deleteStaffAttendance(z.id),r(Be=>Be.filter($e=>$e.staffId!==I));else{const Be={staffId:I,date:u,status:Ie,class:q||"General",createdAt:new Date().toISOString(),markedAt:new Date().toISOString()};z&&z.id&&!z.id.startsWith("temp_")?z.id?await Fn.updateStaffAttendance({...Be,id:z.id}):await Fn.addStaffAttendance(Be):await Fn.addStaffAttendance(Be),r(z?$e=>$e.map(Ce=>Ce.staffId===I?{...Ce,status:Ie,class:q||Ce.class,markedAt:new Date().toISOString()}:Ce):$e=>[...$e,{staffId:I,date:u,status:Ie,class:q||"General",createdAt:new Date().toISOString(),markedAt:new Date().toISOString(),id:`temp_${Date.now()}`}])}window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Attendance updated successfully!"}})),U(!1),R(null),j(""),setTimeout(()=>{le()},100)}catch(z){console.error("Error updating attendance:",z),alert(`Error updating attendance: ${z.message}`)}finally{M(!1)}}},Q=async pe=>{if(window.confirm("Are you sure you want to delete this staff member and all their attendance records? This action cannot be undone."))try{const z=s.filter($e=>$e.staffId===pe),Ie=n.find($e=>$e.staffId===pe),Be=Ie?Ie.id:null;if(!Be)throw new Error("Could not find staff member in database");for(const $e of z)$e.id&&!$e.id.startsWith("temp_")&&await Fn.deleteStaffAttendance($e.id);await Fn.deleteStaff(Be),e($e=>$e.filter(Ce=>Ce.staffId!==pe)),o($e=>$e.filter(Ce=>Ce.staffId!==pe)),r($e=>$e.filter(Ce=>Ce.staffId!==pe)),w($e=>$e.filter(Ce=>Ce.staffId!==pe)),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff member and associated attendance records deleted successfully!"}})),setTimeout(()=>{le()},100)}catch(z){console.error("Error deleting staff:",z),alert(`Error deleting staff: ${z.message}. Some data may not have been deleted. Refreshing data to ensure consistency.`),setTimeout(()=>{le()},2e3)}},P=pe=>{const z=pe.target.value;if(z)d(z);else{const Ie=new Date().toISOString().split("T")[0];d(Ie)}},Y=pe=>{const z=pe.target.value;if(z)p(z);else{const Ie=new Date().toISOString().slice(0,7);p(Ie)}},re=n.filter(pe=>m.staffName===""||pe.name.toLowerCase().includes(m.staffName.toLowerCase())),fe=E.filter(pe=>m.staffName===""||pe.staffName.toLowerCase().includes(m.staffName.toLowerCase())),me=async pe=>{try{const z=n.find(Be=>Be.staffId===pe);if(!z){console.error("Staff member not found");return}const Ie=s.filter(Be=>Be.staffId===pe).sort((Be,$e)=>new Date($e.date)-new Date(Be.date));G({...z,attendanceHistory:Ie})}catch(z){console.error("Error fetching attendance history:",z),alert("Error fetching attendance history: "+z.message)}},_e=()=>{G(null)},Me=E.reduce((pe,z)=>pe+z.salary,0),Z=(()=>{const pe=t.filter($e=>$e.status==="present").length,z=t.filter($e=>$e.status==="absent").length,Ie=pe+z,Be=Ie>0?Math.round(pe/Ie*100):0;return{presentCount:pe,absentCount:z,totalCount:Ie,percentage:Be}})(),ae=pe=>{const{name:z,value:Ie}=pe.target;Se(Be=>({...Be,[z]:Ie}))},Te=async pe=>{if(pe.preventDefault(),!F){if(M(!0),!ne.name||!ne.role||!ne.perDaySalary){alert("Please fill in all required fields (Name, Role, and Per Day Salary)"),M(!1);return}try{const Ie={staffId:`STF${String(Date.now()).slice(-4)}`,name:ne.name,role:ne.role,perDaySalary:parseFloat(ne.perDaySalary),contact:ne.contact||"",email:ne.email||"",createdAt:new Date().toISOString()};await Fn.addStaff(Ie),Se({name:"",role:"",perDaySalary:"",contact:"",email:""}),k(!1),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff member added successfully!"}}))}catch(z){console.error("Error adding staff:",z),alert(`Error adding staff: ${z.message}`)}finally{M(!1)}}},Ee=pe=>{pe&&pe.target===pe.currentTarget&&(U(!1),R(null),j("")),pe||(U(!1),R(null),j(""))};return c.jsx(rc,{children:c.jsxs("div",{className:"attendance-container",children:[c.jsxs("div",{className:"header",children:[c.jsx("div",{className:"header-content",children:c.jsx("h1",{children:"Staff Attendance & Salary"})}),c.jsx("div",{className:"header-tabs",children:c.jsxs("div",{className:"tab-navigation",children:[c.jsx("button",{className:`tab-button ${A==="attendance"?"active":""}`,onClick:()=>D("attendance"),children:"Daily Attendance"}),c.jsx("button",{className:`tab-button ${A==="salary"?"active":""}`,onClick:()=>D("salary"),children:"Salary Summary"})]})})]}),A==="attendance"&&c.jsx("div",{className:"add-staff-section",children:c.jsx("button",{className:"add-staff-button",onClick:()=>k(!C),children:C?"Cancel":"Add New Staff Member"})}),A==="attendance"&&C&&c.jsxs("div",{className:"add-staff-form",children:[c.jsx("h2",{children:"Add New Staff Member"}),c.jsxs("form",{onSubmit:Te,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"name",children:"Name *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:ne.name,onChange:ae,placeholder:"Enter staff name",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"role",children:"Role *"}),c.jsx("input",{type:"text",id:"role",name:"role",value:ne.role,onChange:ae,placeholder:"Enter staff role",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"perDaySalary",children:"Per Day Salary *"}),c.jsx("input",{type:"number",id:"perDaySalary",name:"perDaySalary",value:ne.perDaySalary,onChange:ae,placeholder:"Enter per day salary",min:"0",step:"0.01",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"contact",children:"Contact"}),c.jsx("input",{type:"text",id:"contact",name:"contact",value:ne.contact,onChange:ae,placeholder:"Enter contact number"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",name:"email",value:ne.email,onChange:ae,placeholder:"Enter email address"})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"submit",className:"submit-button",disabled:F,children:F?"Adding Staff...":"Add Staff Member"}),c.jsx("button",{type:"button",className:"cancel-button",onClick:()=>k(!1),disabled:F,children:"Cancel"})]})]})]}),A==="attendance"&&c.jsxs(qS,{children:[c.jsx("div",{className:"date-selection",children:c.jsxs("div",{className:"date-picker-container",children:[c.jsx("label",{htmlFor:"attendance-date",children:"Select Date: "}),c.jsx("input",{type:"date",id:"attendance-date",value:u,onChange:P,max:new Date().toISOString().split("T")[0],required:!0})]})}),c.jsxs("div",{className:"attendance-section",children:[c.jsxs("h2",{children:["Attendance for ",new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),c.jsxs("div",{className:"attendance-stats",children:[c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.1s"},children:[c.jsx("div",{className:"stat-value",children:Z.presentCount}),c.jsx("div",{className:"stat-label",children:"Present"}),Z.presentCount===0&&c.jsx("div",{className:"stat-helper",children:"No staff marked present yet"})]}),c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.2s"},children:[c.jsx("div",{className:"stat-value",children:Z.absentCount}),c.jsx("div",{className:"stat-label",children:"Absent"}),Z.absentCount===0&&c.jsx("div",{className:"stat-helper",children:"No staff marked absent yet"})]}),c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.3s"},children:[c.jsxs("div",{className:"stat-value",children:[Z.percentage,"%"]}),c.jsx("div",{className:"stat-label",children:"Attendance Rate"}),Z.totalCount===0&&c.jsx("div",{className:"stat-helper",children:"Awaiting attendance marks"})]}),c.jsxs("div",{className:"stat-card",style:{animationDelay:"0.4s"},children:[c.jsxs("div",{className:"stat-value",children:[Z.totalCount,"/",n.length]}),c.jsx("div",{className:"stat-label",children:"Marked"}),Z.totalCount===0&&n.length>0&&c.jsx("div",{className:"stat-helper",children:"No staff marked yet"}),n.length===0&&c.jsx("div",{className:"stat-helper",children:"No staff added yet"})]})]}),n.length===0?c.jsxs("div",{className:"no-staff",children:[c.jsx("div",{className:"empty-state-icon",children:""}),c.jsx("p",{children:"No staff members added yet. Start by adding your first staff member to begin attendance tracking."}),c.jsx("button",{className:"add-staff-button",onClick:()=>k(!0),children:"Add New Staff Member"})]}):c.jsx("div",{className:"attendance-list",children:re.map((pe,z)=>{const Ie=ye(pe.staffId);return c.jsxs("div",{className:"staff-item",style:{animationDelay:`${z*.1}s`},children:[c.jsxs("div",{className:"staff-info",children:[c.jsx("h3",{children:pe.name}),c.jsxs("p",{children:["ID: ",pe.staffId||pe.id]}),c.jsxs("p",{children:["Role: ",pe.role]})]}),c.jsxs("div",{className:"staff-actions",children:[c.jsx("button",{className:`attendance-toggle ${Ie||"not-marked"}`,onClick:()=>ge(pe.staffId),children:Ie==="present"?" Present":Ie==="absent"?" Absent":"Mark Attendance"}),c.jsx("button",{className:"delete-button",onClick:()=>Q(pe.staffId),children:""})]})]},pe.staffId)})})]})]}),A==="salary"&&c.jsxs(qS,{children:[c.jsxs("div",{className:"filters",children:[c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{htmlFor:"staffNameFilter",children:"Staff Name:"}),c.jsx("input",{type:"text",id:"staffNameFilter",placeholder:"Filter by staff name...",value:m.staffName,onChange:pe=>x({...m,staffName:pe.target.value})})]}),c.jsxs("div",{className:"filter-group",children:[c.jsx("label",{htmlFor:"salary-month",children:"Select Month:"}),c.jsx("input",{type:"month",id:"salary-month",value:f,onChange:Y,required:!0})]})]}),c.jsxs("div",{className:"salary-section",children:[c.jsxs("h2",{children:["Salary Summary for ",new Date(f+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})]}),c.jsx("div",{className:"summary-card",children:c.jsxs("div",{className:"summary-content",children:[c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.1s"},children:[c.jsx("span",{children:"Total Staff:"}),c.jsx("span",{className:"summary-value",children:fe.length})]}),c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.2s"},children:[c.jsx("span",{children:"Total Salary:"}),c.jsxs("span",{className:"summary-value salary-amount",children:["",Me.toFixed(2)]})]}),c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.3s"},children:[c.jsx("span",{children:"Average Salary:"}),c.jsxs("span",{className:"summary-value salary-amount",children:["",fe.length>0?(Me/fe.length).toFixed(2):"0.00"]})]}),c.jsxs("div",{className:"summary-item",style:{animationDelay:"0.4s"},children:[c.jsx("span",{children:"Month:"}),c.jsx("span",{className:"summary-value",children:new Date(f+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]})}),c.jsx("div",{className:"salary-cards",children:fe.map((pe,z)=>c.jsxs("div",{className:"salary-card",style:{animationDelay:`${z*.1}s`},onClick:()=>me(pe.staffId),children:[c.jsxs("div",{className:"card-header",children:[c.jsx("h3",{children:pe.staffName}),c.jsx("span",{className:"role-badge",children:pe.role})]}),c.jsxs("div",{className:"salary-details",children:[c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{children:"Present Days:"}),c.jsx("span",{className:"present-count",children:pe.presentDays})]}),c.jsxs("div",{className:"detail-row",children:[c.jsx("span",{children:"Daily Salary:"}),c.jsxs("span",{children:["",pe.perDaySalary.toFixed(2)]})]}),c.jsxs("div",{className:"salary-total",children:[c.jsx("span",{children:"Total Salary:"}),c.jsxs("span",{className:"salary-amount",children:["",pe.salary.toFixed(2)]})]})]})]},pe.staffId))})]})]}),H&&c.jsx("div",{className:"modal-overlay",onClick:_e,children:c.jsxs("div",{className:"modal-content",onClick:pe=>pe.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h2",{children:["Attendance History for ",H.name]}),c.jsx("button",{className:"close-button",onClick:_e,children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"staff-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"ID:"})," ",H.staffId]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Role:"})," ",H.role]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Daily Salary:"})," ",H.perDaySalary]})]}),c.jsxs("div",{className:"attendance-history-list",children:[c.jsx("h3",{children:"Attendance Records"}),H.attendanceHistory.length>0?c.jsx("div",{className:"history-records",children:H.attendanceHistory.map((pe,z)=>c.jsxs("div",{className:"history-record",children:[c.jsx("div",{className:"record-date",children:c.jsx("strong",{children:new Date(pe.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),c.jsx("div",{className:"record-status",children:c.jsx("span",{className:`status-badge ${pe.status}`,children:pe.status})}),pe.class&&c.jsx("div",{className:"record-class",children:c.jsx("span",{className:"class-badge",children:pe.class})}),pe.markedAt&&c.jsxs("div",{className:"record-time",children:["Marked at: ",new Date(pe.markedAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]})]},pe.id||z))}):c.jsx("p",{className:"no-records",children:"No attendance records found for this staff member."})]})]})]})}),se&&c.jsx("div",{className:"modal-overlay",onClick:Ee,children:c.jsxs("div",{className:"modal-content",onClick:pe=>pe.stopPropagation(),children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h2",{children:"Select Class"}),c.jsx("button",{className:"close-button",onClick:Ee,children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{htmlFor:"class-select",children:"Choose a class:"}),c.jsxs("select",{id:"class-select",value:q,onChange:pe=>j(pe.target.value),className:"class-select",children:[c.jsx("option",{value:"",children:"-- Select Class --"}),c.jsx("option",{value:"Nursery",children:"Nursery"}),c.jsx("option",{value:"LKG",children:"LKG"}),c.jsx("option",{value:"UKG",children:"UKG"}),c.jsx("option",{value:"1st",children:"1st"}),c.jsx("option",{value:"2nd",children:"2nd"}),c.jsx("option",{value:"3rd",children:"3rd"}),c.jsx("option",{value:"4th",children:"4th"}),c.jsx("option",{value:"5th",children:"5th"}),c.jsx("option",{value:"6th",children:"6th"}),c.jsx("option",{value:"7th",children:"7th"}),c.jsx("option",{value:"8th",children:"8th"}),c.jsx("option",{value:"9th",children:"9th"}),c.jsx("option",{value:"10th",children:"10th"}),c.jsx("option",{value:"11th",children:"11th"}),c.jsx("option",{value:"12th",children:"12th"})]})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{className:"submit-button",onClick:pe=>{pe.preventDefault(),pe.stopPropagation(),we(pe)},disabled:!q||F,type:"button",children:F?"Saving...":"Save Attendance"}),c.jsx("button",{className:"cancel-button",onClick:Ee,children:"Cancel"})]})]})]})})]})})},HS=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(""),[s,o]=K.useState(""),[u,d]=K.useState(""),[f,p]=K.useState(""),[m,x]=K.useState(""),[E,w]=K.useState(!1),[A,D]=K.useState(!1),[C,k]=K.useState(!1),[H,G]=K.useState(!1),[V,ce]=K.useState(0),[se,U]=K.useState(null),I=ci(),R=eo();K.useEffect(()=>{const M=new URLSearchParams(R.search);M.get("signup")==="verification"?(x("Account created. Verification email sent. Please check your inbox."),p(""),I("/login",{replace:!0})):M.get("signup")==="success"&&(x("Account created successfully. Please sign in to continue."),I("/login",{replace:!0}))},[R,I]),K.useEffect(()=>{let M=null;return V>0&&(M=setInterval(()=>{ce(ne=>ne<=1?(clearInterval(M),0):ne-1)},1e3)),()=>clearInterval(M)},[V]);const q=async()=>{w(!0),p("");try{const M=new Hl,ne=await eR(An,M);if(ne.user.metadata.creationTime===ne.user.metadata.lastSignInTime){const Se={email:ne.user.email,phone:ne.user.phoneNumber||"",firmName:u||"",displayName:ne.user.displayName||ne.user.email?.split("@")[0]||"User",createdAt:new Date,uid:ne.user.uid};try{await _1(Se),await Qc(ne.user.uid,{email:ne.user.email,displayName:ne.user.displayName||ne.user.email?.split("@")[0]||"User"})}catch(le){console.error("Error creating user profile or subscription:",le)}}else try{if(await au(ne.user.uid)||await Qc(ne.user.uid),!await vx(ne.user.uid)){I("/subscribe");return}}catch(Se){console.error("Error checking subscription:",Se)}localStorage.setItem("isLoggedIn","true"),I("/dashboard")}catch(M){console.error("Google authentication error:",M);let ne="Google authentication failed. Please try again.";switch(M.code){case"auth/popup-blocked":ne="Popup blocked by browser. Please allow popups and try again.";break;case"auth/cancelled-popup-request":ne="Popup closed by user.";break;case"auth/account-exists-with-different-credential":ne="Account exists with different credential. Please sign in using your email and password.";break;default:ne=M.message||ne}p(ne)}finally{w(!1)}},j=async()=>{if(!(V>0)){w(!0),p(""),x("");try{if(!An.currentUser){w(!1);return}if(An.currentUser.emailVerified){p("Email is already verified. Please sign in normally."),w(!1);return}await Y_(An.currentUser),ce(30),x("Verification email resent. Check your inbox."),setTimeout(()=>{x("")},5e3)}catch(M){console.error("Error resending verification email:",M);let ne="Failed to resend verification email. Please try again.";switch(M.code){case"auth/too-many-requests":ne="Too many requests. Please try again later.";break;default:ne=M.message||ne}p(ne)}finally{w(!1)}}},F=async M=>{M.preventDefault(),w(!0),p("");try{if(C)await G_(An,n),p("Password reset email sent. Please check your inbox."),k(!1);else if(A){const ne=await $_(An,n,t);await K_(ne.user,{displayName:u||n.split("@")[0]});const Se={email:n,phone:s,firmName:u,displayName:u||n.split("@")[0],createdAt:new Date,uid:ne.user.uid};try{await _1(Se)}catch(le){console.error("Error creating user profile:",le)}await ug(An),localStorage.removeItem("isLoggedIn"),x("Account created successfully. Please sign in to continue."),D(!1),p("")}else{const ne=await W_(An,n,t);if(console.log("Login: Checking email verification for user:",ne.user.email,ne.user.emailVerified),!ne.user.emailVerified){x(""),p("Please verify your email before signing in."),G(!0);return}try{console.log("Login: Checking subscription for user:",ne.user.uid);const Se=await au(ne.user.uid);if(console.log("Login: Got subscription data:",Se),!Se)console.log("Login: No subscription found, creating new one for user:",ne.user.uid),await Qc(ne.user.uid);else if(Se.plan==="TRIAL"){console.log("Login: User has trial subscription, redirecting to free trial page"),I("/free-trial-continue");return}else{const le=await vx(ne.user.uid);if(console.log("Login: Has active subscription:",le),!le){console.log("Login: No active subscription, redirecting to subscribe page"),I("/subscribe");return}}}catch(Se){console.error("Error checking subscription:",Se)}localStorage.setItem("isLoggedIn","true"),I("/dashboard")}}catch(ne){console.error("Authentication error:",ne);let Se="Authentication failed. Please try again.";switch(ne.code){case"auth/user-not-found":Se="No account found. Please sign up first.";break;case"auth/wrong-password":Se="Incorrect password.";break;case"auth/email-already-in-use":Se="Email already in use. Please try logging in instead.";break;case"auth/invalid-email":Se="Invalid email address.";break;case"auth/weak-password":Se="Password should be at least 6 characters.";break;case"auth/too-many-requests":Se="Too many requests. Please try again later.";break;default:Se=ne.message||Se}p(Se)}finally{w(!1)}};return c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-card",children:[c.jsxs("div",{className:"login-header",children:[c.jsxs("h1",{children:[" ",C?"Reset Password":A?"Sign Up":"Access Required"]}),c.jsx("p",{children:C?"Enter your email to reset your password":A?"Create a new account":"Please sign in to continue"})]}),c.jsxs("form",{onSubmit:F,className:"login-form",children:[c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"email",children:"Email"}),c.jsx("input",{type:"email",id:"email",value:n,onChange:M=>{e(M.target.value),H&&G(!1),f&&p(""),m&&x("")},placeholder:"Enter your email",required:!0})]}),!C&&c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsx("input",{type:"password",id:"password",value:t,onChange:M=>r(M.target.value),placeholder:"Enter your password",minLength:"6",required:!C})]}),A&&!C&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"phone",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phone",value:s,onChange:M=>o(M.target.value),placeholder:"Enter your phone number"})]}),c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"firmName",children:"Firm/Organization Name"}),c.jsx("input",{type:"text",id:"firmName",value:u,onChange:M=>d(M.target.value),placeholder:"Enter your firm or organization name"})]})]}),m&&c.jsx("div",{className:"success-message",children:m}),(f||H)&&c.jsxs("div",{className:f?"error-message":"info-message",children:[f||"Please verify your email before signing in.",H&&c.jsx("div",{style:{marginTop:"10px"},children:c.jsx("button",{type:"button",className:"resend-button",onClick:j,disabled:E||V>0,style:{background:"none",border:"1px solid #3498db",color:"#3498db",padding:"8px 16px",borderRadius:"4px",cursor:V>0?"not-allowed":"pointer",fontSize:"0.9rem",marginTop:"5px",opacity:V>0?.6:1},children:V>0?`Resend available in ${V}s`:"Resend Verification Email"})})]}),H?c.jsx("div",{className:"login-button-disabled",style:{backgroundColor:"#f5f5f5",color:"#999",border:"1px solid #ddd",padding:"12px",borderRadius:"6px",textAlign:"center",fontSize:"1rem",cursor:"not-allowed"},children:"Verify email to enable sign in"}):c.jsx("button",{type:"submit",className:"login-button",disabled:E||!n||!C&&!t,children:E?"Processing...":C?"Send Reset Email":A?"Sign Up":"Sign In"}),!C&&c.jsxs("button",{type:"button",className:"google-login-btn",onClick:q,disabled:E,children:[c.jsx("span",{className:"google-icon",children:"G"}),"Sign in with Google"]}),c.jsx("div",{className:"auth-options",children:C?c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>k(!1),children:"Back to Sign In"}):A?c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>D(!1),children:"Already have an account? Sign In"}):c.jsxs(c.Fragment,{children:[c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>D(!0),children:"Don't have an account? Sign Up"}),c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>k(!0),children:"Forgot Password?"})]})})]})]})})},a3=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(""),[s,o]=K.useState(""),[u,d]=K.useState(""),[f,p]=K.useState(""),[m,x]=K.useState(""),[E,w]=K.useState(""),[A,D]=K.useState(!1),[C,k]=K.useState(0),[H,G]=K.useState(!1),[V,ce]=K.useState(!1),se=ci(),U=K.useRef(),I=K.useRef(),R=K.useRef();K.useEffect(()=>{let M=0;s.length>=8&&(M+=1),/[A-Z]/.test(s)&&(M+=1),/[0-9]/.test(s)&&(M+=1),/[^A-Za-z0-9]/.test(s)&&(M+=1),k(M)},[s]);const q=()=>C===0?"":C<=1?"Weak":C<=2?"Medium":"Strong",j=()=>C===0?"#ddd":C<=1?"#e74c3c":C<=2?"#f39c12":"#2ecc71",F=async M=>{if(M.preventDefault(),D(!0),w(""),!n.trim()){w("Please enter your full name"),U.current?.focus(),D(!1);return}if(!t.trim()){w("Please enter your email"),U.current?.focus(),D(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){w("Please enter a valid email address"),U.current?.focus(),D(!1);return}if(s.length<8){w("Password must be at least 8 characters"),I.current?.focus(),D(!1);return}if(s!==u){w("Passwords do not match"),R.current?.focus(),D(!1);return}try{const Se=await $_(An,t.trim(),s);await K_(Se.user,{displayName:n.trim()});const le={uid:Se.user.uid,email:t.trim(),displayName:n.trim(),createdAt:new Date};try{await _1(le),await Qc(Se.user.uid,{email:t.trim(),displayName:n.trim()})}catch(ve){console.error("Error creating user profile or subscription:",ve)}try{await Y_(Se.user)}catch(ve){console.error("Error sending verification email:",ve)}se("/login?signup=verification")}catch(Se){console.error("Sign up error:",Se);let le="Sign up failed. Please try again.";switch(Se.code){case"auth/email-already-in-use":le="Email already in use. Please try logging in instead.";break;case"auth/invalid-email":le="Invalid email address.";break;case"auth/weak-password":le="Password should be at least 6 characters.";break;case"auth/too-many-requests":le="Too many requests. Please try again later.";break;default:le="Invalid email or password"}w(le)}finally{D(!1)}};return c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-card",children:[c.jsxs("div",{className:"login-header",children:[c.jsx("h1",{children:"Create Account"}),c.jsx("p",{children:"Join us today to manage your fees efficiently"})]}),c.jsxs("form",{onSubmit:F,className:"login-form",children:[c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),c.jsx("input",{type:"text",id:"fullName",value:n,onChange:M=>e(M.target.value),placeholder:"Enter your full name",required:!0,ref:U})]}),c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"email",children:"Email Address *"}),c.jsx("input",{type:"email",id:"email",value:t,onChange:M=>r(M.target.value.trim()),placeholder:"Enter your email",required:!0})]}),c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"password",children:"Password *"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:H?"text":"password",id:"password",value:s,onChange:M=>o(M.target.value),placeholder:"Create a password",minLength:"8",required:!0,ref:I}),c.jsx("button",{type:"button",className:"password-toggle",onClick:()=>G(!H),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",color:"#666"},children:H?"Hide":"Show"})]}),s&&c.jsxs("div",{style:{marginTop:"8px"},children:[c.jsx("div",{style:{height:"4px",backgroundColor:"#eee",borderRadius:"2px",overflow:"hidden"},children:c.jsx("div",{style:{height:"100%",width:`${C/4*100}%`,backgroundColor:j(),transition:"width 0.3s ease"}})}),c.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"0.8rem",color:"#666"},children:c.jsxs("span",{children:["Password strength: ",q()]})})]}),c.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"4px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[c.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:s.length>=8?"#2ecc71":"#ddd",marginRight:"6px"}}),"8+ characters"]}),c.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:/[A-Z]/.test(s)?"#2ecc71":"#ddd",marginRight:"6px"}}),"Uppercase letter"]}),c.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:/[0-9]/.test(s)?"#2ecc71":"#ddd",marginRight:"6px"}}),"Number"]}),c.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[c.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:/[^A-Za-z0-9]/.test(s)?"#2ecc71":"#ddd",marginRight:"6px"}}),"Special character"]})]})]}),c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password *"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:V?"text":"password",id:"confirmPassword",value:u,onChange:M=>d(M.target.value),placeholder:"Confirm your password",required:!0,ref:R}),c.jsx("button",{type:"button",className:"password-toggle",onClick:()=>ce(!V),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",color:"#666"},children:V?"Hide":"Show"})]})]}),c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"phone",children:"Phone Number"}),c.jsx("input",{type:"tel",id:"phone",value:f,onChange:M=>p(M.target.value),placeholder:"Enter your phone number"})]}),c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"firmName",children:"Firm/Organization Name"}),c.jsx("input",{type:"text",id:"firmName",value:m,onChange:M=>x(M.target.value),placeholder:"Enter your firm or organization name"})]}),E&&c.jsx("div",{className:"error-message",children:E}),c.jsx("button",{type:"submit",className:"login-button",disabled:A,children:A?c.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[c.jsx("span",{style:{width:"16px",height:"16px",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"8px"}}),"Creating Account..."]}):"Create Account"}),c.jsx("div",{style:{textAlign:"center",fontSize:"0.9rem",color:"#666",marginTop:"10px"},children:"Secure sign up  No credit card required"}),c.jsx("div",{className:"auth-options",children:c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>se("/login"),children:"Already have an account? Log in"})})]})]})})},o3=()=>{const[n,e]=K.useState(""),[t,r]=K.useState(""),[s,o]=K.useState(""),[u,d]=K.useState(!1),[f,p]=K.useState(!1),[m,x]=K.useState(!1),[E,w]=K.useState(!1),A=ci(),D=K.useRef(),C=K.useRef(),k=async G=>{if(G.preventDefault(),d(!0),o(""),!n.trim()){o("Please enter your email"),D.current?.focus(),d(!1);return}if(!t){o("Please enter your password"),C.current?.focus(),d(!1);return}try{await W_(An,n.trim(),t),m?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("rememberMe","true")):(sessionStorage.setItem("isLoggedIn","true"),localStorage.removeItem("rememberMe")),A("/dashboard")}catch(V){console.error("Login error:",V);let ce="Login failed. Please try again.";switch(V.code){case"auth/user-not-found":case"auth/wrong-password":ce="Invalid email or password";break;case"auth/too-many-requests":ce="Too many requests. Please try again later.";break;default:ce="Invalid email or password"}o(ce)}finally{d(!1)}},H=async G=>{if(G.preventDefault(),d(!0),o(""),!n.trim()){o("Please enter your email"),D.current?.focus(),d(!1);return}try{await G_(An,n.trim()),o("Password reset email sent. Please check your inbox.")}catch(V){console.error("Password reset error:",V);let ce="Failed to send reset email. Please try again.";switch(V.code){case"auth/user-not-found":ce="No account found with this email.";break;case"auth/invalid-email":ce="Invalid email address.";break;default:ce="Failed to send reset email. Please try again."}o(ce)}finally{d(!1)}};return c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-card",children:[c.jsxs("div",{className:"login-header",children:[c.jsx("h1",{children:"Welcome Back"}),c.jsx("p",{children:E?"Reset your password":"Sign in to your account"})]}),c.jsxs("form",{onSubmit:E?H:k,className:"login-form",children:[c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"email",children:"Email Address"}),c.jsx("input",{type:"email",id:"email",value:n,onChange:G=>e(G.target.value.trim()),placeholder:"Enter your email",required:!0,ref:D})]}),!E&&c.jsxs("div",{className:"input-group",children:[c.jsx("label",{htmlFor:"password",children:"Password"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:f?"text":"password",id:"password",value:t,onChange:G=>r(G.target.value),placeholder:"Enter your password",required:!0,ref:C}),c.jsx("button",{type:"button",className:"password-toggle",onClick:()=>p(!f),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",color:"#666"},children:f?"Hide":"Show"})]})]}),!E&&c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[c.jsx("input",{type:"checkbox",id:"rememberMe",checked:m,onChange:G=>x(G.target.checked),style:{marginRight:"8px",width:"16px",height:"16px"}}),c.jsx("label",{htmlFor:"rememberMe",style:{fontSize:"0.9rem",color:"#666",cursor:"pointer"},children:"Remember me"})]}),c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>w(!0),style:{fontSize:"0.9rem",padding:"0",margin:"0",background:"none",border:"none",color:"#3498db",cursor:"pointer"},children:"Forgot password?"})]}),s&&c.jsx("div",{className:"error-message",style:{animation:"fadeIn 0.3s ease"},children:s}),c.jsx("button",{type:"submit",className:"login-button",disabled:u||!n||!E&&!t,children:u?c.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[c.jsx("span",{style:{width:"16px",height:"16px",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"8px"}}),E?"Sending...":"Logging in..."]}):E?"Send Reset Email":"Log in securely"}),E?c.jsx("div",{className:"auth-options",children:c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>{w(!1),o("")},children:"Back to Sign In"})}):c.jsx("div",{className:"auth-options",children:c.jsx("button",{type:"button",className:"switch-auth",onClick:()=>A("/signup"),children:"Create a new account"})})]})]})})},UO=()=>{const n=ci(),[e,t]=K.useState([]);K.useEffect(()=>{const s=new Date,o=[];for(let u=5;u>=0;u--){const d=new Date(s.getFullYear(),s.getMonth()-u,1),f=d.toLocaleString("default",{month:"short"}),p=d.getFullYear().toString().slice(-2),m=35e3,x=m*.3,E=Math.max(0,m+(Math.random()-.5)*x*2);o.push({month:`${f} '${p}`,amount:Math.round(E)})}t(o)},[]);const r=()=>{if(!e||e.length===0)return"Insufficient data to generate insight.";const s=e[0]?.amount||0,o=e[e.length-1]?.amount||0;return o>s?`Collections show an overall upward trend with ${((o-s)/s*100).toFixed(1)}% growth. Maintaining follow-ups during low months can further stabilize cash flow.`:o<s?`Collections show a declining trend with ${((s-o)/s*100).toFixed(1)}% decrease. Focus on follow-ups to reverse this trend.`:"Collections remain stable over time. Maintaining consistent follow-ups is key to sustaining this performance."};return c.jsxs("div",{className:"collection-trend-page",children:[c.jsxs("div",{className:"page-header",children:[c.jsx("button",{className:"back-button",onClick:()=>n("/dashboard"),children:" Back to Dashboard"}),c.jsxs("div",{className:"header-content",children:[c.jsx("h1",{className:"page-title",children:"Collection Trend Over Time"}),c.jsxs("div",{className:"header-meta",children:[c.jsx("p",{className:"page-subtitle",children:"Month-wise fee collection performance"}),c.jsx("span",{className:"view-badge",children:"Monthly view"})]})]})]}),c.jsx("div",{className:"header-divider"}),c.jsx("div",{className:"chart-page-container",children:c.jsxs("div",{className:"analytics-panel",children:[c.jsxs("div",{className:"analytics-header",children:[c.jsx("h2",{className:"panel-title",children:"Collection Trend"}),c.jsx("p",{className:"panel-subtext",children:"Month-wise fee collection performance"})]}),c.jsxs("div",{className:"chart-card",children:[c.jsx(KP,{data:e,width:"100%",height:420}),c.jsxs("div",{className:"insight-card",children:[c.jsxs("div",{className:"insight-header",children:[c.jsx("span",{className:"insight-icon",children:""}),c.jsx("span",{className:"insight-label",children:"Key Insight"})]}),c.jsx("p",{className:"insight-text",children:r()})]})]})]})})]})},BO=()=>{const n=ci(),[e,t]=K.useState(null),[r,s]=K.useState(""),[o,u]=K.useState(!1),[d,f]=K.useState(""),[p,m]=K.useState(0),[x,E]=K.useState(!0),w=async()=>{try{if(!vn())return;const k=mn(),H=dr(Wn,`users/${k}/settings/budget`),G=await yh(H);if(G.exists()){const R=G.data();t(R.monthlyBudget||null),s(R.monthlyBudget?.toString()||"")}else t(null),s("");const V=new Date,ce=`${V.getFullYear()}-${String(V.getMonth()+1).padStart(2,"0")}`,se=await Fn.getExpenditures(),I=A(se).find(R=>R.key===ce)||{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0};m(I.total)}catch(k){console.error("Error loading data:",k)}finally{E(!1)}},A=k=>{const H={},G=new Date,V=`${G.getFullYear()}-${String(G.getMonth()+1).padStart(2,"0")}`,ce=G.toLocaleString("default",{month:"long",year:"numeric"});return H[V]={key:V,label:ce,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},k.forEach(se=>{const U=new Date(se.date),I=`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}`,R=U.toLocaleString("default",{month:"long",year:"numeric"});H[I]||(H[I]={key:I,label:R,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),H[I].expenses.push(se),H[I].total+=se.total,H[I].roomRent+=se.roomRent,H[I].staffSalary+=se.staffSalary,H[I].otherExpenses+=se.otherExpenses,H[I].electricityBill+=se.electricityBill||0,H[I].internetBill+=se.internetBill||0}),Object.values(H).sort((se,U)=>{const[I,R]=se.key.split("-").map(Number),[q,j]=U.key.split("-").map(Number);return I!==q?q-I:j-R})},D=async()=>{try{const k=parseFloat(r);if(isNaN(k)||k<0){f("Please enter a valid positive number");return}if(k<p){f(`Budget must be at least ${p.toLocaleString()} (current spend)`);return}if(u(!0),f(""),!vn())throw new Error("User not authenticated");const H=mn(),G=dr(Wn,`users/${H}/settings/budget`);await Mf(G,{monthlyBudget:k},{merge:!0}),t(k),window.dispatchEvent(new CustomEvent("budgetUpdated",{detail:{budget:k}})),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Budget limit updated successfully"}}))}catch(k){console.error("Error saving budget limit:",k),f("Failed to save budget limit. Please try again.")}finally{u(!1)}};K.useEffect(()=>{w();const k=()=>{w()};return window.addEventListener("expenditureUpdated",k),()=>{window.removeEventListener("expenditureUpdated",k)}},[]);const C=e?p/e*100:0;return c.jsxs("div",{className:"budget-management-page",children:[c.jsxs("div",{className:"page-header",children:[c.jsxs("button",{className:"back-button",onClick:()=>n(-1),children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{}),c.jsx("path",{})]}),"Back"]}),c.jsx("h1",{children:"Budget Management"})]}),x?c.jsx("div",{className:"loading",children:"Loading budget data..."}):c.jsxs("div",{className:"budget-content",children:[c.jsxs("div",{className:"budget-card",children:[c.jsx("h2",{children:"Monthly Budget Limit"}),c.jsxs("div",{className:"budget-input-section",children:[c.jsx("label",{htmlFor:"budget-input",children:"Set your monthly budget:"}),c.jsxs("div",{className:"budget-input-wrapper",children:[c.jsx("span",{className:"currency-symbol",children:""}),c.jsx("input",{id:"budget-input",type:"number",value:r,onChange:k=>{s(k.target.value),d&&f("")},placeholder:"Enter monthly budget",className:"budget-input",min:"0",step:"100"}),c.jsx("button",{onClick:D,disabled:o,className:"save-budget-btn",children:o?"Saving...":"Save"})]}),d&&c.jsx("div",{className:"budget-error",children:d})]}),c.jsx("div",{className:"budget-display",children:e?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"budget-amount",children:["",e.toLocaleString(void 0,{maximumFractionDigits:0})]}),c.jsxs("div",{className:"budget-info",children:["Current month spend: ",p.toLocaleString()]}),c.jsxs("div",{className:"utilization-container",children:[c.jsx("div",{className:"utilization-bar-container",children:c.jsx("div",{className:"utilization-bar",style:{width:`${Math.min(C,100)}%`,background:C<70?"linear-gradient(90deg, #27ae60, #2ecc71)":C<=90?"linear-gradient(90deg, #f39c12, #f59e0b)":"linear-gradient(90deg, #e74c3c, #ef4444)"}})}),c.jsxs("div",{className:"utilization-text",children:[C.toFixed(1),"% of budget used",C>=90&&C<100&&c.jsx("span",{className:"budget-warning",children:"  Approaching budget limit"}),C>=100&&c.jsx("span",{className:"budget-exceeded",children:"  Budget exceeded"})]})]})]}):c.jsx("div",{className:"no-budget-set",children:"No budget limit set. Set a budget to track your monthly expenses."})})]}),c.jsxs("div",{className:"budget-guidance",children:[c.jsx("h3",{children:"Budget Tips"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Set a realistic budget based on your average monthly expenses"}),c.jsx("li",{children:"Review your budget regularly to adjust for changing needs"}),c.jsx("li",{children:"Use the budget utilization tracker to stay within your limits"}),c.jsx("li",{children:"Consider setting alerts when you reach 80% of your budget"})]})]})]})]})},VO=()=>{const n=ci(),[e,t]=K.useState([]),[r,s]=K.useState(!0),[o,u]=K.useState(new Date().getFullYear()),[d,f]=K.useState(new Date().getFullYear()-1),[p,m]=K.useState(null);K.useEffect(()=>{(async()=>{if(!vn()){n("/login");return}try{s(!0);const V=await Fn.getExpenditures();console.log("Raw expenses data:",V);const ce=E(V);console.log("Grouped expenses data:",ce),t(ce)}catch(V){console.error("Error loading monthly expenses:",V)}finally{s(!1)}})()},[n]);const x=G=>({rent:"Room Rent",salary:"Staff Salary",electricity:"Electricity",internet:"Internet",miscellaneous:"Miscellaneous",roomRent:"Room Rent",staffSalary:"Staff Salary",otherExpenses:"Miscellaneous",electricityBill:"Electricity",internetBill:"Internet"})[G]||G,E=G=>{console.log("Grouping expenses:",G);const V={};G.forEach(se=>{console.log("Processing expense:",se);const U=new Date(se.date);console.log("Parsed date:",U);const I=`${U.getFullYear()}-${String(U.getMonth()+1).padStart(2,"0")}`,R=U.toLocaleString("default",{month:"short",year:"numeric"});console.log("Month key:",I,"Month label:",R),V[I]||(V[I]={key:I,label:R,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),V[I].expenses.push(se),V[I].total+=(parseFloat(se.roomRent)||0)+(parseFloat(se.staffSalary)||0)+(parseFloat(se.electricityBill)||0)+(parseFloat(se.internetBill)||0)+(parseFloat(se.otherExpenses)||0),V[I].roomRent+=parseFloat(se.roomRent)||0,V[I].staffSalary+=parseFloat(se.staffSalary)||0,V[I].electricityBill+=parseFloat(se.electricityBill)||0,V[I].internetBill+=parseFloat(se.internetBill)||0,V[I].otherExpenses+=parseFloat(se.otherExpenses)||0,console.log("Updated month data:",V[I])});const ce=Object.values(V).sort((se,U)=>se.key.localeCompare(U.key));return console.log("Final grouped result:",ce),ce},w=e.filter(G=>G.key.startsWith(o.toString())),A=e.filter(G=>G.key.startsWith(d.toString())),D=w.reduce((G,V)=>(G.total+=V.total,G.roomRent+=V.roomRent,G.staffSalary+=V.staffSalary,G.otherExpenses+=V.otherExpenses,G.electricityBill+=V.electricityBill,G.internetBill+=V.internetBill,G),{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),C=A.reduce((G,V)=>(G.total+=V.total,G.roomRent+=V.roomRent,G.staffSalary+=V.staffSalary,G.otherExpenses+=V.otherExpenses,G.electricityBill+=V.electricityBill,G.internetBill+=V.internetBill,G),{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0});K.useEffect(()=>{if(w.length>0&&A.length>0){const G={totalChange:D.total-C.total,totalChangePercent:C.total>0?(D.total-C.total)/C.total*100:0,highestIncreaseCategory:"",highestDecreaseCategory:"",categoryChanges:{}},V=["roomRent","staffSalary","otherExpenses","electricityBill","internetBill"];let ce=-1/0,se=1/0;V.forEach(U=>{const I=D[U]-C[U],R=C[U]>0?(D[U]-C[U])/C[U]*100:0;G.categoryChanges[U]={change:I,changePercent:R},R>ce&&(ce=R,G.highestIncreaseCategory=U),R<se&&(se=R,G.highestDecreaseCategory=U)}),m(G)}},[w,A,D,C]);const k=()=>{if(w.length===0)return c.jsxs("div",{className:"chart-placeholder",children:[c.jsx("div",{className:"placeholder-icon",children:""}),c.jsx("h3",{children:"No Data Available"}),c.jsxs("p",{children:["No expense data found for ",o]})]});const G=[...w,...A],V=Math.max(...G.map(ce=>ce.total),1);return c.jsxs("div",{className:"trend-chart-container",children:[c.jsxs("div",{className:"chart-header",children:[c.jsx("h3",{children:"Monthly Expense Trend Comparison"}),c.jsxs("div",{className:"chart-legend",children:[c.jsxs("div",{className:"legend-item",children:[c.jsx("div",{className:"legend-color current-year"}),c.jsxs("span",{children:[o," (Current)"]})]}),c.jsxs("div",{className:"legend-item",children:[c.jsx("div",{className:"legend-color comparison-year"}),c.jsxs("span",{children:[d," (Previous)"]})]})]})]}),c.jsxs("div",{className:"chart-wrapper",children:[c.jsx("div",{className:"y-axis",children:[100,75,50,25,0].map(ce=>c.jsxs("div",{className:"y-axis-label",children:["",(V*ce/100).toLocaleString(void 0,{maximumFractionDigits:0})]},ce))}),c.jsxs("div",{className:"chart-area",children:[c.jsxs("svg",{viewBox:`0 0 ${Math.max(w.length,A.length)*100} 300`,className:"trend-svg",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"currentYearGradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#3498db",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#3498db",stopOpacity:"0.05"})]}),c.jsxs("linearGradient",{id:"comparisonYearGradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[c.jsx("stop",{offset:"0%",stopColor:"#e74c3c",stopOpacity:"0.3"}),c.jsx("stop",{offset:"100%",stopColor:"#e74c3c",stopOpacity:"0.05"})]})]}),[0,1,2,3,4].map(ce=>c.jsx("line",{x1:"0",y1:ce*75,x2:Math.max(w.length,A.length)*100,y2:ce*75,stroke:"#eee",strokeWidth:"1"},ce)),c.jsx("polygon",{points:`0,300 ${w.map((ce,se)=>{const U=se*100+50,I=300-ce.total/V*250;return`${U},${I}`}).join(" ")} ${(w.length-1)*100+50},300`,fill:"url(#currentYearGradient)"}),c.jsx("polyline",{points:w.map((ce,se)=>{const U=se*100+50,I=300-ce.total/V*250;return`${U},${I}`}).join(" "),fill:"none",stroke:"#3498db",strokeWidth:"4",className:"trend-line"}),c.jsx("polygon",{points:`0,300 ${A.map((ce,se)=>{const U=se*100+50,I=300-ce.total/V*250;return`${U},${I}`}).join(" ")} ${(A.length-1)*100+50},300`,fill:"url(#comparisonYearGradient)"}),c.jsx("polyline",{points:A.map((ce,se)=>{const U=se*100+50,I=300-ce.total/V*250;return`${U},${I}`}).join(" "),fill:"none",stroke:"#e74c3c",strokeWidth:"4",strokeDasharray:"6,6",className:"trend-line"}),w.map((ce,se)=>{const U=se*100+50,I=300-ce.total/V*250;return c.jsxs("g",{children:[c.jsx("circle",{cx:U,cy:I,r:"8",fill:"#3498db",stroke:"white",strokeWidth:"3",className:"data-point"}),c.jsxs("text",{x:U,y:I-20,textAnchor:"middle",fontSize:"11",fill:"#333",fontWeight:"600",className:"data-label",children:["",ce.total.toLocaleString(void 0,{maximumFractionDigits:0})]})]},`current-${ce.key}`)}),A.map((ce,se)=>{const U=se*100+50,I=300-ce.total/V*250;return c.jsxs("g",{children:[c.jsx("circle",{cx:U,cy:I,r:"8",fill:"#e74c3c",stroke:"white",strokeWidth:"3",className:"data-point"}),c.jsxs("text",{x:U,y:I+30,textAnchor:"middle",fontSize:"11",fill:"#333",fontWeight:"600",className:"data-label",children:["",ce.total.toLocaleString(void 0,{maximumFractionDigits:0})]})]},`compare-${ce.key}`)})]}),c.jsx("div",{className:"x-axis",children:Array.from({length:Math.max(w.length,A.length)}).map((ce,se)=>{const U=w[se]||A[se];return c.jsx("div",{className:"x-axis-label",style:{left:`${se*100+50}px`},children:U?U.label.split(" ")[0]:""},se)})})]})]})]})},H=()=>{const G=[{name:"Staff Salary",current:D.staffSalary,comparison:C.staffSalary,color:"--info-color"},{name:"Room Rent",current:D.roomRent,comparison:C.roomRent,color:"--success-color"},{name:"Electricity",current:D.electricityBill,comparison:C.electricityBill,color:"--warning-color"},{name:"Internet",current:D.internetBill,comparison:C.internetBill,color:"--primary-color"},{name:"Miscellaneous",current:D.otherExpenses,comparison:C.otherExpenses,color:"--accent-color"}];return c.jsxs("div",{className:"category-breakdown",children:[c.jsx("h3",{children:"Category Breakdown Comparison"}),c.jsxs("div",{className:"category-comparison-header",children:[c.jsx("div",{className:"header-column",children:"Category"}),c.jsx("div",{className:"header-column",children:o}),c.jsx("div",{className:"header-column",children:d}),c.jsx("div",{className:"header-column",children:"Change"})]}),c.jsx("div",{className:"category-grid",children:G.map((V,ce)=>{const se=V.current-V.comparison,U=V.comparison>0?(V.current-V.comparison)/V.comparison*100:0;return c.jsxs("div",{className:"category-card",children:[c.jsx("div",{className:"category-header",children:c.jsx("span",{className:"category-name",children:V.name})}),c.jsxs("div",{className:"category-comparison",children:[c.jsxs("div",{className:"comparison-value",children:[c.jsx("div",{className:"value-label",children:"Current"}),c.jsxs("div",{className:"value-amount",children:["",V.current.toLocaleString()]})]}),c.jsxs("div",{className:"comparison-value",children:[c.jsx("div",{className:"value-label",children:"Previous"}),c.jsxs("div",{className:"value-amount",children:["",V.comparison.toLocaleString()]})]}),c.jsxs("div",{className:`comparison-change ${se>=0?"positive":"negative"}`,children:[c.jsxs("div",{className:"change-amount",children:[se>=0?"+":"",se.toLocaleString(void 0,{maximumFractionDigits:0})]}),c.jsxs("div",{className:"change-percent",children:["(",U>=0?"+":"",U.toFixed(1),"%)"]})]})]}),c.jsxs("div",{className:"category-bar-container",children:[c.jsx("div",{className:"category-bar current",style:{width:`${D.total>0?V.current/D.total*100:0}%`,backgroundColor:`var(${V.color})`}}),c.jsx("div",{className:"category-bar comparison",style:{width:`${C.total>0?V.comparison/C.total*100:0}%`,backgroundColor:`var(${V.color})`,opacity:.5}})]})]},ce)})})]})};return r?c.jsx("div",{className:"expense-trend-container",children:c.jsxs("div",{className:"loading-spinner",children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Loading expense trend data..."})]})}):c.jsxs("div",{className:"expense-trend-container",children:[c.jsxs("div",{className:"trend-header",children:[c.jsxs("div",{className:"header-content",children:[c.jsx("div",{className:"header-left",children:c.jsxs("div",{className:"header-text-container",children:[c.jsx("h1",{children:"Expense Trend Analysis"}),c.jsx("p",{className:"subtitle",children:"Analyze spending patterns and trends over time"})]})}),c.jsx("div",{className:"header-right",children:c.jsx("button",{className:"back-btn",onClick:()=>n(-1),children:" Back to Expenses"})})]}),c.jsxs("div",{className:"year-selector",children:[c.jsxs("div",{className:"year-select-group",children:[c.jsx("label",{htmlFor:"year-select",children:"Analyze Year:"}),c.jsx("select",{id:"year-select",value:o,onChange:G=>u(parseInt(G.target.value)),className:"year-input",children:[2023,2024,2025,2026].map(G=>c.jsx("option",{value:G,children:G},G))})]}),c.jsxs("div",{className:"year-select-group",children:[c.jsx("label",{htmlFor:"comparison-year-select",children:"Compare With:"}),c.jsx("select",{id:"comparison-year-select",value:d,onChange:G=>f(parseInt(G.target.value)),className:"year-input",children:[2023,2024,2025,2026].map(G=>c.jsx("option",{value:G,children:G},G))})]})]})]}),c.jsxs("div",{className:"summary-cards",children:[c.jsxs("div",{className:"summary-card total-spent",children:[c.jsx("div",{className:"card-header",children:c.jsx("span",{className:"card-title",children:"Total Spending"})}),c.jsxs("div",{className:"card-value",children:["",D.total.toLocaleString()]}),c.jsx("div",{className:"card-comparison",children:c.jsx("span",{className:C.total>0&&D.total>=C.total?"positive":"negative",children:C.total>0?c.jsxs(c.Fragment,{children:[D.total>=C.total?"":"",Math.abs((D.total-C.total)/C.total*100).toFixed(1),"% vs ",d]}):""})}),c.jsx("div",{className:"card-indicator total-spent-indicator"})]}),c.jsxs("div",{className:"summary-card avg-monthly",children:[c.jsx("div",{className:"card-header",children:c.jsx("span",{className:"card-title",children:"Average Monthly"})}),c.jsxs("div",{className:"card-value",children:["",(D.total/12).toLocaleString(void 0,{maximumFractionDigits:0})]}),c.jsx("div",{className:"card-comparison",children:c.jsx("span",{className:C.total>0&&D.total/12>=C.total/12?"positive":"negative",children:C.total>0?c.jsxs(c.Fragment,{children:[D.total/12>=C.total/12?"":"",Math.abs((D.total/12-C.total/12)/(C.total/12)*100).toFixed(1),"% vs ",d]}):""})}),c.jsx("div",{className:"card-indicator avg-monthly-indicator"})]}),c.jsxs("div",{className:"summary-card highest-category",children:[c.jsx("div",{className:"card-header",children:c.jsx("span",{className:"card-title",children:"Top Expense Category"})}),c.jsx("div",{className:"card-value",children:D.staffSalary>=D.roomRent&&D.staffSalary>=D.otherExpenses?"Staff Salary":D.roomRent>=D.otherExpenses?"Room Rent":"Miscellaneous"}),c.jsx("div",{className:"card-indicator highest-category-indicator"})]})]}),c.jsxs("div",{className:"comparison-messages",children:[C.total<=0&&c.jsx("div",{className:"no-comparison-message",children:"No data for comparison"}),C.total>0&&c.jsxs("div",{className:"comparison-message",children:["vs ",C.staffSalary>=C.roomRent&&C.staffSalary>=C.otherExpenses?"Staff Salary":C.roomRent>=C.otherExpenses?"Room Rent":"Miscellaneous"," in ",d]})]}),p&&c.jsxs("div",{className:"trend-analysis",children:[c.jsxs("h3",{children:["Year-over-Year Analysis (",o," vs ",d,")"]}),c.jsxs("div",{className:"analysis-cards",children:[c.jsxs("div",{className:"analysis-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("span",{className:"card-title",children:"Total Spending Change"})}),c.jsxs("div",{className:`card-value ${p.totalChange>=0?"positive":"negative"}`,children:[p.totalChange>=0?"+":"",p.totalChange.toLocaleString(void 0,{maximumFractionDigits:0})]}),c.jsxs("div",{className:`card-comparison ${p.totalChangePercent>=0?"positive":"negative"}`,children:[p.totalChangePercent>=0?"+":"",p.totalChangePercent.toFixed(1),"% change"]})]}),c.jsxs("div",{className:"analysis-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("span",{className:"card-title",children:"Biggest Increase"})}),c.jsx("div",{className:"card-value",children:x(p.highestIncreaseCategory)}),c.jsxs("div",{className:"card-comparison positive",children:["+",p.categoryChanges[p.highestIncreaseCategory]?.changePercent.toFixed(1),"%"]})]}),c.jsxs("div",{className:"analysis-card",children:[c.jsx("div",{className:"card-header",children:c.jsx("span",{className:"card-title",children:"Biggest Decrease"})}),c.jsx("div",{className:"card-value",children:x(p.highestDecreaseCategory)}),c.jsxs("div",{className:"card-comparison negative",children:[p.categoryChanges[p.highestDecreaseCategory]?.changePercent.toFixed(1),"%"]})]})]})]}),k(),H()]})},zO=()=>{const n=ci(),[e,t]=K.useState({rating:0,type:"Overall Experience",message:""}),[r,s]=K.useState({category:"Fees / Payments",priority:"Medium",description:"",email:""}),[o,u]=K.useState(null),[d,f]=K.useState(null),[p,m]=K.useState(!1),[x,E]=K.useState(!1),[w,A]=K.useState(""),[D,C]=K.useState(!1),k=R=>{const{name:q,value:j}=R.target;t(F=>({...F,[q]:j}))},H=R=>{t(q=>({...q,rating:R}))},G=R=>{const{name:q,value:j}=R.target;s(F=>({...F,[q]:j}))},V=R=>{if(R.target.files&&R.target.files[0]){const q=R.target.files[0];if(q.type.startsWith("image/")){u(q);const j=new FileReader;j.onload=F=>{f(F.target.result)},j.readAsDataURL(q)}else alert("Please select a valid image file (PNG, JPG, JPEG)")}},ce=()=>{u(null),f(null);const R=document.getElementById("screenshot-upload");R&&(R.value="")},se=R=>{A(R),C(!0),setTimeout(()=>{C(!1),A("")},3e3)},U=async R=>{R.preventDefault(),m(!0);try{const q={userId:mn(),rating:e.rating,type:e.type,message:e.message,createdAt:new Date};await su(b1(Wn,`users/${mn()}/feedback`),q),se("Thank you for your feedback!"),t({rating:0,type:"Overall Experience",message:""})}catch(q){console.error("Error submitting feedback:",q),se("Failed to submit feedback. Please try again.")}finally{m(!1)}},I=async R=>{R.preventDefault(),E(!0);try{const q={userId:mn(),category:r.category,priority:r.priority,description:r.description,email:r.email,status:"Open",createdAt:new Date},j=await su(b1(Wn,`users/${mn()}/supportQueries`),q);if(o)try{const F=Qd(Uu,`users/${mn()}/supportScreenshots/${j.id}/${o.name}`);await Sf(F,o);const M=await _f(F);await hu(dr(Wn,`users/${mn()}/supportQueries`,j.id),{screenshotURL:M})}catch(F){console.error("Error uploading screenshot:",F),se("Query submitted but screenshot failed to upload.")}se("Your query has been submitted. We'll get back to you soon."),s({category:"Fees / Payments",priority:"Medium",description:"",email:r.email}),u(null),f(null)}catch(q){console.error("Error submitting support query:",q),se("Failed to submit query. Please try again.")}finally{E(!1)}};return c.jsx(rc,{children:c.jsxs("div",{className:"feedback-support-container",children:[D&&c.jsx("div",{className:"toast-notification",children:w}),c.jsx("div",{className:"page-header",children:c.jsxs("div",{className:"header-navigation",children:[c.jsxs("button",{className:"back-button",onClick:()=>n(-1),children:[c.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{}),c.jsx("path",{})]}),"Back"]}),c.jsxs("div",{className:"header-text",children:[c.jsx("h1",{className:"page-title",children:"Feedback & Support"}),c.jsx("p",{className:"page-subtitle",children:"We value your feedback and are here to help."})]})]})}),c.jsxs("div",{className:"feedback-support-content",children:[c.jsx("div",{className:"form-section",children:c.jsxs("div",{className:"form-card",children:[c.jsx("h2",{className:"form-title",children:"Share Your Experience"}),c.jsxs("form",{onSubmit:U,className:"feedback-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Experience Rating"}),c.jsx("div",{className:"star-rating",children:[1,2,3,4,5].map(R=>c.jsx("span",{className:`star ${e.rating>=R?"filled":""}`,onClick:()=>H(R),children:""},R))})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Feedback Type"}),c.jsxs("select",{name:"type",value:e.type,onChange:k,className:"form-select",children:[c.jsx("option",{value:"Overall Experience",children:"Overall Experience"}),c.jsx("option",{value:"Feature Suggestion",children:"Feature Suggestion"}),c.jsx("option",{value:"UI / Design",children:"UI / Design"}),c.jsx("option",{value:"Performance",children:"Performance"}),c.jsx("option",{value:"Other",children:"Other"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Feedback Message"}),c.jsx("textarea",{name:"message",value:e.message,onChange:k,placeholder:"Tell us what you liked or what we can improve",className:"form-textarea",rows:"4"})]}),c.jsx("button",{type:"submit",disabled:p,className:"submit-btn primary-btn",children:p?"Submitting...":"Submit Feedback"})]})]})}),c.jsx("div",{className:"form-section",children:c.jsxs("div",{className:"form-card",children:[c.jsx("h2",{className:"form-title",children:"Raise a Query"}),c.jsxs("form",{onSubmit:I,className:"support-form",children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Query Category"}),c.jsxs("select",{name:"category",value:r.category,onChange:G,className:"form-select",children:[c.jsx("option",{value:"Fees / Payments",children:"Fees / Payments"}),c.jsx("option",{value:"Attendance",children:"Attendance"}),c.jsx("option",{value:"Salary",children:"Salary"}),c.jsx("option",{value:"Reports",children:"Reports"}),c.jsx("option",{value:"Technical Issue",children:"Technical Issue"}),c.jsx("option",{value:"Other",children:"Other"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Priority (Optional)"}),c.jsxs("select",{name:"priority",value:r.priority,onChange:G,className:"form-select",children:[c.jsx("option",{value:"Low",children:"Low"}),c.jsx("option",{value:"Medium",children:"Medium"}),c.jsx("option",{value:"High",children:"High"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Query Description"}),c.jsx("textarea",{name:"description",value:r.description,onChange:G,placeholder:"Describe your issue or question in detail",className:"form-textarea",rows:"4",required:!0})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Contact Email"}),c.jsx("input",{type:"email",name:"email",value:r.email,onChange:G,placeholder:"your.email@example.com",className:"form-input"})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{className:"form-label",children:"Screenshot (Optional)"}),c.jsxs("div",{className:"screenshot-upload",children:[c.jsx("input",{type:"file",id:"screenshot-upload",accept:"image/*",onChange:V,className:"screenshot-input"}),c.jsx("label",{htmlFor:"screenshot-upload",className:"screenshot-upload-label",children:o?"Change Screenshot":"Upload Screenshot"}),d&&c.jsxs("div",{className:"screenshot-preview",children:[c.jsx("img",{src:d,alt:"Preview",className:"preview-image"}),c.jsx("button",{type:"button",className:"remove-screenshot",onClick:ce,children:"Remove"})]})]})]}),c.jsx("button",{type:"submit",disabled:x,className:"submit-btn primary-btn",children:x?"Submitting...":"Submit Query"})]})]})})]})]})})};console.log(" FINAL API_BASE USED:","https://us-central1-fees-management-system-70bb7.cloudfunctions.net/api");const $y="https://us-central1-fees-management-system-70bb7.cloudfunctions.net/api",qO="rzp_test_RvVPS6Sl3ODiZ8",HO=(n,e=499)=>new Promise((t,r)=>{(async()=>{try{console.log(" Starting payment for UID:",n),console.log(" API_BASE:",$y);const s=await fetch(`${$y}/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})});if(!s.ok)throw new Error(`Create order failed: ${s.status}`);const o=await s.json();if(console.log(" Order created:",o),!o||!o.id)throw new Error(" Invalid order received from backend");if(typeof window>"u"||!window.Razorpay)throw new Error(" Razorpay SDK not loaded");const u={key:qO,amount:o.amount,currency:o.currency,order_id:o.id,name:"Fees Management System",description:"Monthly PRO Subscription  499",handler:async function(f){try{console.log(" Payment success:",f);const p=await fetch(`${$y}/verify-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,uid:n})}),m=await p.json();if(!p.ok||m.success!==!0)throw new Error(" Payment verification failed");console.log(" Payment verified & subscription activated"),t(m)}catch(p){console.error("Verification error:",p),r(p)}},modal:{ondismiss:()=>{r(new Error("Payment cancelled by user"))}},theme:{color:"#667eea"}};new window.Razorpay(u).open()}catch(s){console.error("Payment error:",s),r(s)}})()}),l3=async n=>{try{return await HO(n,499)}catch(e){throw e.message==="Payment cancelled by user"&&console.log(" User cancelled payment"),e}},GO=()=>{const{subscription:n,loading:e,refreshSubscription:t,isPaidUser:r,isTrialUser:s,isTrialExpired:o}=e2(),[u,d]=K.useState(!1),[f,p]=K.useState(""),[m,x]=K.useState(""),E=ci();K.useEffect(()=>{if(r){E("/dashboard");return}},[r,E]),K.useEffect(()=>{n&&n.status==="active"&&n.isPaid!==!0||n&&n.status},[n,e]);const w=async()=>{if(r){console.log("Payment blocked: user already has active subscription"),p("You already have an active subscription. No payment required.");return}d(!0),p(""),x("");try{if(!An.currentUser)throw new Error("User not authenticated");await l3(An.currentUser.uid,!1),x("Payment successful! Your PRO access is now renewed for 30 days."),await t(),setTimeout(()=>{E("/dashboard")},2e3)}catch(k){console.error("Error processing payment:",k),k.message==="Payment cancelled by user"?p("Payment was cancelled. You can try again when ready."):p("Failed to process payment. Please try again.")}finally{d(!1)}};if(e)return c.jsx("div",{className:"login-container",children:c.jsx("div",{className:"login-card",children:c.jsxs("div",{className:"subscribe-loading",children:[c.jsx("div",{className:"loading-logo",children:c.jsx("div",{className:"loading-logo-inner"})}),c.jsx("div",{className:"loading-text",children:"Loading subscription details..."})]})})});if(n&&n.status==="active"&&n.isPaid===!0)return c.jsx("div",{className:"login-container",children:c.jsx("div",{className:"login-card",children:c.jsxs("div",{className:"subscribe-loading",children:[c.jsx("div",{className:"loading-logo",children:c.jsx("div",{className:"loading-logo-inner"})}),c.jsx("div",{className:"loading-text",children:"Redirecting to dashboard..."})]})})});const A=n?tA(n.trialEndsAt):0;return c.jsx("div",{className:"login-container",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px"},children:c.jsxs("div",{className:"login-card",style:{maxWidth:"700px",width:"100%",borderRadius:"12px",boxShadow:"0 15px 30px rgba(0,0,0,0.15)",overflow:"hidden",maxHeight:"95vh",display:"flex",flexDirection:"column"},children:[c.jsxs("div",{style:{background:"linear-gradient(90deg, #667eea, #764ba2)",color:"white",padding:"15px",textAlign:"center"},children:[c.jsx("h1",{style:{margin:0,fontSize:"1.8rem",fontWeight:"600"},children:" Unlock PRO Features"}),c.jsx("p",{style:{margin:"5px 0 0 0",opacity:.9},children:"Upgrade to access all premium features"})]}),c.jsxs("div",{className:"subscription-info",style:{padding:"20px",flex:"1",overflowY:"auto"},children:[n&&n.status==="active"&&n.plan==="trial"&&A>0&&c.jsxs("div",{className:"trial-banner",style:{backgroundColor:"#d4edda",color:"#155724",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #c3e6cb",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:[c.jsx("strong",{children:" Free Trial Active!"})," You have ",A," days remaining.",c.jsx("br",{}),c.jsx("small",{children:"Subscribe now for 499/month to continue after trial ends."})]}),A<=0&&n&&n.status==="expired"&&c.jsxs("div",{className:"trial-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #f5c6cb",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:[c.jsx("strong",{children:" Trial Expired"})," Your free trial ended ",Math.abs(A)," days ago.",c.jsx("br",{}),c.jsx("small",{children:"Subscribe now for 499/month to continue using the service."})]}),c.jsxs("div",{className:"feature-list",style:{marginBottom:"20px"},children:[c.jsx("h3",{style:{color:"#2c3e50",textAlign:"center",marginBottom:"15px"},children:" Premium Features Include:"}),c.jsxs("ul",{style:{listStyle:"none",padding:0,textAlign:"left",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:[c.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[c.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),c.jsx("span",{children:"Unlimited student records"})]}),c.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[c.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),c.jsx("span",{children:"Advanced reporting & analytics"})]}),c.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[c.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),c.jsx("span",{children:"Priority customer support"})]}),c.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[c.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),c.jsx("span",{children:"Custom branding options"})]})]})]}),c.jsxs("div",{className:"pricing-card",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #e4e7f0 100%)",border:"2px solid #e0e6ed",borderRadius:"10px",padding:"20px",textAlign:"center",marginBottom:"20px"},children:[c.jsx("h3",{style:{color:"#2c3e50",margin:"0 0 10px 0",fontSize:"1.3rem"},children:"Monthly Payment"}),c.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#2c3e50",marginBottom:"5px"},children:"499"}),c.jsx("div",{style:{color:"#7f8c8d",fontSize:"0.9rem",marginBottom:"15px"},children:"30 days access to all PRO features"}),c.jsx("p",{style:{color:"#e74c3c",fontSize:"0.85rem",fontStyle:"italic",margin:0},children:"Manual monthly payment - pay every 30 days"})]}),f&&c.jsx("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #f5c6cb",textAlign:"center"},children:f}),m&&c.jsx("div",{style:{backgroundColor:"#d4edda",color:"#155724",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #c3e6cb",textAlign:"center"},children:m}),c.jsx("button",{onClick:w,disabled:u||r,style:{width:"100%",padding:"15px",fontSize:"1.1rem",fontWeight:"600",borderRadius:"8px",background:r?"linear-gradient(90deg, #95a5a6, #7f8c8d)":"linear-gradient(90deg, #667eea, #764ba2)",border:"none",color:"white",cursor:u||r?"not-allowed":"pointer",boxShadow:"0 3px 10px rgba(102, 126, 234, 0.3)",transition:"all 0.2s ease"},onMouseOver:D=>{!u&&!r&&(D.target.style.transform="translateY(-1px)")},onMouseOut:D=>{D.target.style.transform="translateY(0)"},children:u?c.jsxs("span",{children:[c.jsx("span",{className:"loading-spinner",style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",animation:"spin 1s linear infinite",marginRight:"8px",verticalAlign:"middle"}}),"Processing..."]}):r?" PRO Active":o?" Renew PRO  499":" Upgrade to PRO  499"}),c.jsxs("div",{style:{textAlign:"center",marginTop:"15px",fontSize:"0.85rem",color:"#7f8c8d"},children:[c.jsx("p",{children:" Secure payment processing powered by Razorpay"}),c.jsx("p",{children:" You can use any debit/credit card, UPI, or net banking"})]})]})]})})},$O=()=>{const[n,e]=K.useState(null),[t,r]=K.useState(null),[s,o]=K.useState(""),[u,d]=K.useState(!1);K.useEffect(()=>{const x=An.onAuthStateChanged(E=>{e(E)});return()=>x()},[]);const f=async()=>{if(!n){o("No user logged in");return}try{const x=await Qc(n.uid);r(x),o("Subscription created successfully")}catch(x){console.error("Error creating subscription:",x),o("Error: "+x.message)}},p=async()=>{if(!n){o("No user logged in");return}try{const x=await au(n.uid);r(x),o(x?"Subscription retrieved successfully":"No subscription found")}catch(x){console.error("Error getting subscription:",x),o("Error: "+x.message)}},m=async()=>{if(!n){o("No user logged in");return}d(!0);try{await l3(n.uid),o("Payment successful! Subscription upgraded successfully");const x=await au(n.uid);r(x)}catch(x){console.error("Error processing payment:",x),x.message==="Payment cancelled by user"?o("Payment was cancelled. You can try again when ready."):o("Error processing payment: "+x.message)}finally{d(!1)}};return c.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[c.jsx("h1",{children:"Subscription Test Component"}),n?c.jsxs("div",{children:[c.jsxs("p",{children:["Signed in as: ",n.email]}),c.jsxs("p",{children:["User ID: ",n.uid]}),c.jsxs("div",{style:{margin:"20px 0"},children:[c.jsx("button",{onClick:f,disabled:u,style:{margin:"5px",padding:"10px 15px"},children:"Create Subscription"}),c.jsx("button",{onClick:p,disabled:u,style:{margin:"5px",padding:"10px 15px"},children:"Get Subscription"}),c.jsx("button",{onClick:m,disabled:u,style:{margin:"5px",padding:"10px 15px"},children:u?"Processing Payment...":"Process Payment"})]})]}):c.jsx("p",{children:"No user logged in"}),t&&c.jsxs("div",{style:{margin:"20px 0",padding:"15px",background:"#f5f5f5",borderRadius:"5px"},children:[c.jsx("h3",{children:"Current Subscription:"}),c.jsx("pre",{children:JSON.stringify(t,null,2)})]}),s&&c.jsxs("div",{style:{margin:"10px 0",padding:"10px",background:s.includes("Error")?"#ffebee":"#e8f5e8",border:s.includes("Error")?"1px solid #f44336":"1px solid #4caf50",borderRadius:"4px"},children:[c.jsx("strong",{children:"Result:"})," ",s]}),c.jsxs("div",{style:{marginTop:"30px"},children:[c.jsx("h3",{children:"How to Test:"}),c.jsxs("ol",{children:[c.jsx("li",{children:"Make sure you're logged in"}),c.jsx("li",{children:'Click "Create Subscription" to create a trial subscription'}),c.jsx("li",{children:'Click "Process Payment" to simulate a payment and upgrade to PRO'}),c.jsx("li",{children:'Click "Get Subscription" to check current subscription status'})]})]})]})},Bs=({children:n})=>{const{hasActiveSub:e,loading:t,subscription:r,error:s}=e2(),o=ci(),u=eo();return K.useEffect(()=>{if(!An.currentUser){o("/login");return}s&&console.error("ProtectedRoute: Subscription context error:",s),!t&&!e&&u.pathname!=="/subscribe"&&o("/subscribe")},[e,t,o,u,r,s]),t&&u.pathname!=="/subscribe"?c.jsx("div",{className:"app-loading",children:c.jsxs("div",{className:"loading-spinner",children:[c.jsx("div",{className:"loading-logo",children:c.jsx("div",{className:"loading-logo-inner"})}),c.jsx("div",{className:"loading-text",children:"Checking access..."})]})}):!e&&u.pathname!=="/subscribe"?c.jsx("div",{className:"app-loading",children:c.jsx("div",{className:"loading-spinner",children:"Redirecting to subscription page..."})}):n},WO=()=>{const n=ci(),e=()=>{n("/dashboard")},t=()=>{n("/subscribe")};return c.jsx("div",{className:"login-container",children:c.jsxs("div",{className:"login-card",children:[c.jsxs("div",{className:"login-header",children:[c.jsx("h1",{children:" Free Trial Activated!"}),c.jsx("p",{children:"You have 7 days to explore all premium features."})]}),c.jsxs("div",{className:"trial-options",children:[c.jsxs("div",{className:"option-card",onClick:e,children:[c.jsx("h3",{children:"Continue with Free Trial"}),c.jsx("p",{children:"Access all features for 7 days"}),c.jsx("button",{className:"btn-primary",children:"Start Free Trial"})]}),c.jsxs("div",{className:"option-card",onClick:t,children:[c.jsx("h3",{children:"Upgrade to PRO 499"}),c.jsx("p",{children:"Unlock unlimited access forever"}),c.jsx("button",{className:"btn-secondary",children:"Upgrade Now"})]})]}),c.jsx("div",{className:"login-footer",children:c.jsx("p",{children:"No credit card required for trial"})})]})})},YO=()=>{const[n,e]=K.useState(null),[t,r]=K.useState(null),[s,o]=K.useState(!1);return K.useEffect(()=>{(async()=>{if(!An.currentUser){r("No user logged in");return}o(!0);try{console.log("Testing subscription creation for user:",An.currentUser.uid);const d=await au(An.currentUser.uid);if(console.log("Existing subscription:",d),d)e(d);else{console.log("Creating new subscription...");const f=await Qc(An.currentUser.uid);console.log("New subscription created:",f),e(f)}}catch(d){console.error("Error in test:",d),r(d.message)}finally{o(!1)}})()},[]),c.jsxs("div",{style:{padding:"20px"},children:[c.jsx("h2",{children:"Subscription Test"}),s&&c.jsx("p",{children:"Testing subscription creation..."}),t&&c.jsxs("p",{style:{color:"red"},children:["Error: ",t]}),n&&c.jsxs("div",{children:[c.jsx("p",{style:{color:"green"},children:"Success!"}),c.jsx("pre",{children:JSON.stringify(n,null,2)})]})]})},KO=()=>{const n=eo(),e=ci(),[t,r]=K.useState({show:!1,message:""}),[s,o]=K.useState(new Date);K.useEffect(()=>{const A=()=>{o(new Date)};return window.addEventListener("paymentAdded",A),window.addEventListener("paymentRecorded",A),window.addEventListener("paymentUpdated",A),window.addEventListener("paymentDeleted",A),window.addEventListener("studentsUpdated",A),window.addEventListener("dashboardRefresh",A),window.addEventListener("paymentsRefresh",A),window.addEventListener("studentAdded",A),window.addEventListener("studentUpdated",A),window.addEventListener("studentDeleted",A),window.addEventListener("expenseAdded",A),window.addEventListener("expenseUpdated",A),window.addEventListener("expenseDeleted",A),()=>{window.removeEventListener("paymentAdded",A),window.removeEventListener("paymentRecorded",A),window.removeEventListener("paymentUpdated",A),window.removeEventListener("paymentDeleted",A),window.removeEventListener("studentsUpdated",A),window.removeEventListener("dashboardRefresh",A),window.removeEventListener("paymentsRefresh",A),window.removeEventListener("studentAdded",A),window.removeEventListener("studentUpdated",A),window.removeEventListener("studentDeleted",A),window.removeEventListener("expenseAdded",A),window.removeEventListener("expenseUpdated",A),window.removeEventListener("expenseDeleted",A)}},[]);const u=()=>{switch(n.pathname){case"/":case"/dashboard":return"dashboard";case"/students":return"students";case"/student-details":return"students";case"/fees":return"fees";case"/expenses":return"expenses";case"/profile":return"profile";case"/settings":return"settings";case"/attendance":return"attendance";default:return"dashboard"}},[d,f]=K.useState(u()),p=A=>{const C=Math.floor((new Date-A)/1e3);if(C<60)return`${C} seconds ago`;const k=Math.floor(C/60);if(k<60)return`${k} minute${k!==1?"s":""} ago`;const H=Math.floor(k/60);if(H<24)return`${H} hour${H!==1?"s":""} ago`;const G=Math.floor(H/24);return`${G} day${G!==1?"s":""} ago`};K.useEffect(()=>{f(u())},[n]),K.useEffect(()=>{const A=D=>{const{message:C}=D.detail;r({show:!0,message:C}),setTimeout(()=>{r({show:!1,message:""})},3e3)};return window.addEventListener("showSuccess",A),()=>{window.removeEventListener("showSuccess",A)}},[]);const m=A=>{switch(f(A),A){case"dashboard":e("/dashboard");break;case"students":e("/students");break;case"fees":e("/fees");break;case"expenses":e("/expenses");break;case"attendance":e("/attendance");break;case"profile":e("/profile");break;case"settings":e("/settings");break;default:e("/dashboard")}},x=async()=>{try{await ug(An),localStorage.removeItem("isLoggedIn"),e("/login")}catch(A){console.error("Error signing out:",A)}},E=A=>{switch(A){case"dashboard":return"";case"students":return"";case"fees":return"";case"expenses":return"";case"attendance":return"";case"profile":return"";case"settings":return"";default:return""}},w=A=>{switch(A){case"dashboard":return"Dashboard";case"students":return"Students";case"fees":return"Fees";case"expenses":return"Expenses";case"attendance":return"Attendance";case"profile":return"Profile";case"settings":return"Settings";default:return"Home"}};return c.jsxs("div",{className:"app",children:[t.show&&c.jsx("div",{className:`notification ${t.type}`,children:t.message}),c.jsxs("div",{className:"sidebar",children:[["dashboard","students","fees","expenses","attendance","profile","settings"].map(A=>c.jsxs("button",{className:`nav-item ${d===A?"active":""}`,onClick:()=>m(A),"data-tooltip":w(A),children:[c.jsx("div",{className:"nav-icon-container",children:c.jsx("span",{className:"nav-icon",children:E(A)})}),c.jsx("span",{className:"nav-label",children:w(A)})]},A)),c.jsxs("button",{className:"logout-btn",onClick:x,"data-tooltip":"Logout",children:[c.jsx("div",{className:"logout-icon-container",children:c.jsx("span",{className:"logout-icon",children:""})}),c.jsx("span",{className:"logout-label",children:"Logout"})]})]}),c.jsx("div",{className:"main-content",children:c.jsxs(vT,{children:[c.jsx(Kr,{path:"/",element:c.jsx(Bs,{children:c.jsx(bx,{})})}),c.jsx(Kr,{path:"/dashboard",element:c.jsx(Bs,{children:c.jsx(bx,{})})}),c.jsx(Kr,{path:"/students",element:c.jsx(Bs,{children:c.jsx(DO,{})})}),c.jsx(Kr,{path:"/student-details",element:c.jsx(Bs,{children:c.jsx(kO,{})})}),c.jsx(Kr,{path:"/fees",element:c.jsx(Bs,{children:c.jsx(LO,{})})}),c.jsx(Kr,{path:"/expenses",element:c.jsx(Bs,{children:c.jsx(zS,{})})}),c.jsx(Kr,{path:"/expense-form",element:c.jsx(Bs,{children:c.jsx(PO,{})})}),c.jsx(Kr,{path:"/monthly-expenses",element:c.jsx(Bs,{children:c.jsx(zS,{})})}),c.jsx(Kr,{path:"/profile",element:c.jsx(Bs,{children:c.jsx(MO,{})})}),c.jsx(Kr,{path:"/settings",element:c.jsx(Bs,{children:c.jsx(OO,{})})}),c.jsx(Kr,{path:"/attendance",element:c.jsx(Bs,{children:c.jsx(FO,{})})}),c.jsx(Kr,{path:"/collection-trend",element:c.jsx(Bs,{children:c.jsx(UO,{})})}),c.jsx(Kr,{path:"/budget-management",element:c.jsx(Bs,{children:c.jsx(BO,{})})}),c.jsx(Kr,{path:"/expense-trend",element:c.jsx(Bs,{children:c.jsx(VO,{})})}),c.jsx(Kr,{path:"/feedback-support",element:c.jsx(Bs,{children:c.jsx(zO,{})})}),c.jsx(Kr,{path:"/subscribe",element:c.jsx(GO,{})}),c.jsx(Kr,{path:"/free-trial-continue",element:c.jsx(WO,{})}),c.jsx(Kr,{path:"/test-subscription",element:c.jsx($O,{})}),c.jsx(Kr,{path:"/test-subscription-creation",element:c.jsx(YO,{})}),c.jsx(Kr,{path:"/signup",element:c.jsx(a3,{})}),c.jsx(Kr,{path:"/login-new",element:c.jsx(o3,{})})]})}),c.jsxs("div",{className:"footer-summary",children:[c.jsxs("div",{className:"footer-left",children:[c.jsxs("span",{children:["Last updated: ",p(s)]}),c.jsxs("div",{className:"sync-status",children:[c.jsx("span",{className:"sync-indicator"}),c.jsx("span",{children:"Data synced"})]})]}),c.jsx("div",{className:"footer-right",children:c.jsx("span",{children:" 2025 Victory Point Academy"})})]})]})},XO=()=>{const n=eo(),e=ci(),[t,r]=K.useState(()=>localStorage.getItem("isLoggedIn")==="true"),[s,o]=K.useState(!0);return K.useEffect(()=>{localStorage.getItem("darkMode")==="true"&&document.documentElement.setAttribute("data-theme","dark")},[]),K.useEffect(()=>{const u=iv(An,d=>{d?(r(!0),localStorage.setItem("isLoggedIn","true"),localStorage.removeItem("freshLogin")):(r(!1),localStorage.removeItem("isLoggedIn")),o(!1)});return()=>u()},[]),s?c.jsx("div",{className:"app-loading",children:c.jsx("div",{className:"loading-spinner",children:"Loading..."})}):(t&&n.pathname==="/login"&&e("/dashboard"),t?c.jsx(KO,{}):n.pathname==="/signup"?c.jsx(a3,{}):n.pathname==="/login-new"?c.jsx(o3,{}):n.pathname!=="/login"?(e("/login"),c.jsx(HS,{})):c.jsx(HS,{}))};function QO(){return c.jsx(VT,{children:c.jsx(ZP,{children:c.jsx(XO,{})})})}T4.createRoot(document.getElementById("root")).render(c.jsx(b4.StrictMode,{children:c.jsx(QO,{})}));export{nr as _,JO as c,GS as g};
