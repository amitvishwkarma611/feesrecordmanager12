(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var oO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var J0={exports:{}},sf={};var jb;function T3(){if(jb)return sf;jb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,o){var u=null;if(o!==void 0&&(u=""+o),i.key!==void 0&&(u=""+i.key),"key"in i){o={};for(var d in i)d!=="key"&&(o[d]=i[d])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:u,ref:i!==void 0?i:null,props:o}}return sf.Fragment=e,sf.jsx=t,sf.jsxs=t,sf}var Cb;function j3(){return Cb||(Cb=1,J0.exports=T3()),J0.exports}var l=j3(),Z0={exports:{}},sn={};var Rb;function C3(){if(Rb)return sn;Rb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),_=Symbol.iterator;function x(J){return J===null||typeof J!="object"?null:(J=_&&J[_]||J["@@iterator"],typeof J=="function"?J:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function k(J,M,G){this.props=J,this.context=M,this.refs=C,this.updater=G||A}k.prototype.isReactComponent={},k.prototype.setState=function(J,M){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,M,"setState")},k.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function q(){}q.prototype=k.prototype;function $(J,M,G){this.props=J,this.context=M,this.refs=C,this.updater=G||A}var z=$.prototype=new q;z.constructor=$,R(z,k.prototype),z.isPureReactComponent=!0;var oe=Array.isArray;function ce(){}var H={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function I(J,M,G){var B=G.ref;return{$$typeof:n,type:J,key:M,ref:B!==void 0?B:null,props:G}}function V(J,M){return I(J.type,M,J.props)}function T(J){return typeof J=="object"&&J!==null&&J.$$typeof===n}function F(J){var M={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(G){return M[G]})}var L=/\/+/g;function ee(J,M){return typeof J=="object"&&J!==null&&J.key!=null?F(""+J.key):M.toString(36)}function ye(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(ce,ce):(J.status="pending",J.then(function(M){J.status==="pending"&&(J.status="fulfilled",J.value=M)},function(M){J.status==="pending"&&(J.status="rejected",J.reason=M)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function le(J,M,G,B,ae){var ge=typeof J;(ge==="undefined"||ge==="boolean")&&(J=null);var _e=!1;if(J===null)_e=!0;else switch(ge){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(J.$$typeof){case n:case e:_e=!0;break;case m:return _e=J._init,le(_e(J._payload),M,G,B,ae)}}if(_e)return ae=ae(J),_e=B===""?"."+ee(J,0):B,oe(ae)?(G="",_e!=null&&(G=_e.replace(L,"$&/")+"/"),le(ae,M,G,"",function(Q){return Q})):ae!=null&&(T(ae)&&(ae=V(ae,G+(ae.key==null||J&&J.key===ae.key?"":(""+ae.key).replace(L,"$&/")+"/")+_e)),M.push(ae)),1;_e=0;var Ve=B===""?".":B+":";if(oe(J))for(var Me=0;Me<J.length;Me++)B=J[Me],ge=Ve+ee(B,Me),_e+=le(B,M,G,ge,ae);else if(Me=x(J),typeof Me=="function")for(J=Me.call(J),Me=0;!(B=J.next()).done;)B=B.value,ge=Ve+ee(B,Me++),_e+=le(B,M,G,ge,ae);else if(ge==="object"){if(typeof J.then=="function")return le(ye(J),M,G,B,ae);throw M=String(J),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ve(J,M,G){if(J==null)return J;var B=[],ae=0;return le(J,B,"","",function(ge){return M.call(G,ge,ae++)}),B}function me(J){if(J._status===-1){var M=J._result;M=M(),M.then(function(G){(J._status===0||J._status===-1)&&(J._status=1,J._result=G)},function(G){(J._status===0||J._status===-1)&&(J._status=2,J._result=G)}),J._status===-1&&(J._status=0,J._result=M)}if(J._status===1)return J._result.default;throw J._result}var Le=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},xe={map:ve,forEach:function(J,M,G){ve(J,function(){M.apply(this,arguments)},G)},count:function(J){var M=0;return ve(J,function(){M++}),M},toArray:function(J){return ve(J,function(M){return M})||[]},only:function(J){if(!T(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return sn.Activity=w,sn.Children=xe,sn.Component=k,sn.Fragment=t,sn.Profiler=i,sn.PureComponent=$,sn.StrictMode=r,sn.Suspense=h,sn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,sn.__COMPILER_RUNTIME={__proto__:null,c:function(J){return H.H.useMemoCache(J)}},sn.cache=function(J){return function(){return J.apply(null,arguments)}},sn.cacheSignal=function(){return null},sn.cloneElement=function(J,M,G){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var B=R({},J.props),ae=J.key;if(M!=null)for(ge in M.key!==void 0&&(ae=""+M.key),M)!D.call(M,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&M.ref===void 0||(B[ge]=M[ge]);var ge=arguments.length-2;if(ge===1)B.children=G;else if(1<ge){for(var _e=Array(ge),Ve=0;Ve<ge;Ve++)_e[Ve]=arguments[Ve+2];B.children=_e}return I(J.type,ae,B)},sn.createContext=function(J){return J={$$typeof:u,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:o,_context:J},J},sn.createElement=function(J,M,G){var B,ae={},ge=null;if(M!=null)for(B in M.key!==void 0&&(ge=""+M.key),M)D.call(M,B)&&B!=="key"&&B!=="__self"&&B!=="__source"&&(ae[B]=M[B]);var _e=arguments.length-2;if(_e===1)ae.children=G;else if(1<_e){for(var Ve=Array(_e),Me=0;Me<_e;Me++)Ve[Me]=arguments[Me+2];ae.children=Ve}if(J&&J.defaultProps)for(B in _e=J.defaultProps,_e)ae[B]===void 0&&(ae[B]=_e[B]);return I(J,ge,ae)},sn.createRef=function(){return{current:null}},sn.forwardRef=function(J){return{$$typeof:d,render:J}},sn.isValidElement=T,sn.lazy=function(J){return{$$typeof:m,_payload:{_status:-1,_result:J},_init:me}},sn.memo=function(J,M){return{$$typeof:p,type:J,compare:M===void 0?null:M}},sn.startTransition=function(J){var M=H.T,G={};H.T=G;try{var B=J(),ae=H.S;ae!==null&&ae(G,B),typeof B=="object"&&B!==null&&typeof B.then=="function"&&B.then(ce,Le)}catch(ge){Le(ge)}finally{M!==null&&G.types!==null&&(M.types=G.types),H.T=M}},sn.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},sn.use=function(J){return H.H.use(J)},sn.useActionState=function(J,M,G){return H.H.useActionState(J,M,G)},sn.useCallback=function(J,M){return H.H.useCallback(J,M)},sn.useContext=function(J){return H.H.useContext(J)},sn.useDebugValue=function(){},sn.useDeferredValue=function(J,M){return H.H.useDeferredValue(J,M)},sn.useEffect=function(J,M){return H.H.useEffect(J,M)},sn.useEffectEvent=function(J){return H.H.useEffectEvent(J)},sn.useId=function(){return H.H.useId()},sn.useImperativeHandle=function(J,M,G){return H.H.useImperativeHandle(J,M,G)},sn.useInsertionEffect=function(J,M){return H.H.useInsertionEffect(J,M)},sn.useLayoutEffect=function(J,M){return H.H.useLayoutEffect(J,M)},sn.useMemo=function(J,M){return H.H.useMemo(J,M)},sn.useOptimistic=function(J,M){return H.H.useOptimistic(J,M)},sn.useReducer=function(J,M,G){return H.H.useReducer(J,M,G)},sn.useRef=function(J){return H.H.useRef(J)},sn.useState=function(J){return H.H.useState(J)},sn.useSyncExternalStore=function(J,M,G){return H.H.useSyncExternalStore(J,M,G)},sn.useTransition=function(){return H.H.useTransition()},sn.version="19.2.0",sn}var Ib;function B1(){return Ib||(Ib=1,Z0.exports=C3()),Z0.exports}var X=B1();const R3=JS(X);var ey={exports:{}},af={},ty={exports:{}},ny={};var kb;function I3(){return kb||(kb=1,(function(n){function e(le,ve){var me=le.length;le.push(ve);e:for(;0<me;){var Le=me-1>>>1,xe=le[Le];if(0<i(xe,ve))le[Le]=ve,le[me]=xe,me=Le;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var ve=le[0],me=le.pop();if(me!==ve){le[0]=me;e:for(var Le=0,xe=le.length,J=xe>>>1;Le<J;){var M=2*(Le+1)-1,G=le[M],B=M+1,ae=le[B];if(0>i(G,me))B<xe&&0>i(ae,G)?(le[Le]=ae,le[B]=me,Le=B):(le[Le]=G,le[M]=me,Le=M);else if(B<xe&&0>i(ae,me))le[Le]=ae,le[B]=me,Le=B;else break e}}return ve}function i(le,ve){var me=le.sortIndex-ve.sortIndex;return me!==0?me:le.id-ve.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();n.unstable_now=function(){return u.now()-d}}var h=[],p=[],m=1,w=null,_=3,x=!1,A=!1,R=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function z(le){for(var ve=t(p);ve!==null;){if(ve.callback===null)r(p);else if(ve.startTime<=le)r(p),ve.sortIndex=ve.expirationTime,e(h,ve);else break;ve=t(p)}}function oe(le){if(R=!1,z(le),!A)if(t(h)!==null)A=!0,ce||(ce=!0,F());else{var ve=t(p);ve!==null&&ye(oe,ve.startTime-le)}}var ce=!1,H=-1,D=5,I=-1;function V(){return C?!0:!(n.unstable_now()-I<D)}function T(){if(C=!1,ce){var le=n.unstable_now();I=le;var ve=!0;try{e:{A=!1,R&&(R=!1,q(H),H=-1),x=!0;var me=_;try{t:{for(z(le),w=t(h);w!==null&&!(w.expirationTime>le&&V());){var Le=w.callback;if(typeof Le=="function"){w.callback=null,_=w.priorityLevel;var xe=Le(w.expirationTime<=le);if(le=n.unstable_now(),typeof xe=="function"){w.callback=xe,z(le),ve=!0;break t}w===t(h)&&r(h),z(le)}else r(h);w=t(h)}if(w!==null)ve=!0;else{var J=t(p);J!==null&&ye(oe,J.startTime-le),ve=!1}}break e}finally{w=null,_=me,x=!1}ve=void 0}}finally{ve?F():ce=!1}}}var F;if(typeof $=="function")F=function(){$(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,ee=L.port2;L.port1.onmessage=T,F=function(){ee.postMessage(null)}}else F=function(){k(T,0)};function ye(le,ve){H=k(function(){le(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(le){switch(_){case 1:case 2:case 3:var ve=3;break;default:ve=_}var me=_;_=ve;try{return le()}finally{_=me}},n.unstable_requestPaint=function(){C=!0},n.unstable_runWithPriority=function(le,ve){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var me=_;_=le;try{return ve()}finally{_=me}},n.unstable_scheduleCallback=function(le,ve,me){var Le=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Le+me:Le):me=Le,le){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=me+xe,le={id:m++,callback:ve,priorityLevel:le,startTime:me,expirationTime:xe,sortIndex:-1},me>Le?(le.sortIndex=me,e(p,le),t(h)===null&&le===t(p)&&(R?(q(H),H=-1):R=!0,ye(oe,me-Le))):(le.sortIndex=xe,e(h,le),A||x||(A=!0,ce||(ce=!0,F()))),le},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(le){var ve=_;return function(){var me=_;_=ve;try{return le.apply(this,arguments)}finally{_=me}}}})(ny)),ny}var Db;function k3(){return Db||(Db=1,ty.exports=I3()),ty.exports}var ry={exports:{}},wi={};var Pb;function D3(){if(Pb)return wi;Pb=1;var n=B1();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)p+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,p,m){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:w==null?null:""+w,children:h,containerInfo:p,implementation:m}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return wi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,wi.createPortal=function(h,p){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(h,p,null,m)},wi.flushSync=function(h){var p=u.T,m=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=p,r.p=m,r.d.f()}},wi.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(h,p))},wi.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},wi.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var m=p.as,w=d(m,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;m==="style"?r.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:_,fetchPriority:x}):m==="script"&&r.d.X(h,{crossOrigin:w,integrity:_,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},wi.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var m=d(p.as,p.crossOrigin);r.d.M(h,{crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(h)},wi.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var m=p.as,w=d(m,p.crossOrigin);r.d.L(h,m,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},wi.preloadModule=function(h,p){if(typeof h=="string")if(p){var m=d(p.as,p.crossOrigin);r.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:m,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(h)},wi.requestFormReset=function(h){r.d.r(h)},wi.unstable_batchedUpdates=function(h,p){return h(p)},wi.useFormState=function(h,p,m){return u.H.useFormState(h,p,m)},wi.useFormStatus=function(){return u.H.useHostTransitionStatus()},wi.version="19.2.0",wi}var Lb;function P3(){if(Lb)return ry.exports;Lb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ry.exports=D3(),ry.exports}var Fb;function L3(){if(Fb)return af;Fb=1;var n=k3(),e=B1(),t=P3();function r(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,c=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(c=a.return),s=a.return;while(s)}return a.tag===3?c:null}function u(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function d(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function h(s){if(o(s)!==s)throw Error(r(188))}function p(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(r(188));return a!==s?null:s}for(var c=s,f=a;;){var v=c.return;if(v===null)break;var S=v.alternate;if(S===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===c)return h(v),s;if(S===f)return h(v),a;S=S.sibling}throw Error(r(188))}if(c.return!==f.return)c=v,f=S;else{for(var O=!1,ne=v.child;ne;){if(ne===c){O=!0,c=v,f=S;break}if(ne===f){O=!0,f=v,c=S;break}ne=ne.sibling}if(!O){for(ne=S.child;ne;){if(ne===c){O=!0,c=S,f=v;break}if(ne===f){O=!0,f=S,c=v;break}ne=ne.sibling}if(!O)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:a}function m(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=m(s),a!==null)return a;s=s.sibling}return null}var w=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),$=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=T&&s[T]||s["@@iterator"],typeof s=="function"?s:null)}var L=Symbol.for("react.client.reference");function ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case oe:return"Suspense";case ce:return"SuspenseList";case I:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case A:return"Portal";case $:return s.displayName||"Context";case q:return(s._context.displayName||"Context")+".Consumer";case z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return a=s.displayName||null,a!==null?a:ee(s.type)||"Memo";case D:a=s._payload,s=s._init;try{return ee(s(a))}catch{}}return null}var ye=Array.isArray,le=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Le=[],xe=-1;function J(s){return{current:s}}function M(s){0>xe||(s.current=Le[xe],Le[xe]=null,xe--)}function G(s,a){xe++,Le[xe]=s.current,s.current=a}var B=J(null),ae=J(null),ge=J(null),_e=J(null);function Ve(s,a){switch(G(ge,a),G(ae,s),G(B,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?Q5(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=Q5(a),s=J5(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}M(B),G(B,s)}function Me(){M(B),M(ae),M(ge)}function Q(s){s.memoizedState!==null&&G(_e,s);var a=B.current,c=J5(a,s.type);a!==c&&(G(ae,s),G(B,c))}function Te(s){ae.current===s&&(M(B),M(ae)),_e.current===s&&(M(_e),ef._currentValue=me)}var ue,be;function Ie(s){if(ue===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);ue=a&&a[1]||"",be=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+s+be}var Y=!1;function pe(s,a){if(!s||Y)return"";Y=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(Ze){var Ke=Ze}Reflect.construct(s,[],ht)}else{try{ht.call()}catch(Ze){Ke=Ze}s.call(ht.prototype)}}else{try{throw Error()}catch(Ze){Ke=Ze}(ht=s())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(Ze){if(Ze&&Ke&&typeof Ze.stack=="string")return[Ze.stack,Ke.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=f.DetermineComponentFrameRoot(),O=S[0],ne=S[1];if(O&&ne){var Se=O.split(`
`),We=ne.split(`
`);for(v=f=0;f<Se.length&&!Se[f].includes("DetermineComponentFrameRoot");)f++;for(;v<We.length&&!We[v].includes("DetermineComponentFrameRoot");)v++;if(f===Se.length||v===We.length)for(f=Se.length-1,v=We.length-1;1<=f&&0<=v&&Se[f]!==We[v];)v--;for(;1<=f&&0<=v;f--,v--)if(Se[f]!==We[v]){if(f!==1||v!==1)do if(f--,v--,0>v||Se[f]!==We[v]){var lt=`
`+Se[f].replace(" at new "," at ");return s.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",s.displayName)),lt}while(1<=f&&0<=v);break}}}finally{Y=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Ie(c):""}function Ne(s,a){switch(s.tag){case 26:case 27:case 5:return Ie(s.type);case 16:return Ie("Lazy");case 13:return s.child!==a&&a!==null?Ie("Suspense Fallback"):Ie("Suspense");case 19:return Ie("SuspenseList");case 0:case 15:return pe(s.type,!1);case 11:return pe(s.type.render,!1);case 1:return pe(s.type,!0);case 31:return Ie("Activity");default:return""}}function je(s){try{var a="",c=null;do a+=Ne(s,c),c=s,s=s.return;while(s);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var we=Object.prototype.hasOwnProperty,Ce=n.unstable_scheduleCallback,Je=n.unstable_cancelCallback,ut=n.unstable_shouldYield,nt=n.unstable_requestPaint,ke=n.unstable_now,st=n.unstable_getCurrentPriorityLevel,Xe=n.unstable_ImmediatePriority,Qe=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,Oe=n.unstable_LowPriority,De=n.unstable_IdlePriority,Be=n.log,it=n.unstable_setDisableYieldValue,gt=null,et=null;function bt(s){if(typeof Be=="function"&&it(s),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(gt,s)}catch{}}var St=Math.clz32?Math.clz32:Ot,Nt=Math.log,un=Math.LN2;function Ot(s){return s>>>=0,s===0?32:31-(Nt(s)/un|0)|0}var Vt=256,Cn=262144,Pt=4194304;function It(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function nn(s,a,c){var f=s.pendingLanes;if(f===0)return 0;var v=0,S=s.suspendedLanes,O=s.pingedLanes;s=s.warmLanes;var ne=f&134217727;return ne!==0?(f=ne&~S,f!==0?v=It(f):(O&=ne,O!==0?v=It(O):c||(c=ne&~s,c!==0&&(v=It(c))))):(ne=f&~S,ne!==0?v=It(ne):O!==0?v=It(O):c||(c=f&~s,c!==0&&(v=It(c)))),v===0?0:a!==0&&a!==v&&(a&S)===0&&(S=v&-v,c=a&-a,S>=c||S===32&&(c&4194048)!==0)?a:v}function ws(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function us(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qi(){var s=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),s}function es(s){for(var a=[],c=0;31>c;c++)a.push(s);return a}function Ut(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ma(s,a,c,f,v,S){var O=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var ne=s.entanglements,Se=s.expirationTimes,We=s.hiddenUpdates;for(c=O&~c;0<c;){var lt=31-St(c),ht=1<<lt;ne[lt]=0,Se[lt]=-1;var Ke=We[lt];if(Ke!==null)for(We[lt]=null,lt=0;lt<Ke.length;lt++){var Ze=Ke[lt];Ze!==null&&(Ze.lane&=-536870913)}c&=~ht}f!==0&&Qs(s,f,0),S!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=S&~(O&~a))}function Qs(s,a,c){s.pendingLanes|=a,s.suspendedLanes&=~a;var f=31-St(a);s.entangledLanes|=a,s.entanglements[f]=s.entanglements[f]|1073741824|c&261930}function Ms(s,a){var c=s.entangledLanes|=a;for(s=s.entanglements;c;){var f=31-St(c),v=1<<f;v&a|s[f]&a&&(s[f]|=a),c&=~v}}function Os(s,a){var c=a&-a;return c=(c&42)!==0?1:Kn(c),(c&(s.suspendedLanes|a))!==0?0:c}function Kn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function sr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zr(){var s=ve.p;return s!==0?s:(s=window.event,s===void 0?32:wb(s.type))}function Ss(s,a){var c=ve.p;try{return ve.p=s,a()}finally{ve.p=c}}var ds=Math.random().toString(36).slice(2),Bn="__reactFiber$"+ds,Jn="__reactProps$"+ds,qr="__reactContainer$"+ds,Us="__reactEvents$"+ds,pi="__reactListeners$"+ds,ka="__reactHandles$"+ds,Ri="__reactResources$"+ds,Bs="__reactMarker$"+ds;function ga(s){delete s[Bn],delete s[Jn],delete s[Us],delete s[pi],delete s[ka]}function Js(s){var a=s[Bn];if(a)return a;for(var c=s.parentNode;c;){if(a=c[qr]||c[Bn]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(s=ib(s);s!==null;){if(c=s[Bn])return c;s=ib(s)}return a}s=c,c=s.parentNode}return null}function _s(s){if(s=s[Bn]||s[qr]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Zs(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(r(33))}function mi(s){var a=s[Ri];return a||(a=s[Ri]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function yr(s){s[Bs]=!0}var ko=new Set,Vs={};function gi(s,a){Ii(s,a),Ii(s+"Capture",a)}function Ii(s,a){for(Vs[s]=a,s=0;s<a.length;s++)ko.add(a[s])}var ro=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Do={},Po={};function yl(s){return we.call(Po,s)?!0:we.call(Do,s)?!1:ro.test(s)?Po[s]=!0:(Do[s]=!0,!1)}function ei(s,a,c){if(yl(a))if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+c)}}function hs(s,a,c){if(c===null)s.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+c)}}function Nr(s,a,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(a,c,""+f)}}function yn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ya(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function yi(s,a,c){var f=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,S=f.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return v.call(this)},set:function(O){c=""+O,S.call(this,O)}}),Object.defineProperty(s,a,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(O){c=""+O},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function _n(s){if(!s._valueTracker){var a=ya(s)?"checked":"value";s._valueTracker=yi(s,a,""+s[a])}}function Da(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return s&&(f=ya(s)?s.checked?"true":"false":s.value),s=f,s!==c?(a.setValue(s),!0):!1}function Dr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var hr=/[\n"\\]/g;function Ar(s){return s.replace(hr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function so(s,a,c,f,v,S,O,ne){s.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?s.type=O:s.removeAttribute("type"),a!=null?O==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+yn(a)):s.value!==""+yn(a)&&(s.value=""+yn(a)):O!=="submit"&&O!=="reset"||s.removeAttribute("value"),a!=null?vl(s,O,yn(a)):c!=null?vl(s,O,yn(c)):f!=null&&s.removeAttribute("value"),v==null&&S!=null&&(s.defaultChecked=!!S),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),ne!=null&&typeof ne!="function"&&typeof ne!="symbol"&&typeof ne!="boolean"?s.name=""+yn(ne):s.removeAttribute("name")}function cc(s,a,c,f,v,S,O,ne){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),a!=null||c!=null){if(!(S!=="submit"&&S!=="reset"||a!=null)){_n(s);return}c=c!=null?""+yn(c):"",a=a!=null?""+yn(a):c,ne||a===s.value||(s.value=a),s.defaultValue=a}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=ne?s.checked:!!f,s.defaultChecked=!!f,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(s.name=O),_n(s)}function vl(s,a,c){a==="number"&&Dr(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Es(s,a,c,f){if(s=s.options,a){a={};for(var v=0;v<c.length;v++)a["$"+c[v]]=!0;for(c=0;c<s.length;c++)v=a.hasOwnProperty("$"+s[c].value),s[c].selected!==v&&(s[c].selected=v),v&&f&&(s[c].defaultSelected=!0)}else{for(c=""+yn(c),a=null,v=0;v<s.length;v++){if(s[v].value===c){s[v].selected=!0,f&&(s[v].defaultSelected=!0);return}a!==null||s[v].disabled||(a=s[v])}a!==null&&(a.selected=!0)}}function bl(s,a,c){if(a!=null&&(a=""+yn(a),a!==s.value&&(s.value=a),c==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=c!=null?""+yn(c):""}function va(s,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(ye(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=yn(a),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f),_n(s)}function ts(s,a){if(a){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=a;return}}s.textContent=a}var Pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xl(s,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":f?s.setProperty(a,c):typeof c!="number"||c===0||Pa.has(a)?a==="float"?s.cssFloat=c:s[a]=(""+c).trim():s[a]=c+"px"}function wl(s,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var v in a)f=a[v],a.hasOwnProperty(v)&&c[v]!==f&&xl(s,v,f)}else for(var S in a)a.hasOwnProperty(S)&&xl(s,S,a[S])}function Lo(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ba=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zs(s){return ba.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ki(){}var xa=null;function qs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var La=null,zt=null;function io(s){var a=_s(s);if(a&&(s=a.stateNode)){var c=s[Jn]||null;e:switch(s=a.stateNode,a.type){case"input":if(so(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ar(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==s&&f.form===s.form){var v=f[Jn]||null;if(!v)throw Error(r(90));so(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===s.form&&Da(f)}break e;case"textarea":bl(s,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Es(s,!!c.multiple,a,!1)}}}var Mo=!1;function Fa(s,a,c){if(Mo)return s(a,c);Mo=!0;try{var f=s(a);return f}finally{if(Mo=!1,(La!==null||zt!==null)&&(Pp(),La&&(a=La,s=zt,zt=La=null,io(a),s)))for(a=0;a<s.length;a++)io(s[a])}}function ns(s,a){var c=s.stateNode;if(c===null)return null;var f=c[Jn]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Hr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ao=!1;if(Hr)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){ao=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{ao=!1}var ti=null,oo=null,Di=null;function Sl(){if(Di)return Di;var s,a=oo,c=a.length,f,v="value"in ti?ti.value:ti.textContent,S=v.length;for(s=0;s<c&&a[s]===v[s];s++);var O=c-s;for(f=1;f<=O&&a[c-f]===v[S-f];f++);return Di=v.slice(s,1<f?1-f:void 0)}function ni(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function wa(){return!0}function ri(){return!1}function Pr(s){function a(c,f,v,S,O){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=S,this.target=O,this.currentTarget=null;for(var ne in s)s.hasOwnProperty(ne)&&(c=s[ne],this[ne]=c?c(S):S[ne]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?wa:ri,this.isPropagationStopped=ri,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=wa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=wa)},persist:function(){},isPersistent:wa}),a}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=Pr(Hi),$i=w({},Hi,{view:0,detail:0}),Ma=Pr($i),Gi,Wi,vi,lo=w({},$i,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ht,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vi&&(vi&&s.type==="mousemove"?(Gi=s.screenX-vi.screenX,Wi=s.screenY-vi.screenY):Wi=Gi=0,vi=s),Gi)},movementY:function(s){return"movementY"in s?s.movementY:Wi}}),Oo=Pr(lo),si=w({},lo,{dataTransfer:0}),Yi=Pr(si),_l=w({},$i,{relatedTarget:0}),Pi=Pr(_l),Uo=w({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),E=Pr(Uo),W=w({},Hi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),he=Pr(W),Ee=w({},Hi,{data:0}),Fe=Pr(Ee),ot={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},At={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kt(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=At[s])?!!a[s]:!1}function Ht(){return kt}var Bt=w({},$i,{key:function(s){if(s.key){var a=ot[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=ni(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?pt[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ht,charCode:function(s){return s.type==="keypress"?ni(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ni(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),vn=Pr(Bt),ir=w({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xn=Pr(ir),y=w({},$i,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ht}),j=Pr(y),U=w({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),se=Pr(U),ze=w({},lo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ye=Pr(ze),xt=w({},Hi,{newState:0,oldState:0}),Jt=Pr(xt),ar=[9,13,27,32],mn=Hr&&"CompositionEvent"in window,zn=null;Hr&&"documentMode"in document&&(zn=document.documentMode);var ps=Hr&&"TextEvent"in window&&!zn,Ns=Hr&&(!mn||zn&&8<zn&&11>=zn),Zn=" ",As=!1;function Li(s,a){switch(s){case"keyup":return ar.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oa(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ua=!1;function ii(s,a){switch(s){case"compositionend":return Oa(a);case"keypress":return a.which!==32?null:(As=!0,Zn);case"textInput":return s=a.data,s===Zn&&As?null:s;default:return null}}function co(s,a){if(Ua)return s==="compositionend"||!mn&&Li(s,a)?(s=Sl(),Di=oo=ti=null,Ua=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Ns&&a.locale!=="ko"?null:a.data;default:return null}}var uc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vu(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!uc[s.type]:a==="textarea"}function Fi(s,a,c,f){La?zt?zt.push(f):zt=[f]:La=f,a=Vp(a,"onChange"),0<a.length&&(c=new fs("onChange","change",null,c,f),s.push({event:c,listeners:a}))}var Sa=null,uo=null;function bu(s){$5(s,0)}function _a(s){var a=Zs(s);if(Da(a))return s}function Bo(s,a){if(s==="change")return a}var bi=!1;if(Hr){var ai;if(Hr){var Ba="oninput"in document;if(!Ba){var Va=document.createElement("div");Va.setAttribute("oninput","return;"),Ba=typeof Va.oninput=="function"}ai=Ba}else ai=!1;bi=ai&&(!document.documentMode||9<document.documentMode)}function ho(){Sa&&(Sa.detachEvent("onpropertychange",dc),uo=Sa=null)}function dc(s){if(s.propertyName==="value"&&_a(uo)){var a=[];Fi(a,uo,s,qs(s)),Fa(bu,a)}}function hc(s,a,c){s==="focusin"?(ho(),Sa=a,uo=c,Sa.attachEvent("onpropertychange",dc)):s==="focusout"&&ho()}function Lr(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return _a(uo)}function ud(s,a){if(s==="click")return _a(a)}function za(s,a){if(s==="input"||s==="change")return _a(a)}function qa(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ts=typeof Object.is=="function"?Object.is:qa;function fo(s,a){if(Ts(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var c=Object.keys(s),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!we.call(a,v)||!Ts(s[v],a[v]))return!1}return!0}function fc(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function pc(s,a){var c=fc(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=a&&f>=a)return{node:c,offset:a-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=fc(c)}}function po(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?po(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function mo(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Dr(s.document);a instanceof s.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)s=a.contentWindow;else break;a=Dr(s.document)}return a}function Ha(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var El=Hr&&"documentMode"in document&&11>=document.documentMode,Mi=null,go=null,Hs=null,Ki=!1;function On(s,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ki||Mi==null||Mi!==Dr(f)||(f=Mi,"selectionStart"in f&&Ha(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Hs&&fo(Hs,f)||(Hs=f,f=Vp(go,"onSelect"),0<f.length&&(a=new fs("onSelect","select",null,a,c),s.push({event:a,listeners:f}),a.target=Mi)))}function Rn(s,a){var c={};return c[s.toLowerCase()]=a.toLowerCase(),c["Webkit"+s]="webkit"+a,c["Moz"+s]="moz"+a,c}var or={animationend:Rn("Animation","AnimationEnd"),animationiteration:Rn("Animation","AnimationIteration"),animationstart:Rn("Animation","AnimationStart"),transitionrun:Rn("Transition","TransitionRun"),transitionstart:Rn("Transition","TransitionStart"),transitioncancel:Rn("Transition","TransitionCancel"),transitionend:Rn("Transition","TransitionEnd")},Fr={},$a={};Hr&&($a=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function Ea(s){if(Fr[s])return Fr[s];if(!or[s])return s;var a=or[s],c;for(c in a)if(a.hasOwnProperty(c)&&c in $a)return Fr[s]=a[c];return s}var Nl=Ea("animationend"),xu=Ea("animationiteration"),_h=Ea("animationstart"),up=Ea("transitionrun"),dp=Ea("transitionstart"),hp=Ea("transitioncancel"),Eh=Ea("transitionend"),Nh=new Map,Al="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Al.push("scrollEnd");function Xi(s,a){Nh.set(s,a),gi(a,[s])}var wu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Oi=[],Tl=0,dd=0;function Su(){for(var s=Tl,a=dd=Tl=0;a<s;){var c=Oi[a];Oi[a++]=null;var f=Oi[a];Oi[a++]=null;var v=Oi[a];Oi[a++]=null;var S=Oi[a];if(Oi[a++]=null,f!==null&&v!==null){var O=f.pending;O===null?v.next=v:(v.next=O.next,O.next=v),f.pending=v}S!==0&&Eu(c,v,S)}}function _u(s,a,c,f){Oi[Tl++]=s,Oi[Tl++]=a,Oi[Tl++]=c,Oi[Tl++]=f,dd|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function hd(s,a,c,f){return _u(s,a,c,f),$s(s)}function yo(s,a){return _u(s,null,null,a),$s(s)}function Eu(s,a,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var v=!1,S=s.return;S!==null;)S.childLanes|=c,f=S.alternate,f!==null&&(f.childLanes|=c),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(v=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,v&&a!==null&&(v=31-St(c),s=S.hiddenUpdates,f=s[v],f===null?s[v]=[a]:f.push(a),a.lane=c|536870912),S):null}function $s(s){if(50<Wh)throw Wh=0,S0=null,Error(r(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var js={};function fd(s,a,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(s,a,c,f){return new fd(s,a,c,f)}function pd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qi(s,a){var c=s.alternate;return c===null?(c=Gs(s.tag,a,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=a,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,a=s.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Nu(s,a){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,a=c.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function mc(s,a,c,f,v,S){var O=0;if(f=s,typeof s=="function")pd(s)&&(O=1);else if(typeof s=="string")O=m3(s,c,B.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case I:return s=Gs(31,c,a,v),s.elementType=I,s.lanes=S,s;case R:return Vo(c.children,v,S,a);case C:O=8,v|=24;break;case k:return s=Gs(12,c,a,v|2),s.elementType=k,s.lanes=S,s;case oe:return s=Gs(13,c,a,v),s.elementType=oe,s.lanes=S,s;case ce:return s=Gs(19,c,a,v),s.elementType=ce,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case $:O=10;break e;case q:O=9;break e;case z:O=11;break e;case H:O=14;break e;case D:O=16,f=null;break e}O=29,c=Error(r(130,s===null?"null":typeof s,"")),f=null}return a=Gs(O,c,a,v),a.elementType=s,a.type=f,a.lanes=S,a}function Vo(s,a,c,f){return s=Gs(7,s,f,a),s.lanes=c,s}function Au(s,a,c){return s=Gs(6,s,null,a),s.lanes=c,s}function md(s){var a=Gs(18,null,null,0);return a.stateNode=s,a}function gc(s,a,c){return a=Gs(4,s.children!==null?s.children:[],s.key,a),a.lanes=c,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var gd=new WeakMap;function Ji(s,a){if(typeof s=="object"&&s!==null){var c=gd.get(s);return c!==void 0?c:(a={value:s,source:a,stack:je(a)},gd.set(s,a),a)}return{value:s,source:a,stack:je(a)}}var yc=[],jl=0,yd=null,Tu=0,Zi=[],ea=0,zo=null,ta=1,na="";function Ui(s,a){yc[jl++]=Tu,yc[jl++]=yd,yd=s,Tu=a}function fp(s,a,c){Zi[ea++]=ta,Zi[ea++]=na,Zi[ea++]=zo,zo=s;var f=ta;s=na;var v=32-St(f)-1;f&=~(1<<v),c+=1;var S=32-St(a)+v;if(30<S){var O=v-v%5;S=(f&(1<<O)-1).toString(32),f>>=O,v-=O,ta=1<<32-St(a)+v|c<<v|f,na=S+s}else ta=1<<S|c<<v|f,na=s}function Ah(s){s.return!==null&&(Ui(s,1),fp(s,1,0))}function vd(s){for(;s===yd;)yd=yc[--jl],yc[jl]=null,Tu=yc[--jl],yc[jl]=null;for(;s===zo;)zo=Zi[--ea],Zi[ea]=null,na=Zi[--ea],Zi[ea]=null,ta=Zi[--ea],Zi[ea]=null}function pp(s,a){Zi[ea++]=ta,Zi[ea++]=na,Zi[ea++]=zo,ta=a.id,na=a.overflow,zo=s}var Cs=null,fr=null,xn=!1,oi=null,Tr=!1,Na=Error(r(519));function qo(s){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vc(Ji(a,s)),Na}function Th(s){var a=s.stateNode,c=s.type,f=s.memoizedProps;switch(a[Bn]=s,a[Jn]=f,c){case"dialog":Sn("cancel",a),Sn("close",a);break;case"iframe":case"object":case"embed":Sn("load",a);break;case"video":case"audio":for(c=0;c<Kh.length;c++)Sn(Kh[c],a);break;case"source":Sn("error",a);break;case"img":case"image":case"link":Sn("error",a),Sn("load",a);break;case"details":Sn("toggle",a);break;case"input":Sn("invalid",a),cc(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Sn("invalid",a);break;case"textarea":Sn("invalid",a),va(a,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||K5(a.textContent,c)?(f.popover!=null&&(Sn("beforetoggle",a),Sn("toggle",a)),f.onScroll!=null&&Sn("scroll",a),f.onScrollEnd!=null&&Sn("scrollend",a),f.onClick!=null&&(a.onclick=ki),a=!0):a=!1,a||qo(s,!0)}function vo(s){for(Cs=s.return;Cs;)switch(Cs.tag){case 5:case 31:case 13:Tr=!1;return;case 27:case 3:Tr=!0;return;default:Cs=Cs.return}}function Rs(s){if(s!==Cs)return!1;if(!xn)return vo(s),xn=!0,!1;var a=s.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||M0(s.type,s.memoizedProps)),c=!c),c&&fr&&qo(s),vo(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));fr=sb(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));fr=sb(s)}else a===27?(a=fr,kc(s.type)?(s=z0,z0=null,fr=s):fr=a):fr=Cs?Ka(s.stateNode.nextSibling):null;return!0}function Cl(){fr=Cs=null,xn=!1}function jh(){var s=oi;return s!==null&&(la===null?la=s:la.push.apply(la,s),oi=null),s}function vc(s){oi===null?oi=[s]:oi.push(s)}var bd=J(null),Ho=null,Ga=null;function $o(s,a,c){G(bd,a._currentValue),a._currentValue=c}function ra(s){s._currentValue=bd.current,M(bd)}function bc(s,a,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===c)break;s=s.return}}function Rl(s,a,c,f){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var S=v.dependencies;if(S!==null){var O=v.child;S=S.firstContext;e:for(;S!==null;){var ne=S;S=v;for(var Se=0;Se<a.length;Se++)if(ne.context===a[Se]){S.lanes|=c,ne=S.alternate,ne!==null&&(ne.lanes|=c),bc(S.return,c,s),f||(O=null);break e}S=ne.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(r(341));O.lanes|=c,S=O.alternate,S!==null&&(S.lanes|=c),bc(O,c,s),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===s){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Go(s,a,c,f){s=null;for(var v=a,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var ne=v.type;Ts(v.pendingProps.value,O.value)||(s!==null?s.push(ne):s=[ne])}}else if(v===_e.current){if(O=v.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(ef):s=[ef])}v=v.return}s!==null&&Rl(a,s,c,f),a.flags|=262144}function xd(s){for(s=s.firstContext;s!==null;){if(!Ts(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Wo(s){Ho=s,Ga=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Is(s){return mp(Ho,s)}function wd(s,a){return Ho===null&&Wo(s),mp(s,a)}function mp(s,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Ga===null){if(s===null)throw Error(r(308));Ga=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Ga=Ga.next=a;return c}var Vg=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){a.aborted=!0,s.forEach(function(c){return c()})}},zg=n.unstable_scheduleCallback,qg=n.unstable_NormalPriority,Mr={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xc(){return{controller:new Vg,data:new Map,refCount:0}}function ju(s){s.refCount--,s.refCount===0&&zg(qg,function(){s.controller.abort()})}var Cu=null,Sd=0,g=0,b=null;function N(s,a){if(Cu===null){var c=Cu=[];Sd=0,g=j0(),b={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Sd++,a.then(P,P),a}function P(){if(--Sd===0&&Cu!==null){b!==null&&(b.status="fulfilled");var s=Cu;Cu=null,g=0,b=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function K(s,a){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return s.then(function(){f.status="fulfilled",f.value=a;for(var v=0;v<c.length;v++)(0,c[v])(a)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var Z=le.S;le.S=function(s,a){b5=ke(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&N(s,a),Z!==null&&Z(s,a)};var te=J(null);function re(){var s=te.current;return s!==null?s:mr.pooledCache}function ie(s,a){a===null?G(te,te.current):G(te,a.pool)}function fe(){var s=re();return s===null?null:{parent:Mr._currentValue,pool:s}}var Ae=Error(r(460)),$e=Error(r(474)),de=Error(r(542)),Pe={then:function(){}};function qe(s){return s=s.status,s==="fulfilled"||s==="rejected"}function at(s,a,c){switch(c=s[c],c===void 0?s.push(a):c!==a&&(a.then(ki,ki),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,vt(s),s;default:if(typeof a.status=="string")a.then(ki,ki);else{if(s=mr,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=a,s.status="pending",s.then(function(f){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=f}},function(f){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,vt(s),s}throw rt=a,Ae}}function He(s){try{var a=s._init;return a(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(rt=c,Ae):c}}var rt=null;function ct(){if(rt===null)throw Error(r(459));var s=rt;return rt=null,s}function vt(s){if(s===Ae||s===de)throw Error(r(483))}var ft=null,Dt=0;function _t(s){var a=Dt;return Dt+=1,ft===null&&(ft=[]),at(ft,s,a)}function Zt(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function jt(s,a){throw a.$$typeof===_?Error(r(525)):(s=Object.prototype.toString.call(a),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function bn(s){function a(Ue,Re){if(s){var Ge=Ue.deletions;Ge===null?(Ue.deletions=[Re],Ue.flags|=16):Ge.push(Re)}}function c(Ue,Re){if(!s)return null;for(;Re!==null;)a(Ue,Re),Re=Re.sibling;return null}function f(Ue){for(var Re=new Map;Ue!==null;)Ue.key!==null?Re.set(Ue.key,Ue):Re.set(Ue.index,Ue),Ue=Ue.sibling;return Re}function v(Ue,Re){return Ue=Qi(Ue,Re),Ue.index=0,Ue.sibling=null,Ue}function S(Ue,Re,Ge){return Ue.index=Ge,s?(Ge=Ue.alternate,Ge!==null?(Ge=Ge.index,Ge<Re?(Ue.flags|=67108866,Re):Ge):(Ue.flags|=67108866,Re)):(Ue.flags|=1048576,Re)}function O(Ue){return s&&Ue.alternate===null&&(Ue.flags|=67108866),Ue}function ne(Ue,Re,Ge,dt){return Re===null||Re.tag!==6?(Re=Au(Ge,Ue.mode,dt),Re.return=Ue,Re):(Re=v(Re,Ge),Re.return=Ue,Re)}function Se(Ue,Re,Ge,dt){var Gt=Ge.type;return Gt===R?lt(Ue,Re,Ge.props.children,dt,Ge.key):Re!==null&&(Re.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===D&&He(Gt)===Re.type)?(Re=v(Re,Ge.props),Zt(Re,Ge),Re.return=Ue,Re):(Re=mc(Ge.type,Ge.key,Ge.props,null,Ue.mode,dt),Zt(Re,Ge),Re.return=Ue,Re)}function We(Ue,Re,Ge,dt){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==Ge.containerInfo||Re.stateNode.implementation!==Ge.implementation?(Re=gc(Ge,Ue.mode,dt),Re.return=Ue,Re):(Re=v(Re,Ge.children||[]),Re.return=Ue,Re)}function lt(Ue,Re,Ge,dt,Gt){return Re===null||Re.tag!==7?(Re=Vo(Ge,Ue.mode,dt,Gt),Re.return=Ue,Re):(Re=v(Re,Ge),Re.return=Ue,Re)}function ht(Ue,Re,Ge){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Re=Au(""+Re,Ue.mode,Ge),Re.return=Ue,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case x:return Ge=mc(Re.type,Re.key,Re.props,null,Ue.mode,Ge),Zt(Ge,Re),Ge.return=Ue,Ge;case A:return Re=gc(Re,Ue.mode,Ge),Re.return=Ue,Re;case D:return Re=He(Re),ht(Ue,Re,Ge)}if(ye(Re)||F(Re))return Re=Vo(Re,Ue.mode,Ge,null),Re.return=Ue,Re;if(typeof Re.then=="function")return ht(Ue,_t(Re),Ge);if(Re.$$typeof===$)return ht(Ue,wd(Ue,Re),Ge);jt(Ue,Re)}return null}function Ke(Ue,Re,Ge,dt){var Gt=Re!==null?Re.key:null;if(typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint")return Gt!==null?null:ne(Ue,Re,""+Ge,dt);if(typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case x:return Ge.key===Gt?Se(Ue,Re,Ge,dt):null;case A:return Ge.key===Gt?We(Ue,Re,Ge,dt):null;case D:return Ge=He(Ge),Ke(Ue,Re,Ge,dt)}if(ye(Ge)||F(Ge))return Gt!==null?null:lt(Ue,Re,Ge,dt,null);if(typeof Ge.then=="function")return Ke(Ue,Re,_t(Ge),dt);if(Ge.$$typeof===$)return Ke(Ue,Re,wd(Ue,Ge),dt);jt(Ue,Ge)}return null}function Ze(Ue,Re,Ge,dt,Gt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return Ue=Ue.get(Ge)||null,ne(Re,Ue,""+dt,Gt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case x:return Ue=Ue.get(dt.key===null?Ge:dt.key)||null,Se(Re,Ue,dt,Gt);case A:return Ue=Ue.get(dt.key===null?Ge:dt.key)||null,We(Re,Ue,dt,Gt);case D:return dt=He(dt),Ze(Ue,Re,Ge,dt,Gt)}if(ye(dt)||F(dt))return Ue=Ue.get(Ge)||null,lt(Re,Ue,dt,Gt,null);if(typeof dt.then=="function")return Ze(Ue,Re,Ge,_t(dt),Gt);if(dt.$$typeof===$)return Ze(Ue,Re,Ge,wd(Re,dt),Gt);jt(Re,dt)}return null}function Ct(Ue,Re,Ge,dt){for(var Gt=null,qn=null,Ft=Re,hn=Re=0,Nn=null;Ft!==null&&hn<Ge.length;hn++){Ft.index>hn?(Nn=Ft,Ft=null):Nn=Ft.sibling;var Hn=Ke(Ue,Ft,Ge[hn],dt);if(Hn===null){Ft===null&&(Ft=Nn);break}s&&Ft&&Hn.alternate===null&&a(Ue,Ft),Re=S(Hn,Re,hn),qn===null?Gt=Hn:qn.sibling=Hn,qn=Hn,Ft=Nn}if(hn===Ge.length)return c(Ue,Ft),xn&&Ui(Ue,hn),Gt;if(Ft===null){for(;hn<Ge.length;hn++)Ft=ht(Ue,Ge[hn],dt),Ft!==null&&(Re=S(Ft,Re,hn),qn===null?Gt=Ft:qn.sibling=Ft,qn=Ft);return xn&&Ui(Ue,hn),Gt}for(Ft=f(Ft);hn<Ge.length;hn++)Nn=Ze(Ft,Ue,hn,Ge[hn],dt),Nn!==null&&(s&&Nn.alternate!==null&&Ft.delete(Nn.key===null?hn:Nn.key),Re=S(Nn,Re,hn),qn===null?Gt=Nn:qn.sibling=Nn,qn=Nn);return s&&Ft.forEach(function(Mc){return a(Ue,Mc)}),xn&&Ui(Ue,hn),Gt}function Kt(Ue,Re,Ge,dt){if(Ge==null)throw Error(r(151));for(var Gt=null,qn=null,Ft=Re,hn=Re=0,Nn=null,Hn=Ge.next();Ft!==null&&!Hn.done;hn++,Hn=Ge.next()){Ft.index>hn?(Nn=Ft,Ft=null):Nn=Ft.sibling;var Mc=Ke(Ue,Ft,Hn.value,dt);if(Mc===null){Ft===null&&(Ft=Nn);break}s&&Ft&&Mc.alternate===null&&a(Ue,Ft),Re=S(Mc,Re,hn),qn===null?Gt=Mc:qn.sibling=Mc,qn=Mc,Ft=Nn}if(Hn.done)return c(Ue,Ft),xn&&Ui(Ue,hn),Gt;if(Ft===null){for(;!Hn.done;hn++,Hn=Ge.next())Hn=ht(Ue,Hn.value,dt),Hn!==null&&(Re=S(Hn,Re,hn),qn===null?Gt=Hn:qn.sibling=Hn,qn=Hn);return xn&&Ui(Ue,hn),Gt}for(Ft=f(Ft);!Hn.done;hn++,Hn=Ge.next())Hn=Ze(Ft,Ue,hn,Hn.value,dt),Hn!==null&&(s&&Hn.alternate!==null&&Ft.delete(Hn.key===null?hn:Hn.key),Re=S(Hn,Re,hn),qn===null?Gt=Hn:qn.sibling=Hn,qn=Hn);return s&&Ft.forEach(function(A3){return a(Ue,A3)}),xn&&Ui(Ue,hn),Gt}function dr(Ue,Re,Ge,dt){if(typeof Ge=="object"&&Ge!==null&&Ge.type===R&&Ge.key===null&&(Ge=Ge.props.children),typeof Ge=="object"&&Ge!==null){switch(Ge.$$typeof){case x:e:{for(var Gt=Ge.key;Re!==null;){if(Re.key===Gt){if(Gt=Ge.type,Gt===R){if(Re.tag===7){c(Ue,Re.sibling),dt=v(Re,Ge.props.children),dt.return=Ue,Ue=dt;break e}}else if(Re.elementType===Gt||typeof Gt=="object"&&Gt!==null&&Gt.$$typeof===D&&He(Gt)===Re.type){c(Ue,Re.sibling),dt=v(Re,Ge.props),Zt(dt,Ge),dt.return=Ue,Ue=dt;break e}c(Ue,Re);break}else a(Ue,Re);Re=Re.sibling}Ge.type===R?(dt=Vo(Ge.props.children,Ue.mode,dt,Ge.key),dt.return=Ue,Ue=dt):(dt=mc(Ge.type,Ge.key,Ge.props,null,Ue.mode,dt),Zt(dt,Ge),dt.return=Ue,Ue=dt)}return O(Ue);case A:e:{for(Gt=Ge.key;Re!==null;){if(Re.key===Gt)if(Re.tag===4&&Re.stateNode.containerInfo===Ge.containerInfo&&Re.stateNode.implementation===Ge.implementation){c(Ue,Re.sibling),dt=v(Re,Ge.children||[]),dt.return=Ue,Ue=dt;break e}else{c(Ue,Re);break}else a(Ue,Re);Re=Re.sibling}dt=gc(Ge,Ue.mode,dt),dt.return=Ue,Ue=dt}return O(Ue);case D:return Ge=He(Ge),dr(Ue,Re,Ge,dt)}if(ye(Ge))return Ct(Ue,Re,Ge,dt);if(F(Ge)){if(Gt=F(Ge),typeof Gt!="function")throw Error(r(150));return Ge=Gt.call(Ge),Kt(Ue,Re,Ge,dt)}if(typeof Ge.then=="function")return dr(Ue,Re,_t(Ge),dt);if(Ge.$$typeof===$)return dr(Ue,Re,wd(Ue,Ge),dt);jt(Ue,Ge)}return typeof Ge=="string"&&Ge!==""||typeof Ge=="number"||typeof Ge=="bigint"?(Ge=""+Ge,Re!==null&&Re.tag===6?(c(Ue,Re.sibling),dt=v(Re,Ge),dt.return=Ue,Ue=dt):(c(Ue,Re),dt=Au(Ge,Ue.mode,dt),dt.return=Ue,Ue=dt),O(Ue)):c(Ue,Re)}return function(Ue,Re,Ge,dt){try{Dt=0;var Gt=dr(Ue,Re,Ge,dt);return ft=null,Gt}catch(Ft){if(Ft===Ae||Ft===de)throw Ft;var qn=Gs(29,Ft,null,Ue.mode);return qn.lanes=dt,qn.return=Ue,qn}finally{}}}var pr=bn(!0),rn=bn(!1),Et=!1;function wt(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vr(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Yt(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function cn(s,a,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Wn&2)!==0){var v=f.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),f.pending=a,a=$s(s),Eu(s,null,c),a}return _u(s,f,a,c),$s(s)}function $n(s,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,Ms(s,c)}}function rs(s,a){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,S=null;if(c=c.firstBaseUpdate,c!==null){do{var O={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};S===null?v=S=O:S=S.next=O,c=c.next}while(c!==null);S===null?v=S=a:S=S.next=a}else v=S=a;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=a:s.next=a,c.lastBaseUpdate=a}var ks=!1;function lr(){if(ks){var s=b;if(s!==null)throw s}}function $r(s,a,c,f){ks=!1;var v=s.updateQueue;Et=!1;var S=v.firstBaseUpdate,O=v.lastBaseUpdate,ne=v.shared.pending;if(ne!==null){v.shared.pending=null;var Se=ne,We=Se.next;Se.next=null,O===null?S=We:O.next=We,O=Se;var lt=s.alternate;lt!==null&&(lt=lt.updateQueue,ne=lt.lastBaseUpdate,ne!==O&&(ne===null?lt.firstBaseUpdate=We:ne.next=We,lt.lastBaseUpdate=Se))}if(S!==null){var ht=v.baseState;O=0,lt=We=Se=null,ne=S;do{var Ke=ne.lane&-536870913,Ze=Ke!==ne.lane;if(Ze?(En&Ke)===Ke:(f&Ke)===Ke){Ke!==0&&Ke===g&&(ks=!0),lt!==null&&(lt=lt.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var Ct=s,Kt=ne;Ke=a;var dr=c;switch(Kt.tag){case 1:if(Ct=Kt.payload,typeof Ct=="function"){ht=Ct.call(dr,ht,Ke);break e}ht=Ct;break e;case 3:Ct.flags=Ct.flags&-65537|128;case 0:if(Ct=Kt.payload,Ke=typeof Ct=="function"?Ct.call(dr,ht,Ke):Ct,Ke==null)break e;ht=w({},ht,Ke);break e;case 2:Et=!0}}Ke=ne.callback,Ke!==null&&(s.flags|=64,Ze&&(s.flags|=8192),Ze=v.callbacks,Ze===null?v.callbacks=[Ke]:Ze.push(Ke))}else Ze={lane:Ke,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},lt===null?(We=lt=Ze,Se=ht):lt=lt.next=Ze,O|=Ke;if(ne=ne.next,ne===null){if(ne=v.shared.pending,ne===null)break;Ze=ne,ne=Ze.next,Ze.next=null,v.lastBaseUpdate=Ze,v.shared.pending=null}}while(!0);lt===null&&(Se=ht),v.baseState=Se,v.firstBaseUpdate=We,v.lastBaseUpdate=lt,S===null&&(v.shared.lanes=0),Tc|=O,s.lanes=O,s.memoizedState=ht}}function Ws(s,a){if(typeof s!="function")throw Error(r(191,s));s.call(a)}function Gr(s,a){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)Ws(c[s],a)}var gn=J(null),kn=J(0);function br(s,a){s=Bl,G(kn,s),G(gn,a),Bl=s|a.baseLanes}function Un(){G(kn,Bl),G(gn,gn.current)}function ss(){Bl=kn.current,M(gn),M(kn)}var xr=J(null),Dn=null;function Or(s){var a=s.alternate;G(In,In.current&1),G(xr,s),Dn===null&&(a===null||gn.current!==null||a.memoizedState!==null)&&(Dn=s)}function Gn(s){G(In,In.current),G(xr,s),Dn===null&&(Dn=s)}function Wr(s){s.tag===22?(G(In,In.current),G(xr,s),Dn===null&&(Dn=s)):Yr()}function Yr(){G(In,In.current),G(xr,xr.current)}function er(s){M(xr),Dn===s&&(Dn=null),M(In)}var In=J(0);function Ys(s){for(var a=s;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||B0(c)||V0(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var jr=0,qt=null,$t=null,Pn=null,xi=!1,sa=!1,li=!1,Kr=0,Yo=0,Ko=null,_d=0;function cr(){throw Error(r(321))}function Ch(s,a){if(a===null)return!1;for(var c=0;c<a.length&&c<s.length;c++)if(!Ts(s[c],a[c]))return!1;return!0}function Rh(s,a,c,f,v,S){return jr=S,qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,le.H=s===null||s.memoizedState===null?R2:Qg,li=!1,S=c(f,v),li=!1,sa&&(S=bo(a,c,f,v)),Ed(s),S}function Ed(s){le.H=Oh;var a=$t!==null&&$t.next!==null;if(jr=0,Pn=$t=qt=null,xi=!1,Yo=0,Ko=null,a)throw Error(r(300));s===null||gs||(s=s.dependencies,s!==null&&xd(s)&&(gs=!0))}function bo(s,a,c,f){qt=s;var v=0;do{if(sa&&(Ko=null),Yo=0,sa=!1,25<=v)throw Error(r(301));if(v+=1,Pn=$t=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}le.H=I2,S=a(c,f)}while(sa);return S}function Hg(){var s=le.H,a=s.useState()[0];return a=typeof a.then=="function"?Xo(a):a,s=s.useState()[0],($t!==null?$t.memoizedState:null)!==s&&(qt.flags|=1024),a}function Ih(){var s=Kr!==0;return Kr=0,s}function kh(s,a,c){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~c}function Nd(s){if(xi){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}xi=!1}jr=0,Pn=$t=qt=null,sa=!1,Yo=Kr=0,Ko=null}function ms(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?qt.memoizedState=Pn=s:Pn=Pn.next=s,Pn}function Cr(){if($t===null){var s=qt.alternate;s=s!==null?s.memoizedState:null}else s=$t.next;var a=Pn===null?qt.memoizedState:Pn.next;if(a!==null)Pn=a,$t=s;else{if(s===null)throw qt.alternate===null?Error(r(467)):Error(r(310));$t=s,s={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Pn===null?qt.memoizedState=Pn=s:Pn=Pn.next=s}return Pn}function Ru(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xo(s){var a=Yo;return Yo+=1,Ko===null&&(Ko=[]),s=at(Ko,s,a),a=qt,(Pn===null?a.memoizedState:Pn.next)===null&&(a=a.alternate,le.H=a===null||a.memoizedState===null?R2:Qg),s}function wc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Xo(s);if(s.$$typeof===$)return Is(s)}throw Error(r(438,String(s)))}function Il(s){var a=null,c=qt.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=qt.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=Ru(),qt.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(s),f=0;f<s;f++)c[f]=V;return a.index++,c}function Wa(s,a){return typeof a=="function"?a(s):a}function Ad(s){var a=Cr();return Sc(a,$t,s)}function Sc(s,a,c){var f=s.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var v=s.baseQueue,S=f.pending;if(S!==null){if(v!==null){var O=v.next;v.next=S.next,S.next=O}a.baseQueue=v=S,f.pending=null}if(S=s.baseState,v===null)s.memoizedState=S;else{a=v.next;var ne=O=null,Se=null,We=a,lt=!1;do{var ht=We.lane&-536870913;if(ht!==We.lane?(En&ht)===ht:(jr&ht)===ht){var Ke=We.revertLane;if(Ke===0)Se!==null&&(Se=Se.next={lane:0,revertLane:0,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),ht===g&&(lt=!0);else if((jr&Ke)===Ke){We=We.next,Ke===g&&(lt=!0);continue}else ht={lane:0,revertLane:We.revertLane,gesture:null,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Se===null?(ne=Se=ht,O=S):Se=Se.next=ht,qt.lanes|=Ke,Tc|=Ke;ht=We.action,li&&c(S,ht),S=We.hasEagerState?We.eagerState:c(S,ht)}else Ke={lane:ht,revertLane:We.revertLane,gesture:We.gesture,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Se===null?(ne=Se=Ke,O=S):Se=Se.next=Ke,qt.lanes|=ht,Tc|=ht;We=We.next}while(We!==null&&We!==a);if(Se===null?O=S:Se.next=ne,!Ts(S,s.memoizedState)&&(gs=!0,lt&&(c=b,c!==null)))throw c;s.memoizedState=S,s.baseState=O,s.baseQueue=Se,f.lastRenderedState=S}return v===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function Td(s){var a=Cr(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var f=c.dispatch,v=c.pending,S=a.memoizedState;if(v!==null){c.pending=null;var O=v=v.next;do S=s(S,O.action),O=O.next;while(O!==v);Ts(S,a.memoizedState)||(gs=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),c.lastRenderedState=S}return[S,f]}function jd(s,a,c){var f=qt,v=Cr(),S=xn;if(S){if(c===void 0)throw Error(r(407));c=c()}else c=a();var O=!Ts(($t||v).memoizedState,c);if(O&&(v.memoizedState=c,gs=!0),v=v.queue,$g(Ph.bind(null,f,v,s),[s]),v.getSnapshot!==a||O||Pn!==null&&Pn.memoizedState.tag&1){if(f.flags|=2048,Dl(9,{destroy:void 0},Dh.bind(null,f,v,c,a),null),mr===null)throw Error(r(349));S||(jr&127)!==0||xo(f,a,c)}return c}function xo(s,a,c){s.flags|=16384,s={getSnapshot:a,value:c},a=qt.updateQueue,a===null?(a=Ru(),qt.updateQueue=a,a.stores=[s]):(c=a.stores,c===null?a.stores=[s]:c.push(s))}function Dh(s,a,c,f){a.value=c,a.getSnapshot=f,gp(a)&&Lh(s)}function Ph(s,a,c){return c(function(){gp(a)&&Lh(s)})}function gp(s){var a=s.getSnapshot;s=s.value;try{var c=a();return!Ts(s,c)}catch{return!0}}function Lh(s){var a=yo(s,2);a!==null&&ca(a,s,2)}function Qo(s){var a=ms();if(typeof s=="function"){var c=s;if(s=c(),li){bt(!0);try{c()}finally{bt(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:s},a}function yp(s,a,c,f){return s.baseState=c,Sc(s,$t,typeof f=="function"?f:Wa)}function vp(s,a,c,f,v){if(Sp(s))throw Error(r(485));if(s=a.action,s!==null){var S={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){S.listeners.push(O)}};le.T!==null?c(!0):S.isTransition=!1,f(S),c=a.pending,c===null?(S.next=a.pending=S,bp(a,S)):(S.next=c.next,a.pending=c.next=S)}}function bp(s,a){var c=a.action,f=a.payload,v=s.state;if(a.isTransition){var S=le.T,O={};le.T=O;try{var ne=c(v,f),Se=le.S;Se!==null&&Se(O,ne),Fh(s,a,ne)}catch(We){kl(s,a,We)}finally{S!==null&&O.types!==null&&(S.types=O.types),le.T=S}}else try{S=c(v,f),Fh(s,a,S)}catch(We){kl(s,a,We)}}function Fh(s,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){xp(s,a,f)},function(f){return kl(s,a,f)}):xp(s,a,c)}function xp(s,a,c){a.status="fulfilled",a.value=c,Cd(a),s.state=c,a=s.pending,a!==null&&(c=a.next,c===a?s.pending=null:(c=c.next,a.next=c,bp(s,c)))}function kl(s,a,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,Cd(a),a=a.next;while(a!==f)}s.action=null}function Cd(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function Iu(s,a){return a}function Ya(s,a){if(xn){var c=mr.formState;if(c!==null){e:{var f=qt;if(xn){if(fr){t:{for(var v=fr,S=Tr;v.nodeType!==8;){if(!S){v=null;break t}if(v=Ka(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){fr=Ka(v.nextSibling),f=v.data==="F!";break e}}qo(f)}f=!1}f&&(a=c[0])}}return c=ms(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:a},c.queue=f,c=T2.bind(null,qt,f),f.dispatch=c,f=Qo(!1),S=Xg.bind(null,qt,!1,f.queue),f=ms(),v={state:a,dispatch:null,action:s,pending:null},f.queue=v,c=vp.bind(null,qt,v,S,c),v.dispatch=c,f.memoizedState=s,[a,c,!1]}function wo(s){var a=Cr();return So(a,$t,s)}function So(s,a,c){if(a=Sc(s,a,Iu)[0],s=Ad(Wa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=Xo(a)}catch(O){throw O===Ae?de:O}else f=a;a=Cr();var v=a.queue,S=v.dispatch;return c!==a.memoizedState&&(qt.flags|=2048,Dl(9,{destroy:void 0},Rd.bind(null,v,c),null)),[f,S,s]}function Rd(s,a){s.action=a}function Id(s){var a=Cr(),c=$t;if(c!==null)return So(a,c,s);Cr(),a=a.memoizedState,c=Cr();var f=c.queue.dispatch;return c.memoizedState=s,[a,f,!1]}function Dl(s,a,c,f){return s={tag:s,create:c,deps:f,inst:a,next:null},a=qt.updateQueue,a===null&&(a=Ru(),qt.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,a.lastEffect=s),s}function wp(){return Cr().memoizedState}function _c(s,a,c,f){var v=ms();qt.flags|=s,v.memoizedState=Dl(1|a,{destroy:void 0},c,f===void 0?null:f)}function Ec(s,a,c,f){var v=Cr();f=f===void 0?null:f;var S=v.memoizedState.inst;$t!==null&&f!==null&&Ch(f,$t.memoizedState.deps)?v.memoizedState=Dl(a,S,c,f):(qt.flags|=s,v.memoizedState=Dl(1|a,S,c,f))}function f2(s,a){_c(8390656,8,s,a)}function $g(s,a){Ec(2048,8,s,a)}function x4(s){qt.flags|=4;var a=qt.updateQueue;if(a===null)a=Ru(),qt.updateQueue=a,a.events=[s];else{var c=a.events;c===null?a.events=[s]:c.push(s)}}function p2(s){var a=Cr().memoizedState;return x4({ref:a,nextImpl:s}),function(){if((Wn&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function m2(s,a){return Ec(4,2,s,a)}function g2(s,a){return Ec(4,4,s,a)}function y2(s,a){if(typeof a=="function"){s=s();var c=a(s);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function v2(s,a,c){c=c!=null?c.concat([s]):null,Ec(4,4,y2.bind(null,a,s),c)}function Gg(){}function b2(s,a){var c=Cr();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Ch(a,f[1])?f[0]:(c.memoizedState=[s,a],s)}function x2(s,a){var c=Cr();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Ch(a,f[1]))return f[0];if(f=s(),li){bt(!0);try{s()}finally{bt(!1)}}return c.memoizedState=[f,a],f}function Wg(s,a,c){return c===void 0||(jr&1073741824)!==0&&(En&261930)===0?s.memoizedState=a:(s.memoizedState=c,s=w5(),qt.lanes|=s,Tc|=s,c)}function w2(s,a,c,f){return Ts(c,a)?c:gn.current!==null?(s=Wg(s,c,f),Ts(s,a)||(gs=!0),s):(jr&42)===0||(jr&1073741824)!==0&&(En&261930)===0?(gs=!0,s.memoizedState=c):(s=w5(),qt.lanes|=s,Tc|=s,a)}function S2(s,a,c,f,v){var S=ve.p;ve.p=S!==0&&8>S?S:8;var O=le.T,ne={};le.T=ne,Xg(s,!1,a,c);try{var Se=v(),We=le.S;if(We!==null&&We(ne,Se),Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var lt=K(Se,f);Mh(s,a,lt,ja(s))}else Mh(s,a,f,ja(s))}catch(ht){Mh(s,a,{then:function(){},status:"rejected",reason:ht},ja())}finally{ve.p=S,O!==null&&ne.types!==null&&(O.types=ne.types),le.T=O}}function w4(){}function Yg(s,a,c,f){if(s.tag!==5)throw Error(r(476));var v=_2(s).queue;S2(s,v,a,me,c===null?w4:function(){return E2(s),c(f)})}function _2(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:me},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wa,lastRenderedState:c},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function E2(s){var a=_2(s);a.next===null&&(a=s.alternate.memoizedState),Mh(s,a.next.queue,{},ja())}function Kg(){return Is(ef)}function N2(){return Cr().memoizedState}function A2(){return Cr().memoizedState}function S4(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var c=ja();s=Yt(c);var f=cn(a,s,c);f!==null&&(ca(f,a,c),$n(f,a,c)),a={cache:xc()},s.payload=a;return}a=a.return}}function _4(s,a,c){var f=ja();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Sp(s)?j2(a,c):(c=hd(s,a,c,f),c!==null&&(ca(c,s,f),C2(c,a,f)))}function T2(s,a,c){var f=ja();Mh(s,a,c,f)}function Mh(s,a,c,f){var v={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Sp(s))j2(a,v);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var O=a.lastRenderedState,ne=S(O,c);if(v.hasEagerState=!0,v.eagerState=ne,Ts(ne,O))return _u(s,a,v,0),mr===null&&Su(),!1}catch{}finally{}if(c=hd(s,a,v,f),c!==null)return ca(c,s,f),C2(c,a,f),!0}return!1}function Xg(s,a,c,f){if(f={lane:2,revertLane:j0(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Sp(s)){if(a)throw Error(r(479))}else a=hd(s,c,f,2),a!==null&&ca(a,s,2)}function Sp(s){var a=s.alternate;return s===qt||a!==null&&a===qt}function j2(s,a){sa=xi=!0;var c=s.pending;c===null?a.next=a:(a.next=c.next,c.next=a),s.pending=a}function C2(s,a,c){if((c&4194048)!==0){var f=a.lanes;f&=s.pendingLanes,c|=f,a.lanes=c,Ms(s,c)}}var Oh={readContext:Is,use:wc,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useInsertionEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useSyncExternalStore:cr,useId:cr,useHostTransitionStatus:cr,useFormState:cr,useActionState:cr,useOptimistic:cr,useMemoCache:cr,useCacheRefresh:cr};Oh.useEffectEvent=cr;var R2={readContext:Is,use:wc,useCallback:function(s,a){return ms().memoizedState=[s,a===void 0?null:a],s},useContext:Is,useEffect:f2,useImperativeHandle:function(s,a,c){c=c!=null?c.concat([s]):null,_c(4194308,4,y2.bind(null,a,s),c)},useLayoutEffect:function(s,a){return _c(4194308,4,s,a)},useInsertionEffect:function(s,a){_c(4,2,s,a)},useMemo:function(s,a){var c=ms();a=a===void 0?null:a;var f=s();if(li){bt(!0);try{s()}finally{bt(!1)}}return c.memoizedState=[f,a],f},useReducer:function(s,a,c){var f=ms();if(c!==void 0){var v=c(a);if(li){bt(!0);try{c(a)}finally{bt(!1)}}}else v=a;return f.memoizedState=f.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},f.queue=s,s=s.dispatch=_4.bind(null,qt,s),[f.memoizedState,s]},useRef:function(s){var a=ms();return s={current:s},a.memoizedState=s},useState:function(s){s=Qo(s);var a=s.queue,c=T2.bind(null,qt,a);return a.dispatch=c,[s.memoizedState,c]},useDebugValue:Gg,useDeferredValue:function(s,a){var c=ms();return Wg(c,s,a)},useTransition:function(){var s=Qo(!1);return s=S2.bind(null,qt,s.queue,!0,!1),ms().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,c){var f=qt,v=ms();if(xn){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),mr===null)throw Error(r(349));(En&127)!==0||xo(f,a,c)}v.memoizedState=c;var S={value:c,getSnapshot:a};return v.queue=S,f2(Ph.bind(null,f,S,s),[s]),f.flags|=2048,Dl(9,{destroy:void 0},Dh.bind(null,f,S,c,a),null),c},useId:function(){var s=ms(),a=mr.identifierPrefix;if(xn){var c=na,f=ta;c=(f&~(1<<32-St(f)-1)).toString(32)+c,a="_"+a+"R_"+c,c=Kr++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=_d++,a="_"+a+"r_"+c.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:Kg,useFormState:Ya,useActionState:Ya,useOptimistic:function(s){var a=ms();a.memoizedState=a.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=Xg.bind(null,qt,!0,c),c.dispatch=a,[s,a]},useMemoCache:Il,useCacheRefresh:function(){return ms().memoizedState=S4.bind(null,qt)},useEffectEvent:function(s){var a=ms(),c={impl:s};return a.memoizedState=c,function(){if((Wn&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Qg={readContext:Is,use:wc,useCallback:b2,useContext:Is,useEffect:$g,useImperativeHandle:v2,useInsertionEffect:m2,useLayoutEffect:g2,useMemo:x2,useReducer:Ad,useRef:wp,useState:function(){return Ad(Wa)},useDebugValue:Gg,useDeferredValue:function(s,a){var c=Cr();return w2(c,$t.memoizedState,s,a)},useTransition:function(){var s=Ad(Wa)[0],a=Cr().memoizedState;return[typeof s=="boolean"?s:Xo(s),a]},useSyncExternalStore:jd,useId:N2,useHostTransitionStatus:Kg,useFormState:wo,useActionState:wo,useOptimistic:function(s,a){var c=Cr();return yp(c,$t,s,a)},useMemoCache:Il,useCacheRefresh:A2};Qg.useEffectEvent=p2;var I2={readContext:Is,use:wc,useCallback:b2,useContext:Is,useEffect:$g,useImperativeHandle:v2,useInsertionEffect:m2,useLayoutEffect:g2,useMemo:x2,useReducer:Td,useRef:wp,useState:function(){return Td(Wa)},useDebugValue:Gg,useDeferredValue:function(s,a){var c=Cr();return $t===null?Wg(c,s,a):w2(c,$t.memoizedState,s,a)},useTransition:function(){var s=Td(Wa)[0],a=Cr().memoizedState;return[typeof s=="boolean"?s:Xo(s),a]},useSyncExternalStore:jd,useId:N2,useHostTransitionStatus:Kg,useFormState:Id,useActionState:Id,useOptimistic:function(s,a){var c=Cr();return $t!==null?yp(c,$t,s,a):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Il,useCacheRefresh:A2};I2.useEffectEvent=p2;function Jg(s,a,c,f){a=s.memoizedState,c=c(f,a),c=c==null?a:w({},a,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Zg={enqueueSetState:function(s,a,c){s=s._reactInternals;var f=ja(),v=Yt(f);v.payload=a,c!=null&&(v.callback=c),a=cn(s,v,f),a!==null&&(ca(a,s,f),$n(a,s,f))},enqueueReplaceState:function(s,a,c){s=s._reactInternals;var f=ja(),v=Yt(f);v.tag=1,v.payload=a,c!=null&&(v.callback=c),a=cn(s,v,f),a!==null&&(ca(a,s,f),$n(a,s,f))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var c=ja(),f=Yt(c);f.tag=2,a!=null&&(f.callback=a),a=cn(s,f,c),a!==null&&(ca(a,s,c),$n(a,s,c))}};function k2(s,a,c,f,v,S,O){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,S,O):a.prototype&&a.prototype.isPureReactComponent?!fo(c,f)||!fo(v,S):!0}function D2(s,a,c,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==s&&Zg.enqueueReplaceState(a,a.state,null)}function ku(s,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(s=s.defaultProps){c===a&&(c=w({},c));for(var v in s)c[v]===void 0&&(c[v]=s[v])}return c}function P2(s){wu(s)}function L2(s){console.error(s)}function F2(s){wu(s)}function _p(s,a){try{var c=s.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function M2(s,a,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function e0(s,a,c){return c=Yt(c),c.tag=3,c.payload={element:null},c.callback=function(){_p(s,a)},c}function O2(s){return s=Yt(s),s.tag=3,s}function U2(s,a,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var S=f.value;s.payload=function(){return v(S)},s.callback=function(){M2(a,c,f)}}var O=c.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(s.callback=function(){M2(a,c,f),typeof v!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var ne=f.stack;this.componentDidCatch(f.value,{componentStack:ne!==null?ne:""})})}function E4(s,a,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&Go(a,c,v,!0),c=xr.current,c!==null){switch(c.tag){case 31:case 13:return Dn===null?Lp():c.alternate===null&&Xr===0&&(Xr=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===Pe?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),N0(s,f,v)),!1;case 22:return c.flags|=65536,f===Pe?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),N0(s,f,v)),!1}throw Error(r(435,c.tag))}return N0(s,f,v),Lp(),!1}if(xn)return a=xr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,f!==Na&&(s=Error(r(422),{cause:f}),vc(Ji(s,c)))):(f!==Na&&(a=Error(r(423),{cause:f}),vc(Ji(a,c))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,f=Ji(f,c),v=e0(s.stateNode,f,v),rs(s,v),Xr!==4&&(Xr=2)),!1;var S=Error(r(520),{cause:f});if(S=Ji(S,c),Gh===null?Gh=[S]:Gh.push(S),Xr!==4&&(Xr=2),a===null)return!0;f=Ji(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,s=v&-v,c.lanes|=s,s=e0(c.stateNode,f,s),rs(c,s),!1;case 1:if(a=c.type,S=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(jc===null||!jc.has(S))))return c.flags|=65536,v&=-v,c.lanes|=v,v=O2(v),U2(v,s,c,f),rs(c,v),!1}c=c.return}while(c!==null);return!1}var t0=Error(r(461)),gs=!1;function ci(s,a,c,f){a.child=s===null?rn(a,null,c,f):pr(a,s.child,c,f)}function B2(s,a,c,f,v){c=c.render;var S=a.ref;if("ref"in f){var O={};for(var ne in f)ne!=="ref"&&(O[ne]=f[ne])}else O=f;return Wo(a),f=Rh(s,a,c,O,S,v),ne=Ih(),s!==null&&!gs?(kh(s,a,v),Pl(s,a,v)):(xn&&ne&&Ah(a),a.flags|=1,ci(s,a,f,v),a.child)}function V2(s,a,c,f,v){if(s===null){var S=c.type;return typeof S=="function"&&!pd(S)&&S.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=S,z2(s,a,S,f,v)):(s=mc(c.type,null,f,a,a.mode,v),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,!c0(s,v)){var O=S.memoizedProps;if(c=c.compare,c=c!==null?c:fo,c(O,f)&&s.ref===a.ref)return Pl(s,a,v)}return a.flags|=1,s=Qi(S,f),s.ref=a.ref,s.return=a,a.child=s}function z2(s,a,c,f,v){if(s!==null){var S=s.memoizedProps;if(fo(S,f)&&s.ref===a.ref)if(gs=!1,a.pendingProps=f=S,c0(s,v))(s.flags&131072)!==0&&(gs=!0);else return a.lanes=s.lanes,Pl(s,a,v)}return n0(s,a,c,f,v)}function q2(s,a,c,f){var v=f.children,S=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(S=S!==null?S.baseLanes|c:c,s!==null){for(f=a.child=s.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~S}else f=0,a.child=null;return H2(s,a,S,c,f)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&ie(a,S!==null?S.cachePool:null),S!==null?br(a,S):Un(),Wr(a);else return f=a.lanes=536870912,H2(s,a,S!==null?S.baseLanes|c:c,c,f)}else S!==null?(ie(a,S.cachePool),br(a,S),Yr(),a.memoizedState=null):(s!==null&&ie(a,null),Un(),Yr());return ci(s,a,v,c),a.child}function Uh(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function H2(s,a,c,f,v){var S=re();return S=S===null?null:{parent:Mr._currentValue,pool:S},a.memoizedState={baseLanes:c,cachePool:S},s!==null&&ie(a,null),Un(),Wr(a),s!==null&&Go(s,a,f,!0),a.childLanes=v,null}function Ep(s,a){return a=Ap({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function $2(s,a,c){return pr(a,s.child,null,c),s=Ep(a,a.pendingProps),s.flags|=2,er(a),a.memoizedState=null,s}function N4(s,a,c){var f=a.pendingProps,v=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(xn){if(f.mode==="hidden")return s=Ep(a,f),a.lanes=536870912,Uh(null,s);if(Gn(a),(s=fr)?(s=rb(s,Tr),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:zo!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},c=md(s),c.return=a,a.child=c,Cs=a,fr=null)):s=null,s===null)throw qo(a);return a.lanes=536870912,null}return Ep(a,f)}var S=s.memoizedState;if(S!==null){var O=S.dehydrated;if(Gn(a),v)if(a.flags&256)a.flags&=-257,a=$2(s,a,c);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(r(558));else if(gs||Go(s,a,c,!1),v=(c&s.childLanes)!==0,gs||v){if(f=mr,f!==null&&(O=Os(f,c),O!==0&&O!==S.retryLane))throw S.retryLane=O,yo(s,O),ca(f,s,O),t0;Lp(),a=$2(s,a,c)}else s=S.treeContext,fr=Ka(O.nextSibling),Cs=a,xn=!0,oi=null,Tr=!1,s!==null&&pp(a,s),a=Ep(a,f),a.flags|=4096;return a}return s=Qi(s.child,{mode:f.mode,children:f.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Np(s,a){var c=a.ref;if(c===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(a.flags|=4194816)}}function n0(s,a,c,f,v){return Wo(a),c=Rh(s,a,c,f,void 0,v),f=Ih(),s!==null&&!gs?(kh(s,a,v),Pl(s,a,v)):(xn&&f&&Ah(a),a.flags|=1,ci(s,a,c,v),a.child)}function G2(s,a,c,f,v,S){return Wo(a),a.updateQueue=null,c=bo(a,f,c,v),Ed(s),f=Ih(),s!==null&&!gs?(kh(s,a,S),Pl(s,a,S)):(xn&&f&&Ah(a),a.flags|=1,ci(s,a,c,S),a.child)}function W2(s,a,c,f,v){if(Wo(a),a.stateNode===null){var S=js,O=c.contextType;typeof O=="object"&&O!==null&&(S=Is(O)),S=new c(f,S),a.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Zg,a.stateNode=S,S._reactInternals=a,S=a.stateNode,S.props=f,S.state=a.memoizedState,S.refs={},wt(a),O=c.contextType,S.context=typeof O=="object"&&O!==null?Is(O):js,S.state=a.memoizedState,O=c.getDerivedStateFromProps,typeof O=="function"&&(Jg(a,c,O,f),S.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(O=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),O!==S.state&&Zg.enqueueReplaceState(S,S.state,null),$r(a,f,S,v),lr(),S.state=a.memoizedState),typeof S.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(s===null){S=a.stateNode;var ne=a.memoizedProps,Se=ku(c,ne);S.props=Se;var We=S.context,lt=c.contextType;O=js,typeof lt=="object"&&lt!==null&&(O=Is(lt));var ht=c.getDerivedStateFromProps;lt=typeof ht=="function"||typeof S.getSnapshotBeforeUpdate=="function",ne=a.pendingProps!==ne,lt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(ne||We!==O)&&D2(a,S,f,O),Et=!1;var Ke=a.memoizedState;S.state=Ke,$r(a,f,S,v),lr(),We=a.memoizedState,ne||Ke!==We||Et?(typeof ht=="function"&&(Jg(a,c,ht,f),We=a.memoizedState),(Se=Et||k2(a,c,Se,f,Ke,We,O))?(lt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=We),S.props=f,S.state=We,S.context=O,f=Se):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{S=a.stateNode,vr(s,a),O=a.memoizedProps,lt=ku(c,O),S.props=lt,ht=a.pendingProps,Ke=S.context,We=c.contextType,Se=js,typeof We=="object"&&We!==null&&(Se=Is(We)),ne=c.getDerivedStateFromProps,(We=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==ht||Ke!==Se)&&D2(a,S,f,Se),Et=!1,Ke=a.memoizedState,S.state=Ke,$r(a,f,S,v),lr();var Ze=a.memoizedState;O!==ht||Ke!==Ze||Et||s!==null&&s.dependencies!==null&&xd(s.dependencies)?(typeof ne=="function"&&(Jg(a,c,ne,f),Ze=a.memoizedState),(lt=Et||k2(a,c,lt,f,Ke,Ze,Se)||s!==null&&s.dependencies!==null&&xd(s.dependencies))?(We||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,Ze,Se),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,Ze,Se)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===s.memoizedProps&&Ke===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&Ke===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Ze),S.props=f,S.state=Ze,S.context=Se,f=lt):(typeof S.componentDidUpdate!="function"||O===s.memoizedProps&&Ke===s.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===s.memoizedProps&&Ke===s.memoizedState||(a.flags|=1024),f=!1)}return S=f,Np(s,a),f=(a.flags&128)!==0,S||f?(S=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:S.render(),a.flags|=1,s!==null&&f?(a.child=pr(a,s.child,null,v),a.child=pr(a,null,c,v)):ci(s,a,c,v),a.memoizedState=S.state,s=a.child):s=Pl(s,a,v),s}function Y2(s,a,c,f){return Cl(),a.flags|=256,ci(s,a,c,f),a.child}var r0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function s0(s){return{baseLanes:s,cachePool:fe()}}function i0(s,a,c){return s=s!==null?s.childLanes&~c:0,a&&(s|=Ta),s}function K2(s,a,c){var f=a.pendingProps,v=!1,S=(a.flags&128)!==0,O;if((O=S)||(O=s!==null&&s.memoizedState===null?!1:(In.current&2)!==0),O&&(v=!0,a.flags&=-129),O=(a.flags&32)!==0,a.flags&=-33,s===null){if(xn){if(v?Or(a):Yr(),(s=fr)?(s=rb(s,Tr),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:zo!==null?{id:ta,overflow:na}:null,retryLane:536870912,hydrationErrors:null},c=md(s),c.return=a,a.child=c,Cs=a,fr=null)):s=null,s===null)throw qo(a);return V0(s)?a.lanes=32:a.lanes=536870912,null}var ne=f.children;return f=f.fallback,v?(Yr(),v=a.mode,ne=Ap({mode:"hidden",children:ne},v),f=Vo(f,v,c,null),ne.return=a,f.return=a,ne.sibling=f,a.child=ne,f=a.child,f.memoizedState=s0(c),f.childLanes=i0(s,O,c),a.memoizedState=r0,Uh(null,f)):(Or(a),a0(a,ne))}var Se=s.memoizedState;if(Se!==null&&(ne=Se.dehydrated,ne!==null)){if(S)a.flags&256?(Or(a),a.flags&=-257,a=o0(s,a,c)):a.memoizedState!==null?(Yr(),a.child=s.child,a.flags|=128,a=null):(Yr(),ne=f.fallback,v=a.mode,f=Ap({mode:"visible",children:f.children},v),ne=Vo(ne,v,c,null),ne.flags|=2,f.return=a,ne.return=a,f.sibling=ne,a.child=f,pr(a,s.child,null,c),f=a.child,f.memoizedState=s0(c),f.childLanes=i0(s,O,c),a.memoizedState=r0,a=Uh(null,f));else if(Or(a),V0(ne)){if(O=ne.nextSibling&&ne.nextSibling.dataset,O)var We=O.dgst;O=We,f=Error(r(419)),f.stack="",f.digest=O,vc({value:f,source:null,stack:null}),a=o0(s,a,c)}else if(gs||Go(s,a,c,!1),O=(c&s.childLanes)!==0,gs||O){if(O=mr,O!==null&&(f=Os(O,c),f!==0&&f!==Se.retryLane))throw Se.retryLane=f,yo(s,f),ca(O,s,f),t0;B0(ne)||Lp(),a=o0(s,a,c)}else B0(ne)?(a.flags|=192,a.child=s.child,a=null):(s=Se.treeContext,fr=Ka(ne.nextSibling),Cs=a,xn=!0,oi=null,Tr=!1,s!==null&&pp(a,s),a=a0(a,f.children),a.flags|=4096);return a}return v?(Yr(),ne=f.fallback,v=a.mode,Se=s.child,We=Se.sibling,f=Qi(Se,{mode:"hidden",children:f.children}),f.subtreeFlags=Se.subtreeFlags&65011712,We!==null?ne=Qi(We,ne):(ne=Vo(ne,v,c,null),ne.flags|=2),ne.return=a,f.return=a,f.sibling=ne,a.child=f,Uh(null,f),f=a.child,ne=s.child.memoizedState,ne===null?ne=s0(c):(v=ne.cachePool,v!==null?(Se=Mr._currentValue,v=v.parent!==Se?{parent:Se,pool:Se}:v):v=fe(),ne={baseLanes:ne.baseLanes|c,cachePool:v}),f.memoizedState=ne,f.childLanes=i0(s,O,c),a.memoizedState=r0,Uh(s.child,f)):(Or(a),c=s.child,s=c.sibling,c=Qi(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,s!==null&&(O=a.deletions,O===null?(a.deletions=[s],a.flags|=16):O.push(s)),a.child=c,a.memoizedState=null,c)}function a0(s,a){return a=Ap({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Ap(s,a){return s=Gs(22,s,null,a),s.lanes=0,s}function o0(s,a,c){return pr(a,s.child,null,c),s=a0(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function X2(s,a,c){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),bc(s.return,a,c)}function l0(s,a,c,f,v,S){var O=s.memoizedState;O===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v,treeForkCount:S}:(O.isBackwards=a,O.rendering=null,O.renderingStartTime=0,O.last=f,O.tail=c,O.tailMode=v,O.treeForkCount=S)}function Q2(s,a,c){var f=a.pendingProps,v=f.revealOrder,S=f.tail;f=f.children;var O=In.current,ne=(O&2)!==0;if(ne?(O=O&1|2,a.flags|=128):O&=1,G(In,O),ci(s,a,f,c),f=xn?Tu:0,!ne&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&X2(s,c,a);else if(s.tag===19)X2(s,c,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(c=a.child,v=null;c!==null;)s=c.alternate,s!==null&&Ys(s)===null&&(v=c),c=c.sibling;c=v,c===null?(v=a.child,a.child=null):(v=c.sibling,c.sibling=null),l0(a,!1,v,c,S,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=a.child,a.child=null;v!==null;){if(s=v.alternate,s!==null&&Ys(s)===null){a.child=v;break}s=v.sibling,v.sibling=c,c=v,v=s}l0(a,!0,c,null,S,f);break;case"together":l0(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Pl(s,a,c){if(s!==null&&(a.dependencies=s.dependencies),Tc|=a.lanes,(c&a.childLanes)===0)if(s!==null){if(Go(s,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(r(153));if(a.child!==null){for(s=a.child,c=Qi(s,s.pendingProps),a.child=c,c.return=a;s.sibling!==null;)s=s.sibling,c=c.sibling=Qi(s,s.pendingProps),c.return=a;c.sibling=null}return a.child}function c0(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&xd(s)))}function A4(s,a,c){switch(a.tag){case 3:Ve(a,a.stateNode.containerInfo),$o(a,Mr,s.memoizedState.cache),Cl();break;case 27:case 5:Q(a);break;case 4:Ve(a,a.stateNode.containerInfo);break;case 10:$o(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Gn(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Or(a),a.flags|=128,null):(c&a.child.childLanes)!==0?K2(s,a,c):(Or(a),s=Pl(s,a,c),s!==null?s.sibling:null);Or(a);break;case 19:var v=(s.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(Go(s,a,c,!1),f=(c&a.childLanes)!==0),v){if(f)return Q2(s,a,c);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),G(In,In.current),f)break;return null;case 22:return a.lanes=0,q2(s,a,c,a.pendingProps);case 24:$o(a,Mr,s.memoizedState.cache)}return Pl(s,a,c)}function J2(s,a,c){if(s!==null)if(s.memoizedProps!==a.pendingProps)gs=!0;else{if(!c0(s,c)&&(a.flags&128)===0)return gs=!1,A4(s,a,c);gs=(s.flags&131072)!==0}else gs=!1,xn&&(a.flags&1048576)!==0&&fp(a,Tu,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(s=He(a.elementType),a.type=s,typeof s=="function")pd(s)?(f=ku(s,f),a.tag=1,a=W2(null,a,s,f,c)):(a.tag=0,a=n0(null,a,s,f,c));else{if(s!=null){var v=s.$$typeof;if(v===z){a.tag=11,a=B2(null,a,s,f,c);break e}else if(v===H){a.tag=14,a=V2(null,a,s,f,c);break e}}throw a=ee(s)||s,Error(r(306,a,""))}}return a;case 0:return n0(s,a,a.type,a.pendingProps,c);case 1:return f=a.type,v=ku(f,a.pendingProps),W2(s,a,f,v,c);case 3:e:{if(Ve(a,a.stateNode.containerInfo),s===null)throw Error(r(387));f=a.pendingProps;var S=a.memoizedState;v=S.element,vr(s,a),$r(a,f,null,c);var O=a.memoizedState;if(f=O.cache,$o(a,Mr,f),f!==S.cache&&Rl(a,[Mr],c,!0),lr(),f=O.element,S.isDehydrated)if(S={element:f,isDehydrated:!1,cache:O.cache},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){a=Y2(s,a,f,c);break e}else if(f!==v){v=Ji(Error(r(424)),a),vc(v),a=Y2(s,a,f,c);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(fr=Ka(s.firstChild),Cs=a,xn=!0,oi=null,Tr=!0,c=rn(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Cl(),f===v){a=Pl(s,a,c);break e}ci(s,a,f,c)}a=a.child}return a;case 26:return Np(s,a),s===null?(c=cb(a.type,null,a.pendingProps,null))?a.memoizedState=c:xn||(c=a.type,s=a.pendingProps,f=zp(ge.current).createElement(c),f[Bn]=a,f[Jn]=s,ui(f,c,s),yr(f),a.stateNode=f):a.memoizedState=cb(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return Q(a),s===null&&xn&&(f=a.stateNode=ab(a.type,a.pendingProps,ge.current),Cs=a,Tr=!0,v=fr,kc(a.type)?(z0=v,fr=Ka(f.firstChild)):fr=v),ci(s,a,a.pendingProps.children,c),Np(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&xn&&((v=f=fr)&&(f=n3(f,a.type,a.pendingProps,Tr),f!==null?(a.stateNode=f,Cs=a,fr=Ka(f.firstChild),Tr=!1,v=!0):v=!1),v||qo(a)),Q(a),v=a.type,S=a.pendingProps,O=s!==null?s.memoizedProps:null,f=S.children,M0(v,S)?f=null:O!==null&&M0(v,O)&&(a.flags|=32),a.memoizedState!==null&&(v=Rh(s,a,Hg,null,null,c),ef._currentValue=v),Np(s,a),ci(s,a,f,c),a.child;case 6:return s===null&&xn&&((s=c=fr)&&(c=r3(c,a.pendingProps,Tr),c!==null?(a.stateNode=c,Cs=a,fr=null,s=!0):s=!1),s||qo(a)),null;case 13:return K2(s,a,c);case 4:return Ve(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=pr(a,null,f,c):ci(s,a,f,c),a.child;case 11:return B2(s,a,a.type,a.pendingProps,c);case 7:return ci(s,a,a.pendingProps,c),a.child;case 8:return ci(s,a,a.pendingProps.children,c),a.child;case 12:return ci(s,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,$o(a,a.type,f.value),ci(s,a,f.children,c),a.child;case 9:return v=a.type._context,f=a.pendingProps.children,Wo(a),v=Is(v),f=f(v),a.flags|=1,ci(s,a,f,c),a.child;case 14:return V2(s,a,a.type,a.pendingProps,c);case 15:return z2(s,a,a.type,a.pendingProps,c);case 19:return Q2(s,a,c);case 31:return N4(s,a,c);case 22:return q2(s,a,c,a.pendingProps);case 24:return Wo(a),f=Is(Mr),s===null?(v=re(),v===null&&(v=mr,S=xc(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=c),v=S),a.memoizedState={parent:f,cache:v},wt(a),$o(a,Mr,v)):((s.lanes&c)!==0&&(vr(s,a),$r(a,null,null,c),lr()),v=s.memoizedState,S=a.memoizedState,v.parent!==f?(v={parent:f,cache:f},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),$o(a,Mr,f)):(f=S.cache,$o(a,Mr,f),f!==v.cache&&Rl(a,[Mr],c,!0))),ci(s,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Ll(s){s.flags|=4}function u0(s,a,c,f,v){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(N5())s.flags|=8192;else throw rt=Pe,$e}else s.flags&=-16777217}function Z2(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!pb(a))if(N5())s.flags|=8192;else throw rt=Pe,$e}function Tp(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?qi():536870912,s.lanes|=a,Ld|=a)}function Bh(s,a){if(!xn)switch(s.tailMode){case"hidden":a=s.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function wr(s){var a=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(a)for(var v=s.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=f,s.childLanes=c,a}function T4(s,a,c){var f=a.pendingProps;switch(vd(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(a),null;case 1:return wr(a),null;case 3:return c=a.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),ra(Mr),Me(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Rs(a)?Ll(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,jh())),wr(a),null;case 26:var v=a.type,S=a.memoizedState;return s===null?(Ll(a),S!==null?(wr(a),Z2(a,S)):(wr(a),u0(a,v,null,f,c))):S?S!==s.memoizedState?(Ll(a),wr(a),Z2(a,S)):(wr(a),a.flags&=-16777217):(s=s.memoizedProps,s!==f&&Ll(a),wr(a),u0(a,v,s,f,c)),null;case 27:if(Te(a),c=ge.current,v=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&Ll(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return wr(a),null}s=B.current,Rs(a)?Th(a):(s=ab(v,f,c),a.stateNode=s,Ll(a))}return wr(a),null;case 5:if(Te(a),v=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==f&&Ll(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return wr(a),null}if(S=B.current,Rs(a))Th(a);else{var O=zp(ge.current);switch(S){case 1:S=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:S=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":S=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":S=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":S=O.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof f.is=="string"?O.createElement("select",{is:f.is}):O.createElement("select"),f.multiple?S.multiple=!0:f.size&&(S.size=f.size);break;default:S=typeof f.is=="string"?O.createElement(v,{is:f.is}):O.createElement(v)}}S[Bn]=a,S[Jn]=f;e:for(O=a.child;O!==null;){if(O.tag===5||O.tag===6)S.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===a)break e;for(;O.sibling===null;){if(O.return===null||O.return===a)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}a.stateNode=S;e:switch(ui(S,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Ll(a)}}return wr(a),u0(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,c),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==f&&Ll(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(s=ge.current,Rs(a)){if(s=a.stateNode,c=a.memoizedProps,f=null,v=Cs,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}s[Bn]=a,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||K5(s.nodeValue,c)),s||qo(a,!0)}else s=zp(s).createTextNode(f),s[Bn]=a,a.stateNode=s}return wr(a),null;case 31:if(c=a.memoizedState,s===null||s.memoizedState!==null){if(f=Rs(a),c!==null){if(s===null){if(!f)throw Error(r(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Bn]=a}else Cl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;wr(a),s=!1}else c=jh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return a.flags&256?(er(a),a):(er(a),null);if((a.flags&128)!==0)throw Error(r(558))}return wr(a),null;case 13:if(f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=Rs(a),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Bn]=a}else Cl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;wr(a),v=!1}else v=jh(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(er(a),a):(er(a),null)}return er(a),(a.flags&128)!==0?(a.lanes=c,a):(c=f!==null,s=s!==null&&s.memoizedState!==null,c&&(f=a.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==v&&(f.flags|=2048)),c!==s&&c&&(a.child.flags|=8192),Tp(a,a.updateQueue),wr(a),null);case 4:return Me(),s===null&&k0(a.stateNode.containerInfo),wr(a),null;case 10:return ra(a.type),wr(a),null;case 19:if(M(In),f=a.memoizedState,f===null)return wr(a),null;if(v=(a.flags&128)!==0,S=f.rendering,S===null)if(v)Bh(f,!1);else{if(Xr!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(S=Ys(s),S!==null){for(a.flags|=128,Bh(f,!1),s=S.updateQueue,a.updateQueue=s,Tp(a,s),a.subtreeFlags=0,s=c,c=a.child;c!==null;)Nu(c,s),c=c.sibling;return G(In,In.current&1|2),xn&&Ui(a,f.treeForkCount),a.child}s=s.sibling}f.tail!==null&&ke()>kp&&(a.flags|=128,v=!0,Bh(f,!1),a.lanes=4194304)}else{if(!v)if(s=Ys(S),s!==null){if(a.flags|=128,v=!0,s=s.updateQueue,a.updateQueue=s,Tp(a,s),Bh(f,!0),f.tail===null&&f.tailMode==="hidden"&&!S.alternate&&!xn)return wr(a),null}else 2*ke()-f.renderingStartTime>kp&&c!==536870912&&(a.flags|=128,v=!0,Bh(f,!1),a.lanes=4194304);f.isBackwards?(S.sibling=a.child,a.child=S):(s=f.last,s!==null?s.sibling=S:a.child=S,f.last=S)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=ke(),s.sibling=null,c=In.current,G(In,v?c&1|2:c&1),xn&&Ui(a,f.treeForkCount),s):(wr(a),null);case 22:case 23:return er(a),ss(),f=a.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(wr(a),a.subtreeFlags&6&&(a.flags|=8192)):wr(a),c=a.updateQueue,c!==null&&Tp(a,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),s!==null&&M(te),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),ra(Mr),wr(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function j4(s,a){switch(vd(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return ra(Mr),Me(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Te(a),null;case 31:if(a.memoizedState!==null){if(er(a),a.alternate===null)throw Error(r(340));Cl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(er(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Cl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return M(In),null;case 4:return Me(),null;case 10:return ra(a.type),null;case 22:case 23:return er(a),ss(),s!==null&&M(te),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return ra(Mr),null;case 25:return null;default:return null}}function e5(s,a){switch(vd(a),a.tag){case 3:ra(Mr),Me();break;case 26:case 27:case 5:Te(a);break;case 4:Me();break;case 31:a.memoizedState!==null&&er(a);break;case 13:er(a);break;case 19:M(In);break;case 10:ra(a.type);break;case 22:case 23:er(a),ss(),s!==null&&M(te);break;case 24:ra(Mr)}}function Vh(s,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&s)===s){f=void 0;var S=c.create,O=c.inst;f=S(),O.destroy=f}c=c.next}while(c!==v)}}catch(ne){nr(a,a.return,ne)}}function Nc(s,a,c){try{var f=a.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var S=v.next;f=S;do{if((f.tag&s)===s){var O=f.inst,ne=O.destroy;if(ne!==void 0){O.destroy=void 0,v=a;var Se=c,We=ne;try{We()}catch(lt){nr(v,Se,lt)}}}f=f.next}while(f!==S)}}catch(lt){nr(a,a.return,lt)}}function t5(s){var a=s.updateQueue;if(a!==null){var c=s.stateNode;try{Gr(a,c)}catch(f){nr(s,s.return,f)}}}function n5(s,a,c){c.props=ku(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){nr(s,a,f)}}function zh(s,a){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(v){nr(s,a,v)}}function Jo(s,a){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){nr(s,a,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){nr(s,a,v)}else c.current=null}function r5(s){var a=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){nr(s,s.return,v)}}function d0(s,a,c){try{var f=s.stateNode;X4(f,s.type,c,a),f[Jn]=a}catch(v){nr(s,s.return,v)}}function s5(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&kc(s.type)||s.tag===4}function h0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||s5(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&kc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function f0(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(s),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=ki));else if(f!==4&&(f===27&&kc(s.type)&&(c=s.stateNode,a=null),s=s.child,s!==null))for(f0(s,a,c),s=s.sibling;s!==null;)f0(s,a,c),s=s.sibling}function jp(s,a,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?c.insertBefore(s,a):c.appendChild(s);else if(f!==4&&(f===27&&kc(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(jp(s,a,c),s=s.sibling;s!==null;)jp(s,a,c),s=s.sibling}function i5(s){var a=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);ui(a,f,c),a[Bn]=s,a[Jn]=c}catch(S){nr(s,s.return,S)}}var Fl=!1,ys=!1,p0=!1,a5=typeof WeakSet=="function"?WeakSet:Set,Ks=null;function C4(s,a){if(s=s.containerInfo,L0=Kp,s=mo(s),Ha(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,S=f.focusNode;f=f.focusOffset;try{c.nodeType,S.nodeType}catch{c=null;break e}var O=0,ne=-1,Se=-1,We=0,lt=0,ht=s,Ke=null;t:for(;;){for(var Ze;ht!==c||v!==0&&ht.nodeType!==3||(ne=O+v),ht!==S||f!==0&&ht.nodeType!==3||(Se=O+f),ht.nodeType===3&&(O+=ht.nodeValue.length),(Ze=ht.firstChild)!==null;)Ke=ht,ht=Ze;for(;;){if(ht===s)break t;if(Ke===c&&++We===v&&(ne=O),Ke===S&&++lt===f&&(Se=O),(Ze=ht.nextSibling)!==null)break;ht=Ke,Ke=ht.parentNode}ht=Ze}c=ne===-1||Se===-1?null:{start:ne,end:Se}}else c=null}c=c||{start:0,end:0}}else c=null;for(F0={focusedElem:s,selectionRange:c},Kp=!1,Ks=a;Ks!==null;)if(a=Ks,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Ks=s;else for(;Ks!==null;){switch(a=Ks,S=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)v=s[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,c=a,v=S.memoizedProps,S=S.memoizedState,f=c.stateNode;try{var Ct=ku(c.type,v);s=f.getSnapshotBeforeUpdate(Ct,S),f.__reactInternalSnapshotBeforeUpdate=s}catch(Kt){nr(c,c.return,Kt)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,c=s.nodeType,c===9)U0(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":U0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=a.sibling,s!==null){s.return=a.return,Ks=s;break}Ks=a.return}}function o5(s,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:Ol(s,c),f&4&&Vh(5,c);break;case 1:if(Ol(s,c),f&4)if(s=c.stateNode,a===null)try{s.componentDidMount()}catch(O){nr(c,c.return,O)}else{var v=ku(c.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(v,a,s.__reactInternalSnapshotBeforeUpdate)}catch(O){nr(c,c.return,O)}}f&64&&t5(c),f&512&&zh(c,c.return);break;case 3:if(Ol(s,c),f&64&&(s=c.updateQueue,s!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{Gr(s,a)}catch(O){nr(c,c.return,O)}}break;case 27:a===null&&f&4&&i5(c);case 26:case 5:Ol(s,c),a===null&&f&4&&r5(c),f&512&&zh(c,c.return);break;case 12:Ol(s,c);break;case 31:Ol(s,c),f&4&&u5(s,c);break;case 13:Ol(s,c),f&4&&d5(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=O4.bind(null,c),s3(s,c))));break;case 22:if(f=c.memoizedState!==null||Fl,!f){a=a!==null&&a.memoizedState!==null||ys,v=Fl;var S=ys;Fl=f,(ys=a)&&!S?Ul(s,c,(c.subtreeFlags&8772)!==0):Ol(s,c),Fl=v,ys=S}break;case 30:break;default:Ol(s,c)}}function l5(s){var a=s.alternate;a!==null&&(s.alternate=null,l5(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&ga(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Rr=null,ia=!1;function Ml(s,a,c){for(c=c.child;c!==null;)c5(s,a,c),c=c.sibling}function c5(s,a,c){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(gt,c)}catch{}switch(c.tag){case 26:ys||Jo(c,a),Ml(s,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:ys||Jo(c,a);var f=Rr,v=ia;kc(c.type)&&(Rr=c.stateNode,ia=!1),Ml(s,a,c),Qh(c.stateNode),Rr=f,ia=v;break;case 5:ys||Jo(c,a);case 6:if(f=Rr,v=ia,Rr=null,Ml(s,a,c),Rr=f,ia=v,Rr!==null)if(ia)try{(Rr.nodeType===9?Rr.body:Rr.nodeName==="HTML"?Rr.ownerDocument.body:Rr).removeChild(c.stateNode)}catch(S){nr(c,a,S)}else try{Rr.removeChild(c.stateNode)}catch(S){nr(c,a,S)}break;case 18:Rr!==null&&(ia?(s=Rr,tb(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),qd(s)):tb(Rr,c.stateNode));break;case 4:f=Rr,v=ia,Rr=c.stateNode.containerInfo,ia=!0,Ml(s,a,c),Rr=f,ia=v;break;case 0:case 11:case 14:case 15:Nc(2,c,a),ys||Nc(4,c,a),Ml(s,a,c);break;case 1:ys||(Jo(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&n5(c,a,f)),Ml(s,a,c);break;case 21:Ml(s,a,c);break;case 22:ys=(f=ys)||c.memoizedState!==null,Ml(s,a,c),ys=f;break;default:Ml(s,a,c)}}function u5(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{qd(s)}catch(c){nr(a,a.return,c)}}}function d5(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{qd(s)}catch(c){nr(a,a.return,c)}}function R4(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new a5),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new a5),a;default:throw Error(r(435,s.tag))}}function Cp(s,a){var c=R4(s);a.forEach(function(f){if(!c.has(f)){c.add(f);var v=U4.bind(null,s,f);f.then(v,v)}})}function aa(s,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],S=s,O=a,ne=O;e:for(;ne!==null;){switch(ne.tag){case 27:if(kc(ne.type)){Rr=ne.stateNode,ia=!1;break e}break;case 5:Rr=ne.stateNode,ia=!1;break e;case 3:case 4:Rr=ne.stateNode.containerInfo,ia=!0;break e}ne=ne.return}if(Rr===null)throw Error(r(160));c5(S,O,v),Rr=null,ia=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)h5(a,s),a=a.sibling}var _o=null;function h5(s,a){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:aa(a,s),oa(s),f&4&&(Nc(3,s,s.return),Vh(3,s),Nc(5,s,s.return));break;case 1:aa(a,s),oa(s),f&512&&(ys||c===null||Jo(c,c.return)),f&64&&Fl&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=_o;if(aa(a,s),oa(s),f&512&&(ys||c===null||Jo(c,c.return)),f&4){var S=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":S=v.getElementsByTagName("title")[0],(!S||S[Bs]||S[Bn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(f),v.head.insertBefore(S,v.querySelector("head > title"))),ui(S,f,c),S[Bn]=s,yr(S),f=S;break e;case"link":var O=hb("link","href",v).get(f+(c.href||""));if(O){for(var ne=0;ne<O.length;ne++)if(S=O[ne],S.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&S.getAttribute("rel")===(c.rel==null?null:c.rel)&&S.getAttribute("title")===(c.title==null?null:c.title)&&S.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){O.splice(ne,1);break t}}S=v.createElement(f),ui(S,f,c),v.head.appendChild(S);break;case"meta":if(O=hb("meta","content",v).get(f+(c.content||""))){for(ne=0;ne<O.length;ne++)if(S=O[ne],S.getAttribute("content")===(c.content==null?null:""+c.content)&&S.getAttribute("name")===(c.name==null?null:c.name)&&S.getAttribute("property")===(c.property==null?null:c.property)&&S.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&S.getAttribute("charset")===(c.charSet==null?null:c.charSet)){O.splice(ne,1);break t}}S=v.createElement(f),ui(S,f,c),v.head.appendChild(S);break;default:throw Error(r(468,f))}S[Bn]=s,yr(S),f=S}s.stateNode=f}else fb(v,s.type,s.stateNode);else s.stateNode=db(v,f,s.memoizedProps);else S!==f?(S===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):S.count--,f===null?fb(v,s.type,s.stateNode):db(v,f,s.memoizedProps)):f===null&&s.stateNode!==null&&d0(s,s.memoizedProps,c.memoizedProps)}break;case 27:aa(a,s),oa(s),f&512&&(ys||c===null||Jo(c,c.return)),c!==null&&f&4&&d0(s,s.memoizedProps,c.memoizedProps);break;case 5:if(aa(a,s),oa(s),f&512&&(ys||c===null||Jo(c,c.return)),s.flags&32){v=s.stateNode;try{ts(v,"")}catch(Ct){nr(s,s.return,Ct)}}f&4&&s.stateNode!=null&&(v=s.memoizedProps,d0(s,v,c!==null?c.memoizedProps:v)),f&1024&&(p0=!0);break;case 6:if(aa(a,s),oa(s),f&4){if(s.stateNode===null)throw Error(r(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(Ct){nr(s,s.return,Ct)}}break;case 3:if($p=null,v=_o,_o=qp(a.containerInfo),aa(a,s),_o=v,oa(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{qd(a.containerInfo)}catch(Ct){nr(s,s.return,Ct)}p0&&(p0=!1,f5(s));break;case 4:f=_o,_o=qp(s.stateNode.containerInfo),aa(a,s),oa(s),_o=f;break;case 12:aa(a,s),oa(s);break;case 31:aa(a,s),oa(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Cp(s,f)));break;case 13:aa(a,s),oa(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ip=ke()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Cp(s,f)));break;case 22:v=s.memoizedState!==null;var Se=c!==null&&c.memoizedState!==null,We=Fl,lt=ys;if(Fl=We||v,ys=lt||Se,aa(a,s),ys=lt,Fl=We,oa(s),f&8192)e:for(a=s.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(c===null||Se||Fl||ys||Du(s)),c=null,a=s;;){if(a.tag===5||a.tag===26){if(c===null){Se=c=a;try{if(S=Se.stateNode,v)O=S.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{ne=Se.stateNode;var ht=Se.memoizedProps.style,Ke=ht!=null&&ht.hasOwnProperty("display")?ht.display:null;ne.style.display=Ke==null||typeof Ke=="boolean"?"":(""+Ke).trim()}}catch(Ct){nr(Se,Se.return,Ct)}}}else if(a.tag===6){if(c===null){Se=a;try{Se.stateNode.nodeValue=v?"":Se.memoizedProps}catch(Ct){nr(Se,Se.return,Ct)}}}else if(a.tag===18){if(c===null){Se=a;try{var Ze=Se.stateNode;v?nb(Ze,!0):nb(Se.stateNode,!1)}catch(Ct){nr(Se,Se.return,Ct)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,Cp(s,c))));break;case 19:aa(a,s),oa(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,Cp(s,f)));break;case 30:break;case 21:break;default:aa(a,s),oa(s)}}function oa(s){var a=s.flags;if(a&2){try{for(var c,f=s.return;f!==null;){if(s5(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,S=h0(s);jp(s,S,v);break;case 5:var O=c.stateNode;c.flags&32&&(ts(O,""),c.flags&=-33);var ne=h0(s);jp(s,ne,O);break;case 3:case 4:var Se=c.stateNode.containerInfo,We=h0(s);f0(s,We,Se);break;default:throw Error(r(161))}}catch(lt){nr(s,s.return,lt)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function f5(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;f5(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Ol(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)o5(s,a.alternate,a),a=a.sibling}function Du(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Nc(4,a,a.return),Du(a);break;case 1:Jo(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&n5(a,a.return,c),Du(a);break;case 27:Qh(a.stateNode);case 26:case 5:Jo(a,a.return),Du(a);break;case 22:a.memoizedState===null&&Du(a);break;case 30:Du(a);break;default:Du(a)}s=s.sibling}}function Ul(s,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,v=s,S=a,O=S.flags;switch(S.tag){case 0:case 11:case 15:Ul(v,S,c),Vh(4,S);break;case 1:if(Ul(v,S,c),f=S,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(We){nr(f,f.return,We)}if(f=S,v=f.updateQueue,v!==null){var ne=f.stateNode;try{var Se=v.shared.hiddenCallbacks;if(Se!==null)for(v.shared.hiddenCallbacks=null,v=0;v<Se.length;v++)Ws(Se[v],ne)}catch(We){nr(f,f.return,We)}}c&&O&64&&t5(S),zh(S,S.return);break;case 27:i5(S);case 26:case 5:Ul(v,S,c),c&&f===null&&O&4&&r5(S),zh(S,S.return);break;case 12:Ul(v,S,c);break;case 31:Ul(v,S,c),c&&O&4&&u5(v,S);break;case 13:Ul(v,S,c),c&&O&4&&d5(v,S);break;case 22:S.memoizedState===null&&Ul(v,S,c),zh(S,S.return);break;case 30:break;default:Ul(v,S,c)}a=a.sibling}}function m0(s,a){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&ju(c))}function g0(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ju(s))}function Eo(s,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)p5(s,a,c,f),a=a.sibling}function p5(s,a,c,f){var v=a.flags;switch(a.tag){case 0:case 11:case 15:Eo(s,a,c,f),v&2048&&Vh(9,a);break;case 1:Eo(s,a,c,f);break;case 3:Eo(s,a,c,f),v&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&ju(s)));break;case 12:if(v&2048){Eo(s,a,c,f),s=a.stateNode;try{var S=a.memoizedProps,O=S.id,ne=S.onPostCommit;typeof ne=="function"&&ne(O,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Se){nr(a,a.return,Se)}}else Eo(s,a,c,f);break;case 31:Eo(s,a,c,f);break;case 13:Eo(s,a,c,f);break;case 23:break;case 22:S=a.stateNode,O=a.alternate,a.memoizedState!==null?S._visibility&2?Eo(s,a,c,f):qh(s,a):S._visibility&2?Eo(s,a,c,f):(S._visibility|=2,kd(s,a,c,f,(a.subtreeFlags&10256)!==0||!1)),v&2048&&m0(O,a);break;case 24:Eo(s,a,c,f),v&2048&&g0(a.alternate,a);break;default:Eo(s,a,c,f)}}function kd(s,a,c,f,v){for(v=v&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var S=s,O=a,ne=c,Se=f,We=O.flags;switch(O.tag){case 0:case 11:case 15:kd(S,O,ne,Se,v),Vh(8,O);break;case 23:break;case 22:var lt=O.stateNode;O.memoizedState!==null?lt._visibility&2?kd(S,O,ne,Se,v):qh(S,O):(lt._visibility|=2,kd(S,O,ne,Se,v)),v&&We&2048&&m0(O.alternate,O);break;case 24:kd(S,O,ne,Se,v),v&&We&2048&&g0(O.alternate,O);break;default:kd(S,O,ne,Se,v)}a=a.sibling}}function qh(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=s,f=a,v=f.flags;switch(f.tag){case 22:qh(c,f),v&2048&&m0(f.alternate,f);break;case 24:qh(c,f),v&2048&&g0(f.alternate,f);break;default:qh(c,f)}a=a.sibling}}var Hh=8192;function Dd(s,a,c){if(s.subtreeFlags&Hh)for(s=s.child;s!==null;)m5(s,a,c),s=s.sibling}function m5(s,a,c){switch(s.tag){case 26:Dd(s,a,c),s.flags&Hh&&s.memoizedState!==null&&g3(c,_o,s.memoizedState,s.memoizedProps);break;case 5:Dd(s,a,c);break;case 3:case 4:var f=_o;_o=qp(s.stateNode.containerInfo),Dd(s,a,c),_o=f;break;case 22:s.memoizedState===null&&(f=s.alternate,f!==null&&f.memoizedState!==null?(f=Hh,Hh=16777216,Dd(s,a,c),Hh=f):Dd(s,a,c));break;default:Dd(s,a,c)}}function g5(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function $h(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Ks=f,v5(f,s)}g5(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)y5(s),s=s.sibling}function y5(s){switch(s.tag){case 0:case 11:case 15:$h(s),s.flags&2048&&Nc(9,s,s.return);break;case 3:$h(s);break;case 12:$h(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Rp(s)):$h(s);break;default:$h(s)}}function Rp(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];Ks=f,v5(f,s)}g5(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Nc(8,a,a.return),Rp(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Rp(a));break;default:Rp(a)}s=s.sibling}}function v5(s,a){for(;Ks!==null;){var c=Ks;switch(c.tag){case 0:case 11:case 15:Nc(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ju(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,Ks=f;else e:for(c=s;Ks!==null;){f=Ks;var v=f.sibling,S=f.return;if(l5(f),f===c){Ks=null;break e}if(v!==null){v.return=S,Ks=v;break e}Ks=S}}}var I4={getCacheForType:function(s){var a=Is(Mr),c=a.data.get(s);return c===void 0&&(c=s(),a.data.set(s,c)),c},cacheSignal:function(){return Is(Mr).controller.signal}},k4=typeof WeakMap=="function"?WeakMap:Map,Wn=0,mr=null,wn=null,En=0,tr=0,Aa=null,Ac=!1,Pd=!1,y0=!1,Bl=0,Xr=0,Tc=0,Pu=0,v0=0,Ta=0,Ld=0,Gh=null,la=null,b0=!1,Ip=0,b5=0,kp=1/0,Dp=null,jc=null,Ds=0,Cc=null,Fd=null,Vl=0,x0=0,w0=null,x5=null,Wh=0,S0=null;function ja(){return(Wn&2)!==0&&En!==0?En&-En:le.T!==null?j0():zr()}function w5(){if(Ta===0)if((En&536870912)===0||xn){var s=Cn;Cn<<=1,(Cn&3932160)===0&&(Cn=262144),Ta=s}else Ta=536870912;return s=xr.current,s!==null&&(s.flags|=32),Ta}function ca(s,a,c){(s===mr&&(tr===2||tr===9)||s.cancelPendingCommit!==null)&&(Md(s,0),Rc(s,En,Ta,!1)),Ut(s,c),((Wn&2)===0||s!==mr)&&(s===mr&&((Wn&2)===0&&(Pu|=c),Xr===4&&Rc(s,En,Ta,!1)),Zo(s))}function S5(s,a,c){if((Wn&6)!==0)throw Error(r(327));var f=!c&&(a&127)===0&&(a&s.expiredLanes)===0||ws(s,a),v=f?L4(s,a):E0(s,a,!0),S=f;do{if(v===0){Pd&&!f&&Rc(s,a,0,!1);break}else{if(c=s.current.alternate,S&&!D4(c)){v=E0(s,a,!1),S=!1;continue}if(v===2){if(S=a,s.errorRecoveryDisabledLanes&S)var O=0;else O=s.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){a=O;e:{var ne=s;v=Gh;var Se=ne.current.memoizedState.isDehydrated;if(Se&&(Md(ne,O).flags|=256),O=E0(ne,O,!1),O!==2){if(y0&&!Se){ne.errorRecoveryDisabledLanes|=S,Pu|=S,v=4;break e}S=la,la=v,S!==null&&(la===null?la=S:la.push.apply(la,S))}v=O}if(S=!1,v!==2)continue}}if(v===1){Md(s,0),Rc(s,a,0,!0);break}e:{switch(f=s,S=v,S){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Rc(f,a,Ta,!Ac);break e;case 2:la=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=Ip+300-ke(),10<v)){if(Rc(f,a,Ta,!Ac),nn(f,0,!0)!==0)break e;Vl=a,f.timeoutHandle=Z5(_5.bind(null,f,c,la,Dp,b0,a,Ta,Pu,Ld,Ac,S,"Throttled",-0,0),v);break e}_5(f,c,la,Dp,b0,a,Ta,Pu,Ld,Ac,S,null,-0,0)}}break}while(!0);Zo(s)}function _5(s,a,c,f,v,S,O,ne,Se,We,lt,ht,Ke,Ze){if(s.timeoutHandle=-1,ht=a.subtreeFlags,ht&8192||(ht&16785408)===16785408){ht={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ki},m5(a,S,ht);var Ct=(S&62914560)===S?Ip-ke():(S&4194048)===S?b5-ke():0;if(Ct=y3(ht,Ct),Ct!==null){Vl=S,s.cancelPendingCommit=Ct(I5.bind(null,s,a,S,c,f,v,O,ne,Se,lt,ht,null,Ke,Ze)),Rc(s,S,O,!We);return}}I5(s,a,S,c,f,v,O,ne,Se)}function D4(s){for(var a=s;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],S=v.getSnapshot;v=v.value;try{if(!Ts(S(),v))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Rc(s,a,c,f){a&=~v0,a&=~Pu,s.suspendedLanes|=a,s.pingedLanes&=~a,f&&(s.warmLanes|=a),f=s.expirationTimes;for(var v=a;0<v;){var S=31-St(v),O=1<<S;f[S]=-1,v&=~O}c!==0&&Qs(s,c,a)}function Pp(){return(Wn&6)===0?(Yh(0),!1):!0}function _0(){if(wn!==null){if(tr===0)var s=wn.return;else s=wn,Ga=Ho=null,Nd(s),ft=null,Dt=0,s=wn;for(;s!==null;)e5(s.alternate,s),s=s.return;wn=null}}function Md(s,a){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,Z4(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Vl=0,_0(),mr=s,wn=c=Qi(s.current,null),En=a,tr=0,Aa=null,Ac=!1,Pd=ws(s,a),y0=!1,Ld=Ta=v0=Pu=Tc=Xr=0,la=Gh=null,b0=!1,(a&8)!==0&&(a|=a&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=a;0<f;){var v=31-St(f),S=1<<v;a|=s[v],f&=~S}return Bl=a,Su(),c}function E5(s,a){qt=null,le.H=Oh,a===Ae||a===de?(a=ct(),tr=3):a===$e?(a=ct(),tr=4):tr=a===t0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Aa=a,wn===null&&(Xr=1,_p(s,Ji(a,s.current)))}function N5(){var s=xr.current;return s===null?!0:(En&4194048)===En?Dn===null:(En&62914560)===En||(En&536870912)!==0?s===Dn:!1}function A5(){var s=le.H;return le.H=Oh,s===null?Oh:s}function T5(){var s=le.A;return le.A=I4,s}function Lp(){Xr=4,Ac||(En&4194048)!==En&&xr.current!==null||(Pd=!0),(Tc&134217727)===0&&(Pu&134217727)===0||mr===null||Rc(mr,En,Ta,!1)}function E0(s,a,c){var f=Wn;Wn|=2;var v=A5(),S=T5();(mr!==s||En!==a)&&(Dp=null,Md(s,a)),a=!1;var O=Xr;e:do try{if(tr!==0&&wn!==null){var ne=wn,Se=Aa;switch(tr){case 8:_0(),O=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(a=!0);var We=tr;if(tr=0,Aa=null,Od(s,ne,Se,We),c&&Pd){O=0;break e}break;default:We=tr,tr=0,Aa=null,Od(s,ne,Se,We)}}P4(),O=Xr;break}catch(lt){E5(s,lt)}while(!0);return a&&s.shellSuspendCounter++,Ga=Ho=null,Wn=f,le.H=v,le.A=S,wn===null&&(mr=null,En=0,Su()),O}function P4(){for(;wn!==null;)j5(wn)}function L4(s,a){var c=Wn;Wn|=2;var f=A5(),v=T5();mr!==s||En!==a?(Dp=null,kp=ke()+500,Md(s,a)):Pd=ws(s,a);e:do try{if(tr!==0&&wn!==null){a=wn;var S=Aa;t:switch(tr){case 1:tr=0,Aa=null,Od(s,a,S,1);break;case 2:case 9:if(qe(S)){tr=0,Aa=null,C5(a);break}a=function(){tr!==2&&tr!==9||mr!==s||(tr=7),Zo(s)},S.then(a,a);break e;case 3:tr=7;break e;case 4:tr=5;break e;case 7:qe(S)?(tr=0,Aa=null,C5(a)):(tr=0,Aa=null,Od(s,a,S,7));break;case 5:var O=null;switch(wn.tag){case 26:O=wn.memoizedState;case 5:case 27:var ne=wn;if(O?pb(O):ne.stateNode.complete){tr=0,Aa=null;var Se=ne.sibling;if(Se!==null)wn=Se;else{var We=ne.return;We!==null?(wn=We,Fp(We)):wn=null}break t}}tr=0,Aa=null,Od(s,a,S,5);break;case 6:tr=0,Aa=null,Od(s,a,S,6);break;case 8:_0(),Xr=6;break e;default:throw Error(r(462))}}F4();break}catch(lt){E5(s,lt)}while(!0);return Ga=Ho=null,le.H=f,le.A=v,Wn=c,wn!==null?0:(mr=null,En=0,Su(),Xr)}function F4(){for(;wn!==null&&!ut();)j5(wn)}function j5(s){var a=J2(s.alternate,s,Bl);s.memoizedProps=s.pendingProps,a===null?Fp(s):wn=a}function C5(s){var a=s,c=a.alternate;switch(a.tag){case 15:case 0:a=G2(c,a,a.pendingProps,a.type,void 0,En);break;case 11:a=G2(c,a,a.pendingProps,a.type.render,a.ref,En);break;case 5:Nd(a);default:e5(c,a),a=wn=Nu(a,Bl),a=J2(c,a,Bl)}s.memoizedProps=s.pendingProps,a===null?Fp(s):wn=a}function Od(s,a,c,f){Ga=Ho=null,Nd(a),ft=null,Dt=0;var v=a.return;try{if(E4(s,v,a,c,En)){Xr=1,_p(s,Ji(c,s.current)),wn=null;return}}catch(S){if(v!==null)throw wn=v,S;Xr=1,_p(s,Ji(c,s.current)),wn=null;return}a.flags&32768?(xn||f===1?s=!0:Pd||(En&536870912)!==0?s=!1:(Ac=s=!0,(f===2||f===9||f===3||f===6)&&(f=xr.current,f!==null&&f.tag===13&&(f.flags|=16384))),R5(a,s)):Fp(a)}function Fp(s){var a=s;do{if((a.flags&32768)!==0){R5(a,Ac);return}s=a.return;var c=T4(a.alternate,a,Bl);if(c!==null){wn=c;return}if(a=a.sibling,a!==null){wn=a;return}wn=a=s}while(a!==null);Xr===0&&(Xr=5)}function R5(s,a){do{var c=j4(s.alternate,s);if(c!==null){c.flags&=32767,wn=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(s=s.sibling,s!==null)){wn=s;return}wn=s=c}while(s!==null);Xr=6,wn=null}function I5(s,a,c,f,v,S,O,ne,Se){s.cancelPendingCommit=null;do Mp();while(Ds!==0);if((Wn&6)!==0)throw Error(r(327));if(a!==null){if(a===s.current)throw Error(r(177));if(S=a.lanes|a.childLanes,S|=dd,ma(s,c,S,O,ne,Se),s===mr&&(wn=mr=null,En=0),Fd=a,Cc=s,Vl=c,x0=S,w0=v,x5=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,B4(tt,function(){return F5(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=le.T,le.T=null,v=ve.p,ve.p=2,O=Wn,Wn|=4;try{C4(s,a,c)}finally{Wn=O,ve.p=v,le.T=f}}Ds=1,k5(),D5(),P5()}}function k5(){if(Ds===1){Ds=0;var s=Cc,a=Fd,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=le.T,le.T=null;var f=ve.p;ve.p=2;var v=Wn;Wn|=4;try{h5(a,s);var S=F0,O=mo(s.containerInfo),ne=S.focusedElem,Se=S.selectionRange;if(O!==ne&&ne&&ne.ownerDocument&&po(ne.ownerDocument.documentElement,ne)){if(Se!==null&&Ha(ne)){var We=Se.start,lt=Se.end;if(lt===void 0&&(lt=We),"selectionStart"in ne)ne.selectionStart=We,ne.selectionEnd=Math.min(lt,ne.value.length);else{var ht=ne.ownerDocument||document,Ke=ht&&ht.defaultView||window;if(Ke.getSelection){var Ze=Ke.getSelection(),Ct=ne.textContent.length,Kt=Math.min(Se.start,Ct),dr=Se.end===void 0?Kt:Math.min(Se.end,Ct);!Ze.extend&&Kt>dr&&(O=dr,dr=Kt,Kt=O);var Ue=pc(ne,Kt),Re=pc(ne,dr);if(Ue&&Re&&(Ze.rangeCount!==1||Ze.anchorNode!==Ue.node||Ze.anchorOffset!==Ue.offset||Ze.focusNode!==Re.node||Ze.focusOffset!==Re.offset)){var Ge=ht.createRange();Ge.setStart(Ue.node,Ue.offset),Ze.removeAllRanges(),Kt>dr?(Ze.addRange(Ge),Ze.extend(Re.node,Re.offset)):(Ge.setEnd(Re.node,Re.offset),Ze.addRange(Ge))}}}}for(ht=[],Ze=ne;Ze=Ze.parentNode;)Ze.nodeType===1&&ht.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof ne.focus=="function"&&ne.focus(),ne=0;ne<ht.length;ne++){var dt=ht[ne];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}Kp=!!L0,F0=L0=null}finally{Wn=v,ve.p=f,le.T=c}}s.current=a,Ds=2}}function D5(){if(Ds===2){Ds=0;var s=Cc,a=Fd,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=le.T,le.T=null;var f=ve.p;ve.p=2;var v=Wn;Wn|=4;try{o5(s,a.alternate,a)}finally{Wn=v,ve.p=f,le.T=c}}Ds=3}}function P5(){if(Ds===4||Ds===3){Ds=0,nt();var s=Cc,a=Fd,c=Vl,f=x5;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ds=5:(Ds=0,Fd=Cc=null,L5(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(jc=null),sr(c),a=a.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(gt,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=le.T,v=ve.p,ve.p=2,le.T=null;try{for(var S=s.onRecoverableError,O=0;O<f.length;O++){var ne=f[O];S(ne.value,{componentStack:ne.stack})}}finally{le.T=a,ve.p=v}}(Vl&3)!==0&&Mp(),Zo(s),v=s.pendingLanes,(c&261930)!==0&&(v&42)!==0?s===S0?Wh++:(Wh=0,S0=s):Wh=0,Yh(0)}}function L5(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,ju(a)))}function Mp(){return k5(),D5(),P5(),F5()}function F5(){if(Ds!==5)return!1;var s=Cc,a=x0;x0=0;var c=sr(Vl),f=le.T,v=ve.p;try{ve.p=32>c?32:c,le.T=null,c=w0,w0=null;var S=Cc,O=Vl;if(Ds=0,Fd=Cc=null,Vl=0,(Wn&6)!==0)throw Error(r(331));var ne=Wn;if(Wn|=4,y5(S.current),p5(S,S.current,O,c),Wn=ne,Yh(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(gt,S)}catch{}return!0}finally{ve.p=v,le.T=f,L5(s,a)}}function M5(s,a,c){a=Ji(c,a),a=e0(s.stateNode,a,2),s=cn(s,a,2),s!==null&&(Ut(s,2),Zo(s))}function nr(s,a,c){if(s.tag===3)M5(s,s,c);else for(;a!==null;){if(a.tag===3){M5(a,s,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(jc===null||!jc.has(f))){s=Ji(c,s),c=O2(2),f=cn(a,c,2),f!==null&&(U2(c,f,a,s),Ut(f,2),Zo(f));break}}a=a.return}}function N0(s,a,c){var f=s.pingCache;if(f===null){f=s.pingCache=new k4;var v=new Set;f.set(a,v)}else v=f.get(a),v===void 0&&(v=new Set,f.set(a,v));v.has(c)||(y0=!0,v.add(c),s=M4.bind(null,s,a,c),a.then(s,s))}function M4(s,a,c){var f=s.pingCache;f!==null&&f.delete(a),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,mr===s&&(En&c)===c&&(Xr===4||Xr===3&&(En&62914560)===En&&300>ke()-Ip?(Wn&2)===0&&Md(s,0):v0|=c,Ld===En&&(Ld=0)),Zo(s)}function O5(s,a){a===0&&(a=qi()),s=yo(s,a),s!==null&&(Ut(s,a),Zo(s))}function O4(s){var a=s.memoizedState,c=0;a!==null&&(c=a.retryLane),O5(s,c)}function U4(s,a){var c=0;switch(s.tag){case 31:case 13:var f=s.stateNode,v=s.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),O5(s,c)}function B4(s,a){return Ce(s,a)}var Op=null,Ud=null,A0=!1,Up=!1,T0=!1,Ic=0;function Zo(s){s!==Ud&&s.next===null&&(Ud===null?Op=Ud=s:Ud=Ud.next=s),Up=!0,A0||(A0=!0,z4())}function Yh(s,a){if(!T0&&Up){T0=!0;do for(var c=!1,f=Op;f!==null;){if(s!==0){var v=f.pendingLanes;if(v===0)var S=0;else{var O=f.suspendedLanes,ne=f.pingedLanes;S=(1<<31-St(42|s)+1)-1,S&=v&~(O&~ne),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(c=!0,z5(f,S))}else S=En,S=nn(f,f===mr?S:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(S&3)===0||ws(f,S)||(c=!0,z5(f,S));f=f.next}while(c);T0=!1}}function V4(){U5()}function U5(){Up=A0=!1;var s=0;Ic!==0&&J4()&&(s=Ic);for(var a=ke(),c=null,f=Op;f!==null;){var v=f.next,S=B5(f,a);S===0?(f.next=null,c===null?Op=v:c.next=v,v===null&&(Ud=c)):(c=f,(s!==0||(S&3)!==0)&&(Up=!0)),f=v}Ds!==0&&Ds!==5||Yh(s),Ic!==0&&(Ic=0)}function B5(s,a){for(var c=s.suspendedLanes,f=s.pingedLanes,v=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var O=31-St(S),ne=1<<O,Se=v[O];Se===-1?((ne&c)===0||(ne&f)!==0)&&(v[O]=us(ne,a)):Se<=a&&(s.expiredLanes|=ne),S&=~ne}if(a=mr,c=En,c=nn(s,s===a?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===a&&(tr===2||tr===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&Je(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||ws(s,c)){if(a=c&-c,a===s.callbackPriority)return a;switch(f!==null&&Je(f),sr(c)){case 2:case 8:c=Qe;break;case 32:c=tt;break;case 268435456:c=De;break;default:c=tt}return f=V5.bind(null,s),c=Ce(c,f),s.callbackPriority=a,s.callbackNode=c,a}return f!==null&&f!==null&&Je(f),s.callbackPriority=2,s.callbackNode=null,2}function V5(s,a){if(Ds!==0&&Ds!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Mp()&&s.callbackNode!==c)return null;var f=En;return f=nn(s,s===mr?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(S5(s,f,a),B5(s,ke()),s.callbackNode!=null&&s.callbackNode===c?V5.bind(null,s):null)}function z5(s,a){if(Mp())return null;S5(s,a,!0)}function z4(){e3(function(){(Wn&6)!==0?Ce(Xe,V4):U5()})}function j0(){if(Ic===0){var s=g;s===0&&(s=Vt,Vt<<=1,(Vt&261888)===0&&(Vt=256)),Ic=s}return Ic}function q5(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zs(""+s)}function H5(s,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,s.id&&c.setAttribute("form",s.id),a.parentNode.insertBefore(c,a),s=new FormData(s),c.parentNode.removeChild(c),s}function q4(s,a,c,f,v){if(a==="submit"&&c&&c.stateNode===v){var S=q5((v[Jn]||null).action),O=f.submitter;O&&(a=(a=O[Jn]||null)?q5(a.formAction):O.getAttribute("formAction"),a!==null&&(S=a,O=null));var ne=new fs("action","action",null,f,v);s.push({event:ne,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ic!==0){var Se=O?H5(v,O):new FormData(v);Yg(c,{pending:!0,data:Se,method:v.method,action:S},null,Se)}}else typeof S=="function"&&(ne.preventDefault(),Se=O?H5(v,O):new FormData(v),Yg(c,{pending:!0,data:Se,method:v.method,action:S},S,Se))},currentTarget:v}]})}}for(var C0=0;C0<Al.length;C0++){var R0=Al[C0],H4=R0.toLowerCase(),$4=R0[0].toUpperCase()+R0.slice(1);Xi(H4,"on"+$4)}Xi(Nl,"onAnimationEnd"),Xi(xu,"onAnimationIteration"),Xi(_h,"onAnimationStart"),Xi("dblclick","onDoubleClick"),Xi("focusin","onFocus"),Xi("focusout","onBlur"),Xi(up,"onTransitionRun"),Xi(dp,"onTransitionStart"),Xi(hp,"onTransitionCancel"),Xi(Eh,"onTransitionEnd"),Ii("onMouseEnter",["mouseout","mouseover"]),Ii("onMouseLeave",["mouseout","mouseover"]),Ii("onPointerEnter",["pointerout","pointerover"]),Ii("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kh));function $5(s,a){a=(a&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],v=f.event;f=f.listeners;e:{var S=void 0;if(a)for(var O=f.length-1;0<=O;O--){var ne=f[O],Se=ne.instance,We=ne.currentTarget;if(ne=ne.listener,Se!==S&&v.isPropagationStopped())break e;S=ne,v.currentTarget=We;try{S(v)}catch(lt){wu(lt)}v.currentTarget=null,S=Se}else for(O=0;O<f.length;O++){if(ne=f[O],Se=ne.instance,We=ne.currentTarget,ne=ne.listener,Se!==S&&v.isPropagationStopped())break e;S=ne,v.currentTarget=We;try{S(v)}catch(lt){wu(lt)}v.currentTarget=null,S=Se}}}}function Sn(s,a){var c=a[Us];c===void 0&&(c=a[Us]=new Set);var f=s+"__bubble";c.has(f)||(G5(a,s,2,!1),c.add(f))}function I0(s,a,c){var f=0;a&&(f|=4),G5(c,s,f,a)}var Bp="_reactListening"+Math.random().toString(36).slice(2);function k0(s){if(!s[Bp]){s[Bp]=!0,ko.forEach(function(c){c!=="selectionchange"&&(G4.has(c)||I0(c,!1,s),I0(c,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Bp]||(a[Bp]=!0,I0("selectionchange",!1,a))}}function G5(s,a,c,f){switch(wb(a)){case 2:var v=x3;break;case 8:v=w3;break;default:v=W0}c=v.bind(null,a,c,s),v=void 0,!ao||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),f?v!==void 0?s.addEventListener(a,c,{capture:!0,passive:v}):s.addEventListener(a,c,!0):v!==void 0?s.addEventListener(a,c,{passive:v}):s.addEventListener(a,c,!1)}function D0(s,a,c,f,v){var S=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var O=f.tag;if(O===3||O===4){var ne=f.stateNode.containerInfo;if(ne===v)break;if(O===4)for(O=f.return;O!==null;){var Se=O.tag;if((Se===3||Se===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;ne!==null;){if(O=Js(ne),O===null)return;if(Se=O.tag,Se===5||Se===6||Se===26||Se===27){f=S=O;continue e}ne=ne.parentNode}}f=f.return}Fa(function(){var We=S,lt=qs(c),ht=[];e:{var Ke=Nh.get(s);if(Ke!==void 0){var Ze=fs,Ct=s;switch(s){case"keypress":if(ni(c)===0)break e;case"keydown":case"keyup":Ze=vn;break;case"focusin":Ct="focus",Ze=Pi;break;case"focusout":Ct="blur",Ze=Pi;break;case"beforeblur":case"afterblur":Ze=Pi;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Oo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Yi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=j;break;case Nl:case xu:case _h:Ze=E;break;case Eh:Ze=se;break;case"scroll":case"scrollend":Ze=Ma;break;case"wheel":Ze=Ye;break;case"copy":case"cut":case"paste":Ze=he;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Xn;break;case"toggle":case"beforetoggle":Ze=Jt}var Kt=(a&4)!==0,dr=!Kt&&(s==="scroll"||s==="scrollend"),Ue=Kt?Ke!==null?Ke+"Capture":null:Ke;Kt=[];for(var Re=We,Ge;Re!==null;){var dt=Re;if(Ge=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||Ge===null||Ue===null||(dt=ns(Re,Ue),dt!=null&&Kt.push(Xh(Re,dt,Ge))),dr)break;Re=Re.return}0<Kt.length&&(Ke=new Ze(Ke,Ct,null,c,lt),ht.push({event:Ke,listeners:Kt}))}}if((a&7)===0){e:{if(Ke=s==="mouseover"||s==="pointerover",Ze=s==="mouseout"||s==="pointerout",Ke&&c!==xa&&(Ct=c.relatedTarget||c.fromElement)&&(Js(Ct)||Ct[qr]))break e;if((Ze||Ke)&&(Ke=lt.window===lt?lt:(Ke=lt.ownerDocument)?Ke.defaultView||Ke.parentWindow:window,Ze?(Ct=c.relatedTarget||c.toElement,Ze=We,Ct=Ct?Js(Ct):null,Ct!==null&&(dr=o(Ct),Kt=Ct.tag,Ct!==dr||Kt!==5&&Kt!==27&&Kt!==6)&&(Ct=null)):(Ze=null,Ct=We),Ze!==Ct)){if(Kt=Oo,dt="onMouseLeave",Ue="onMouseEnter",Re="mouse",(s==="pointerout"||s==="pointerover")&&(Kt=Xn,dt="onPointerLeave",Ue="onPointerEnter",Re="pointer"),dr=Ze==null?Ke:Zs(Ze),Ge=Ct==null?Ke:Zs(Ct),Ke=new Kt(dt,Re+"leave",Ze,c,lt),Ke.target=dr,Ke.relatedTarget=Ge,dt=null,Js(lt)===We&&(Kt=new Kt(Ue,Re+"enter",Ct,c,lt),Kt.target=Ge,Kt.relatedTarget=dr,dt=Kt),dr=dt,Ze&&Ct)t:{for(Kt=W4,Ue=Ze,Re=Ct,Ge=0,dt=Ue;dt;dt=Kt(dt))Ge++;dt=0;for(var Gt=Re;Gt;Gt=Kt(Gt))dt++;for(;0<Ge-dt;)Ue=Kt(Ue),Ge--;for(;0<dt-Ge;)Re=Kt(Re),dt--;for(;Ge--;){if(Ue===Re||Re!==null&&Ue===Re.alternate){Kt=Ue;break t}Ue=Kt(Ue),Re=Kt(Re)}Kt=null}else Kt=null;Ze!==null&&W5(ht,Ke,Ze,Kt,!1),Ct!==null&&dr!==null&&W5(ht,dr,Ct,Kt,!0)}}e:{if(Ke=We?Zs(We):window,Ze=Ke.nodeName&&Ke.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&Ke.type==="file")var qn=Bo;else if(vu(Ke))if(bi)qn=za;else{qn=Lr;var Ft=hc}else Ze=Ke.nodeName,!Ze||Ze.toLowerCase()!=="input"||Ke.type!=="checkbox"&&Ke.type!=="radio"?We&&Lo(We.elementType)&&(qn=Bo):qn=ud;if(qn&&(qn=qn(s,We))){Fi(ht,qn,c,lt);break e}Ft&&Ft(s,Ke,We),s==="focusout"&&We&&Ke.type==="number"&&We.memoizedProps.value!=null&&vl(Ke,"number",Ke.value)}switch(Ft=We?Zs(We):window,s){case"focusin":(vu(Ft)||Ft.contentEditable==="true")&&(Mi=Ft,go=We,Hs=null);break;case"focusout":Hs=go=Mi=null;break;case"mousedown":Ki=!0;break;case"contextmenu":case"mouseup":case"dragend":Ki=!1,On(ht,c,lt);break;case"selectionchange":if(El)break;case"keydown":case"keyup":On(ht,c,lt)}var hn;if(mn)e:{switch(s){case"compositionstart":var Nn="onCompositionStart";break e;case"compositionend":Nn="onCompositionEnd";break e;case"compositionupdate":Nn="onCompositionUpdate";break e}Nn=void 0}else Ua?Li(s,c)&&(Nn="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Nn="onCompositionStart");Nn&&(Ns&&c.locale!=="ko"&&(Ua||Nn!=="onCompositionStart"?Nn==="onCompositionEnd"&&Ua&&(hn=Sl()):(ti=lt,oo="value"in ti?ti.value:ti.textContent,Ua=!0)),Ft=Vp(We,Nn),0<Ft.length&&(Nn=new Fe(Nn,s,null,c,lt),ht.push({event:Nn,listeners:Ft}),hn?Nn.data=hn:(hn=Oa(c),hn!==null&&(Nn.data=hn)))),(hn=ps?ii(s,c):co(s,c))&&(Nn=Vp(We,"onBeforeInput"),0<Nn.length&&(Ft=new Fe("onBeforeInput","beforeinput",null,c,lt),ht.push({event:Ft,listeners:Nn}),Ft.data=hn)),q4(ht,s,We,c,lt)}$5(ht,a)})}function Xh(s,a,c){return{instance:s,listener:a,currentTarget:c}}function Vp(s,a){for(var c=a+"Capture",f=[];s!==null;){var v=s,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=ns(s,c),v!=null&&f.unshift(Xh(s,v,S)),v=ns(s,a),v!=null&&f.push(Xh(s,v,S))),s.tag===3)return f;s=s.return}return[]}function W4(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function W5(s,a,c,f,v){for(var S=a._reactName,O=[];c!==null&&c!==f;){var ne=c,Se=ne.alternate,We=ne.stateNode;if(ne=ne.tag,Se!==null&&Se===f)break;ne!==5&&ne!==26&&ne!==27||We===null||(Se=We,v?(We=ns(c,S),We!=null&&O.unshift(Xh(c,We,Se))):v||(We=ns(c,S),We!=null&&O.push(Xh(c,We,Se)))),c=c.return}O.length!==0&&s.push({event:a,listeners:O})}var Y4=/\r\n?/g,K4=/\u0000|\uFFFD/g;function Y5(s){return(typeof s=="string"?s:""+s).replace(Y4,`
`).replace(K4,"")}function K5(s,a){return a=Y5(a),Y5(s)===a}function ur(s,a,c,f,v,S){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||ts(s,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&ts(s,""+f);break;case"className":hs(s,"class",f);break;case"tabIndex":hs(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":hs(s,c,f);break;case"style":wl(s,f,S);break;case"data":if(a!=="object"){hs(s,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=zs(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(c==="formAction"?(a!=="input"&&ur(s,a,"name",v.name,v,null),ur(s,a,"formEncType",v.formEncType,v,null),ur(s,a,"formMethod",v.formMethod,v,null),ur(s,a,"formTarget",v.formTarget,v,null)):(ur(s,a,"encType",v.encType,v,null),ur(s,a,"method",v.method,v,null),ur(s,a,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=zs(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=ki);break;case"onScroll":f!=null&&Sn("scroll",s);break;case"onScrollEnd":f!=null&&Sn("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=zs(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":Sn("beforetoggle",s),Sn("toggle",s),ei(s,"popover",f);break;case"xlinkActuate":Nr(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Nr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Nr(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Nr(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Nr(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Nr(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Nr(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":ei(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Fo.get(c)||c,ei(s,c,f))}}function P0(s,a,c,f,v,S){switch(c){case"style":wl(s,f,S);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof f=="string"?ts(s,f):(typeof f=="number"||typeof f=="bigint")&&ts(s,""+f);break;case"onScroll":f!=null&&Sn("scroll",s);break;case"onScrollEnd":f!=null&&Sn("scrollend",s);break;case"onClick":f!=null&&(s.onclick=ki);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vs.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),a=c.slice(2,v?c.length-7:void 0),S=s[Jn]||null,S=S!=null?S[c]:null,typeof S=="function"&&s.removeEventListener(a,S,v),typeof f=="function")){typeof S!="function"&&S!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(a,f,v);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):ei(s,c,f)}}}function ui(s,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Sn("error",s),Sn("load",s);var f=!1,v=!1,S;for(S in c)if(c.hasOwnProperty(S)){var O=c[S];if(O!=null)switch(S){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ur(s,a,S,O,c,null)}}v&&ur(s,a,"srcSet",c.srcSet,c,null),f&&ur(s,a,"src",c.src,c,null);return;case"input":Sn("invalid",s);var ne=S=O=v=null,Se=null,We=null;for(f in c)if(c.hasOwnProperty(f)){var lt=c[f];if(lt!=null)switch(f){case"name":v=lt;break;case"type":O=lt;break;case"checked":Se=lt;break;case"defaultChecked":We=lt;break;case"value":S=lt;break;case"defaultValue":ne=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(r(137,a));break;default:ur(s,a,f,lt,c,null)}}cc(s,S,ne,Se,We,O,v,!1);return;case"select":Sn("invalid",s),f=O=S=null;for(v in c)if(c.hasOwnProperty(v)&&(ne=c[v],ne!=null))switch(v){case"value":S=ne;break;case"defaultValue":O=ne;break;case"multiple":f=ne;default:ur(s,a,v,ne,c,null)}a=S,c=O,s.multiple=!!f,a!=null?Es(s,!!f,a,!1):c!=null&&Es(s,!!f,c,!0);return;case"textarea":Sn("invalid",s),S=v=f=null;for(O in c)if(c.hasOwnProperty(O)&&(ne=c[O],ne!=null))switch(O){case"value":f=ne;break;case"defaultValue":v=ne;break;case"children":S=ne;break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(91));break;default:ur(s,a,O,ne,c,null)}va(s,f,v,S);return;case"option":for(Se in c)if(c.hasOwnProperty(Se)&&(f=c[Se],f!=null))switch(Se){case"selected":s.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ur(s,a,Se,f,c,null)}return;case"dialog":Sn("beforetoggle",s),Sn("toggle",s),Sn("cancel",s),Sn("close",s);break;case"iframe":case"object":Sn("load",s);break;case"video":case"audio":for(f=0;f<Kh.length;f++)Sn(Kh[f],s);break;case"image":Sn("error",s),Sn("load",s);break;case"details":Sn("toggle",s);break;case"embed":case"source":case"link":Sn("error",s),Sn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in c)if(c.hasOwnProperty(We)&&(f=c[We],f!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:ur(s,a,We,f,c,null)}return;default:if(Lo(a)){for(lt in c)c.hasOwnProperty(lt)&&(f=c[lt],f!==void 0&&P0(s,a,lt,f,c,void 0));return}}for(ne in c)c.hasOwnProperty(ne)&&(f=c[ne],f!=null&&ur(s,a,ne,f,c,null))}function X4(s,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,O=null,ne=null,Se=null,We=null,lt=null;for(Ze in c){var ht=c[Ze];if(c.hasOwnProperty(Ze)&&ht!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Se=ht;default:f.hasOwnProperty(Ze)||ur(s,a,Ze,null,f,ht)}}for(var Ke in f){var Ze=f[Ke];if(ht=c[Ke],f.hasOwnProperty(Ke)&&(Ze!=null||ht!=null))switch(Ke){case"type":S=Ze;break;case"name":v=Ze;break;case"checked":We=Ze;break;case"defaultChecked":lt=Ze;break;case"value":O=Ze;break;case"defaultValue":ne=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(r(137,a));break;default:Ze!==ht&&ur(s,a,Ke,Ze,f,ht)}}so(s,O,ne,Se,We,lt,S,v);return;case"select":Ze=O=ne=Ke=null;for(S in c)if(Se=c[S],c.hasOwnProperty(S)&&Se!=null)switch(S){case"value":break;case"multiple":Ze=Se;default:f.hasOwnProperty(S)||ur(s,a,S,null,f,Se)}for(v in f)if(S=f[v],Se=c[v],f.hasOwnProperty(v)&&(S!=null||Se!=null))switch(v){case"value":Ke=S;break;case"defaultValue":ne=S;break;case"multiple":O=S;default:S!==Se&&ur(s,a,v,S,f,Se)}a=ne,c=O,f=Ze,Ke!=null?Es(s,!!c,Ke,!1):!!f!=!!c&&(a!=null?Es(s,!!c,a,!0):Es(s,!!c,c?[]:"",!1));return;case"textarea":Ze=Ke=null;for(ne in c)if(v=c[ne],c.hasOwnProperty(ne)&&v!=null&&!f.hasOwnProperty(ne))switch(ne){case"value":break;case"children":break;default:ur(s,a,ne,null,f,v)}for(O in f)if(v=f[O],S=c[O],f.hasOwnProperty(O)&&(v!=null||S!=null))switch(O){case"value":Ke=v;break;case"defaultValue":Ze=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==S&&ur(s,a,O,v,f,S)}bl(s,Ke,Ze);return;case"option":for(var Ct in c)if(Ke=c[Ct],c.hasOwnProperty(Ct)&&Ke!=null&&!f.hasOwnProperty(Ct))switch(Ct){case"selected":s.selected=!1;break;default:ur(s,a,Ct,null,f,Ke)}for(Se in f)if(Ke=f[Se],Ze=c[Se],f.hasOwnProperty(Se)&&Ke!==Ze&&(Ke!=null||Ze!=null))switch(Se){case"selected":s.selected=Ke&&typeof Ke!="function"&&typeof Ke!="symbol";break;default:ur(s,a,Se,Ke,f,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in c)Ke=c[Kt],c.hasOwnProperty(Kt)&&Ke!=null&&!f.hasOwnProperty(Kt)&&ur(s,a,Kt,null,f,Ke);for(We in f)if(Ke=f[We],Ze=c[We],f.hasOwnProperty(We)&&Ke!==Ze&&(Ke!=null||Ze!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(r(137,a));break;default:ur(s,a,We,Ke,f,Ze)}return;default:if(Lo(a)){for(var dr in c)Ke=c[dr],c.hasOwnProperty(dr)&&Ke!==void 0&&!f.hasOwnProperty(dr)&&P0(s,a,dr,void 0,f,Ke);for(lt in f)Ke=f[lt],Ze=c[lt],!f.hasOwnProperty(lt)||Ke===Ze||Ke===void 0&&Ze===void 0||P0(s,a,lt,Ke,f,Ze);return}}for(var Ue in c)Ke=c[Ue],c.hasOwnProperty(Ue)&&Ke!=null&&!f.hasOwnProperty(Ue)&&ur(s,a,Ue,null,f,Ke);for(ht in f)Ke=f[ht],Ze=c[ht],!f.hasOwnProperty(ht)||Ke===Ze||Ke==null&&Ze==null||ur(s,a,ht,Ke,f,Ze)}function X5(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Q4(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var v=c[f],S=v.transferSize,O=v.initiatorType,ne=v.duration;if(S&&ne&&X5(O)){for(O=0,ne=v.responseEnd,f+=1;f<c.length;f++){var Se=c[f],We=Se.startTime;if(We>ne)break;var lt=Se.transferSize,ht=Se.initiatorType;lt&&X5(ht)&&(Se=Se.responseEnd,O+=lt*(Se<ne?1:(ne-We)/(Se-We)))}if(--f,a+=8*(S+O)/(v.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var L0=null,F0=null;function zp(s){return s.nodeType===9?s:s.ownerDocument}function Q5(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J5(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function M0(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var O0=null;function J4(){var s=window.event;return s&&s.type==="popstate"?s===O0?!1:(O0=s,!0):(O0=null,!1)}var Z5=typeof setTimeout=="function"?setTimeout:void 0,Z4=typeof clearTimeout=="function"?clearTimeout:void 0,eb=typeof Promise=="function"?Promise:void 0,e3=typeof queueMicrotask=="function"?queueMicrotask:typeof eb<"u"?function(s){return eb.resolve(null).then(s).catch(t3)}:Z5;function t3(s){setTimeout(function(){throw s})}function kc(s){return s==="head"}function tb(s,a){var c=a,f=0;do{var v=c.nextSibling;if(s.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(f===0){s.removeChild(v),qd(a);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Qh(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Qh(c);for(var S=c.firstChild;S;){var O=S.nextSibling,ne=S.nodeName;S[Bs]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&S.rel.toLowerCase()==="stylesheet"||c.removeChild(S),S=O}}else c==="body"&&Qh(s.ownerDocument.body);c=v}while(c);qd(a)}function nb(s,a){var c=s;s=0;do{var f=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=f}while(c)}function U0(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":U0(c),ga(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function n3(s,a,c,f){for(;s.nodeType===1;){var v=c;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[Bs])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=Ka(s.nextSibling),s===null)break}return null}function r3(s,a,c){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Ka(s.nextSibling),s===null))return null;return s}function rb(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Ka(s.nextSibling),s===null))return null;return s}function B0(s){return s.data==="$?"||s.data==="$~"}function V0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function s3(s,a){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||c.readyState!=="loading")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Ka(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var z0=null;function sb(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(a===0)return Ka(s.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}s=s.nextSibling}return null}function ib(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return s;a--}else c!=="/$"&&c!=="/&"||a++}s=s.previousSibling}return null}function ab(s,a,c){switch(a=zp(c),s){case"html":if(s=a.documentElement,!s)throw Error(r(452));return s;case"head":if(s=a.head,!s)throw Error(r(453));return s;case"body":if(s=a.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Qh(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);ga(s)}var Xa=new Map,ob=new Set;function qp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var zl=ve.d;ve.d={f:i3,r:a3,D:o3,C:l3,L:c3,m:u3,X:h3,S:d3,M:f3};function i3(){var s=zl.f(),a=Pp();return s||a}function a3(s){var a=_s(s);a!==null&&a.tag===5&&a.type==="form"?E2(a):zl.r(s)}var Bd=typeof document>"u"?null:document;function lb(s,a,c){var f=Bd;if(f&&typeof a=="string"&&a){var v=Ar(a);v='link[rel="'+s+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),ob.has(v)||(ob.add(v),s={rel:s,crossOrigin:c,href:a},f.querySelector(v)===null&&(a=f.createElement("link"),ui(a,"link",s),yr(a),f.head.appendChild(a)))}}function o3(s){zl.D(s),lb("dns-prefetch",s,null)}function l3(s,a){zl.C(s,a),lb("preconnect",s,a)}function c3(s,a,c){zl.L(s,a,c);var f=Bd;if(f&&s&&a){var v='link[rel="preload"][as="'+Ar(a)+'"]';a==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Ar(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Ar(c.imageSizes)+'"]')):v+='[href="'+Ar(s)+'"]';var S=v;switch(a){case"style":S=Vd(s);break;case"script":S=zd(s)}Xa.has(S)||(s=w({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:s,as:a},c),Xa.set(S,s),f.querySelector(v)!==null||a==="style"&&f.querySelector(Jh(S))||a==="script"&&f.querySelector(Zh(S))||(a=f.createElement("link"),ui(a,"link",s),yr(a),f.head.appendChild(a)))}}function u3(s,a){zl.m(s,a);var c=Bd;if(c&&s){var f=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+Ar(f)+'"][href="'+Ar(s)+'"]',S=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=zd(s)}if(!Xa.has(S)&&(s=w({rel:"modulepreload",href:s},a),Xa.set(S,s),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Zh(S)))return}f=c.createElement("link"),ui(f,"link",s),yr(f),c.head.appendChild(f)}}}function d3(s,a,c){zl.S(s,a,c);var f=Bd;if(f&&s){var v=mi(f).hoistableStyles,S=Vd(s);a=a||"default";var O=v.get(S);if(!O){var ne={loading:0,preload:null};if(O=f.querySelector(Jh(S)))ne.loading=5;else{s=w({rel:"stylesheet",href:s,"data-precedence":a},c),(c=Xa.get(S))&&q0(s,c);var Se=O=f.createElement("link");yr(Se),ui(Se,"link",s),Se._p=new Promise(function(We,lt){Se.onload=We,Se.onerror=lt}),Se.addEventListener("load",function(){ne.loading|=1}),Se.addEventListener("error",function(){ne.loading|=2}),ne.loading|=4,Hp(O,a,f)}O={type:"stylesheet",instance:O,count:1,state:ne},v.set(S,O)}}}function h3(s,a){zl.X(s,a);var c=Bd;if(c&&s){var f=mi(c).hoistableScripts,v=zd(s),S=f.get(v);S||(S=c.querySelector(Zh(v)),S||(s=w({src:s,async:!0},a),(a=Xa.get(v))&&H0(s,a),S=c.createElement("script"),yr(S),ui(S,"link",s),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(v,S))}}function f3(s,a){zl.M(s,a);var c=Bd;if(c&&s){var f=mi(c).hoistableScripts,v=zd(s),S=f.get(v);S||(S=c.querySelector(Zh(v)),S||(s=w({src:s,async:!0,type:"module"},a),(a=Xa.get(v))&&H0(s,a),S=c.createElement("script"),yr(S),ui(S,"link",s),c.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},f.set(v,S))}}function cb(s,a,c,f){var v=(v=ge.current)?qp(v):null;if(!v)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=Vd(c.href),c=mi(v).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Vd(c.href);var S=mi(v).hoistableStyles,O=S.get(s);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,O),(S=v.querySelector(Jh(s)))&&!S._p&&(O.instance=S,O.state.loading=5),Xa.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Xa.set(s,c),S||p3(v,s,c,O.state))),a&&f===null)throw Error(r(528,""));return O}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=zd(c),c=mi(v).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Vd(s){return'href="'+Ar(s)+'"'}function Jh(s){return'link[rel="stylesheet"]['+s+"]"}function ub(s){return w({},s,{"data-precedence":s.precedence,precedence:null})}function p3(s,a,c,f){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=s.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),ui(a,"link",c),yr(a),s.head.appendChild(a))}function zd(s){return'[src="'+Ar(s)+'"]'}function Zh(s){return"script[async]"+s}function db(s,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=s.querySelector('style[data-href~="'+Ar(c.href)+'"]');if(f)return a.instance=f,yr(f),f;var v=w({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),yr(f),ui(f,"style",v),Hp(f,c.precedence,s),a.instance=f;case"stylesheet":v=Vd(c.href);var S=s.querySelector(Jh(v));if(S)return a.state.loading|=4,a.instance=S,yr(S),S;f=ub(c),(v=Xa.get(v))&&q0(f,v),S=(s.ownerDocument||s).createElement("link"),yr(S);var O=S;return O._p=new Promise(function(ne,Se){O.onload=ne,O.onerror=Se}),ui(S,"link",f),a.state.loading|=4,Hp(S,c.precedence,s),a.instance=S;case"script":return S=zd(c.src),(v=s.querySelector(Zh(S)))?(a.instance=v,yr(v),v):(f=c,(v=Xa.get(S))&&(f=w({},c),H0(f,v)),s=s.ownerDocument||s,v=s.createElement("script"),yr(v),ui(v,"link",f),s.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,Hp(f,c.precedence,s));return a.instance}function Hp(s,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,S=v,O=0;O<f.length;O++){var ne=f[O];if(ne.dataset.precedence===a)S=ne;else if(S!==v)break}S?S.parentNode.insertBefore(s,S.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(s,a.firstChild))}function q0(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function H0(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var $p=null;function hb(s,a,c){if($p===null){var f=new Map,v=$p=new Map;v.set(c,f)}else v=$p,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),v=0;v<c.length;v++){var S=c[v];if(!(S[Bs]||S[Bn]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var O=S.getAttribute(a)||"";O=s+O;var ne=f.get(O);ne?ne.push(S):f.set(O,[S])}}return f}function fb(s,a,c){s=s.ownerDocument||s,s.head.insertBefore(c,a==="title"?s.querySelector("head > title"):null)}function m3(s,a,c){if(c===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function pb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function g3(s,a,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Vd(f.href),S=a.querySelector(Jh(v));if(S){a=S._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Gp.bind(s),a.then(s,s)),c.state.loading|=4,c.instance=S,yr(S);return}S=a.ownerDocument||a,f=ub(f),(v=Xa.get(v))&&q0(f,v),S=S.createElement("link"),yr(S);var O=S;O._p=new Promise(function(ne,Se){O.onload=ne,O.onerror=Se}),ui(S,"link",f),c.instance=S}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=Gp.bind(s),a.addEventListener("load",c),a.addEventListener("error",c))}}var $0=0;function y3(s,a){return s.stylesheets&&s.count===0&&Yp(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var f=setTimeout(function(){if(s.stylesheets&&Yp(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4+a);0<s.imgBytes&&$0===0&&($0=62500*Q4());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Yp(s,s.stylesheets),s.unsuspend)){var S=s.unsuspend;s.unsuspend=null,S()}},(s.imgBytes>$0?50:800)+a);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Gp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Yp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Wp=null;function Yp(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Wp=new Map,a.forEach(v3,s),Wp=null,Gp.call(s))}function v3(s,a){if(!(a.state.loading&4)){var c=Wp.get(s);if(c)var f=c.get(null);else{c=new Map,Wp.set(s,c);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var O=v[S];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(c.set(O.dataset.precedence,O),f=O)}f&&c.set(null,f)}v=a.instance,O=v.getAttribute("data-precedence"),S=c.get(O)||f,S===f&&c.set(null,v),c.set(O,v),this.count++,f=Gp.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),S?S.parentNode.insertBefore(v,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),a.state.loading|=4}}var ef={$$typeof:$,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function b3(s,a,c,f,v,S,O,ne,Se){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=es(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=es(0),this.hiddenUpdates=es(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function mb(s,a,c,f,v,S,O,ne,Se,We,lt,ht){return s=new b3(s,a,c,O,Se,We,lt,ht,ne),a=1,S===!0&&(a|=24),S=Gs(3,null,null,a),s.current=S,S.stateNode=s,a=xc(),a.refCount++,s.pooledCache=a,a.refCount++,S.memoizedState={element:f,isDehydrated:c,cache:a},wt(S),s}function gb(s){return s?(s=js,s):js}function yb(s,a,c,f,v,S){v=gb(v),f.context===null?f.context=v:f.pendingContext=v,f=Yt(a),f.payload={element:c},S=S===void 0?null:S,S!==null&&(f.callback=S),c=cn(s,f,a),c!==null&&(ca(c,s,a),$n(c,s,a))}function vb(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<a?c:a}}function G0(s,a){vb(s,a),(s=s.alternate)&&vb(s,a)}function bb(s){if(s.tag===13||s.tag===31){var a=yo(s,67108864);a!==null&&ca(a,s,67108864),G0(s,67108864)}}function xb(s){if(s.tag===13||s.tag===31){var a=ja();a=Kn(a);var c=yo(s,a);c!==null&&ca(c,s,a),G0(s,a)}}var Kp=!0;function x3(s,a,c,f){var v=le.T;le.T=null;var S=ve.p;try{ve.p=2,W0(s,a,c,f)}finally{ve.p=S,le.T=v}}function w3(s,a,c,f){var v=le.T;le.T=null;var S=ve.p;try{ve.p=8,W0(s,a,c,f)}finally{ve.p=S,le.T=v}}function W0(s,a,c,f){if(Kp){var v=Y0(f);if(v===null)D0(s,a,f,Xp,c),Sb(s,f);else if(_3(v,s,a,c,f))f.stopPropagation();else if(Sb(s,f),a&4&&-1<S3.indexOf(s)){for(;v!==null;){var S=_s(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var O=It(S.pendingLanes);if(O!==0){var ne=S;for(ne.pendingLanes|=2,ne.entangledLanes|=2;O;){var Se=1<<31-St(O);ne.entanglements[1]|=Se,O&=~Se}Zo(S),(Wn&6)===0&&(kp=ke()+500,Yh(0))}}break;case 31:case 13:ne=yo(S,2),ne!==null&&ca(ne,S,2),Pp(),G0(S,2)}if(S=Y0(f),S===null&&D0(s,a,f,Xp,c),S===v)break;v=S}v!==null&&f.stopPropagation()}else D0(s,a,f,null,c)}}function Y0(s){return s=qs(s),K0(s)}var Xp=null;function K0(s){if(Xp=null,s=Js(s),s!==null){var a=o(s);if(a===null)s=null;else{var c=a.tag;if(c===13){if(s=u(a),s!==null)return s;s=null}else if(c===31){if(s=d(a),s!==null)return s;s=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Xp=s,null}function wb(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Xe:return 2;case Qe:return 8;case tt:case Oe:return 32;case De:return 268435456;default:return 32}default:return 32}}var X0=!1,Dc=null,Pc=null,Lc=null,tf=new Map,nf=new Map,Fc=[],S3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sb(s,a){switch(s){case"focusin":case"focusout":Dc=null;break;case"dragenter":case"dragleave":Pc=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":tf.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":nf.delete(a.pointerId)}}function rf(s,a,c,f,v,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:S,targetContainers:[v]},a!==null&&(a=_s(a),a!==null&&bb(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),s)}function _3(s,a,c,f,v){switch(a){case"focusin":return Dc=rf(Dc,s,a,c,f,v),!0;case"dragenter":return Pc=rf(Pc,s,a,c,f,v),!0;case"mouseover":return Lc=rf(Lc,s,a,c,f,v),!0;case"pointerover":var S=v.pointerId;return tf.set(S,rf(tf.get(S)||null,s,a,c,f,v)),!0;case"gotpointercapture":return S=v.pointerId,nf.set(S,rf(nf.get(S)||null,s,a,c,f,v)),!0}return!1}function _b(s){var a=Js(s.target);if(a!==null){var c=o(a);if(c!==null){if(a=c.tag,a===13){if(a=u(c),a!==null){s.blockedOn=a,Ss(s.priority,function(){xb(c)});return}}else if(a===31){if(a=d(c),a!==null){s.blockedOn=a,Ss(s.priority,function(){xb(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qp(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var c=Y0(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);xa=f,c.target.dispatchEvent(f),xa=null}else return a=_s(c),a!==null&&bb(a),s.blockedOn=c,!1;a.shift()}return!0}function Eb(s,a,c){Qp(s)&&c.delete(a)}function E3(){X0=!1,Dc!==null&&Qp(Dc)&&(Dc=null),Pc!==null&&Qp(Pc)&&(Pc=null),Lc!==null&&Qp(Lc)&&(Lc=null),tf.forEach(Eb),nf.forEach(Eb)}function Jp(s,a){s.blockedOn===a&&(s.blockedOn=null,X0||(X0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,E3)))}var Zp=null;function Nb(s){Zp!==s&&(Zp=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zp===s&&(Zp=null);for(var a=0;a<s.length;a+=3){var c=s[a],f=s[a+1],v=s[a+2];if(typeof f!="function"){if(K0(f||c)===null)continue;break}var S=_s(c);S!==null&&(s.splice(a,3),a-=3,Yg(S,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function qd(s){function a(Se){return Jp(Se,s)}Dc!==null&&Jp(Dc,s),Pc!==null&&Jp(Pc,s),Lc!==null&&Jp(Lc,s),tf.forEach(a),nf.forEach(a);for(var c=0;c<Fc.length;c++){var f=Fc[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<Fc.length&&(c=Fc[0],c.blockedOn===null);)_b(c),c.blockedOn===null&&Fc.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],S=c[f+1],O=v[Jn]||null;if(typeof S=="function")O||Nb(c);else if(O){var ne=null;if(S&&S.hasAttribute("formAction")){if(v=S,O=S[Jn]||null)ne=O.formAction;else if(K0(v)!==null)continue}else ne=O.action;typeof ne=="function"?c[f+1]=ne:(c.splice(f,3),f-=3),Nb(c)}}}function Ab(){function s(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function a(){v!==null&&(v(),v=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),v!==null&&(v(),v=null)}}}function Q0(s){this._internalRoot=s}em.prototype.render=Q0.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=ja();yb(c,f,s,a,null,null)},em.prototype.unmount=Q0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;yb(s.current,2,null,s,null,null),Pp(),a[qr]=null}};function em(s){this._internalRoot=s}em.prototype.unstable_scheduleHydration=function(s){if(s){var a=zr();s={blockedOn:null,target:s,priority:a};for(var c=0;c<Fc.length&&a!==0&&a<Fc[c].priority;c++);Fc.splice(c,0,s),c===0&&_b(s)}};var Tb=e.version;if(Tb!=="19.2.0")throw Error(r(527,Tb,"19.2.0"));ve.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(a),s=s!==null?m(s):null,s=s===null?null:s.stateNode,s};var N3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tm.isDisabled&&tm.supportsFiber)try{gt=tm.inject(N3),et=tm}catch{}}return af.createRoot=function(s,a){if(!i(s))throw Error(r(299));var c=!1,f="",v=P2,S=L2,O=F2;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(O=a.onRecoverableError)),a=mb(s,1,!1,null,null,c,f,null,v,S,O,Ab),s[qr]=a.current,k0(s),new Q0(a)},af.hydrateRoot=function(s,a,c){if(!i(s))throw Error(r(299));var f=!1,v="",S=P2,O=L2,ne=F2,Se=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(S=c.onUncaughtError),c.onCaughtError!==void 0&&(O=c.onCaughtError),c.onRecoverableError!==void 0&&(ne=c.onRecoverableError),c.formState!==void 0&&(Se=c.formState)),a=mb(s,1,!0,a,c??null,f,v,Se,S,O,ne,Ab),a.context=gb(null),c=a.current,f=ja(),f=Kn(f),v=Yt(f),v.callback=null,cn(c,v,f),c=f,a.current.lanes=c,Ut(a,c),Zo(a),s[qr]=a.current,k0(s),new em(a)},af.version="19.2.0",af}var Mb;function F3(){if(Mb)return ey.exports;Mb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ey.exports=L3(),ey.exports}var M3=F3();const O3=JS(M3);var Ob="popstate";function U3(n={}){function e(r,i){let{pathname:o,search:u,hash:d}=r.location;return Ky("",{pathname:o,search:u,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Pf(i)}return V3(e,t,null,n)}function Ur(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function jo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B3(){return Math.random().toString(36).substring(2,10)}function Ub(n,e){return{usr:n.state,key:n.key,idx:e}}function Ky(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ph(e):e,state:t,key:e&&e.key||r||B3()}}function Pf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ph(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function V3(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,u=i.history,d="POP",h=null,p=m();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function m(){return(u.state||{idx:null}).idx}function w(){d="POP";let C=m(),k=C==null?null:C-p;p=C,h&&h({action:d,location:R.location,delta:k})}function _(C,k){d="PUSH";let q=Ky(R.location,C,k);p=m()+1;let $=Ub(q,p),z=R.createHref(q);try{u.pushState($,"",z)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;i.location.assign(z)}o&&h&&h({action:d,location:R.location,delta:1})}function x(C,k){d="REPLACE";let q=Ky(R.location,C,k);p=m();let $=Ub(q,p),z=R.createHref(q);u.replaceState($,"",z),o&&h&&h({action:d,location:R.location,delta:0})}function A(C){return z3(C)}let R={get action(){return d},get location(){return n(i,u)},listen(C){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Ob,w),h=C,()=>{i.removeEventListener(Ob,w),h=null}},createHref(C){return e(i,C)},createURL:A,encodeLocation(C){let k=A(C);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:_,replace:x,go(C){return u.go(C)}};return R}function z3(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ur(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Pf(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function ZS(n,e,t="/"){return q3(n,e,t,!1)}function q3(n,e,t,r){let i=typeof e=="string"?ph(e):e,o=Zl(i.pathname||"/",t);if(o==null)return null;let u=e_(n);H3(u);let d=null;for(let h=0;d==null&&h<u.length;++h){let p=tT(o);d=Z3(u[h],p,r)}return d}function e_(n,e=[],t=[],r="",i=!1){let o=(u,d,h=i,p)=>{let m={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:d,route:u};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&h)return;Ur(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let w=Xl([r,m.relativePath]),_=t.concat(m);u.children&&u.children.length>0&&(Ur(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),e_(u.children,e,_,w,h)),!(u.path==null&&!u.index)&&e.push({path:w,score:Q3(w,u.index),routesMeta:_})};return n.forEach((u,d)=>{if(u.path===""||!u.path?.includes("?"))o(u,d);else for(let h of t_(u.path))o(u,d,!0,h)}),e}function t_(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let u=t_(r.join("/")),d=[];return d.push(...u.map(h=>h===""?o:[o,h].join("/"))),i&&d.push(...u),d.map(h=>n.startsWith("/")&&h===""?"/":h)}function H3(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:J3(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var $3=/^:[\w-]+$/,G3=3,W3=2,Y3=1,K3=10,X3=-2,Bb=n=>n==="*";function Q3(n,e){let t=n.split("/"),r=t.length;return t.some(Bb)&&(r+=X3),e&&(r+=W3),t.filter(i=>!Bb(i)).reduce((i,o)=>i+($3.test(o)?G3:o===""?Y3:K3),r)}function J3(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Z3(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",u=[];for(let d=0;d<r.length;++d){let h=r[d],p=d===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",w=Pm({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),_=h.route;if(!w&&p&&t&&!r[r.length-1].route.index&&(w=Pm({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!w)return null;Object.assign(i,w.params),u.push({params:i,pathname:Xl([o,w.pathname]),pathnameBase:aT(Xl([o,w.pathnameBase])),route:_}),w.pathnameBase!=="/"&&(o=Xl([o,w.pathnameBase]))}return u}function Pm(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=eT(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],u=o.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:w},_)=>{if(m==="*"){let A=d[_]||"";u=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const x=d[_];return w&&!x?p[m]=void 0:p[m]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:u,pattern:n}}function eT(n,e=!1,t=!0){jo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,h)=>(r.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function tT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Zl(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var nT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rT=n=>nT.test(n);function sT(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?ph(n):n,o;if(t)if(rT(t))o=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),jo(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?o=Vb(t.substring(1),"/"):o=Vb(t,e)}else o=e;return{pathname:o,search:oT(r),hash:lT(i)}}function Vb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function sy(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function n_(n){let e=iT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function r_(n,e,t,r=!1){let i;typeof n=="string"?i=ph(n):(i={...n},Ur(!i.pathname||!i.pathname.includes("?"),sy("?","pathname","search",i)),Ur(!i.pathname||!i.pathname.includes("#"),sy("#","pathname","hash",i)),Ur(!i.search||!i.search.includes("#"),sy("#","search","hash",i)));let o=n===""||i.pathname==="",u=o?"/":i.pathname,d;if(u==null)d=t;else{let w=e.length-1;if(!r&&u.startsWith("..")){let _=u.split("/");for(;_[0]==="..";)_.shift(),w-=1;i.pathname=_.join("/")}d=w>=0?e[w]:"/"}let h=sT(i,d),p=u&&u!=="/"&&u.endsWith("/"),m=(o||u===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}var Xl=n=>n.join("/").replace(/\/\/+/g,"/"),aT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,lT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var s_=["POST","PUT","PATCH","DELETE"];new Set(s_);var uT=["GET",...s_];new Set(uT);var mh=X.createContext(null);mh.displayName="DataRouter";var cg=X.createContext(null);cg.displayName="DataRouterState";X.createContext(!1);var i_=X.createContext({isTransitioning:!1});i_.displayName="ViewTransition";var dT=X.createContext(new Map);dT.displayName="Fetchers";var hT=X.createContext(null);hT.displayName="Await";var fl=X.createContext(null);fl.displayName="Navigation";var Gf=X.createContext(null);Gf.displayName="Location";var ac=X.createContext({outlet:null,matches:[],isDataRoute:!1});ac.displayName="Route";var V1=X.createContext(null);V1.displayName="RouteError";function fT(n,{relative:e}={}){Ur(Wf(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=X.useContext(fl),{hash:i,pathname:o,search:u}=Yf(n,{relative:e}),d=o;return t!=="/"&&(d=o==="/"?t:Xl([t,o])),r.createHref({pathname:d,search:u,hash:i})}function Wf(){return X.useContext(Gf)!=null}function no(){return Ur(Wf(),"useLocation() may be used only in the context of a <Router> component."),X.useContext(Gf).location}var a_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function o_(n){X.useContext(fl).static||X.useLayoutEffect(n)}function Vr(){let{isDataRoute:n}=X.useContext(ac);return n?AT():pT()}function pT(){Ur(Wf(),"useNavigate() may be used only in the context of a <Router> component.");let n=X.useContext(mh),{basename:e,navigator:t}=X.useContext(fl),{matches:r}=X.useContext(ac),{pathname:i}=no(),o=JSON.stringify(n_(r)),u=X.useRef(!1);return o_(()=>{u.current=!0}),X.useCallback((h,p={})=>{if(jo(u.current,a_),!u.current)return;if(typeof h=="number"){t.go(h);return}let m=r_(h,JSON.parse(o),i,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Xl([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,o,i,n])}X.createContext(null);function Yf(n,{relative:e}={}){let{matches:t}=X.useContext(ac),{pathname:r}=no(),i=JSON.stringify(n_(t));return X.useMemo(()=>r_(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function mT(n,e){return l_(n,e)}function l_(n,e,t,r,i){Ur(Wf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=X.useContext(fl),{matches:u}=X.useContext(ac),d=u[u.length-1],h=d?d.params:{},p=d?d.pathname:"/",m=d?d.pathnameBase:"/",w=d&&d.route;{let q=w&&w.path||"";c_(p,!w||q.endsWith("*")||q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${q}"> to <Route path="${q==="/"?"*":`${q}/*`}">.`)}let _=no(),x;if(e){let q=typeof e=="string"?ph(e):e;Ur(m==="/"||q.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${q.pathname}" was given in the \`location\` prop.`),x=q}else x=_;let A=x.pathname||"/",R=A;if(m!=="/"){let q=m.replace(/^\//,"").split("/");R="/"+A.replace(/^\//,"").split("/").slice(q.length).join("/")}let C=ZS(n,{pathname:R});jo(w||C!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),jo(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=xT(C&&C.map(q=>Object.assign({},q,{params:Object.assign({},h,q.params),pathname:Xl([m,o.encodeLocation?o.encodeLocation(q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?m:Xl([m,o.encodeLocation?o.encodeLocation(q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:q.pathnameBase])})),u,t,r,i);return e&&k?X.createElement(Gf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},k):k}function gT(){let n=NT(),e=cT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=X.createElement(X.Fragment,null,X.createElement("p",null," Hey developer "),X.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",X.createElement("code",{style:o},"ErrorBoundary")," or"," ",X.createElement("code",{style:o},"errorElement")," prop on your route.")),X.createElement(X.Fragment,null,X.createElement("h2",null,"Unexpected Application Error!"),X.createElement("h3",{style:{fontStyle:"italic"}},e),t?X.createElement("pre",{style:i},t):null,u)}var yT=X.createElement(gT,null),vT=class extends X.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?X.createElement(ac.Provider,{value:this.props.routeContext},X.createElement(V1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bT({routeContext:n,match:e,children:t}){let r=X.useContext(mh);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),X.createElement(ac.Provider,{value:n},t)}function xT(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,u=t?.errors;if(u!=null){let m=o.findIndex(w=>w.route.id&&u?.[w.route.id]!==void 0);Ur(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,h=-1;if(t)for(let m=0;m<o.length;m++){let w=o[m];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(h=m),w.route.id){let{loaderData:_,errors:x}=t,A=w.route.loader&&!_.hasOwnProperty(w.route.id)&&(!x||x[w.route.id]===void 0);if(w.route.lazy||A){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let p=t&&r?(m,w)=>{r(m,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:w})}:void 0;return o.reduceRight((m,w,_)=>{let x,A=!1,R=null,C=null;t&&(x=u&&w.route.id?u[w.route.id]:void 0,R=w.route.errorElement||yT,d&&(h<0&&_===0?(c_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,C=null):h===_&&(A=!0,C=w.route.hydrateFallbackElement||null)));let k=e.concat(o.slice(0,_+1)),q=()=>{let $;return x?$=R:A?$=C:w.route.Component?$=X.createElement(w.route.Component,null):w.route.element?$=w.route.element:$=m,X.createElement(bT,{match:w,routeContext:{outlet:m,matches:k,isDataRoute:t!=null},children:$})};return t&&(w.route.ErrorBoundary||w.route.errorElement||_===0)?X.createElement(vT,{location:t.location,revalidation:t.revalidation,component:R,error:x,children:q(),routeContext:{outlet:null,matches:k,isDataRoute:!0},onError:p}):q()},null)}function z1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wT(n){let e=X.useContext(mh);return Ur(e,z1(n)),e}function ST(n){let e=X.useContext(cg);return Ur(e,z1(n)),e}function _T(n){let e=X.useContext(ac);return Ur(e,z1(n)),e}function q1(n){let e=_T(n),t=e.matches[e.matches.length-1];return Ur(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ET(){return q1("useRouteId")}function NT(){let n=X.useContext(V1),e=ST("useRouteError"),t=q1("useRouteError");return n!==void 0?n:e.errors?.[t]}function AT(){let{router:n}=wT("useNavigate"),e=q1("useNavigate"),t=X.useRef(!1);return o_(()=>{t.current=!0}),X.useCallback(async(i,o={})=>{jo(t.current,a_),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var zb={};function c_(n,e,t){!e&&!zb[n]&&(zb[n]=!0,jo(!1,t))}X.memo(TT);function TT({routes:n,future:e,state:t,unstable_onError:r}){return l_(n,void 0,t,r,e)}function kr(n){Ur(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function jT({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){Ur(!Wf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),d=X.useMemo(()=>({basename:u,navigator:i,static:o,future:{}}),[u,i,o]);typeof t=="string"&&(t=ph(t));let{pathname:h="/",search:p="",hash:m="",state:w=null,key:_="default"}=t,x=X.useMemo(()=>{let A=Zl(h,u);return A==null?null:{location:{pathname:A,search:p,hash:m,state:w,key:_},navigationType:r}},[u,h,p,m,w,_,r]);return jo(x!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${m}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:X.createElement(fl.Provider,{value:d},X.createElement(Gf.Provider,{children:e,value:x}))}function CT({children:n,location:e}){return mT(Xy(n),e)}function Xy(n,e=[]){let t=[];return X.Children.forEach(n,(r,i)=>{if(!X.isValidElement(r))return;let o=[...e,i];if(r.type===X.Fragment){t.push.apply(t,Xy(r.props.children,o));return}Ur(r.type===kr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ur(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Xy(r.props.children,o)),t.push(u)}),t}var xm="get",wm="application/x-www-form-urlencoded";function ug(n){return n!=null&&typeof n.tagName=="string"}function RT(n){return ug(n)&&n.tagName.toLowerCase()==="button"}function IT(n){return ug(n)&&n.tagName.toLowerCase()==="form"}function kT(n){return ug(n)&&n.tagName.toLowerCase()==="input"}function DT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PT(n,e){return n.button===0&&(!e||e==="_self")&&!DT(n)}var nm=null;function LT(){if(nm===null)try{new FormData(document.createElement("form"),0),nm=!1}catch{nm=!0}return nm}var FT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function iy(n){return n!=null&&!FT.has(n)?(jo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wm}"`),null):n}function MT(n,e){let t,r,i,o,u;if(IT(n)){let d=n.getAttribute("action");r=d?Zl(d,e):null,t=n.getAttribute("method")||xm,i=iy(n.getAttribute("enctype"))||wm,o=new FormData(n)}else if(RT(n)||kT(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||d.getAttribute("action");if(r=h?Zl(h,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||xm,i=iy(n.getAttribute("formenctype"))||iy(d.getAttribute("enctype"))||wm,o=new FormData(d,n),!LT()){let{name:p,type:m,value:w}=n;if(m==="image"){let _=p?`${p}.`:"";o.append(`${_}x`,"0"),o.append(`${_}y`,"0")}else p&&o.append(p,w)}}else{if(ug(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xm,r=null,i=wm,u=n}return o&&i==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function H1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function OT(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Zl(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function UT(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function BT(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function VT(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let u=await UT(o,t);return u.links?u.links():[]}return[]}));return $T(r.flat(1).filter(BT).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function qb(n,e,t,r,i,o){let u=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,d=(h,p)=>t[p].pathname!==h.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,p)=>u(h,p)||d(h,p)):o==="data"?e.filter((h,p)=>{let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(u(h,p)||d(h,p))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function zT(n,e,{includeHydrateFallback:t}={}){return qT(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function qT(n){return[...new Set(n)]}function HT(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function $T(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(HT(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function u_(){let n=X.useContext(mh);return H1(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function GT(){let n=X.useContext(cg);return H1(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $1=X.createContext(void 0);$1.displayName="FrameworkContext";function d_(){let n=X.useContext($1);return H1(n,"You must render this element inside a <HydratedRouter> element"),n}function WT(n,e){let t=X.useContext($1),[r,i]=X.useState(!1),[o,u]=X.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:p,onMouseLeave:m,onTouchStart:w}=e,_=X.useRef(null);X.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let R=k=>{k.forEach(q=>{u(q.isIntersecting)})},C=new IntersectionObserver(R,{threshold:.5});return _.current&&C.observe(_.current),()=>{C.disconnect()}}},[n]),X.useEffect(()=>{if(r){let R=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(R)}}},[r]);let x=()=>{i(!0)},A=()=>{i(!1),u(!1)};return t?n!=="intent"?[o,_,{}]:[o,_,{onFocus:of(d,x),onBlur:of(h,A),onMouseEnter:of(p,x),onMouseLeave:of(m,A),onTouchStart:of(w,x)}]:[!1,_,{}]}function of(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function YT({page:n,...e}){let{router:t}=u_(),r=X.useMemo(()=>ZS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?X.createElement(XT,{page:n,matches:r,...e}):null}function KT(n){let{manifest:e,routeModules:t}=d_(),[r,i]=X.useState([]);return X.useEffect(()=>{let o=!1;return VT(n,e,t).then(u=>{o||i(u)}),()=>{o=!0}},[n,e,t]),r}function XT({page:n,matches:e,...t}){let r=no(),{manifest:i,routeModules:o}=d_(),{basename:u}=u_(),{loaderData:d,matches:h}=GT(),p=X.useMemo(()=>qb(n,e,h,i,r,"data"),[n,e,h,i,r]),m=X.useMemo(()=>qb(n,e,h,i,r,"assets"),[n,e,h,i,r]),w=X.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,R=!1;if(e.forEach(k=>{let q=i.routes[k.route.id];!q||!q.hasLoader||(!p.some($=>$.route.id===k.route.id)&&k.route.id in d&&o[k.route.id]?.shouldRevalidate||q.hasClientLoader?R=!0:A.add(k.route.id))}),A.size===0)return[];let C=OT(n,u,"data");return R&&A.size>0&&C.searchParams.set("_routes",e.filter(k=>A.has(k.route.id)).map(k=>k.route.id).join(",")),[C.pathname+C.search]},[u,d,r,i,p,e,n,o]),_=X.useMemo(()=>zT(m,i),[m,i]),x=KT(m);return X.createElement(X.Fragment,null,w.map(A=>X.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),_.map(A=>X.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),x.map(({key:A,link:R})=>X.createElement("link",{key:A,nonce:t.nonce,...R})))}function QT(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var h_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{h_&&(window.__reactRouterVersion="7.9.6")}catch{}function JT({basename:n,children:e,window:t}){let r=X.useRef();r.current==null&&(r.current=U3({window:t,v5Compat:!0}));let i=r.current,[o,u]=X.useState({action:i.action,location:i.location}),d=X.useCallback(h=>{X.startTransition(()=>u(h))},[u]);return X.useLayoutEffect(()=>i.listen(d),[i,d]),X.createElement(jT,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var f_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,p_=X.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:u,state:d,target:h,to:p,preventScrollReset:m,viewTransition:w,..._},x){let{basename:A}=X.useContext(fl),R=typeof p=="string"&&f_.test(p),C,k=!1;if(typeof p=="string"&&R&&(C=p,h_))try{let I=new URL(window.location.href),V=p.startsWith("//")?new URL(I.protocol+p):new URL(p),T=Zl(V.pathname,A);V.origin===I.origin&&T!=null?p=T+V.search+V.hash:k=!0}catch{jo(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=fT(p,{relative:i}),[$,z,oe]=WT(r,_),ce=nj(p,{replace:u,state:d,target:h,preventScrollReset:m,relative:i,viewTransition:w});function H(I){e&&e(I),I.defaultPrevented||ce(I)}let D=X.createElement("a",{..._,...oe,href:C||q,onClick:k||o?e:H,ref:QT(x,z),target:h,"data-discover":!R&&t==="render"?"true":void 0});return $&&!R?X.createElement(X.Fragment,null,D,X.createElement(YT,{page:q})):D});p_.displayName="Link";var ZT=X.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:u,viewTransition:d,children:h,...p},m){let w=Yf(u,{relative:p.relative}),_=no(),x=X.useContext(cg),{navigator:A,basename:R}=X.useContext(fl),C=x!=null&&oj(w)&&d===!0,k=A.encodeLocation?A.encodeLocation(w).pathname:w.pathname,q=_.pathname,$=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(q=q.toLowerCase(),$=$?$.toLowerCase():null,k=k.toLowerCase()),$&&R&&($=Zl($,R)||$);const z=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let oe=q===k||!i&&q.startsWith(k)&&q.charAt(z)==="/",ce=$!=null&&($===k||!i&&$.startsWith(k)&&$.charAt(k.length)==="/"),H={isActive:oe,isPending:ce,isTransitioning:C},D=oe?e:void 0,I;typeof r=="function"?I=r(H):I=[r,oe?"active":null,ce?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let V=typeof o=="function"?o(H):o;return X.createElement(p_,{...p,"aria-current":D,className:I,ref:m,style:V,to:u,viewTransition:d},typeof h=="function"?h(H):h)});ZT.displayName="NavLink";var ej=X.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:u=xm,action:d,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:w,..._},x)=>{let A=ij(),R=aj(d,{relative:p}),C=u.toLowerCase()==="get"?"get":"post",k=typeof d=="string"&&f_.test(d),q=$=>{if(h&&h($),$.defaultPrevented)return;$.preventDefault();let z=$.nativeEvent.submitter,oe=z?.getAttribute("formmethod")||u;A(z||$.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:i,state:o,relative:p,preventScrollReset:m,viewTransition:w})};return X.createElement("form",{ref:x,method:C,action:R,onSubmit:r?h:q,..._,"data-discover":!k&&n==="render"?"true":void 0})});ej.displayName="Form";function tj(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m_(n){let e=X.useContext(mh);return Ur(e,tj(n)),e}function nj(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:u}={}){let d=Vr(),h=no(),p=Yf(n,{relative:o});return X.useCallback(m=>{if(PT(m,e)){m.preventDefault();let w=t!==void 0?t:Pf(h)===Pf(p);d(n,{replace:w,state:r,preventScrollReset:i,relative:o,viewTransition:u})}},[h,d,p,t,r,e,n,i,o,u])}var rj=0,sj=()=>`__${String(++rj)}__`;function ij(){let{router:n}=m_("useSubmit"),{basename:e}=X.useContext(fl),t=ET();return X.useCallback(async(r,i={})=>{let{action:o,method:u,encType:d,formData:h,body:p}=MT(r,e);if(i.navigate===!1){let m=i.fetcherKey||sj();await n.fetch(m,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:p,formMethod:i.method||u,formEncType:i.encType||d,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:h,body:p,formMethod:i.method||u,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function aj(n,{relative:e}={}){let{basename:t}=X.useContext(fl),r=X.useContext(ac);Ur(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...Yf(n||".",{relative:e})},u=no();if(n==null){o.search=u.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(m=>m==="")){d.delete("index"),h.filter(w=>w).forEach(w=>d.append("index",w));let m=d.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Xl([t,o.pathname])),Pf(o)}function oj(n,{relative:e}={}){let t=X.useContext(i_);Ur(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=m_("useViewTransitionState"),i=Yf(n,{relative:e});if(!t.isTransitioning)return!1;let o=Zl(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Zl(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Pm(i.pathname,u)!=null||Pm(i.pathname,o)!=null}const lj=()=>{};var Hb={};const g_=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},cj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],u=n[t++],d=n[t++],h=((i&7)<<18|(o&63)<<12|(u&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|u&63)}}return e.join("")},y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],u=i+1<n.length,d=u?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,m=o>>2,w=(o&3)<<4|d>>4;let _=(d&15)<<2|p>>6,x=p&63;h||(x=64,u||(_=64)),r.push(t[m],t[w],t[_],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(g_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):cj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const w=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||d==null||p==null||w==null)throw new uj;const _=o<<2|d>>4;if(r.push(_),p!==64){const x=d<<4&240|p>>2;if(r.push(x),w!==64){const A=p<<6&192|w;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class uj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dj=function(n){const e=g_(n);return y_.encodeByteArray(e,!0)},Lm=function(n){return dj(n).replace(/\./g,"")},v_=function(n){try{return y_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const fj=()=>hj().__FIREBASE_DEFAULTS__,pj=()=>{if(typeof process>"u"||typeof Hb>"u")return;const n=Hb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},mj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&v_(n[1]);return e&&JSON.parse(e)},dg=()=>{try{return lj()||fj()||pj()||mj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},b_=n=>dg()?.emulatorHosts?.[n],x_=n=>{const e=b_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},w_=()=>dg()?.config,S_=n=>dg()?.[`_${n}`];class gj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}function du(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G1(n){return(await fetch(n,{credentials:"include"})).ok}function __(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Lm(JSON.stringify(t)),Lm(JSON.stringify(u)),""].join(".")}const vf={};function yj(){const n={prod:[],emulator:[]};for(const e of Object.keys(vf))vf[e]?n.emulator.push(e):n.prod.push(e);return n}function vj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let $b=!1;function W1(n,e){if(typeof window>"u"||typeof document>"u"||!du(window.location.host)||vf[n]===e||vf[n]||$b)return;vf[n]=e;function t(_){return`__firebase__banner__${_}`}const r="__firebase__banner",o=yj().prod.length>0;function u(){const _=document.getElementById(r);_&&_.remove()}function d(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function h(_,x){_.setAttribute("width","24"),_.setAttribute("id",x),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function p(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{$b=!0,u()},_}function m(_,x){_.setAttribute("id",x),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function w(){const _=vj(r),x=t("text"),A=document.getElementById(x)||document.createElement("span"),R=t("learnmore"),C=document.getElementById(R)||document.createElement("a"),k=t("preprendIcon"),q=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const $=_.element;d($),m(C,R);const z=p();h(q,k),$.append(q,A,C,z),document.body.appendChild($)}o?(A.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}function Ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ci())}function xj(){const n=dg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Sj(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _j(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ej(){const n=Ci();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Nj(){return!xj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Aj(){try{return typeof indexedDB=="object"}catch{return!1}}function Tj(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const jj="FirebaseError";class pl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jj,Object.setPrototypeOf(this,pl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kf.prototype.create)}}class Kf{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],u=o?Cj(o,r):"Error",d=`${this.serviceName}: ${u} (${i}).`;return new pl(i,d,r)}}function Cj(n,e){return n.replace(Rj,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Rj=/\{\$([^}]+)}/g;function Ij(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Xu(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],u=e[i];if(Gb(o)&&Gb(u)){if(!Xu(o,u))return!1}else if(o!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Gb(n){return n!==null&&typeof n=="object"}function Xf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hf(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ff(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kj(n,e){const t=new Dj(n,e);return t.subscribe.bind(t)}class Dj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Pj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ay),i.error===void 0&&(i.error=ay),i.complete===void 0&&(i.complete=ay);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pj(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ay(){}function Er(n){return n&&n._delegate?n._delegate:n}class tu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Lu="[DEFAULT]";class Lj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new gj;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mj(e))try{this.getOrInitializeService({instanceIdentifier:Lu})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Lu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Lu){return this.instances.has(e)}getOptions(e=Lu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(o);r===d&&u.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Fj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lu){return this.component?this.component.multipleInstances?e:Lu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Fj(n){return n===Lu?void 0:n}function Mj(n){return n.instantiationMode==="EAGER"}class Oj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Lj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var An;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(An||(An={}));const Uj={debug:An.DEBUG,verbose:An.VERBOSE,info:An.INFO,warn:An.WARN,error:An.ERROR,silent:An.SILENT},Bj=An.INFO,Vj={[An.DEBUG]:"log",[An.VERBOSE]:"log",[An.INFO]:"info",[An.WARN]:"warn",[An.ERROR]:"error"},zj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Vj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Y1{constructor(e){this.name=e,this._logLevel=Bj,this._logHandler=zj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in An))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,An.DEBUG,...e),this._logHandler(this,An.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,An.VERBOSE,...e),this._logHandler(this,An.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,An.INFO,...e),this._logHandler(this,An.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,An.WARN,...e),this._logHandler(this,An.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,An.ERROR,...e),this._logHandler(this,An.ERROR,...e)}}const qj=(n,e)=>e.some(t=>n instanceof t);let Wb,Yb;function Hj(){return Wb||(Wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $j(){return Yb||(Yb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E_=new WeakMap,Qy=new WeakMap,N_=new WeakMap,oy=new WeakMap,K1=new WeakMap;function Gj(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(Kc(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&E_.set(t,n)}).catch(()=>{}),K1.set(e,n),e}function Wj(n){if(Qy.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});Qy.set(n,e)}let Jy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Qy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||N_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Kc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Yj(n){Jy=n(Jy)}function Kj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ly(this),e,...t);return N_.set(r,e.sort?e.sort():[e]),Kc(r)}:$j().includes(n)?function(...e){return n.apply(ly(this),e),Kc(E_.get(this))}:function(...e){return Kc(n.apply(ly(this),e))}}function Xj(n){return typeof n=="function"?Kj(n):(n instanceof IDBTransaction&&Wj(n),qj(n,Hj())?new Proxy(n,Jy):n)}function Kc(n){if(n instanceof IDBRequest)return Gj(n);if(oy.has(n))return oy.get(n);const e=Xj(n);return e!==n&&(oy.set(n,e),K1.set(e,n)),e}const ly=n=>K1.get(n);function Qj(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const u=indexedDB.open(n,e),d=Kc(u);return r&&u.addEventListener("upgradeneeded",h=>{r(Kc(u.result),h.oldVersion,h.newVersion,Kc(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),d.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const Jj=["get","getKey","getAll","getAllKeys","count"],Zj=["put","add","delete","clear"],cy=new Map;function Kb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cy.get(e))return cy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Zj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Jj.includes(t)))return;const o=async function(u,...d){const h=this.transaction(u,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),i&&h.done]))[0]};return cy.set(e,o),o}Yj(n=>({...n,get:(e,t,r)=>Kb(e,t)||n.get(e,t,r),has:(e,t)=>!!Kb(e,t)||n.has(e,t)}));class eC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function tC(n){return n.getComponent()?.type==="VERSION"}const Zy="@firebase/app",Xb="0.14.6";const ec=new Y1("@firebase/app"),nC="@firebase/app-compat",rC="@firebase/analytics-compat",sC="@firebase/analytics",iC="@firebase/app-check-compat",aC="@firebase/app-check",oC="@firebase/auth",lC="@firebase/auth-compat",cC="@firebase/database",uC="@firebase/data-connect",dC="@firebase/database-compat",hC="@firebase/functions",fC="@firebase/functions-compat",pC="@firebase/installations",mC="@firebase/installations-compat",gC="@firebase/messaging",yC="@firebase/messaging-compat",vC="@firebase/performance",bC="@firebase/performance-compat",xC="@firebase/remote-config",wC="@firebase/remote-config-compat",SC="@firebase/storage",_C="@firebase/storage-compat",EC="@firebase/firestore",NC="@firebase/ai",AC="@firebase/firestore-compat",TC="firebase",jC="12.6.0";const e1="[DEFAULT]",CC={[Zy]:"fire-core",[nC]:"fire-core-compat",[sC]:"fire-analytics",[rC]:"fire-analytics-compat",[aC]:"fire-app-check",[iC]:"fire-app-check-compat",[oC]:"fire-auth",[lC]:"fire-auth-compat",[cC]:"fire-rtdb",[uC]:"fire-data-connect",[dC]:"fire-rtdb-compat",[hC]:"fire-fn",[fC]:"fire-fn-compat",[pC]:"fire-iid",[mC]:"fire-iid-compat",[gC]:"fire-fcm",[yC]:"fire-fcm-compat",[vC]:"fire-perf",[bC]:"fire-perf-compat",[xC]:"fire-rc",[wC]:"fire-rc-compat",[SC]:"fire-gcs",[_C]:"fire-gcs-compat",[EC]:"fire-fst",[AC]:"fire-fst-compat",[NC]:"fire-vertex","fire-js":"fire-js",[TC]:"fire-js-all"};const Fm=new Map,RC=new Map,t1=new Map;function Qb(n,e){try{n.container.addComponent(e)}catch(t){ec.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qu(n){const e=n.name;if(t1.has(e))return ec.debug(`There were multiple attempts to register component ${e}.`),!1;t1.set(e,n);for(const t of Fm.values())Qb(t,n);for(const t of RC.values())Qb(t,n);return!0}function hg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function da(n){return n==null?!1:n.settings!==void 0}const IC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xc=new Kf("app","Firebase",IC);class kC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xc.create("app-deleted",{appName:this._name})}}const id=jC;function A_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:e1,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Xc.create("bad-app-name",{appName:String(i)});if(t||(t=w_()),!t)throw Xc.create("no-options");const o=Fm.get(i);if(o){if(Xu(t,o.options)&&Xu(r,o.config))return o;throw Xc.create("duplicate-app",{appName:i})}const u=new Oj(i);for(const h of t1.values())u.addComponent(h);const d=new kC(t,r,u);return Fm.set(i,d),d}function X1(n=e1){const e=Fm.get(n);if(!e&&n===e1&&w_())return A_();if(!e)throw Xc.create("no-app",{appName:n});return e}function il(n,e,t){let r=CC[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ec.warn(u.join(" "));return}Qu(new tu(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const DC="firebase-heartbeat-database",PC=1,Lf="firebase-heartbeat-store";let uy=null;function T_(){return uy||(uy=Qj(DC,PC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Xc.create("idb-open",{originalErrorMessage:n.message})})),uy}async function LC(n){try{const t=(await T_()).transaction(Lf),r=await t.objectStore(Lf).get(j_(n));return await t.done,r}catch(e){if(e instanceof pl)ec.warn(e.message);else{const t=Xc.create("idb-get",{originalErrorMessage:e?.message});ec.warn(t.message)}}}async function Jb(n,e){try{const r=(await T_()).transaction(Lf,"readwrite");await r.objectStore(Lf).put(e,j_(n)),await r.done}catch(t){if(t instanceof pl)ec.warn(t.message);else{const r=Xc.create("idb-set",{originalErrorMessage:t?.message});ec.warn(r.message)}}}function j_(n){return`${n.name}!${n.options.appId}`}const FC=1024,MC=30;class OC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new BC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Zb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>MC){const i=VC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ec.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zb(),{heartbeatsToSend:t,unsentEntries:r}=UC(this._heartbeatsCache.heartbeats),i=Lm(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return ec.warn(e),""}}}function Zb(){return new Date().toISOString().substring(0,10)}function UC(n,e=FC){const t=[];let r=n.slice();for(const i of n){const o=t.find(u=>u.agent===i.agent);if(o){if(o.dates.push(i.date),ex(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ex(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class BC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Aj()?Tj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await LC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ex(n){return Lm(JSON.stringify({version:2,heartbeats:n})).length}function VC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function zC(n){Qu(new tu("platform-logger",e=>new eC(e),"PRIVATE")),Qu(new tu("heartbeat",e=>new OC(e),"PRIVATE")),il(Zy,Xb,n),il(Zy,Xb,"esm2020"),il("fire-js","")}zC("");function C_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qC=C_,R_=new Kf("auth","Firebase",C_());const Mm=new Y1("@firebase/auth");function HC(n,...e){Mm.logLevel<=An.WARN&&Mm.warn(`Auth (${id}): ${n}`,...e)}function Sm(n,...e){Mm.logLevel<=An.ERROR&&Mm.error(`Auth (${id}): ${n}`,...e)}function Za(n,...e){throw J1(n,...e)}function To(n,...e){return J1(n,...e)}function Q1(n,e,t){const r={...qC(),[e]:t};return new Kf("auth","Firebase",r).create(e,{appName:n.name})}function Ql(n){return Q1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $C(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Za(n,"argument-error"),Q1(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function J1(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return R_.create(n,...e)}function Xt(n,e,...t){if(!n)throw J1(e,...t)}function Wl(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sm(e),new Error(e)}function tc(n,e){n||Wl(e)}function n1(){return typeof self<"u"&&self.location?.href||""}function GC(){return tx()==="http:"||tx()==="https:"}function tx(){return typeof self<"u"&&self.location?.protocol||null}function WC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GC()||Sj()||"connection"in navigator)?navigator.onLine:!0}function YC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}class Qf{constructor(e,t){this.shortDelay=e,this.longDelay=t,tc(t>e,"Short delay should be less than long delay!"),this.isMobile=bj()||_j()}get(){return WC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Z1(n,e){tc(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class I_{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const KC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const XC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QC=new Qf(3e4,6e4);function oc(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ml(n,e,t,r,i={}){return k_(n,i,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const d=Xf({key:n.config.apiKey,...u}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:h,...o};return wj()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&du(n.emulatorConfig.host)&&(p.credentials="include"),I_.fetch()(await D_(n,n.config.apiHost,t,d),p)})}async function k_(n,e,t){n._canInitEmulator=!1;const r={...KC,...e};try{const i=new ZC(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw rm(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const d=o.ok?u.errorMessage:u.error.message,[h,p]=d.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw rm(n,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw rm(n,"email-already-in-use",u);if(h==="USER_DISABLED")throw rm(n,"user-disabled",u);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Q1(n,m,p);Za(n,m)}}catch(i){if(i instanceof pl)throw i;Za(n,"network-request-failed",{message:String(i)})}}async function Jf(n,e,t,r,i={}){const o=await ml(n,e,t,r,i);return"mfaPendingCredential"in o&&Za(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function D_(n,e,t,r){const i=`${e}${t}?${r}`,o=n,u=o.config.emulator?Z1(n.config,i):`${n.config.apiScheme}://${i}`;return XC.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function JC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ZC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(To(this.auth,"network-request-failed")),QC.get())})}}function rm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=To(n,e,r);return i.customData._tokenResponse=t,i}function nx(n){return n!==void 0&&n.enterprise!==void 0}class e6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t6(n,e){return ml(n,"GET","/v2/recaptchaConfig",oc(n,e))}async function n6(n,e){return ml(n,"POST","/v1/accounts:delete",e)}async function Om(n,e){return ml(n,"POST","/v1/accounts:lookup",e)}function bf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function r6(n,e=!1){const t=Er(n),r=await t.getIdToken(e),i=ev(r);Xt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,u=o?.sign_in_provider;return{claims:i,token:r,authTime:bf(dy(i.auth_time)),issuedAtTime:bf(dy(i.iat)),expirationTime:bf(dy(i.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function dy(n){return Number(n)*1e3}function ev(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Sm("JWT malformed, contained fewer than 3 sections"),null;try{const i=v_(t);return i?JSON.parse(i):(Sm("Failed to decode base64 JWT payload"),null)}catch(i){return Sm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rx(n){const e=ev(n);return Xt(e,"internal-error"),Xt(typeof e.exp<"u","internal-error"),Xt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function oh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof pl&&s6(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function s6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}class i6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class r1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bf(this.lastLoginAt),this.creationTime=bf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Um(n){const e=n.auth,t=await n.getIdToken(),r=await oh(n,Om(e,{idToken:t}));Xt(r?.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=i.providerUserInfo?.length?P_(i.providerUserInfo):[],u=o6(n.providerData,o),d=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!u?.length,p=d?h:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new r1(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function a6(n){const e=Er(n);await Um(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function P_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function l6(n,e){const t=await k_(n,{},async()=>{const r=Xf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,u=await D_(n,i,"/v1/token",`key=${o}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:d,body:r};return n.emulatorConfig&&du(n.emulatorConfig.host)&&(h.credentials="include"),I_.fetch()(u,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function c6(n,e){return ml(n,"POST","/v2/accounts:revokeToken",oc(n,e))}class eh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xt(e.idToken,"internal-error"),Xt(typeof e.idToken<"u","internal-error"),Xt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xt(e.length!==0,"internal-error");const t=rx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Xt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await l6(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,u=new eh;return r&&(Xt(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(Xt(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),o&&(Xt(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new eh,this.toJSON())}_performRefresh(){return Wl("not implemented")}}function Oc(n,e){Xt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ao{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new i6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new r1(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await oh(this,this.stsTokenManager.getToken(this.auth,e));return Xt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return r6(this,e)}reload(){return a6(this)}_assign(e){this!==e&&(Xt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ao({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Xt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Um(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(da(this.auth.app))return Promise.reject(Ql(this.auth));const e=await this.getIdToken();return await oh(this,n6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,u=t.photoURL??void 0,d=t.tenantId??void 0,h=t._redirectEventId??void 0,p=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:w,emailVerified:_,isAnonymous:x,providerData:A,stsTokenManager:R}=t;Xt(w&&R,e,"internal-error");const C=eh.fromJSON(this.name,R);Xt(typeof w=="string",e,"internal-error"),Oc(r,e.name),Oc(i,e.name),Xt(typeof _=="boolean",e,"internal-error"),Xt(typeof x=="boolean",e,"internal-error"),Oc(o,e.name),Oc(u,e.name),Oc(d,e.name),Oc(h,e.name),Oc(p,e.name),Oc(m,e.name);const k=new Ao({uid:w,auth:e,email:i,emailVerified:_,displayName:r,isAnonymous:x,photoURL:u,phoneNumber:o,tenantId:d,stsTokenManager:C,createdAt:p,lastLoginAt:m});return A&&Array.isArray(A)&&(k.providerData=A.map(q=>({...q}))),h&&(k._redirectEventId=h),k}static async _fromIdTokenResponse(e,t,r=!1){const i=new eh;i.updateFromServerResponse(t);const o=new Ao({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Um(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Xt(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?P_(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!o?.length,d=new eh;d.updateFromIdToken(r);const h=new Ao({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:u}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new r1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,p),h}}const sx=new Map;function Yl(n){tc(n instanceof Function,"Expected a class definition");let e=sx.get(n);return e?(tc(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sx.set(n,e),e)}class L_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}L_.type="NONE";const ix=L_;function _m(n,e,t){return`firebase:${n}:${e}:${t}`}class th{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=_m(this.userKey,i.apiKey,o),this.fullPersistenceKey=_m("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Om(this.auth,{idToken:e}).catch(()=>{});return t?Ao._fromGetAccountInfoResponse(this.auth,t,e):null}return Ao._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new th(Yl(ix),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Yl(ix);const u=_m(r,e.config.apiKey,e.name);let d=null;for(const p of t)try{const m=await p._get(u);if(m){let w;if(typeof m=="string"){const _=await Om(e,{idToken:m}).catch(()=>{});if(!_)break;w=await Ao._fromGetAccountInfoResponse(e,_,m)}else w=Ao._fromJSON(e,m);p!==o&&(d=w),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new th(o,e,r):(o=h[0],d&&await o._set(u,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(u)}catch{}})),new th(o,e,r))}}function ax(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(U_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(F_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(V_(e))return"Blackberry";if(z_(e))return"Webos";if(M_(e))return"Safari";if((e.includes("chrome/")||O_(e))&&!e.includes("edge/"))return"Chrome";if(B_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function F_(n=Ci()){return/firefox\//i.test(n)}function M_(n=Ci()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function O_(n=Ci()){return/crios\//i.test(n)}function U_(n=Ci()){return/iemobile/i.test(n)}function B_(n=Ci()){return/android/i.test(n)}function V_(n=Ci()){return/blackberry/i.test(n)}function z_(n=Ci()){return/webos/i.test(n)}function tv(n=Ci()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function u6(n=Ci()){return tv(n)&&!!window.navigator?.standalone}function d6(){return Ej()&&document.documentMode===10}function q_(n=Ci()){return tv(n)||B_(n)||z_(n)||V_(n)||/windows phone/i.test(n)||U_(n)}function H_(n,e=[]){let t;switch(n){case"Browser":t=ax(Ci());break;case"Worker":t=`${ax(Ci())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${id}/${r}`}class h6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((u,d)=>{try{const h=e(o);u(h)}catch(h){d(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function f6(n,e={}){return ml(n,"GET","/v2/passwordPolicy",oc(n,e))}const p6=6;class m6{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??p6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class g6{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ox(this),this.idTokenSubscription=new ox(this),this.beforeStateQueue=new h6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yl(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await th.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Om(this,{idToken:e}),r=await Ao._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(da(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,u=r?._redirectEventId,d=await this.tryRedirectSignIn(e);(!o||o===u)&&d?.user&&(r=d.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Um(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(da(this.app))return Promise.reject(Ql(this));const t=e?Er(e):null;return t&&Xt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Xt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return da(this.app)?Promise.reject(Ql(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return da(this.app)?Promise.reject(Ql(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await f6(this),t=new m6(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kf("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await c6(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Yl(e)||this._popupRedirectResolver;Xt(t,this,"argument-error"),this.redirectPersistenceManager=await th.create(this,[Yl(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xt(d,this,"internal-error"),d.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{u=!0,h()}}else{const h=e.addObserver(t);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=H_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(da(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&HC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function lc(n){return Er(n)}class ox{constructor(e){this.auth=e,this.observer=null,this.addObserver=kj(t=>this.observer=t)}get next(){return Xt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let fg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function y6(n){fg=n}function $_(n){return fg.loadJS(n)}function v6(){return fg.recaptchaEnterpriseScript}function b6(){return fg.gapiScript}function x6(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class w6{constructor(){this.enterprise=new S6}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class S6{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const _6="recaptcha-enterprise",G_="NO_RECAPTCHA";class E6{constructor(e){this.type=_6,this.auth=lc(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,d)=>{t6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new e6(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,u(p.siteKey)}}).catch(h=>{d(h)})})}function i(o,u,d){const h=window.grecaptcha;nx(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{u(p)}).catch(()=>{u(G_)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new w6().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(d=>{if(!t&&nx(window.grecaptcha))i(d,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=v6();h.length!==0&&(h+=d),$_(h).then(()=>{i(d,o,u)}).catch(p=>{u(p)})}}).catch(d=>{u(d)})})}}async function lx(n,e,t,r=!1,i=!1){const o=new E6(n);let u;if(i)u=G_;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const h=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const h=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return r?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Bm(n,e,t,r,i){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lx(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await lx(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(o)})}function N6(n,e){const t=hg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Xu(o,e??{}))return i;Za(i,"already-initialized")}return t.initialize({options:e})}function A6(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Yl);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function T6(n,e,t){const r=lc(n);Xt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=W_(e),{host:u,port:d}=j6(e),h=d===null?"":`:${d}`,p={url:`${o}//${u}${h}/`},m=Object.freeze({host:u,port:d,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Xt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xt(Xu(p,r.config.emulator)&&Xu(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,du(u)?(G1(`${o}//${u}${h}`),W1("Auth",!0)):C6()}function W_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function j6(n){const e=W_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:cx(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:cx(u)}}}function cx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function C6(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}class nv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,t){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}async function R6(n,e){return ml(n,"POST","/v1/accounts:signUp",e)}async function I6(n,e){return Jf(n,"POST","/v1/accounts:signInWithPassword",oc(n,e))}async function Y_(n,e){return ml(n,"POST","/v1/accounts:sendOobCode",oc(n,e))}async function k6(n,e){return Y_(n,e)}async function D6(n,e){return Y_(n,e)}async function P6(n,e){return Jf(n,"POST","/v1/accounts:signInWithEmailLink",oc(n,e))}async function L6(n,e){return Jf(n,"POST","/v1/accounts:signInWithEmailLink",oc(n,e))}class Ff extends nv{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ff(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ff(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,t,"signInWithPassword",I6);case"emailLink":return P6(e,{email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,r,"signUpPassword",R6);case"emailLink":return L6(e,{idToken:t,email:this._email,oobCode:this._password});default:Za(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function nh(n,e){return Jf(n,"POST","/v1/accounts:signInWithIdp",oc(n,e))}const F6="http://localhost";class Ju extends nv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ju(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Za("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const u=new Ju(r,i);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return nh(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,nh(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,nh(e,t)}buildRequest(){const e={requestUri:F6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xf(t)}return e}}function M6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function O6(n){const e=hf(ff(n)).link,t=e?hf(ff(e)).deep_link_id:null,r=hf(ff(n)).deep_link_id;return(r?hf(ff(r)).link:null)||r||t||e||n}class rv{constructor(e){const t=hf(ff(e)),r=t.apiKey??null,i=t.oobCode??null,o=M6(t.mode??null);Xt(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=O6(e);try{return new rv(t)}catch{return null}}}class gh{constructor(){this.providerId=gh.PROVIDER_ID}static credential(e,t){return Ff._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=rv.parseLink(t);return Xt(r,"argument-error"),Ff._fromEmailAndCode(e,r.code,r.tenantId)}}gh.PROVIDER_ID="password";gh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class sv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Zf extends sv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zc extends Zf{constructor(){super("facebook.com")}static credential(e){return Ju._fromParams({providerId:zc.PROVIDER_ID,signInMethod:zc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zc.credentialFromTaggedObject(e)}static credentialFromError(e){return zc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zc.credential(e.oauthAccessToken)}catch{return null}}}zc.FACEBOOK_SIGN_IN_METHOD="facebook.com";zc.PROVIDER_ID="facebook.com";class Gl extends Zf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ju._fromParams({providerId:Gl.PROVIDER_ID,signInMethod:Gl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gl.credentialFromTaggedObject(e)}static credentialFromError(e){return Gl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Gl.credential(t,r)}catch{return null}}}Gl.GOOGLE_SIGN_IN_METHOD="google.com";Gl.PROVIDER_ID="google.com";class qc extends Zf{constructor(){super("github.com")}static credential(e){return Ju._fromParams({providerId:qc.PROVIDER_ID,signInMethod:qc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qc.credentialFromTaggedObject(e)}static credentialFromError(e){return qc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qc.credential(e.oauthAccessToken)}catch{return null}}}qc.GITHUB_SIGN_IN_METHOD="github.com";qc.PROVIDER_ID="github.com";class Hc extends Zf{constructor(){super("twitter.com")}static credential(e,t){return Ju._fromParams({providerId:Hc.PROVIDER_ID,signInMethod:Hc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hc.credentialFromTaggedObject(e)}static credentialFromError(e){return Hc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hc.credential(t,r)}catch{return null}}}Hc.TWITTER_SIGN_IN_METHOD="twitter.com";Hc.PROVIDER_ID="twitter.com";async function U6(n,e){return Jf(n,"POST","/v1/accounts:signUp",oc(n,e))}class Zu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Ao._fromIdTokenResponse(e,r,i),u=ux(r);return new Zu({user:o,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=ux(r);return new Zu({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function ux(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Vm extends pl{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Vm(e,t,r,i)}}function K_(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vm._fromErrorAndOperation(n,o,e,r):o})}async function B6(n,e,t=!1){const r=await oh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Zu._forOperation(n,"link",r)}async function V6(n,e,t=!1){const{auth:r}=n;if(da(r.app))return Promise.reject(Ql(r));const i="reauthenticate";try{const o=await oh(n,K_(r,i,e,n),t);Xt(o.idToken,r,"internal-error");const u=ev(o.idToken);Xt(u,r,"internal-error");const{sub:d}=u;return Xt(n.uid===d,r,"user-mismatch"),Zu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Za(r,"user-mismatch"),o}}async function X_(n,e,t=!1){if(da(n.app))return Promise.reject(Ql(n));const r="signIn",i=await K_(n,r,e),o=await Zu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function z6(n,e){return X_(lc(n),e)}async function Q_(n){const e=lc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function J_(n,e,t){const r=lc(n);await Bm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",D6)}async function Z_(n,e,t){if(da(n.app))return Promise.reject(Ql(n));const r=lc(n),u=await Bm(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",U6).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Q_(n),h}),d=await Zu._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(d.user),d}function eE(n,e,t){return da(n.app)?Promise.reject(Ql(n)):z6(Er(n),gh.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Q_(n),r})}async function iv(n,e){const t=Er(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await k6(t.auth,i);o!==n.email&&await n.reload()}async function q6(n,e){return ml(n,"POST","/v1/accounts:update",e)}async function tE(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Er(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await oh(r,q6(r.auth,o));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const d=r.providerData.find(({providerId:h})=>h==="password");d&&(d.displayName=r.displayName,d.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function H6(n,e,t,r){return Er(n).onIdTokenChanged(e,t,r)}function $6(n,e,t){return Er(n).beforeAuthStateChanged(e,t)}function av(n,e,t,r){return Er(n).onAuthStateChanged(e,t,r)}function ep(n){return Er(n).signOut()}const zm="__sak";class nE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zm,"1"),this.storage.removeItem(zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const G6=1e3,W6=10;class rE extends nE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,d,h)=>{this.notifyListeners(u,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);d6()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,W6):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},G6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rE.type="LOCAL";const Y6=rE;class sE extends nE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}sE.type="SESSION";const iE=sE;function K6(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class pg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new pg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,u=this.handlersMap[i];if(!u?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(u).map(async p=>p(t.origin,o)),h=await K6(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pg.receivers=[];function ov(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}class X6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,u;return new Promise((d,h)=>{const p=ov("",20);i.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(w){const _=w;if(_.data.eventId===p)switch(_.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),d(_.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}function al(){return window}function Q6(n){al().location.href=n}function aE(){return typeof al().WorkerGlobalScope<"u"&&typeof al().importScripts=="function"}async function J6(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Z6(){return navigator?.serviceWorker?.controller||null}function eR(){return aE()?self:null}const oE="firebaseLocalStorageDb",tR=1,qm="firebaseLocalStorage",lE="fbase_key";class tp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function mg(n,e){return n.transaction([qm],e?"readwrite":"readonly").objectStore(qm)}function nR(){const n=indexedDB.deleteDatabase(oE);return new tp(n).toPromise()}function s1(){const n=indexedDB.open(oE,tR);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(qm,{keyPath:lE})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(qm)?e(r):(r.close(),await nR(),e(await s1()))})})}async function dx(n,e,t){const r=mg(n,!0).put({[lE]:e,value:t});return new tp(r).toPromise()}async function rR(n,e){const t=mg(n,!1).get(e),r=await new tp(t).toPromise();return r===void 0?null:r.value}function hx(n,e){const t=mg(n,!0).delete(e);return new tp(t).toPromise()}const sR=800,iR=3;class cE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>iR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return aE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pg._getInstance(eR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await J6(),!this.activeServiceWorker)return;this.sender=new X6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Z6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s1();return await dx(e,zm,"1"),await hx(e,zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>dx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>rR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=mg(i,!1).getAll();return new tp(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),sR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cE.type="LOCAL";const aR=cE;new Qf(3e4,6e4);function uE(n,e){return e?Yl(e):(Xt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}class lv extends nv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function oR(n){return X_(n.auth,new lv(n),n.bypassAuthState)}function lR(n){const{auth:e,user:t}=n;return Xt(t,e,"internal-error"),V6(t,new lv(n),n.bypassAuthState)}async function cR(n){const{auth:e,user:t}=n;return Xt(t,e,"internal-error"),B6(t,new lv(n),n.bypassAuthState)}class dE{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:u,type:d}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oR;case"linkViaPopup":case"linkViaRedirect":return cR;case"reauthViaPopup":case"reauthViaRedirect":return lR;default:Za(this.auth,"internal-error")}}resolve(e){tc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uR=new Qf(2e3,1e4);async function dR(n,e,t){if(da(n.app))return Promise.reject(To(n,"operation-not-supported-in-this-environment"));const r=lc(n);$C(n,e,sv);const i=uE(r,t);return new Mu(r,"signInViaPopup",e,i).executeNotNull()}class Mu extends dE{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Mu.currentPopupAction&&Mu.currentPopupAction.cancel(),Mu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xt(e,this.auth,"internal-error"),e}async onExecution(){tc(this.filter.length===1,"Popup operations only handle one event");const e=ov();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(To(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(To(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(To(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uR.get())};e()}}Mu.currentPopupAction=null;const hR="pendingRedirect",Em=new Map;class fR extends dE{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Em.get(this.auth._key());if(!e){try{const r=await pR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Em.set(this.auth._key(),e)}return this.bypassAuthState||Em.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pR(n,e){const t=yR(e),r=gR(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function mR(n,e){Em.set(n._key(),e)}function gR(n){return Yl(n._redirectPersistence)}function yR(n){return _m(hR,n.config.apiKey,n.name)}async function vR(n,e,t=!1){if(da(n.app))return Promise.reject(Ql(n));const r=lc(n),i=uE(r,e),u=await new fR(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}const bR=600*1e3;class xR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!hE(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(To(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bR&&this.cachedEventUids.clear(),this.cachedEventUids.has(fx(e))}saveEventToCache(e){this.cachedEventUids.add(fx(e)),this.lastProcessedEventTime=Date.now()}}function fx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hE({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function wR(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hE(n);default:return!1}}async function SR(n,e={}){return ml(n,"GET","/v1/projects",e)}const _R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ER=/^https?/;async function NR(n){if(n.config.emulator)return;const{authorizedDomains:e}=await SR(n);for(const t of e)try{if(AR(t))return}catch{}Za(n,"unauthorized-domain")}function AR(n){const e=n1(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!ER.test(t))return!1;if(_R.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const TR=new Qf(3e4,6e4);function px(){const n=al().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function jR(n){return new Promise((e,t)=>{function r(){px(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{px(),t(To(n,"network-request-failed"))},timeout:TR.get()})}if(al().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(al().gapi?.load)r();else{const i=x6("iframefcb");return al()[i]=()=>{gapi.load?r():t(To(n,"network-request-failed"))},$_(`${b6()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Nm=null,e})}let Nm=null;function CR(n){return Nm=Nm||jR(n),Nm}const RR=new Qf(5e3,15e3),IR="__/auth/iframe",kR="emulator/auth/iframe",DR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LR(n){const e=n.config;Xt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Z1(e,kR):`https://${n.config.authDomain}/${IR}`,r={apiKey:e.apiKey,appName:n.name,v:id},i=PR.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Xf(r).slice(1)}`}async function FR(n){const e=await CR(n),t=al().gapi;return Xt(t,n,"internal-error"),e.open({where:document.body,url:LR(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DR,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const u=To(n,"network-request-failed"),d=al().setTimeout(()=>{o(u)},RR.get());function h(){al().clearTimeout(d),i(r)}r.ping(h).then(h,()=>{o(u)})}))}const MR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OR=500,UR=600,BR="_blank",VR="http://localhost";class mx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zR(n,e,t,r=OR,i=UR){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const h={...MR,width:r.toString(),height:i.toString(),top:o,left:u},p=Ci().toLowerCase();t&&(d=O_(p)?BR:t),F_(p)&&(e=e||VR,h.scrollbars="yes");const m=Object.entries(h).reduce((_,[x,A])=>`${_}${x}=${A},`,"");if(u6(p)&&d!=="_self")return qR(e||"",d),new mx(null);const w=window.open(e||"",d,m);Xt(w,n,"popup-blocked");try{w.focus()}catch{}return new mx(w)}function qR(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}const HR="__/auth/handler",$R="emulator/auth/handler",GR=encodeURIComponent("fac");async function gx(n,e,t,r,i,o){Xt(n.config.authDomain,n,"auth-domain-config-required"),Xt(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:id,eventId:i};if(e instanceof sv){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",Ij(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,w]of Object.entries({}))u[m]=w}if(e instanceof Zf){const m=e.getScopes().filter(w=>w!=="");m.length>0&&(u.scopes=m.join(","))}n.tenantId&&(u.tid=n.tenantId);const d=u;for(const m of Object.keys(d))d[m]===void 0&&delete d[m];const h=await n._getAppCheckToken(),p=h?`#${GR}=${encodeURIComponent(h)}`:"";return`${WR(n)}?${Xf(d).slice(1)}${p}`}function WR({config:n}){return n.emulator?Z1(n,$R):`https://${n.authDomain}/${HR}`}const hy="webStorageSupport";class YR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iE,this._completeRedirectFn=vR,this._overrideRedirectResult=mR}async _openPopup(e,t,r,i){tc(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await gx(e,t,r,n1(),i);return zR(e,o,ov())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await gx(e,t,r,n1(),i);return Q6(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(tc(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await FR(e),r=new xR(e);return t.register("authEvent",i=>(Xt(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hy,{type:hy},i=>{const o=i?.[0]?.[hy];o!==void 0&&t(!!o),Za(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return q_()||M_()||tv()}}const KR=YR;var yx="@firebase/auth",vx="1.11.1";class XR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function QR(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function JR(n){Qu(new tu("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:d}=r.options;Xt(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:u,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H_(n)},p=new g6(r,i,o,h);return A6(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qu(new tu("auth-internal",e=>{const t=lc(e.getProvider("auth").getImmediate());return(r=>new XR(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),il(yx,vx,QR(n)),il(yx,vx,"esm2020")}const ZR=300,eI=S_("authIdTokenMaxAge")||ZR;let bx=null;const tI=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>eI)return;const i=t?.token;bx!==i&&(bx=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function nI(n=X1()){const e=hg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=N6(n,{popupRedirectResolver:KR,persistence:[aR,Y6,iE]}),r=S_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=tI(o.toString());$6(t,u,()=>u(t.currentUser)),H6(t,d=>u(d))}}const i=b_("auth");return i&&T6(t,`http://${i}`),t}function rI(){return document.getElementsByTagName("head")?.[0]??document}y6({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=To("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",rI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});JR("Browser");var sI="firebase",iI="12.6.0";il(sI,iI,"app");var xx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Qc,fE;(function(){var n;function e(H,D){function I(){}I.prototype=D.prototype,H.F=D.prototype,H.prototype=new I,H.prototype.constructor=H,H.D=function(V,T,F){for(var L=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)L[ee-2]=arguments[ee];return D.prototype[T].apply(V,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(H,D,I){I||(I=0);const V=Array(16);if(typeof D=="string")for(var T=0;T<16;++T)V[T]=D.charCodeAt(I++)|D.charCodeAt(I++)<<8|D.charCodeAt(I++)<<16|D.charCodeAt(I++)<<24;else for(T=0;T<16;++T)V[T]=D[I++]|D[I++]<<8|D[I++]<<16|D[I++]<<24;D=H.g[0],I=H.g[1],T=H.g[2];let F=H.g[3],L;L=D+(F^I&(T^F))+V[0]+3614090360&4294967295,D=I+(L<<7&4294967295|L>>>25),L=F+(T^D&(I^T))+V[1]+3905402710&4294967295,F=D+(L<<12&4294967295|L>>>20),L=T+(I^F&(D^I))+V[2]+606105819&4294967295,T=F+(L<<17&4294967295|L>>>15),L=I+(D^T&(F^D))+V[3]+3250441966&4294967295,I=T+(L<<22&4294967295|L>>>10),L=D+(F^I&(T^F))+V[4]+4118548399&4294967295,D=I+(L<<7&4294967295|L>>>25),L=F+(T^D&(I^T))+V[5]+1200080426&4294967295,F=D+(L<<12&4294967295|L>>>20),L=T+(I^F&(D^I))+V[6]+2821735955&4294967295,T=F+(L<<17&4294967295|L>>>15),L=I+(D^T&(F^D))+V[7]+4249261313&4294967295,I=T+(L<<22&4294967295|L>>>10),L=D+(F^I&(T^F))+V[8]+1770035416&4294967295,D=I+(L<<7&4294967295|L>>>25),L=F+(T^D&(I^T))+V[9]+2336552879&4294967295,F=D+(L<<12&4294967295|L>>>20),L=T+(I^F&(D^I))+V[10]+4294925233&4294967295,T=F+(L<<17&4294967295|L>>>15),L=I+(D^T&(F^D))+V[11]+2304563134&4294967295,I=T+(L<<22&4294967295|L>>>10),L=D+(F^I&(T^F))+V[12]+1804603682&4294967295,D=I+(L<<7&4294967295|L>>>25),L=F+(T^D&(I^T))+V[13]+4254626195&4294967295,F=D+(L<<12&4294967295|L>>>20),L=T+(I^F&(D^I))+V[14]+2792965006&4294967295,T=F+(L<<17&4294967295|L>>>15),L=I+(D^T&(F^D))+V[15]+1236535329&4294967295,I=T+(L<<22&4294967295|L>>>10),L=D+(T^F&(I^T))+V[1]+4129170786&4294967295,D=I+(L<<5&4294967295|L>>>27),L=F+(I^T&(D^I))+V[6]+3225465664&4294967295,F=D+(L<<9&4294967295|L>>>23),L=T+(D^I&(F^D))+V[11]+643717713&4294967295,T=F+(L<<14&4294967295|L>>>18),L=I+(F^D&(T^F))+V[0]+3921069994&4294967295,I=T+(L<<20&4294967295|L>>>12),L=D+(T^F&(I^T))+V[5]+3593408605&4294967295,D=I+(L<<5&4294967295|L>>>27),L=F+(I^T&(D^I))+V[10]+38016083&4294967295,F=D+(L<<9&4294967295|L>>>23),L=T+(D^I&(F^D))+V[15]+3634488961&4294967295,T=F+(L<<14&4294967295|L>>>18),L=I+(F^D&(T^F))+V[4]+3889429448&4294967295,I=T+(L<<20&4294967295|L>>>12),L=D+(T^F&(I^T))+V[9]+568446438&4294967295,D=I+(L<<5&4294967295|L>>>27),L=F+(I^T&(D^I))+V[14]+3275163606&4294967295,F=D+(L<<9&4294967295|L>>>23),L=T+(D^I&(F^D))+V[3]+4107603335&4294967295,T=F+(L<<14&4294967295|L>>>18),L=I+(F^D&(T^F))+V[8]+1163531501&4294967295,I=T+(L<<20&4294967295|L>>>12),L=D+(T^F&(I^T))+V[13]+2850285829&4294967295,D=I+(L<<5&4294967295|L>>>27),L=F+(I^T&(D^I))+V[2]+4243563512&4294967295,F=D+(L<<9&4294967295|L>>>23),L=T+(D^I&(F^D))+V[7]+1735328473&4294967295,T=F+(L<<14&4294967295|L>>>18),L=I+(F^D&(T^F))+V[12]+2368359562&4294967295,I=T+(L<<20&4294967295|L>>>12),L=D+(I^T^F)+V[5]+4294588738&4294967295,D=I+(L<<4&4294967295|L>>>28),L=F+(D^I^T)+V[8]+2272392833&4294967295,F=D+(L<<11&4294967295|L>>>21),L=T+(F^D^I)+V[11]+1839030562&4294967295,T=F+(L<<16&4294967295|L>>>16),L=I+(T^F^D)+V[14]+4259657740&4294967295,I=T+(L<<23&4294967295|L>>>9),L=D+(I^T^F)+V[1]+2763975236&4294967295,D=I+(L<<4&4294967295|L>>>28),L=F+(D^I^T)+V[4]+1272893353&4294967295,F=D+(L<<11&4294967295|L>>>21),L=T+(F^D^I)+V[7]+4139469664&4294967295,T=F+(L<<16&4294967295|L>>>16),L=I+(T^F^D)+V[10]+3200236656&4294967295,I=T+(L<<23&4294967295|L>>>9),L=D+(I^T^F)+V[13]+681279174&4294967295,D=I+(L<<4&4294967295|L>>>28),L=F+(D^I^T)+V[0]+3936430074&4294967295,F=D+(L<<11&4294967295|L>>>21),L=T+(F^D^I)+V[3]+3572445317&4294967295,T=F+(L<<16&4294967295|L>>>16),L=I+(T^F^D)+V[6]+76029189&4294967295,I=T+(L<<23&4294967295|L>>>9),L=D+(I^T^F)+V[9]+3654602809&4294967295,D=I+(L<<4&4294967295|L>>>28),L=F+(D^I^T)+V[12]+3873151461&4294967295,F=D+(L<<11&4294967295|L>>>21),L=T+(F^D^I)+V[15]+530742520&4294967295,T=F+(L<<16&4294967295|L>>>16),L=I+(T^F^D)+V[2]+3299628645&4294967295,I=T+(L<<23&4294967295|L>>>9),L=D+(T^(I|~F))+V[0]+4096336452&4294967295,D=I+(L<<6&4294967295|L>>>26),L=F+(I^(D|~T))+V[7]+1126891415&4294967295,F=D+(L<<10&4294967295|L>>>22),L=T+(D^(F|~I))+V[14]+2878612391&4294967295,T=F+(L<<15&4294967295|L>>>17),L=I+(F^(T|~D))+V[5]+4237533241&4294967295,I=T+(L<<21&4294967295|L>>>11),L=D+(T^(I|~F))+V[12]+1700485571&4294967295,D=I+(L<<6&4294967295|L>>>26),L=F+(I^(D|~T))+V[3]+2399980690&4294967295,F=D+(L<<10&4294967295|L>>>22),L=T+(D^(F|~I))+V[10]+4293915773&4294967295,T=F+(L<<15&4294967295|L>>>17),L=I+(F^(T|~D))+V[1]+2240044497&4294967295,I=T+(L<<21&4294967295|L>>>11),L=D+(T^(I|~F))+V[8]+1873313359&4294967295,D=I+(L<<6&4294967295|L>>>26),L=F+(I^(D|~T))+V[15]+4264355552&4294967295,F=D+(L<<10&4294967295|L>>>22),L=T+(D^(F|~I))+V[6]+2734768916&4294967295,T=F+(L<<15&4294967295|L>>>17),L=I+(F^(T|~D))+V[13]+1309151649&4294967295,I=T+(L<<21&4294967295|L>>>11),L=D+(T^(I|~F))+V[4]+4149444226&4294967295,D=I+(L<<6&4294967295|L>>>26),L=F+(I^(D|~T))+V[11]+3174756917&4294967295,F=D+(L<<10&4294967295|L>>>22),L=T+(D^(F|~I))+V[2]+718787259&4294967295,T=F+(L<<15&4294967295|L>>>17),L=I+(F^(T|~D))+V[9]+3951481745&4294967295,H.g[0]=H.g[0]+D&4294967295,H.g[1]=H.g[1]+(T+(L<<21&4294967295|L>>>11))&4294967295,H.g[2]=H.g[2]+T&4294967295,H.g[3]=H.g[3]+F&4294967295}r.prototype.v=function(H,D){D===void 0&&(D=H.length);const I=D-this.blockSize,V=this.C;let T=this.h,F=0;for(;F<D;){if(T==0)for(;F<=I;)i(this,H,F),F+=this.blockSize;if(typeof H=="string"){for(;F<D;)if(V[T++]=H.charCodeAt(F++),T==this.blockSize){i(this,V),T=0;break}}else for(;F<D;)if(V[T++]=H[F++],T==this.blockSize){i(this,V),T=0;break}}this.h=T,this.o+=D},r.prototype.A=function(){var H=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);H[0]=128;for(var D=1;D<H.length-8;++D)H[D]=0;D=this.o*8;for(var I=H.length-8;I<H.length;++I)H[I]=D&255,D/=256;for(this.v(H),H=Array(16),D=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)H[D++]=this.g[I]>>>V&255;return H};function o(H,D){var I=d;return Object.prototype.hasOwnProperty.call(I,H)?I[H]:I[H]=D(H)}function u(H,D){this.h=D;const I=[];let V=!0;for(let T=H.length-1;T>=0;T--){const F=H[T]|0;V&&F==D||(I[T]=F,V=!1)}this.g=I}var d={};function h(H){return-128<=H&&H<128?o(H,function(D){return new u([D|0],D<0?-1:0)}):new u([H|0],H<0?-1:0)}function p(H){if(isNaN(H)||!isFinite(H))return w;if(H<0)return C(p(-H));const D=[];let I=1;for(let V=0;H>=I;V++)D[V]=H/I|0,I*=4294967296;return new u(D,0)}function m(H,D){if(H.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(H.charAt(0)=="-")return C(m(H.substring(1),D));if(H.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(D,8));let V=w;for(let F=0;F<H.length;F+=8){var T=Math.min(8,H.length-F);const L=parseInt(H.substring(F,F+T),D);T<8?(T=p(Math.pow(D,T)),V=V.j(T).add(p(L))):(V=V.j(I),V=V.add(p(L)))}return V}var w=h(0),_=h(1),x=h(16777216);n=u.prototype,n.m=function(){if(R(this))return-C(this).m();let H=0,D=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);H+=(V>=0?V:4294967296+V)*D,D*=4294967296}return H},n.toString=function(H){if(H=H||10,H<2||36<H)throw Error("radix out of range: "+H);if(A(this))return"0";if(R(this))return"-"+C(this).toString(H);const D=p(Math.pow(H,6));var I=this;let V="";for(;;){const T=z(I,D).g;I=k(I,T.j(D));let F=((I.g.length>0?I.g[0]:I.h)>>>0).toString(H);if(I=T,A(I))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},n.i=function(H){return H<0?0:H<this.g.length?this.g[H]:this.h};function A(H){if(H.h!=0)return!1;for(let D=0;D<H.g.length;D++)if(H.g[D]!=0)return!1;return!0}function R(H){return H.h==-1}n.l=function(H){return H=k(this,H),R(H)?-1:A(H)?0:1};function C(H){const D=H.g.length,I=[];for(let V=0;V<D;V++)I[V]=~H.g[V];return new u(I,~H.h).add(_)}n.abs=function(){return R(this)?C(this):this},n.add=function(H){const D=Math.max(this.g.length,H.g.length),I=[];let V=0;for(let T=0;T<=D;T++){let F=V+(this.i(T)&65535)+(H.i(T)&65535),L=(F>>>16)+(this.i(T)>>>16)+(H.i(T)>>>16);V=L>>>16,F&=65535,L&=65535,I[T]=L<<16|F}return new u(I,I[I.length-1]&-2147483648?-1:0)};function k(H,D){return H.add(C(D))}n.j=function(H){if(A(this)||A(H))return w;if(R(this))return R(H)?C(this).j(C(H)):C(C(this).j(H));if(R(H))return C(this.j(C(H)));if(this.l(x)<0&&H.l(x)<0)return p(this.m()*H.m());const D=this.g.length+H.g.length,I=[];for(var V=0;V<2*D;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let T=0;T<H.g.length;T++){const F=this.i(V)>>>16,L=this.i(V)&65535,ee=H.i(T)>>>16,ye=H.i(T)&65535;I[2*V+2*T]+=L*ye,q(I,2*V+2*T),I[2*V+2*T+1]+=F*ye,q(I,2*V+2*T+1),I[2*V+2*T+1]+=L*ee,q(I,2*V+2*T+1),I[2*V+2*T+2]+=F*ee,q(I,2*V+2*T+2)}for(H=0;H<D;H++)I[H]=I[2*H+1]<<16|I[2*H];for(H=D;H<2*D;H++)I[H]=0;return new u(I,0)};function q(H,D){for(;(H[D]&65535)!=H[D];)H[D+1]+=H[D]>>>16,H[D]&=65535,D++}function $(H,D){this.g=H,this.h=D}function z(H,D){if(A(D))throw Error("division by zero");if(A(H))return new $(w,w);if(R(H))return D=z(C(H),D),new $(C(D.g),C(D.h));if(R(D))return D=z(H,C(D)),new $(C(D.g),D.h);if(H.g.length>30){if(R(H)||R(D))throw Error("slowDivide_ only works with positive integers.");for(var I=_,V=D;V.l(H)<=0;)I=oe(I),V=oe(V);var T=ce(I,1),F=ce(V,1);for(V=ce(V,2),I=ce(I,2);!A(V);){var L=F.add(V);L.l(H)<=0&&(T=T.add(I),F=L),V=ce(V,1),I=ce(I,1)}return D=k(H,T.j(D)),new $(T,D)}for(T=w;H.l(D)>=0;){for(I=Math.max(1,Math.floor(H.m()/D.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=p(I),L=F.j(D);R(L)||L.l(H)>0;)I-=V,F=p(I),L=F.j(D);A(F)&&(F=_),T=T.add(F),H=k(H,L)}return new $(T,H)}n.B=function(H){return z(this,H).h},n.and=function(H){const D=Math.max(this.g.length,H.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)&H.i(V);return new u(I,this.h&H.h)},n.or=function(H){const D=Math.max(this.g.length,H.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)|H.i(V);return new u(I,this.h|H.h)},n.xor=function(H){const D=Math.max(this.g.length,H.g.length),I=[];for(let V=0;V<D;V++)I[V]=this.i(V)^H.i(V);return new u(I,this.h^H.h)};function oe(H){const D=H.g.length+1,I=[];for(let V=0;V<D;V++)I[V]=H.i(V)<<1|H.i(V-1)>>>31;return new u(I,H.h)}function ce(H,D){const I=D>>5;D%=32;const V=H.g.length-I,T=[];for(let F=0;F<V;F++)T[F]=D>0?H.i(F+I)>>>D|H.i(F+I+1)<<32-D:H.i(F+I);return new u(T,H.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,fE=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=m,Qc=u}).apply(typeof xx<"u"?xx:typeof self<"u"?self:typeof window<"u"?window:{});var sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var pE,pf,mE,Am,i1,gE,yE,vE;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof sm=="object"&&sm];for(var j=0;j<y.length;++j){var U=y[j];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var r=t(this);function i(y,j){if(j)e:{var U=r;y=y.split(".");for(var se=0;se<y.length-1;se++){var ze=y[se];if(!(ze in U))break e;U=U[ze]}y=y[y.length-1],se=U[y],j=j(se),j!=se&&j!=null&&e(U,y,{configurable:!0,writable:!0,value:j})}}i("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(y){return y||function(j){var U=[],se;for(se in j)Object.prototype.hasOwnProperty.call(j,se)&&U.push([se,j[se]]);return U}});var o=o||{},u=this||self;function d(y){var j=typeof y;return j=="object"&&y!=null||j=="function"}function h(y,j,U){return y.call.apply(y.bind,arguments)}function p(y,j,U){return p=h,p.apply(null,arguments)}function m(y,j){var U=Array.prototype.slice.call(arguments,1);return function(){var se=U.slice();return se.push.apply(se,arguments),y.apply(this,se)}}function w(y,j){function U(){}U.prototype=j.prototype,y.Z=j.prototype,y.prototype=new U,y.prototype.constructor=y,y.Ob=function(se,ze,Ye){for(var xt=Array(arguments.length-2),Jt=2;Jt<arguments.length;Jt++)xt[Jt-2]=arguments[Jt];return j.prototype[ze].apply(se,xt)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function x(y){const j=y.length;if(j>0){const U=Array(j);for(let se=0;se<j;se++)U[se]=y[se];return U}return[]}function A(y,j){for(let se=1;se<arguments.length;se++){const ze=arguments[se];var U=typeof ze;if(U=U!="object"?U:ze?Array.isArray(ze)?"array":U:"null",U=="array"||U=="object"&&typeof ze.length=="number"){U=y.length||0;const Ye=ze.length||0;y.length=U+Ye;for(let xt=0;xt<Ye;xt++)y[U+xt]=ze[xt]}else y.push(ze)}}class R{constructor(j,U){this.i=j,this.j=U,this.h=0,this.g=null}get(){let j;return this.h>0?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function C(y){u.setTimeout(()=>{throw y},0)}function k(){var y=H;let j=null;return y.g&&(j=y.g,y.g=y.g.next,y.g||(y.h=null),j.next=null),j}class q{constructor(){this.h=this.g=null}add(j,U){const se=$.get();se.set(j,U),this.h?this.h.next=se:this.g=se,this.h=se}}var $=new R(()=>new z,y=>y.reset());class z{constructor(){this.next=this.g=this.h=null}set(j,U){this.h=j,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ce=!1,H=new q,D=()=>{const y=Promise.resolve(void 0);oe=()=>{y.then(I)}};function I(){for(var y;y=k();){try{y.h.call(y.g)}catch(U){C(U)}var j=$;j.j(y),j.h<100&&(j.h++,y.next=j.g,j.g=y)}ce=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(y,j){this.type=y,this.g=this.target=j,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var y=!1,j=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const U=()=>{};u.addEventListener("test",U,j),u.removeEventListener("test",U,j)}catch{}return y})();function L(y){return/^[\s\xa0]*$/.test(y)}function ee(y,j){T.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,j)}w(ee,T),ee.prototype.init=function(y,j){const U=this.type=y.type,se=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=j,j=y.relatedTarget,j||(U=="mouseover"?j=y.fromElement:U=="mouseout"&&(j=y.toElement)),this.relatedTarget=j,se?(this.clientX=se.clientX!==void 0?se.clientX:se.pageX,this.clientY=se.clientY!==void 0?se.clientY:se.pageY,this.screenX=se.screenX||0,this.screenY=se.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),le=0;function ve(y,j,U,se,ze){this.listener=y,this.proxy=null,this.src=j,this.type=U,this.capture=!!se,this.ha=ze,this.key=++le,this.da=this.fa=!1}function me(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Le(y,j,U){for(const se in y)j.call(U,y[se],se,y)}function xe(y,j){for(const U in y)j.call(void 0,y[U],U,y)}function J(y){const j={};for(const U in y)j[U]=y[U];return j}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(y,j){let U,se;for(let ze=1;ze<arguments.length;ze++){se=arguments[ze];for(U in se)y[U]=se[U];for(let Ye=0;Ye<M.length;Ye++)U=M[Ye],Object.prototype.hasOwnProperty.call(se,U)&&(y[U]=se[U])}}function B(y){this.src=y,this.g={},this.h=0}B.prototype.add=function(y,j,U,se,ze){const Ye=y.toString();y=this.g[Ye],y||(y=this.g[Ye]=[],this.h++);const xt=ge(y,j,se,ze);return xt>-1?(j=y[xt],U||(j.fa=!1)):(j=new ve(j,this.src,Ye,!!se,ze),j.fa=U,y.push(j)),j};function ae(y,j){const U=j.type;if(U in y.g){var se=y.g[U],ze=Array.prototype.indexOf.call(se,j,void 0),Ye;(Ye=ze>=0)&&Array.prototype.splice.call(se,ze,1),Ye&&(me(j),y.g[U].length==0&&(delete y.g[U],y.h--))}}function ge(y,j,U,se){for(let ze=0;ze<y.length;++ze){const Ye=y[ze];if(!Ye.da&&Ye.listener==j&&Ye.capture==!!U&&Ye.ha==se)return ze}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Ve={};function Me(y,j,U,se,ze){if(Array.isArray(j)){for(let Ye=0;Ye<j.length;Ye++)Me(y,j[Ye],U,se,ze);return null}return U=je(U),y&&y[ye]?y.J(j,U,d(se)?!!se.capture:!1,ze):Q(y,j,U,!1,se,ze)}function Q(y,j,U,se,ze,Ye){if(!j)throw Error("Invalid event type");const xt=d(ze)?!!ze.capture:!!ze;let Jt=pe(y);if(Jt||(y[_e]=Jt=new B(y)),U=Jt.add(j,U,se,xt,Ye),U.proxy)return U;if(se=Te(),U.proxy=se,se.src=y,se.listener=U,y.addEventListener)F||(ze=xt),ze===void 0&&(ze=!1),y.addEventListener(j.toString(),se,ze);else if(y.attachEvent)y.attachEvent(Ie(j.toString()),se);else if(y.addListener&&y.removeListener)y.addListener(se);else throw Error("addEventListener and attachEvent are unavailable.");return U}function Te(){function y(U){return j.call(y.src,y.listener,U)}const j=Y;return y}function ue(y,j,U,se,ze){if(Array.isArray(j))for(var Ye=0;Ye<j.length;Ye++)ue(y,j[Ye],U,se,ze);else se=d(se)?!!se.capture:!!se,U=je(U),y&&y[ye]?(y=y.i,Ye=String(j).toString(),Ye in y.g&&(j=y.g[Ye],U=ge(j,U,se,ze),U>-1&&(me(j[U]),Array.prototype.splice.call(j,U,1),j.length==0&&(delete y.g[Ye],y.h--)))):y&&(y=pe(y))&&(j=y.g[j.toString()],y=-1,j&&(y=ge(j,U,se,ze)),(U=y>-1?j[y]:null)&&be(U))}function be(y){if(typeof y!="number"&&y&&!y.da){var j=y.src;if(j&&j[ye])ae(j.i,y);else{var U=y.type,se=y.proxy;j.removeEventListener?j.removeEventListener(U,se,y.capture):j.detachEvent?j.detachEvent(Ie(U),se):j.addListener&&j.removeListener&&j.removeListener(se),(U=pe(j))?(ae(U,y),U.h==0&&(U.src=null,j[_e]=null)):me(y)}}}function Ie(y){return y in Ve?Ve[y]:Ve[y]="on"+y}function Y(y,j){if(y.da)y=!0;else{j=new ee(j,this);const U=y.listener,se=y.ha||y.src;y.fa&&be(y),y=U.call(se,j)}return y}function pe(y){return y=y[_e],y instanceof B?y:null}var Ne="__closure_events_fn_"+(Math.random()*1e9>>>0);function je(y){return typeof y=="function"?y:(y[Ne]||(y[Ne]=function(j){return y.handleEvent(j)}),y[Ne])}function we(){V.call(this),this.i=new B(this),this.M=this,this.G=null}w(we,V),we.prototype[ye]=!0,we.prototype.removeEventListener=function(y,j,U,se){ue(this,y,j,U,se)};function Ce(y,j){var U,se=y.G;if(se)for(U=[];se;se=se.G)U.push(se);if(y=y.M,se=j.type||j,typeof j=="string")j=new T(j,y);else if(j instanceof T)j.target=j.target||y;else{var ze=j;j=new T(se,y),G(j,ze)}ze=!0;let Ye,xt;if(U)for(xt=U.length-1;xt>=0;xt--)Ye=j.g=U[xt],ze=Je(Ye,se,!0,j)&&ze;if(Ye=j.g=y,ze=Je(Ye,se,!0,j)&&ze,ze=Je(Ye,se,!1,j)&&ze,U)for(xt=0;xt<U.length;xt++)Ye=j.g=U[xt],ze=Je(Ye,se,!1,j)&&ze}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var y=this.i;for(const j in y.g){const U=y.g[j];for(let se=0;se<U.length;se++)me(U[se]);delete y.g[j],y.h--}}this.G=null},we.prototype.J=function(y,j,U,se){return this.i.add(String(y),j,!1,U,se)},we.prototype.K=function(y,j,U,se){return this.i.add(String(y),j,!0,U,se)};function Je(y,j,U,se){if(j=y.i.g[String(j)],!j)return!0;j=j.concat();let ze=!0;for(let Ye=0;Ye<j.length;++Ye){const xt=j[Ye];if(xt&&!xt.da&&xt.capture==U){const Jt=xt.listener,ar=xt.ha||xt.src;xt.fa&&ae(y.i,xt),ze=Jt.call(ar,se)!==!1&&ze}}return ze&&!se.defaultPrevented}function ut(y,j){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=p(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(j)>2147483647?-1:u.setTimeout(y,j||0)}function nt(y){y.g=ut(()=>{y.g=null,y.i&&(y.i=!1,nt(y))},y.l);const j=y.h;y.h=null,y.m.apply(null,j)}class ke extends V{constructor(j,U){super(),this.m=j,this.l=U,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:nt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function st(y){V.call(this),this.h=y,this.g={}}w(st,V);var Xe=[];function Qe(y){Le(y.g,function(j,U){this.g.hasOwnProperty(U)&&be(j)},y),y.g={}}st.prototype.N=function(){st.Z.N.call(this),Qe(this)},st.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tt=u.JSON.stringify,Oe=u.JSON.parse,De=class{stringify(y){return u.JSON.stringify(y,void 0)}parse(y){return u.JSON.parse(y,void 0)}};function Be(){}function it(){}var gt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function et(){T.call(this,"d")}w(et,T);function bt(){T.call(this,"c")}w(bt,T);var St={},Nt=null;function un(){return Nt=Nt||new we}St.Ia="serverreachability";function Ot(y){T.call(this,St.Ia,y)}w(Ot,T);function Vt(y){const j=un();Ce(j,new Ot(j))}St.STAT_EVENT="statevent";function Cn(y,j){T.call(this,St.STAT_EVENT,y),this.stat=j}w(Cn,T);function Pt(y){const j=un();Ce(j,new Cn(j,y))}St.Ja="timingevent";function It(y,j){T.call(this,St.Ja,y),this.size=j}w(It,T);function nn(y,j){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){y()},j)}function ws(){this.g=!0}ws.prototype.ua=function(){this.g=!1};function us(y,j,U,se,ze,Ye){y.info(function(){if(y.g)if(Ye){var xt="",Jt=Ye.split("&");for(let mn=0;mn<Jt.length;mn++){var ar=Jt[mn].split("=");if(ar.length>1){const zn=ar[0];ar=ar[1];const ps=zn.split("_");xt=ps.length>=2&&ps[1]=="type"?xt+(zn+"="+ar+"&"):xt+(zn+"=redacted&")}}}else xt=null;else xt=Ye;return"XMLHTTP REQ ("+se+") [attempt "+ze+"]: "+j+`
`+U+`
`+xt})}function qi(y,j,U,se,ze,Ye,xt){y.info(function(){return"XMLHTTP RESP ("+se+") [ attempt "+ze+"]: "+j+`
`+U+`
`+Ye+" "+xt})}function es(y,j,U,se){y.info(function(){return"XMLHTTP TEXT ("+j+"): "+ma(y,U)+(se?" "+se:"")})}function Ut(y,j){y.info(function(){return"TIMEOUT: "+j})}ws.prototype.info=function(){};function ma(y,j){if(!y.g)return j;if(!j)return null;try{const Ye=JSON.parse(j);if(Ye){for(y=0;y<Ye.length;y++)if(Array.isArray(Ye[y])){var U=Ye[y];if(!(U.length<2)){var se=U[1];if(Array.isArray(se)&&!(se.length<1)){var ze=se[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(let xt=1;xt<se.length;xt++)se[xt]=""}}}}return tt(Ye)}catch{return j}}var Qs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ms={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Os;function Kn(){}w(Kn,Be),Kn.prototype.g=function(){return new XMLHttpRequest},Os=new Kn;function sr(y){return encodeURIComponent(String(y))}function zr(y){var j=1;y=y.split(":");const U=[];for(;j>0&&y.length;)U.push(y.shift()),j--;return y.length&&U.push(y.join(":")),U}function Ss(y,j,U,se){this.j=y,this.i=j,this.l=U,this.S=se||1,this.V=new st(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ds}function ds(){this.i=null,this.g="",this.h=!1}var Bn={},Jn={};function qr(y,j,U){y.M=1,y.A=Da(Nr(j)),y.u=U,y.R=!0,Us(y,null)}function Us(y,j){y.F=Date.now(),Bs(y),y.B=Nr(y.A);var U=y.B,se=y.S;Array.isArray(se)||(se=[String(se)]),Lo(U.i,"t",se),y.C=0,U=y.j.L,y.h=new ds,y.g=At(y.j,U?j:null,!y.u),y.P>0&&(y.O=new ke(p(y.Y,y,y.g),y.P)),j=y.V,U=y.g,se=y.ba;var ze="readystatechange";Array.isArray(ze)||(ze&&(Xe[0]=ze.toString()),ze=Xe);for(let Ye=0;Ye<ze.length;Ye++){const xt=Me(U,ze[Ye],se||j.handleEvent,!1,j.h||j);if(!xt)break;j.g[xt.key]=xt}j=y.J?J(y.J):{},y.u?(y.v||(y.v="POST"),j["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,j)):(y.v="GET",y.g.ea(y.B,y.v,null,j)),Vt(),us(y.i,y.v,y.B,y.l,y.S,y.u)}Ss.prototype.ba=function(y){y=y.target;const j=this.O;j&&ri(y)==3?j.j():this.Y(y)},Ss.prototype.Y=function(y){try{if(y==this.g)e:{const Jt=ri(this.g),ar=this.g.ya(),mn=this.g.ca();if(!(Jt<3)&&(Jt!=3||this.g&&(this.h.h||this.g.la()||Pr(this.g)))){this.K||Jt!=4||ar==7||(ar==8||mn<=0?Vt(3):Vt(2)),Js(this);var j=this.g.ca();this.X=j;var U=pi(this);if(this.o=j==200,qi(this.i,this.v,this.B,this.l,this.S,Jt,j),this.o){if(this.U&&!this.L){t:{if(this.g){var se,ze=this.g;if((se=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(se)){var Ye=se;break t}}Ye=null}if(y=Ye)es(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mi(this,y);else{this.o=!1,this.m=3,Pt(12),Zs(this),_s(this);break e}}if(this.R){y=!0;let zn;for(;!this.K&&this.C<U.length;)if(zn=Ri(this,U),zn==Jn){Jt==4&&(this.m=4,Pt(14),y=!1),es(this.i,this.l,null,"[Incomplete Response]");break}else if(zn==Bn){this.m=4,Pt(15),es(this.i,this.l,U,"[Invalid Chunk]"),y=!1;break}else es(this.i,this.l,zn,null),mi(this,zn);if(ka(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jt!=4||U.length!=0||this.h.h||(this.m=1,Pt(16),y=!1),this.o=this.o&&y,!y)es(this.i,this.l,U,"[Invalid Chunked Response]"),Zs(this),_s(this);else if(U.length>0&&!this.W){this.W=!0;var xt=this.j;xt.g==this&&xt.aa&&!xt.P&&(xt.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Uo(xt),xt.P=!0,Pt(11))}}else es(this.i,this.l,U,null),mi(this,U);Jt==4&&Zs(this),this.o&&!this.K&&(Jt==4?he(this.j,this):(this.o=!1,Bs(this)))}else Hi(this.g),j==400&&U.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Zs(this),_s(this)}}}catch{}finally{}};function pi(y){if(!ka(y))return y.g.la();const j=Pr(y.g);if(j==="")return"";let U="";const se=j.length,ze=ri(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return Zs(y),_s(y),"";y.h.i=new u.TextDecoder}for(let Ye=0;Ye<se;Ye++)y.h.h=!0,U+=y.h.i.decode(j[Ye],{stream:!(ze&&Ye==se-1)});return j.length=0,y.h.g+=U,y.C=0,y.h.g}function ka(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Ri(y,j){var U=y.C,se=j.indexOf(`
`,U);return se==-1?Jn:(U=Number(j.substring(U,se)),isNaN(U)?Bn:(se+=1,se+U>j.length?Jn:(j=j.slice(se,se+U),y.C=se+U,j)))}Ss.prototype.cancel=function(){this.K=!0,Zs(this)};function Bs(y){y.T=Date.now()+y.H,ga(y,y.H)}function ga(y,j){if(y.D!=null)throw Error("WatchDog timer not null");y.D=nn(p(y.aa,y),j)}function Js(y){y.D&&(u.clearTimeout(y.D),y.D=null)}Ss.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(Ut(this.i,this.B),this.M!=2&&(Vt(),Pt(17)),Zs(this),this.m=2,_s(this)):ga(this,this.T-y)};function _s(y){y.j.I==0||y.K||he(y.j,y)}function Zs(y){Js(y);var j=y.O;j&&typeof j.dispose=="function"&&j.dispose(),y.O=null,Qe(y.V),y.g&&(j=y.g,y.g=null,j.abort(),j.dispose())}function mi(y,j){try{var U=y.j;if(U.I!=0&&(U.g==y||Ii(U.h,y))){if(!y.L&&Ii(U.h,y)&&U.I==3){try{var se=U.Ba.g.parse(j)}catch{se=null}if(Array.isArray(se)&&se.length==3){var ze=se;if(ze[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<y.F)W(U),Gi(U);else break e;Pi(U),Pt(18)}}else U.xa=ze[1],0<U.xa-U.K&&ze[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=nn(p(U.Va,U),6e3));gi(U.h)<=1&&U.ta&&(U.ta=void 0)}else Fe(U,11)}else if((y.L||U.g==y)&&W(U),!L(j))for(ze=U.Ba.g.parse(j),j=0;j<ze.length;j++){let mn=ze[j];const zn=mn[0];if(!(zn<=U.K))if(U.K=zn,mn=mn[1],U.I==2)if(mn[0]=="c"){U.M=mn[1],U.ba=mn[2];const ps=mn[3];ps!=null&&(U.ka=ps,U.j.info("VER="+U.ka));const Ns=mn[4];Ns!=null&&(U.za=Ns,U.j.info("SVER="+U.za));const Zn=mn[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(se=1.5*Zn,U.O=se,U.j.info("backChannelRequestTimeoutMs_="+se)),se=U;const As=y.g;if(As){const Li=As.g?As.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Li){var Ye=se.h;Ye.g||Li.indexOf("spdy")==-1&&Li.indexOf("quic")==-1&&Li.indexOf("h2")==-1||(Ye.j=Ye.l,Ye.g=new Set,Ye.h&&(ro(Ye,Ye.h),Ye.h=null))}if(se.G){const Oa=As.g?As.g.getResponseHeader("X-HTTP-Session-Id"):null;Oa&&(se.wa=Oa,_n(se.J,se.G,Oa))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-y.F,U.j.info("Handshake RTT: "+U.T+"ms")),se=U;var xt=y;if(se.na=pt(se,se.L?se.ba:null,se.W),xt.L){Do(se.h,xt);var Jt=xt,ar=se.O;ar&&(Jt.H=ar),Jt.D&&(Js(Jt),Bs(Jt)),se.g=xt}else _l(se);U.i.length>0&&vi(U)}else mn[0]!="stop"&&mn[0]!="close"||Fe(U,7);else U.I==3&&(mn[0]=="stop"||mn[0]=="close"?mn[0]=="stop"?Fe(U,7):Ma(U):mn[0]!="noop"&&U.l&&U.l.qa(mn),U.A=0)}}Vt(4)}catch{}}var yr=class{constructor(y,j){this.g=y,this.map=j}};function ko(y){this.l=y||10,u.PerformanceNavigationTiming?(y=u.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Vs(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function gi(y){return y.h?1:y.g?y.g.size:0}function Ii(y,j){return y.h?y.h==j:y.g?y.g.has(j):!1}function ro(y,j){y.g?y.g.add(j):y.h=j}function Do(y,j){y.h&&y.h==j?y.h=null:y.g&&y.g.has(j)&&y.g.delete(j)}ko.prototype.cancel=function(){if(this.i=Po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Po(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let j=y.i;for(const U of y.g.values())j=j.concat(U.G);return j}return x(y.i)}var yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ei(y,j){if(y){y=y.split("&");for(let U=0;U<y.length;U++){const se=y[U].indexOf("=");let ze,Ye=null;se>=0?(ze=y[U].substring(0,se),Ye=y[U].substring(se+1)):ze=y[U],j(ze,Ye?decodeURIComponent(Ye.replace(/\+/g," ")):"")}}}function hs(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let j;y instanceof hs?(this.l=y.l,yn(this,y.j),this.o=y.o,this.g=y.g,ya(this,y.u),this.h=y.h,yi(this,Fo(y.i)),this.m=y.m):y&&(j=String(y).match(yl))?(this.l=!1,yn(this,j[1]||"",!0),this.o=Dr(j[2]||""),this.g=Dr(j[3]||"",!0),ya(this,j[4]),this.h=Dr(j[5]||"",!0),yi(this,j[6]||"",!0),this.m=Dr(j[7]||"")):(this.l=!1,this.i=new va(null,this.l))}hs.prototype.toString=function(){const y=[];var j=this.j;j&&y.push(hr(j,so,!0),":");var U=this.g;return(U||j=="file")&&(y.push("//"),(j=this.o)&&y.push(hr(j,so,!0),"@"),y.push(sr(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&y.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&y.push("/"),y.push(hr(U,U.charAt(0)=="/"?vl:cc,!0))),(U=this.i.toString())&&y.push("?",U),(U=this.m)&&y.push("#",hr(U,bl)),y.join("")},hs.prototype.resolve=function(y){const j=Nr(this);let U=!!y.j;U?yn(j,y.j):U=!!y.o,U?j.o=y.o:U=!!y.g,U?j.g=y.g:U=y.u!=null;var se=y.h;if(U)ya(j,y.u);else if(U=!!y.h){if(se.charAt(0)!="/")if(this.g&&!this.h)se="/"+se;else{var ze=j.h.lastIndexOf("/");ze!=-1&&(se=j.h.slice(0,ze+1)+se)}if(ze=se,ze==".."||ze==".")se="";else if(ze.indexOf("./")!=-1||ze.indexOf("/.")!=-1){se=ze.lastIndexOf("/",0)==0,ze=ze.split("/");const Ye=[];for(let xt=0;xt<ze.length;){const Jt=ze[xt++];Jt=="."?se&&xt==ze.length&&Ye.push(""):Jt==".."?((Ye.length>1||Ye.length==1&&Ye[0]!="")&&Ye.pop(),se&&xt==ze.length&&Ye.push("")):(Ye.push(Jt),se=!0)}se=Ye.join("/")}else se=ze}return U?j.h=se:U=y.i.toString()!=="",U?yi(j,Fo(y.i)):U=!!y.m,U&&(j.m=y.m),j};function Nr(y){return new hs(y)}function yn(y,j,U){y.j=U?Dr(j,!0):j,y.j&&(y.j=y.j.replace(/:$/,""))}function ya(y,j){if(j){if(j=Number(j),isNaN(j)||j<0)throw Error("Bad port number "+j);y.u=j}else y.u=null}function yi(y,j,U){j instanceof va?(y.i=j,zs(y.i,y.l)):(U||(j=hr(j,Es)),y.i=new va(j,y.l))}function _n(y,j,U){y.i.set(j,U)}function Da(y){return _n(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function Dr(y,j){return y?j?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function hr(y,j,U){return typeof y=="string"?(y=encodeURI(y).replace(j,Ar),U&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function Ar(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var so=/[#\/\?@]/g,cc=/[#\?:]/g,vl=/[#\?]/g,Es=/[#\?@]/g,bl=/#/g;function va(y,j){this.h=this.g=null,this.i=y||null,this.j=!!j}function ts(y){y.g||(y.g=new Map,y.h=0,y.i&&ei(y.i,function(j,U){y.add(decodeURIComponent(j.replace(/\+/g," ")),U)}))}n=va.prototype,n.add=function(y,j){ts(this),this.i=null,y=ba(this,y);let U=this.g.get(y);return U||this.g.set(y,U=[]),U.push(j),this.h+=1,this};function Pa(y,j){ts(y),j=ba(y,j),y.g.has(j)&&(y.i=null,y.h-=y.g.get(j).length,y.g.delete(j))}function xl(y,j){return ts(y),j=ba(y,j),y.g.has(j)}n.forEach=function(y,j){ts(this),this.g.forEach(function(U,se){U.forEach(function(ze){y.call(j,ze,se,this)},this)},this)};function wl(y,j){ts(y);let U=[];if(typeof j=="string")xl(y,j)&&(U=U.concat(y.g.get(ba(y,j))));else for(y=Array.from(y.g.values()),j=0;j<y.length;j++)U=U.concat(y[j]);return U}n.set=function(y,j){return ts(this),this.i=null,y=ba(this,y),xl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[j]),this.h+=1,this},n.get=function(y,j){return y?(y=wl(this,y),y.length>0?String(y[0]):j):j};function Lo(y,j,U){Pa(y,j),U.length>0&&(y.i=null,y.g.set(ba(y,j),x(U)),y.h+=U.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],j=Array.from(this.g.keys());for(let se=0;se<j.length;se++){var U=j[se];const ze=sr(U);U=wl(this,U);for(let Ye=0;Ye<U.length;Ye++){let xt=ze;U[Ye]!==""&&(xt+="="+sr(U[Ye])),y.push(xt)}}return this.i=y.join("&")};function Fo(y){const j=new va;return j.i=y.i,y.g&&(j.g=new Map(y.g),j.h=y.h),j}function ba(y,j){return j=String(j),y.j&&(j=j.toLowerCase()),j}function zs(y,j){j&&!y.j&&(ts(y),y.i=null,y.g.forEach(function(U,se){const ze=se.toLowerCase();se!=ze&&(Pa(this,se),Lo(this,ze,U))},y)),y.j=j}function ki(y,j){const U=new ws;if(u.Image){const se=new Image;se.onload=m(qs,U,"TestLoadImage: loaded",!0,j,se),se.onerror=m(qs,U,"TestLoadImage: error",!1,j,se),se.onabort=m(qs,U,"TestLoadImage: abort",!1,j,se),se.ontimeout=m(qs,U,"TestLoadImage: timeout",!1,j,se),u.setTimeout(function(){se.ontimeout&&se.ontimeout()},1e4),se.src=y}else j(!1)}function xa(y,j){const U=new ws,se=new AbortController,ze=setTimeout(()=>{se.abort(),qs(U,"TestPingServer: timeout",!1,j)},1e4);fetch(y,{signal:se.signal}).then(Ye=>{clearTimeout(ze),Ye.ok?qs(U,"TestPingServer: ok",!0,j):qs(U,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ze),qs(U,"TestPingServer: error",!1,j)})}function qs(y,j,U,se,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),se(U)}catch{}}function La(){this.g=new De}function zt(y){this.i=y.Sb||null,this.h=y.ab||!1}w(zt,Be),zt.prototype.g=function(){return new io(this.i,this.h)};function io(y,j){we.call(this),this.H=y,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}w(io,we),n=io.prototype,n.open=function(y,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=j,this.readyState=1,ns(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const j={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(j.body=y),(this.H||u).fetch(new Request(this.D,j)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,ns(this)),this.g&&(this.readyState=3,ns(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mo(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mo(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var j=y.value?y.value:new Uint8Array(0);(j=this.B.decode(j,{stream:!y.done}))&&(this.response=this.responseText+=j)}y.done?Fa(this):ns(this),this.readyState==3&&Mo(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Fa(this))},n.Na=function(y){this.g&&(this.response=y,Fa(this))},n.ga=function(){this.g&&Fa(this)};function Fa(y){y.readyState=4,y.l=null,y.j=null,y.B=null,ns(y)}n.setRequestHeader=function(y,j){this.A.append(y,j)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],j=this.h.entries();for(var U=j.next();!U.done;)U=U.value,y.push(U[0]+": "+U[1]),U=j.next();return y.join(`\r
`)};function ns(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(io.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Hr(y){let j="";return Le(y,function(U,se){j+=se,j+=":",j+=U,j+=`\r
`}),j}function ao(y,j,U){e:{for(se in U){var se=!1;break e}se=!0}se||(U=Hr(U),typeof y=="string"?U!=null&&sr(U):_n(y,j,U))}function Vn(y){we.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}w(Vn,we);var ti=/^https?$/i,oo=["POST","PUT"];n=Vn.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,j,U,se){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);j=j?j.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Os.g(),this.g.onreadystatechange=_(p(this.Ca,this));try{this.B=!0,this.g.open(j,String(y),!0),this.B=!1}catch(Ye){Di(this,Ye);return}if(y=U||"",U=new Map(this.headers),se)if(Object.getPrototypeOf(se)===Object.prototype)for(var ze in se)U.set(ze,se[ze]);else if(typeof se.keys=="function"&&typeof se.get=="function")for(const Ye of se.keys())U.set(Ye,se.get(Ye));else throw Error("Unknown input type for opt_headers: "+String(se));se=Array.from(U.keys()).find(Ye=>Ye.toLowerCase()=="content-type"),ze=u.FormData&&y instanceof u.FormData,!(Array.prototype.indexOf.call(oo,j,void 0)>=0)||se||ze||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ye,xt]of U)this.g.setRequestHeader(Ye,xt);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(Ye){Di(this,Ye)}};function Di(y,j){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=j,y.o=5,Sl(y),wa(y)}function Sl(y){y.A||(y.A=!0,Ce(y,"complete"),Ce(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,Ce(this,"complete"),Ce(this,"abort"),wa(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wa(this,!0)),Vn.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ni(this):this.Xa())},n.Xa=function(){ni(this)};function ni(y){if(y.h&&typeof o<"u"){if(y.v&&ri(y)==4)setTimeout(y.Ca.bind(y),0);else if(Ce(y,"readystatechange"),ri(y)==4){y.h=!1;try{const Ye=y.ca();e:switch(Ye){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var U;if(!(U=j)){var se;if(se=Ye===0){let xt=String(y.D).match(yl)[1]||null;!xt&&u.self&&u.self.location&&(xt=u.self.location.protocol.slice(0,-1)),se=!ti.test(xt?xt.toLowerCase():"")}U=se}if(U)Ce(y,"complete"),Ce(y,"success");else{y.o=6;try{var ze=ri(y)>2?y.g.statusText:""}catch{ze=""}y.l=ze+" ["+y.ca()+"]",Sl(y)}}finally{wa(y)}}}}function wa(y,j){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const U=y.g;y.g=null,j||Ce(y,"ready");try{U.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ri(y){return y.g?y.g.readyState:0}n.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var j=this.g.responseText;return y&&j.indexOf(y)==0&&(j=j.substring(y.length)),Oe(j)}};function Pr(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Hi(y){const j={};y=(y.g&&ri(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let se=0;se<y.length;se++){if(L(y[se]))continue;var U=zr(y[se]);const ze=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Ye=j[ze]||[];j[ze]=Ye,Ye.push(U)}xe(j,function(se){return se.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(y,j,U){return U&&U.internalChannelParams&&U.internalChannelParams[y]||j}function $i(y){this.za=0,this.i=[],this.j=new ws,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=fs("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=fs("baseRetryDelayMs",5e3,y),this.Za=fs("retryDelaySeedMs",1e4,y),this.Ta=fs("forwardChannelMaxRetries",2,y),this.va=fs("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new ko(y&&y.concurrentRequestLimit),this.Ba=new La,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=$i.prototype,n.ka=8,n.I=1,n.connect=function(y,j,U,se){Pt(0),this.W=y,this.H=j||{},U&&se!==void 0&&(this.H.OSID=U,this.H.OAID=se),this.F=this.X,this.J=pt(this,null,this.W),vi(this)};function Ma(y){if(Wi(y),y.I==3){var j=y.V++,U=Nr(y.J);if(_n(U,"SID",y.M),_n(U,"RID",j),_n(U,"TYPE","terminate"),si(y,U),j=new Ss(y,y.j,j),j.M=2,j.A=Da(Nr(U)),U=!1,u.navigator&&u.navigator.sendBeacon)try{U=u.navigator.sendBeacon(j.A.toString(),"")}catch{}!U&&u.Image&&(new Image().src=j.A,U=!0),U||(j.g=At(j.j,null),j.g.ea(j.A)),j.F=Date.now(),Bs(j)}ot(y)}function Gi(y){y.g&&(Uo(y),y.g.cancel(),y.g=null)}function Wi(y){Gi(y),y.v&&(u.clearTimeout(y.v),y.v=null),W(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&u.clearTimeout(y.m),y.m=null)}function vi(y){if(!Vs(y.h)&&!y.m){y.m=!0;var j=y.Ea;oe||D(),ce||(oe(),ce=!0),H.add(j,y),y.D=0}}function lo(y,j){return gi(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=j.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=nn(p(y.Ea,y,j),Ee(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const ze=new Ss(this,this.j,y);let Ye=this.o;if(this.U&&(Ye?(Ye=J(Ye),G(Ye,this.U)):Ye=this.U),this.u!==null||this.R||(ze.J=Ye,Ye=null),this.S)e:{for(var j=0,U=0;U<this.i.length;U++){t:{var se=this.i[U];if("__data__"in se.map&&(se=se.map.__data__,typeof se=="string")){se=se.length;break t}se=void 0}if(se===void 0)break;if(j+=se,j>4096){j=U;break e}if(j===4096||U===this.i.length-1){j=U+1;break e}}j=1e3}else j=1e3;j=Yi(this,ze,j),U=Nr(this.J),_n(U,"RID",y),_n(U,"CVER",22),this.G&&_n(U,"X-HTTP-Session-Id",this.G),si(this,U),Ye&&(this.R?j="headers="+sr(Hr(Ye))+"&"+j:this.u&&ao(U,this.u,Ye)),ro(this.h,ze),this.Ra&&_n(U,"TYPE","init"),this.S?(_n(U,"$req",j),_n(U,"SID","null"),ze.U=!0,qr(ze,U,null)):qr(ze,U,j),this.I=2}}else this.I==3&&(y?Oo(this,y):this.i.length==0||Vs(this.h)||Oo(this))};function Oo(y,j){var U;j?U=j.l:U=y.V++;const se=Nr(y.J);_n(se,"SID",y.M),_n(se,"RID",U),_n(se,"AID",y.K),si(y,se),y.u&&y.o&&ao(se,y.u,y.o),U=new Ss(y,y.j,U,y.D+1),y.u===null&&(U.J=y.o),j&&(y.i=j.G.concat(y.i)),j=Yi(y,U,1e3),U.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),ro(y.h,U),qr(U,se,j)}function si(y,j){y.H&&Le(y.H,function(U,se){_n(j,se,U)}),y.l&&Le({},function(U,se){_n(j,se,U)})}function Yi(y,j,U){U=Math.min(y.i.length,U);const se=y.l?p(y.l.Ka,y.l,y):null;e:{var ze=y.i;let Jt=-1;for(;;){const ar=["count="+U];Jt==-1?U>0?(Jt=ze[0].g,ar.push("ofs="+Jt)):Jt=0:ar.push("ofs="+Jt);let mn=!0;for(let zn=0;zn<U;zn++){var Ye=ze[zn].g;const ps=ze[zn].map;if(Ye-=Jt,Ye<0)Jt=Math.max(0,ze[zn].g-100),mn=!1;else try{Ye="req"+Ye+"_"||"";try{var xt=ps instanceof Map?ps:Object.entries(ps);for(const[Ns,Zn]of xt){let As=Zn;d(Zn)&&(As=tt(Zn)),ar.push(Ye+Ns+"="+encodeURIComponent(As))}}catch(Ns){throw ar.push(Ye+"type="+encodeURIComponent("_badmap")),Ns}}catch{se&&se(ps)}}if(mn){xt=ar.join("&");break e}}xt=void 0}return y=y.i.splice(0,U),j.G=y,xt}function _l(y){if(!y.g&&!y.v){y.Y=1;var j=y.Da;oe||D(),ce||(oe(),ce=!0),H.add(j,y),y.A=0}}function Pi(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=nn(p(y.Da,y),Ee(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,E(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=nn(p(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Gi(this),E(this))};function Uo(y){y.B!=null&&(u.clearTimeout(y.B),y.B=null)}function E(y){y.g=new Ss(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var j=Nr(y.na);_n(j,"RID","rpc"),_n(j,"SID",y.M),_n(j,"AID",y.K),_n(j,"CI",y.F?"0":"1"),!y.F&&y.ia&&_n(j,"TO",y.ia),_n(j,"TYPE","xmlhttp"),si(y,j),y.u&&y.o&&ao(j,y.u,y.o),y.O&&(y.g.H=y.O);var U=y.g;y=y.ba,U.M=1,U.A=Da(Nr(j)),U.u=null,U.R=!0,Us(U,y)}n.Va=function(){this.C!=null&&(this.C=null,Gi(this),Pi(this),Pt(19))};function W(y){y.C!=null&&(u.clearTimeout(y.C),y.C=null)}function he(y,j){var U=null;if(y.g==j){W(y),Uo(y),y.g=null;var se=2}else if(Ii(y.h,j))U=j.G,Do(y.h,j),se=1;else return;if(y.I!=0){if(j.o)if(se==1){U=j.u?j.u.length:0,j=Date.now()-j.F;var ze=y.D;se=un(),Ce(se,new It(se,U)),vi(y)}else _l(y);else if(ze=j.m,ze==3||ze==0&&j.X>0||!(se==1&&lo(y,j)||se==2&&Pi(y)))switch(U&&U.length>0&&(j=y.h,j.i=j.i.concat(U)),ze){case 1:Fe(y,5);break;case 4:Fe(y,10);break;case 3:Fe(y,6);break;default:Fe(y,2)}}}function Ee(y,j){let U=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(U*=2),U*j}function Fe(y,j){if(y.j.info("Error code "+j),j==2){var U=p(y.bb,y),se=y.Ua;const ze=!se;se=new hs(se||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||yn(se,"https"),Da(se),ze?ki(se.toString(),U):xa(se.toString(),U)}else Pt(2);y.I=0,y.l&&y.l.pa(j),ot(y),Wi(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function ot(y){if(y.I=0,y.ja=[],y.l){const j=Po(y.h);(j.length!=0||y.i.length!=0)&&(A(y.ja,j),A(y.ja,y.i),y.h.i.length=0,x(y.i),y.i.length=0),y.l.oa()}}function pt(y,j,U){var se=U instanceof hs?Nr(U):new hs(U);if(se.g!="")j&&(se.g=j+"."+se.g),ya(se,se.u);else{var ze=u.location;se=ze.protocol,j=j?j+"."+ze.hostname:ze.hostname,ze=+ze.port;const Ye=new hs(null);se&&yn(Ye,se),j&&(Ye.g=j),ze&&ya(Ye,ze),U&&(Ye.h=U),se=Ye}return U=y.G,j=y.wa,U&&j&&_n(se,U,j),_n(se,"VER",y.ka),si(y,se),se}function At(y,j,U){if(j&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return j=y.Aa&&!y.ma?new Vn(new zt({ab:U})):new Vn(y.ma),j.Fa(y.L),j}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kt(){}n=kt.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ht(){}Ht.prototype.g=function(y,j){return new Bt(y,j)};function Bt(y,j){we.call(this),this.g=new $i(j),this.l=y,this.h=j&&j.messageUrlParams||null,y=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(y?y["X-WebChannel-Content-Type"]=j.messageContentType:y={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.sa&&(y?y["X-WebChannel-Client-Profile"]=j.sa:y={"X-WebChannel-Client-Profile":j.sa}),this.g.U=y,(y=j&&j.Qb)&&!L(y)&&(this.g.u=y),this.A=j&&j.supportsCrossDomainXhr||!1,this.v=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!L(j)&&(this.g.G=j,y=this.h,y!==null&&j in y&&(y=this.h,j in y&&delete y[j])),this.j=new Xn(this)}w(Bt,we),Bt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Ma(this.g)},Bt.prototype.o=function(y){var j=this.g;if(typeof y=="string"){var U={};U.__data__=y,y=U}else this.v&&(U={},U.__data__=tt(y),y=U);j.i.push(new yr(j.Ya++,y)),j.I==3&&vi(j)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Ma(this.g),delete this.g,Bt.Z.N.call(this)};function vn(y){et.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var j=y.__sm__;if(j){e:{for(const U in j){y=U;break e}y=void 0}(this.i=y)&&(y=this.i,j=j!==null&&y in j?j[y]:void 0),this.data=j}else this.data=y}w(vn,et);function ir(){bt.call(this),this.status=1}w(ir,bt);function Xn(y){this.g=y}w(Xn,kt),Xn.prototype.ra=function(){Ce(this.g,"a")},Xn.prototype.qa=function(y){Ce(this.g,new vn(y))},Xn.prototype.pa=function(y){Ce(this.g,new ir)},Xn.prototype.oa=function(){Ce(this.g,"b")},Ht.prototype.createWebChannel=Ht.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,vE=function(){return new Ht},yE=function(){return un()},gE=St,i1={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,Am=Qs,Ms.COMPLETE="complete",mE=Ms,it.EventType=gt,gt.OPEN="a",gt.CLOSE="b",gt.ERROR="c",gt.MESSAGE="d",we.prototype.listen=we.prototype.J,pf=it,Vn.prototype.listenOnce=Vn.prototype.K,Vn.prototype.getLastError=Vn.prototype.Ha,Vn.prototype.getLastErrorCode=Vn.prototype.ya,Vn.prototype.getStatus=Vn.prototype.ca,Vn.prototype.getResponseJson=Vn.prototype.La,Vn.prototype.getResponseText=Vn.prototype.la,Vn.prototype.send=Vn.prototype.ea,Vn.prototype.setWithCredentials=Vn.prototype.Fa,pE=Vn}).apply(typeof sm<"u"?sm:typeof self<"u"?self:typeof window<"u"?window:{});const wx="@firebase/firestore",Sx="4.9.2";class Ti{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ti.UNAUTHENTICATED=new Ti(null),Ti.GOOGLE_CREDENTIALS=new Ti("google-credentials-uid"),Ti.FIRST_PARTY=new Ti("first-party-uid"),Ti.MOCK_USER=new Ti("mock-user");let yh="12.3.0";const ed=new Y1("@firebase/firestore");function Yd(){return ed.logLevel}function Tt(n,...e){if(ed.logLevel<=An.DEBUG){const t=e.map(cv);ed.debug(`Firestore (${yh}): ${n}`,...t)}}function nc(n,...e){if(ed.logLevel<=An.ERROR){const t=e.map(cv);ed.error(`Firestore (${yh}): ${n}`,...t)}}function lh(n,...e){if(ed.logLevel<=An.WARN){const t=e.map(cv);ed.warn(`Firestore (${yh}): ${n}`,...t)}}function cv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function Qt(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,bE(n,r,t)}function bE(n,e,t){let r=`FIRESTORE (${yh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw nc(r),new Error(r)}function Qn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||bE(e,i,r)}function ln(n,e){return n}const yt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lt extends pl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Jl{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class xE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ti.UNAUTHENTICATED)))}shutdown(){}}class oI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class lI{constructor(e){this.t=e,this.currentUser=Ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qn(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Jl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jl,e.enqueueRetryable((()=>i(this.currentUser)))};const u=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},d=h=>{Tt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>d(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?d(h):(Tt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jl)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Tt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qn(typeof r.accessToken=="string",31837,{l:r}),new xE(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qn(e===null||typeof e=="string",2055,{h:e}),new Ti(e)}}class cI{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ti.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uI{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ti.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _x{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,da(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qn(this.o===void 0,3512);const r=o=>{o.error!=null&&Tt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Tt("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{Tt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):Tt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _x(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _x(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function hI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class uv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=hI(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Tn(n,e){return n<e?-1:n>e?1:0}function a1(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return fy(i)===fy(o)?Tn(i,o):fy(i)?1:-1}return Tn(n.length,e.length)}const fI=55296,pI=57343;function fy(n){const e=n.charCodeAt(0);return e>=fI&&e<=pI}function ch(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}const Ex="__name__";class nl{constructor(e,t,r){t===void 0?t=0:t>e.length&&Qt(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Qt(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return nl.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nl?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=nl.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Tn(e.length,t.length)}static compareSegments(e,t){const r=nl.isNumericId(e),i=nl.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?nl.extractNumericId(e).compare(nl.extractNumericId(t)):a1(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qc.fromString(e.substring(4,e.length-2))}}class Sr extends nl{construct(e,t,r){return new Sr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Lt(yt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Sr(t)}static emptyPath(){return new Sr([])}}const mI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hi extends nl{construct(e,t,r){return new hi(e,t,r)}static isValidIdentifier(e){return mI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hi.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ex}static keyField(){return new hi([Ex])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new Lt(yt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new Lt(yt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new Lt(yt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else d==="`"?(u=!u,i++):d!=="."||u?(r+=d,i++):(o(),i++)}if(o(),u)throw new Lt(yt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hi(t)}static emptyPath(){return new hi([])}}class Wt{constructor(e){this.path=e}static fromPath(e){return new Wt(Sr.fromString(e))}static fromName(e){return new Wt(Sr.fromString(e).popFirst(5))}static empty(){return new Wt(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Wt(new Sr(e.slice()))}}function wE(n,e,t){if(!t)throw new Lt(yt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gI(n,e,t,r){if(e===!0&&r===!0)throw new Lt(yt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nx(n){if(!Wt.isDocumentKey(n))throw new Lt(yt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ax(n){if(Wt.isDocumentKey(n))throw new Lt(yt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SE(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function dv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Qt(12329,{type:typeof n})}function fa(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Lt(yt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=dv(n);throw new Lt(yt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function xs(n,e){const t={typeString:n};return e&&(t.value=e),t}function np(n,e){if(!SE(n))throw new Lt(yt.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const u=n[r];if(i&&typeof u!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&u!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new Lt(yt.INVALID_ARGUMENT,t);return!0}const Tx=-62135596800,jx=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jx);return new on(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Lt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Lt(yt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Tx)throw new Lt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Lt(yt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jx}_compareTo(e){return this.seconds===e.seconds?Tn(this.nanoseconds,e.nanoseconds):Tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:on._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(np(e,on._jsonSchema))return new on(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}on._jsonSchemaVersion="firestore/timestamp/1.0",on._jsonSchema={type:xs("string",on._jsonSchemaVersion),seconds:xs("number"),nanoseconds:xs("number")};class tn{static fromTimestamp(e){return new tn(e)}static min(){return new tn(new on(0,0))}static max(){return new tn(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Mf=-1;function yI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=tn.fromTimestamp(r===1e9?new on(t+1,0):new on(t,r));return new nu(i,Wt.empty(),e)}function vI(n){return new nu(n.readTime,n.key,Mf)}class nu{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new nu(tn.min(),Wt.empty(),Mf)}static max(){return new nu(tn.max(),Wt.empty(),Mf)}}function bI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Wt.comparator(n.documentKey,e.documentKey),t!==0?t:Tn(n.largestBatchId,e.largestBatchId))}const xI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vh(n){if(n.code!==yt.FAILED_PRECONDITION||n.message!==xI)throw n;Tt("LocalStore","Unexpectedly lost primary lease")}class mt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new mt(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof mt?t:mt.resolve(t)}catch(t){return mt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):mt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):mt.reject(t)}static resolve(e){return new mt(((t,r)=>{t(e)}))}static reject(e){return new mt(((t,r)=>{r(e)}))}static waitFor(e){return new mt(((t,r)=>{let i=0,o=0,u=!1;e.forEach((d=>{++i,d.next((()=>{++o,u&&o===i&&t()}),(h=>r(h)))})),u=!0,o===i&&t()}))}static or(e){let t=mt.resolve(!1);for(const r of e)t=t.next((i=>i?mt.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new mt(((r,i)=>{const o=e.length,u=new Array(o);let d=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next((m=>{u[p]=m,++d,d===o&&r(u)}),(m=>i(m)))}}))}static doWhile(e,t){return new mt(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}function SI(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function bh(n){return n.name==="IndexedDbTransactionError"}class gg{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gg.ce=-1;const hv=-1;function yg(n){return n==null}function Hm(n){return n===0&&1/n==-1/0}function _I(n){return typeof n=="number"&&Number.isInteger(n)&&!Hm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const _E="";function EI(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cx(e)),e=NI(n.get(t),e);return Cx(e)}function NI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case _E:t+="";break;default:t+=o}}return t}function Cx(n){return n+_E+""}function Rx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function EE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Br{constructor(e,t){this.comparator=e,this.root=t||di.EMPTY}insert(e,t){return new Br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,di.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,di.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new im(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new im(this.root,e,this.comparator,!1)}getReverseIterator(){return new im(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new im(this.root,e,this.comparator,!0)}}class im{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class di{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??di.RED,this.left=i??di.EMPTY,this.right=o??di.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new di(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return di.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return di.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,di.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,di.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Qt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Qt(27949);return e+(this.isRed()?0:1)}}di.EMPTY=null,di.RED=!0,di.BLACK=!1;di.EMPTY=new class{constructor(){this.size=0}get key(){throw Qt(57766)}get value(){throw Qt(16141)}get color(){throw Qt(16727)}get left(){throw Qt(29726)}get right(){throw Qt(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new di(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Fs{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ix(this.data.getIterator())}getIteratorFrom(e){return new Ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Fs)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Fs(this.comparator);return t.data=e,t}}class Ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ra{constructor(e){this.fields=e,e.sort(hi.comparator)}static empty(){return new Ra([])}unionWith(e){let t=new Fs(hi.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ra(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ch(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}class NE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new NE("Invalid base64 string: "+o):o}})(e);return new fi(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let u=0;u<i.length;++u)o+=String.fromCharCode(i[u]);return o})(e);return new fi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fi.EMPTY_BYTE_STRING=new fi("");const AI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ru(n){if(Qn(!!n,39018),typeof n=="string"){let e=0;const t=AI.exec(n);if(Qn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:is(n.seconds),nanos:is(n.nanos)}}function is(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function su(n){return typeof n=="string"?fi.fromBase64String(n):fi.fromUint8Array(n)}const AE="server_timestamp",TE="__type__",jE="__previous_value__",CE="__local_write_time__";function fv(n){return(n?.mapValue?.fields||{})[TE]?.stringValue===AE}function vg(n){const e=n.mapValue.fields[jE];return fv(e)?vg(e):e}function Of(n){const e=ru(n.mapValue.fields[CE].timestampValue);return new on(e.seconds,e.nanos)}class TI{constructor(e,t,r,i,o,u,d,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=m}}const $m="(default)";class Uf{constructor(e,t){this.projectId=e,this.database=t||$m}static empty(){return new Uf("","")}get isDefaultDatabase(){return this.database===$m}isEqual(e){return e instanceof Uf&&e.projectId===this.projectId&&e.database===this.database}}const RE="__type__",jI="__max__",am={mapValue:{}},IE="__vector__",Gm="value";function iu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?fv(n)?4:RI(n)?9007199254740991:CI(n)?10:11:Qt(28295,{value:n})}function dl(n,e){if(n===e)return!0;const t=iu(n);if(t!==iu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Of(n).isEqual(Of(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const u=ru(i.timestampValue),d=ru(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return su(i.bytesValue).isEqual(su(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return is(i.geoPointValue.latitude)===is(o.geoPointValue.latitude)&&is(i.geoPointValue.longitude)===is(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return is(i.integerValue)===is(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const u=is(i.doubleValue),d=is(o.doubleValue);return u===d?Hm(u)===Hm(d):isNaN(u)&&isNaN(d)}return!1})(n,e);case 9:return ch(n.arrayValue.values||[],e.arrayValue.values||[],dl);case 10:case 11:return(function(i,o){const u=i.mapValue.fields||{},d=o.mapValue.fields||{};if(Rx(u)!==Rx(d))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(d[h]===void 0||!dl(u[h],d[h])))return!1;return!0})(n,e);default:return Qt(52216,{left:n})}}function Bf(n,e){return(n.values||[]).find((t=>dl(t,e)))!==void 0}function uh(n,e){if(n===e)return 0;const t=iu(n),r=iu(e);if(t!==r)return Tn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tn(n.booleanValue,e.booleanValue);case 2:return(function(o,u){const d=is(o.integerValue||o.doubleValue),h=is(u.integerValue||u.doubleValue);return d<h?-1:d>h?1:d===h?0:isNaN(d)?isNaN(h)?0:-1:1})(n,e);case 3:return kx(n.timestampValue,e.timestampValue);case 4:return kx(Of(n),Of(e));case 5:return a1(n.stringValue,e.stringValue);case 6:return(function(o,u){const d=su(o),h=su(u);return d.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,u){const d=o.split("/"),h=u.split("/");for(let p=0;p<d.length&&p<h.length;p++){const m=Tn(d[p],h[p]);if(m!==0)return m}return Tn(d.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,u){const d=Tn(is(o.latitude),is(u.latitude));return d!==0?d:Tn(is(o.longitude),is(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Dx(n.arrayValue,e.arrayValue);case 10:return(function(o,u){const d=o.fields||{},h=u.fields||{},p=d[Gm]?.arrayValue,m=h[Gm]?.arrayValue,w=Tn(p?.values?.length||0,m?.values?.length||0);return w!==0?w:Dx(p,m)})(n.mapValue,e.mapValue);case 11:return(function(o,u){if(o===am.mapValue&&u===am.mapValue)return 0;if(o===am.mapValue)return 1;if(u===am.mapValue)return-1;const d=o.fields||{},h=Object.keys(d),p=u.fields||{},m=Object.keys(p);h.sort(),m.sort();for(let w=0;w<h.length&&w<m.length;++w){const _=a1(h[w],m[w]);if(_!==0)return _;const x=uh(d[h[w]],p[m[w]]);if(x!==0)return x}return Tn(h.length,m.length)})(n.mapValue,e.mapValue);default:throw Qt(23264,{he:t})}}function kx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Tn(n,e);const t=ru(n),r=ru(e),i=Tn(t.seconds,r.seconds);return i!==0?i:Tn(t.nanos,r.nanos)}function Dx(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=uh(t[i],r[i]);if(o)return o}return Tn(t.length,r.length)}function dh(n){return o1(n)}function o1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=ru(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return su(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Wt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=o1(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const u of r)o?o=!1:i+=",",i+=`${u}:${o1(t.fields[u])}`;return i+"}"})(n.mapValue):Qt(61005,{value:n})}function Tm(n){switch(iu(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vg(n);return e?16+Tm(e):16;case 5:return 2*n.stringValue.length;case 6:return su(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+Tm(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return hu(r.fields,((o,u)=>{i+=o.length+Tm(u)})),i})(n.mapValue);default:throw Qt(13486,{value:n})}}function l1(n){return!!n&&"integerValue"in n}function pv(n){return!!n&&"arrayValue"in n}function Px(n){return!!n&&"nullValue"in n}function Lx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jm(n){return!!n&&"mapValue"in n}function CI(n){return(n?.mapValue?.fields||{})[RE]?.stringValue===IE}function xf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return hu(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=xf(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=xf(n.arrayValue.values[t]);return e}return{...n}}function RI(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===jI}class ha{constructor(e){this.value=e}static empty(){return new ha({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xf(t)}setAll(e){let t=hi.emptyPath(),r={},i=[];e.forEach(((u,d)=>{if(!t.isImmediateParentOf(d)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=xf(u):i.push(d.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());jm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hu(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new ha(xf(this.value))}}function kE(n){const e=[];return hu(n.fields,((t,r)=>{const i=new hi([t]);if(jm(r)){const o=kE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const u of o)e.push(i.child(u))}else e.push(i)})),new Ra(e)}class ji{constructor(e,t,r,i,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new ji(e,0,tn.min(),tn.min(),tn.min(),ha.empty(),0)}static newFoundDocument(e,t,r,i){return new ji(e,1,t,tn.min(),r,i,0)}static newNoDocument(e,t){return new ji(e,2,t,tn.min(),tn.min(),ha.empty(),0)}static newUnknownDocument(e,t){return new ji(e,3,t,tn.min(),tn.min(),ha.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ha.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ha.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wm{constructor(e,t){this.position=e,this.inclusive=t}}function Fx(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],u=n.position[i];if(o.field.isKeyField()?r=Wt.comparator(Wt.fromName(u.referenceValue),t.key):r=uh(u,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mx(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dl(n.position[t],e.position[t]))return!1;return!0}class Ym{constructor(e,t="asc"){this.field=e,this.dir=t}}function II(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class DE{}class Ls extends DE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new DI(e,t,r):t==="array-contains"?new FI(e,r):t==="in"?new MI(e,r):t==="not-in"?new OI(e,r):t==="array-contains-any"?new UI(e,r):new Ls(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new PI(e,r):new LI(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(uh(t,this.value)):t!==null&&iu(this.value)===iu(t)&&this.matchesComparison(uh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Qt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hl extends DE{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hl(e,t)}matches(e){return PE(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function PE(n){return n.op==="and"}function LE(n){return kI(n)&&PE(n)}function kI(n){for(const e of n.filters)if(e instanceof hl)return!1;return!0}function c1(n){if(n instanceof Ls)return n.field.canonicalString()+n.op.toString()+dh(n.value);if(LE(n))return n.filters.map((e=>c1(e))).join(",");{const e=n.filters.map((t=>c1(t))).join(",");return`${n.op}(${e})`}}function FE(n,e){return n instanceof Ls?(function(r,i){return i instanceof Ls&&r.op===i.op&&r.field.isEqual(i.field)&&dl(r.value,i.value)})(n,e):n instanceof hl?(function(r,i){return i instanceof hl&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,u,d)=>o&&FE(u,i.filters[d])),!0):!1})(n,e):void Qt(19439)}function ME(n){return n instanceof Ls?(function(t){return`${t.field.canonicalString()} ${t.op} ${dh(t.value)}`})(n):n instanceof hl?(function(t){return t.op.toString()+" {"+t.getFilters().map(ME).join(" ,")+"}"})(n):"Filter"}class DI extends Ls{constructor(e,t,r){super(e,t,r),this.key=Wt.fromName(r.referenceValue)}matches(e){const t=Wt.comparator(e.key,this.key);return this.matchesComparison(t)}}class PI extends Ls{constructor(e,t){super(e,"in",t),this.keys=OE("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class LI extends Ls{constructor(e,t){super(e,"not-in",t),this.keys=OE("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function OE(n,e){return(e.arrayValue?.values||[]).map((t=>Wt.fromName(t.referenceValue)))}class FI extends Ls{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pv(t)&&Bf(t.arrayValue,this.value)}}class MI extends Ls{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bf(this.value.arrayValue,t)}}class OI extends Ls{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bf(this.value.arrayValue,t)}}class UI extends Ls{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Bf(this.value.arrayValue,r)))}}class BI{constructor(e,t=null,r=[],i=[],o=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=u,this.endAt=d,this.Te=null}}function Ox(n,e=null,t=[],r=[],i=null,o=null,u=null){return new BI(n,e,t,r,i,o,u)}function mv(n){const e=ln(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>c1(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),yg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>dh(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>dh(r))).join(",")),e.Te=t}return e.Te}function gv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!II(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mx(n.startAt,e.startAt)&&Mx(n.endAt,e.endAt)}function u1(n){return Wt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class bg{constructor(e,t=null,r=[],i=[],o=null,u="F",d=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=u,this.startAt=d,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function VI(n,e,t,r,i,o,u,d){return new bg(n,e,t,r,i,o,u,d)}function xg(n){return new bg(n)}function Ux(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zI(n){return n.collectionGroup!==null}function wf(n){const e=ln(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Fs(hi.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Ym(o,r))})),t.has(hi.keyField().canonicalString())||e.Ie.push(new Ym(hi.keyField(),r))}return e.Ie}function ol(n){const e=ln(n);return e.Ee||(e.Ee=qI(e,wf(n))),e.Ee}function qI(n,e){if(n.limitType==="F")return Ox(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Ym(i.field,o)}));const t=n.endAt?new Wm(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wm(n.startAt.position,n.startAt.inclusive):null;return Ox(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function d1(n,e,t){return new bg(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wg(n,e){return gv(ol(n),ol(e))&&n.limitType===e.limitType}function UE(n){return`${mv(ol(n))}|lt:${n.limitType}`}function Kd(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>ME(i))).join(", ")}]`),yg(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>dh(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>dh(i))).join(",")),`Target(${r})`})(ol(n))}; limitType=${n.limitType})`}function Sg(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Wt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of wf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(u,d,h){const p=Fx(u,d,h);return u.inclusive?p<=0:p<0})(r.startAt,wf(r),i)||r.endAt&&!(function(u,d,h){const p=Fx(u,d,h);return u.inclusive?p>=0:p>0})(r.endAt,wf(r),i))})(n,e)}function HI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BE(n){return(e,t)=>{let r=!1;for(const i of wf(n)){const o=$I(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $I(n,e,t){const r=n.field.isKeyField()?Wt.comparator(e.key,t.key):(function(o,u,d){const h=u.data.field(o),p=d.data.field(o);return h!==null&&p!==null?uh(h,p):Qt(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qt(19790,{direction:n.dir})}}class ad{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hu(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return EE(this.inner)}size(){return this.innerSize}}const GI=new Br(Wt.comparator);function rc(){return GI}const VE=new Br(Wt.comparator);function mf(...n){let e=VE;for(const t of n)e=e.insert(t.key,t);return e}function zE(n){let e=VE;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ou(){return Sf()}function qE(){return Sf()}function Sf(){return new ad((n=>n.toString()),((n,e)=>n.isEqual(e)))}const WI=new Br(Wt.comparator),YI=new Fs(Wt.comparator);function jn(...n){let e=YI;for(const t of n)e=e.add(t);return e}const KI=new Fs(Tn);function XI(){return KI}function yv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hm(e)?"-0":e}}function HE(n){return{integerValue:""+n}}function QI(n,e){return _I(e)?HE(e):yv(n,e)}class _g{constructor(){this._=void 0}}function JI(n,e,t){return n instanceof Km?(function(i,o){const u={fields:{[TE]:{stringValue:AE},[CE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&fv(o)&&(o=vg(o)),o&&(u.fields[jE]=o),{mapValue:u}})(t,e):n instanceof Vf?GE(n,e):n instanceof zf?WE(n,e):(function(i,o){const u=$E(i,o),d=Bx(u)+Bx(i.Ae);return l1(u)&&l1(i.Ae)?HE(d):yv(i.serializer,d)})(n,e)}function ZI(n,e,t){return n instanceof Vf?GE(n,e):n instanceof zf?WE(n,e):t}function $E(n,e){return n instanceof Xm?(function(r){return l1(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Km extends _g{}class Vf extends _g{constructor(e){super(),this.elements=e}}function GE(n,e){const t=YE(e);for(const r of n.elements)t.some((i=>dl(i,r)))||t.push(r);return{arrayValue:{values:t}}}class zf extends _g{constructor(e){super(),this.elements=e}}function WE(n,e){let t=YE(e);for(const r of n.elements)t=t.filter((i=>!dl(i,r)));return{arrayValue:{values:t}}}class Xm extends _g{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Bx(n){return is(n.integerValue||n.doubleValue)}function YE(n){return pv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ek(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Vf&&i instanceof Vf||r instanceof zf&&i instanceof zf?ch(r.elements,i.elements,dl):r instanceof Xm&&i instanceof Xm?dl(r.Ae,i.Ae):r instanceof Km&&i instanceof Km})(n.transform,e.transform)}class tk{constructor(e,t){this.version=e,this.transformResults=t}}class Ja{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ja}static exists(e){return new Ja(void 0,e)}static updateTime(e){return new Ja(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Eg{}function KE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vv(n.key,Ja.none()):new rp(n.key,n.data,Ja.none());{const t=n.data,r=ha.empty();let i=new Fs(hi.comparator);for(let o of e.fields)if(!i.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?r.delete(o):r.set(o,u),i=i.add(o)}return new fu(n.key,r,new Ra(i.toArray()),Ja.none())}}function nk(n,e,t){n instanceof rp?(function(i,o,u){const d=i.value.clone(),h=zx(i.fieldTransforms,o,u.transformResults);d.setAll(h),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(n,e,t):n instanceof fu?(function(i,o,u){if(!Cm(i.precondition,o))return void o.convertToUnknownDocument(u.version);const d=zx(i.fieldTransforms,o,u.transformResults),h=o.data;h.setAll(XE(i)),h.setAll(d),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function _f(n,e,t,r){return n instanceof rp?(function(o,u,d,h){if(!Cm(o.precondition,u))return d;const p=o.value.clone(),m=qx(o.fieldTransforms,h,u);return p.setAll(m),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof fu?(function(o,u,d,h){if(!Cm(o.precondition,u))return d;const p=qx(o.fieldTransforms,h,u),m=u.data;return m.setAll(XE(o)),m.setAll(p),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),d===null?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((w=>w.field)))})(n,e,t,r):(function(o,u,d){return Cm(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(n,e,t)}function rk(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=$E(r.transform,i||null);o!=null&&(t===null&&(t=ha.empty()),t.set(r.field,o))}return t||null}function Vx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ch(r,i,((o,u)=>ek(o,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class rp extends Eg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fu extends Eg{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XE(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function zx(n,e,t){const r=new Map;Qn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const o=n[i],u=o.transform,d=e.data.field(o.field);r.set(o.field,ZI(u,d,t[i]))}return r}function qx(n,e,t){const r=new Map;for(const i of n){const o=i.transform,u=t.data.field(i.field);r.set(i.field,JI(o,u,e))}return r}class vv extends Eg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sk extends Eg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ik{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&nk(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_f(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_f(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qE();return this.mutations.forEach((i=>{const o=e.get(i.key),u=o.overlayedDocument;let d=this.applyToLocalView(u,o.mutatedFields);d=t.has(i.key)?null:d;const h=KE(u,d);h!==null&&r.set(i.key,h),u.isValidDocument()||u.convertToNoDocument(tn.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),jn())}isEqual(e){return this.batchId===e.batchId&&ch(this.mutations,e.mutations,((t,r)=>Vx(t,r)))&&ch(this.baseMutations,e.baseMutations,((t,r)=>Vx(t,r)))}}class bv{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return WI})();const o=e.mutations;for(let u=0;u<o.length;u++)i=i.insert(o[u].key,r[u].version);return new bv(e,t,r,i)}}class ak{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ok{constructor(e,t){this.count=e,this.unchangedNames=t}}var vs,Ln;function lk(n){switch(n){case yt.OK:return Qt(64938);case yt.CANCELLED:case yt.UNKNOWN:case yt.DEADLINE_EXCEEDED:case yt.RESOURCE_EXHAUSTED:case yt.INTERNAL:case yt.UNAVAILABLE:case yt.UNAUTHENTICATED:return!1;case yt.INVALID_ARGUMENT:case yt.NOT_FOUND:case yt.ALREADY_EXISTS:case yt.PERMISSION_DENIED:case yt.FAILED_PRECONDITION:case yt.ABORTED:case yt.OUT_OF_RANGE:case yt.UNIMPLEMENTED:case yt.DATA_LOSS:return!0;default:return Qt(15467,{code:n})}}function QE(n){if(n===void 0)return nc("GRPC error has no .code"),yt.UNKNOWN;switch(n){case vs.OK:return yt.OK;case vs.CANCELLED:return yt.CANCELLED;case vs.UNKNOWN:return yt.UNKNOWN;case vs.DEADLINE_EXCEEDED:return yt.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return yt.RESOURCE_EXHAUSTED;case vs.INTERNAL:return yt.INTERNAL;case vs.UNAVAILABLE:return yt.UNAVAILABLE;case vs.UNAUTHENTICATED:return yt.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return yt.INVALID_ARGUMENT;case vs.NOT_FOUND:return yt.NOT_FOUND;case vs.ALREADY_EXISTS:return yt.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return yt.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return yt.FAILED_PRECONDITION;case vs.ABORTED:return yt.ABORTED;case vs.OUT_OF_RANGE:return yt.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return yt.UNIMPLEMENTED;case vs.DATA_LOSS:return yt.DATA_LOSS;default:return Qt(39323,{code:n})}}(Ln=vs||(vs={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";function ck(){return new TextEncoder}const uk=new Qc([4294967295,4294967295],0);function Hx(n){const e=ck().encode(n),t=new fE;return t.update(e),new Uint8Array(t.digest())}function $x(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qc([t,r],0),new Qc([i,o],0)]}class xv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gf(`Invalid padding: ${t}`);if(r<0)throw new gf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Qc.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Qc.fromNumber(r)));return i.compare(uk)===1&&(i=new Qc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Hx(e),[r,i]=$x(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);if(!this.we(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new xv(o,i,t);return r.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const t=Hx(e),[r,i]=$x(t);for(let o=0;o<this.hashCount;o++){const u=this.ye(r,i,o);this.Se(u)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Ng{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,sp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ng(tn.min(),i,new Br(Tn),rc(),jn())}}class sp{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sp(r,t,jn(),jn(),jn())}}class Rm{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class JE{constructor(e,t){this.targetId=e,this.Ce=t}}class ZE{constructor(e,t,r=fi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Gx{constructor(){this.ve=0,this.Fe=Wx(),this.Me=fi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=jn(),t=jn(),r=jn();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Qt(38017,{changeType:o})}})),new sp(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=Wx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class dk{constructor(e){this.Ge=e,this.ze=new Map,this.je=rc(),this.Je=om(),this.He=om(),this.Ye=new Br(Tn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Qt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(u1(o))if(r===0){const u=new Wt(o.path);this.et(t,u,ji.newNoDocument(u,tn.min()))}else Qn(r===1,20013,{expectedCount:r});else{const u=this._t(t);if(u!==r){const d=this.ut(e),h=d?this.ct(d,e,u):1;if(h!==0){this.it(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let u,d;try{u=su(r).toUint8Array()}catch(h){if(h instanceof NE)return lh("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{d=new xv(u,i,o)}catch(h){return lh(h instanceof gf?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(d)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,u)=>{const d=this.ot(u);if(d){if(o.current&&u1(d.target)){const h=new Wt(d.target.path);this.It(h).has(u)||this.Et(u,h)||this.et(u,h,ji.newNoDocument(h,e))}o.Be&&(t.set(u,o.ke()),o.qe())}}));let r=jn();this.He.forEach(((o,u)=>{let d=!0;u.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(o))})),this.je.forEach(((o,u)=>u.setReadTime(e)));const i=new Ng(e,t,this.Ye,this.je,r);return this.je=rc(),this.Je=om(),this.He=om(),this.Ye=new Br(Tn),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Gx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Fs(Tn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Fs(Tn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Tt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function om(){return new Br(Wt.comparator)}function Wx(){return new Br(Wt.comparator)}const hk={asc:"ASCENDING",desc:"DESCENDING"},fk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pk={and:"AND",or:"OR"};class mk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function h1(n,e){return n.useProto3Json||yg(e)?e:{value:e}}function Qm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gk(n,e){return Qm(n,e.toTimestamp())}function ll(n){return Qn(!!n,49232),tn.fromTimestamp((function(t){const r=ru(t);return new on(r.seconds,r.nanos)})(n))}function wv(n,e){return f1(n,e).canonicalString()}function f1(n,e){const t=(function(i){return new Sr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tN(n){const e=Sr.fromString(n);return Qn(aN(e),10190,{key:e.toString()}),e}function p1(n,e){return wv(n.databaseId,e.path)}function py(n,e){const t=tN(e);if(t.get(1)!==n.databaseId.projectId)throw new Lt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Lt(yt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Wt(rN(t))}function nN(n,e){return wv(n.databaseId,e)}function yk(n){const e=tN(n);return e.length===4?Sr.emptyPath():rN(e)}function m1(n){return new Sr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rN(n){return Qn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Yx(n,e,t){return{name:p1(n,e),fields:t.value.mapValue.fields}}function vk(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Qt(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(p,m){return p.useProto3Json?(Qn(m===void 0||typeof m=="string",58123),fi.fromBase64String(m||"")):(Qn(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),fi.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(p){const m=p.code===void 0?yt.UNKNOWN:QE(p.code);return new Lt(m,p.message||"")})(u);t=new ZE(r,i,o,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=py(n,r.document.name),o=ll(r.document.updateTime),u=r.document.createTime?ll(r.document.createTime):tn.min(),d=new ha({mapValue:{fields:r.document.fields}}),h=ji.newFoundDocument(i,o,u,d),p=r.targetIds||[],m=r.removedTargetIds||[];t=new Rm(p,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=py(n,r.document),o=r.readTime?ll(r.readTime):tn.min(),u=ji.newNoDocument(i,o),d=r.removedTargetIds||[];t=new Rm([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=py(n,r.document),o=r.removedTargetIds||[];t=new Rm([],o,i,null)}else{if(!("filter"in e))return Qt(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,u=new ok(i,o),d=r.targetId;t=new JE(d,u)}}return t}function bk(n,e){let t;if(e instanceof rp)t={update:Yx(n,e.key,e.value)};else if(e instanceof vv)t={delete:p1(n,e.key)};else if(e instanceof fu)t={update:Yx(n,e.key,e.data),updateMask:jk(e.fieldMask)};else{if(!(e instanceof sk))return Qt(16599,{Vt:e.type});t={verify:p1(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,u){const d=u.transform;if(d instanceof Km)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Vf)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof zf)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Xm)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Qt(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:gk(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Qt(27497)})(n,e.precondition)),t}function xk(n,e){return n&&n.length>0?(Qn(e!==void 0,14353),n.map((t=>(function(i,o){let u=i.updateTime?ll(i.updateTime):ll(o);return u.isEqual(tn.min())&&(u=ll(o)),new tk(u,i.transformResults||[])})(t,e)))):[]}function wk(n,e){return{documents:[nN(n,e.path)]}}function Sk(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nN(n,i);const o=(function(p){if(p.length!==0)return iN(hl.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const u=(function(p){if(p.length!==0)return p.map((m=>(function(_){return{field:Xd(_.field),direction:Nk(_.dir)}})(m)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=h1(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:i}}function _k(n){let e=yk(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Qn(r===1,65062);const m=t.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(w){const _=sN(w);return _ instanceof hl&&LE(_)?_.getFilters():[_]})(t.where));let u=[];t.orderBy&&(u=(function(w){return w.map((_=>(function(A){return new Ym(Qd(A.field),(function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(_)))})(t.orderBy));let d=null;t.limit&&(d=(function(w){let _;return _=typeof w=="object"?w.value:w,yg(_)?null:_})(t.limit));let h=null;t.startAt&&(h=(function(w){const _=!!w.before,x=w.values||[];return new Wm(x,_)})(t.startAt));let p=null;return t.endAt&&(p=(function(w){const _=!w.before,x=w.values||[];return new Wm(x,_)})(t.endAt)),VI(e,i,u,o,d,"F",h,p)}function Ek(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qt(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Qd(t.unaryFilter.field);return Ls.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qd(t.unaryFilter.field);return Ls.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Qd(t.unaryFilter.field);return Ls.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Qd(t.unaryFilter.field);return Ls.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Qt(61313);default:return Qt(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ls.create(Qd(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Qt(58110);default:return Qt(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hl.create(t.compositeFilter.filters.map((r=>sN(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Qt(1026)}})(t.compositeFilter.op))})(n):Qt(30097,{filter:n})}function Nk(n){return hk[n]}function Ak(n){return fk[n]}function Tk(n){return pk[n]}function Xd(n){return{fieldPath:n.canonicalString()}}function Qd(n){return hi.fromServerFormat(n.fieldPath)}function iN(n){return n instanceof Ls?(function(t){if(t.op==="=="){if(Lx(t.value))return{unaryFilter:{field:Xd(t.field),op:"IS_NAN"}};if(Px(t.value))return{unaryFilter:{field:Xd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Lx(t.value))return{unaryFilter:{field:Xd(t.field),op:"IS_NOT_NAN"}};if(Px(t.value))return{unaryFilter:{field:Xd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xd(t.field),op:Ak(t.op),value:t.value}}})(n):n instanceof hl?(function(t){const r=t.getFilters().map((i=>iN(i)));return r.length===1?r[0]:{compositeFilter:{op:Tk(t.op),filters:r}}})(n):Qt(54877,{filter:n})}function jk(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function aN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}class Wc{constructor(e,t,r,i,o=tn.min(),u=tn.min(),d=fi.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=h}withSequenceNumber(e){return new Wc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ck{constructor(e){this.yt=e}}function Rk(n){const e=_k({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?d1(e,e.limit,"L"):e}class Ik{constructor(){this.Cn=new kk}addToCollectionParentIndex(e,t){return this.Cn.add(t),mt.resolve()}getCollectionParents(e,t){return mt.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return mt.resolve()}deleteFieldIndex(e,t){return mt.resolve()}deleteAllFieldIndexes(e){return mt.resolve()}createTargetIndexes(e,t){return mt.resolve()}getDocumentsMatchingTarget(e,t){return mt.resolve(null)}getIndexType(e,t){return mt.resolve(0)}getFieldIndexes(e,t){return mt.resolve([])}getNextCollectionGroupToUpdate(e){return mt.resolve(null)}getMinOffset(e,t){return mt.resolve(nu.min())}getMinOffsetFromCollectionGroup(e,t){return mt.resolve(nu.min())}updateCollectionGroup(e,t,r){return mt.resolve()}updateIndexEntries(e,t){return mt.resolve()}}class kk{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fs(Sr.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fs(Sr.comparator)).toArray()}}const Kx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oN=41943040;class ua{static withCacheSize(e){return new ua(e,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}ua.DEFAULT_COLLECTION_PERCENTILE=10,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ua.DEFAULT=new ua(oN,ua.DEFAULT_COLLECTION_PERCENTILE,ua.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ua.DISABLED=new ua(-1,0,0);class hh{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new hh(0)}static cr(){return new hh(-1)}}const Xx="LruGarbageCollector",Dk=1048576;function Qx([n,e],[t,r]){const i=Tn(n,t);return i===0?Tn(e,r):i}class Pk{constructor(e){this.Ir=e,this.buffer=new Fs(Qx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Qx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lk{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Tt(Xx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){bh(t)?Tt(Xx,"Ignoring IndexedDB error during garbage collection: ",t):await vh(t)}await this.Vr(3e5)}))}}class Fk{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return mt.resolve(gg.ce);const r=new Pk(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Tt("LruGarbageCollector","Garbage collection skipped; disabled"),mt.resolve(Kx)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Tt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,u,d,h,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((w=>(w>this.params.maximumSequenceNumbersToCollect?(Tt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,u=Date.now(),this.nthSequenceNumber(e,i)))).next((w=>(r=w,d=Date.now(),this.removeTargets(e,r,t)))).next((w=>(o=w,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((w=>(p=Date.now(),Yd()<=An.DEBUG&&Tt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-m}ms
	Determined least recently used ${i} in `+(d-u)+`ms
	Removed ${o} targets in `+(h-d)+`ms
	Removed ${w} documents in `+(p-h)+`ms
Total Duration: ${p-m}ms`),mt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:w}))))}}function Mk(n,e){return new Fk(n,e)}class Ok{constructor(){this.changes=new ad((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?mt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Bk{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&_f(r.mutation,i,Ra.empty(),on.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,jn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=jn()){const i=Ou();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let u=mf();return o.forEach(((d,h)=>{u=u.insert(d,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ou();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,jn())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((u,d)=>{t.set(u,d)}))}))}computeViews(e,t,r,i){let o=rc();const u=Sf(),d=(function(){return Sf()})();return t.forEach(((h,p)=>{const m=r.get(p.key);i.has(p.key)&&(m===void 0||m.mutation instanceof fu)?o=o.insert(p.key,p):m!==void 0?(u.set(p.key,m.mutation.getFieldMask()),_f(m.mutation,p,m.mutation.getFieldMask(),on.now())):u.set(p.key,Ra.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((p,m)=>u.set(p,m))),t.forEach(((p,m)=>d.set(p,new Uk(m,u.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=Sf();let i=new Br(((u,d)=>u-d)),o=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const d of u)d.keys().forEach((h=>{const p=t.get(h);if(p===null)return;let m=r.get(h)||Ra.empty();m=d.applyToLocalView(p,m),r.set(h,m);const w=(i.get(d.batchId)||jn()).add(h);i=i.insert(d.batchId,w)}))})).next((()=>{const u=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),p=h.key,m=h.value,w=qE();m.forEach((_=>{if(!o.has(_)){const x=KE(t.get(_),r.get(_));x!==null&&w.set(_,x),o=o.add(_)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,w))}return mt.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(u){return Wt.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const u=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):mt.resolve(Ou());let d=Mf,h=o;return u.next((p=>mt.forEach(p,((m,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),o.get(m)?mt.resolve():this.remoteDocumentCache.getEntry(e,m).next((_=>{h=h.insert(m,_)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,h,p,jn()))).next((m=>({batchId:d,changes:zE(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Wt(t)).next((r=>{let i=mf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let u=mf();return this.indexManager.getCollectionParents(e,o).next((d=>mt.forEach(d,(h=>{const p=(function(w,_){return new bg(_,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((m=>{m.forEach(((w,_)=>{u=u.insert(w,_)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((u=>{o.forEach(((h,p)=>{const m=p.getKey();u.get(m)===null&&(u=u.insert(m,ji.newInvalidDocument(m)))}));let d=mf();return u.forEach(((h,p)=>{const m=o.get(h);m!==void 0&&_f(m.mutation,p,Ra.empty(),on.now()),Sg(t,p)&&(d=d.insert(h,p))})),d}))}}class Vk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return mt.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ll(i.createTime)}})(t)),mt.resolve()}getNamedQuery(e,t){return mt.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Rk(i.bundledQuery),readTime:ll(i.readTime)}})(t)),mt.resolve()}}class zk{constructor(){this.overlays=new Br(Wt.comparator),this.qr=new Map}getOverlay(e,t){return mt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ou();return mt.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.St(e,t,o)})),mt.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),mt.resolve()}getOverlaysForCollection(e,t,r){const i=Ou(),o=t.length+1,u=new Wt(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const h=d.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return mt.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Br(((p,m)=>p-m));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=Ou(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const d=Ou(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,m)=>d.set(p,m))),!(d.size()>=i)););return mt.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new ak(t,r));let o=this.qr.get(t);o===void 0&&(o=jn(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}}class qk{constructor(){this.sessionToken=fi.EMPTY_BYTE_STRING}getSessionToken(e){return mt.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,mt.resolve()}}class Sv{constructor(){this.Qr=new Fs(Xs.$r),this.Ur=new Fs(Xs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Xs(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Xs(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Wt(new Sr([])),r=new Xs(t,e),i=new Xs(t,e+1),o=[];return this.Ur.forEachInRange([r,i],(u=>{this.Gr(u),o.push(u.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Wt(new Sr([])),r=new Xs(t,e),i=new Xs(t,e+1);let o=jn();return this.Ur.forEachInRange([r,i],(u=>{o=o.add(u.key)})),o}containsKey(e){const t=new Xs(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Xs{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Wt.comparator(e.key,t.key)||Tn(e.Yr,t.Yr)}static Kr(e,t){return Tn(e.Yr,t.Yr)||Wt.comparator(e.key,t.key)}}class Hk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Fs(Xs.$r)}checkEmpty(e){return mt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new ik(o,t,r,i);this.mutationQueue.push(u);for(const d of i)this.Zr=this.Zr.add(new Xs(d.key,o)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return mt.resolve(u)}lookupMutationBatch(e,t){return mt.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),o=i<0?0:i;return mt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return mt.resolve(this.mutationQueue.length===0?hv:this.tr-1)}getAllMutationBatches(e){return mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xs(t,0),i=new Xs(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],(u=>{const d=this.Xr(u.Yr);o.push(d)})),mt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fs(Tn);return t.forEach((i=>{const o=new Xs(i,0),u=new Xs(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,u],(d=>{r=r.add(d.Yr)}))})),mt.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Wt.isDocumentKey(o)||(o=o.child(""));const u=new Xs(new Wt(o),0);let d=new Fs(Tn);return this.Zr.forEachWhile((h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(d=d.add(h.Yr)),!0)}),u),mt.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Qn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return mt.forEach(t.mutations,(i=>{const o=new Xs(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Xs(t,0),i=this.Zr.firstAfterOrEqual(r);return mt.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,mt.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class $k{constructor(e){this.ri=e,this.docs=(function(){return new Br(Wt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,u=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return mt.resolve(r?r.document.mutableCopy():ji.newInvalidDocument(t))}getEntries(e,t){let r=rc();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ji.newInvalidDocument(i))})),mt.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=rc();const u=t.path,d=new Wt(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(d);for(;h.hasNext();){const{key:p,value:{document:m}}=h.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||bI(vI(m),r)<=0||(i.has(m.key)||Sg(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return mt.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Qt(9500)}ii(e,t){return mt.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Gk(this)}getSize(e){return mt.resolve(this.size)}}class Gk extends Ok{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),mt.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Wk{constructor(e){this.persistence=e,this.si=new ad((t=>mv(t)),gv),this.lastRemoteSnapshotVersion=tn.min(),this.highestTargetId=0,this.oi=0,this._i=new Sv,this.targetCount=0,this.ai=hh.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),mt.resolve()}getLastRemoteSnapshotVersion(e){return mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return mt.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),mt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),mt.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new hh(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,mt.resolve()}updateTargetData(e,t){return this.Pr(t),mt.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,mt.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(u),o.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),mt.waitFor(o).next((()=>i))}getTargetCount(e){return mt.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return mt.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),mt.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((u=>{o.push(i.markPotentiallyOrphaned(e,u))})),mt.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),mt.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return mt.resolve(r)}containsKey(e,t){return mt.resolve(this._i.containsKey(t))}}class lN{constructor(e,t){this.ui={},this.overlays={},this.ci=new gg(0),this.li=!1,this.li=!0,this.hi=new qk,this.referenceDelegate=e(this),this.Pi=new Wk(this),this.indexManager=new Ik,this.remoteDocumentCache=(function(i){return new $k(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Ck(t),this.Ii=new Vk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Hk(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Tt("MemoryPersistence","Starting transaction:",e);const i=new Yk(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((o=>this.referenceDelegate.di(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ai(e,t){return mt.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Yk extends wI{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.Ri=new Sv,this.Vi=null}static mi(e){return new _v(e)}get fi(){if(this.Vi)return this.Vi;throw Qt(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),mt.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),mt.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),mt.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.fi,(r=>{const i=Wt.fromPath(r);return this.gi(e,i).next((o=>{o||t.removeEntry(i,tn.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return mt.or([()=>mt.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Jm{constructor(e,t){this.persistence=e,this.pi=new ad((r=>EI(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=Mk(this,t)}static mi(e,t){return new Jm(e,t)}Ei(){}di(e){return mt.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return mt.forEach(this.pi,((r,i)=>this.br(e,r,i).next((o=>o?mt.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,(u=>this.br(e,u,t).next((d=>{d||(r++,o.removeEntry(u,tn.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),mt.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),mt.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),mt.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),mt.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tm(e.data.value)),t}br(e,t,r){return mt.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return mt.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ev{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=jn(),i=jn();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ev(e,t.fromCache,r,i)}}class Kk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Xk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Nj()?8:SI(Ci())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ys(e,t).next((u=>{o.result=u})).next((()=>{if(!o.result)return this.ws(e,t,i,r).next((u=>{o.result=u}))})).next((()=>{if(o.result)return;const u=new Kk;return this.Ss(e,t,u).next((d=>{if(o.result=d,this.Vs)return this.bs(e,t,u,d.size)}))})).next((()=>o.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(Yd()<=An.DEBUG&&Tt("QueryEngine","SDK will not create cache indexes for query:",Kd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),mt.resolve()):(Yd()<=An.DEBUG&&Tt("QueryEngine","Query:",Kd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yd()<=An.DEBUG&&Tt("QueryEngine","The SDK decides to create cache indexes for query:",Kd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ol(t))):mt.resolve())}ys(e,t){if(Ux(t))return mt.resolve(null);let r=ol(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=d1(t,null,"F"),r=ol(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const u=jn(...o);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,r).next((h=>{const p=this.Ds(t,d);return this.Cs(t,p,u,h.readTime)?this.ys(e,d1(t,null,"F")):this.vs(e,p,t,h)}))))})))))}ws(e,t,r,i){return Ux(t)||i.isEqual(tn.min())?mt.resolve(null):this.ps.getDocuments(e,r).next((o=>{const u=this.Ds(t,o);return this.Cs(t,u,r,i)?mt.resolve(null):(Yd()<=An.DEBUG&&Tt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Kd(t)),this.vs(e,u,t,yI(i,Mf)).next((d=>d)))}))}Ds(e,t){let r=new Fs(BE(e));return t.forEach(((i,o)=>{Sg(e,o)&&(r=r.add(o))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Yd()<=An.DEBUG&&Tt("QueryEngine","Using full collection scan to execute query:",Kd(t)),this.ps.getDocumentsMatchingQuery(e,t,nu.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((u=>{o=o.insert(u.key,u)})),o)))}}const Nv="LocalStore",Qk=3e8;class Jk{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Br(Tn),this.xs=new ad((o=>mv(o)),gv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bk(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Zk(n,e,t,r){return new Jk(n,e,t,r)}async function cN(n,e){const t=ln(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const u=[],d=[];let h=jn();for(const p of i){u.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}for(const p of o){d.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next((p=>({Ls:p,removedBatchIds:u,addedBatchIds:d})))}))}))}function eD(n,e){const t=ln(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,h,p,m){const w=p.batch,_=w.keys();let x=mt.resolve();return _.forEach((A=>{x=x.next((()=>m.getEntry(h,A))).next((R=>{const C=p.docVersions.get(A);Qn(C!==null,48541),R.version.compareTo(C)<0&&(w.applyToRemoteDocument(R,p),R.isValidDocument()&&(R.setReadTime(p.commitVersion),m.addEntry(R)))}))})),x.next((()=>d.mutationQueue.removeMutationBatch(h,w)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let h=jn();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(h=h.add(d.batch.mutations[p].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function uN(n){const e=ln(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function tD(n,e){const t=ln(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((m,w)=>{const _=i.get(w);if(!_)return;d.push(t.Pi.removeMatchingKeys(o,m.removedDocuments,w).next((()=>t.Pi.addMatchingKeys(o,m.addedDocuments,w))));let x=_.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?x=x.withResumeToken(fi.EMPTY_BYTE_STRING,tn.min()).withLastLimboFreeSnapshotVersion(tn.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,r)),i=i.insert(w,x),(function(R,C,k){return R.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Qk?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(_,x,m)&&d.push(t.Pi.updateTargetData(o,x))}));let h=rc(),p=jn();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),d.push(nD(o,u,e.documentUpdates).next((m=>{h=m.ks,p=m.qs}))),!r.isEqual(tn.min())){const m=t.Pi.getLastRemoteSnapshotVersion(o).next((w=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r)));d.push(m)}return mt.waitFor(d).next((()=>u.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,p))).next((()=>h))})).then((o=>(t.Ms=i,o)))}function nD(n,e,t){let r=jn(),i=jn();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let u=rc();return t.forEach(((d,h)=>{const p=o.get(d);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(tn.min())?(e.removeEntry(d,h.readTime),u=u.insert(d,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),u=u.insert(d,h)):Tt(Nv,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",h.version)})),{ks:u,qs:i}}))}function rD(n,e){const t=ln(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=hv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function sD(n,e){const t=ln(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((o=>o?(i=o,mt.resolve(i)):t.Pi.allocateTargetId(r).next((u=>(i=new Wc(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function g1(n,e,t){const r=ln(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!bh(u))throw u;Tt(Nv,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Jx(n,e,t){const r=ln(n);let i=tn.min(),o=jn();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,p,m){const w=ln(h),_=w.xs.get(m);return _!==void 0?mt.resolve(w.Ms.get(_)):w.Pi.getTargetData(p,m)})(r,u,ol(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(u,d.targetId).next((h=>{o=h}))})).next((()=>r.Fs.getDocumentsMatchingQuery(u,e,t?i:tn.min(),t?o:jn()))).next((d=>(iD(r,HI(e),d),{documents:d,Qs:o})))))}function iD(n,e,t){let r=n.Os.get(e)||tn.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Os.set(e,r)}class Zx{constructor(){this.activeTargetIds=XI()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aD{constructor(){this.Mo=new Zx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zx,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oD{Oo(e){}shutdown(){}}const ew="ConnectivityMonitor";class tw{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Tt(ew,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Tt(ew,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lm=null;function y1(){return lm===null?lm=(function(){return 268435456+Math.round(2147483648*Math.random())})():lm++,"0x"+lm.toString(16)}const my="RestConnection",lD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cD{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===$m?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){const u=y1(),d=this.zo(e,t.toUriEncodedString());Tt(my,`Sending RPC '${e}' ${u}:`,d,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,i,o);const{host:p}=new URL(d),m=du(p);return this.Jo(e,d,h,r,m).then((w=>(Tt(my,`Received RPC '${e}' ${u}: `,w),w)),(w=>{throw lh(my,`RPC '${e}' ${u} failed with error: `,w,"url: ",d,"request:",r),w}))}Ho(e,t,r,i,o,u){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+yh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}zo(e,t){const r=lD[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}class uD{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Si="WebChannelConnection";class dD extends cD{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){const u=y1();return new Promise(((d,h)=>{const p=new pE;p.setWithCredentials(!0),p.listenOnce(mE.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Am.NO_ERROR:const w=p.getResponseJson();Tt(Si,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(w)),d(w);break;case Am.TIMEOUT:Tt(Si,`RPC '${e}' ${u} timed out`),h(new Lt(yt.DEADLINE_EXCEEDED,"Request time out"));break;case Am.HTTP_ERROR:const _=p.getStatus();if(Tt(Si,`RPC '${e}' ${u} failed with status:`,_,"response text:",p.getResponseText()),_>0){let x=p.getResponseJson();Array.isArray(x)&&(x=x[0]);const A=x?.error;if(A&&A.status&&A.message){const R=(function(k){const q=k.toLowerCase().replace(/_/g,"-");return Object.values(yt).indexOf(q)>=0?q:yt.UNKNOWN})(A.status);h(new Lt(R,A.message))}else h(new Lt(yt.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Lt(yt.UNAVAILABLE,"Connection failed."));break;default:Qt(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Tt(Si,`RPC '${e}' ${u} completed.`)}}));const m=JSON.stringify(i);Tt(Si,`RPC '${e}' ${u} sending request:`,i),p.send(t,"POST",m,r,15)}))}T_(e,t,r){const i=y1(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=vE(),d=yE(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const m=o.join("");Tt(Si,`Creating RPC '${e}' stream ${i}: ${m}`,h);const w=u.createWebChannel(m,h);this.I_(w);let _=!1,x=!1;const A=new uD({Yo:C=>{x?Tt(Si,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(_||(Tt(Si,`Opening RPC '${e}' stream ${i} transport.`),w.open(),_=!0),Tt(Si,`RPC '${e}' stream ${i} sending:`,C),w.send(C))},Zo:()=>w.close()}),R=(C,k,q)=>{C.listen(k,($=>{try{q($)}catch(z){setTimeout((()=>{throw z}),0)}}))};return R(w,pf.EventType.OPEN,(()=>{x||(Tt(Si,`RPC '${e}' stream ${i} transport opened.`),A.o_())})),R(w,pf.EventType.CLOSE,(()=>{x||(x=!0,Tt(Si,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(w))})),R(w,pf.EventType.ERROR,(C=>{x||(x=!0,lh(Si,`RPC '${e}' stream ${i} transport errored. Name:`,C.name,"Message:",C.message),A.a_(new Lt(yt.UNAVAILABLE,"The operation could not be completed")))})),R(w,pf.EventType.MESSAGE,(C=>{if(!x){const k=C.data[0];Qn(!!k,16349);const q=k,$=q?.error||q[0]?.error;if($){Tt(Si,`RPC '${e}' stream ${i} received error:`,$);const z=$.status;let oe=(function(D){const I=vs[D];if(I!==void 0)return QE(I)})(z),ce=$.message;oe===void 0&&(oe=yt.INTERNAL,ce="Unknown error status: "+z+" with message "+$.message),x=!0,A.a_(new Lt(oe,ce)),w.close()}else Tt(Si,`RPC '${e}' stream ${i} received:`,k),A.u_(k)}})),R(d,gE.STAT_EVENT,(C=>{C.stat===i1.PROXY?Tt(Si,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===i1.NOPROXY&&Tt(Si,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function gy(){return typeof document<"u"?document:null}function Ag(n){return new mk(n,!0)}class dN{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Tt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const nw="PersistentStream";class hN{constructor(e,t,r,i,o,u,d,h){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===yt.RESOURCE_EXHAUSTED?(nc(t.toString()),nc("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===yt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Lt(yt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Tt(nw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Tt(nw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class hD extends hN{constructor(e,t,r,i,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=vk(this.serializer,e),r=(function(o){if(!("targetChange"in o))return tn.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?tn.min():u.readTime?ll(u.readTime):tn.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=m1(this.serializer),t.addTarget=(function(o,u){let d;const h=u.target;if(d=u1(h)?{documents:wk(o,h)}:{query:Sk(o,h).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=eN(o,u.resumeToken);const p=h1(o,u.expectedCount);p!==null&&(d.expectedCount=p)}else if(u.snapshotVersion.compareTo(tn.min())>0){d.readTime=Qm(o,u.snapshotVersion.toTimestamp());const p=h1(o,u.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const r=Ek(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=m1(this.serializer),t.removeTarget=e,this.q_(t)}}class fD extends hN{constructor(e,t,r,i,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=xk(e.writeResults,e.commitTime),r=ll(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=m1(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>bk(this.serializer,r)))};this.q_(t)}}class pD{}class mD extends pD{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Lt(yt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Go(e,f1(t,r),i,o,u))).catch((o=>{throw o.name==="FirebaseError"?(o.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Lt(yt.UNKNOWN,o.toString())}))}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,f1(t,r),i,u,d,o))).catch((u=>{throw u.name==="FirebaseError"?(u.code===yt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Lt(yt.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nc(t),this.aa=!1):Tt("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const td="RemoteStore";class yD{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((u=>{r.enqueueAndForget((async()=>{od(this)&&(Tt(td,"Restarting streams for network reachability change."),await(async function(h){const p=ln(h);p.Ea.add(4),await ip(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Tg(p)})(this))}))})),this.Ra=new gD(r,i)}}async function Tg(n){if(od(n))for(const e of n.da)await e(!0)}async function ip(n){for(const e of n.da)await e(!1)}function fN(n,e){const t=ln(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Cv(t)?jv(t):xh(t).O_()&&Tv(t,e))}function Av(n,e){const t=ln(n),r=xh(t);t.Ia.delete(e),r.O_()&&pN(t,e),t.Ia.size===0&&(r.O_()?r.L_():od(t)&&t.Ra.set("Unknown"))}function Tv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(tn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xh(n).Y_(e)}function pN(n,e){n.Va.Ue(e),xh(n).Z_(e)}function jv(n){n.Va=new dk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),xh(n).start(),n.Ra.ua()}function Cv(n){return od(n)&&!xh(n).x_()&&n.Ia.size>0}function od(n){return ln(n).Ea.size===0}function mN(n){n.Va=void 0}async function vD(n){n.Ra.set("Online")}async function bD(n){n.Ia.forEach(((e,t)=>{Tv(n,e)}))}async function xD(n,e){mN(n),Cv(n)?(n.Ra.ha(e),jv(n)):n.Ra.set("Unknown")}async function wD(n,e,t){if(n.Ra.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await(async function(i,o){const u=o.cause;for(const d of o.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,u),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(r){Tt(td,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zm(n,r)}else if(e instanceof Rm?n.Va.Ze(e):e instanceof JE?n.Va.st(e):n.Va.tt(e),!t.isEqual(tn.min()))try{const r=await uN(n.localStore);t.compareTo(r)>=0&&await(function(o,u){const d=o.Va.Tt(u);return d.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(p);m&&o.Ia.set(p,m.withResumeToken(h.resumeToken,u))}})),d.targetMismatches.forEach(((h,p)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(fi.EMPTY_BYTE_STRING,m.snapshotVersion)),pN(o,h);const w=new Wc(m.target,h,p,m.sequenceNumber);Tv(o,w)})),o.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){Tt(td,"Failed to raise snapshot:",r),await Zm(n,r)}}async function Zm(n,e,t){if(!bh(e))throw e;n.Ea.add(1),await ip(n),n.Ra.set("Offline"),t||(t=()=>uN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Tt(td,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Tg(n)}))}function gN(n,e){return e().catch((t=>Zm(n,t,e)))}async function jg(n){const e=ln(n),t=au(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hv;for(;SD(e);)try{const i=await rD(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,_D(e,i)}catch(i){await Zm(e,i)}yN(e)&&vN(e)}function SD(n){return od(n)&&n.Ta.length<10}function _D(n,e){n.Ta.push(e);const t=au(n);t.O_()&&t.X_&&t.ea(e.mutations)}function yN(n){return od(n)&&!au(n).x_()&&n.Ta.length>0}function vN(n){au(n).start()}async function ED(n){au(n).ra()}async function ND(n){const e=au(n);for(const t of n.Ta)e.ea(t.mutations)}async function AD(n,e,t){const r=n.Ta.shift(),i=bv.from(r,e,t);await gN(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await jg(n)}async function TD(n,e){e&&au(n).X_&&await(async function(r,i){if((function(u){return lk(u)&&u!==yt.ABORTED})(i.code)){const o=r.Ta.shift();au(r).B_(),await gN(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await jg(r)}})(n,e),yN(n)&&vN(n)}async function rw(n,e){const t=ln(n);t.asyncQueue.verifyOperationInProgress(),Tt(td,"RemoteStore received new credentials");const r=od(t);t.Ea.add(3),await ip(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Tg(t)}async function jD(n,e){const t=ln(n);e?(t.Ea.delete(2),await Tg(t)):e||(t.Ea.add(2),await ip(t),t.Ra.set("Unknown"))}function xh(n){return n.ma||(n.ma=(function(t,r,i){const o=ln(t);return o.sa(),new hD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:vD.bind(null,n),t_:bD.bind(null,n),r_:xD.bind(null,n),H_:wD.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Cv(n)?jv(n):n.Ra.set("Unknown")):(await n.ma.stop(),mN(n))}))),n.ma}function au(n){return n.fa||(n.fa=(function(t,r,i){const o=ln(t);return o.sa(),new fD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:ED.bind(null,n),r_:TD.bind(null,n),ta:ND.bind(null,n),na:AD.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await jg(n)):(await n.fa.stop(),n.Ta.length>0&&(Tt(td,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}class Rv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Jl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const u=Date.now()+r,d=new Rv(e,t,u,i,o);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Lt(yt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iv(n,e){if(nc("AsyncQueue",`${e}: ${n}`),bh(n))return new Lt(yt.UNAVAILABLE,`${e}: ${n}`);throw n}class rh{static emptySet(e){return new rh(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Wt.comparator(t.key,r.key):(t,r)=>Wt.comparator(t.key,r.key),this.keyedMap=mf(),this.sortedSet=new Br(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof rh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new rh;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class sw{constructor(){this.ga=new Br(Wt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Qt(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class fh{constructor(e,t,r,i,o,u,d,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const u=[];return t.forEach((d=>{u.push({type:0,doc:d})})),new fh(e,t,rh.emptySet(t),u,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class CD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class RD{constructor(){this.queries=iw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=ln(t),o=i.queries;i.queries=iw(),o.forEach(((u,d)=>{for(const h of d.Sa)h.onError(r)}))})(this,new Lt(yt.ABORTED,"Firestore shutting down"))}}function iw(){return new ad((n=>UE(n)),wg)}async function kv(n,e){const t=ln(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new CD,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const d=Iv(u,`Initialization of query '${Kd(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Pv(t)}async function Dv(n,e){const t=ln(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ID(n,e){const t=ln(n);let r=!1;for(const i of e){const o=i.query,u=t.queries.get(o);if(u){for(const d of u.Sa)d.Fa(i)&&(r=!0);u.wa=i}}r&&Pv(t)}function kD(n,e,t){const r=ln(n),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(t);r.queries.delete(e)}function Pv(n){n.Ca.forEach((e=>{e.next()}))}var v1,aw;(aw=v1||(v1={})).Ma="default",aw.Cache="cache";class Lv{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new fh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==v1.Cache}}class bN{constructor(e){this.key=e}}class xN{constructor(e){this.key=e}}class DD{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=BE(e),this.tu=new rh(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new sw,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((m,w)=>{const _=i.get(m),x=Sg(this.query,w)?w:null,A=!!_&&this.mutatedKeys.has(_.key),R=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;_&&x?_.data.isEqual(x.data)?A!==R&&(r.track({type:3,doc:x}),C=!0):this.su(_,x)||(r.track({type:2,doc:x}),C=!0,(h&&this.eu(x,h)>0||p&&this.eu(x,p)<0)&&(d=!0)):!_&&x?(r.track({type:0,doc:x}),C=!0):_&&!x&&(r.track({type:1,doc:_}),C=!0,(h||p)&&(d=!0)),C&&(x?(u=u.add(x),o=R?o.add(m):o.delete(m)):(u=u.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const m=this.query.limitType==="F"?u.last():u.first();u=u.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:u,iu:r,Cs:d,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((m,w)=>(function(x,A){const R=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qt(20277,{Rt:C})}};return R(x)-R(A)})(m.type,w.type)||this.eu(m.doc,w.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],h=this.Xa.size===0&&this.current&&!i?1:0,p=h!==this.Za;return this.Za=h,u.length!==0||p?{snapshot:new fh(this.query,e.tu,o,u,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=jn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new xN(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new bN(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=jn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return fh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fv="SyncEngine";class PD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LD{constructor(e){this.key=e,this.hu=!1}}class FD{constructor(e,t,r,i,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ad((d=>UE(d)),wg),this.Iu=new Map,this.Eu=new Set,this.du=new Br(Wt.comparator),this.Au=new Map,this.Ru=new Sv,this.Vu={},this.mu=new Map,this.fu=hh.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function MD(n,e,t=!0){const r=AN(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await wN(r,e,t,!0),i}async function OD(n,e){const t=AN(n);await wN(t,e,!0,!1)}async function wN(n,e,t,r){const i=await sD(n.localStore,ol(e)),o=i.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let d;return r&&(d=await UD(n,e,o,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&fN(n.remoteStore,i),d}async function UD(n,e,t,r,i){n.pu=(w,_,x)=>(async function(R,C,k,q){let $=C.view.ru(k);$.Cs&&($=await Jx(R.localStore,C.query,!1).then((({documents:H})=>C.view.ru(H,$))));const z=q&&q.targetChanges.get(C.targetId),oe=q&&q.targetMismatches.get(C.targetId)!=null,ce=C.view.applyChanges($,R.isPrimaryClient,z,oe);return lw(R,C.targetId,ce.au),ce.snapshot})(n,w,_,x);const o=await Jx(n.localStore,e,!0),u=new DD(e,o.Qs),d=u.ru(o.documents),h=sp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=u.applyChanges(d,n.isPrimaryClient,h);lw(n,t,p.au);const m=new PD(e,t,u);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function BD(n,e,t){const r=ln(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((u=>!wg(u,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await g1(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Av(r.remoteStore,i.targetId),b1(r,i.targetId)})).catch(vh)):(b1(r,i.targetId),await g1(r.localStore,i.targetId,!0))}async function VD(n,e){const t=ln(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Av(t.remoteStore,r.targetId))}async function zD(n,e,t){const r=KD(n);try{const i=await(function(u,d){const h=ln(u),p=on.now(),m=d.reduce(((x,A)=>x.add(A.key)),jn());let w,_;return h.persistence.runTransaction("Locally write mutations","readwrite",(x=>{let A=rc(),R=jn();return h.Ns.getEntries(x,m).next((C=>{A=C,A.forEach(((k,q)=>{q.isValidDocument()||(R=R.add(k))}))})).next((()=>h.localDocuments.getOverlayedDocuments(x,A))).next((C=>{w=C;const k=[];for(const q of d){const $=rk(q,w.get(q.key).overlayedDocument);$!=null&&k.push(new fu(q.key,$,kE($.value.mapValue),Ja.exists(!0)))}return h.mutationQueue.addMutationBatch(x,p,k,d)})).next((C=>{_=C;const k=C.applyToLocalDocumentSet(w,R);return h.documentOverlayCache.saveOverlays(x,C.batchId,k)}))})).then((()=>({batchId:_.batchId,changes:zE(w)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(u,d,h){let p=u.Vu[u.currentUser.toKey()];p||(p=new Br(Tn)),p=p.insert(d,h),u.Vu[u.currentUser.toKey()]=p})(r,i.batchId,t),await ap(r,i.changes),await jg(r.remoteStore)}catch(i){const o=Iv(i,"Failed to persist write");t.reject(o)}}async function SN(n,e){const t=ln(n);try{const r=await tD(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const u=t.Au.get(o);u&&(Qn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?u.hu=!0:i.modifiedDocuments.size>0?Qn(u.hu,14607):i.removedDocuments.size>0&&(Qn(u.hu,42227),u.hu=!1))})),await ap(t,r,e)}catch(r){await vh(r)}}function ow(n,e,t){const r=ln(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,u)=>{const d=u.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(u,d){const h=ln(u);h.onlineState=d;let p=!1;h.queries.forEach(((m,w)=>{for(const _ of w.Sa)_.va(d)&&(p=!0)})),p&&Pv(h)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qD(n,e,t){const r=ln(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let u=new Br(Wt.comparator);u=u.insert(o,ji.newNoDocument(o,tn.min()));const d=jn().add(o),h=new Ng(tn.min(),new Map,new Br(Tn),u,d);await SN(r,h),r.du=r.du.remove(o),r.Au.delete(e),Mv(r)}else await g1(r.localStore,e,!1).then((()=>b1(r,e,t))).catch(vh)}async function HD(n,e){const t=ln(n),r=e.batch.batchId;try{const i=await eD(t.localStore,e);EN(t,r,null),_N(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ap(t,i)}catch(i){await vh(i)}}async function $D(n,e,t){const r=ln(n);try{const i=await(function(u,d){const h=ln(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let m;return h.mutationQueue.lookupMutationBatch(p,d).next((w=>(Qn(w!==null,37113),m=w.keys(),h.mutationQueue.removeMutationBatch(p,w)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,m,d))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m))).next((()=>h.localDocuments.getDocuments(p,m)))}))})(r.localStore,e);EN(r,e,t),_N(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ap(r,i)}catch(i){await vh(i)}}function _N(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function EN(n,e,t){const r=ln(n);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function b1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||NN(n,r)}))}function NN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Av(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Mv(n))}function lw(n,e,t){for(const r of t)r instanceof bN?(n.Ru.addReference(r.key,e),GD(n,r)):r instanceof xN?(Tt(Fv,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||NN(n,r.key)):Qt(19791,{wu:r})}function GD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Tt(Fv,"New document in limbo: "+t),n.Eu.add(r),Mv(n))}function Mv(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Wt(Sr.fromString(e)),r=n.fu.next();n.Au.set(r,new LD(t)),n.du=n.du.insert(t,r),fN(n.remoteStore,new Wc(ol(xg(t.path)),r,"TargetPurposeLimboResolution",gg.ce))}}async function ap(n,e,t){const r=ln(n),i=[],o=[],u=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,h)=>{u.push(r.pu(h,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const m=p?!p.fromCache:t?.targetChanges.get(h.targetId)?.current;r.sharedClientState.updateQueryState(h.targetId,m?"current":"not-current")}if(p){i.push(p);const m=Ev.As(h.targetId,p);o.push(m)}})))})),await Promise.all(u),r.Pu.H_(i),await(async function(h,p){const m=ln(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(w=>mt.forEach(p,(_=>mt.forEach(_.Es,(x=>m.persistence.referenceDelegate.addReference(w,_.targetId,x))).next((()=>mt.forEach(_.ds,(x=>m.persistence.referenceDelegate.removeReference(w,_.targetId,x)))))))))}catch(w){if(!bh(w))throw w;Tt(Nv,"Failed to update sequence numbers: "+w)}for(const w of p){const _=w.targetId;if(!w.fromCache){const x=m.Ms.get(_),A=x.snapshotVersion,R=x.withLastLimboFreeSnapshotVersion(A);m.Ms=m.Ms.insert(_,R)}}})(r.localStore,o))}async function WD(n,e){const t=ln(n);if(!t.currentUser.isEqual(e)){Tt(Fv,"User change. New user:",e.toKey());const r=await cN(t.localStore,e);t.currentUser=e,(function(o,u){o.mu.forEach((d=>{d.forEach((h=>{h.reject(new Lt(yt.CANCELLED,u))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ap(t,r.Ls)}}function YD(n,e){const t=ln(n),r=t.Au.get(e);if(r&&r.hu)return jn().add(r.key);{let i=jn();const o=t.Iu.get(e);if(!o)return i;for(const u of o){const d=t.Tu.get(u);i=i.unionWith(d.view.nu)}return i}}function AN(n){const e=ln(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qD.bind(null,e),e.Pu.H_=ID.bind(null,e.eventManager),e.Pu.yu=kD.bind(null,e.eventManager),e}function KD(n){const e=ln(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$D.bind(null,e),e}class eg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ag(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Zk(this.persistence,new Xk,e.initialUser,this.serializer)}Cu(e){return new lN(_v.mi,this.serializer)}Du(e){return new aD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eg.provider={build:()=>new eg};class XD extends eg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qn(this.persistence.referenceDelegate instanceof Jm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Lk(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ua.withCacheSize(this.cacheSizeBytes):ua.DEFAULT;return new lN((r=>Jm.mi(r,t)),this.serializer)}}class x1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ow(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=WD.bind(null,this.syncEngine),await jD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new RD})()}createDatastore(e){const t=Ag(e.databaseInfo.databaseId),r=(function(o){return new dD(o)})(e.databaseInfo);return(function(o,u,d,h){return new mD(o,u,d,h)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,u,d){return new yD(r,i,o,u,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>ow(this.syncEngine,t,0)),(function(){return tw.v()?new tw:new oD})())}createSyncEngine(e,t){return(function(i,o,u,d,h,p,m){const w=new FD(i,o,u,d,h,p);return m&&(w.gu=!0),w})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=ln(t);Tt(td,"RemoteStore shutting down."),r.Ea.add(5),await ip(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}x1.provider={build:()=>new x1};class Ov{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nc("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const ou="FirestoreClient";class QD{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ti.UNAUTHENTICATED,this.clientId=uv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async u=>{Tt(ou,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(Tt(ou,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Iv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function yy(n,e){n.asyncQueue.verifyOperationInProgress(),Tt(ou,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await cN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function cw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await JD(n);Tt(ou,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>rw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>rw(e.remoteStore,i))),n._onlineComponents=e}async function JD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Tt(ou,"Using user provided OfflineComponentProvider");try{await yy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===yt.FAILED_PRECONDITION||i.code===yt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;lh("Error using user provided cache. Falling back to memory cache: "+t),await yy(n,new eg)}}else Tt(ou,"Using default OfflineComponentProvider"),await yy(n,new XD(void 0));return n._offlineComponents}async function TN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Tt(ou,"Using user provided OnlineComponentProvider"),await cw(n,n._uninitializedComponentsProvider._online)):(Tt(ou,"Using default OnlineComponentProvider"),await cw(n,new x1))),n._onlineComponents}function ZD(n){return TN(n).then((e=>e.syncEngine))}async function tg(n){const e=await TN(n),t=e.eventManager;return t.onListen=MD.bind(null,e.syncEngine),t.onUnlisten=BD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=VD.bind(null,e.syncEngine),t}function eP(n,e,t={}){const r=new Jl;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,h,p){const m=new Ov({next:_=>{m.Nu(),u.enqueueAndForget((()=>Dv(o,w)));const x=_.docs.has(d);!x&&_.fromCache?p.reject(new Lt(yt.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&_.fromCache&&h&&h.source==="server"?p.reject(new Lt(yt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(_)},error:_=>p.reject(_)}),w=new Lv(xg(d.path),m,{includeMetadataChanges:!0,qa:!0});return kv(o,w)})(await tg(n),n.asyncQueue,e,t,r))),r.promise}function tP(n,e,t={}){const r=new Jl;return n.asyncQueue.enqueueAndForget((async()=>(function(o,u,d,h,p){const m=new Ov({next:_=>{m.Nu(),u.enqueueAndForget((()=>Dv(o,w))),_.fromCache&&h.source==="server"?p.reject(new Lt(yt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(_)},error:_=>p.reject(_)}),w=new Lv(d,m,{includeMetadataChanges:!0,qa:!0});return kv(o,w)})(await tg(n),n.asyncQueue,e,t,r))),r.promise}function jN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}const uw=new Map;const CN="firestore.googleapis.com",dw=!0;class hw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Lt(yt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CN,this.ssl=dw}else this.host=e.host,this.ssl=e.ssl??dw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Dk)throw new Lt(yt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jN(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Lt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Lt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Lt(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cg{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Lt(yt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Lt(yt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new aI;switch(r.type){case"firstParty":return new uI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Lt(yt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=uw.get(t);r&&(Tt("ComponentProvider","Removing Datastore"),uw.delete(t),r.terminate())})(this),Promise.resolve()}}function nP(n,e,t,r={}){n=fa(n,Cg);const i=du(e),o=n._getSettings(),u={...o,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(G1(`https://${d}`),W1("Firestore",!0)),o.host!==CN&&o.host!==d&&lh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:d,ssl:i,emulatorOptions:r};if(!Xu(h,u)&&(n._setSettings(h),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Ti.MOCK_USER;else{p=__(r.mockUserToken,n._app?.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Lt(yt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ti(w)}n._authCredentials=new oI(new xE(p,m))}}class op{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new op(this.firestore,e,this._query)}}class cs{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cs(this.firestore,e,this._key)}toJSON(){return{type:cs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(np(t,cs._jsonSchema))return new cs(e,r||null,new Wt(Sr.fromString(t.referencePath)))}}cs._jsonSchemaVersion="firestore/documentReference/1.0",cs._jsonSchema={type:xs("string",cs._jsonSchemaVersion),referencePath:xs("string")};class Jc extends op{constructor(e,t,r){super(e,t,xg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cs(this.firestore,null,new Wt(e))}withConverter(e){return new Jc(this.firestore,e,this._path)}}function w1(n,e,...t){if(n=Er(n),wE("collection","path",e),n instanceof Cg){const r=Sr.fromString(e,...t);return Ax(r),new Jc(n,null,r)}{if(!(n instanceof cs||n instanceof Jc))throw new Lt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return Ax(r),new Jc(n.firestore,null,r)}}function Yn(n,e,...t){if(n=Er(n),arguments.length===1&&(e=uv.newId()),wE("doc","path",e),n instanceof Cg){const r=Sr.fromString(e,...t);return Nx(r),new cs(n,null,new Wt(r))}{if(!(n instanceof cs||n instanceof Jc))throw new Lt(yt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return Nx(r),new cs(n.firestore,n instanceof Jc?n.converter:null,new Wt(r))}}const fw="AsyncQueue";class pw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dN(this,"async_queue_retry"),this._c=()=>{const r=gy();r&&Tt(fw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=gy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Jl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!bh(e))throw e;Tt(fw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,nc("INTERNAL UNHANDLED ERROR: ",mw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Rv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Qt(47125,{Pc:mw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function gw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}class sc extends Cg{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new pw,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pw(e),this._firestoreClient=void 0,await e}}}function rP(n,e){const t=typeof n=="object"?n:X1(),r=typeof n=="string"?n:$m,i=hg(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=x_("firestore");o&&nP(i,...o)}return i}function Rg(n){if(n._terminated)throw new Lt(yt.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sP(n),n._firestoreClient}function sP(n){const e=n._freezeSettings(),t=(function(i,o,u,d){return new TI(i,o,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,jN(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new QD(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){const o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa(fi.fromBase64String(e))}catch(t){throw new Lt(yt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qa(fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(np(e,Qa._jsonSchema))return Qa.fromBase64String(e.bytes)}}Qa._jsonSchemaVersion="firestore/bytes/1.0",Qa._jsonSchema={type:xs("string",Qa._jsonSchemaVersion),bytes:xs("string")};class Ig{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Lt(yt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uv{constructor(e){this._methodName=e}}class cl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Lt(yt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Lt(yt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tn(this._lat,e._lat)||Tn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cl._jsonSchemaVersion}}static fromJSON(e){if(np(e,cl._jsonSchema))return new cl(e.latitude,e.longitude)}}cl._jsonSchemaVersion="firestore/geoPoint/1.0",cl._jsonSchema={type:xs("string",cl._jsonSchemaVersion),latitude:xs("number"),longitude:xs("number")};class ul{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ul._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(np(e,ul._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ul(e.vectorValues);throw new Lt(yt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ul._jsonSchemaVersion="firestore/vectorValue/1.0",ul._jsonSchema={type:xs("string",ul._jsonSchemaVersion),vectorValues:xs("object")};const iP=/^__.*__$/;class aP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fu(e,this.data,this.fieldMask,t,this.fieldTransforms):new rp(e,this.data,t,this.fieldTransforms)}}class RN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qt(40011,{Ac:n})}}class Bv{constructor(e,t,r,i,o,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ng(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(IN(this.Ac)&&iP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class oP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ag(e)}Cc(e,t,r,i=!1){return new Bv({Ac:e,methodName:t,Dc:r,path:hi.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vv(n){const e=n._freezeSettings(),t=Ag(n._databaseId);return new oP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kN(n,e,t,r,i,o={}){const u=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);zv("Data must be an object, but it was:",u,r);const d=DN(r,u);let h,p;if(o.merge)h=new Ra(u.fieldMask),p=u.fieldTransforms;else if(o.mergeFields){const m=[];for(const w of o.mergeFields){const _=S1(e,w,t);if(!u.contains(_))throw new Lt(yt.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);LN(m,_)||m.push(_)}h=new Ra(m),p=u.fieldTransforms.filter((w=>h.covers(w.field)))}else h=null,p=u.fieldTransforms;return new aP(new ha(d),h,p)}class kg extends Uv{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kg}}function lP(n,e,t,r){const i=n.Cc(1,e,t);zv("Data must be an object, but it was:",i,r);const o=[],u=ha.empty();hu(r,((h,p)=>{const m=qv(e,h,t);p=Er(p);const w=i.yc(m);if(p instanceof kg)o.push(m);else{const _=Dg(p,w);_!=null&&(o.push(m),u.set(m,_))}}));const d=new Ra(o);return new RN(u,d,i.fieldTransforms)}function cP(n,e,t,r,i,o){const u=n.Cc(1,e,t),d=[S1(e,r,t)],h=[i];if(o.length%2!=0)throw new Lt(yt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)d.push(S1(e,o[_])),h.push(o[_+1]);const p=[],m=ha.empty();for(let _=d.length-1;_>=0;--_)if(!LN(p,d[_])){const x=d[_];let A=h[_];A=Er(A);const R=u.yc(x);if(A instanceof kg)p.push(x);else{const C=Dg(A,R);C!=null&&(p.push(x),m.set(x,C))}}const w=new Ra(p);return new RN(m,w,u.fieldTransforms)}function Dg(n,e){if(PN(n=Er(n)))return zv("Unsupported field value:",e,n),DN(n,e);if(n instanceof Uv)return(function(r,i){if(!IN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const o=[];let u=0;for(const d of r){let h=Dg(d,i.wc(u));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),u++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=Er(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=on.fromDate(r);return{timestampValue:Qm(i.serializer,o)}}if(r instanceof on){const o=new on(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qm(i.serializer,o)}}if(r instanceof cl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qa)return{bytesValue:eN(i.serializer,r._byteString)};if(r instanceof cs){const o=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw i.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ul)return(function(u,d){return{mapValue:{fields:{[RE]:{stringValue:IE},[Gm]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return yv(d.serializer,p)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${dv(r)}`)})(n,e)}function DN(n,e){const t={};return EE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hu(n,((r,i)=>{const o=Dg(i,e.mc(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function PN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof on||n instanceof cl||n instanceof Qa||n instanceof cs||n instanceof Uv||n instanceof ul)}function zv(n,e,t){if(!PN(t)||!SE(t)){const r=dv(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function S1(n,e,t){if((e=Er(e))instanceof Ig)return e._internalPath;if(typeof e=="string")return qv(n,e);throw ng("Field path arguments must be of type string or ",n,!1,void 0,t)}const uP=new RegExp("[~\\*/\\[\\]]");function qv(n,e,t){if(e.search(uP)>=0)throw ng(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ig(...e.split("."))._internalPath}catch{throw ng(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ng(n,e,t,r,i){const o=r&&!r.isEmpty(),u=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(o||u)&&(h+=" (found",o&&(h+=` in field ${r}`),u&&(h+=` in document ${i}`),h+=")"),new Lt(yt.INVALID_ARGUMENT,d+n+h)}function LN(n,e){return n.some((t=>t.isEqual(e)))}class FN{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new cs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(MN("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dP extends FN{data(){return super.data()}}function MN(n,e){return typeof e=="string"?qv(n,e):e instanceof Ig?e._internalPath:e._delegate._internalPath}function ON(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Lt(yt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hP{convertValue(e,t="none"){switch(iu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return is(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Qt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return hu(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){const t=e.fields?.[Gm].arrayValue?.values?.map((r=>is(r.doubleValue)));return new ul(t)}convertGeoPoint(e){return new cl(is(e.latitude),is(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Of(e));default:return null}}convertTimestamp(e){const t=ru(e);return new on(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Sr.fromString(e);Qn(aN(r),9688,{name:e});const i=new Uf(r.get(1),r.get(3)),o=new Wt(r.popFirst(5));return i.isEqual(t)||nc(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function UN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bu extends FN{constructor(e,t,r,i,o,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Im(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(MN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Lt(yt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Bu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Bu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Bu._jsonSchema={type:xs("string",Bu._jsonSchemaVersion),bundleSource:xs("string","DocumentSnapshot"),bundleName:xs("string"),bundle:xs("string")};class Im extends Bu{data(e={}){return super.data(e)}}class Vu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new yf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Im(this._firestore,this._userDataWriter,r.key,r,new yf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lt(yt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map((d=>{const h=new Im(i._firestore,i._userDataWriter,d.doc.key,d.doc,new yf(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>o||d.type!==3)).map((d=>{const h=new Im(i._firestore,i._userDataWriter,d.doc.key,d.doc,new yf(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,m=-1;return d.type!==0&&(p=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),m=u.indexOf(d.doc.key)),{type:fP(d.type),doc:h,oldIndex:p,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Lt(yt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=uv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function fP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qt(61501,{type:n})}}function pu(n){n=fa(n,cs);const e=fa(n.firestore,sc);return eP(Rg(e),n._key).then((t=>BN(e,n,t)))}Vu._jsonSchemaVersion="firestore/querySnapshot/1.0",Vu._jsonSchema={type:xs("string",Vu._jsonSchemaVersion),bundleSource:xs("string","QuerySnapshot"),bundleName:xs("string"),bundle:xs("string")};class Hv extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cs(this.firestore,null,t)}}function mu(n){n=fa(n,op);const e=fa(n.firestore,sc),t=Rg(e),r=new Hv(e);return ON(n._query),tP(t,n._query).then((i=>new Vu(e,r,n,i)))}function sh(n,e,t){n=fa(n,cs);const r=fa(n.firestore,sc),i=UN(n.converter,e,t);return Pg(r,[kN(Vv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ja.none())])}function gu(n,e,t,...r){n=fa(n,cs);const i=fa(n.firestore,sc),o=Vv(i);let u;return u=typeof(e=Er(e))=="string"||e instanceof Ig?cP(o,"updateDoc",n._key,e,t,r):lP(o,"updateDoc",n._key,e),Pg(i,[u.toMutation(n._key,Ja.exists(!0))])}function wh(n){return Pg(fa(n.firestore,sc),[new vv(n._key,Ja.none())])}function lu(n,e){const t=fa(n.firestore,sc),r=Yn(n),i=UN(n.converter,e);return Pg(t,[kN(Vv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ja.exists(!1))]).then((()=>r))}function $v(n,...e){n=Er(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||gw(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(gw(e[r])){const h=e[r];e[r]=h.next?.bind(h),e[r+1]=h.error?.bind(h),e[r+2]=h.complete?.bind(h)}let o,u,d;if(n instanceof cs)u=fa(n.firestore,sc),d=xg(n._key.path),o={next:h=>{e[r]&&e[r](BN(u,n,h))},error:e[r+1],complete:e[r+2]};else{const h=fa(n,op);u=fa(h.firestore,sc),d=h._query;const p=new Hv(u);o={next:m=>{e[r]&&e[r](new Vu(u,p,h,m))},error:e[r+1],complete:e[r+2]},ON(n._query)}return(function(p,m,w,_){const x=new Ov(_),A=new Lv(m,x,w);return p.asyncQueue.enqueueAndForget((async()=>kv(await tg(p),A))),()=>{x.Nu(),p.asyncQueue.enqueueAndForget((async()=>Dv(await tg(p),A)))}})(Rg(u),d,i,o)}function Pg(n,e){return(function(r,i){const o=new Jl;return r.asyncQueue.enqueueAndForget((async()=>zD(await ZD(r),i,o))),o.promise})(Rg(n),e)}function BN(n,e,t){const r=t.docs.get(e._key),i=new Hv(n);return new Bu(n,i,e._key,r,new yf(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){yh=i})(id),Qu(new tu("firestore",((r,{instanceIdentifier:i,options:o})=>{const u=r.getProvider("app").getImmediate(),d=new sc(new lI(r.getProvider("auth-internal")),new dI(u,r.getProvider("app-check-internal")),(function(p,m){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Lt(yt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uf(p.options.projectId,m)})(u,i),u);return o={useFetchStreams:t,...o},d._setSettings(o),d}),"PUBLIC").setMultipleInstances(!0)),il(wx,Sx,e),il(wx,Sx,"esm2020")})();const VN="firebasestorage.googleapis.com",zN="storageBucket",pP=120*1e3,mP=600*1e3;class Zr extends pl{constructor(e,t,r=0){super(vy(e),`Firebase Storage: ${t} (${vy(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jr||(Jr={}));function vy(n){return"storage/"+n}function Gv(){const n="An unknown error occurred, please check the error payload for server response.";return new Zr(Jr.UNKNOWN,n)}function gP(n){return new Zr(Jr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function yP(n){return new Zr(Jr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zr(Jr.UNAUTHENTICATED,n)}function bP(){return new Zr(Jr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function xP(n){return new Zr(Jr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function wP(){return new Zr(Jr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function SP(){return new Zr(Jr.CANCELED,"User canceled the upload/download.")}function _P(n){return new Zr(Jr.INVALID_URL,"Invalid URL '"+n+"'.")}function EP(n){return new Zr(Jr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function NP(){return new Zr(Jr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zN+"' property when initializing the app?")}function AP(){return new Zr(Jr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TP(){return new Zr(Jr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function jP(n){return new Zr(Jr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _1(n){return new Zr(Jr.INVALID_ARGUMENT,n)}function qN(){return new Zr(Jr.APP_DELETED,"The Firebase app was deleted.")}function CP(n){return new Zr(Jr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ef(n,e){return new Zr(Jr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function lf(n){throw new Zr(Jr.INTERNAL_ERROR,"Internal error: "+n)}class zi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zi.makeFromUrl(e,t)}catch{return new zi(e,"")}if(r.path==="")return r;throw EP(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+i+u,"i"),h={bucket:1,path:3};function p(z){z.path_=decodeURIComponent(z.path)}const m="v[A-Za-z0-9_]+",w=t.replace(/[.]/g,"\\."),_="(/([^?#]*).*)?$",x=new RegExp(`^https?://${w}/${m}/b/${i}/o${_}`,"i"),A={bucket:1,path:3},R=t===VN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",k=new RegExp(`^https?://${R}/${i}/${C}`,"i"),$=[{regex:d,indices:h,postModify:o},{regex:x,indices:A,postModify:p},{regex:k,indices:{bucket:1,path:2},postModify:p}];for(let z=0;z<$.length;z++){const oe=$[z],ce=oe.regex.exec(e);if(ce){const H=ce[oe.indices.bucket];let D=ce[oe.indices.path];D||(D=""),r=new zi(H,D),oe.postModify(r);break}}if(r==null)throw _P(e);return r}}class RP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function IP(n,e,t){let r=1,i=null,o=null,u=!1,d=0;function h(){return d===2}let p=!1;function m(...C){p||(p=!0,e.apply(null,C))}function w(C){i=setTimeout(()=>{i=null,n(x,h())},C)}function _(){o&&clearTimeout(o)}function x(C,...k){if(p){_();return}if(C){_(),m.call(null,C,...k);return}if(h()||u){_(),m.call(null,C,...k);return}r<64&&(r*=2);let $;d===1?(d=2,$=0):$=(r+Math.random())*1e3,w($)}let A=!1;function R(C){A||(A=!0,_(),!p&&(i!==null?(C||(d=2),clearTimeout(i),w(0)):C||(d=1)))}return w(0),o=setTimeout(()=>{u=!0,R(!0)},t),R}function kP(n){n(!1)}function DP(n){return n!==void 0}function PP(n){return typeof n=="object"&&!Array.isArray(n)}function Wv(n){return typeof n=="string"||n instanceof String}function yw(n){return Yv()&&n instanceof Blob}function Yv(){return typeof Blob<"u"}function E1(n,e,t,r){if(r<e)throw _1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw _1(`Invalid value for '${n}'. Expected ${t} or less.`)}function Lg(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function HN(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var zu;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(zu||(zu={}));function LP(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}class FP{constructor(e,t,r,i,o,u,d,h,p,m,w,_=!0,x=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=m,this.connectionFactory_=w,this.retry=_,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,R)=>{this.resolve_=A,this.reject_=R,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new cm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const u=d=>{const h=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(u),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(u),this.pendingConnection_=null;const d=o.getErrorCode()===zu.NO_ERROR,h=o.getStatus();if(!d||LP(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===zu.ABORT;r(!1,new cm(!1,null,m));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new cm(p,o))})},t=(r,i)=>{const o=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(d,d.getResponse());DP(h)?o(h):o()}catch(h){u(h)}else if(d!==null){const h=Gv();h.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,h)):u(h)}else if(i.canceled){const h=this.appDelete_?qN():SP();u(h)}else{const h=wP();u(h)}};this.canceled_?t(!1,new cm(!1,null,!0)):this.backoffId_=IP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function MP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function OP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function BP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function VP(n,e,t,r,i,o,u=!0,d=!1){const h=HN(n.urlParams),p=n.url+h,m=Object.assign({},n.headers);return UP(m,e),MP(m,t),OP(m,o),BP(m,r),new FP(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u,d)}function zP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qP(...n){const e=zP();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Yv())return new Blob(n);throw new Zr(Jr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}function $P(n){if(typeof atob>"u")throw jP("base-64");return atob(n)}const rl={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class by{constructor(e,t){this.data=e,this.contentType=t||null}}function GP(n,e){switch(n){case rl.RAW:return new by($N(e));case rl.BASE64:case rl.BASE64URL:return new by(GN(n,e));case rl.DATA_URL:return new by(YP(e),KP(e))}throw Gv()}function $N(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,u=n.charCodeAt(++t);r=65536|(o&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function WP(n){let e;try{e=decodeURIComponent(n)}catch{throw Ef(rl.DATA_URL,"Malformed data URL.")}return $N(e)}function GN(n,e){switch(n){case rl.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Ef(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rl.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Ef(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=$P(e)}catch(i){throw i.message.includes("polyfill")?i:Ef(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class WN{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ef(rl.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=XP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function YP(n){const e=new WN(n);return e.base64?GN(rl.BASE64,e.rest):WP(e.rest)}function KP(n){return new WN(n).contentType}function XP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}class $c{constructor(e,t){let r=0,i="";yw(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(yw(this.data_)){const r=this.data_,i=HP(r,e,t);return i===null?null:new $c(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new $c(r,!0)}}static getBlob(...e){if(Yv()){const t=e.map(r=>r instanceof $c?r.data_:r);return new $c(qP.apply(null,t))}else{const t=e.map(u=>Wv(u)?GP(rl.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[o++]=u[d]}),new $c(i,!0)}}uploadData(){return this.data_}}function Kv(n){let e;try{e=JSON.parse(n)}catch{return null}return PP(e)?e:null}function QP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function JP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function YN(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}function ZP(n,e){return e}class Bi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ZP}}let um=null;function eL(n){return!Wv(n)||n.length<2?n:YN(n)}function KN(){if(um)return um;const n=[];n.push(new Bi("bucket")),n.push(new Bi("generation")),n.push(new Bi("metageneration")),n.push(new Bi("name","fullPath",!0));function e(o,u){return eL(u)}const t=new Bi("name");t.xform=e,n.push(t);function r(o,u){return u!==void 0?Number(u):u}const i=new Bi("size");return i.xform=r,n.push(i),n.push(new Bi("timeCreated")),n.push(new Bi("updated")),n.push(new Bi("md5Hash",null,!0)),n.push(new Bi("cacheControl",null,!0)),n.push(new Bi("contentDisposition",null,!0)),n.push(new Bi("contentEncoding",null,!0)),n.push(new Bi("contentLanguage",null,!0)),n.push(new Bi("contentType",null,!0)),n.push(new Bi("metadata","customMetadata",!0)),um=n,um}function tL(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new zi(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function nL(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const u=t[o];r[u.local]=u.xform(r,e[u.server])}return tL(r,n),r}function XN(n,e,t){const r=Kv(e);return r===null?null:nL(n,r,t)}function rL(n,e,t,r){const i=Kv(e);if(i===null||!Wv(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const u=encodeURIComponent;return o.split(",").map(p=>{const m=n.bucket,w=n.fullPath,_="/b/"+u(m)+"/o/"+u(w),x=Lg(_,t,r),A=HN({alt:"media",token:p});return x+A})[0]}function sL(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const vw="prefixes",bw="items";function iL(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[vw])for(const i of t[vw]){const o=i.replace(/\/$/,""),u=n._makeStorageReference(new zi(e,o));r.prefixes.push(u)}if(t[bw])for(const i of t[bw]){const o=n._makeStorageReference(new zi(e,i.name));r.items.push(o)}return r}function aL(n,e,t){const r=Kv(t);return r===null?null:iL(n,e,r)}class Xv{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Qv(n){if(!n)throw Gv()}function oL(n,e){function t(r,i){const o=XN(n,i,e);return Qv(o!==null),o}return t}function lL(n,e){function t(r,i){const o=aL(n,e,i);return Qv(o!==null),o}return t}function cL(n,e){function t(r,i){const o=XN(n,i,e);return Qv(o!==null),rL(o,i,n.host,n._protocol)}return t}function Jv(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=bP():i=vP():t.getStatus()===402?i=yP(n.bucket):t.getStatus()===403?i=xP(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function uL(n){const e=Jv(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=gP(n.path)),o.serverResponse=i.serverResponse,o}return t}function dL(n,e,t,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const u=e.bucketOnlyServerUrl(),d=Lg(u,n.host,n._protocol),h="GET",p=n.maxOperationRetryTime,m=new Xv(d,h,lL(n,e.bucket),p);return m.urlParams=o,m.errorHandler=Jv(e),m}function hL(n,e,t){const r=e.fullServerUrl(),i=Lg(r,n.host,n._protocol),o="GET",u=n.maxOperationRetryTime,d=new Xv(i,o,cL(n,t),u);return d.errorHandler=uL(e),d}function fL(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function pL(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=fL(null,e)),r}function mL(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let $="";for(let z=0;z<2;z++)$=$+Math.random().toString().slice(2);return $}const h=d();u["Content-Type"]="multipart/related; boundary="+h;const p=pL(e,r,i),m=sL(p,t),w="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,_=`\r
--`+h+"--",x=$c.getBlob(w,r,_);if(x===null)throw AP();const A={name:p.fullPath},R=Lg(o,n.host,n._protocol),C="POST",k=n.maxUploadRetryTime,q=new Xv(R,C,oL(n,t),k);return q.urlParams=A,q.headers=u,q.body=x.uploadData(),q.errorHandler=Jv(e),q}class gL{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zu.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zu.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zu.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw lf("cannot .send() more than once");if(du(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const u in o)o.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,o[u].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lf("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yL extends gL{initXhr(){this.xhr_.responseType="text"}}function Zv(){return new yL}class nd{constructor(e,t){this._service=e,t instanceof zi?this._location=t:this._location=zi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new nd(e,t)}get root(){const e=new zi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YN(this._location.path)}get storage(){return this._service}get parent(){const e=QP(this._location.path);if(e===null)return null;const t=new zi(this._location.bucket,e);return new nd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw CP(e)}}function vL(n,e,t){n._throwIfRoot("uploadBytes");const r=mL(n.storage,n._location,KN(),new $c(e,!0),t);return n.storage.makeRequestWithTokens(r,Zv).then(i=>({metadata:i,ref:n}))}function bL(n){const e={prefixes:[],items:[]};return QN(n,e).then(()=>e)}async function QN(n,e,t){const i=await xL(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await QN(n,e,i.nextPageToken)}function xL(n,e){e!=null&&typeof e.maxResults=="number"&&E1("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=dL(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zv)}function wL(n){n._throwIfRoot("getDownloadURL");const e=hL(n.storage,n._location,KN());return n.storage.makeRequestWithTokens(e,Zv).then(t=>{if(t===null)throw TP();return t})}function SL(n,e){const t=JP(n._location.path,e),r=new zi(n._location.bucket,t);return new nd(n.storage,r)}function _L(n){return/^[A-Za-z]+:\/\//.test(n)}function EL(n,e){return new nd(n,e)}function JN(n,e){if(n instanceof e2){const t=n;if(t._bucket==null)throw NP();const r=new nd(t,t._bucket);return e!=null?JN(r,e):r}else return e!==void 0?SL(n,e):n}function NL(n,e){if(e&&_L(e)){if(n instanceof e2)return EL(n,e);throw _1("To use ref(service, url), the first argument must be a Storage instance.")}else return JN(n,e)}function xw(n,e){const t=e?.[zN];return t==null?null:zi.makeFromBucketSpec(t,n)}function AL(n,e,t,r={}){n.host=`${e}:${t}`;const i=du(e);i&&(G1(`https://${n.host}/b`),W1("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:__(o,n.app.options.projectId))}class e2{constructor(e,t,r,i,o,u=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=u,this._bucket=null,this._host=VN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pP,this._maxUploadRetryTime=mP,this._requests=new Set,i!=null?this._bucket=zi.makeFromBucketSpec(i,this._host):this._bucket=xw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zi.makeFromBucketSpec(this._url,e):this._bucket=xw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(da(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nd(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new RP(qN());{const u=VP(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const ww="@firebase/storage",Sw="0.14.0";const ZN="storage";function Nf(n,e,t){return n=Er(n),vL(n,e,t)}function TL(n){return n=Er(n),bL(n)}function Af(n){return n=Er(n),wL(n)}function ih(n,e){return n=Er(n),NL(n,e)}function jL(n=X1(),e){n=Er(n);const r=hg(n,ZN).getImmediate({identifier:e}),i=x_("storage");return i&&CL(r,...i),r}function CL(n,e,t,r={}){AL(n,e,t,r)}function RL(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new e2(t,r,i,e,id)}function IL(){Qu(new tu(ZN,RL,"PUBLIC").setMultipleInstances(!0)),il(ww,Sw,""),il(ww,Sw,"esm2020")}IL();const kL={apiKey:"AIzaSyBBvchyq9AsOtWmzlVcdnug9FY_MTaz2U8",authDomain:"fees-management-system-70bb7.firebaseapp.com",projectId:"fees-management-system-70bb7",storageBucket:"fees-management-system-70bb7.firebasestorage.app",messagingSenderId:"416490982366",appId:"1:416490982366:web:65c9d54a605950582e6b4f"};console.log("Environment variables:");console.log("VITE_FIREBASE_AUTH_DOMAIN:","[SET]");console.log("VITE_FIREBASE_PROJECT_ID:","[SET]");console.log("VITE_FIREBASE_STORAGE_BUCKET:","[SET]");console.log("VITE_FIREBASE_MESSAGING_SENDER_ID:","[SET]");console.log("VITE_FIREBASE_APP_ID:","[SET]");const Fg=A_(kL),Mn=rP(Fg),pn=nI(Fg),qu=jL(Fg);console.log("Firebase app initialized:",!!Fg);console.log("Firestore initialized:",!!Mn);console.log("Auth initialized:",!!pn);console.log("Storage initialized:",!!qu);av(pn,n=>{n?console.log("User is signed in:",n.uid):console.log("No user is signed in")});let Hu=null;const dn=()=>{if(!Hu)throw new Error("User not authenticated. Please sign in first.");return Hu},DL=async()=>{console.log("Auto-creating user collections for UID:",Hu)};av(pn,n=>{n?(Hu=n.uid,console.log("User authenticated with UID:",Hu),DL()):(Hu=null,console.log("No user is signed in"))});const fn=()=>Hu?!0:localStorage.getItem("isLoggedIn")==="true",yu=n=>{if(!fn())throw new Error("User not authenticated. Please sign in first.");const e=dn();return w1(Mn,`users/${e}/${n}`)},eA=()=>yu("students"),tA=()=>yu("payments"),nA=()=>yu("expenditures"),rA=()=>yu("attendance"),sA=()=>yu("staff"),PL=()=>yu("feedback"),LL=()=>yu("supportQueries"),iA=()=>yu("staffAttendance"),N1=async n=>{try{if(console.log("=== FIREBASE CREATE USER PROFILE START ==="),console.log("User Data:",n),!fn())throw new Error("User not authenticated. Please sign in first.");const e=dn(),t=Yn(Mn,"userProfiles",e),r=await sh(t,n);return console.log("=== FIREBASE CREATE USER PROFILE END SUCCESS ==="),r}catch(e){throw console.error("Error creating user profile: ",e),e}},FL=async()=>{try{if(console.log("=== FIREBASE GET USER PROFILE START ==="),!fn())throw new Error("User not authenticated. Please sign in first.");const n=dn(),e=Yn(Mn,"userProfiles",n),t=await pu(e);return t.exists()?(console.log("User profile data:",t.data()),console.log("=== FIREBASE GET USER PROFILE END SUCCESS ==="),{id:t.id,...t.data()}):(console.log("No user profile found"),console.log("=== FIREBASE GET USER PROFILE END SUCCESS ==="),null)}catch(n){throw console.error("Error getting user profile: ",n),n}},ML=async n=>{try{console.log("=== FIREBASE ADD STUDENT START ==="),console.log("Student Data:",n);const t={id:(await lu(eA(),n)).id,...n};return console.log("=== FIREBASE ADD STUDENT END SUCCESS ==="),t}catch(e){throw console.error("Error adding student: ",e),e}},Mg=async()=>{try{const n=await mu(eA()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(n){throw console.error("Error getting students: ",n),n}},OL=async()=>{try{const n=await mu(PL()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(n){throw console.error("Error getting feedback: ",n),n}},UL=async()=>{try{const n=await mu(LL()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),e}catch(n){throw console.error("Error getting support queries: ",n),n}},cf=async(n,e)=>{try{console.log("=== FIREBASE UPDATE STUDENT START ==="),console.log("Student ID (before conversion):",n,"Type:",typeof n),console.log("Student Data:",e);const t=String(n);console.log("Student ID (after conversion):",t,"Type:",typeof t);const r=Yn(Mn,`users/${dn()}/students`,t);console.log("Student document reference created:",r);const i=await gu(r,e);return console.log("Firebase updateDoc result:",i),console.log("=== FIREBASE UPDATE STUDENT END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating student in Firebase: ",t),console.error("Error code:",t.code),console.error("Error message:",t.message),console.error("Error stack:",t.stack),t}},BL=async n=>{try{console.log("=== FIREBASE DELETE STUDENT START ==="),console.log("Student ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Student ID (after conversion):",e,"Type:",typeof e);const t=Yn(Mn,`users/${dn()}/students`,e);return await wh(t),console.log("=== FIREBASE DELETE STUDENT END SUCCESS ==="),e}catch(e){throw console.error("Error deleting student: ",e),e}},aA=async n=>{try{console.log("=== FIREBASE ADD PAYMENT START ==="),console.log("Payment Data:",n);const t={id:(await lu(tA(),n)).id,...n};return console.log("=== FIREBASE ADD PAYMENT END SUCCESS ==="),t}catch(e){throw console.error("Error adding payment: ",e),e}},lp=async()=>{try{console.log("=== FIREBASE GET PAYMENTS START ===");const n=await mu(tA()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET PAYMENTS END SUCCESS ==="),e}catch(n){throw console.error("Error getting payments: ",n),n}},A1=async(n,e)=>{try{console.log("=== FIREBASE UPDATE PAYMENT START ==="),console.log("Payment ID (before conversion):",n,"Type:",typeof n),console.log("Payment Data:",e);const t=String(n);console.log("Payment ID (after conversion):",t,"Type:",typeof t);const r=Yn(Mn,`users/${dn()}/payments`,t);return await gu(r,e),console.log("=== FIREBASE UPDATE PAYMENT END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating payment: ",t),t}},_w=async n=>{try{console.log("=== FIREBASE DELETE PAYMENT START ==="),console.log("Payment ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Payment ID (after conversion):",e,"Type:",typeof e);const t=Yn(Mn,`users/${dn()}/payments`,e);return await wh(t),console.log("=== FIREBASE DELETE PAYMENT END SUCCESS ==="),e}catch(e){throw console.error("Error deleting payment: ",e),e}},VL=async n=>{try{console.log("=== FIREBASE ADD EXPENDITURE START ==="),console.log("Expenditure Data:",n);const t={id:(await lu(nA(),n)).id,...n};return console.log("=== FIREBASE ADD EXPENDITURE END SUCCESS ==="),t}catch(e){throw console.error("Error adding expenditure: ",e),e}},t2=async()=>{try{console.log("=== FIREBASE GET EXPENDITURES START ===");const n=await mu(nA()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET EXPENDITURES END SUCCESS ==="),e}catch(n){throw console.error("Error getting expenditures: ",n),n}},zL=async(n,e)=>{try{console.log("=== FIREBASE UPDATE EXPENDITURE START ==="),console.log("Expenditure ID (before conversion):",n,"Type:",typeof n),console.log("Expenditure Data:",e);const t=String(n);console.log("Expenditure ID (after conversion):",t,"Type:",typeof t);const r=Yn(Mn,`users/${dn()}/expenditures`,t);return await gu(r,e),console.log("=== FIREBASE UPDATE EXPENDITURE END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating expenditure: ",t),t}},qL=async n=>{try{console.log("=== FIREBASE DELETE EXPENDITURE START ==="),console.log("Expenditure ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Expenditure ID (after conversion):",e,"Type:",typeof e);const t=Yn(Mn,`users/${dn()}/expenditures`,e);return await wh(t),console.log("=== FIREBASE DELETE EXPENDITURE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting expenditure: ",e),e}},HL=async n=>{try{console.log("=== FIREBASE ADD ATTENDANCE START ==="),console.log("Attendance Data:",n);const t={id:(await lu(rA(),n)).id,...n};return console.log("=== FIREBASE ADD ATTENDANCE END SUCCESS ==="),t}catch(e){throw console.error("Error adding attendance: ",e),e}},$L=async()=>{try{console.log("=== FIREBASE GET ATTENDANCE START ===");const n=await mu(rA()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET ATTENDANCE END SUCCESS ==="),e}catch(n){throw console.error("Error getting attendance: ",n),n}},GL=async(n,e)=>{try{console.log("=== FIREBASE UPDATE ATTENDANCE START ==="),console.log("Attendance ID (before conversion):",n,"Type:",typeof n),console.log("Attendance Data:",e);const t=String(n);console.log("Attendance ID (after conversion):",t,"Type:",typeof t);const r=Yn(Mn,`users/${dn()}/attendance`,t);return await gu(r,e),console.log("=== FIREBASE UPDATE ATTENDANCE END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating attendance: ",t),t}},WL=async n=>{try{console.log("=== FIREBASE DELETE ATTENDANCE START ==="),console.log("Attendance ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Attendance ID (after conversion):",e,"Type:",typeof e);const t=Yn(Mn,`users/${dn()}/attendance`,e);return await wh(t),console.log("=== FIREBASE DELETE ATTENDANCE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting attendance: ",e),e}},YL=async(n,e)=>{try{console.log("=== FIREBASE UPLOAD STUDENT PHOTO START ==="),console.log("Student ID:",n),console.log("File:",e);const t=ih(qu,`users/${dn()}/student-photos/${n}/${e.name}`),r=await Nf(t,e),i=await Af(r.ref);return console.log("=== FIREBASE UPLOAD STUDENT PHOTO END SUCCESS ==="),i}catch(t){throw console.error("Error uploading student photo: ",t),t}},KL=async()=>{try{console.log("Testing Firebase Storage connection...");const n=ih(qu,`users/${dn()}`),e=await TL(n);return console.log("Storage connection test successful:",{prefixes:e.prefixes.length,items:e.items.length}),!0}catch(n){return console.error("Storage connection test failed:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),!1}},XL=async n=>{try{console.log("=== FIREBASE ADD STAFF START ==="),console.log("Staff Data:",n);const t={id:(await lu(sA(),n)).id,...n};return console.log("=== FIREBASE ADD STAFF END SUCCESS ==="),t}catch(e){throw console.error("Error adding staff: ",e),e}},QL=async()=>{try{console.log("=== FIREBASE GET STAFF START ===");const n=await mu(sA()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET STAFF END SUCCESS ==="),e}catch(n){throw console.error("Error getting staff: ",n),n}},JL=async(n,e)=>{try{console.log("=== FIREBASE UPDATE STAFF START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n),console.log("Staff Data:",e);const t=String(n);console.log("Firebase Document ID (after conversion):",t,"Type:",typeof t);const r=Yn(Mn,`users/${dn()}/staff`,t);return await gu(r,e),console.log("=== FIREBASE UPDATE STAFF END SUCCESS ==="),{id:t,...e}}catch(t){throw console.error("Error updating staff: ",t),t}},ZL=async n=>{try{console.log("=== FIREBASE DELETE STAFF START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n);const e=String(n);console.log("Firebase Document ID (after conversion):",e,"Type:",typeof e);const t=Yn(Mn,`users/${dn()}/staff`,e);return await wh(t),console.log("=== FIREBASE DELETE STAFF END SUCCESS ==="),e}catch(e){throw console.error("Error deleting staff: ",e),e}},e8=async n=>{try{console.log("=== FIREBASE ADD STAFF ATTENDANCE START ==="),console.log("Attendance Data:",n);const e={};for(const i in n)n[i]!==void 0?e[i]=n[i]:console.warn("Skipping undefined field in attendanceData:",i);console.log("Cleaned Attendance Data:",e);const r={id:(await lu(iA(),e)).id,...e};return console.log("=== FIREBASE ADD STAFF ATTENDANCE END SUCCESS ==="),r}catch(e){throw console.error("Error adding staff attendance: ",e),e}},t8=async()=>{try{console.log("=== FIREBASE GET STAFF ATTENDANCE START ===");const n=await mu(iA()),e=[];return n.forEach(t=>{e.push({id:t.id,...t.data()})}),console.log("=== FIREBASE GET STAFF ATTENDANCE END SUCCESS ==="),e}catch(n){throw console.error("Error getting staff attendance: ",n),n}},n8=async(n,e)=>{try{if(console.log("=== FIREBASE UPDATE STAFF ATTENDANCE START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n),console.log("Attendance Data:",e),!n)throw new Error("Firebase document ID is required for update operation");const t=String(n);console.log("Firebase Document ID (after conversion):",t,"Type:",typeof t);const r={};for(const o in e)e[o]!==void 0?r[o]=e[o]:console.warn("Skipping undefined field in attendanceData:",o);console.log("Cleaned Attendance Data:",r);const i=Yn(Mn,`users/${dn()}/staffAttendance`,t);return await gu(i,r),console.log("=== FIREBASE UPDATE STAFF ATTENDANCE END SUCCESS ==="),{id:t,...r}}catch(t){throw console.error("Error updating staff attendance: ",t),t}},r8=async n=>{try{if(console.log("=== FIREBASE DELETE STAFF ATTENDANCE START ==="),console.log("Firebase Document ID (before conversion):",n,"Type:",typeof n),!n)throw new Error("Firebase document ID is required for delete operation");const e=String(n);console.log("Firebase Document ID (after conversion):",e,"Type:",typeof e);const t=Yn(Mn,`users/${dn()}/staffAttendance`,e);return await wh(t),console.log("=== FIREBASE DELETE STAFF ATTENDANCE END SUCCESS ==="),e}catch(e){throw console.error("Error deleting staff attendance: ",e),e}},oA=async()=>{try{if(console.log("=== FIREBASE GET BRANDING SETTINGS START ==="),!fn())throw new Error("User not authenticated. Please sign in first.");const n=dn(),e=Yn(Mn,`users/${n}/settings/branding`),t=await pu(e);if(t.exists()){const r=t.data();return console.log("Branding settings data:",r),console.log("=== FIREBASE GET BRANDING SETTINGS END SUCCESS ==="),r}else return console.log("No branding settings found"),console.log("=== FIREBASE GET BRANDING SETTINGS END SUCCESS ==="),{}}catch(n){throw console.error("Error getting branding settings: ",n),n}},s8=({title:n,value:e,icon:t,color:r,animate:i=!1})=>{const[o,u]=X.useState(i?0:e);return X.useEffect(()=>{if(i){const d=typeof e=="string"?e.includes("")?parseFloat(e.replace(/[^0-9.]/g,"")):0:e;if(d===0){u(e);return}const p=d/(1e3/16);let m=0;const w=setInterval(()=>{m+=p,m>=d?(clearInterval(w),u(e)):typeof e=="string"&&e.includes("")?u(`${Math.floor(m).toLocaleString()}`):u(Math.floor(m))},16);return()=>clearInterval(w)}},[e,i]),l.jsxs("div",{className:"stat-card",children:[l.jsx("div",{className:"stat-icon",style:{backgroundColor:`${r}20`,color:r},children:l.jsx("span",{className:"stat-icon-content",children:t})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("div",{className:"stat-title",children:n}),l.jsx("div",{className:"stat-value",children:i?o:e})]})]})},i8=({data:n})=>{const{collected:e,pending:t}=n,r=e+t;if(r===0)return l.jsx("div",{className:"chart-placeholder",children:"No data available"});const i=e/r*100,o=t/r*100,u=180,d=u/2,h=70,p=45,m=k=>k*Math.PI/180,w=i/100*360,_=(k,q,$,z)=>{const oe=d+$*Math.cos(m(k-90)),ce=d+$*Math.sin(m(k-90)),H=d+$*Math.cos(m(q-90)),D=d+$*Math.sin(m(q-90)),I=d+z*Math.cos(m(k-90)),V=d+z*Math.sin(m(k-90)),T=d+z*Math.cos(m(q-90)),F=d+z*Math.sin(m(q-90)),L=q-k<=180?0:1;return[`M ${oe} ${ce}`,`A ${$} ${$} 0 ${L} 1 ${H} ${D}`,`L ${T} ${F}`,`A ${z} ${z} 0 ${L} 0 ${I} ${V}`,"Z"].join(" ")},x=_(0,w,h,p),A=_(w,360,h,p),[R,C]=X.useState(null);return l.jsxs("div",{className:"pie-chart-container",children:[l.jsx("div",{className:"pie-chart-wrapper",children:l.jsxs("svg",{viewBox:`0 0 ${u} ${u}`,className:"pie-svg",style:{width:"100%",height:"auto"},children:[l.jsx("path",{d:x,fill:"var(--success-color)",className:"pie-slice",onMouseEnter:()=>C("collected"),onMouseLeave:()=>C(null),style:{transform:R==="collected"?"scale(1.05)":"scale(1)",filter:R==="collected"?"drop-shadow(0 4px 10px rgba(28, 200, 138, 0.3))":"drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1))",transition:"all 0.3s ease"}}),l.jsx("path",{d:A,fill:"var(--warning-color)",className:"pie-slice",onMouseEnter:()=>C("pending"),onMouseLeave:()=>C(null),style:{transform:R==="pending"?"scale(1.05)":"scale(1)",filter:R==="pending"?"drop-shadow(0 4px 10px rgba(246, 194, 62, 0.3))":"drop-shadow(0 2px 5px rgba(0, 0, 0, 0.1))",transition:"all 0.3s ease"}}),l.jsx("circle",{cx:d,cy:d,r:p-6,fill:"white",stroke:"rgba(0, 0, 0, 0.03)",strokeWidth:"1"}),l.jsx("text",{x:d,y:d-6,textAnchor:"middle",className:"center-text",fill:"var(--text-primary)",style:{fontSize:"20px",fontWeight:"800"},children:Math.round(r).toLocaleString()}),l.jsx("text",{x:d,y:d+10,textAnchor:"middle",className:"center-text",fill:"var(--text-secondary)",style:{fontSize:"9px",fontWeight:"700",letterSpacing:"1px"},children:"TOTAL"})]})}),l.jsxs("div",{className:"chart-legend-side",children:[l.jsxs("div",{className:"chart-legend",children:[l.jsxs("div",{className:"legend-item",onMouseEnter:()=>C("collected"),onMouseLeave:()=>C(null),style:{transform:R==="collected"?"translateY(-2px)":"translateY(0)",transition:"all 0.2s ease"},children:[l.jsx("div",{className:"legend-color",style:{backgroundColor:"var(--success-color)"}}),l.jsxs("div",{className:"legend-text",children:[l.jsx("div",{className:"legend-label",children:"Collected"}),l.jsxs("div",{className:"legend-value",children:["",Math.round(e).toLocaleString()]})]}),l.jsxs("div",{className:"legend-percentage",children:[i.toFixed(1),"%"]})]}),l.jsxs("div",{className:"legend-item",onMouseEnter:()=>C("pending"),onMouseLeave:()=>C(null),style:{transform:R==="pending"?"translateY(-2px)":"translateY(0)",transition:"all 0.2s ease"},children:[l.jsx("div",{className:"legend-color",style:{backgroundColor:"var(--warning-color)"}}),l.jsxs("div",{className:"legend-text",children:[l.jsx("div",{className:"legend-label",children:"Pending"}),l.jsxs("div",{className:"legend-value",children:["",Math.round(t).toLocaleString()]})]}),l.jsxs("div",{className:"legend-percentage",children:[o.toFixed(1),"%"]})]})]}),l.jsxs("div",{className:"percentage-display",children:[l.jsxs("div",{className:"percentage-value",children:[i.toFixed(1),"%"]}),l.jsx("div",{className:"percentage-label",children:"Collection Rate"}),l.jsxs("div",{className:"total-amount",children:["Total: ",Math.round(r).toLocaleString()]})]})]})]})},a8=({data:n,width:e="100%",height:t=500})=>{const[r,i]=X.useState(null);if(!n||n.length===0)return l.jsx("div",{className:"chart-placeholder",children:"No data available"});const o=n.map(q=>q.amount),u=Math.max(...o),d=Math.min(...o),h=u-d||1,p=30,m=typeof e=="string"?1e3:e,w=t,_=n.map((q,$)=>{const z=p+$*(m-2*p)/(n.length-1),oe=w-p-(q.amount-d)/h*(w-2*p);return{x:z,y:oe,...q}}),x=q=>{if(q.length<2)return"";let $=`M ${q[0].x} ${q[0].y}`;for(let z=1;z<q.length;z++){const oe=q[z],ce=q[z-1],H=ce.x+(oe.x-ce.x)*.5,D=ce.y,I=oe.x-(oe.x-ce.x)*.5,V=oe.y;$+=` C ${H} ${D}, ${I} ${V}, ${oe.x} ${oe.y}`}return $},A=x(_),R=()=>[0,.25,.5,.75,1].map((q,$)=>l.jsx("line",{x1:p,y1:p+q*(w-2*p),x2:m-p,y2:p+q*(w-2*p),className:"grid-line"},$)),C=(q,$)=>{i({x:$.clientX,y:$.clientY,content:`${q.amount.toLocaleString()} collected in ${q.month}`})},k=()=>{i(null)};return l.jsxs("div",{className:"line-chart-container",children:[l.jsxs("svg",{width:e,height:t,viewBox:`0 0 ${m} ${w}`,preserveAspectRatio:"xMidYMid meet",className:"line-chart",children:[l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"lineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--info-color)"}),l.jsx("stop",{offset:"100%",stopColor:"var(--info-color-darker)"})]}),l.jsxs("linearGradient",{id:"areaGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:"var(--info-color)",stopOpacity:"0.2"}),l.jsx("stop",{offset:"100%",stopColor:"var(--info-color)",stopOpacity:"0"})]}),l.jsxs("filter",{id:"shadow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[l.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3"}),l.jsx("feOffset",{dx:"2",dy:"2",result:"offsetblur"}),l.jsx("feFlood",{floodColor:"rgba(0,0,0,0.1)"}),l.jsx("feComposite",{in2:"offsetblur",operator:"in"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),R(),_.length>1&&l.jsx("path",{d:`${x(_)} L ${_[_.length-1].x} ${w-p} L ${_[0].x} ${w-p} Z`,fill:"url(#areaGradient)",className:"area-fill"}),l.jsx("path",{d:A,fill:"none",stroke:"url(#lineGradient)",strokeWidth:"2.5",filter:"url(#shadow)",className:"data-line"}),_.map((q,$)=>l.jsx("circle",{cx:q.x,cy:q.y,r:"6",fill:"white",stroke:"var(--info-color)",strokeWidth:"2",className:"data-point",onMouseOver:z=>C(q,z),onMouseOut:k},$)),_.map((q,$)=>l.jsx("text",{x:q.x,y:w-p+20,textAnchor:"middle",fontSize:"10",fill:"var(--text-secondary)",className:"axis-label",children:q.month},$))]}),r&&l.jsx("div",{className:"chart-tooltip",style:{position:"fixed",left:r.x+10,top:r.y-30,background:"white",padding:"8px 12px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"12px",fontWeight:"600",pointerEvents:"none",zIndex:1e3,border:"1px solid rgba(0, 0, 0, 0.05)"},children:r.content})]})},o8=({data:n,width:e="100%",height:t=300})=>{const[r,i]=X.useState(null),u=["Sep 2025","Oct 2025","Nov 2025","Dec 2025"].map(z=>n.find(ce=>ce.month===z)||{month:z,collected:0,pending:0}),d={top:30,right:20,bottom:50,left:60},h=typeof e=="string"?1e3:e,p=t,m=h-d.left-d.right,w=p-d.top-d.bottom,_=[0,1e4,2e4,3e4,4e4],x=4e4,A=20,R=A*2.5,C=(m-R*u.length)/(u.length-1),k=[];u.forEach((z,oe)=>{const ce=d.left+oe*(R+C),H=z.collected/x*w,D=d.top+w-H;k.push({x:ce,y:D,width:A,height:H,value:z.collected,month:z.month,type:"Collected",color:"#1cc88a",isCurrent:z.month==="Dec 2025"});const I=z.pending/x*w,V=d.top+w-I;k.push({x:ce+A*1.5,y:V,width:A,height:I,value:z.pending,month:z.month,type:"Pending",color:"#f6c23e",isCurrent:z.month==="Dec 2025"})});const q=(z,oe)=>{const ce=u.find(H=>H.month===z.month);i({x:oe.clientX,y:oe.clientY,month:z.month,collected:ce.collected,pending:ce.pending})},$=()=>{i(null)};return l.jsxs("div",{className:"bar-chart-container",children:[l.jsxs("svg",{width:e,height:t,viewBox:`0 0 ${h} ${p}`,preserveAspectRatio:"xMidYMid meet",className:"bar-chart",children:[l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"collectedGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:"#1cc88a"}),l.jsx("stop",{offset:"100%",stopColor:"#139d6d"})]}),l.jsxs("linearGradient",{id:"pendingGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:"#f6c23e"}),l.jsx("stop",{offset:"100%",stopColor:"#e5a525"})]}),l.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[l.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"3",result:"blur"}),l.jsx("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),_.map((z,oe)=>{const ce=d.top+w-z/x*w;return l.jsx("line",{x1:d.left,y1:ce,x2:h-d.right,y2:ce,stroke:"rgba(0, 0, 0, 0.05)",strokeWidth:"1"},oe)}),_.map((z,oe)=>{const ce=d.top+w-z/x*w;return l.jsxs("text",{x:d.left-10,y:ce+4,textAnchor:"end",fontSize:"16",fill:"#495057",fontFamily:"sans-serif",fontWeight:"500",children:["",z===0?"0":z>=1e3?`${z/1e3}k`:z]},oe)}),k.map((z,oe)=>l.jsxs("g",{children:[l.jsx("rect",{x:z.x,y:z.y,width:z.width,height:z.height,fill:z.type==="Collected"?"url(#collectedGradient)":"url(#pendingGradient)",rx:"8",ry:"8",onMouseOver:ce=>q(z,ce),onMouseOut:$,style:{opacity:z.value===0?.3:1,filter:z.isCurrent?"url(#glow)":"none"}}),z.isCurrent&&l.jsx("rect",{x:z.x-1,y:z.y-1,width:z.width+2,height:z.height+2,fill:"none",rx:"9",ry:"9",stroke:"#1cc88a",strokeWidth:"1",strokeDasharray:"3,3"})]},oe)),u.map((z,oe)=>{const ce=d.left+oe*(R+C)+R/2;return l.jsxs("g",{children:[l.jsx("text",{x:ce,y:p-d.bottom+20,textAnchor:"middle",fontSize:"16",fill:"#495057",fontFamily:"sans-serif",fontWeight:"500",children:z.month.split(" ")[0]}),z.month==="Dec 2025"&&l.jsx("text",{x:ce,y:p-d.bottom+35,textAnchor:"middle",fontSize:"14",fill:"#1cc88a",fontWeight:"600",fontFamily:"sans-serif",children:"Current"})]},oe)})]}),l.jsxs("div",{className:"chart-legend-top-right",children:[l.jsxs("div",{className:"legend-item-horizontal",children:[l.jsx("div",{className:"legend-color-box",style:{backgroundColor:"#1cc88a"}}),l.jsx("span",{className:"legend-label",children:"Collected"})]}),l.jsxs("div",{className:"legend-item-horizontal",children:[l.jsx("div",{className:"legend-color-box",style:{backgroundColor:"#f6c23e"}}),l.jsx("span",{className:"legend-label",children:"Pending"})]})]}),r&&l.jsxs("div",{className:"chart-tooltip",style:{position:"fixed",left:r.x+10,top:r.y-30,background:"white",padding:"10px 15px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",fontSize:"13px",fontWeight:"600",pointerEvents:"none",zIndex:1e3,border:"1px solid rgba(0, 0, 0, 0.05)",minWidth:"180px"},children:[l.jsx("div",{style:{marginBottom:"5px",fontWeight:"700"},children:r.month}),l.jsxs("div",{style:{color:"#1cc88a"},children:["Collected: ",r.collected.toLocaleString()]}),l.jsxs("div",{style:{color:"#f6c23e"},children:["Pending: ",r.pending.toLocaleString()]})]})]})},l8=({totalFees:n,collectedFees:e})=>{const[t,r]=X.useState([]),[i,o]=X.useState(!0),[u,d]=X.useState(null);X.useEffect(()=>{const w=async()=>{try{o(!0);const x=await t2();r(x)}catch(x){console.error("Error fetching expenditures:",x),d("Failed to load expenditure data")}finally{o(!1)}};w();const _=()=>{w()};return window.addEventListener("expenditureUpdated",_),()=>{window.removeEventListener("expenditureUpdated",_)}},[]);const h=t.reduce((w,_)=>w+(parseFloat(_.total)||0),0),p=n-h,m=p>=0;return i?l.jsxs("div",{className:"profit-loss-card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h3",{children:"Financial Status"})}),l.jsx("div",{className:"card-content",children:l.jsx("div",{className:"loading",children:"Loading..."})})]}):u?l.jsxs("div",{className:"profit-loss-card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h3",{children:"Financial Status"})}),l.jsx("div",{className:"card-content",children:l.jsx("div",{className:"error",children:u})})]}):l.jsxs("div",{className:"profit-loss-card",children:[l.jsx("div",{className:"card-header",children:l.jsx("h3",{children:"Financial Status"})}),l.jsx("div",{className:"card-content",children:l.jsxs("div",{className:"financial-summary",children:[l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"label",children:"Total Income (Fees)"}),l.jsxs("span",{className:"value income",children:["",n.toLocaleString()]})]}),l.jsxs("div",{className:"summary-item",children:[l.jsx("span",{className:"label",children:"Total Expenditure"}),l.jsxs("span",{className:"value expenditure",children:["",h.toLocaleString()]})]}),l.jsxs("div",{className:`summary-item ${m?"profit":"loss"}`,children:[l.jsxs("div",{children:[l.jsxs("div",{className:"label",children:["Net ",m?"Profit":"Loss"]}),l.jsx("div",{className:"helper-text",children:"Financial health indicator"})]}),l.jsxs("span",{className:`value ${m?"profit":"loss"}`,children:["",Math.abs(p).toLocaleString()]})]})]})})]})},c8=({onClose:n})=>{const[e,t]=X.useState([]),[r,i]=X.useState(!0),[o,u]=X.useState("month"),[d,h]=X.useState("desc");X.useEffect(()=>{p()},[]);const p=async()=>{try{const x=await lp(),A={};x.forEach(C=>{if(!C.createdAt)return;let k;if(C.createdAt instanceof Date?k=C.createdAt:typeof C.createdAt=="string"?k=new Date(C.createdAt):C.createdAt.toDate&&(k=C.createdAt.toDate()),!k||isNaN(k.getTime()))return;const q=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}`,$=k.toLocaleString("en-US",{month:"long",year:"numeric"});A[q]||(A[q]={month:$,totalAmount:0,paymentCount:0}),A[q].totalAmount+=parseFloat(C.amount)||0,A[q].paymentCount+=1});const R=Object.values(A);R.sort((C,k)=>new Date(k.month)-new Date(C.month)),t(R),i(!1)}catch(x){console.error("Error fetching history data:",x),i(!1)}},m=x=>{o===x?h(d==="asc"?"desc":"asc"):(u(x),h("desc"))},w=[...e].sort((x,A)=>{let R,C;switch(o){case"month":R=new Date(x.month),C=new Date(A.month);break;case"amount":R=x.totalAmount,C=A.totalAmount;break;case"count":R=x.paymentCount,C=A.paymentCount;break;default:return 0}return d==="asc"?R>C?1:-1:R<C?1:-1}),_=()=>{const x=[["Month","Total Collected ()","Total Payments"],...w.map(k=>[k.month,k.totalAmount,k.paymentCount])].map(k=>k.join(",")).join(`
`),A=new Blob([x],{type:"text/csv;charset=utf-8;"}),R=URL.createObjectURL(A),C=document.createElement("a");C.setAttribute("href",R),C.setAttribute("download","monthly-history.csv"),C.style.visibility="hidden",document.body.appendChild(C),C.click(),document.body.removeChild(C)};return r?l.jsx("div",{className:"modal-overlay",onClick:n,children:l.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Monthly History"}),l.jsx("button",{className:"close-button",onClick:n,children:""})]}),l.jsx("div",{className:"loading",children:"Loading history data..."})]})}):l.jsx("div",{className:"modal-overlay",onClick:n,children:l.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Monthly History"}),l.jsx("button",{className:"close-button",onClick:n,children:""})]}),l.jsx("div",{className:"modal-actions",children:l.jsx("button",{className:"export-button",onClick:_,children:"Export to CSV"})}),l.jsx("div",{className:"history-table-container",children:l.jsxs("table",{className:"history-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsxs("th",{onClick:()=>m("month"),children:["Month ",o==="month"&&(d==="asc"?"":"")]}),l.jsxs("th",{onClick:()=>m("amount"),children:["Total Collected () ",o==="amount"&&(d==="asc"?"":"")]}),l.jsxs("th",{onClick:()=>m("count"),children:["Total Payments ",o==="count"&&(d==="asc"?"":"")]})]})}),l.jsx("tbody",{children:w.map((x,A)=>l.jsxs("tr",{children:[l.jsx("td",{children:x.month}),l.jsxs("td",{children:["",x.totalAmount.toLocaleString()]}),l.jsx("td",{children:x.paymentCount})]},A))})]})})]})})},Uc=({data:n,width:e=40,height:t=20,color:r="var(--info-color)"})=>{if(!n||n.length<2)return null;const i=0,o=e,u=0,d=t,h=Math.min(...n),m=Math.max(...n)-h||1,w=n.map((_,x)=>{const A=i+x/(n.length-1)*(o-i),R=d-(_-h)/m*(d-u);return`${A},${R}`}).join(" ");return l.jsx("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,children:l.jsx("polyline",{points:w,fill:"none",stroke:r,strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"})})},bs=({type:n="text",width:e="100%",height:t,className:r=""})=>{const i=`skeleton-loader skeleton-loader-${n} ${r}`,o={width:e,...t&&{height:t}};return l.jsx("div",{className:i,style:o})},Zc=async(n,e={})=>{try{const t=Yn(Mn,`subscriptions/${n}`),r=await pu(t);if(r.exists())return console.log("Subscription already exists for user:",n),r.data();const i=new Date,o=new Date;o.setDate(o.getDate()+7);const u={plan:"trial",isPaid:!1,status:"active",trialStartDate:on.fromDate(i),trialEndsAt:on.fromDate(o),createdAt:on.fromDate(i),userId:n,...e};return await sh(t,u),console.log("Trial subscription created successfully for user:",n),u}catch(t){throw console.error("Error creating subscription:",t),t}},cu=async n=>{try{const e=Yn(Mn,`subscriptions/${n}`),t=await pu(e);return t.exists()?t.data():(console.log("No subscription found for user:",n),null)}catch(e){throw console.error("Error getting subscription:",e),e}},Ew=async n=>{try{const e=await cu(n);if(!e)return console.log("No subscription found for user:",n),!1;const t=new Date,r=e.isPaid===!0,i=e.plan==="trial";let o=!1;if(e.trialEndsAt){let u;e.trialEndsAt&&typeof e.trialEndsAt.toDate=="function"?u=e.trialEndsAt.toDate():e.trialEndsAt instanceof Date?u=e.trialEndsAt:u=new Date(e.trialEndsAt),o=t>u}if(r&&e.expiresAt){let u;if(e.expiresAt&&typeof e.expiresAt.toDate=="function"?u=e.expiresAt.toDate():e.expiresAt instanceof Date?u=e.expiresAt:u=new Date(e.expiresAt),t<=u)return!0}return i&&!o?!0:((i&&o||r&&e.expiresAt&&t>new Date(e.expiresAt.toDate()))&&await gu(Yn(Mn,`subscriptions/${n}`),{status:"expired",lastUpdated:on.now()}),!1)}catch(e){return console.error("Error checking subscription status:",e),!1}},lA=n=>{if(!n)return 0;let e;n&&typeof n.toDate=="function"?e=n.toDate():n instanceof Date?e=n:e=new Date(n);const r=e-new Date,i=Math.ceil(r/(1e3*60*60*24));return Math.max(0,i)},xy=n=>{if(!n)return!1;if(n.isPaid===!0&&n.expiresAt){const t=n.expiresAt.toDate();return new Date<=t}return!1},wy=n=>{if(!n)return!1;if(n.plan==="trial"&&n.trialEndsAt){const t=n.trialEndsAt.toDate();return!(new Date>t)}return!1},Sy=n=>{if(!n)return!1;if(n.plan==="trial"&&n.trialEndsAt){const t=n.trialEndsAt.toDate();return new Date>t}return!1},cA=X.createContext(),Hd=new Set,n2=()=>{const n=X.useContext(cA);if(!n)throw new Error("useSubscription must be used within a SubscriptionProvider");return n},u8=({children:n})=>{console.log("SubscriptionProvider initialized");const[e,t]=X.useState(null),[r,i]=X.useState(!1),[o,u]=X.useState(!0),[d,h]=X.useState(null);X.useEffect(()=>{let A;return pn&&(console.log("Setting up auth state listener"),A=pn.onAuthStateChanged(async R=>{if(console.log("Auth state changed, user:",R?.uid),R)try{console.log("Subscription context: Checking subscription for user:",R.uid),u(!0),h(null);let C=await cu(R.uid);if(console.log("Subscription context: Got subscription data:",C),!C){if(console.log("No subscription found, creating new one for user:",R.uid),Hd.has(R.uid)){console.log("Subscription creation already in progress for user:",R.uid),await new Promise(z=>setTimeout(z,100));return}Hd.add(R.uid);try{console.log("Creating subscription for user:",R.uid),C=await Zc(R.uid),console.log("Subscription created for user:",R.uid,C)}catch(z){throw console.error("Error creating subscription for user:",R.uid,z),console.error("Error details:",z.message,z.stack),z}finally{Hd.delete(R.uid)}}t(C);const k=xy(C),q=wy(C),$=Sy(C);console.log("Subscription context: Paid user:",k),console.log("Subscription context: Trial user:",q),console.log("Subscription context: Trial expired:",$),console.log("Subscription context: Subscription data:",C),i(k||q)}catch(C){console.error("Error fetching/creating subscription for user:",R?.uid,C),console.error("Error details:",C.message,C.stack),h(C.message),i(!1),t(null)}finally{console.log("Subscription context: Finished loading for user:",R?.uid),u(!1)}else t(null),i(!1),u(!1)})),()=>{A&&A()}},[]);const p=X.useCallback(async()=>{if(pn.currentUser)try{u(!0),h(null);let A=await cu(pn.currentUser.uid);if(!A){if(Hd.has(pn.currentUser.uid)){await new Promise(q=>setTimeout(q,100));return}Hd.add(pn.currentUser.uid);try{A=await Zc(pn.currentUser.uid)}finally{Hd.delete(pn.currentUser.uid)}}t(A);const R=xy(A),C=wy(A),k=Sy(A);console.log("Refresh subscription: Paid user:",R),console.log("Refresh subscription: Trial user:",C),console.log("Refresh subscription: Trial expired:",k),i(R||C)}catch(A){console.error("Error refreshing/creating subscription:",A),h(A.message),i(!1)}finally{u(!1)}},[pn.currentUser]),m=xy(e),w=wy(e),_=Sy(e),x={subscription:e,hasActiveSub:r,loading:o,error:d,refreshSubscription:p,isPaidUser:m,isTrialUser:w,isTrialExpired:_};return l.jsx(cA.Provider,{value:x,children:n})},d8=()=>{const{subscription:n,loading:e}=n2();if(e||!n||n.isPaid===!0||n.plan!=="trial"||n.status==="expired")return null;const t=lA(n.trialEndsAt);return t<=0?null:l.jsxs("div",{className:"trial-banner",style:{backgroundColor:"#e3f2fd",color:"#1976d2",padding:"16px",borderRadius:"8px",marginBottom:"20px",border:"2px solid #bbdefb",textAlign:"center",fontWeight:"500",fontSize:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[l.jsx("strong",{children:" Free Trial Active!"})," You have ",t," day",t!==1?"s":""," remaining.",l.jsx("br",{}),l.jsx("small",{style:{display:"block",marginTop:"8px"},children:l.jsx("a",{href:"/subscribe",style:{backgroundColor:"#1976d2",color:"white",padding:"8px 16px",borderRadius:"4px",textDecoration:"none",fontWeight:"600",display:"inline-block",marginTop:"8px"},children:"Subscribe Now for 499/month"})})]})},eo=({children:n})=>l.jsxs("div",{className:"root-layout",children:[l.jsx(d8,{}),l.jsx("div",{className:"main-content-wrapper",children:l.jsx("div",{className:"page-container",children:n})})]}),Nw=()=>{const n=Vr(),[e,t]=X.useState("Administrator"),[r,i]=X.useState({totalStudents:0,totalFees:0,collectedFees:0,pendingFees:0,todayCollections:0,overduePayments:0,completedPayments:0,avgPaymentAmount:0}),[o,u]=X.useState({totalStudents:0,totalFees:0,collectedFees:0,pendingFees:0,todayCollections:0,overduePayments:0,completedPayments:0,avgPaymentAmount:0,collectionRate:0}),[d,h]=X.useState(!0),[p,m]=X.useState({totalStudents:[],totalFees:[],collectedFees:[],pendingFees:[],todayCollections:[],collectionRate:[],overduePayments:[],completedPayments:[],avgPaymentAmount:[]}),[w,_]=X.useState([]),[x,A]=X.useState({collected:0,pending:0}),[R,C]=X.useState([]),[k,q]=X.useState([]),[$,z]=X.useState(""),[oe,ce]=X.useState([]),[H,D]=X.useState(!1),[I,V]=X.useState(!0),[T,F]=X.useState(!1),L=X.useRef(null);X.useEffect(()=>{ee(),xe();const Q=()=>{ee()};return window.addEventListener("paymentAdded",Q),window.addEventListener("paymentRecorded",Q),window.addEventListener("paymentUpdated",Q),window.addEventListener("paymentDeleted",Q),window.addEventListener("studentsUpdated",Q),window.addEventListener("dashboardRefresh",Q),window.addEventListener("paymentsRefresh",Q),()=>{window.removeEventListener("paymentAdded",Q),window.removeEventListener("paymentRecorded",Q),window.removeEventListener("paymentUpdated",Q),window.removeEventListener("paymentDeleted",Q),window.removeEventListener("studentsUpdated",Q),window.removeEventListener("dashboardRefresh",Q),window.removeEventListener("paymentsRefresh",Q)}},[]),X.useEffect(()=>{const Q=Te=>{T&&Te.target.closest(".avatar-dropdown")===null&&F(!1)};return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[T]),X.useEffect(()=>{let Q=null;const Te=1e3,ue=be=>{Q||(Q=be);const Ie=Math.min((be-Q)/Te,1);u(Y=>({totalStudents:Math.floor(Ie*r.totalStudents+(1-Ie)*Y.totalStudents),totalFees:Math.floor(Ie*r.totalFees+(1-Ie)*Y.totalFees),collectedFees:Math.floor(Ie*r.collectedFees+(1-Ie)*Y.collectedFees),pendingFees:Math.floor(Ie*r.pendingFees+(1-Ie)*Y.pendingFees),todayCollections:Math.floor(Ie*r.todayCollections+(1-Ie)*Y.todayCollections),overduePayments:Math.floor(Ie*r.overduePayments+(1-Ie)*Y.overduePayments),completedPayments:Math.floor(Ie*r.completedPayments+(1-Ie)*Y.completedPayments),avgPaymentAmount:Math.floor(Ie*r.avgPaymentAmount+(1-Ie)*Y.avgPaymentAmount),collectionRate:Math.floor(Ie*(r.totalFees>0?Math.round(r.collectedFees/r.totalFees*100):0)+(1-Ie)*Y.collectionRate)})),Ie<1&&requestAnimationFrame(ue)};requestAnimationFrame(ue)},[r]);const ee=async()=>{try{h(!0);const Q=await Mg(),Te=await lp(),ue=await t2(),be=Q.length,Ie=Q.reduce((it,gt)=>it+(parseFloat(gt.totalFees)||0),0),Y=Q.reduce((it,gt)=>it+(parseFloat(gt.feesPaid)||0),0),pe=Ie-Y,Ne=ue.reduce((it,gt)=>it+(parseFloat(gt.total)||0),0),je=new Date,we=new Date(Date.UTC(je.getFullYear(),je.getMonth(),je.getDate()));let Ce=0,Je=0,ut=0,nt=0,ke=0;Te.forEach(it=>{if(it.status==="paid"?(ut++,nt+=parseFloat(it.amount)||0,ke++):it.status==="overdue"&&Je++,it.createdAt){let gt;if(it.createdAt instanceof on)gt=it.createdAt.toDate();else if(typeof it.createdAt=="string")if(it.createdAt.match(/^\d{4}-\d{2}-\d{2}$/)){const[et,bt,St]=it.createdAt.split("-").map(Number);gt=new Date(et,bt-1,St)}else gt=new Date(it.createdAt);else it.createdAt instanceof Date?gt=it.createdAt:typeof it.createdAt=="number"&&(gt=new Date(it.createdAt));gt instanceof Date&&!isNaN(gt.getTime())?new Date(Date.UTC(gt.getFullYear(),gt.getMonth(),gt.getDate())).getTime()===we.getTime()&&(Ce+=parseFloat(it.amount)||0):console.log("Invalid date for payment:",it.id,it.createdAt)}});const st=ke>0?nt/ke:0;i({totalStudents:be,totalFees:Ie,collectedFees:Y,pendingFees:pe,todayCollections:Ce,overduePayments:Je,completedPayments:ut,avgPaymentAmount:Math.round(st)}),ye(be,Ie,Y,pe,Ce,Je,ut,st);const Xe=le(Te);_(Xe),A({collected:Y,pending:pe});const Qe=[{name:"Completed",value:ut,color:"var(--success-color)"},{name:"Pending",value:Te.filter(it=>it.status==="pending").length,color:"var(--warning-color)"},{name:"Overdue",value:Je,color:"var(--danger-color)"}];ce(Qe);const tt=new Date,Oe=[];for(let it=5;it>=0;it--){const gt=new Date(tt.getFullYear(),tt.getMonth()-it,1),et=gt.toLocaleString("default",{month:"short"}),bt=gt.getFullYear().toString().slice(-2),St=Y/6,Nt=St*.3,un=Math.max(0,St+(Math.random()-.5)*Nt*2);Oe.push({month:`${et} '${bt}`,amount:Math.round(un)})}C(Oe);const De=[];Xe.slice(-4).forEach((it,gt)=>{const et=it.income,bt=Math.round(et*.25),[St,Nt]=it.monthLabel.split(" "),un=St.substring(0,3);De.push({month:`${un} ${Nt}`,collected:et,pending:bt})}),q(De)}catch(Q){console.error("Error fetching dashboard data:",Q)}finally{h(!1)}},ye=(Q,Te,ue,be,Ie,Y,pe,Ne)=>{const we=[],Ce=[],Je=[],ut=[],nt=[],ke=[],st=[],Xe=[],Qe=[];for(let tt=6;tt>=0;tt--){const Oe=1+(Math.random()-.5)*.2;we.push(Math.max(0,Math.round(Q*Oe*(.8+.2*(tt/7))))),Ce.push(Math.max(0,Math.round(Te*Oe*(.8+.2*(tt/7))))),Je.push(Math.max(0,Math.round(ue*Oe*(.7+.3*(tt/7))))),ut.push(Math.max(0,Math.round(be*Oe*(.9+.1*(1-tt/7))))),nt.push(Math.max(0,Math.round(Ie*Oe*(.5+.5*Math.random())))),ke.push(Math.max(0,Math.min(100,Math.round(Je[Je.length-1]/(Ce[Ce.length-1]||1)*100)))),st.push(Math.max(0,Math.round(Y*Oe*(.95+.05*Math.random())))),Xe.push(Math.max(0,Math.round(pe*Oe*(.9+.1*(tt/7))))),Qe.push(Math.max(0,Math.round(Ne*Oe)))}m({totalStudents:we,totalFees:Ce,collectedFees:Je,pendingFees:ut,todayCollections:nt,collectionRate:ke,overduePayments:st,completedPayments:Xe,avgPaymentAmount:Qe})},le=Q=>{const Te=[],ue=new Date,be=ue.getMonth(),Ie=ue.getFullYear();for(let Y=3;Y>=0;Y--){const pe=new Date(ue.getFullYear(),ue.getMonth()-Y,1),Ne=pe.getFullYear()+"-"+String(pe.getMonth()+1).padStart(2,"0"),je=Q.filter(Ce=>{if(!Ce.createdAt)return!1;let Je="";return Ce.createdAt instanceof on?Je=Ce.createdAt.toDate().toISOString().split("T")[0]:Ce.createdAt instanceof Date?Je=Ce.createdAt.toISOString().split("T")[0]:typeof Ce.createdAt=="string"?Je=Ce.createdAt:typeof Ce.createdAt=="number"&&(Je=new Date(Ce.createdAt).toISOString().split("T")[0]),Je.startsWith(Ne)}).reduce((Ce,Je)=>Ce+(parseFloat(Je.amount)||0),0),we=pe.getMonth()===be&&pe.getFullYear()===Ie;Te.push({monthLabel:pe.toLocaleString("en-US",{month:"long",year:"numeric"}),income:je,isCurrent:we})}return Te},ve=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}),me=async()=>{try{await ep(pn),localStorage.removeItem("isLoggedIn"),n("/login")}catch(Q){console.error("Error signing out:",Q)}};X.useEffect(()=>{const Q=Te=>{const{message:ue}=Te.detail;console.log("Success:",ue)};return window.addEventListener("showSuccess",Q),()=>{window.removeEventListener("showSuccess",Q)}},[]),X.useEffect(()=>{const Q=()=>{ee()};return window.addEventListener("dashboardRefresh",Q),()=>{window.removeEventListener("dashboardRefresh",Q)}},[]);const Le=()=>{I?(L.current&&(L.current.classList.remove("open"),L.current.classList.add("closing")),setTimeout(()=>{V(!1)},500)):V(!0)},xe=()=>{if(fn())try{const Q=dn(),Te=Yn(Mn,`users/${Q}/settings/profile`),ue=$v(Te,be=>{if(be.exists()){const Ie=be.data();Ie.firmName&&Ie.firmName.trim()!==""?M(Ie.firmName):M("Your Academy"),Ie.logoUrl&&B(Ie.logoUrl),Ie.firmAddress&&ge(Ie.firmAddress)}else M("Your Academy")});return()=>ue()}catch(Q){console.error("Error loading branding data:",Q)}},[J,M]=X.useState("Your Academy"),[G,B]=X.useState(""),[ae,ge]=X.useState(""),_e=()=>{const Q=r.totalFees>0?r.collectedFees/r.totalFees*100:0,Te=r.totalFees>0?r.pendingFees/r.totalFees*100:0;let ue=0,be=0;w&&w.length>=2&&(ue=w[w.length-1]?.income||0,be=w[w.length-2]?.income||0);const Ie=e==="Administrator"?"admin":"staff";let Y,pe,Ne;return console.log("Smart Suggestion Data:",{collectionRate:Q,pendingPercentage:Te,currentMonthCollected:ue,lastMonthCollected:be,effectiveUserRole:Ie}),Te>25||Q<70?(Y="danger",pe="",Ne="Collections at risk. Pending fees are high. Immediate follow-ups required to protect cash flow."):Te>=15&&Te<=25&&Q>=70&&Q<=85?(Y="warning",pe="",Ne="Collections are stable, but pending dues are increasing. Prioritize follow-ups on high-value pending payments."):(Te<15&&Q>=85,Y="success",pe="",Ne="Collection performance is healthy. Maintain current follow-up consistency."),ue>be&&Q>=80&&(Ne+=" Strong month-on-month growth observed."),Ie==="staff"&&(Y==="danger"?Ne="Urgent: High pending fees require immediate follow-ups.":Y==="warning"?Ne="Monitor pending dues and prioritize follow-ups.":Ne="Collections are healthy. Maintain follow-up consistency.",ue>be&&Q>=80&&(Ne+=" Good month-over-month growth.")),console.log("Generated Smart Suggestion:",{level:Y,icon:pe,message:Ne}),{level:Y,icon:pe,message:Ne}},Ve=()=>{const Q=r.totalFees>0?r.collectedFees/r.totalFees*100:0,Te=r.pendingFees,ue=r.totalFees*.1,be=[];return e==="Administrator"?(Te>0&&(Te>ue?(be.push({text:"Send payment reminders to students with pending dues",priority:"High"}),be.push({text:"Prioritize follow-ups for high-amount pending payments",priority:"High"})):be.push({text:"Monitor pending payments to prevent accumulation",priority:"Medium"})),Q>=75?(be.push({text:"Maintain follow-up consistency to sustain collection performance",priority:"Medium"}),be.push({text:"Consider early reminders to reduce next month's pending fees",priority:"Medium"})):be.push({text:"Review and optimize collection process for better results",priority:"High"}),be.push({text:"Analyze collection trends to identify improvement opportunities",priority:"Medium"})):(Te>0&&(be.push({text:"Call students with pending fees to discuss payment options",priority:"High"}),be.push({text:"Send reminder messages for upcoming payment deadlines",priority:"Medium"})),Q>=75?be.push({text:"Continue regular follow-ups with all assigned accounts",priority:"Medium"}):be.push({text:"Increase frequency of follow-ups for better collections",priority:"High"}),be.push({text:"Update payment records after each successful collection",priority:"Medium"})),be},Me=()=>{const Q=r.totalFees>0?Math.round(r.collectedFees/r.totalFees*1e3)/10:0,Te=Math.round(r.pendingFees).toLocaleString();return`Insight: Collection rate is strong at ${Q}%, but ${Te} is still pending  follow-ups can improve cash flow.`};return l.jsx(eo,{children:l.jsxs("div",{className:"dashboard",children:[l.jsxs("div",{className:"dashboard-header",children:[l.jsx("div",{className:"header-left",children:l.jsxs("div",{className:"app-logo-container",children:[G?l.jsx("img",{src:G,alt:"Academy Logo",className:"app-logo"}):l.jsx("img",{src:"/Logo.png",alt:"Victory Point Academy Fees Manager Logo",className:"app-logo"}),l.jsxs("div",{className:"app-title-container",children:[l.jsxs("h1",{className:"app-name",children:[J," Fees Manager"]}),l.jsxs("div",{className:"app-subtitle",children:[l.jsx("span",{className:"subtitle-text",children:"Managing Fees"}),l.jsx("span",{className:"separator",children:""}),l.jsx("span",{className:"current-month",children:ve()}),l.jsx("span",{className:"separator",children:""}),l.jsxs("span",{className:"status-container",children:[l.jsx("span",{className:"status-dot active"}),l.jsx("span",{className:"status-text",children:"Active"})]})]})]})]})}),l.jsx("div",{className:"header-right",children:l.jsxs("div",{className:"avatar-dropdown",children:[l.jsx("div",{className:"avatar",onClick:()=>F(!T),children:l.jsx("span",{className:"avatar-initials",children:"VP"})}),T&&l.jsxs("div",{className:"dropdown-menu",children:[l.jsx("button",{className:"dropdown-item",onClick:()=>n("/profile"),children:"Profile"}),l.jsx("button",{className:"dropdown-item",onClick:me,children:"Logout"})]})]})})]}),l.jsx("div",{className:"kpi-cards-grid",children:d?l.jsx(bs,{type:"card",count:5}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"kpi-card",children:[l.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:l.jsx("span",{className:"kpi-icon",children:""})}),l.jsxs("div",{className:"kpi-content",children:[l.jsx("div",{className:"kpi-title",children:"Total Students"}),l.jsxs("div",{className:"kpi-value-container",children:[l.jsx("div",{className:"kpi-value",children:o.totalStudents}),l.jsx("div",{className:"kpi-sparkline",children:l.jsx(Uc,{data:p.totalStudents,color:"var(--info-color)"})})]})]}),l.jsx("div",{className:"kpi-trend positive",children:l.jsx("span",{children:" 5.2%"})})]}),l.jsxs("div",{className:"kpi-card total-fees",children:[l.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(28, 200, 138, 0.1)"},children:l.jsx("span",{className:"kpi-icon",children:""})}),l.jsxs("div",{className:"kpi-content",children:[l.jsx("div",{className:"kpi-title",children:"Total Fees Collected"}),l.jsxs("div",{className:"kpi-value-container",children:[l.jsxs("div",{className:"kpi-value",children:["",o.collectedFees.toLocaleString()]}),l.jsx("div",{className:"kpi-sparkline",children:l.jsx(Uc,{data:p.collectedFees,color:"var(--success-color)"})})]}),l.jsx("div",{className:"helper-text",children:"Revenue generated this period"})]}),l.jsx("div",{className:"kpi-trend positive",children:l.jsx("span",{children:" 12.4%"})})]}),l.jsxs("div",{className:"kpi-card pending-fees",children:[l.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(246, 194, 62, 0.1)"},children:l.jsx("span",{className:"kpi-icon",children:""})}),l.jsxs("div",{className:"kpi-content",children:[l.jsx("div",{className:"kpi-title",children:"Pending Fees"}),l.jsxs("div",{className:"kpi-value-container",children:[l.jsxs("div",{className:"kpi-value",children:["",o.pendingFees.toLocaleString()]}),l.jsx("div",{className:"kpi-sparkline",children:l.jsx(Uc,{data:p.pendingFees,color:"var(--warning-color)"})})]}),l.jsx("div",{className:"helper-text",children:"Requires immediate attention"})]}),l.jsx("div",{className:"kpi-trend negative",children:l.jsx("span",{children:" 3.1%"})})]}),l.jsxs("div",{className:"kpi-card",children:[l.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(231, 74, 59, 0.1)"},children:l.jsx("span",{className:"kpi-icon",children:""})}),l.jsxs("div",{className:"kpi-content",children:[l.jsx("div",{className:"kpi-title",children:"Today's Collections"}),l.jsxs("div",{className:"kpi-value-container",children:[l.jsxs("div",{className:"kpi-value",children:["",o.todayCollections.toLocaleString()]}),l.jsx("div",{className:"kpi-sparkline",children:l.jsx(Uc,{data:p.todayCollections,color:"var(--danger-color)"})})]})]}),l.jsx("div",{className:"kpi-trend positive",children:l.jsx("span",{children:" 8.7%"})})]}),l.jsxs("div",{className:"kpi-card collection-rate",children:[l.jsx("div",{className:"kpi-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:l.jsx("span",{className:"kpi-icon",children:""})}),l.jsxs("div",{className:"kpi-content",children:[l.jsx("div",{className:"kpi-title",children:"Collection Rate"}),l.jsxs("div",{className:"kpi-value-container",children:[l.jsxs("div",{className:"kpi-value",children:[o.collectionRate,"%"]}),l.jsx("div",{className:"kpi-sparkline",children:l.jsx(Uc,{data:p.collectionRate,color:"var(--info-color)"})})]}),l.jsx("div",{className:"helper-text",children:"Overall performance indicator"})]}),l.jsx("div",{className:"kpi-trend positive",children:l.jsx("span",{children:" 2.3%"})})]})]})}),l.jsxs("div",{className:"monthly-collections-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Monthly Fee Collections"}),l.jsx("button",{onClick:()=>D(!0),className:"history-button",children:"History"})]}),l.jsx("div",{className:"monthly-cards-container",children:d?l.jsx(bs,{type:"card",count:4}):w.map((Q,Te)=>l.jsxs("div",{className:`monthly-card ${Q.isCurrent?"current-month":""}`,children:[l.jsx("div",{className:"monthly-card-header",children:l.jsx("h3",{children:Q.monthLabel})}),l.jsxs("div",{className:"monthly-card-body",children:[l.jsxs("div",{className:"amount",children:["",Q.income.toLocaleString()]}),l.jsx("div",{className:"description",children:"Collected"}),l.jsx("div",{className:"micro-text",children:Q.isCurrent?"Current active month":Te===0?"Highest this quarter":""})]})]},Te))})]}),l.jsxs("div",{className:"insights-section",children:[l.jsx("button",{className:"insights-toggle-btn",onClick:Le,disabled:d,children:I?"Hide Insights ":"View Insights "}),l.jsx("div",{ref:L,className:`insights-content ${I?"open":"initial"}`,children:I&&!d&&l.jsxs("div",{className:"insights-content-inner",children:[l.jsxs("div",{className:"secondary-stats-grid",children:[l.jsxs("div",{className:"secondary-stat-card",children:[l.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(231, 74, 59, 0.1)"},children:l.jsx("span",{className:"stat-icon",children:""})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("div",{className:"stat-title",children:"Overdue Payments"}),l.jsxs("div",{className:"stat-value-container",children:[l.jsx("div",{className:"stat-value",children:o.overduePayments}),l.jsx("div",{className:"stat-sparkline",children:l.jsx(Uc,{data:p.overduePayments,color:"var(--danger-color)"})})]})]}),l.jsx("div",{className:"stat-trend negative",children:l.jsx("span",{children:" 2.1%"})})]}),l.jsxs("div",{className:"secondary-stat-card",children:[l.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(28, 200, 138, 0.1)"},children:l.jsx("span",{className:"stat-icon",children:""})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("div",{className:"stat-title",children:"Completed Payments"}),l.jsxs("div",{className:"stat-value-container",children:[l.jsx("div",{className:"stat-value",children:o.completedPayments}),l.jsx("div",{className:"stat-sparkline",children:l.jsx(Uc,{data:p.completedPayments,color:"var(--success-color)"})})]})]}),l.jsx("div",{className:"stat-trend positive",children:l.jsx("span",{children:" 7.3%"})})]}),l.jsxs("div",{className:"secondary-stat-card",children:[l.jsx("div",{className:"stat-icon-container",style:{backgroundColor:"rgba(78, 115, 223, 0.1)"},children:l.jsx("span",{className:"stat-icon",children:""})}),l.jsxs("div",{className:"stat-content",children:[l.jsx("div",{className:"stat-title",children:"Average Payment Amount"}),l.jsxs("div",{className:"stat-value-container",children:[l.jsxs("div",{className:"stat-value",children:["",o.avgPaymentAmount.toLocaleString()]}),l.jsx("div",{className:"stat-sparkline",children:l.jsx(Uc,{data:p.avgPaymentAmount,color:"var(--info-color)"})})]})]}),l.jsx("div",{className:"stat-trend positive",children:l.jsx("span",{children:" 1.8%"})})]})]}),l.jsxs("div",{className:"charts-section",children:[l.jsxs("div",{className:"analytics-panel",style:{flex:"1 1 45%"},children:[l.jsxs("div",{className:"analytics-header",children:[l.jsx("h2",{className:"panel-title",children:"Fees Analytics"}),l.jsx("p",{className:"panel-subtext",children:"Distribution overview"})]}),l.jsx("div",{className:"analytics-content",style:{flexDirection:"column"},children:l.jsxs("div",{className:"analytics-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{className:"section-title",children:"Fee Distribution"}),l.jsx("p",{className:"section-subtitle",children:"Collected vs pending fees"})]}),l.jsx(i8,{data:x}),l.jsxs("div",{className:"combined-insight-bar",children:[l.jsx("span",{className:"insight-icon",children:""}),l.jsx("span",{className:"insight-text",children:Me()})]})]})})]}),l.jsxs("div",{className:"analytics-panel",style:{flex:"1 1 45%",position:"relative"},children:[l.jsxs("div",{className:"analytics-header",children:[l.jsx("h2",{className:"panel-title",children:"Monthly Fee Performance"}),l.jsx("p",{className:"panel-subtext",children:"Collected vs pending fees by month"})]}),l.jsx("div",{className:"analytics-content",style:{flexDirection:"row",gap:"20px"},children:l.jsxs("div",{className:"analytics-section",style:{flex:"1"},children:[l.jsx(o8,{data:k,width:"100%",height:300}),l.jsxs("button",{className:"view-trend-button",onClick:()=>n("/collection-trend"),disabled:!0,style:{position:"absolute",top:"60px",right:"20px",margin:"0",padding:"0",fontSize:"0.85rem",minWidth:"auto",borderRadius:"6px",width:"81.81px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",opacity:.6,cursor:"not-allowed"},children:[l.jsx("span",{children:"Trend"}),l.jsx("span",{className:"button-icon",style:{marginLeft:"4px"},children:""})]}),!d&&(()=>{const Q=_e();return l.jsxs("div",{className:"combined-insight-bar",style:{marginTop:"15px",...Q.level==="danger"?{borderLeft:"4px solid #e74c3c",backgroundColor:"rgba(231, 76, 60, 0.05)"}:Q.level==="warning"?{borderLeft:"4px solid #f39c12",backgroundColor:"rgba(243, 156, 18, 0.05)"}:Q.level==="success"?{borderLeft:"4px solid #28a745",backgroundColor:"rgba(40, 167, 69, 0.05)"}:{borderLeft:"4px solid #3498db",backgroundColor:"rgba(52, 152, 219, 0.05)"}},children:[l.jsx("span",{className:"insight-icon",children:Q.icon}),l.jsxs("div",{children:[l.jsx("div",{className:"insight-title",style:{fontWeight:"600",marginBottom:"5px",color:"#1A1A1A"},children:"Smart Suggestion"}),l.jsxs("div",{className:"insight-text",children:["Suggestion: ",Q.message]})]})]})})(),!d&&Ve().length>0&&l.jsxs("div",{className:"combined-insight-bar",style:{marginTop:"15px",background:"#f8fafc",borderRadius:"12px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.06)",border:"1px solid rgba(0, 0, 0, 0.03)"},children:[l.jsx("div",{className:"insight-title",style:{fontWeight:"600",marginBottom:"12px",color:"#1A1A1A",fontSize:"1.1rem"},children:"Action Suggestions"}),l.jsx("ul",{style:{paddingLeft:"20px",margin:"0",fontSize:"0.95rem"},children:Ve().map((Q,Te)=>l.jsxs("li",{style:{marginBottom:"8px",fontWeight:Q.priority==="High"?"600":"normal",color:Q.priority==="High"?"#e74c3c":"#2c3e50"},children:[l.jsx("span",{style:{marginRight:"8px"},children:Q.priority==="High"?"":Q.priority==="Medium"?"":""}),Q.text]},Te))})]})]})})]})]}),l.jsx("div",{className:"profit-loss-section",children:l.jsx(l8,{totalFees:r.totalFees,collectedFees:r.collectedFees})})]})})]}),H&&l.jsx(c8,{onClose:()=>D(!1)})]})})};class h8{constructor(){this.studentsKey="feesManagementStudents",this.paymentsKey="feesManagementPayments",this.useFirebase=!0}enableFirebase(){this.useFirebase=!0}disableFirebase(){this.useFirebase=!1}isFirebaseEnabled(){return this.useFirebase}async getStudents(){if(this.useFirebase&&fn())try{return await Mg()}catch(e){throw console.warn("Failed to get students from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async saveStudents(e){console.warn("saveStudents is deprecated - Firebase handles persistence automatically");try{for(const t of e)if(t.id)try{await cf(t.id,t)}catch(r){console.error("Error updating student in Firebase:",r)}}catch(t){console.error("Error saving students to Firebase:",t)}}async getStudentById(e){try{const t=await this.getStudents();let r=t.find(i=>i.studentId==e);return r||(r=t.find(i=>i.id==e)),!r&&typeof e=="string"&&/^\d+$/.test(e)&&(r=t.find(i=>i.id==parseInt(e)||i.studentId==parseInt(e))),r||null}catch(t){return console.error("Error getting student by ID:",t),null}}async addStudent(e){try{if(this.useFirebase&&fn())try{const t=parseFloat(e.totalFees)||0,r=parseFloat(e.feesPaid)||0,i=parseFloat(e.feesDue)!==void 0?parseFloat(e.feesDue):t-r,o={...e,studentId:e.studentId||`STD${String(Date.now()).slice(-4)}`,totalFees:t,feesPaid:r,feesDue:i,feesStructure:e.feesStructure||this.getDefaultFeeStructure(i),reminderEnabled:e.reminderEnabled!==void 0?e.reminderEnabled:!0,lastReminderSent:e.lastReminderSent||null,createdAt:on.now(),updatedAt:on.now(),ownerId:dn()};delete o.id;const u=await ML(o);return window.dispatchEvent(new Event("studentsUpdated")),u}catch(t){throw console.warn("Failed to add student to Firebase:",t),new Error(`Failed to add student to Firebase: ${t.message||"Unknown error occurred"}`)}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}catch(t){throw console.error("Error adding student:",t),t}}getDefaultFeeStructure(e){return e>=1500?"Annual":e>=500?"Quarterly":e>0?"Monthly":"Not Set"}async updateStudent(e){try{if(console.log("=== UPDATE STUDENT FUNCTION START ==="),console.log("Received student data:",JSON.parse(JSON.stringify(e))),this.useFirebase&&fn())try{console.log("Using Firebase for update");const t=isNaN(parseFloat(e.totalFees))?0:parseFloat(e.totalFees),r=isNaN(parseFloat(e.feesPaid))?0:parseFloat(e.feesPaid),i=isNaN(parseFloat(e.feesDue))?t-r:parseFloat(e.feesDue);console.log("Parsed numeric values:",{totalFees:t,feesPaid:r,feesDue:i});let o=e.feesStructure;o||(o=this.getDefaultFeeStructure(i)),console.log("Determined feesStructure:",o);const u={name:e.name||"",class:e.class||"",totalFees:t,feesPaid:r,feesDue:i,feesStructure:o,contact:e.contact||"",email:e.email||"",address:e.address||"",fatherName:e.fatherName||"",motherName:e.motherName||"",status:e.status||"Not Started",studentId:e.studentId||e.id,reminderEnabled:e.reminderEnabled!==void 0?e.reminderEnabled:!0,lastReminderSent:e.lastReminderSent||null,updatedAt:on.now(),ownerId:dn()};e.photoURL&&(u.photoURL=e.photoURL),e.createdAt&&(u.createdAt=e.createdAt),e.reminderEnabled!==void 0&&(u.reminderEnabled=e.reminderEnabled),e.lastReminderSent&&(u.lastReminderSent=e.lastReminderSent),console.log("Prepared student data for Firebase:",u);let d=e.id;if(console.log("Student ID for update:",d,"Type:",typeof d),d&&typeof d=="number"&&d>1e12){console.log("Potential ID mismatch detected - ID looks like timestamp");try{const p=await this.getStudents();console.log("All students for ID matching:",p);const m=p.find(w=>w.studentId===e.studentId||w.name===e.name&&w.class===e.class);m?(console.log("Found matching student with correct ID:",m.id),d=m.id):console.log("No matching student found, using original ID")}catch(p){console.error("Error fetching students for ID matching:",p)}}if(!d){const p=new Error("Student ID is required for update");throw console.error("Validation error:",p.message),p}console.log("Updating student with ID:",d,"and data:",u);const h=await cf(d,u);return console.log("Firebase update result:",h),console.log("Dispatching studentsUpdated event"),window.dispatchEvent(new Event("studentsUpdated")),console.log("Dispatching studentUpdated event"),window.dispatchEvent(new CustomEvent("studentUpdated",{detail:{student:h}})),console.log("=== UPDATE STUDENT FUNCTION END SUCCESS ==="),h}catch(t){throw console.error("Failed to update student in Firebase:",t),console.error("Error stack:",t.stack),new Error(`Failed to update student: ${t.message}`)}else{const t=new Error("Firebase is required - localStorage fallback removed");throw console.error("Firebase not enabled:",t.message),t}}catch(t){throw console.error("Error updating student:",t),console.error("Error stack:",t.stack),new Error(`Error updating student: ${t.message}`)}}async deleteStudent(e){if(this.useFirebase&&fn())try{const r=(await this.getPayments()).filter(i=>i.studentId==e);for(const i of r)try{await _w(i.id)}catch(o){console.warn(`Failed to delete payment ${i.id} for student ${e}:`,o)}return await BL(e),window.dispatchEvent(new Event("studentsUpdated")),e}catch(t){throw console.warn("Failed to delete student from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}removeAllStudents(){throw new Error("removeAllStudents is deprecated - use Firebase console to clear data")}async getPayments(){if(this.useFirebase&&fn())try{const e=await lp(),t=new Date;let r=!1;return e.map(o=>{if(o.status==="pending"&&o.dueDate){let u;if(o.dueDate instanceof on?u=o.dueDate.toDate():typeof o.dueDate=="string"?o.dueDate.includes("/")?u=new Date(o.dueDate.split("/").reverse().join("-")):u=new Date(o.dueDate):o.dueDate instanceof Date&&(u=o.dueDate),u instanceof Date&&!isNaN(u)&&u<t){const d=o.createdAt?o.createdAt instanceof on?o.createdAt.toDate():new Date(o.createdAt):new Date,h=new Date(t.getTime()-6e4);if(d<=h)return r=!0,{...o,status:"overdue"}}}return o})}catch(e){throw console.warn("Failed to get payments from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}savePayments(e){console.warn("savePayments is deprecated - Firebase handles persistence automatically")}async addPayment(e){try{const t=await this.getStudentById(e.studentId);if(!t)throw new Error(`Student with ID "${e.studentId}" not found. Please add the student first.`);const r={...e,id:`PAY${Date.now()}`,studentId:e.studentId,studentName:t.name,studentClass:t.class,studentContact:t.contact,status:"pending",paidDate:null,method:null,receipt:null,amount:parseFloat(e.amount)||0,createdAt:on.now(),ownerId:dn()};console.log("Adding new payment:",r);const i=await aA(r);return console.log("Payment added result:",i),await this.updateStudentFees(r.studentId,0),window.dispatchEvent(new CustomEvent("paymentAdded",{detail:{payment:i}})),i}catch(t){throw console.error("Error adding payment:",t),t}}async recordPayment(e,t){try{const r=await this.getPayments(),i=r.findIndex(o=>o.id==e);if(i!==-1){const o=r[i];console.log("Recording payment:",o);const u={...o,status:"paid",paidDate:on.now(),method:t,receipt:`RCT-${Date.now()}`,amount:parseFloat(o.amount)||0};console.log("Updated payment:",u);const d=await A1(e,u);return console.log("Payment update result:",d),await new Promise(h=>setTimeout(h,100)),await this.updateStudentFees(u.studentId,u.amount),window.dispatchEvent(new CustomEvent("paymentRecorded",{detail:{payment:d}})),window.dispatchEvent(new Event("studentsUpdated")),d}return null}catch(r){throw console.error("Error recording payment:",r),r}}async updatePayment(e){try{const t={...e,amount:parseFloat(e.amount)||0},r=await A1(e.id,t);return await this.updateStudentFees(e.studentId,0),await this.bidirectionalSync("payment",e.id),window.dispatchEvent(new CustomEvent("paymentUpdated",{detail:{payment:r}})),r}catch(t){throw console.error("Error updating payment:",t),t}}async deletePayment(e){if(this.useFirebase&&fn())try{return await _w(e),e}catch(t){throw console.error("Failed to delete payment from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStudentFees(e,t){try{await new Promise(R=>setTimeout(R,50));const r=await this.getStudents(),i=await this.getPayments(),o=await this.getStudentById(e);if(!o)return console.warn(`Student with ID ${e} not found for fee update`),null;const u=r.findIndex(R=>R.id==o.id||R.studentId==o.studentId);if(u===-1)return console.warn(`Student index not found for ID ${e}`),null;const d=i.filter(R=>R.studentId==e);let h=0,p=0,m=0;d.forEach(R=>{const C=parseFloat(R.amount)||0;if(C>0)switch(R.status){case"paid":h+=C;break;case"pending":p+=C;break;case"overdue":m+=C;break;default:p+=C}});const w=parseFloat(o.totalFees)||0,_=h+p+m,x={...o,feesPaid:h,feesDue:Math.max(0,w-h),totalFees:w};if(o.feesPaid!==x.feesPaid||o.feesDue!==x.feesDue||o.totalFees!==x.totalFees){console.log(`Updating student fees for ${e}:`,x);const R=await cf(o.id,x);return console.log(`Student fees update result for ${e}:`,R),r[u]=x,console.log(`Student fees updated for ${e}: Paid=${h}, Due=${x.feesDue}`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:JSON.stringify(r)})),window.dispatchEvent(new Event("studentsUpdated")),R}return console.log(`No fee changes for student ${e}`),o}catch(r){throw console.error("Error updating student fees:",r),r}}async getPaymentStatistics(){try{const e=await this.getPayments(),t=await this.getStudents(),r=e.filter(x=>x&&x.amount!==void 0&&x.amount!==null&&!isNaN(parseFloat(x.amount)));let i=0,o=0,u=0,d=0;r.forEach(x=>{const A=parseFloat(x.amount)||0;if(A>0)switch(x.status){case"paid":i+=A;break;case"pending":o+=A;break;case"overdue":u+=A;break;default:o+=A}});let h=0,p=0,m=0;t.forEach(x=>{const A=parseFloat(x.feesPaid)||0,R=parseFloat(x.feesDue)||0,C=A+R;p+=A,h+=R,m+=C,C>0&&d++});const w=i+o+u,_=p+h;return{totalStudents:t.length,totalStudentsWithPayments:d,totalCollected:i,totalPending:o,totalOverdue:u,totalStudentPending:h,totalStudentPaid:p,totalStudentFees:m,paymentBasedTotal:w,studentBasedTotal:_,consistencyCheck:{paymentTotal:w,studentTotal:_,difference:Math.abs(w-_)}}}catch(e){return console.error("Error getting payment statistics:",e),{totalStudents:0,totalStudentsWithPayments:0,totalCollected:0,totalPending:0,totalOverdue:0,totalStudentPending:0,totalStudentPaid:0,totalStudentFees:0,paymentBasedTotal:0,studentBasedTotal:0,consistencyCheck:{paymentTotal:0,studentTotal:0,difference:0}}}}async recalculateAllStudentFees(){try{console.log("Recalculating all student fees...");const e=await this.getStudents(),t=await this.getPayments(),r={};t.forEach(o=>{o.studentId&&(r[o.studentId]||(r[o.studentId]=[]),r[o.studentId].push(o))});let i=0;for(const o of e){const u=o.studentId||o.id,d=r[u]||[];let h=0,p=0,m=0;d.forEach(R=>{const C=parseFloat(R.amount)||0;if(C>0)switch(R.status){case"paid":h+=C;break;case"pending":p+=C;break;case"overdue":m+=C;break;default:p+=C}});const w=parseFloat(o.totalFees)||0,_=h+p+m,x={...o,feesPaid:h,feesDue:Math.max(0,w-h),totalFees:w};if(o.feesPaid!==x.feesPaid||o.feesDue!==x.feesDue||o.totalFees!==x.totalFees)try{await cf(o.id,x),i++,console.log(`Updated fees for student ${u}: Paid=${h}, Due=${x.feesDue}`)}catch(R){console.error(`Error updating fees for student ${u}:`,R)}}return i>0?(console.log(`Recalculated fees for ${i} students`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:Date.now().toString()})),window.dispatchEvent(new Event("studentsUpdated")),{success:!0,studentsUpdated:i,totalStudents:e.length}):(console.log("No fee changes needed for any students"),{success:!0,studentsUpdated:0,totalStudents:e.length})}catch(e){throw console.error("Error recalculating all student fees:",e),e}}async syncStudentDataToPayments(e){try{console.log(`Syncing student data to payments for student ID: ${e}`);const t=await this.getStudentById(e);if(!t){console.warn(`Student with ID ${e} not found for sync`);return}const r=await this.getPayments();let i=0;const o=r.map(u=>{if(u.studentId===e){const d={...u,studentName:t.name,studentClass:t.class,studentContact:t.contact};return JSON.stringify(u)!==JSON.stringify(d)&&i++,d}return u});return i>0&&(this.savePayments(o),console.log(`Updated ${i} payments with student information`),window.dispatchEvent(new StorageEvent("storage",{key:this.paymentsKey,newValue:JSON.stringify(o)}))),i}catch(t){throw console.error("Error syncing student data to payments:",t),t}}async syncPaymentDataToStudents(e){try{console.log(`Syncing payment data to students for payment ID: ${e}`);const r=(await this.getPayments()).find(o=>o.id===e);if(!r){console.warn(`Payment with ID ${e} not found for sync`);return}return await this.updateStudentFees(r.studentId,0)}catch(t){throw console.error("Error syncing payment data to students:",t),t}}async updateStudentFeesAfterPaymentUpdate(e,t){try{const r=await this.getStudents(),i=await this.getStudentById(e);if(!i)return console.warn(`Student with ID ${e} not found for fee update`),null;if(r.findIndex(A=>A.id==i.id||A.studentId==i.studentId)===-1)return console.warn(`Student index not found for ID ${e}`),null;const d=(await this.getPayments()).filter(A=>A.studentId==e);let h=0,p=0,m=0;d.forEach(A=>{const R=parseFloat(A.amount)||0;if(R>0)switch(A.status){case"paid":h+=R;break;case"pending":p+=R;break;case"overdue":m+=R;break;default:p+=R}});const w=h+p+m,_={...i,feesPaid:h,feesDue:p+m,totalFees:w};if(i.feesPaid!==_.feesPaid||i.feesDue!==_.feesDue||i.totalFees!==_.totalFees){const A=await cf(i.id,_);return console.log(`Student fees updated for ${e}: Paid=${h}, Due=${p+m}`),window.dispatchEvent(new StorageEvent("storage",{key:this.studentsKey,newValue:JSON.stringify(r)})),window.dispatchEvent(new Event("studentsUpdated")),A}return console.log(`No fee changes for student ${e}`),i}catch(r){return console.error("Error updating student fees after payment update:",r),null}}async bidirectionalSync(e,t){try{switch(console.log(`Performing bidirectional sync for ${e} with ID: ${t}`),e){case"student":await this.syncStudentDataToPayments(t);break;case"payment":await this.syncPaymentDataToStudents(t);break;default:console.warn(`Unknown entity type for bidirectional sync: ${e}`)}}catch(r){throw console.error("Error in bidirectional sync:",r),r}}async syncAllData(){try{console.log("Starting comprehensive data synchronization...");const e=await this.getStudents(),t=await this.getPayments();console.log(`Found ${e.length} students and ${t.length} payments`);const r={};e.forEach(h=>{r[h.studentId||h.id]=h});let i=0,o=0;const u=t.map(h=>{const p=r[h.studentId];if(p){const m={...h,studentName:p.name,studentClass:p.class,studentContact:p.contact};if(JSON.stringify(h)!==JSON.stringify(m))return i++,m}return h});return i>0&&(this.savePayments(u),console.log(`Updated ${i} payments with student information`)),o=(await this.recalculateAllStudentFees()).studentsUpdated,(i>0||o>0)&&window.dispatchEvent(new StorageEvent("storage",{key:"feesManagementSync",newValue:Date.now().toString()})),console.log("Comprehensive data synchronization completed successfully"),{paymentsUpdated:i,studentsUpdated:o,totalPayments:u.length,totalStudents:e.length}}catch(e){throw console.error("Error in comprehensive data synchronization:",e),e}}async getStaff(){if(this.useFirebase&&fn())try{const e=await QL();return console.log("Fetched staff from Firebase:",e),e}catch(e){throw console.error("Failed to get staff from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addStaff(e){if(this.useFirebase&&fn())try{const t={...e,staffId:e.staffId||`STF${String(Date.now()).slice(-4)}`,createdAt:e.createdAt||new Date().toISOString(),ownerId:dn()};delete t.id;const r=await XL(t);return console.log("Staff added result:",r),window.dispatchEvent(new Event("staffUpdated")),r}catch(t){throw console.error("Failed to add staff to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStaff(e){if(this.useFirebase&&fn())try{const t=await JL(e.id,e);return console.log("Staff update result:",t),window.dispatchEvent(new Event("staffUpdated")),t}catch(t){throw console.error("Failed to update staff in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteStaff(e){if(this.useFirebase&&fn())try{return await ZL(e),window.dispatchEvent(new Event("staffDeleted")),e}catch(t){throw console.error("Failed to delete staff from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getStaffAttendance(){if(this.useFirebase&&fn())try{const e=await t8();return console.log("Fetched staff attendance from Firebase:",e),e}catch(e){throw console.error("Failed to get staff attendance from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addStaffAttendance(e){if(this.useFirebase&&fn())try{const t=await e8(e);return console.log("Staff attendance added result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to add staff attendance to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateStaffAttendance(e){if(this.useFirebase&&fn())try{if(!e||!e.id)throw new Error("Valid attendance record with ID is required for update operation");const t=await n8(e.id,e);return console.log("Staff attendance update result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to update staff attendance in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteStaffAttendance(e){if(this.useFirebase&&fn())try{if(!e)throw new Error("Valid attendance ID is required for delete operation");return await r8(e),window.dispatchEvent(new Event("attendanceDeleted")),e}catch(t){throw console.error("Failed to delete staff attendance from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getAttendance(){if(this.useFirebase&&fn())try{const e=await $L();return console.log("Fetched attendance from Firebase:",e),e}catch(e){throw console.error("Failed to get attendance from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addAttendance(e){if(this.useFirebase&&fn())try{const t=await HL(e);return console.log("Attendance added result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to add attendance to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateAttendance(e){if(this.useFirebase&&fn())try{const t=await GL(e.id,e);return console.log("Attendance update result:",t),window.dispatchEvent(new Event("attendanceUpdated")),t}catch(t){throw console.error("Failed to update attendance in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteAttendance(e){if(this.useFirebase&&fn())try{return await WL(e),window.dispatchEvent(new Event("attendanceDeleted")),e}catch(t){throw console.error("Failed to delete attendance from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getExpenditures(){if(this.useFirebase&&fn())try{return await t2()}catch(e){throw console.warn("Failed to get expenditures from Firebase:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async addExpenditure(e){if(this.useFirebase&&fn())try{const t=await VL(e);return console.log("Expenditure added result:",t),window.dispatchEvent(new Event("expenditureUpdated")),t}catch(t){throw console.error("Failed to add expenditure to Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async updateExpenditure(e){if(this.useFirebase&&fn())try{const t=await zL(e.id,e);return console.log("Expenditure update result:",t),window.dispatchEvent(new Event("expenditureUpdated")),t}catch(t){throw console.error("Failed to update expenditure in Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async deleteExpenditure(e){if(this.useFirebase&&fn())try{return await qL(e),window.dispatchEvent(new Event("expenditureDeleted")),e}catch(t){throw console.error("Failed to delete expenditure from Firebase:",t),t}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getFeedback(){if(this.useFirebase)try{return await OL()}catch(e){throw console.error("DataManager: Error fetching feedback:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}async getSupportQueries(){if(this.useFirebase)try{return await UL()}catch(e){throw console.error("DataManager: Error fetching support queries:",e),e}else throw new Error("Firebase is required for multi-tenancy - localStorage fallback removed")}}const Fn=new h8,f8="modulepreload",p8=function(n,e){return new URL(n,e).href},Aw={},$u=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let p=function(m){return Promise.all(m.map(w=>Promise.resolve(w).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),h=d?.nonce||d?.getAttribute("nonce");i=p(t.map(m=>{if(m=p8(m,r),m in Aw)return;Aw[m]=!0;const w=m.endsWith(".css"),_=w?'[rel="stylesheet"]':"";if(r)for(let A=u.length-1;A>=0;A--){const R=u[A];if(R.href===m&&(!w||R.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${m}"]${_}`))return;const x=document.createElement("link");if(x.rel=w?"stylesheet":f8,w||(x.as="script"),x.crossOrigin="",x.href=m,h&&x.setAttribute("nonce",h),document.head.appendChild(x),w)return new Promise((A,R)=>{x.addEventListener("load",A),x.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return i.then(u=>{for(const d of u||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})};function rr(n){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(n)}var Co=Uint8Array,Ia=Uint16Array,r2=Int32Array,s2=new Co([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i2=new Co([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Tw=new Co([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uA=function(n,e){for(var t=new Ia(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new r2(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},dA=uA(s2,2),m8=dA.b,T1=dA.r;m8[28]=258,T1[258]=28;var g8=uA(i2,0),jw=g8.r,j1=new Ia(32768);for(var _r=0;_r<32768;++_r){var Bc=(_r&43690)>>1|(_r&21845)<<1;Bc=(Bc&52428)>>2|(Bc&13107)<<2,Bc=(Bc&61680)>>4|(Bc&3855)<<4,j1[_r]=((Bc&65280)>>8|(Bc&255)<<8)>>1}var Tf=(function(n,e,t){for(var r=n.length,i=0,o=new Ia(e);i<r;++i)n[i]&&++o[n[i]-1];var u=new Ia(e);for(i=1;i<e;++i)u[i]=u[i-1]+o[i-1]<<1;var d;if(t){d=new Ia(1<<e);var h=15-e;for(i=0;i<r;++i)if(n[i])for(var p=i<<4|n[i],m=e-n[i],w=u[n[i]-1]++<<m,_=w|(1<<m)-1;w<=_;++w)d[j1[w]>>h]=p}else for(d=new Ia(r),i=0;i<r;++i)n[i]&&(d[i]=j1[u[n[i]-1]++]>>15-n[i]);return d}),rd=new Co(288);for(var _r=0;_r<144;++_r)rd[_r]=8;for(var _r=144;_r<256;++_r)rd[_r]=9;for(var _r=256;_r<280;++_r)rd[_r]=7;for(var _r=280;_r<288;++_r)rd[_r]=8;var rg=new Co(32);for(var _r=0;_r<32;++_r)rg[_r]=5;var y8=Tf(rd,9,0),v8=Tf(rg,5,0),hA=function(n){return(n+7)/8|0},b8=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Co(n.subarray(e,t))},ql=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},uf=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},_y=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:pA,l:0};if(i==1){var u=new Co(t[0].s+1);return u[t[0].s]=1,{t:u,l:1}}t.sort(function(oe,ce){return oe.f-ce.f}),t.push({s:-1,f:25001});var d=t[0],h=t[1],p=0,m=1,w=2;for(t[0]={s:-1,f:d.f+h.f,l:d,r:h};m!=i-1;)d=t[t[p].f<t[w].f?p++:w++],h=t[p!=m&&t[p].f<t[w].f?p++:w++],t[m++]={s:-1,f:d.f+h.f,l:d,r:h};for(var _=o[0].s,r=1;r<i;++r)o[r].s>_&&(_=o[r].s);var x=new Ia(_+1),A=C1(t[m-1],x,0);if(A>e){var r=0,R=0,C=A-e,k=1<<C;for(o.sort(function(ce,H){return x[H.s]-x[ce.s]||ce.f-H.f});r<i;++r){var q=o[r].s;if(x[q]>e)R+=k-(1<<A-x[q]),x[q]=e;else break}for(R>>=C;R>0;){var $=o[r].s;x[$]<e?R-=1<<e-x[$]++-1:++r}for(;r>=0&&R;--r){var z=o[r].s;x[z]==e&&(--x[z],++R)}A=e}return{t:new Co(x),l:A}},C1=function(n,e,t){return n.s==-1?Math.max(C1(n.l,e,t+1),C1(n.r,e,t+1)):e[n.s]=t},Cw=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Ia(++e),r=0,i=n[0],o=1,u=function(h){t[r++]=h},d=1;d<=e;++d)if(n[d]==i&&d!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)u(32754);o>2&&(u(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(u(i),--o;o>6;o-=6)u(8304);o>2&&(u(o-3<<5|8208),o=0)}for(;o--;)u(i);o=1,i=n[d]}return{c:t.subarray(0,r),n:e}},df=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},fA=function(n,e,t){var r=t.length,i=hA(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},Rw=function(n,e,t,r,i,o,u,d,h,p,m){ql(e,m++,t),++i[256];for(var w=_y(i,15),_=w.t,x=w.l,A=_y(o,15),R=A.t,C=A.l,k=Cw(_),q=k.c,$=k.n,z=Cw(R),oe=z.c,ce=z.n,H=new Ia(19),D=0;D<q.length;++D)++H[q[D]&31];for(var D=0;D<oe.length;++D)++H[oe[D]&31];for(var I=_y(H,7),V=I.t,T=I.l,F=19;F>4&&!V[Tw[F-1]];--F);var L=p+5<<3,ee=df(i,rd)+df(o,rg)+u,ye=df(i,_)+df(o,R)+u+14+3*F+df(H,V)+2*H[16]+3*H[17]+7*H[18];if(h>=0&&L<=ee&&L<=ye)return fA(e,m,n.subarray(h,h+p));var le,ve,me,Le;if(ql(e,m,1+(ye<ee)),m+=2,ye<ee){le=Tf(_,x,0),ve=_,me=Tf(R,C,0),Le=R;var xe=Tf(V,T,0);ql(e,m,$-257),ql(e,m+5,ce-1),ql(e,m+10,F-4),m+=14;for(var D=0;D<F;++D)ql(e,m+3*D,V[Tw[D]]);m+=3*F;for(var J=[q,oe],M=0;M<2;++M)for(var G=J[M],D=0;D<G.length;++D){var B=G[D]&31;ql(e,m,xe[B]),m+=V[B],B>15&&(ql(e,m,G[D]>>5&127),m+=G[D]>>12)}}else le=y8,ve=rd,me=v8,Le=rg;for(var D=0;D<d;++D){var ae=r[D];if(ae>255){var B=ae>>18&31;uf(e,m,le[B+257]),m+=ve[B+257],B>7&&(ql(e,m,ae>>23&31),m+=s2[B]);var ge=ae&31;uf(e,m,me[ge]),m+=Le[ge],ge>3&&(uf(e,m,ae>>5&8191),m+=i2[ge])}else uf(e,m,le[ae]),m+=ve[ae]}return uf(e,m,le[256]),m+ve[256]},x8=new r2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),pA=new Co(0),w8=function(n,e,t,r,i,o){var u=o.z||n.length,d=new Co(r+u+5*(1+Math.ceil(u/7e3))+i),h=d.subarray(r,d.length-i),p=o.l,m=(o.r||0)&7;if(e){m&&(h[0]=o.r>>3);for(var w=x8[e-1],_=w>>13,x=w&8191,A=(1<<t)-1,R=o.p||new Ia(32768),C=o.h||new Ia(A+1),k=Math.ceil(t/3),q=2*k,$=function(Ie){return(n[Ie]^n[Ie+1]<<k^n[Ie+2]<<q)&A},z=new r2(25e3),oe=new Ia(288),ce=new Ia(32),H=0,D=0,I=o.i||0,V=0,T=o.w||0,F=0;I+2<u;++I){var L=$(I),ee=I&32767,ye=C[L];if(R[ee]=ye,C[L]=ee,T<=I){var le=u-I;if((H>7e3||V>24576)&&(le>423||!p)){m=Rw(n,h,0,z,oe,ce,D,V,F,I-F,m),V=H=D=0,F=I;for(var ve=0;ve<286;++ve)oe[ve]=0;for(var ve=0;ve<30;++ve)ce[ve]=0}var me=2,Le=0,xe=x,J=ee-ye&32767;if(le>2&&L==$(I-J))for(var M=Math.min(_,le)-1,G=Math.min(32767,I),B=Math.min(258,le);J<=G&&--xe&&ee!=ye;){if(n[I+me]==n[I+me-J]){for(var ae=0;ae<B&&n[I+ae]==n[I+ae-J];++ae);if(ae>me){if(me=ae,Le=J,ae>M)break;for(var ge=Math.min(J,ae-2),_e=0,ve=0;ve<ge;++ve){var Ve=I-J+ve&32767,Me=R[Ve],Q=Ve-Me&32767;Q>_e&&(_e=Q,ye=Ve)}}}ee=ye,ye=R[ee],J+=ee-ye&32767}if(Le){z[V++]=268435456|T1[me]<<18|jw[Le];var Te=T1[me]&31,ue=jw[Le]&31;D+=s2[Te]+i2[ue],++oe[257+Te],++ce[ue],T=I+me,++H}else z[V++]=n[I],++oe[n[I]]}}for(I=Math.max(I,T);I<u;++I)z[V++]=n[I],++oe[n[I]];m=Rw(n,h,p,z,oe,ce,D,V,F,I-F,m),p||(o.r=m&7|h[m/8|0]<<3,m-=7,o.h=C,o.p=R,o.i=I,o.w=T)}else{for(var I=o.w||0;I<u+p;I+=65535){var be=I+65535;be>=u&&(h[m/8|0]=p,be=u),m=fA(h,m+1,n.subarray(I,be))}o.i=u}return b8(d,0,r+hA(m)+i)},mA=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,u=0;u!=o;){for(var d=Math.min(u+2655,o);u<d;++u)i+=r+=t[u];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},S8=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),u=new Co(o.length+n.length);u.set(o),u.set(n,o.length),n=u,i.w=o.length}return w8(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},gA=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},_8=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=mA();i.p(e.dictionary),gA(n,2,i.d())}};function R1(n,e){e||(e={});var t=mA();t.p(n);var r=S8(n,e,e.dictionary?6:2,4);return _8(r,e),gA(r,r.length-4,t.d()),r}var E8=typeof TextDecoder<"u"&&new TextDecoder,N8=0;try{E8.decode(pA,{stream:!0}),N8=1}catch{}function A8(n){if(Array.isArray(n))return n}function T8(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,o,u,d=[],h=!0,p=!1;try{if(o=(t=t.call(n)).next,e!==0)for(;!(h=(r=o.call(t)).done)&&(d.push(r.value),d.length!==e);h=!0);}catch(m){p=!0,i=m}finally{try{if(!h&&t.return!=null&&(u=t.return(),Object(u)!==u))return}finally{if(p)throw i}}return d}}function Iw(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function j8(n,e){if(n){if(typeof n=="string")return Iw(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Iw(n,e):void 0}}function C8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kw(n,e){return A8(n)||T8(n,e)||j8(n,e)||C8()}function Dw(n,e="utf8"){return new TextDecoder(e).decode(n)}const R8=new TextEncoder;function I8(n){return R8.encode(n)}const k8=1024*8,D8=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),Ey={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class a2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=k8,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=t.offset?t.offset>>>0:0,o=e.byteLength-i;let u=i;(ArrayBuffer.isView(e)||e instanceof a2)&&(e.byteLength!==e.buffer.byteLength&&(u=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=o:this.lastWrittenByte=0,this.buffer=e,this.length=o,this.byteLength=o,this.byteOffset=u,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,u,o),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=Ey[t].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,o=this.buffer.slice(i,i+r);if(this.littleEndian===D8&&t!=="uint8"&&t!=="int8"){const d=new Uint8Array(this.buffer.slice(i,i+r));d.reverse();const h=new Ey[t](d.buffer);return this.offset+=r,h.reverse(),h}const u=new Ey[t](o);return this.offset+=r,u}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return Dw(this.readBytes(e))}decodeText(e=1,t="utf8"){return Dw(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(I8(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sh(n){let e=n.length;for(;--e>=0;)n[e]=0}const P8=3,L8=258,yA=29,F8=256,M8=F8+1+yA,vA=30,O8=512,U8=new Array((M8+2)*2);Sh(U8);const B8=new Array(vA*2);Sh(B8);const V8=new Array(O8);Sh(V8);const z8=new Array(L8-P8+1);Sh(z8);const q8=new Array(yA);Sh(q8);const H8=new Array(vA);Sh(H8);const $8=(n,e,t,r)=>{let i=n&65535|0,o=n>>>16&65535|0,u=0;for(;t!==0;){u=t>2e3?2e3:t,t-=u;do i=i+e[r++]|0,o=o+i|0;while(--u);i%=65521,o%=65521}return i|o<<16|0};var I1=$8;const G8=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},W8=new Uint32Array(G8()),Y8=(n,e,t,r)=>{const i=W8,o=r+t;n^=-1;for(let u=r;u<o;u++)n=n>>>8^i[(n^e[u])&255];return n^-1};var el=Y8,k1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bA={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const K8=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var X8=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)K8(t,r)&&(n[r]=t[r])}}return n},Q8=n=>{let e=0;for(let r=0,i=n.length;r<i;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,i=0,o=n.length;r<o;r++){let u=n[r];t.set(u,i),i+=u.length}return t},xA={assign:X8,flattenChunks:Q8};let wA=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{wA=!1}const qf=new Uint8Array(256);for(let n=0;n<256;n++)qf[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;qf[254]=qf[254]=1;var J8=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,i,o,u=n.length,d=0;for(i=0;i<u;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<u&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(d),o=0,i=0;o<d;i++)t=n.charCodeAt(i),(t&64512)===55296&&i+1<u&&(r=n.charCodeAt(i+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?e[o++]=t:t<2048?(e[o++]=192|t>>>6,e[o++]=128|t&63):t<65536?(e[o++]=224|t>>>12,e[o++]=128|t>>>6&63,e[o++]=128|t&63):(e[o++]=240|t>>>18,e[o++]=128|t>>>12&63,e[o++]=128|t>>>6&63,e[o++]=128|t&63);return e};const Z8=(n,e)=>{if(e<65534&&n.subarray&&wA)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var e7=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,i;const o=new Array(t*2);for(i=0,r=0;r<t;){let u=n[r++];if(u<128){o[i++]=u;continue}let d=qf[u];if(d>4){o[i++]=65533,r+=d-1;continue}for(u&=d===2?31:d===3?15:7;d>1&&r<t;)u=u<<6|n[r++]&63,d--;if(d>1){o[i++]=65533;continue}u<65536?o[i++]=u:(u-=65536,o[i++]=55296|u>>10&1023,o[i++]=56320|u&1023)}return Z8(o,i)},t7=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+qf[n[t]]>e?t:e},D1={string2buf:J8,buf2string:e7,utf8border:t7};function n7(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var r7=n7;const dm=16209,s7=16191;var i7=function(e,t){let r,i,o,u,d,h,p,m,w,_,x,A,R,C,k,q,$,z,oe,ce,H,D,I,V;const T=e.state;r=e.next_in,I=e.input,i=r+(e.avail_in-5),o=e.next_out,V=e.output,u=o-(t-e.avail_out),d=o+(e.avail_out-257),h=T.dmax,p=T.wsize,m=T.whave,w=T.wnext,_=T.window,x=T.hold,A=T.bits,R=T.lencode,C=T.distcode,k=(1<<T.lenbits)-1,q=(1<<T.distbits)-1;e:do{A<15&&(x+=I[r++]<<A,A+=8,x+=I[r++]<<A,A+=8),$=R[x&k];t:for(;;){if(z=$>>>24,x>>>=z,A-=z,z=$>>>16&255,z===0)V[o++]=$&65535;else if(z&16){oe=$&65535,z&=15,z&&(A<z&&(x+=I[r++]<<A,A+=8),oe+=x&(1<<z)-1,x>>>=z,A-=z),A<15&&(x+=I[r++]<<A,A+=8,x+=I[r++]<<A,A+=8),$=C[x&q];n:for(;;){if(z=$>>>24,x>>>=z,A-=z,z=$>>>16&255,z&16){if(ce=$&65535,z&=15,A<z&&(x+=I[r++]<<A,A+=8,A<z&&(x+=I[r++]<<A,A+=8)),ce+=x&(1<<z)-1,ce>h){e.msg="invalid distance too far back",T.mode=dm;break e}if(x>>>=z,A-=z,z=o-u,ce>z){if(z=ce-z,z>m&&T.sane){e.msg="invalid distance too far back",T.mode=dm;break e}if(H=0,D=_,w===0){if(H+=p-z,z<oe){oe-=z;do V[o++]=_[H++];while(--z);H=o-ce,D=V}}else if(w<z){if(H+=p+w-z,z-=w,z<oe){oe-=z;do V[o++]=_[H++];while(--z);if(H=0,w<oe){z=w,oe-=z;do V[o++]=_[H++];while(--z);H=o-ce,D=V}}}else if(H+=w-z,z<oe){oe-=z;do V[o++]=_[H++];while(--z);H=o-ce,D=V}for(;oe>2;)V[o++]=D[H++],V[o++]=D[H++],V[o++]=D[H++],oe-=3;oe&&(V[o++]=D[H++],oe>1&&(V[o++]=D[H++]))}else{H=o-ce;do V[o++]=V[H++],V[o++]=V[H++],V[o++]=V[H++],oe-=3;while(oe>2);oe&&(V[o++]=V[H++],oe>1&&(V[o++]=V[H++]))}}else if((z&64)===0){$=C[($&65535)+(x&(1<<z)-1)];continue n}else{e.msg="invalid distance code",T.mode=dm;break e}break}}else if((z&64)===0){$=R[($&65535)+(x&(1<<z)-1)];continue t}else if(z&32){T.mode=s7;break e}else{e.msg="invalid literal/length code",T.mode=dm;break e}break}}while(r<i&&o<d);oe=A>>3,r-=oe,A-=oe<<3,x&=(1<<A)-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=o<d?257+(d-o):257-(o-d),T.hold=x,T.bits=A};const $d=15,Pw=852,Lw=592,Fw=0,Ny=1,Mw=2,a7=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),o7=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),l7=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),c7=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),u7=(n,e,t,r,i,o,u,d)=>{const h=d.bits;let p=0,m=0,w=0,_=0,x=0,A=0,R=0,C=0,k=0,q=0,$,z,oe,ce,H,D=null,I;const V=new Uint16Array($d+1),T=new Uint16Array($d+1);let F=null,L,ee,ye;for(p=0;p<=$d;p++)V[p]=0;for(m=0;m<r;m++)V[e[t+m]]++;for(x=h,_=$d;_>=1&&V[_]===0;_--);if(x>_&&(x=_),_===0)return i[o++]=1<<24|64<<16|0,i[o++]=1<<24|64<<16|0,d.bits=1,0;for(w=1;w<_&&V[w]===0;w++);for(x<w&&(x=w),C=1,p=1;p<=$d;p++)if(C<<=1,C-=V[p],C<0)return-1;if(C>0&&(n===Fw||_!==1))return-1;for(T[1]=0,p=1;p<$d;p++)T[p+1]=T[p]+V[p];for(m=0;m<r;m++)e[t+m]!==0&&(u[T[e[t+m]]++]=m);if(n===Fw?(D=F=u,I=20):n===Ny?(D=a7,F=o7,I=257):(D=l7,F=c7,I=0),q=0,m=0,p=w,H=o,A=x,R=0,oe=-1,k=1<<x,ce=k-1,n===Ny&&k>Pw||n===Mw&&k>Lw)return 1;for(;;){L=p-R,u[m]+1<I?(ee=0,ye=u[m]):u[m]>=I?(ee=F[u[m]-I],ye=D[u[m]-I]):(ee=96,ye=0),$=1<<p-R,z=1<<A,w=z;do z-=$,i[H+(q>>R)+z]=L<<24|ee<<16|ye|0;while(z!==0);for($=1<<p-1;q&$;)$>>=1;if($!==0?(q&=$-1,q+=$):q=0,m++,--V[p]===0){if(p===_)break;p=e[t+u[m]]}if(p>x&&(q&ce)!==oe){for(R===0&&(R=x),H+=w,A=p-R,C=1<<A;A+R<_&&(C-=V[A+R],!(C<=0));)A++,C<<=1;if(k+=1<<A,n===Ny&&k>Pw||n===Mw&&k>Lw)return 1;oe=q&ce,i[oe]=x<<24|A<<16|H-o|0}}return q!==0&&(i[H+q]=p-R<<24|64<<16|0),d.bits=x,0};var jf=u7;const d7=0,SA=1,_A=2,{Z_FINISH:Ow,Z_BLOCK:h7,Z_TREES:hm,Z_OK:sd,Z_STREAM_END:f7,Z_NEED_DICT:p7,Z_STREAM_ERROR:to,Z_DATA_ERROR:EA,Z_MEM_ERROR:NA,Z_BUF_ERROR:m7,Z_DEFLATED:Uw}=bA,Og=16180,Bw=16181,Vw=16182,zw=16183,qw=16184,Hw=16185,$w=16186,Gw=16187,Ww=16188,Yw=16189,sg=16190,Hl=16191,Ay=16192,Kw=16193,Ty=16194,Xw=16195,Qw=16196,Jw=16197,Zw=16198,fm=16199,pm=16200,eS=16201,tS=16202,nS=16203,rS=16204,sS=16205,jy=16206,iS=16207,aS=16208,Ir=16209,AA=16210,TA=16211,g7=852,y7=592,v7=15,b7=v7,oS=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function x7(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ld=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<Og||e.mode>TA?1:0},jA=n=>{if(ld(n))return to;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=Og,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(g7),e.distcode=e.distdyn=new Int32Array(y7),e.sane=1,e.back=-1,sd},CA=n=>{if(ld(n))return to;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,jA(n)},RA=(n,e)=>{let t;if(ld(n))return to;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?to:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,CA(n))},IA=(n,e)=>{if(!n)return to;const t=new x7;n.state=t,t.strm=n,t.window=null,t.mode=Og;const r=RA(n,e);return r!==sd&&(n.state=null),r},w7=n=>IA(n,b7);let lS=!0,Cy,Ry;const S7=n=>{if(lS){Cy=new Int32Array(512),Ry=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(jf(SA,n.lens,0,288,Cy,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;jf(_A,n.lens,0,32,Ry,0,n.work,{bits:5}),lS=!1}n.lencode=Cy,n.lenbits=9,n.distcode=Ry,n.distbits=5},kA=(n,e,t,r)=>{let i;const o=n.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(o.window.set(e.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),o.window.set(e.subarray(t-r,t-r+i),o.wnext),r-=i,r?(o.window.set(e.subarray(t-r,t),0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0},_7=(n,e)=>{let t,r,i,o,u,d,h,p,m,w,_,x,A,R,C=0,k,q,$,z,oe,ce,H,D;const I=new Uint8Array(4);let V,T;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ld(n)||!n.output||!n.input&&n.avail_in!==0)return to;t=n.state,t.mode===Hl&&(t.mode=Ay),u=n.next_out,i=n.output,h=n.avail_out,o=n.next_in,r=n.input,d=n.avail_in,p=t.hold,m=t.bits,w=d,_=h,D=sd;e:for(;;)switch(t.mode){case Og:if(t.wrap===0){t.mode=Ay;break}for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.wrap&2&&p===35615){t.wbits===0&&(t.wbits=15),t.check=0,I[0]=p&255,I[1]=p>>>8&255,t.check=el(t.check,I,2,0),p=0,m=0,t.mode=Bw;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((p&255)<<8)+(p>>8))%31){n.msg="incorrect header check",t.mode=Ir;break}if((p&15)!==Uw){n.msg="unknown compression method",t.mode=Ir;break}if(p>>>=4,m-=4,H=(p&15)+8,t.wbits===0&&(t.wbits=H),H>15||H>t.wbits){n.msg="invalid window size",t.mode=Ir;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=p&512?Yw:Hl,p=0,m=0;break;case Bw:for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.flags=p,(t.flags&255)!==Uw){n.msg="unknown compression method",t.mode=Ir;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=Ir;break}t.head&&(t.head.text=p>>8&1),t.flags&512&&t.wrap&4&&(I[0]=p&255,I[1]=p>>>8&255,t.check=el(t.check,I,2,0)),p=0,m=0,t.mode=Vw;case Vw:for(;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.head&&(t.head.time=p),t.flags&512&&t.wrap&4&&(I[0]=p&255,I[1]=p>>>8&255,I[2]=p>>>16&255,I[3]=p>>>24&255,t.check=el(t.check,I,4,0)),p=0,m=0,t.mode=zw;case zw:for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.head&&(t.head.xflags=p&255,t.head.os=p>>8),t.flags&512&&t.wrap&4&&(I[0]=p&255,I[1]=p>>>8&255,t.check=el(t.check,I,2,0)),p=0,m=0,t.mode=qw;case qw:if(t.flags&1024){for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.length=p,t.head&&(t.head.extra_len=p),t.flags&512&&t.wrap&4&&(I[0]=p&255,I[1]=p>>>8&255,t.check=el(t.check,I,2,0)),p=0,m=0}else t.head&&(t.head.extra=null);t.mode=Hw;case Hw:if(t.flags&1024&&(x=t.length,x>d&&(x=d),x&&(t.head&&(H=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(o,o+x),H)),t.flags&512&&t.wrap&4&&(t.check=el(t.check,r,x,o)),d-=x,o+=x,t.length-=x),t.length))break e;t.length=0,t.mode=$w;case $w:if(t.flags&2048){if(d===0)break e;x=0;do H=r[o+x++],t.head&&H&&t.length<65536&&(t.head.name+=String.fromCharCode(H));while(H&&x<d);if(t.flags&512&&t.wrap&4&&(t.check=el(t.check,r,x,o)),d-=x,o+=x,H)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Gw;case Gw:if(t.flags&4096){if(d===0)break e;x=0;do H=r[o+x++],t.head&&H&&t.length<65536&&(t.head.comment+=String.fromCharCode(H));while(H&&x<d);if(t.flags&512&&t.wrap&4&&(t.check=el(t.check,r,x,o)),d-=x,o+=x,H)break e}else t.head&&(t.head.comment=null);t.mode=Ww;case Ww:if(t.flags&512){for(;m<16;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.wrap&4&&p!==(t.check&65535)){n.msg="header crc mismatch",t.mode=Ir;break}p=0,m=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=Hl;break;case Yw:for(;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}n.adler=t.check=oS(p),p=0,m=0,t.mode=sg;case sg:if(t.havedict===0)return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=m,p7;n.adler=t.check=1,t.mode=Hl;case Hl:if(e===h7||e===hm)break e;case Ay:if(t.last){p>>>=m&7,m-=m&7,t.mode=jy;break}for(;m<3;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}switch(t.last=p&1,p>>>=1,m-=1,p&3){case 0:t.mode=Kw;break;case 1:if(S7(t),t.mode=fm,e===hm){p>>>=2,m-=2;break e}break;case 2:t.mode=Qw;break;case 3:n.msg="invalid block type",t.mode=Ir}p>>>=2,m-=2;break;case Kw:for(p>>>=m&7,m-=m&7;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if((p&65535)!==(p>>>16^65535)){n.msg="invalid stored block lengths",t.mode=Ir;break}if(t.length=p&65535,p=0,m=0,t.mode=Ty,e===hm)break e;case Ty:t.mode=Xw;case Xw:if(x=t.length,x){if(x>d&&(x=d),x>h&&(x=h),x===0)break e;i.set(r.subarray(o,o+x),u),d-=x,o+=x,h-=x,u+=x,t.length-=x;break}t.mode=Hl;break;case Qw:for(;m<14;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.nlen=(p&31)+257,p>>>=5,m-=5,t.ndist=(p&31)+1,p>>>=5,m-=5,t.ncode=(p&15)+4,p>>>=4,m-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=Ir;break}t.have=0,t.mode=Jw;case Jw:for(;t.have<t.ncode;){for(;m<3;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.lens[F[t.have++]]=p&7,p>>>=3,m-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},D=jf(d7,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,D){n.msg="invalid code lengths set",t.mode=Ir;break}t.have=0,t.mode=Zw;case Zw:for(;t.have<t.nlen+t.ndist;){for(;C=t.lencode[p&(1<<t.lenbits)-1],k=C>>>24,q=C>>>16&255,$=C&65535,!(k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if($<16)p>>>=k,m-=k,t.lens[t.have++]=$;else{if($===16){for(T=k+2;m<T;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(p>>>=k,m-=k,t.have===0){n.msg="invalid bit length repeat",t.mode=Ir;break}H=t.lens[t.have-1],x=3+(p&3),p>>>=2,m-=2}else if($===17){for(T=k+3;m<T;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=k,m-=k,H=0,x=3+(p&7),p>>>=3,m-=3}else{for(T=k+7;m<T;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=k,m-=k,H=0,x=11+(p&127),p>>>=7,m-=7}if(t.have+x>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=Ir;break}for(;x--;)t.lens[t.have++]=H}}if(t.mode===Ir)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=Ir;break}if(t.lenbits=9,V={bits:t.lenbits},D=jf(SA,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,D){n.msg="invalid literal/lengths set",t.mode=Ir;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},D=jf(_A,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,D){n.msg="invalid distances set",t.mode=Ir;break}if(t.mode=fm,e===hm)break e;case fm:t.mode=pm;case pm:if(d>=6&&h>=258){n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=m,i7(n,_),u=n.next_out,i=n.output,h=n.avail_out,o=n.next_in,r=n.input,d=n.avail_in,p=t.hold,m=t.bits,t.mode===Hl&&(t.back=-1);break}for(t.back=0;C=t.lencode[p&(1<<t.lenbits)-1],k=C>>>24,q=C>>>16&255,$=C&65535,!(k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(q&&(q&240)===0){for(z=k,oe=q,ce=$;C=t.lencode[ce+((p&(1<<z+oe)-1)>>z)],k=C>>>24,q=C>>>16&255,$=C&65535,!(z+k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=z,m-=z,t.back+=z}if(p>>>=k,m-=k,t.back+=k,t.length=$,q===0){t.mode=sS;break}if(q&32){t.back=-1,t.mode=Hl;break}if(q&64){n.msg="invalid literal/length code",t.mode=Ir;break}t.extra=q&15,t.mode=eS;case eS:if(t.extra){for(T=t.extra;m<T;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.length+=p&(1<<t.extra)-1,p>>>=t.extra,m-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=tS;case tS:for(;C=t.distcode[p&(1<<t.distbits)-1],k=C>>>24,q=C>>>16&255,$=C&65535,!(k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if((q&240)===0){for(z=k,oe=q,ce=$;C=t.distcode[ce+((p&(1<<z+oe)-1)>>z)],k=C>>>24,q=C>>>16&255,$=C&65535,!(z+k<=m);){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}p>>>=z,m-=z,t.back+=z}if(p>>>=k,m-=k,t.back+=k,q&64){n.msg="invalid distance code",t.mode=Ir;break}t.offset=$,t.extra=q&15,t.mode=nS;case nS:if(t.extra){for(T=t.extra;m<T;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}t.offset+=p&(1<<t.extra)-1,p>>>=t.extra,m-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=Ir;break}t.mode=rS;case rS:if(h===0)break e;if(x=_-h,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=Ir;break}x>t.wnext?(x-=t.wnext,A=t.wsize-x):A=t.wnext-x,x>t.length&&(x=t.length),R=t.window}else R=i,A=u-t.offset,x=t.length;x>h&&(x=h),h-=x,t.length-=x;do i[u++]=R[A++];while(--x);t.length===0&&(t.mode=pm);break;case sS:if(h===0)break e;i[u++]=t.length,h--,t.mode=pm;break;case jy:if(t.wrap){for(;m<32;){if(d===0)break e;d--,p|=r[o++]<<m,m+=8}if(_-=h,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?el(t.check,i,_,u-_):I1(t.check,i,_,u-_)),_=h,t.wrap&4&&(t.flags?p:oS(p))!==t.check){n.msg="incorrect data check",t.mode=Ir;break}p=0,m=0}t.mode=iS;case iS:if(t.wrap&&t.flags){for(;m<32;){if(d===0)break e;d--,p+=r[o++]<<m,m+=8}if(t.wrap&4&&p!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=Ir;break}p=0,m=0}t.mode=aS;case aS:D=f7;break e;case Ir:D=EA;break e;case AA:return NA;case TA:default:return to}return n.next_out=u,n.avail_out=h,n.next_in=o,n.avail_in=d,t.hold=p,t.bits=m,(t.wsize||_!==n.avail_out&&t.mode<Ir&&(t.mode<jy||e!==Ow))&&kA(n,n.output,n.next_out,_-n.avail_out),w-=n.avail_in,_-=n.avail_out,n.total_in+=w,n.total_out+=_,t.total+=_,t.wrap&4&&_&&(n.adler=t.check=t.flags?el(t.check,i,_,n.next_out-_):I1(t.check,i,_,n.next_out-_)),n.data_type=t.bits+(t.last?64:0)+(t.mode===Hl?128:0)+(t.mode===fm||t.mode===Ty?256:0),(w===0&&_===0||e===Ow)&&D===sd&&(D=m7),D},E7=n=>{if(ld(n))return to;let e=n.state;return e.window&&(e.window=null),n.state=null,sd},N7=(n,e)=>{if(ld(n))return to;const t=n.state;return(t.wrap&2)===0?to:(t.head=e,e.done=!1,sd)},A7=(n,e)=>{const t=e.length;let r,i,o;return ld(n)||(r=n.state,r.wrap!==0&&r.mode!==sg)?to:r.mode===sg&&(i=1,i=I1(i,e,t,0),i!==r.check)?EA:(o=kA(n,e,t,t),o?(r.mode=AA,NA):(r.havedict=1,sd))};var T7=CA,j7=RA,C7=jA,R7=w7,I7=IA,k7=_7,D7=E7,P7=N7,L7=A7,F7="pako inflate (from Nodeca project)",$l={inflateReset:T7,inflateReset2:j7,inflateResetKeep:C7,inflateInit:R7,inflateInit2:I7,inflate:k7,inflateEnd:D7,inflateGetHeader:P7,inflateSetDictionary:L7,inflateInfo:F7};function M7(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var O7=M7;const DA=Object.prototype.toString,{Z_NO_FLUSH:U7,Z_FINISH:B7,Z_OK:Hf,Z_STREAM_END:Iy,Z_NEED_DICT:ky,Z_STREAM_ERROR:V7,Z_DATA_ERROR:cS,Z_MEM_ERROR:z7}=bA;function cp(n){this.options=xA.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new r7,this.strm.avail_out=0;let t=$l.inflateInit2(this.strm,e.windowBits);if(t!==Hf)throw new Error(k1[t]);if(this.header=new O7,$l.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=D1.string2buf(e.dictionary):DA.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=$l.inflateSetDictionary(this.strm,e.dictionary),t!==Hf)))throw new Error(k1[t])}cp.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let o,u,d;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?B7:U7,DA.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),o=$l.inflate(t,u),o===ky&&i&&(o=$l.inflateSetDictionary(t,i),o===Hf?o=$l.inflate(t,u):o===cS&&(o=ky));t.avail_in>0&&o===Iy&&t.state.wrap>0&&n[t.next_in]!==0;)$l.inflateReset(t),o=$l.inflate(t,u);switch(o){case V7:case cS:case ky:case z7:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===Iy))if(this.options.to==="string"){let h=D1.utf8border(t.output,t.next_out),p=t.next_out-h,m=D1.buf2string(t.output,h);t.next_out=p,t.avail_out=r-p,p&&t.output.set(t.output.subarray(h,h+p),0),this.onData(m)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Hf&&d===0)){if(o===Iy)return o=$l.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};cp.prototype.onData=function(n){this.chunks.push(n)};cp.prototype.onEnd=function(n){n===Hf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=xA.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function q7(n,e){const t=new cp(e);if(t.push(n),t.err)throw t.msg||k1[t.err];return t.result}var H7=cp,$7=q7,G7={Inflate:H7,inflate:$7};const{Inflate:W7,inflate:Y7}=G7;var uS=W7,K7=Y7;const PA=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;PA[n]=e}const dS=4294967295;function X7(n,e,t){let r=n;for(let i=0;i<t;i++)r=PA[(r^e[i])&255]^r>>>8;return r}function Q7(n,e){return(X7(dS,n,e)^dS)>>>0}function hS(n,e,t){const r=n.readUint32(),i=Q7(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${i}`)}function LA(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function FA(n,e,t,r){let i=0;for(;i<r;i++)e[i]=n[i];for(;i<t;i++)e[i]=n[i]+e[i-r]&255}function MA(n,e,t,r){let i=0;if(t.length===0)for(;i<r;i++)e[i]=n[i];else for(;i<r;i++)e[i]=n[i]+t[i]&255}function OA(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+(e[o-i]>>1)&255}else{for(;o<i;o++)e[o]=n[o]+(t[o]>>1)&255;for(;o<r;o++)e[o]=n[o]+(e[o-i]+t[o]>>1)&255}}function UA(n,e,t,r,i){let o=0;if(t.length===0){for(;o<i;o++)e[o]=n[o];for(;o<r;o++)e[o]=n[o]+e[o-i]&255}else{for(;o<i;o++)e[o]=n[o]+t[o]&255;for(;o<r;o++)e[o]=n[o]+J7(e[o-i],t[o],t[o-i])&255}}function J7(n,e,t){const r=n+e-t,i=Math.abs(r-n),o=Math.abs(r-e),u=Math.abs(r-t);return i<=o&&i<=u?n:o<=u?e:t}function Z7(n,e,t,r,i,o){switch(n){case 0:LA(e,t,i);break;case 1:FA(e,t,i,o);break;case 2:MA(e,t,r,i);break;case 3:OA(e,t,r,i,o);break;case 4:UA(e,t,r,i,o);break;default:throw new Error(`Unsupported filter: ${n}`)}}const eF=new Uint16Array([255]),tF=new Uint8Array(eF.buffer),nF=tF[0]===255;function rF(n){const{data:e,width:t,height:r,channels:i,depth:o}=n,u=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(o/8)*i,h=new Uint8Array(r*t*d);let p=0;for(let m=0;m<7;m++){const w=u[m],_=Math.ceil((t-w.x)/w.xStep),x=Math.ceil((r-w.y)/w.yStep);if(_<=0||x<=0)continue;const A=_*d,R=new Uint8Array(A);for(let C=0;C<x;C++){const k=e[p++],q=e.subarray(p,p+A);p+=A;const $=new Uint8Array(A);Z7(k,q,$,R,A,d),R.set($);for(let z=0;z<_;z++){const oe=w.x+z*w.xStep,ce=w.y+C*w.yStep;if(!(oe>=t||ce>=r))for(let H=0;H<d;H++)h[(ce*t+oe)*d+H]=$[z*d+H]}}}if(o===16){const m=new Uint16Array(h.buffer);if(nF)for(let w=0;w<m.length;w++)m[w]=sF(m[w]);return m}else return h}function sF(n){return(n&255)<<8|n>>8&255}const iF=new Uint16Array([255]),aF=new Uint8Array(iF.buffer),oF=aF[0]===255,lF=new Uint8Array(0);function fS(n){const{data:e,width:t,height:r,channels:i,depth:o}=n,u=Math.ceil(o/8)*i,d=Math.ceil(o/8*i*t),h=new Uint8Array(r*d);let p=lF,m=0,w,_;for(let x=0;x<r;x++){switch(w=e.subarray(m+1,m+1+d),_=h.subarray(x*d,(x+1)*d),e[m]){case 0:LA(w,_,d);break;case 1:FA(w,_,d,u);break;case 2:MA(w,_,p,d);break;case 3:OA(w,_,p,d,u);break;case 4:UA(w,_,p,d,u);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}p=_,m+=d+1}if(o===16){const x=new Uint16Array(h.buffer);if(oF)for(let A=0;A<x.length;A++)x[A]=cF(x[A]);return x}else return h}function cF(n){return(n&255)<<8|n>>8&255}const km=Uint8Array.of(137,80,78,71,13,10,26,10);function pS(n){if(!uF(n.readBytes(km.length)))throw new Error("wrong PNG signature")}function uF(n){if(n.length<km.length)return!1;for(let e=0;e<km.length;e++)if(n[e]!==km[e])return!1;return!0}const dF="tEXt",hF=0,BA=new TextDecoder("latin1");function fF(n){if(mF(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const pF=/^[\u0000-\u00FF]*$/;function mF(n){if(!pF.test(n))throw new Error("invalid latin1 text")}function gF(n,e,t){const r=VA(e);n[r]=yF(e,t-r.length-1)}function VA(n){for(n.mark();n.readByte()!==hF;);const e=n.offset;n.reset();const t=BA.decode(n.readBytes(e-n.offset-1));return n.skip(1),fF(t),t}function yF(n,e){return BA.decode(n.readBytes(e))}const Ca={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Dy={UNKNOWN:-1,DEFLATE:0},mS={UNKNOWN:-1,ADAPTIVE:0},Py={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},mm={NONE:0,BACKGROUND:1,PREVIOUS:2},Ly={SOURCE:0,OVER:1};class vF extends a2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new uS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Dy.UNKNOWN,this._filterMethod=mS.UNKNOWN,this._interlaceMethod=Py.UNKNOWN,this._colorType=Ca.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(pS(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(pS(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case dF:gF(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?hS(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?hS(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=bF(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case Ca.GREYSCALE:r=1;break;case Ca.TRUECOLOUR:r=3;break;case Ca.INDEXED_COLOUR:r=1;break;case Ca.GREYSCALE_ALPHA:r=2;break;case Ca.TRUECOLOUR_ALPHA:r=4;break;case Ca.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==Dy.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let i=0;i<t;i++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Ca.GREYSCALE:case Ca.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case Ca.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case Ca.UNKNOWN:case Ca.GREYSCALE_ALPHA:case Ca.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=VA(this),r=this.readUint8();if(r!==Dy.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const i=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:K7(i)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=fS({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const i=this._apng.frames.at(e-1);this.disposeFrame(r,i,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case mm.NONE:break;case mm.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const u=(i*e.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)r.data[u+d]=0}break;case mm.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,i=(o,u)=>{const d=((o+t.yOffset)*this._png.width+t.xOffset+u)*this._png.channels,h=(o*t.width+u)*this._png.channels;return{index:d,frameIndex:h}};switch(t.blendOp){case Ly.SOURCE:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:h}=i(o,u);for(let p=0;p<this._png.channels;p++)e.data[d+p]=t.data[h+p]}break;case Ly.OVER:for(let o=0;o<t.height;o++)for(let u=0;u<t.width;u++){const{index:d,frameIndex:h}=i(o,u);for(let p=0;p<this._png.channels;p++){const m=t.data[h+this._png.channels-1]/r,w=p%(this._png.channels-1)===0?1:t.data[h+p],_=Math.floor(m*w+(1-m)*e.data[d+p]);e.data[d+p]+=_}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==mS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Py.NO_INTERLACE)this._png.data=fS({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Py.ADAM7)this._png.data=rF({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:mm.NONE,blendOp:Ly.SOURCE,data:e}),this._inflator=new uS,this._writingDataChunks=!1}}function bF(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var gS;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(gS||(gS={}));function xF(n,e){return new vF(n,e).decode()}var en=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Fy(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var gr={log:Fy,warn:function(n){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):Fy.call(null,arguments))},error:function(n){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):Fy(n))}};function My(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Fu(r.response,e,t)},r.onerror=function(){gr.error("could not download file")},r.send()}function yS(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gm(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Fu=en.saveAs||((typeof window>"u"?"undefined":rr(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=en.URL||en.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?yS(i.href)?My(n,e,t):gm(i,i.target="_blank"):gm(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){gm(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(yS(n))My(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){gm(r)})}else navigator.msSaveOrOpenBlob((function(i,o){return o===void 0?o={autoBom:!1}:rr(o)!=="object"&&(gr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return My(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(en.HTMLElement)||en.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||i&&o)&&(typeof FileReader>"u"?"undefined":rr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var m=d.result;m=u?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=m:location=m,r=null},d.readAsDataURL(n)}else{var h=en.URL||en.webkitURL,p=h.createObjectURL(n);r?r.location=p:location.href=p,r=null,setTimeout(function(){h.revokeObjectURL(p)},4e4)}});function zA(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,u=i.exec(n);u&&(e=o(u),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),h=this.g.toString(16),p=this.b.toString(16);return d.length==1&&(d="0"+d),h.length==1&&(h="0"+h),p.length==1&&(p="0"+p),"#"+d+h+p}}var Dm=en.atob.bind(en),vS=en.btoa.bind(en);function Oy(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=_i(t,r,i,o,e[0],7,-680876936),o=_i(o,t,r,i,e[1],12,-389564586),i=_i(i,o,t,r,e[2],17,606105819),r=_i(r,i,o,t,e[3],22,-1044525330),t=_i(t,r,i,o,e[4],7,-176418897),o=_i(o,t,r,i,e[5],12,1200080426),i=_i(i,o,t,r,e[6],17,-1473231341),r=_i(r,i,o,t,e[7],22,-45705983),t=_i(t,r,i,o,e[8],7,1770035416),o=_i(o,t,r,i,e[9],12,-1958414417),i=_i(i,o,t,r,e[10],17,-42063),r=_i(r,i,o,t,e[11],22,-1990404162),t=_i(t,r,i,o,e[12],7,1804603682),o=_i(o,t,r,i,e[13],12,-40341101),i=_i(i,o,t,r,e[14],17,-1502002290),t=Ei(t,r=_i(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=Ei(o,t,r,i,e[6],9,-1069501632),i=Ei(i,o,t,r,e[11],14,643717713),r=Ei(r,i,o,t,e[0],20,-373897302),t=Ei(t,r,i,o,e[5],5,-701558691),o=Ei(o,t,r,i,e[10],9,38016083),i=Ei(i,o,t,r,e[15],14,-660478335),r=Ei(r,i,o,t,e[4],20,-405537848),t=Ei(t,r,i,o,e[9],5,568446438),o=Ei(o,t,r,i,e[14],9,-1019803690),i=Ei(i,o,t,r,e[3],14,-187363961),r=Ei(r,i,o,t,e[8],20,1163531501),t=Ei(t,r,i,o,e[13],5,-1444681467),o=Ei(o,t,r,i,e[2],9,-51403784),i=Ei(i,o,t,r,e[7],14,1735328473),t=Ni(t,r=Ei(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=Ni(o,t,r,i,e[8],11,-2022574463),i=Ni(i,o,t,r,e[11],16,1839030562),r=Ni(r,i,o,t,e[14],23,-35309556),t=Ni(t,r,i,o,e[1],4,-1530992060),o=Ni(o,t,r,i,e[4],11,1272893353),i=Ni(i,o,t,r,e[7],16,-155497632),r=Ni(r,i,o,t,e[10],23,-1094730640),t=Ni(t,r,i,o,e[13],4,681279174),o=Ni(o,t,r,i,e[0],11,-358537222),i=Ni(i,o,t,r,e[3],16,-722521979),r=Ni(r,i,o,t,e[6],23,76029189),t=Ni(t,r,i,o,e[9],4,-640364487),o=Ni(o,t,r,i,e[12],11,-421815835),i=Ni(i,o,t,r,e[15],16,530742520),t=Ai(t,r=Ni(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=Ai(o,t,r,i,e[7],10,1126891415),i=Ai(i,o,t,r,e[14],15,-1416354905),r=Ai(r,i,o,t,e[5],21,-57434055),t=Ai(t,r,i,o,e[12],6,1700485571),o=Ai(o,t,r,i,e[3],10,-1894986606),i=Ai(i,o,t,r,e[10],15,-1051523),r=Ai(r,i,o,t,e[1],21,-2054922799),t=Ai(t,r,i,o,e[8],6,1873313359),o=Ai(o,t,r,i,e[15],10,-30611744),i=Ai(i,o,t,r,e[6],15,-1560198380),r=Ai(r,i,o,t,e[13],21,1309151649),t=Ai(t,r,i,o,e[4],6,-145523070),o=Ai(o,t,r,i,e[11],10,-1120210379),i=Ai(i,o,t,r,e[2],15,718787259),r=Ai(r,i,o,t,e[9],21,-343485551),n[0]=Yc(t,n[0]),n[1]=Yc(r,n[1]),n[2]=Yc(i,n[2]),n[3]=Yc(o,n[3])}function Ug(n,e,t,r,i,o){return e=Yc(Yc(e,n),Yc(r,o)),Yc(e<<i|e>>>32-i,t)}function _i(n,e,t,r,i,o,u){return Ug(e&t|~e&r,n,e,i,o,u)}function Ei(n,e,t,r,i,o,u){return Ug(e&r|t&~r,n,e,i,o,u)}function Ni(n,e,t,r,i,o,u){return Ug(e^t^r,n,e,i,o,u)}function Ai(n,e,t,r,i,o,u){return Ug(t^(e|~r),n,e,i,o,u)}function qA(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Oy(r,wF(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Oy(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Oy(r,i),r}function wF(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var bS="0123456789abcdef".split("");function SF(n){for(var e="",t=0;t<4;t++)e+=bS[n>>8*t+4&15]+bS[n>>8*t&15];return e}function _F(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function P1(n){return qA(n).map(_F).join("")}var EF=(function(n){for(var e=0;e<n.length;e++)n[e]=SF(n[e]);return n.join("")})(qA("hello"))!="5d41402abc4b2a76b9719d911017c592";function Yc(n,e){if(EF){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}function L1(n,e){var t,r,i,o;if(n!==t){for(var u=(i=n,o=1+(256/n.length|0),new Array(o+1).join(i)),d=[],h=0;h<256;h++)d[h]=h;var p=0;for(h=0;h<256;h++){var m=d[h];p=(p+m+u.charCodeAt(h))%256,d[h]=d[p],d[p]=m}t=n,r=d}else d=r;var w=e.length,_=0,x=0,A="";for(h=0;h<w;h++)x=(x+(m=d[_=(_+1)%256]))%256,d[_]=d[x],d[x]=m,u=d[(d[_]+d[x])%256],A+=String.fromCharCode(e.charCodeAt(h)^u);return A}var xS={print:4,modify:8,copy:16,"annot-forms":32};function Jd(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(d){if(xS.perm!==void 0)throw new Error("Invalid permission: "+d);i+=xS[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),u=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,u),this.P=-(1+(255^i)),this.encryptionKey=P1(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=L1(this.encryptionKey,this.padding)}function Zd(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):n[r]}return e}function wS(n){if(rr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var u=e[t][o];try{u[0].apply(n,r)}catch(d){en.console&&gr.error("jsPDF PubSub Error",d.message,d)}u[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function $f(n){if(!(this instanceof $f))return new $f(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function HA(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Gc(n,e,t,r,i){if(!(this instanceof Gc))return new Gc(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,HA.call(this,r,i)}function Uu(n,e,t,r,i){if(!(this instanceof Uu))return new Uu(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,HA.call(this,r,i)}function Mt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],u=[],d=1,h=16,p="S",m=null;rr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(m=n.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),d=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(h=n.floatPrecision),p=n.defaultPathOperation||"S"),u=n.filters||(o===!0?["FlateEncode"]:u),r=r||"mm",t=(""+(t||"P")).toLowerCase();var w=n.putOnlyUsedFonts||!1,_={},x={internal:{},__private__:{}};x.__private__.PubSub=wS;var A="1.3",R=x.__private__.getPdfVersion=function(){return A};x.__private__.setPdfVersion=function(E){A=E};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return C};var k=x.__private__.getPageFormat=function(E){return C[E]};i=i||"a4";var q="compat",$="advanced",z=q;function oe(){this.saveGraphicsState(),Y(new Ut(De,0,0,-De,0,Pi()*De).toString()+" cm"),this.setFontSize(this.getFontSize()/De),p="n",z=$}function ce(){this.restoreGraphicsState(),p="S",z=q}var H=x.__private__.combineFontStyleAndFontWeight=function(E,W){if(E=="bold"&&W=="normal"||E=="bold"&&W==400||E=="normal"&&W=="italic"||E=="bold"&&W=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return W&&(E=W==400||W==="normal"?E==="italic"?"italic":"normal":W!=700&&W!=="bold"||E!=="normal"?(W==700?"bold":W)+""+E:"bold"),E};x.advancedAPI=function(E){var W=z===q;return W&&oe.call(this),typeof E!="function"||(E(this),W&&ce.call(this)),this},x.compatAPI=function(E){var W=z===$;return W&&ce.call(this),typeof E!="function"||(E(this),W&&oe.call(this)),this},x.isAdvancedAPI=function(){return z===$};var D,I=function(E){if(z!==$)throw new Error(E+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=x.roundToPrecision=x.__private__.roundToPrecision=function(E,W){var he=e||W;if(isNaN(E)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return E.toFixed(he).replace(/0+$/,"")};D=x.hpf=x.__private__.hpf=typeof h=="number"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return V(E,h)}:h==="smart"?function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return V(E,E>-1&&E<1?16:5)}:function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.hpf");return V(E,16)};var T=x.f2=x.__private__.f2=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f2");return V(E,2)},F=x.__private__.f3=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.f3");return V(E,3)},L=x.scale=x.__private__.scale=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.scale");return z===q?E*De:z===$?E:void 0},ee=function(E){return L((function(W){return z===q?Pi()-W:z===$?W:void 0})(E))};x.__private__.setPrecision=x.setPrecision=function(E){typeof parseInt(E,10)=="number"&&(e=parseInt(E,10))};var ye,le="00000000000000000000000000000000",ve=x.__private__.getFileId=function(){return le},me=x.__private__.setFileId=function(E){return le=E!==void 0&&/^[a-fA-F0-9]{32}$/.test(E)?E.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(hr=new Jd(m.userPermissions,m.userPassword,m.ownerPassword,le)),le};x.setFileId=function(E){return me(E),this},x.getFileId=function(){return ve()};var Le=x.__private__.convertDateToPDFDate=function(E){var W=E.getTimezoneOffset(),he=W<0?"+":"-",Ee=Math.floor(Math.abs(W/60)),Fe=Math.abs(W%60),ot=[he,B(Ee),"'",B(Fe),"'"].join("");return["D:",E.getFullYear(),B(E.getMonth()+1),B(E.getDate()),B(E.getHours()),B(E.getMinutes()),B(E.getSeconds()),ot].join("")},xe=x.__private__.convertPDFDateToDate=function(E){var W=parseInt(E.substr(2,4),10),he=parseInt(E.substr(6,2),10)-1,Ee=parseInt(E.substr(8,2),10),Fe=parseInt(E.substr(10,2),10),ot=parseInt(E.substr(12,2),10),pt=parseInt(E.substr(14,2),10);return new Date(W,he,Ee,Fe,ot,pt,0)},J=x.__private__.setCreationDate=function(E){var W;if(E===void 0&&(E=new Date),E instanceof Date)W=Le(E);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(E))throw new Error("Invalid argument passed to jsPDF.setCreationDate");W=E}return ye=W},M=x.__private__.getCreationDate=function(E){var W=ye;return E==="jsDate"&&(W=xe(ye)),W};x.setCreationDate=function(E){return J(E),this},x.getCreationDate=function(E){return M(E)};var G,B=x.__private__.padd2=function(E){return("0"+parseInt(E)).slice(-2)},ae=x.__private__.padd2Hex=function(E){return("00"+(E=E.toString())).substr(E.length)},ge=0,_e=[],Ve=[],Me=0,Q=[],Te=[],ue=!1,be=Ve;x.__private__.setCustomOutputDestination=function(E){ue=!0,be=E};var Ie=function(E){ue||(be=E)};x.__private__.resetCustomOutputDestination=function(){ue=!1,be=Ve};var Y=x.__private__.out=function(E){return E=E.toString(),Me+=E.length+1,be.push(E),be},pe=x.__private__.write=function(E){return Y(arguments.length===1?E.toString():Array.prototype.join.call(arguments," "))},Ne=x.__private__.getArrayBuffer=function(E){for(var W=E.length,he=new ArrayBuffer(W),Ee=new Uint8Array(he);W--;)Ee[W]=E.charCodeAt(W);return he},je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return je};var we=n.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(E){return we=z===$?E/De:E,this};var Ce,Je=x.__private__.getFontSize=x.getFontSize=function(){return z===q?we:we*De},ut=n.R2L||!1;x.__private__.setR2L=x.setR2L=function(E){return ut=E,this},x.__private__.getR2L=x.getR2L=function(){return ut};var nt,ke=x.__private__.setZoomMode=function(E){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(E))Ce=E;else if(isNaN(E)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(E)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+E+'" is not recognized.');Ce=E}else Ce=parseInt(E,10)};x.__private__.getZoomMode=function(){return Ce};var st,Xe=x.__private__.setPageMode=function(E){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(E)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+E+'" is not recognized.');nt=E};x.__private__.getPageMode=function(){return nt};var Qe=x.__private__.setLayoutMode=function(E){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(E)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+E+'" is not recognized.');st=E};x.__private__.getLayoutMode=function(){return st},x.__private__.setDisplayMode=x.setDisplayMode=function(E,W,he){return ke(E),Qe(W),Xe(he),this};var tt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(E){if(Object.keys(tt).indexOf(E)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tt[E]},x.__private__.getDocumentProperties=function(){return tt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(E){for(var W in tt)tt.hasOwnProperty(W)&&E[W]&&(tt[W]=E[W]);return this},x.__private__.setDocumentProperty=function(E,W){if(Object.keys(tt).indexOf(E)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tt[E]=W};var Oe,De,Be,it,gt,et={},bt={},St=[],Nt={},un={},Ot={},Vt={},Cn=null,Pt=0,It=[],nn=new wS(x),ws=n.hotfixes||[],us={},qi={},es=[],Ut=function E(W,he,Ee,Fe,ot,pt){if(!(this instanceof E))return new E(W,he,Ee,Fe,ot,pt);isNaN(W)&&(W=1),isNaN(he)&&(he=0),isNaN(Ee)&&(Ee=0),isNaN(Fe)&&(Fe=1),isNaN(ot)&&(ot=0),isNaN(pt)&&(pt=0),this._matrix=[W,he,Ee,Fe,ot,pt]};Object.defineProperty(Ut.prototype,"sx",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(Ut.prototype,"shy",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(Ut.prototype,"shx",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(Ut.prototype,"sy",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(Ut.prototype,"tx",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(Ut.prototype,"ty",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(Ut.prototype,"a",{get:function(){return this._matrix[0]},set:function(E){this._matrix[0]=E}}),Object.defineProperty(Ut.prototype,"b",{get:function(){return this._matrix[1]},set:function(E){this._matrix[1]=E}}),Object.defineProperty(Ut.prototype,"c",{get:function(){return this._matrix[2]},set:function(E){this._matrix[2]=E}}),Object.defineProperty(Ut.prototype,"d",{get:function(){return this._matrix[3]},set:function(E){this._matrix[3]=E}}),Object.defineProperty(Ut.prototype,"e",{get:function(){return this._matrix[4]},set:function(E){this._matrix[4]=E}}),Object.defineProperty(Ut.prototype,"f",{get:function(){return this._matrix[5]},set:function(E){this._matrix[5]=E}}),Object.defineProperty(Ut.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ut.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ut.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ut.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ut.prototype.join=function(E){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(E)},Ut.prototype.multiply=function(E){var W=E.sx*this.sx+E.shy*this.shx,he=E.sx*this.shy+E.shy*this.sy,Ee=E.shx*this.sx+E.sy*this.shx,Fe=E.shx*this.shy+E.sy*this.sy,ot=E.tx*this.sx+E.ty*this.shx+this.tx,pt=E.tx*this.shy+E.ty*this.sy+this.ty;return new Ut(W,he,Ee,Fe,ot,pt)},Ut.prototype.decompose=function(){var E=this.sx,W=this.shy,he=this.shx,Ee=this.sy,Fe=this.tx,ot=this.ty,pt=Math.sqrt(E*E+W*W),At=(E/=pt)*he+(W/=pt)*Ee;he-=E*At,Ee-=W*At;var kt=Math.sqrt(he*he+Ee*Ee);return At/=kt,E*(Ee/=kt)<W*(he/=kt)&&(E=-E,W=-W,At=-At,pt=-pt),{scale:new Ut(pt,0,0,kt,0,0),translate:new Ut(1,0,0,1,Fe,ot),rotate:new Ut(E,W,-W,E,0,0),skew:new Ut(1,0,At,1,0,0)}},Ut.prototype.toString=function(E){return this.join(" ")},Ut.prototype.inversed=function(){var E=this.sx,W=this.shy,he=this.shx,Ee=this.sy,Fe=this.tx,ot=this.ty,pt=1/(E*Ee-W*he),At=Ee*pt,kt=-W*pt,Ht=-he*pt,Bt=E*pt;return new Ut(At,kt,Ht,Bt,-At*Fe-Ht*ot,-kt*Fe-Bt*ot)},Ut.prototype.applyToPoint=function(E){var W=E.x*this.sx+E.y*this.shx+this.tx,he=E.x*this.shy+E.y*this.sy+this.ty;return new fs(W,he)},Ut.prototype.applyToRectangle=function(E){var W=this.applyToPoint(E),he=this.applyToPoint(new fs(E.x+E.w,E.y+E.h));return new $i(W.x,W.y,he.x-W.x,he.y-W.y)},Ut.prototype.clone=function(){var E=this.sx,W=this.shy,he=this.shx,Ee=this.sy,Fe=this.tx,ot=this.ty;return new Ut(E,W,he,Ee,Fe,ot)},x.Matrix=Ut;var ma=x.matrixMult=function(E,W){return W.multiply(E)},Qs=new Ut(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Qs;var Ms=function(E,W){if(!un[E]){var he=(W instanceof Gc?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);W.id=he,un[E]=he,Nt[he]=W,nn.publish("addPattern",W)}};x.ShadingPattern=Gc,x.TilingPattern=Uu,x.addShadingPattern=function(E,W){return I("addShadingPattern()"),Ms(E,W),this},x.beginTilingPattern=function(E){I("beginTilingPattern()"),Gi(E.boundingBox[0],E.boundingBox[1],E.boundingBox[2]-E.boundingBox[0],E.boundingBox[3]-E.boundingBox[1],E.matrix)},x.endTilingPattern=function(E,W){I("endTilingPattern()"),W.stream=Te[G].join(`
`),Ms(E,W),nn.publish("endTilingPattern",W),es.pop().restore()};var Os,Kn=x.__private__.newObject=function(){var E=sr();return zr(E,!0),E},sr=x.__private__.newObjectDeferred=function(){return ge++,_e[ge]=function(){return Me},ge},zr=function(E,W){return W=typeof W=="boolean"&&W,_e[E]=Me,W&&Y(E+" 0 obj"),E},Ss=x.__private__.newAdditionalObject=function(){var E={objId:sr(),content:""};return Q.push(E),E},ds=sr(),Bn=sr(),Jn=x.__private__.decodeColorString=function(E){var W=E.split(" ");if(W.length!==2||W[1]!=="g"&&W[1]!=="G")W.length!==5||W[4]!=="k"&&W[4]!=="K"||(W=[(1-W[0])*(1-W[3]),(1-W[1])*(1-W[3]),(1-W[2])*(1-W[3]),"r"]);else{var he=parseFloat(W[0]);W=[he,he,he,"r"]}for(var Ee="#",Fe=0;Fe<3;Fe++)Ee+=("0"+Math.floor(255*parseFloat(W[Fe])).toString(16)).slice(-2);return Ee},qr=x.__private__.encodeColorString=function(E){var W;typeof E=="string"&&(E={ch1:E});var he=E.ch1,Ee=E.ch2,Fe=E.ch3,ot=E.ch4,pt=E.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var At=new zA(he);if(At.ok)he=At.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var kt=parseInt(he.substr(1),16);he=kt>>16&255,Ee=kt>>8&255,Fe=255&kt}if(Ee===void 0||ot===void 0&&he===Ee&&Ee===Fe)W=typeof he=="string"?he+" "+pt[0]:E.precision===2?T(he/255)+" "+pt[0]:F(he/255)+" "+pt[0];else if(ot===void 0||rr(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return["1.","1.","1.",pt[1]].join(" ");W=typeof he=="string"?[he,Ee,Fe,pt[1]].join(" "):E.precision===2?[T(he/255),T(Ee/255),T(Fe/255),pt[1]].join(" "):[F(he/255),F(Ee/255),F(Fe/255),pt[1]].join(" ")}else W=typeof he=="string"?[he,Ee,Fe,ot,pt[2]].join(" "):E.precision===2?[T(he),T(Ee),T(Fe),T(ot),pt[2]].join(" "):[F(he),F(Ee),F(Fe),F(ot),pt[2]].join(" ");return W},Us=x.__private__.getFilters=function(){return u},pi=x.__private__.putStream=function(E){var W=(E=E||{}).data||"",he=E.filters||Us(),Ee=E.alreadyAppliedFilters||[],Fe=E.addLength1||!1,ot=W.length,pt=E.objectId,At=function(j){return j};if(m!==null&&pt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(At=hr.encryptor(pt,0));var kt={};he===!0&&(he=["FlateEncode"]);var Ht=E.additionalKeyValues||[],Bt=(kt=Mt.API.processDataByFilters!==void 0?Mt.API.processDataByFilters(W,he):{data:W,reverseChain:[]}).reverseChain+(Array.isArray(Ee)?Ee.join(" "):Ee.toString());if(kt.data.length!==0&&(Ht.push({key:"Length",value:kt.data.length}),Fe===!0&&Ht.push({key:"Length1",value:ot})),Bt.length!=0)if(Bt.split("/").length-1==1)Ht.push({key:"Filter",value:Bt});else{Ht.push({key:"Filter",value:"["+Bt+"]"});for(var vn=0;vn<Ht.length;vn+=1)if(Ht[vn].key==="DecodeParms"){for(var ir=[],Xn=0;Xn<kt.reverseChain.split("/").length-1;Xn+=1)ir.push("null");ir.push(Ht[vn].value),Ht[vn].value="["+ir.join(" ")+"]"}}Y("<<");for(var y=0;y<Ht.length;y++)Y("/"+Ht[y].key+" "+Ht[y].value);Y(">>"),kt.data.length!==0&&(Y("stream"),Y(At(kt.data)),Y("endstream"))},ka=x.__private__.putPage=function(E){var W=E.number,he=E.data,Ee=E.objId,Fe=E.contentsObjId;zr(Ee,!0),Y("<</Type /Page"),Y("/Parent "+E.rootDictionaryObjId+" 0 R"),Y("/Resources "+E.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(D(E.mediaBox.bottomLeftX))+" "+parseFloat(D(E.mediaBox.bottomLeftY))+" "+D(E.mediaBox.topRightX)+" "+D(E.mediaBox.topRightY)+"]"),E.cropBox!==null&&Y("/CropBox ["+D(E.cropBox.bottomLeftX)+" "+D(E.cropBox.bottomLeftY)+" "+D(E.cropBox.topRightX)+" "+D(E.cropBox.topRightY)+"]"),E.bleedBox!==null&&Y("/BleedBox ["+D(E.bleedBox.bottomLeftX)+" "+D(E.bleedBox.bottomLeftY)+" "+D(E.bleedBox.topRightX)+" "+D(E.bleedBox.topRightY)+"]"),E.trimBox!==null&&Y("/TrimBox ["+D(E.trimBox.bottomLeftX)+" "+D(E.trimBox.bottomLeftY)+" "+D(E.trimBox.topRightX)+" "+D(E.trimBox.topRightY)+"]"),E.artBox!==null&&Y("/ArtBox ["+D(E.artBox.bottomLeftX)+" "+D(E.artBox.bottomLeftY)+" "+D(E.artBox.topRightX)+" "+D(E.artBox.topRightY)+"]"),typeof E.userUnit=="number"&&E.userUnit!==1&&Y("/UserUnit "+E.userUnit),nn.publish("putPage",{objId:Ee,pageContext:It[W],pageNumber:W,page:he}),Y("/Contents "+Fe+" 0 R"),Y(">>"),Y("endobj");var ot=he.join(`
`);return z===$&&(ot+=`
Q`),zr(Fe,!0),pi({data:ot,filters:Us(),objectId:Fe}),Y("endobj"),Ee},Ri=x.__private__.putPages=function(){var E,W,he=[];for(E=1;E<=Pt;E++)It[E].objId=sr(),It[E].contentsObjId=sr();for(E=1;E<=Pt;E++)he.push(ka({number:E,data:Te[E],objId:It[E].objId,contentsObjId:It[E].contentsObjId,mediaBox:It[E].mediaBox,cropBox:It[E].cropBox,bleedBox:It[E].bleedBox,trimBox:It[E].trimBox,artBox:It[E].artBox,userUnit:It[E].userUnit,rootDictionaryObjId:ds,resourceDictionaryObjId:Bn}));zr(ds,!0),Y("<</Type /Pages");var Ee="/Kids [";for(W=0;W<Pt;W++)Ee+=he[W]+" 0 R ";Y(Ee+"]"),Y("/Count "+Pt),Y(">>"),Y("endobj"),nn.publish("postPutPages")},Bs=function(E){nn.publish("putFont",{font:E,out:Y,newObject:Kn,putStream:pi}),E.isAlreadyPutted!==!0&&(E.objectNumber=Kn(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+Zd(E.postScriptName)),Y("/Subtype /Type1"),typeof E.encoding=="string"&&Y("/Encoding /"+E.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},ga=function(E){E.objectNumber=Kn();var W=[];W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Form"}),W.push({key:"BBox",value:"["+[D(E.x),D(E.y),D(E.x+E.width),D(E.y+E.height)].join(" ")+"]"}),W.push({key:"Matrix",value:"["+E.matrix.toString()+"]"});var he=E.pages[1].join(`
`);pi({data:he,additionalKeyValues:W,objectId:E.objectNumber}),Y("endobj")},Js=function(E,W){W||(W=21);var he=Kn(),Ee=(function(pt,At){var kt,Ht=[],Bt=1/(At-1);for(kt=0;kt<1;kt+=Bt)Ht.push(kt);if(Ht.push(1),pt[0].offset!=0){var vn={offset:0,color:pt[0].color};pt.unshift(vn)}if(pt[pt.length-1].offset!=1){var ir={offset:1,color:pt[pt.length-1].color};pt.push(ir)}for(var Xn="",y=0,j=0;j<Ht.length;j++){for(kt=Ht[j];kt>pt[y+1].offset;)y++;var U=pt[y].offset,se=(kt-U)/(pt[y+1].offset-U),ze=pt[y].color,Ye=pt[y+1].color;Xn+=ae(Math.round((1-se)*ze[0]+se*Ye[0]).toString(16))+ae(Math.round((1-se)*ze[1]+se*Ye[1]).toString(16))+ae(Math.round((1-se)*ze[2]+se*Ye[2]).toString(16))}return Xn.trim()})(E.colors,W),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+W+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pi({data:Ee,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),Y("endobj"),E.objectNumber=Kn(),Y("<< /ShadingType "+E.type),Y("/ColorSpace /DeviceRGB");var ot="/Coords ["+D(parseFloat(E.coords[0]))+" "+D(parseFloat(E.coords[1]))+" ";E.type===2?ot+=D(parseFloat(E.coords[2]))+" "+D(parseFloat(E.coords[3])):ot+=D(parseFloat(E.coords[2]))+" "+D(parseFloat(E.coords[3]))+" "+D(parseFloat(E.coords[4]))+" "+D(parseFloat(E.coords[5])),Y(ot+="]"),E.matrix&&Y("/Matrix ["+E.matrix.toString()+"]"),Y("/Function "+he+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},_s=function(E,W){var he=sr(),Ee=Kn();W.push({resourcesOid:he,objectOid:Ee}),E.objectNumber=Ee;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+E.boundingBox.map(D).join(" ")+"]"}),Fe.push({key:"XStep",value:D(E.xStep)}),Fe.push({key:"YStep",value:D(E.yStep)}),Fe.push({key:"Resources",value:he+" 0 R"}),E.matrix&&Fe.push({key:"Matrix",value:"["+E.matrix.toString()+"]"}),pi({data:E.stream,additionalKeyValues:Fe,objectId:E.objectNumber}),Y("endobj")},Zs=function(E){for(var W in E.objectNumber=Kn(),Y("<<"),E)switch(W){case"opacity":Y("/ca "+T(E[W]));break;case"stroke-opacity":Y("/CA "+T(E[W]))}Y(">>"),Y("endobj")},mi=function(E){zr(E.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var W in Y("/Font <<"),et)et.hasOwnProperty(W)&&(w===!1||w===!0&&_.hasOwnProperty(W))&&Y("/"+W+" "+et[W].objectNumber+" 0 R");Y(">>")})(),(function(){if(Object.keys(Nt).length>0){for(var W in Y("/Shading <<"),Nt)Nt.hasOwnProperty(W)&&Nt[W]instanceof Gc&&Nt[W].objectNumber>=0&&Y("/"+W+" "+Nt[W].objectNumber+" 0 R");nn.publish("putShadingPatternDict"),Y(">>")}})(),(function(W){if(Object.keys(Nt).length>0){for(var he in Y("/Pattern <<"),Nt)Nt.hasOwnProperty(he)&&Nt[he]instanceof x.TilingPattern&&Nt[he].objectNumber>=0&&Nt[he].objectNumber<W&&Y("/"+he+" "+Nt[he].objectNumber+" 0 R");nn.publish("putTilingPatternDict"),Y(">>")}})(E.objectOid),(function(){if(Object.keys(Ot).length>0){var W;for(W in Y("/ExtGState <<"),Ot)Ot.hasOwnProperty(W)&&Ot[W].objectNumber>=0&&Y("/"+W+" "+Ot[W].objectNumber+" 0 R");nn.publish("putGStateDict"),Y(">>")}})(),(function(){for(var W in Y("/XObject <<"),us)us.hasOwnProperty(W)&&us[W].objectNumber>=0&&Y("/"+W+" "+us[W].objectNumber+" 0 R");nn.publish("putXobjectDict"),Y(">>")})(),Y(">>"),Y("endobj")},yr=function(E){bt[E.fontName]=bt[E.fontName]||{},bt[E.fontName][E.fontStyle]=E.id},ko=function(E,W,he,Ee,Fe){var ot={id:"F"+(Object.keys(et).length+1).toString(10),postScriptName:E,fontName:W,fontStyle:he,encoding:Ee,isStandardFont:Fe||!1,metadata:{}};return nn.publish("addFont",{font:ot,instance:this}),et[ot.id]=ot,yr(ot),ot.id},Vs=x.__private__.pdfEscape=x.pdfEscape=function(E,W){return(function(he,Ee){var Fe,ot,pt,At,kt,Ht,Bt,vn,ir;if(pt=(Ee=Ee||{}).sourceEncoding||"Unicode",kt=Ee.outputEncoding,(Ee.autoencode||kt)&&et[Oe].metadata&&et[Oe].metadata[pt]&&et[Oe].metadata[pt].encoding&&(At=et[Oe].metadata[pt].encoding,!kt&&et[Oe].encoding&&(kt=et[Oe].encoding),!kt&&At.codePages&&(kt=At.codePages[0]),typeof kt=="string"&&(kt=At[kt]),kt)){for(Bt=!1,Ht=[],Fe=0,ot=he.length;Fe<ot;Fe++)(vn=kt[he.charCodeAt(Fe)])?Ht.push(String.fromCharCode(vn)):Ht.push(he[Fe]),Ht[Fe].charCodeAt(0)>>8&&(Bt=!0);he=Ht.join("")}for(Fe=he.length;Bt===void 0&&Fe!==0;)he.charCodeAt(Fe-1)>>8&&(Bt=!0),Fe--;if(!Bt)return he;for(Ht=Ee.noBOM?[]:[254,255],Fe=0,ot=he.length;Fe<ot;Fe++){if((ir=(vn=he.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(ir),Ht.push(vn-(ir<<8))}return String.fromCharCode.apply(void 0,Ht)})(E,W).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gi=x.__private__.beginPage=function(E){Te[++Pt]=[],It[Pt]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(E[0]),topRightY:Number(E[1])}},Do(Pt),Ie(Te[G])},Ii=function(E,W){var he,Ee,Fe;switch(t=W||t,typeof E=="string"&&(he=k(E.toLowerCase()),Array.isArray(he)&&(Ee=he[0],Fe=he[1])),Array.isArray(E)&&(Ee=E[0]*De,Fe=E[1]*De),isNaN(Ee)&&(Ee=i[0],Fe=i[1]),(Ee>14400||Fe>14400)&&(gr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ee=Math.min(14400,Ee),Fe=Math.min(14400,Fe)),i=[Ee,Fe],t.substr(0,1)){case"l":Fe>Ee&&(i=[Fe,Ee]);break;case"p":Ee>Fe&&(i=[Fe,Ee])}gi(i),zt(qs),Y(ti),ri!==0&&Y(ri+" J"),Pr!==0&&Y(Pr+" j"),nn.publish("addPage",{pageNumber:Pt})},ro=function(E){E>0&&E<=Pt&&(Te.splice(E,1),It.splice(E,1),Pt--,G>Pt&&(G=Pt),this.setPage(G))},Do=function(E){E>0&&E<=Pt&&(G=E)},Po=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Te.length-1},yl=function(E,W,he){var Ee,Fe=void 0;return he=he||{},E=E!==void 0?E:et[Oe].fontName,W=W!==void 0?W:et[Oe].fontStyle,Ee=E.toLowerCase(),bt[Ee]!==void 0&&bt[Ee][W]!==void 0?Fe=bt[Ee][W]:bt[E]!==void 0&&bt[E][W]!==void 0?Fe=bt[E][W]:he.disableWarning===!1&&gr.warn("Unable to look up font label for font '"+E+"', '"+W+"'. Refer to getFontList() for available fonts."),Fe||he.noFallback||(Fe=bt.times[W])==null&&(Fe=bt.times.normal),Fe},ei=x.__private__.putInfo=function(){var E=Kn(),W=function(Ee){return Ee};for(var he in m!==null&&(W=hr.encryptor(E,0)),Y("<<"),Y("/Producer ("+Vs(W("jsPDF "+Mt.version))+")"),tt)tt.hasOwnProperty(he)&&tt[he]&&Y("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+Vs(W(tt[he]))+")");Y("/CreationDate ("+Vs(W(ye))+")"),Y(">>"),Y("endobj")},hs=x.__private__.putCatalog=function(E){var W=(E=E||{}).rootDictionaryObjId||ds;switch(Kn(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+W+" 0 R"),Ce||(Ce="fullwidth"),Ce){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+Ce;he.substr(he.length-1)==="%"&&(Ce=parseInt(Ce)/100),typeof Ce=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+T(Ce)+"]")}switch(st||(st="continuous"),st){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}nt&&Y("/PageMode /"+nt),nn.publish("putCatalog"),Y(">>"),Y("endobj")},Nr=x.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(ge+1)),Y("/Root "+ge+" 0 R"),Y("/Info "+(ge-1)+" 0 R"),m!==null&&Y("/Encrypt "+hr.oid+" 0 R"),Y("/ID [ <"+le+"> <"+le+"> ]"),Y(">>")},yn=x.__private__.putHeader=function(){Y("%PDF-"+A),Y("%")},ya=x.__private__.putXRef=function(){var E="0000000000";Y("xref"),Y("0 "+(ge+1)),Y("0000000000 65535 f ");for(var W=1;W<=ge;W++)typeof _e[W]=="function"?Y((E+_e[W]()).slice(-10)+" 00000 n "):_e[W]!==void 0?Y((E+_e[W]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},yi=x.__private__.buildDocument=function(){var E;ge=0,Me=0,Ve=[],_e=[],Q=[],ds=sr(),Bn=sr(),Ie(Ve),nn.publish("buildDocument"),yn(),Ri(),(function(){nn.publish("putAdditionalObjects");for(var he=0;he<Q.length;he++){var Ee=Q[he];zr(Ee.objId,!0),Y(Ee.content),Y("endobj")}nn.publish("postPutAdditionalObjects")})(),E=[],(function(){for(var he in et)et.hasOwnProperty(he)&&(w===!1||w===!0&&_.hasOwnProperty(he))&&Bs(et[he])})(),(function(){var he;for(he in Ot)Ot.hasOwnProperty(he)&&Zs(Ot[he])})(),(function(){for(var he in us)us.hasOwnProperty(he)&&ga(us[he])})(),(function(he){var Ee;for(Ee in Nt)Nt.hasOwnProperty(Ee)&&(Nt[Ee]instanceof Gc?Js(Nt[Ee]):Nt[Ee]instanceof Uu&&_s(Nt[Ee],he))})(E),nn.publish("putResources"),E.forEach(mi),mi({resourcesOid:Bn,objectOid:Number.MAX_SAFE_INTEGER}),nn.publish("postPutResources"),m!==null&&(hr.oid=Kn(),Y("<<"),Y("/Filter /Standard"),Y("/V "+hr.v),Y("/R "+hr.r),Y("/U <"+hr.toHexString(hr.U)+">"),Y("/O <"+hr.toHexString(hr.O)+">"),Y("/P "+hr.P),Y(">>"),Y("endobj")),ei(),hs();var W=Me;return ya(),Nr(),Y("startxref"),Y(""+W),Y("%%EOF"),Ie(Te[G]),Ve.join(`
`)},_n=x.__private__.getBlob=function(E){return new Blob([Ne(E)],{type:"application/pdf"})},Da=x.output=x.__private__.output=(Os=function(E,W){switch(typeof(W=W||{})=="string"?W={filename:W}:W.filename=W.filename||"generated.pdf",E){case void 0:return yi();case"save":x.save(W.filename);break;case"arraybuffer":return Ne(yi());case"blob":return _n(yi());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(_n(yi()))||void 0;gr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",Ee=yi();try{he=vS(Ee)}catch{he=vS(unescape(encodeURIComponent(Ee)))}return"data:application/pdf;filename="+W.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';W.pdfObjectUrl&&(Fe=W.pdfObjectUrl,ot="");var pt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(W)+");<\/script></body></html>",At=en.open();return At!==null&&At.document.write(pt),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(W.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+W.filename+'" width="500px" height="400px" /></body></html>',Ht=en.open();if(Ht!==null){Ht.document.write(kt);var Bt=this;Ht.document.documentElement.querySelector("#pdfViewer").onload=function(){Ht.document.title=W.filename,Ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Bt.output("bloburl"))}}return Ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",W)+'"></iframe></body></html>',ir=en.open();if(ir!==null&&(ir.document.write(vn),ir.document.title=W.filename),ir||typeof safari>"u")return ir;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",W);default:return null}},Os.foo=function(){try{return Os.apply(this,arguments)}catch(he){var E=he.stack||"";~E.indexOf(" at ")&&(E=E.split(" at ")[1]);var W="Error in function "+E.split(`
`)[0].split("<")[0]+": "+he.message;if(!en.console)throw new Error(W);en.console.error(W,he),en.alert&&alert(W)}},Os.foo.bar=Os,Os.foo),Dr=function(E){return Array.isArray(ws)===!0&&ws.indexOf(E)>-1};switch(r){case"pt":De=1;break;case"mm":De=72/25.4;break;case"cm":De=72/2.54;break;case"in":De=72;break;case"px":De=Dr("px_scaling")==1?.75:96/72;break;case"pc":case"em":De=12;break;case"ex":De=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);De=r}var hr=null;J(),me();var Ar=x.__private__.getPageInfo=x.getPageInfo=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[E].objId,pageNumber:E,pageContext:It[E]}},so=x.__private__.getPageInfoByObjId=function(E){if(isNaN(E)||E%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var W in It)if(It[W].objId===E)break;return Ar(W)},cc=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:It[G].objId,pageNumber:G,pageContext:It[G]}};x.addPage=function(){return Ii.apply(this,arguments),this},x.setPage=function(){return Do.apply(this,arguments),Ie.call(this,Te[G]),this},x.insertPage=function(E){return this.addPage(),this.movePage(G,E),this},x.movePage=function(E,W){var he,Ee;if(E>W){he=Te[E],Ee=It[E];for(var Fe=E;Fe>W;Fe--)Te[Fe]=Te[Fe-1],It[Fe]=It[Fe-1];Te[W]=he,It[W]=Ee,this.setPage(W)}else if(E<W){he=Te[E],Ee=It[E];for(var ot=E;ot<W;ot++)Te[ot]=Te[ot+1],It[ot]=It[ot+1];Te[W]=he,It[W]=Ee,this.setPage(W)}return this},x.deletePage=function(){return ro.apply(this,arguments),this},x.__private__.text=x.text=function(E,W,he,Ee,Fe){var ot,pt,At,kt,Ht,Bt,vn,ir,Xn,y=(Ee=Ee||{}).scope||this;if(typeof E=="number"&&typeof W=="number"&&(typeof he=="string"||Array.isArray(he))){var j=he;he=W,W=E,E=j}if(arguments[3]instanceof Ut==0?(At=arguments[4],kt=arguments[5],rr(vn=arguments[3])==="object"&&vn!==null||(typeof At=="string"&&(kt=At,At=null),typeof vn=="string"&&(kt=vn,vn=null),typeof vn=="number"&&(At=vn,vn=null),Ee={flags:vn,angle:At,align:kt})):(I("The transform parameter of text() with a Matrix value"),Xn=Fe),isNaN(W)||isNaN(he)||E==null)throw new Error("Invalid arguments passed to jsPDF.text");if(E.length===0)return y;var U,se="",ze=typeof Ee.lineHeightFactor=="number"?Ee.lineHeightFactor:xa,Ye=y.internal.scaleFactor;function xt(On){return On=On.split("	").join(Array(Ee.TabLen||9).join(" ")),Vs(On,vn)}function Jt(On){for(var Rn,or=On.concat(),Fr=[],$a=or.length;$a--;)typeof(Rn=or.shift())=="string"?Fr.push(Rn):Array.isArray(On)&&(Rn.length===1||Rn[1]===void 0&&Rn[2]===void 0)?Fr.push(Rn[0]):Fr.push([Rn[0],Rn[1],Rn[2]]);return Fr}function ar(On,Rn){var or;if(typeof On=="string")or=Rn(On)[0];else if(Array.isArray(On)){for(var Fr,$a,Ea=On.concat(),Nl=[],xu=Ea.length;xu--;)typeof(Fr=Ea.shift())=="string"?Nl.push(Rn(Fr)[0]):Array.isArray(Fr)&&typeof Fr[0]=="string"&&($a=Rn(Fr[0],Fr[1],Fr[2]),Nl.push([$a[0],$a[1],$a[2]]));or=Nl}return or}var mn=!1,zn=!0;if(typeof E=="string")mn=!0;else if(Array.isArray(E)){var ps=E.concat();pt=[];for(var Ns,Zn=ps.length;Zn--;)(typeof(Ns=ps.shift())!="string"||Array.isArray(Ns)&&typeof Ns[0]!="string")&&(zn=!1);mn=zn}if(mn===!1)throw new Error('Type of text must be string or Array. "'+E+'" is not recognized.');typeof E=="string"&&(E=E.match(/[\r?\n]/)?E.split(/\r\n|\r|\n/g):[E]);var As=we/y.internal.scaleFactor,Li=As*(ze-1);switch(Ee.baseline){case"bottom":he-=Li;break;case"top":he+=As-Li;break;case"hanging":he+=As-2*Li;break;case"middle":he+=As/2-Li}if((Bt=Ee.maxWidth||0)>0&&(typeof E=="string"?E=y.splitTextToSize(E,Bt):Object.prototype.toString.call(E)==="[object Array]"&&(E=E.reduce(function(On,Rn){return On.concat(y.splitTextToSize(Rn,Bt))},[]))),ot={text:E,x:W,y:he,options:Ee,mutex:{pdfEscape:Vs,activeFontKey:Oe,fonts:et,activeFontSize:we}},nn.publish("preProcessText",ot),E=ot.text,At=(Ee=ot.options).angle,Xn instanceof Ut==0&&At&&typeof At=="number"){At*=Math.PI/180,Ee.rotationDirection===0&&(At=-At),z===$&&(At=-At);var Oa=Math.cos(At),Ua=Math.sin(At);Xn=new Ut(Oa,Ua,-Ua,Oa,0,0)}else At&&At instanceof Ut&&(Xn=At);z!==$||Xn||(Xn=Qs),(Ht=Ee.charSpace||ni)!==void 0&&(se+=D(L(Ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ir=Ee.horizontalScale)!==void 0&&(se+=D(100*ir)+` Tz
`),Ee.lang;var ii=-1,co=Ee.renderingMode!==void 0?Ee.renderingMode:Ee.stroke,uc=y.internal.getCurrentPageInfo().pageContext;switch(co){case 0:case!1:case"fill":ii=0;break;case 1:case!0:case"stroke":ii=1;break;case 2:case"fillThenStroke":ii=2;break;case 3:case"invisible":ii=3;break;case 4:case"fillAndAddForClipping":ii=4;break;case 5:case"strokeAndAddPathForClipping":ii=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ii=6;break;case 7:case"addToPathForClipping":ii=7}var vu=uc.usedRenderingMode!==void 0?uc.usedRenderingMode:-1;ii!==-1?se+=ii+` Tr
`:vu!==-1&&(se+=`0 Tr
`),ii!==-1&&(uc.usedRenderingMode=ii),kt=Ee.align||"left";var Fi,Sa=we*ze,uo=y.internal.pageSize.getWidth(),bu=et[Oe];Ht=Ee.charSpace||ni,Bt=Ee.maxWidth||0,vn=Object.assign({autoencode:!0,noBOM:!0},Ee.flags);var _a=[],Bo=function(On){return y.getStringUnitWidth(On,{font:bu,charSpace:Ht,fontSize:we,doKerning:!1})*we/Ye};if(Object.prototype.toString.call(E)==="[object Array]"){var bi;pt=Jt(E),kt!=="left"&&(Fi=pt.map(Bo));var ai,Ba=0;if(kt==="right"){W-=Fi[0],E=[],Zn=pt.length;for(var Va=0;Va<Zn;Va++)Va===0?(ai=ns(W),bi=Hr(he)):(ai=L(Ba-Fi[Va]),bi=-Sa),E.push([pt[Va],ai,bi]),Ba=Fi[Va]}else if(kt==="center"){W-=Fi[0]/2,E=[],Zn=pt.length;for(var ho=0;ho<Zn;ho++)ho===0?(ai=ns(W),bi=Hr(he)):(ai=L((Ba-Fi[ho])/2),bi=-Sa),E.push([pt[ho],ai,bi]),Ba=Fi[ho]}else if(kt==="left"){E=[],Zn=pt.length;for(var dc=0;dc<Zn;dc++)E.push(pt[dc])}else if(kt==="justify"&&bu.encoding==="Identity-H"){E=[],Zn=pt.length,Bt=Bt!==0?Bt:uo;for(var hc=0,Lr=0;Lr<Zn;Lr++)if(bi=Lr===0?Hr(he):-Sa,ai=Lr===0?ns(W):hc,Lr<Zn-1){var ud=L((Bt-Fi[Lr])/(pt[Lr].split(" ").length-1)),za=pt[Lr].split(" ");E.push([za[0]+" ",ai,bi]),hc=0;for(var qa=1;qa<za.length;qa++){var Ts=(Bo(za[qa-1]+" "+za[qa])-Bo(za[qa]))*Ye+ud;qa==za.length-1?E.push([za[qa],Ts,0]):E.push([za[qa]+" ",Ts,0]),hc-=Ts}}else E.push([pt[Lr],ai,bi]);E.push(["",hc,0])}else{if(kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(E=[],Zn=pt.length,Bt=Bt!==0?Bt:uo,Lr=0;Lr<Zn;Lr++){bi=Lr===0?Hr(he):-Sa,ai=Lr===0?ns(W):0;var fo=pt[Lr].split(" ").length-1,fc=fo>0?(Bt-Fi[Lr])/fo:0;Lr<Zn-1?_a.push(D(L(fc))):_a.push(0),E.push([pt[Lr],ai,bi])}}}(typeof Ee.R2L=="boolean"?Ee.R2L:ut)===!0&&(E=ar(E,function(On,Rn,or){return[On.split("").reverse().join(""),Rn,or]})),ot={text:E,x:W,y:he,options:Ee,mutex:{pdfEscape:Vs,activeFontKey:Oe,fonts:et,activeFontSize:we}},nn.publish("postProcessText",ot),E=ot.text,U=ot.mutex.isHex||!1;var pc=et[Oe].encoding;pc!=="WinAnsiEncoding"&&pc!=="StandardEncoding"||(E=ar(E,function(On,Rn,or){return[xt(On),Rn,or]})),pt=Jt(E),E=[];for(var po,mo,Ha,El=Array.isArray(pt[0])?1:0,Mi="",go=function(On,Rn,or){var Fr="";return or instanceof Ut?(or=typeof Ee.angle=="number"?ma(or,new Ut(1,0,0,1,On,Rn)):ma(new Ut(1,0,0,1,On,Rn),or),z===$&&(or=ma(new Ut(1,0,0,-1,0,0),or)),Fr=or.join(" ")+` Tm
`):Fr=D(On)+" "+D(Rn)+` Td
`,Fr},Hs=0;Hs<pt.length;Hs++){switch(Mi="",El){case 1:Ha=(U?"<":"(")+pt[Hs][0]+(U?">":")"),po=parseFloat(pt[Hs][1]),mo=parseFloat(pt[Hs][2]);break;case 0:Ha=(U?"<":"(")+pt[Hs]+(U?">":")"),po=ns(W),mo=Hr(he)}_a!==void 0&&_a[Hs]!==void 0&&(Mi=_a[Hs]+` Tw
`),Hs===0?E.push(Mi+go(po,mo,Xn)+Ha):El===0?E.push(Mi+Ha):El===1&&E.push(Mi+go(po,mo,Xn)+Ha)}E=El===0?E.join(` Tj
T* `):E.join(` Tj
`),E+=` Tj
`;var Ki=`BT
/`;return Ki+=Oe+" "+we+` Tf
`,Ki+=D(we*ze)+` TL
`,Ki+=Di+`
`,Ki+=se,Ki+=E,Y(Ki+="ET"),_[Oe]=!0,y};var vl=x.__private__.clip=x.clip=function(E){return Y(E==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return vl("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Y("n"),this};var Es=x.__private__.isValidStyle=function(E){var W=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(E)!==-1&&(W=!0),W};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(E){return Es(E)&&(p=E),this};var bl=x.__private__.getStyle=x.getStyle=function(E){var W=p;switch(E){case"D":case"S":W="S";break;case"F":W="f";break;case"FD":case"DF":W="B";break;case"f":case"f*":case"B":case"B*":W=E}return W},va=x.close=function(){return Y("h"),this};x.stroke=function(){return Y("S"),this},x.fill=function(E){return ts("f",E),this},x.fillEvenOdd=function(E){return ts("f*",E),this},x.fillStroke=function(E){return ts("B",E),this},x.fillStrokeEvenOdd=function(E){return ts("B*",E),this};var ts=function(E,W){rr(W)==="object"?wl(W,E):Y(E)},Pa=function(E){E===null||z===$&&E===void 0||(E=bl(E),Y(E))};function xl(E,W,he,Ee,Fe){var ot=new Uu(W||this.boundingBox,he||this.xStep,Ee||this.yStep,this.gState,Fe||this.matrix);ot.stream=this.stream;var pt=E+"$$"+this.cloneIndex+++"$$";return Ms(pt,ot),ot}var wl=function(E,W){var he=un[E.key],Ee=Nt[he];if(Ee instanceof Gc)Y("q"),Y(Lo(W)),Ee.gState&&x.setGState(Ee.gState),Y(E.matrix.toString()+" cm"),Y("/"+he+" sh"),Y("Q");else if(Ee instanceof Uu){var Fe=new Ut(1,0,0,-1,0,Pi());E.matrix&&(Fe=Fe.multiply(E.matrix||Qs),he=xl.call(Ee,E.key,E.boundingBox,E.xStep,E.yStep,Fe).id),Y("q"),Y("/Pattern cs"),Y("/"+he+" scn"),Ee.gState&&x.setGState(Ee.gState),Y(W),Y("Q")}},Lo=function(E){switch(E){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fo=x.moveTo=function(E,W){return Y(D(L(E))+" "+D(ee(W))+" m"),this},ba=x.lineTo=function(E,W){return Y(D(L(E))+" "+D(ee(W))+" l"),this},zs=x.curveTo=function(E,W,he,Ee,Fe,ot){return Y([D(L(E)),D(ee(W)),D(L(he)),D(ee(Ee)),D(L(Fe)),D(ee(ot)),"c"].join(" ")),this};x.__private__.line=x.line=function(E,W,he,Ee,Fe){if(isNaN(E)||isNaN(W)||isNaN(he)||isNaN(Ee)||!Es(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return z===q?this.lines([[he-E,Ee-W]],E,W,[1,1],Fe||"S"):this.lines([[he-E,Ee-W]],E,W,[1,1]).stroke()},x.__private__.lines=x.lines=function(E,W,he,Ee,Fe,ot){var pt,At,kt,Ht,Bt,vn,ir,Xn,y,j,U,se;if(typeof E=="number"&&(se=he,he=W,W=E,E=se),Ee=Ee||[1,1],ot=ot||!1,isNaN(W)||isNaN(he)||!Array.isArray(E)||!Array.isArray(Ee)||!Es(Fe)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fo(W,he),pt=Ee[0],At=Ee[1],Ht=E.length,j=W,U=he,kt=0;kt<Ht;kt++)(Bt=E[kt]).length===2?(j=Bt[0]*pt+j,U=Bt[1]*At+U,ba(j,U)):(vn=Bt[0]*pt+j,ir=Bt[1]*At+U,Xn=Bt[2]*pt+j,y=Bt[3]*At+U,j=Bt[4]*pt+j,U=Bt[5]*At+U,zs(vn,ir,Xn,y,j,U));return ot&&va(),Pa(Fe),this},x.path=function(E){for(var W=0;W<E.length;W++){var he=E[W],Ee=he.c;switch(he.op){case"m":Fo(Ee[0],Ee[1]);break;case"l":ba(Ee[0],Ee[1]);break;case"c":zs.apply(this,Ee);break;case"h":va()}}return this},x.__private__.rect=x.rect=function(E,W,he,Ee,Fe){if(isNaN(E)||isNaN(W)||isNaN(he)||isNaN(Ee)||!Es(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return z===q&&(Ee=-Ee),Y([D(L(E)),D(ee(W)),D(L(he)),D(L(Ee)),"re"].join(" ")),Pa(Fe),this},x.__private__.triangle=x.triangle=function(E,W,he,Ee,Fe,ot,pt){if(isNaN(E)||isNaN(W)||isNaN(he)||isNaN(Ee)||isNaN(Fe)||isNaN(ot)||!Es(pt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-E,Ee-W],[Fe-he,ot-Ee],[E-Fe,W-ot]],E,W,[1,1],pt,!0),this},x.__private__.roundedRect=x.roundedRect=function(E,W,he,Ee,Fe,ot,pt){if(isNaN(E)||isNaN(W)||isNaN(he)||isNaN(Ee)||isNaN(Fe)||isNaN(ot)||!Es(pt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*he),ot=Math.min(ot,.5*Ee),this.lines([[he-2*Fe,0],[Fe*At,0,Fe,ot-ot*At,Fe,ot],[0,Ee-2*ot],[0,ot*At,-Fe*At,ot,-Fe,ot],[2*Fe-he,0],[-Fe*At,0,-Fe,-ot*At,-Fe,-ot],[0,2*ot-Ee],[0,-ot*At,Fe*At,-ot,Fe,-ot]],E+Fe,W,[1,1],pt,!0),this},x.__private__.ellipse=x.ellipse=function(E,W,he,Ee,Fe){if(isNaN(E)||isNaN(W)||isNaN(he)||isNaN(Ee)||!Es(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*he,pt=4/3*(Math.SQRT2-1)*Ee;return Fo(E+he,W),zs(E+he,W-pt,E+ot,W-Ee,E,W-Ee),zs(E-ot,W-Ee,E-he,W-pt,E-he,W),zs(E-he,W+pt,E-ot,W+Ee,E,W+Ee),zs(E+ot,W+Ee,E+he,W+pt,E+he,W),Pa(Fe),this},x.__private__.circle=x.circle=function(E,W,he,Ee){if(isNaN(E)||isNaN(W)||isNaN(he)||!Es(Ee))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(E,W,he,he,Ee)},x.setFont=function(E,W,he){return he&&(W=H(W,he)),Oe=yl(E,W,{disableWarning:!1}),this};var ki=x.__private__.getFont=x.getFont=function(){return et[yl.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var E,W,he={};for(E in bt)if(bt.hasOwnProperty(E))for(W in he[E]=[],bt[E])bt[E].hasOwnProperty(W)&&he[E].push(W);return he},x.addFont=function(E,W,he,Ee,Fe){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(he=H(he,Ee)),ko.call(this,E,W,he,Fe=Fe||"Identity-H")};var xa,qs=n.lineWidth||.200025,La=x.__private__.getLineWidth=x.getLineWidth=function(){return qs},zt=x.__private__.setLineWidth=x.setLineWidth=function(E){return qs=E,Y(D(L(E))+" w"),this};x.__private__.setLineDash=Mt.API.setLineDash=Mt.API.setLineDashPattern=function(E,W){if(E=E||[],W=W||0,isNaN(W)||!Array.isArray(E))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return E=E.map(function(he){return D(L(he))}).join(" "),W=D(L(W)),Y("["+E+"] "+W+" d"),this};var io=x.__private__.getLineHeight=x.getLineHeight=function(){return we*xa};x.__private__.getLineHeight=x.getLineHeight=function(){return we*xa};var Mo=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(E){return typeof(E=E||1.15)=="number"&&(xa=E),this},Fa=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return xa};Mo(n.lineHeight);var ns=x.__private__.getHorizontalCoordinate=function(E){return L(E)},Hr=x.__private__.getVerticalCoordinate=function(E){return z===$?E:It[G].mediaBox.topRightY-It[G].mediaBox.bottomLeftY-L(E)},ao=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(E){return D(ns(E))},Vn=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(E){return D(Hr(E))},ti=n.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Jn(ti)},x.__private__.setStrokeColor=x.setDrawColor=function(E,W,he,Ee){return ti=qr({ch1:E,ch2:W,ch3:he,ch4:Ee,pdfColorType:"draw",precision:2}),Y(ti),this};var oo=n.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Jn(oo)},x.__private__.setFillColor=x.setFillColor=function(E,W,he,Ee){return oo=qr({ch1:E,ch2:W,ch3:he,ch4:Ee,pdfColorType:"fill",precision:2}),Y(oo),this};var Di=n.textColor||"0 g",Sl=x.__private__.getTextColor=x.getTextColor=function(){return Jn(Di)};x.__private__.setTextColor=x.setTextColor=function(E,W,he,Ee){return Di=qr({ch1:E,ch2:W,ch3:he,ch4:Ee,pdfColorType:"text",precision:3}),this};var ni=n.charSpace,wa=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(ni||0)};x.__private__.setCharSpace=x.setCharSpace=function(E){if(isNaN(E))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ni=E,this};var ri=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(E){var W=x.CapJoinStyles[E];if(W===void 0)throw new Error("Line cap style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ri=W,Y(W+" J"),this};var Pr=0;x.__private__.setLineJoin=x.setLineJoin=function(E){var W=x.CapJoinStyles[E];if(W===void 0)throw new Error("Line join style of '"+E+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pr=W,Y(W+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(E){if(E=E||0,isNaN(E))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(D(L(E))+" M"),this},x.GState=$f,x.setGState=function(E){(E=typeof E=="string"?Ot[Vt[E]]:Hi(null,E)).equals(Cn)||(Y("/"+E.id+" gs"),Cn=E)};var Hi=function(E,W){if(!E||!Vt[E]){var he=!1;for(var Ee in Ot)if(Ot.hasOwnProperty(Ee)&&Ot[Ee].equals(W)){he=!0;break}if(he)W=Ot[Ee];else{var Fe="GS"+(Object.keys(Ot).length+1).toString(10);Ot[Fe]=W,W.id=Fe}return E&&(Vt[E]=W.id),nn.publish("addGState",W),W}};x.addGState=function(E,W){return Hi(E,W),this},x.saveGraphicsState=function(){return Y("q"),St.push({key:Oe,size:we,color:Di}),this},x.restoreGraphicsState=function(){Y("Q");var E=St.pop();return Oe=E.key,we=E.size,Di=E.color,Cn=null,this},x.setCurrentTransformationMatrix=function(E){return Y(E.toString()+" cm"),this},x.comment=function(E){return Y("#"+E),this};var fs=function(E,W){var he=E||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(ot){isNaN(ot)||(he=parseFloat(ot))}});var Ee=W||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ee},set:function(ot){isNaN(ot)||(Ee=parseFloat(ot))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(ot){Fe=ot.toString()}}),this},$i=function(E,W,he,Ee){fs.call(this,E,W),this.type="rect";var Fe=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(pt){isNaN(pt)||(Fe=parseFloat(pt))}});var ot=Ee||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(pt){isNaN(pt)||(ot=parseFloat(pt))}}),this},Ma=function(){this.page=Pt,this.currentPage=G,this.pages=Te.slice(0),this.pagesContext=It.slice(0),this.x=Be,this.y=it,this.matrix=gt,this.width=vi(G),this.height=Oo(G),this.outputDestination=be,this.id="",this.objectNumber=-1};Ma.prototype.restore=function(){Pt=this.page,G=this.currentPage,It=this.pagesContext,Te=this.pages,Be=this.x,it=this.y,gt=this.matrix,lo(G,this.width),si(G,this.height),be=this.outputDestination};var Gi=function(E,W,he,Ee,Fe){es.push(new Ma),Pt=G=0,Te=[],Be=E,it=W,gt=Fe,gi([he,Ee])};for(var Wi in x.beginFormObject=function(E,W,he,Ee,Fe){return Gi(E,W,he,Ee,Fe),this},x.endFormObject=function(E){return(function(W){if(qi[W])es.pop().restore();else{var he=new Ma,Ee="Xo"+(Object.keys(us).length+1).toString(10);he.id=Ee,qi[W]=Ee,us[Ee]=he,nn.publish("addFormObject",he),es.pop().restore()}})(E),this},x.doFormObject=function(E,W){var he=us[qi[E]];return Y("q"),Y(W.toString()+" cm"),Y("/"+he.id+" Do"),Y("Q"),this},x.getFormObject=function(E){var W=us[qi[E]];return{x:W.x,y:W.y,width:W.width,height:W.height,matrix:W.matrix}},x.save=function(E,W){return E=E||"generated.pdf",(W=W||{}).returnPromise=W.returnPromise||!1,W.returnPromise===!1?(Fu(_n(yi()),E),typeof Fu.unload=="function"&&en.setTimeout&&setTimeout(Fu.unload,911),this):new Promise(function(he,Ee){try{var Fe=Fu(_n(yi()),E);typeof Fu.unload=="function"&&en.setTimeout&&setTimeout(Fu.unload,911),he(Fe)}catch(ot){Ee(ot.message)}})},Mt.API)Mt.API.hasOwnProperty(Wi)&&(Wi==="events"&&Mt.API.events.length?(function(E,W){var he,Ee,Fe;for(Fe=W.length-1;Fe!==-1;Fe--)he=W[Fe][0],Ee=W[Fe][1],E.subscribe.apply(E,[he].concat(typeof Ee=="function"?[Ee]:Ee))})(nn,Mt.API.events):x[Wi]=Mt.API[Wi]);function vi(E){return It[E].mediaBox.topRightX-It[E].mediaBox.bottomLeftX}function lo(E,W){It[E].mediaBox.topRightX=W+It[E].mediaBox.bottomLeftX}function Oo(E){return It[E].mediaBox.topRightY-It[E].mediaBox.bottomLeftY}function si(E,W){It[E].mediaBox.topRightY=W+It[E].mediaBox.bottomLeftY}var Yi=x.getPageWidth=function(E){return vi(E=E||G)/De},_l=x.setPageWidth=function(E,W){lo(E,W*De)},Pi=x.getPageHeight=function(E){return Oo(E=E||G)/De},Uo=x.setPageHeight=function(E,W){si(E,W*De)};return x.internal={pdfEscape:Vs,getStyle:bl,getFont:ki,getFontSize:Je,getCharSpace:wa,getTextColor:Sl,getLineHeight:io,getLineHeightFactor:Fa,getLineWidth:La,write:pe,getHorizontalCoordinate:ns,getVerticalCoordinate:Hr,getCoordinateString:ao,getVerticalCoordinateString:Vn,collections:{},newObject:Kn,newAdditionalObject:Ss,newObjectDeferred:sr,newObjectDeferredBegin:zr,getFilters:Us,putStream:pi,events:nn,scaleFactor:De,pageSize:{getWidth:function(){return Yi(G)},setWidth:function(E){_l(G,E)},getHeight:function(){return Pi(G)},setHeight:function(E){Uo(G,E)}},encryptionOptions:m,encryption:hr,getEncryptor:function(E){return m!==null?hr.encryptor(E,0):function(W){return W}},output:Da,getNumberOfPages:Po,get pages(){return Te},out:Y,f2:T,f3:F,getPageInfo:Ar,getPageInfoByObjId:so,getCurrentPageInfo:cc,getPDFVersion:R,Point:fs,Rectangle:$i,Matrix:Ut,hasHotfix:Dr},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Yi(G)},set:function(E){_l(G,E)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return Pi(G)},set:function(E){Uo(G,E)},enumerable:!0,configurable:!0}),(function(E){for(var W=0,he=je.length;W<he;W++){var Ee=ko.call(this,E[W][0],E[W][1],E[W][2],je[W][3],!0);w===!1&&(_[Ee]=!0);var Fe=E[W][0].split("-");yr({id:Ee,fontName:Fe[0],fontStyle:Fe[1]||""})}nn.publish("addFonts",{fonts:et,dictionary:bt})}).call(x,je),Oe="F1",Ii(i,t),nn.publish("initialized"),x}Jd.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},Jd.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jd.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Jd.prototype.processOwnerPassword=function(n,e){return L1(P1(e).substr(0,5),n)},Jd.prototype.encryptor=function(n,e){var t=P1(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return L1(t,r)}},$f.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||rr(n)!==rr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Mt.API={events:[]},Mt.version="3.0.4";var Qr=Mt.API,o2=1,cd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Gd=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},an=function(n){return n.toFixed(2)},Vc=function(n){return n.toFixed(5)};Qr.__acroform__={};var pa=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},SS=function(n){return n*o2},tl=function(n){var e=new GA,t=Rt.internal.getHeight(n)||0,r=Rt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(an(r)),Number(an(t))],e},NF=Qr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},AF=Qr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},TF=Qr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},as=Qr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return TF(n,e-1)},os=Qr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return NF(n,e-1)},ls=Qr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return AF(n,e-1)},jF=Qr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],u=n[2],d=n[3],h={};return h.lowerLeft_X=t(i)||0,h.lowerLeft_Y=r(o+d)||0,h.upperRight_X=t(i+u)||0,h.upperRight_Y=r(o)||0,[Number(an(h.lowerLeft_X)),Number(an(h.lowerLeft_Y)),Number(an(h.upperRight_X)),Number(an(h.upperRight_Y))]},CF=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=F1(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+an(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=tl(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},F1=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(T){return T.split(`
`)}):i.map(function(T){return[T]});var o=t,u=Rt.internal.getHeight(n)||0;u=u<0?-u:u;var d=Rt.internal.getWidth(n)||0;d=d<0?-d:d;var h=function(T,F,L){if(T+1<i.length){var ee=F+" "+i[T+1][0];return ym(ee,n,L).width<=d-4}return!1};o++;e:for(;o>0;){e="",o--;var p,m,w=ym("3",n,o).height,_=n.multiline?u-o:(u-w)/2,x=_+=2,A=0,R=0,C=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+ym(e,n,o=12).width+", FieldWidth:"+d+`
`;break}for(var k="",q=0,$=0;$<i.length;$++)if(i.hasOwnProperty($)){var z=!1;if(i[$].length!==1&&C!==i[$].length-1){if((w+2)*(q+2)+2>u)continue e;k+=i[$][C],z=!0,R=$,$--}else{k=(k+=i[$][C]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var oe=parseInt($),ce=h(oe,k,o),H=$>=i.length-1;if(ce&&!H){k+=" ",C=0;continue}if(ce||H){if(H)R=oe;else if(n.multiline&&(w+2)*(q+2)+2>u)continue e}else{if(!n.multiline||(w+2)*(q+2)+2>u)continue e;R=oe}}for(var D="",I=A;I<=R;I++){var V=i[I];if(n.multiline){if(I===R){D+=V[C]+" ",C=(C+1)%V.length;continue}if(I===A){D+=V[V.length-1]+" ";continue}}D+=V[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,m=ym(D,n,o).width,n.textAlign){case"right":p=d-m-2;break;case"center":p=(d-m)/2;break;default:p=2}e+=an(p)+" "+an(x)+` Td
`,e+="("+cd(D)+`) Tj
`,e+=-an(p)+` 0 Td
`,x=-(o+2),m=0,A=z?R:R+1,q++,k=""}break}return r.text=e,r.fontSize=o,r},ym=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},RF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},IF=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},kF=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Ro.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(RF)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");o2=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new WA,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&IF(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var u in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(u)){var d=r[u],h=[],p=d.Rect;if(d.Rect&&(d.Rect=jF(d.Rect,i)),i.internal.newObjectDeferredBegin(d.objId,!0),d.DA=Rt.createDefaultAppearanceStream(d),rr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(h=d.getKeyValueListForStream()),d.Rect=p,d.hasAppearanceStream&&!d.appearanceStreamContent){var m=CF(d);h.push({key:"AP",value:"<</N "+m+">>"}),i.internal.acroformPlugin.xForms.push(m)}if(d.appearanceStreamContent){var w="";for(var _ in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(_)){var x=d.appearanceStreamContent[_];if(w+="/"+_+" ",w+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var u in x)if(x.hasOwnProperty(u)){var A=x[u];typeof A=="function"&&(A=A.call(i,d)),w+="/"+u+" "+A+" ",i.internal.acroformPlugin.xForms.indexOf(A)>=0||i.internal.acroformPlugin.xForms.push(A)}}else typeof(A=x)=="function"&&(A=A.call(i,d)),w+="/"+u+" "+A,i.internal.acroformPlugin.xForms.indexOf(A)>=0||i.internal.acroformPlugin.xForms.push(A);w+=">>"}h.push({key:"AP",value:`<<
`+w+">>"})}i.internal.putStream({additionalKeyValues:h,objectId:d.objId}),i.internal.out("endobj")}o&&(function(R,C){for(var k in R)if(R.hasOwnProperty(k)){var q=k,$=R[k];C.internal.newObjectDeferredBegin($.objId,!0),rr($)==="object"&&typeof $.putStream=="function"&&$.putStream(),delete R[q]}})(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},$A=Qr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(u){return u};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),rr(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+cd(r(n[o].toString()))+")"):i+=n[o].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Uy=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+cd(r(n))+")"},sl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};sl.prototype.toString=function(){return this.objId+" 0 R"},sl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},sl.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:$A(i,this.objId,this.scope)}):i instanceof sl?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var GA=function(){sl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};pa(GA,sl);var WA=function(){sl.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+cd(t(n))+")"}},set:function(t){n=t}})};pa(WA,sl);var Ro=function n(){sl.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!as(e,3)},set:function(k){k?this.F=os(e,3):this.F=ls(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');t=k}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(k){r=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(k){r[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(k){r[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(k){r[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(k){r[3]=k}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ig)return;o="FieldObject"+n.FieldNum++}var k=function(q){return q};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+cd(k(o))+")"},set:function(k){o=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(k){o=k}});var u="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return u},set:function(k){u=k}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(k){d=k}});var h=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return h},set:function(k){h=k}});var p=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return p===void 0?50/o2:p},set:function(k){p=k}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(k){m=k}});var w="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!w||this instanceof ig||this instanceof eu))return Uy(w,this.objId,this.scope)},set:function(k){k=k.toString(),w=k}});var _=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(_)return this instanceof Ps==0?Uy(_,this.objId,this.scope):_},set:function(k){k=k.toString(),_=this instanceof Ps==0?k.substr(0,1)==="("?Gd(k.substr(1,k.length-2)):Gd(k):k}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ps==1?Gd(_.substr(1,_.length-1)):_},set:function(k){k=k.toString(),_=this instanceof Ps==1?"/"+k:k}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Ps==0?Uy(x,this.objId,this.scope):x},set:function(k){k=k.toString(),x=this instanceof Ps==0?k.substr(0,1)==="("?Gd(k.substr(1,k.length-2)):Gd(k):k}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ps==1?Gd(x.substr(1,x.length-1)):x},set:function(k){k=k.toString(),x=this instanceof Ps==1?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var A,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(k){k=!!k,R=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(A)return A},set:function(k){A=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,1)},set:function(k){k?this.Ff=os(this.Ff,1):this.Ff=ls(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,2)},set:function(k){k?this.Ff=os(this.Ff,2):this.Ff=ls(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,3)},set:function(k){k?this.Ff=os(this.Ff,3):this.Ff=ls(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');C=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(C){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};pa(Ro,sl);var Gu=function(){Ro.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return $A(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(o,u,d){d||(d=1);for(var h,p=[];h=u.exec(o);)p.push(h[d]);return p})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,18)},set:function(t){t?this.Ff=os(this.Ff,18):this.Ff=ls(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=os(this.Ff,19):this.Ff=ls(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,20)},set:function(t){t?(this.Ff=os(this.Ff,20),e.sort()):this.Ff=ls(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,22)},set:function(t){t?this.Ff=os(this.Ff,22):this.Ff=ls(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(t){t?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,27)},set:function(t){t?this.Ff=os(this.Ff,27):this.Ff=ls(this.Ff,27)}}),this.hasAppearanceStream=!1};pa(Gu,Ro);var Wu=function(){Gu.call(this),this.fontName="helvetica",this.combo=!1};pa(Wu,Gu);var Yu=function(){Wu.call(this),this.combo=!0};pa(Yu,Wu);var Cf=function(){Yu.call(this),this.edit=!0};pa(Cf,Yu);var Ps=function(){Ro.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,15)},set:function(t){t?this.Ff=os(this.Ff,15):this.Ff=ls(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,16)},set:function(t){t?this.Ff=os(this.Ff,16):this.Ff=ls(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,17)},set:function(t){t?this.Ff=os(this.Ff,17):this.Ff=ls(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(t){t?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+cd(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){rr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};pa(Ps,Ro);var Rf=function(){Ps.call(this),this.pushButton=!0};pa(Rf,Ps);var Ku=function(){Ps.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};pa(Ku,Ps);var ig=function(){var n,e;Ro.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,u=[];for(o in u.push("<<"),r)u.push("/"+o+" ("+cd(i(r[o]))+")");return u.push(">>"),u.join(`
`)},set:function(i){rr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Rt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};pa(ig,Ro),Ku.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ku.prototype.createOption=function(n){var e=new ig;return e.Parent=this,e.optionName=n,this.Kids.push(e),DF.call(this.scope,e),e};var If=function(){Ps.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Rt.CheckBox.createAppearanceStream()};pa(If,Ps);var eu=function(){Ro.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,13)},set:function(e){e?this.Ff=os(this.Ff,13):this.Ff=ls(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,21)},set:function(e){e?this.Ff=os(this.Ff,21):this.Ff=ls(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(e){e?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,24)},set:function(e){e?this.Ff=os(this.Ff,24):this.Ff=ls(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,25)},set:function(e){e?this.Ff=os(this.Ff,25):this.Ff=ls(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(e){e?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};pa(eu,Ro);var kf=function(){eu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,14)},set:function(n){n?this.Ff=os(this.Ff,14):this.Ff=ls(this.Ff,14)}}),this.password=!0};pa(kf,eu);var Rt={CheckBox:{createAppearanceStream:function(){return{N:{On:Rt.CheckBox.YesNormal},D:{On:Rt.CheckBox.YesPushDown,Off:Rt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=tl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=F1(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+an(Rt.internal.getWidth(n))+" "+an(Rt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+an(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=tl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=Rt.internal.getHeight(n),u=Rt.internal.getWidth(n),d=F1(n,n.caption);return i.push("1 g"),i.push("0 0 "+an(u)+" "+an(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+an(u-1)+" "+an(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+an(d.fontSize)+" Tf "+r),i.push(d.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=tl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+an(Rt.internal.getWidth(n))+" "+an(Rt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Rt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Rt.RadioButton.Circle.YesNormal,e.D[n]=Rt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=tl(n);e.scope=n.scope;var t=[],r=Rt.internal.getWidth(n)<=Rt.internal.getHeight(n)?Rt.internal.getWidth(n)/4:Rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Rt.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Vc(Rt.internal.getWidth(n)/2)+" "+Vc(Rt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=tl(n);e.scope=n.scope;var t=[],r=Rt.internal.getWidth(n)<=Rt.internal.getHeight(n)?Rt.internal.getWidth(n)/4:Rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Rt.internal.Bezier_C).toFixed(5)),u=Number((r*Rt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vc(Rt.internal.getWidth(n)/2)+" "+Vc(Rt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Vc(Rt.internal.getWidth(n)/2)+" "+Vc(Rt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+u+" "+u+" "+r+" 0 "+r+" c"),t.push("-"+u+" "+r+" -"+r+" "+u+" -"+r+" 0 c"),t.push("-"+r+" -"+u+" -"+u+" -"+r+" 0 -"+r+" c"),t.push(u+" -"+r+" "+r+" -"+u+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=tl(n);e.scope=n.scope;var t=[],r=Rt.internal.getWidth(n)<=Rt.internal.getHeight(n)?Rt.internal.getWidth(n)/4:Rt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*Rt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Vc(Rt.internal.getWidth(n)/2)+" "+Vc(Rt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Rt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Rt.RadioButton.Cross.YesNormal,e.D[n]=Rt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=tl(n);e.scope=n.scope;var t=[],r=Rt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+an(Rt.internal.getWidth(n)-2)+" "+an(Rt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(an(r.x1.x)+" "+an(r.x1.y)+" m"),t.push(an(r.x2.x)+" "+an(r.x2.y)+" l"),t.push(an(r.x4.x)+" "+an(r.x4.y)+" m"),t.push(an(r.x3.x)+" "+an(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=tl(n);e.scope=n.scope;var t=Rt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+an(Rt.internal.getWidth(n))+" "+an(Rt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+an(Rt.internal.getWidth(n)-2)+" "+an(Rt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(an(t.x1.x)+" "+an(t.x1.y)+" m"),r.push(an(t.x2.x)+" "+an(t.x2.y)+" l"),r.push(an(t.x4.x)+" "+an(t.x4.y)+" m"),r.push(an(t.x3.x)+" "+an(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=tl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+an(Rt.internal.getWidth(n))+" "+an(Rt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Rt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Rt.internal.getWidth(n),t=Rt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Rt.internal.getWidth=function(n){var e=0;return rr(n)==="object"&&(e=SS(n.Rect[2])),e},Rt.internal.getHeight=function(n){var e=0;return rr(n)==="object"&&(e=SS(n.Rect[3])),e};var DF=Qr.addField=function(n){if(kF(this,n),!(n instanceof Ro))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Qr.AcroFormChoiceField=Gu,Qr.AcroFormListBox=Wu,Qr.AcroFormComboBox=Yu,Qr.AcroFormEditBox=Cf,Qr.AcroFormButton=Ps,Qr.AcroFormPushButton=Rf,Qr.AcroFormRadioButton=Ku,Qr.AcroFormCheckBox=If,Qr.AcroFormTextField=eu,Qr.AcroFormPasswordField=kf,Qr.AcroFormAppearance=Rt,Qr.AcroForm={ChoiceField:Gu,ListBox:Wu,ComboBox:Yu,EditBox:Cf,Button:Ps,PushButton:Rf,RadioButton:Ku,CheckBox:If,TextField:eu,PasswordField:kf,Appearance:Rt},Mt.AcroForm={ChoiceField:Gu,ListBox:Wu,ComboBox:Yu,EditBox:Cf,Button:Ps,PushButton:Rf,RadioButton:Ku,CheckBox:If,TextField:eu,PasswordField:kf,Appearance:Rt};var PF=Mt.AcroForm;function YA(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(T,F){var L,ee,ye,le,ve,me=t;if((F=F||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(ce(T))for(ve in r)for(ye=r[ve],L=0;L<ye.length;L+=1){for(le=!0,ee=0;ee<ye[L].length;ee+=1)if(ye[L][ee]!==void 0&&ye[L][ee]!==T[ee]){le=!1;break}if(le===!0){me=ve;break}}else for(ve in r)for(ye=r[ve],L=0;L<ye.length;L+=1){for(le=!0,ee=0;ee<ye[L].length;ee+=1)if(ye[L][ee]!==void 0&&ye[L][ee]!==T.charCodeAt(ee)){le=!1;break}if(le===!0){me=ve;break}}return me===t&&F!==t&&(me=F),me},o=function T(F){for(var L=this.internal.write,ee=this.internal.putStream,ye=(0,this.internal.getFilters)();ye.indexOf("FlateEncode")!==-1;)ye.splice(ye.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:F.width}),le.push({key:"Height",value:F.height}),F.colorSpace===k.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===k.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)&&F.transparency.length>0){for(var ve="",me=0,Le=F.transparency.length;me<Le;me++)ve+=F.transparency[me]+" "+F.transparency[me]+" ";le.push({key:"Mask",value:"["+ve+"]"})}F.sMask!==void 0&&le.push({key:"SMask",value:F.objectId+1+" 0 R"});var xe=F.filter!==void 0?["/"+F.filter]:void 0;if(ee({data:F.data,additionalKeyValues:le,alreadyAppliedFilters:xe,objectId:F.objectId}),L("endobj"),"sMask"in F&&F.sMask!==void 0){var J,M=(J=F.sMaskBitsPerComponent)!==null&&J!==void 0?J:F.bitsPerComponent,G={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:M,data:F.sMask};"filter"in F&&(G.decodeParameters="/Predictor ".concat(F.predictor," /Colors 1 /BitsPerComponent ").concat(M," /Columns ").concat(F.width),G.filter=F.filter),T.call(this,G)}if(F.colorSpace===k.INDEXED){var B=this.internal.newObject();ee({data:D(new Uint8Array(F.palette)),objectId:B}),L("endobj")}},u=function(){var T=this.internal.collections[e+"images"];for(var F in T)o.call(this,T[F])},d=function(){var T,F=this.internal.collections[e+"images"],L=this.internal.write;for(var ee in F)L("/I"+(T=F[ee]).index,T.objectId,"0","R")},h=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",d))},p=function(){var T=this.internal.collections[e+"images"];return h.call(this),T},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},w=function(T){return typeof n["process"+T.toUpperCase()]=="function"},_=function(T){return rr(T)==="object"&&T.nodeType===1},x=function(T,F){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var L=""+T.getAttribute("src");if(L.indexOf("data:image/")===0)return Dm(unescape(L).split("base64,").pop());var ee=n.loadFile(L,!0);if(ee!==void 0)return ee}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var ye;switch(F){case"PNG":ye="image/png";break;case"WEBP":ye="image/webp";break;default:ye="image/jpeg"}return Dm(T.toDataURL(ye,1).split("base64,").pop())}},A=function(T){var F=this.internal.collections[e+"images"];if(F){for(var L in F)if(T===F[L].alias)return F[L]}},R=function(T,F,L){return T||F||(T=-96,F=-96),T<0&&(T=-1*L.width*72/T/this.internal.scaleFactor),F<0&&(F=-1*L.height*72/F/this.internal.scaleFactor),T===0&&(T=F*L.width/L.height),F===0&&(F=T*L.height/L.width),[T,F]},C=function(T,F,L,ee,ye,le){var ve=R.call(this,L,ee,ye),me=this.internal.getCoordinateString,Le=this.internal.getVerticalCoordinateString,xe=p.call(this);if(L=ve[0],ee=ve[1],xe[ye.index]=ye,le){le*=Math.PI/180;var J=Math.cos(le),M=Math.sin(le),G=function(ae){return ae.toFixed(4)},B=[G(J),G(M),G(-1*M),G(J),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,me(T),Le(F+ee),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([me(L),"0","0",me(ee),"0","0","cm"].join(" "))):this.internal.write([me(L),"0","0",me(ee),me(T),Le(F+ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ye.index+" Do"),this.internal.write("Q")},k=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var q=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},$=n.__addimage__.sHashCode=function(T){var F,L,ee=0;if(typeof T=="string")for(L=T.length,F=0;F<L;F++)ee=(ee<<5)-ee+T.charCodeAt(F),ee|=0;else if(ce(T))for(L=T.byteLength/2,F=0;F<L;F++)ee=(ee<<5)-ee+T[F],ee|=0;return ee},z=n.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var F=!0;return T.length===0&&(F=!1),T.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(F=!1),F},oe=n.__addimage__.extractImageFromDataUrl=function(T){if(T==null||!(T=T.trim()).startsWith("data:"))return null;var F=T.indexOf(",");return F<0?null:T.substring(0,F).trim().endsWith("base64")?T.substring(F+1):null};n.__addimage__.isArrayBuffer=function(T){return T instanceof ArrayBuffer};var ce=n.__addimage__.isArrayBufferView=function(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array},H=n.__addimage__.binaryStringToUint8Array=function(T){for(var F=T.length,L=new Uint8Array(F),ee=0;ee<F;ee++)L[ee]=T.charCodeAt(ee);return L},D=n.__addimage__.arrayBufferToBinaryString=function(T){for(var F="",L=ce(T)?T:new Uint8Array(T),ee=0;ee<L.length;ee+=8192)F+=String.fromCharCode.apply(null,L.subarray(ee,ee+8192));return F};n.addImage=function(){var T,F,L,ee,ye,le,ve,me,Le;if(typeof arguments[1]=="number"?(F=t,L=arguments[1],ee=arguments[2],ye=arguments[3],le=arguments[4],ve=arguments[5],me=arguments[6],Le=arguments[7]):(F=arguments[1],L=arguments[2],ee=arguments[3],ye=arguments[4],le=arguments[5],ve=arguments[6],me=arguments[7],Le=arguments[8]),rr(T=arguments[0])==="object"&&!_(T)&&"imageData"in T){var xe=T;T=xe.imageData,F=xe.format||F||t,L=xe.x||L||0,ee=xe.y||ee||0,ye=xe.w||xe.width||ye,le=xe.h||xe.height||le,ve=xe.alias||ve,me=xe.compression||me,Le=xe.rotation||xe.angle||Le}var J=this.internal.getFilters();if(me===void 0&&J.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(L)||isNaN(ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");h.call(this);var M=I.call(this,T,F,ve,me);return C.call(this,L,ee,ye,le,M,Le),this};var I=function(T,F,L,ee){var ye,le,ve;if(typeof T=="string"&&i(T)===t){T=unescape(T);var me=V(T,!1);(me!==""||(me=n.loadFile(T,!0))!==void 0)&&(T=me)}if(_(T)&&(T=x(T,F)),F=i(T,F),!w(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((ve=L)==null||ve.length===0)&&(L=(function(Le){return typeof Le=="string"||ce(Le)?$(Le):ce(Le.data)?$(Le.data):null})(T)),(ye=A.call(this,L))||(T instanceof Uint8Array||F==="RGBA"||(le=T,T=H(T)),ye=this["process"+F.toUpperCase()](T,m.call(this),L,(function(Le){return Le&&typeof Le=="string"&&(Le=Le.toUpperCase()),Le in n.image_compression?Le:q.NONE})(ee),le)),!ye)throw new Error("An unknown error occurred whilst processing the image.");return ye},V=n.__addimage__.convertBase64ToBinaryString=function(T,F){F=typeof F!="boolean"||F;var L,ee="";if(typeof T=="string"){var ye;L=(ye=oe(T))!==null&&ye!==void 0?ye:T;try{ee=Dm(L)}catch(le){if(F)throw z(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ee};n.getImageProperties=function(T){var F,L,ee="";if(_(T)&&(T=x(T)),typeof T=="string"&&i(T)===t&&((ee=V(T,!1))===""&&(ee=n.loadFile(T)||""),T=ee),L=i(T),!w(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(T instanceof Uint8Array||(T=H(T)),!(F=this["process"+L.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=L,F}})(Mt.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Mt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,u=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,h=this.internal.getPageInfoByObjId(t.objId),p=t.pageContext.annotations,m=!1,w=0;w<p.length&&!m;w++)switch((r=p[w]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var _=0;_<p.length;_++){r=p[_];var x=this.internal.pdfEscape,A=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(R.objId),q=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+u(r.bounds.x)+" "+d(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y)+"] ")+"/Contents ("+x(k(r.contents))+")",o+=" /Popup "+C.objId+" 0 R",o+=" /P "+h.objId+" 0 R",o+=" /T ("+x(k(q))+") >>",R.content=o;var $=R.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+u(r.bounds.x+30)+" "+d(r.bounds.y+r.bounds.h)+" "+u(r.bounds.x+r.bounds.w+30)+" "+d(r.bounds.y)+"] ")+" /Parent "+$,r.open&&(o+=" /Open true"),o+=" >>",C.content=o,this.internal.write(R.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+u(r.bounds.x)+" "+d(r.bounds.y)+" "+u(r.bounds.x+r.bounds.w)+" "+d(r.bounds.y+r.bounds.h)+"] ";var z=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+x(A(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+z+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var oe=this.annotations._nameMap[r.options.name];r.options.pageNumber=oe.page,r.options.top=oe.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+x(A(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;default:var ce=d(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+ce+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,u){var d=this.internal.getCurrentPageInfo(),h=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:h(t),y:p(r),w:h(t+i),h:p(r+o)},options:u,type:"link"})},n.textWithLink=function(t,r,i,o){var u,d,h=this.getTextWidth(t),p=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){d=o.maxWidth;var m=this.splitTextToSize(t,d).length;u=Math.ceil(p*m)}else d=h,u=p;return this.text(t,r,i,o),i+=.2*p,o.align==="center"&&(r-=h/2),o.align==="right"&&(r-=h),this.link(r,i-p,d,u,o),h},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(Mt.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(R){return e[R.charCodeAt(0)]!==void 0},u=n.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},d=n.__arabicParser__.isArabicEndLetter=function(R){return u(R)&&o(R)&&e[R.charCodeAt(0)].length<=2},h=n.__arabicParser__.isArabicAlfLetter=function(R){return u(R)&&i.indexOf(R.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return u(R)&&o(R)&&e[R.charCodeAt(0)].length>=1};var p=n.__arabicParser__.arabicLetterHasFinalForm=function(R){return u(R)&&o(R)&&e[R.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(R){return u(R)&&o(R)&&e[R.charCodeAt(0)].length>=3};var m=n.__arabicParser__.arabicLetterHasMedialForm=function(R){return u(R)&&o(R)&&e[R.charCodeAt(0)].length==4},w=n.__arabicParser__.resolveLigatures=function(R){var C=0,k=t,q="",$=0;for(C=0;C<R.length;C+=1)k[R.charCodeAt(C)]!==void 0?($++,typeof(k=k[R.charCodeAt(C)])=="number"&&(q+=String.fromCharCode(k),k=t,$=0),C===R.length-1&&(k=t,q+=R.charAt(C-($-1)),C-=$-1,$=0)):(k=t,q+=R.charAt(C-$),C-=$,$=0);return q};n.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&r[R.charCodeAt(0)]!==void 0};var _=n.__arabicParser__.getCorrectForm=function(R,C,k){return u(R)?o(R)===!1?-1:!p(R)||!u(C)&&!u(k)||!u(k)&&d(C)||d(R)&&!u(C)||d(R)&&h(C)||d(R)&&d(C)?0:m(R)&&u(C)&&!d(C)&&u(k)&&p(k)?3:d(R)||!u(k)?1:2:-1},x=function(R){var C=0,k=0,q=0,$="",z="",oe="",ce=(R=R||"").split("\\s+"),H=[];for(C=0;C<ce.length;C+=1){for(H.push(""),k=0;k<ce[C].length;k+=1)$=ce[C][k],z=ce[C][k-1],oe=ce[C][k+1],u($)?(q=_($,z,oe),H[C]+=q!==-1?String.fromCharCode(e[$.charCodeAt(0)][q]):$):H[C]+=$;H[C]=w(H[C])}return H.join(" ")},A=n.__arabicParser__.processArabic=n.processArabic=function(){var R,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(C)){var q=0;for(k=[],q=0;q<C.length;q+=1)Array.isArray(C[q])?k.push([x(C[q][0]),C[q][1],C[q][2]]):k.push([x(C[q])]);R=k}else R=x(C);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};n.events.push(["preProcessText",A])})(Mt.API),Mt.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(d){t=d}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(d){o=d}});var u={};Object.defineProperty(this,"style",{get:function(){return u},set:function(d){u=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(Mt.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var h=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return h},set:function(R){h=R}});var p=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return p},set:function(R){p=R}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(R){m=R}});var w=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return w},set:function(R){w=R}});var _=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return _},set:function(R){_=R}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(R){x=R}});var A=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return A},set:function(R){A=R}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(h){return r.call(this),this.internal.__cell__.headerFunction=typeof h=="function"?h:void 0,this},n.getTextDimensions=function(h,p){r.call(this);var m=(p=p||{}).fontSize||this.getFontSize(),w=p.font||this.getFont(),_=p.scaleFactor||this.internal.scaleFactor,x=0,A=0,R=0,C=this;if(!Array.isArray(h)&&typeof h!="string"){if(typeof h!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");h=String(h)}var k=p.maxWidth;k>0?typeof h=="string"?h=this.splitTextToSize(h,k):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function($,z){return $.concat(C.splitTextToSize(z,k))},[])):h=Array.isArray(h)?h:[h];for(var q=0;q<h.length;q++)x<(R=this.getStringUnitWidth(h[q],{font:w})*m)&&(x=R);return x!==0&&(A=h.length),{w:x/=_,h:Math.max((A*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/_,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var h=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(h.left,h.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var u=n.cell=function(){var h;h=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),r.call(this);var p=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,w=this.internal.__cell__.margins||e,_=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return p.lineNumber!==void 0&&(p.lineNumber===h.lineNumber?(h.x=(p.x||0)+(p.width||0),h.y=p.y||0):p.y+p.height+h.height+w.bottom>this.getPageHeight()?(this.cellAddPage(),h.y=w.top,x&&_&&(this.printHeaderRow(h.lineNumber,!0),h.y+=_[0].height)):h.y=p.y+p.height||h.y),h.text[0]!==void 0&&(this.rect(h.x,h.y,h.width,h.height,t===!0?"FD":void 0),h.align==="right"?this.text(h.text,h.x+h.width-m,h.y+m,{align:"right",baseline:"top"}):h.align==="center"?this.text(h.text,h.x+h.width/2,h.y+m,{align:"center",baseline:"top",maxWidth:h.width-m-m}):this.text(h.text,h.x+m,h.y+m,{align:"left",baseline:"top",maxWidth:h.width-m-m})),this.internal.__cell__.lastCell=h,this};n.table=function(h,p,m,w,_){if(r.call(this),!m)throw new Error("No data for PDF table.");var x,A,R,C,k=[],q=[],$=[],z={},oe={},ce=[],H=[],D=(_=_||{}).autoSize||!1,I=_.printHeaders!==!1,V=_.css&&_.css["font-size"]!==void 0?16*_.css["font-size"]:_.fontSize||12,T=_.margins||Object.assign({width:this.getPageWidth()},e),F=typeof _.padding=="number"?_.padding:3,L=_.headerBackgroundColor||"#c8c8c8",ee=_.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=ee,this.setFontSize(V),w==null)q=k=Object.keys(m[0]),$=k.map(function(){return"left"});else if(Array.isArray(w)&&rr(w[0])==="object")for(k=w.map(function(xe){return xe.name}),q=w.map(function(xe){return xe.prompt||xe.name||""}),$=w.map(function(xe){return xe.align||"left"}),x=0;x<w.length;x+=1)oe[w[x].name]=.7499990551181103*w[x].width;else Array.isArray(w)&&typeof w[0]=="string"&&(q=k=w,$=k.map(function(){return"left"}));if(D||Array.isArray(w)&&typeof w[0]=="string")for(x=0;x<k.length;x+=1){for(z[C=k[x]]=m.map(function(xe){return xe[C]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(q[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=z[C],this.setFont(void 0,"normal"),R=0;R<A.length;R+=1)ce.push(this.getTextDimensions(A[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);oe[C]=Math.max.apply(null,ce)+F+F,ce=[]}if(I){var ye={};for(x=0;x<k.length;x+=1)ye[k[x]]={},ye[k[x]].text=q[x],ye[k[x]].align=$[x];var le=d.call(this,ye,oe);H=k.map(function(xe){return new o(h,p,oe[xe],le,ye[xe].text,void 0,ye[xe].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var ve=w.reduce(function(xe,J){return xe[J.name]=J.align,xe},{});for(x=0;x<m.length;x+=1){"rowStart"in _&&_.rowStart instanceof Function&&_.rowStart({row:x,data:m[x]},this);var me=d.call(this,m[x],oe);for(R=0;R<k.length;R+=1){var Le=m[x][k[R]];"cellStart"in _&&_.cellStart instanceof Function&&_.cellStart({row:x,col:R,data:Le},this),u.call(this,new o(h,p,oe[k[R]],me,Le,x+2,ve[k[R]]))}}return this.internal.__cell__.table_x=h,this.internal.__cell__.table_y=p,this};var d=function(h,p){var m=this.internal.__cell__.padding,w=this.internal.__cell__.table_font_size,_=this.internal.scaleFactor;return Object.keys(h).map(function(x){var A=h[x];return this.splitTextToSize(A.hasOwnProperty("text")?A.text:A,p[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*w/_+m+m},this).reduce(function(x,A){return Math.max(x,A)},0)};n.setTableHeaderRow=function(h){r.call(this),this.internal.__cell__.tableHeaderRow=h},n.printHeaderRow=function(h,p){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var w=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(w[0],w[1],w[2],w[3],void 0,-1)}this.setFont(void 0,"bold");for(var _=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),p&&(m.y=this.internal.__cell__.margins.top||0,_.push(m)),m.lineNumber=h;var A=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),u.call(this,m),this.setTextColor(A)}_.length>0&&this.setTableHeaderRow(_),this.setFont(void 0,"normal"),t=!1}})(Mt.API);var KA={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},XA=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],M1=YA(XA),QA=[100,200,300,400,500,600,700,800,900],LF=YA(QA);function By(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(o){return KA[o=o||"normal"]?o:"normal"})(n.style),r=(function(o){return o?typeof o=="number"?o>=100&&o<=900&&o%100==0?o:400:/^\d00$/.test(o)?parseInt(o):o==="bold"?700:400:400})(n.weight),i=(function(o){return typeof M1[o=o||"normal"]=="number"?o:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function _S(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var FF={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},ES={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function NS(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function AS(n){return n.trimLeft()}function MF(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function OF(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var vm,TS,jS,Wd,bm,CS,RS,IS,Vy=["times"];function kS(n,e,t,r,i){var o=4,u=PS;switch(i){case Mt.API.image_compression.FAST:o=1,u=DS;break;case Mt.API.image_compression.MEDIUM:o=6,u=LS;break;case Mt.API.image_compression.SLOW:o=9,u=FS}n=(function(h,p,m,w){for(var _,x=h.length/p,A=new Uint8Array(h.length+x),R=[UF,DS,PS,LS,FS],C=0;C<x;C+=1){var k=C*p,q=h.subarray(k,k+p);if(w)A.set(w(q,m,_),k+C);else{for(var $=R.length,z=[],oe=0;oe<$;oe+=1)z[oe]=R[oe](q,m,_);var ce=VF(z.concat());A.set(z[ce],k+C)}_=q}return A})(n,e,Math.ceil(t*r/8),u);var d=R1(n,{level:o});return Mt.API.__addimage__.arrayBufferToBinaryString(d)}function UF(n){var e=Array.apply([],n);return e.unshift(0),e}function DS(n,e){var t=n.length,r=[];r[0]=1;for(var i=0;i<t;i+=1){var o=n[i-e]||0;r[i+1]=n[i]-o+256&255}return r}function PS(n,e,t){var r=n.length,i=[];i[0]=2;for(var o=0;o<r;o+=1){var u=t&&t[o]||0;i[o+1]=n[o]-u+256&255}return i}function LS(n,e,t){var r=n.length,i=[];i[0]=3;for(var o=0;o<r;o+=1){var u=n[o-e]||0,d=t&&t[o]||0;i[o+1]=n[o]+256-(u+d>>>1)&255}return i}function FS(n,e,t){var r=n.length,i=[];i[0]=4;for(var o=0;o<r;o+=1){var u=BF(n[o-e]||0,t&&t[o]||0,t&&t[o-e]||0);i[o+1]=n[o]-u+256&255}return i}function BF(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),i=Math.abs(n-t),o=Math.abs(n+e-t-t);return r<=i&&r<=o?n:i<=o?e:t}function VF(n){var e=n.map(function(t){return t.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function zy(n,e,t){var r=e*t,i=Math.floor(r/8),o=16-(r-8*i+t),u=(1<<t)-1;return JA(n,i)>>o&u}function MS(n,e,t,r){var i=t*r,o=Math.floor(i/8),u=16-(i-8*o+r),d=(1<<r)-1,h=(e&d)<<u;(function(p,m,w){if(m+1<p.byteLength)p.setUint16(m,w,!1);else{var _=w>>8&255;p.setUint8(m,_)}})(n,o,JA(n,o)&~(d<<u)&65535|h)}function JA(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function zF(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,u=1<<1+(7&i);n[e++],n[e++];var d=null,h=null;o&&(d=e,h=u,e+=3*u);var p=!0,m=[],w=0,_=null,x=0,A=null;for(this.width=t,this.height=r;p&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,A=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var R=n[e++];w=n[e++]|n[e++]<<8,_=n[e++],1&R||(_=null),x=R>>2&7,e++;break;case 254:for(;;){if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var C=n[e++]|n[e++]<<8,k=n[e++]|n[e++]<<8,q=n[e++]|n[e++]<<8,$=n[e++]|n[e++]<<8,z=n[e++],oe=z>>6&1,ce=1<<1+(7&z),H=d,D=h,I=!1;z>>7&&(I=!0,H=e,D=ce,e+=3*ce);var V=e;for(e++;;){var T;if(!((T=n[e++])>=0))throw Error("Invalid block size");if(T===0)break;e+=T}m.push({x:C,y:k,width:q,height:$,has_local_palette:I,palette_offset:H,palette_size:D,data_offset:V,data_length:e-V,transparent_index:_,interlaced:!!oe,delay:w,disposal:x});break;case 59:p=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return A},this.frameInfo=function(F){if(F<0||F>=m.length)throw new Error("Frame index out of range.");return m[F]},this.decodeAndBlitFrameBGRA=function(F,L){var ee=this.frameInfo(F),ye=ee.width*ee.height,le=new Uint8Array(ye);OS(n,ee.data_offset,le,ye);var ve=ee.palette_offset,me=ee.transparent_index;me===null&&(me=256);var Le=ee.width,xe=t-Le,J=Le,M=4*(ee.y*t+ee.x),G=4*((ee.y+ee.height)*t+ee.x),B=M,ae=4*xe;ee.interlaced===!0&&(ae+=4*t*7);for(var ge=8,_e=0,Ve=le.length;_e<Ve;++_e){var Me=le[_e];if(J===0&&(J=Le,(B+=ae)>=G&&(ae=4*xe+4*t*(ge-1),B=M+(Le+xe)*(ge<<1),ge>>=1)),Me===me)B+=4;else{var Q=n[ve+3*Me],Te=n[ve+3*Me+1],ue=n[ve+3*Me+2];L[B++]=ue,L[B++]=Te,L[B++]=Q,L[B++]=255}--J}},this.decodeAndBlitFrameRGBA=function(F,L){var ee=this.frameInfo(F),ye=ee.width*ee.height,le=new Uint8Array(ye);OS(n,ee.data_offset,le,ye);var ve=ee.palette_offset,me=ee.transparent_index;me===null&&(me=256);var Le=ee.width,xe=t-Le,J=Le,M=4*(ee.y*t+ee.x),G=4*((ee.y+ee.height)*t+ee.x),B=M,ae=4*xe;ee.interlaced===!0&&(ae+=4*t*7);for(var ge=8,_e=0,Ve=le.length;_e<Ve;++_e){var Me=le[_e];if(J===0&&(J=Le,(B+=ae)>=G&&(ae=4*xe+4*t*(ge-1),B=M+(Le+xe)*(ge<<1),ge>>=1)),Me===me)B+=4;else{var Q=n[ve+3*Me],Te=n[ve+3*Me+1],ue=n[ve+3*Me+2];L[B++]=Q,L[B++]=Te,L[B++]=ue,L[B++]=255}--J}}}function OS(n,e,t,r){for(var i=n[e++],o=1<<i,u=o+1,d=u+1,h=i+1,p=(1<<h)-1,m=0,w=0,_=0,x=n[e++],A=new Int32Array(4096),R=null;;){for(;m<16&&x!==0;)w|=n[e++]<<m,m+=8,x===1?x=n[e++]:--x;if(m<h)break;var C=w&p;if(w>>=h,m-=h,C!==o){if(C===u)break;for(var k=C<d?C:R,q=0,$=k;$>o;)$=A[$]>>8,++q;var z=$;if(_+q+(k!==C?1:0)>r)return void gr.log("Warning, gif stream longer than expected.");t[_++]=z;var oe=_+=q;for(k!==C&&(t[_++]=z),$=k;q--;)$=A[$],t[--oe]=255&$,$>>=8;R!==null&&d<4096&&(A[d++]=R<<8|z,d>=p+1&&h<12&&(++h,p=p<<1|1)),R=C}else d=u+1,p=(1<<(h=i+1))-1,R=null}return _!==r&&gr.log("Warning, gif stream shorter than expected."),t}function qy(n){var e,t,r,i,o,u=Math.floor,d=new Array(64),h=new Array(64),p=new Array(64),m=new Array(64),w=new Array(65535),_=new Array(65535),x=new Array(64),A=new Array(64),R=[],C=0,k=7,q=new Array(64),$=new Array(64),z=new Array(64),oe=new Array(256),ce=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(M,G){for(var B=0,ae=0,ge=new Array,_e=1;_e<=16;_e++){for(var Ve=1;Ve<=M[_e];Ve++)ge[G[ae]]=[],ge[G[ae]][0]=B,ge[G[ae]][1]=_e,ae++,B++;B*=2}return ge}function ve(M){for(var G=M[0],B=M[1]-1;B>=0;)G&1<<B&&(C|=1<<k),B--,--k<0&&(C==255?(me(255),me(0)):me(C),k=7,C=0)}function me(M){R.push(M)}function Le(M){me(M>>8&255),me(255&M)}function xe(M,G,B,ae,ge){for(var _e,Ve=ge[0],Me=ge[240],Q=(function(we,Ce){var Je,ut,nt,ke,st,Xe,Qe,tt,Oe,De,Be=0;for(Oe=0;Oe<8;++Oe){Je=we[Be],ut=we[Be+1],nt=we[Be+2],ke=we[Be+3],st=we[Be+4],Xe=we[Be+5],Qe=we[Be+6];var it=Je+(tt=we[Be+7]),gt=Je-tt,et=ut+Qe,bt=ut-Qe,St=nt+Xe,Nt=nt-Xe,un=ke+st,Ot=ke-st,Vt=it+un,Cn=it-un,Pt=et+St,It=et-St;we[Be]=Vt+Pt,we[Be+4]=Vt-Pt;var nn=.707106781*(It+Cn);we[Be+2]=Cn+nn,we[Be+6]=Cn-nn;var ws=.382683433*((Vt=Ot+Nt)-(It=bt+gt)),us=.5411961*Vt+ws,qi=1.306562965*It+ws,es=.707106781*(Pt=Nt+bt),Ut=gt+es,ma=gt-es;we[Be+5]=ma+us,we[Be+3]=ma-us,we[Be+1]=Ut+qi,we[Be+7]=Ut-qi,Be+=8}for(Be=0,Oe=0;Oe<8;++Oe){Je=we[Be],ut=we[Be+8],nt=we[Be+16],ke=we[Be+24],st=we[Be+32],Xe=we[Be+40],Qe=we[Be+48];var Qs=Je+(tt=we[Be+56]),Ms=Je-tt,Os=ut+Qe,Kn=ut-Qe,sr=nt+Xe,zr=nt-Xe,Ss=ke+st,ds=ke-st,Bn=Qs+Ss,Jn=Qs-Ss,qr=Os+sr,Us=Os-sr;we[Be]=Bn+qr,we[Be+32]=Bn-qr;var pi=.707106781*(Us+Jn);we[Be+16]=Jn+pi,we[Be+48]=Jn-pi;var ka=.382683433*((Bn=ds+zr)-(Us=Kn+Ms)),Ri=.5411961*Bn+ka,Bs=1.306562965*Us+ka,ga=.707106781*(qr=zr+Kn),Js=Ms+ga,_s=Ms-ga;we[Be+40]=_s+Ri,we[Be+24]=_s-Ri,we[Be+8]=Js+Bs,we[Be+56]=Js-Bs,Be++}for(Oe=0;Oe<64;++Oe)De=we[Oe]*Ce[Oe],x[Oe]=De>0?De+.5|0:De-.5|0;return x})(M,G),Te=0;Te<64;++Te)A[H[Te]]=Q[Te];var ue=A[0]-B;B=A[0],ue==0?ve(ae[0]):(ve(ae[_[_e=32767+ue]]),ve(w[_e]));for(var be=63;be>0&&A[be]==0;)be--;if(be==0)return ve(Ve),B;for(var Ie,Y=1;Y<=be;){for(var pe=Y;A[Y]==0&&Y<=be;)++Y;var Ne=Y-pe;if(Ne>=16){Ie=Ne>>4;for(var je=1;je<=Ie;++je)ve(Me);Ne&=15}_e=32767+A[Y],ve(ge[(Ne<<4)+_[_e]]),ve(w[_e]),Y++}return be!=63&&ve(Ve),B}function J(M){M=Math.min(Math.max(M,1),100),o!=M&&((function(G){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var ge=u((B[ae]*G+50)/100);ge=Math.min(Math.max(ge,1),255),d[H[ae]]=ge}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ve=0;Ve<64;Ve++){var Me=u((_e[Ve]*G+50)/100);Me=Math.min(Math.max(Me,1),255),h[H[Ve]]=Me}for(var Q=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,ue=0;ue<8;ue++)for(var be=0;be<8;be++)p[Te]=1/(d[H[Te]]*Q[ue]*Q[be]*8),m[Te]=1/(h[H[Te]]*Q[ue]*Q[be]*8),Te++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),o=M)}this.encode=function(M,G){G&&J(G),R=new Array,C=0,k=7,Le(65496),Le(65504),Le(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Le(1),Le(1),me(0),me(0),(function(){Le(65499),Le(132),me(0);for(var ut=0;ut<64;ut++)me(d[ut]);me(1);for(var nt=0;nt<64;nt++)me(h[nt])})(),(function(ut,nt){Le(65472),Le(17),me(8),Le(nt),Le(ut),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(M.width,M.height),(function(){Le(65476),Le(418),me(0);for(var ut=0;ut<16;ut++)me(D[ut+1]);for(var nt=0;nt<=11;nt++)me(I[nt]);me(16);for(var ke=0;ke<16;ke++)me(V[ke+1]);for(var st=0;st<=161;st++)me(T[st]);me(1);for(var Xe=0;Xe<16;Xe++)me(F[Xe+1]);for(var Qe=0;Qe<=11;Qe++)me(L[Qe]);me(17);for(var tt=0;tt<16;tt++)me(ee[tt+1]);for(var Oe=0;Oe<=161;Oe++)me(ye[Oe])})(),Le(65498),Le(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var B=0,ae=0,ge=0;C=0,k=7,this.encode.displayName="_encode_";for(var _e,Ve,Me,Q,Te,ue,be,Ie,Y,pe=M.data,Ne=M.width,je=M.height,we=4*Ne,Ce=0;Ce<je;){for(_e=0;_e<we;){for(Te=we*Ce+_e,be=-1,Ie=0,Y=0;Y<64;Y++)ue=Te+(Ie=Y>>3)*we+(be=4*(7&Y)),Ce+Ie>=je&&(ue-=we*(Ce+1+Ie-je)),_e+be>=we&&(ue-=_e+be-we+4),Ve=pe[ue++],Me=pe[ue++],Q=pe[ue++],q[Y]=(ce[Ve]+ce[Me+256|0]+ce[Q+512|0]>>16)-128,$[Y]=(ce[Ve+768|0]+ce[Me+1024|0]+ce[Q+1280|0]>>16)-128,z[Y]=(ce[Ve+1280|0]+ce[Me+1536|0]+ce[Q+1792|0]>>16)-128;B=xe(q,p,B,e,r),ae=xe($,m,ae,t,i),ge=xe(z,m,ge,t,i),_e+=32}Ce+=8}if(k>=0){var Je=[];Je[1]=k+1,Je[0]=(1<<k+1)-1,ve(Je)}return Le(65497),new Uint8Array(R)},n=n||50,(function(){for(var M=String.fromCharCode,G=0;G<256;G++)oe[G]=M(G)})(),e=le(D,I),t=le(F,L),r=le(V,T),i=le(ee,ye),(function(){for(var M=1,G=2,B=1;B<=15;B++){for(var ae=M;ae<G;ae++)_[32767+ae]=B,w[32767+ae]=[],w[32767+ae][1]=B,w[32767+ae][0]=ae;for(var ge=-(G-1);ge<=-M;ge++)_[32767+ge]=B,w[32767+ge]=[],w[32767+ge][1]=B,w[32767+ge][0]=G-1+ge;M<<=1,G<<=1}})(),(function(){for(var M=0;M<256;M++)ce[M]=19595*M,ce[M+256|0]=38470*M,ce[M+512|0]=7471*M+32768,ce[M+768|0]=-11059*M,ce[M+1024|0]=-21709*M,ce[M+1280|0]=32768*M+8421375,ce[M+1536|0]=-27439*M,ce[M+1792|0]=-5329*M})(),J(n)}function No(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function US(n){function e(I){if(!I)throw Error("assert :P")}function t(I,V,T){for(var F=0;4>F;F++)if(I[V+F]!=T.charCodeAt(F))return!0;return!1}function r(I,V,T,F,L){for(var ee=0;ee<L;ee++)I[V+ee]=T[F+ee]}function i(I,V,T,F){for(var L=0;L<F;L++)I[V+L]=T}function o(I){return new Int32Array(I)}function u(I,V){for(var T=[],F=0;F<I;F++)T.push(new V);return T}function d(I,V){var T=[];return(function F(L,ee,ye){for(var le=ye[ee],ve=0;ve<le&&(L.push(ye.length>ee+1?[]:new V),!(ye.length<ee+1));ve++)F(L[ve],ee+1,ye)})(T,0,I),T}var h=function(){var I=this;function V(g,b){for(var N=1<<b-1>>>0;g&N;)N>>>=1;return N?(g&N-1)+N:g}function T(g,b,N,P,K){e(!(P%N));do g[b+(P-=N)]=K;while(0<P)}function F(g,b,N,P,K){if(e(2328>=K),512>=K)var Z=o(512);else if((Z=o(K))==null)return 0;return(function(te,re,ie,fe,Ae,$e){var de,Pe,qe=re,at=1<<ie,He=o(16),rt=o(16);for(e(Ae!=0),e(fe!=null),e(te!=null),e(0<ie),Pe=0;Pe<Ae;++Pe){if(15<fe[Pe])return 0;++He[fe[Pe]]}if(He[0]==Ae)return 0;for(rt[1]=0,de=1;15>de;++de){if(He[de]>1<<de)return 0;rt[de+1]=rt[de]+He[de]}for(Pe=0;Pe<Ae;++Pe)de=fe[Pe],0<fe[Pe]&&($e[rt[de]++]=Pe);if(rt[15]==1)return(fe=new L).g=0,fe.value=$e[0],T(te,qe,1,at,fe),at;var ct,vt=-1,ft=at-1,Dt=0,_t=1,Zt=1,jt=1<<ie;for(Pe=0,de=1,Ae=2;de<=ie;++de,Ae<<=1){if(_t+=Zt<<=1,0>(Zt-=He[de]))return 0;for(;0<He[de];--He[de])(fe=new L).g=de,fe.value=$e[Pe++],T(te,qe+Dt,Ae,jt,fe),Dt=V(Dt,de)}for(de=ie+1,Ae=2;15>=de;++de,Ae<<=1){if(_t+=Zt<<=1,0>(Zt-=He[de]))return 0;for(;0<He[de];--He[de]){if(fe=new L,(Dt&ft)!=vt){for(qe+=jt,ct=1<<(vt=de)-ie;15>vt&&!(0>=(ct-=He[vt]));)++vt,ct<<=1;at+=jt=1<<(ct=vt-ie),te[re+(vt=Dt&ft)].g=ct+ie,te[re+vt].value=qe-re-vt}fe.g=de-ie,fe.value=$e[Pe++],T(te,qe+(Dt>>ie),Ae,jt,fe),Dt=V(Dt,de)}}return _t!=2*rt[15]-1?0:at})(g,b,N,P,K,Z)}function L(){this.value=this.g=0}function ee(){this.value=this.g=0}function ye(){this.G=u(5,L),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=u(Bo,ee)}function le(g,b,N,P){e(g!=null),e(b!=null),e(2147483648>P),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=b,g.pa=N,g.Jd=b,g.Yc=N+P,g.Zc=4<=P?N+P-4+1:N,Ve(g)}function ve(g,b){for(var N=0;0<b--;)N|=Q(g,128)<<b;return N}function me(g,b){var N=ve(g,b);return Me(g)?-N:N}function Le(g,b,N,P){var K,Z=0;for(e(g!=null),e(b!=null),e(4294967288>P),g.Sb=P,g.Ra=0,g.u=0,g.h=0,4<P&&(P=4),K=0;K<P;++K)Z+=b[N+K]<<8*K;g.Ra=Z,g.bb=P,g.oa=b,g.pa=N}function xe(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<Ba-8>>>0,++g.bb,g.u-=8;ae(g)&&(g.h=1,g.u=0)}function J(g,b){if(e(0<=b),!g.h&&b<=ai){var N=B(g)&bi[b];return g.u+=b,xe(g),N}return g.h=1,g.u=0}function M(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(g){return g.Ra>>>(g.u&Ba-1)>>>0}function ae(g){return e(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>Ba}function ge(g,b){g.u=b,g.h=ae(g)}function _e(g){g.u>=Va&&(e(g.u>=Va),xe(g))}function Ve(g){e(g!=null&&g.oa!=null),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(e(g!=null&&g.oa!=null),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function Me(g){return ve(g,1)}function Q(g,b){var N=g.Ca;0>g.b&&Ve(g);var P=g.b,K=N*b>>>8,Z=(g.I>>>P>K)+0;for(Z?(N-=K,g.I-=K+1<<P>>>0):N=K+1,P=N,K=0;256<=P;)K+=8,P>>=8;return P=7^K+ho[P],g.b-=P,g.Ca=(N<<P)-1,Z}function Te(g,b,N){g[b+0]=N>>24&255,g[b+1]=N>>16&255,g[b+2]=N>>8&255,g[b+3]=255&N}function ue(g,b){return g[b+0]|g[b+1]<<8}function be(g,b){return ue(g,b)|g[b+2]<<16}function Ie(g,b){return ue(g,b)|ue(g,b+2)<<16}function Y(g,b){var N=1<<b;return e(g!=null),e(0<b),g.X=o(N),g.X==null?0:(g.Mb=32-b,g.Xa=b,1)}function pe(g,b){e(g!=null),e(b!=null),e(g.Xa==b.Xa),r(b.X,0,g.X,0,1<<b.Xa)}function Ne(){this.X=[],this.Xa=this.Mb=0}function je(g,b,N,P){e(N!=null),e(P!=null);var K=N[0],Z=P[0];return K==0&&(K=(g*Z+b/2)/b),Z==0&&(Z=(b*K+g/2)/g),0>=K||0>=Z?0:(N[0]=K,P[0]=Z,1)}function we(g,b){return g+(1<<b)-1>>>b}function Ce(g,b){return((4278255360&g)+(4278255360&b)>>>0&4278255360)+((16711935&g)+(16711935&b)>>>0&16711935)>>>0}function Je(g,b){I[b]=function(N,P,K,Z,te,re,ie){var fe;for(fe=0;fe<te;++fe){var Ae=I[g](re[ie+fe-1],K,Z+fe);re[ie+fe]=Ce(N[P+fe],Ae)}}}function ut(){this.ud=this.hd=this.jd=0}function nt(g,b){return((4278124286&(g^b))>>>1)+(g&b)>>>0}function ke(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function st(g,b){return ke(g+(g-b+.5>>1))}function Xe(g,b,N){return Math.abs(b-N)-Math.abs(g-N)}function Qe(g,b,N,P,K,Z,te){for(P=Z[te-1],N=0;N<K;++N)Z[te+N]=P=Ce(g[b+N],P)}function tt(g,b,N,P,K){var Z;for(Z=0;Z<N;++Z){var te=g[b+Z],re=te>>8&255,ie=16711935&(ie=(ie=16711935&te)+((re<<16)+re));P[K+Z]=(4278255360&te)+ie>>>0}}function Oe(g,b){b.jd=255&g,b.hd=g>>8&255,b.ud=g>>16&255}function De(g,b,N,P,K,Z){var te;for(te=0;te<P;++te){var re=b[N+te],ie=re>>>8,fe=re,Ae=255&(Ae=(Ae=re>>>16)+((g.jd<<24>>24)*(ie<<24>>24)>>>5));fe=255&(fe=(fe+=(g.hd<<24>>24)*(ie<<24>>24)>>>5)+((g.ud<<24>>24)*(Ae<<24>>24)>>>5)),K[Z+te]=(4278255360&re)+(Ae<<16)+fe}}function Be(g,b,N,P,K){I[b]=function(Z,te,re,ie,fe,Ae,$e,de,Pe){for(ie=$e;ie<de;++ie)for($e=0;$e<Pe;++$e)fe[Ae++]=K(re[P(Z[te++])])},I[g]=function(Z,te,re,ie,fe,Ae,$e){var de=8>>Z.b,Pe=Z.Ea,qe=Z.K[0],at=Z.w;if(8>de)for(Z=(1<<Z.b)-1,at=(1<<de)-1;te<re;++te){var He,rt=0;for(He=0;He<Pe;++He)He&Z||(rt=P(ie[fe++])),Ae[$e++]=K(qe[rt&at]),rt>>=de}else I["VP8LMapColor"+N](ie,fe,qe,at,Ae,$e,te,re,Pe)}}function it(g,b,N,P,K){for(N=b+N;b<N;){var Z=g[b++];P[K++]=Z>>16&255,P[K++]=Z>>8&255,P[K++]=255&Z}}function gt(g,b,N,P,K){for(N=b+N;b<N;){var Z=g[b++];P[K++]=Z>>16&255,P[K++]=Z>>8&255,P[K++]=255&Z,P[K++]=Z>>24&255}}function et(g,b,N,P,K){for(N=b+N;b<N;){var Z=(te=g[b++])>>16&240|te>>12&15,te=240&te|te>>28&15;P[K++]=Z,P[K++]=te}}function bt(g,b,N,P,K){for(N=b+N;b<N;){var Z=(te=g[b++])>>16&248|te>>13&7,te=te>>5&224|te>>3&31;P[K++]=Z,P[K++]=te}}function St(g,b,N,P,K){for(N=b+N;b<N;){var Z=g[b++];P[K++]=255&Z,P[K++]=Z>>8&255,P[K++]=Z>>16&255}}function Nt(g,b,N,P,K,Z){if(Z==0)for(N=b+N;b<N;)Te(P,((Z=g[b++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),K+=32;else r(P,K,g,b,N)}function un(g,b){I[b][0]=I[g+"0"],I[b][1]=I[g+"1"],I[b][2]=I[g+"2"],I[b][3]=I[g+"3"],I[b][4]=I[g+"4"],I[b][5]=I[g+"5"],I[b][6]=I[g+"6"],I[b][7]=I[g+"7"],I[b][8]=I[g+"8"],I[b][9]=I[g+"9"],I[b][10]=I[g+"10"],I[b][11]=I[g+"11"],I[b][12]=I[g+"12"],I[b][13]=I[g+"13"],I[b][14]=I[g+"0"],I[b][15]=I[g+"0"]}function Ot(g){return g==Au||g==md||g==gc||g==gd}function Vt(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Vt,this.f.kb=new Cn,this.sd=null}function It(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function nn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ws(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function us(g,b){var N=g.T,P=b.ba.f.RGBA,K=P.eb,Z=P.fb+g.ka*P.A,te=Rs[b.ba.S],re=g.y,ie=g.O,fe=g.f,Ae=g.N,$e=g.ea,de=g.W,Pe=b.cc,qe=b.dc,at=b.Mc,He=b.Nc,rt=g.ka,ct=g.ka+g.T,vt=g.U,ft=vt+1>>1;for(rt==0?te(re,ie,null,null,fe,Ae,$e,de,fe,Ae,$e,de,K,Z,null,null,vt):(te(b.ec,b.fc,re,ie,Pe,qe,at,He,fe,Ae,$e,de,K,Z-P.A,K,Z,vt),++N);rt+2<ct;rt+=2)Pe=fe,qe=Ae,at=$e,He=de,Ae+=g.Rc,de+=g.Rc,Z+=2*P.A,te(re,(ie+=2*g.fa)-g.fa,re,ie,Pe,qe,at,He,fe,Ae,$e,de,K,Z-P.A,K,Z,vt);return ie+=g.fa,g.j+ct<g.o?(r(b.ec,b.fc,re,ie,vt),r(b.cc,b.dc,fe,Ae,ft),r(b.Mc,b.Nc,$e,de,ft),N--):1&ct||te(re,ie,null,null,fe,Ae,$e,de,fe,Ae,$e,de,K,Z+P.A,null,null,vt),N}function qi(g,b,N){var P=g.F,K=[g.J];if(P!=null){var Z=g.U,te=b.ba.S,re=te==Nu||te==gc;b=b.ba.f.RGBA;var ie=[0],fe=g.ka;ie[0]=g.T,g.Kb&&(fe==0?--ie[0]:(--fe,K[0]-=g.width),g.j+g.ka+g.T==g.o&&(ie[0]=g.o-g.j-fe));var Ae=b.eb;fe=b.fb+fe*b.A,g=wu(P,K[0],g.width,Z,ie,Ae,fe+(re?0:3),b.A),e(N==ie),g&&Ot(te)&&Al(Ae,fe,re,Z,ie,b.A)}return 0}function es(g){var b=g.ma,N=b.ba.S,P=11>N,K=N==Gs||N==Qi||N==Nu||N==mc||N==12||Ot(N);if(b.memory=null,b.Ib=null,b.Jb=null,b.Nd=null,!uo(b.Oa,g,K?11:12))return 0;if(K&&Ot(N)&&Jt(),g.da)alert("todo:use_scaling");else{if(P){if(b.Ib=ws,g.Kb){if(N=g.U+1>>1,b.memory=o(g.U+2*N),b.memory==null)return 0;b.ec=b.memory,b.fc=0,b.cc=b.ec,b.dc=b.fc+g.U,b.Mc=b.cc,b.Nc=b.dc+N,b.Ib=us,Jt()}}else alert("todo:EmitYUV");K&&(b.Jb=qi,P&&Ye())}if(P&&!Wo){for(g=0;256>g;++g)Is[g]=89858*(g-128)+bc>>ra,Vg[g]=-22014*(g-128)+bc,mp[g]=-45773*(g-128),wd[g]=113618*(g-128)+bc>>ra;for(g=Rl;g<Go;++g)b=76283*(g-16)+bc>>ra,zg[g-Rl]=ei(b,255),qg[g-Rl]=ei(b+8>>4,15);Wo=1}return 1}function Ut(g){var b=g.ma,N=g.U,P=g.T;return e(!(1&g.ka)),0>=N||0>=P?0:(N=b.Ib(g,b),b.Jb!=null&&b.Jb(g,b,N),b.Dc+=N,1)}function ma(g){g.ma.memory=null}function Qs(g,b,N,P){return J(g,8)!=47?0:(b[0]=J(g,14)+1,N[0]=J(g,14)+1,P[0]=J(g,1),J(g,3)!=0?0:!g.h)}function Ms(g,b){if(4>g)return g+1;var N=g-2>>1;return(2+(1&g)<<N)+J(b,N)+1}function Os(g,b){return 120<b?b-120:1<=(N=((N=Zi[b-1])>>4)*g+(8-(15&N)))?N:1;var N}function Kn(g,b,N){var P=B(N),K=g[b+=255&P].g-8;return 0<K&&(ge(N,N.u+8),P=B(N),b+=g[b].value,b+=P&(1<<K)-1),ge(N,N.u+g[b].g),g[b].value}function sr(g,b,N){return N.g+=g.g,N.value+=g.value<<b>>>0,e(8>=N.g),g.g}function zr(g,b,N){var P=g.xc;return e((b=P==0?0:g.vc[g.md*(N>>P)+(b>>P)])<g.Wb),g.Ya[b]}function Ss(g,b,N,P){var K=g.ab,Z=g.c*b,te=g.C;b=te+b;var re=N,ie=P;for(P=g.Ta,N=g.Ua;0<K--;){var fe=g.gc[K],Ae=te,$e=b,de=re,Pe=ie,qe=(ie=P,re=N,fe.Ea);switch(e(Ae<$e),e($e<=fe.nc),fe.hc){case 2:Lr(de,Pe,($e-Ae)*qe,ie,re);break;case 0:var at=Ae,He=$e,rt=ie,ct=re,vt=(jt=fe).Ea;at==0&&(dc(de,Pe,null,null,1,rt,ct),Qe(de,Pe+1,0,0,vt-1,rt,ct+1),Pe+=vt,ct+=vt,++at);for(var ft=1<<jt.b,Dt=ft-1,_t=we(vt,jt.b),Zt=jt.K,jt=jt.w+(at>>jt.b)*_t;at<He;){var bn=Zt,pr=jt,rn=1;for(hc(de,Pe,rt,ct-vt,1,rt,ct);rn<vt;){var Et=(rn&~Dt)+ft;Et>vt&&(Et=vt),(0,fo[bn[pr++]>>8&15])(de,Pe+ +rn,rt,ct+rn-vt,Et-rn,rt,ct+rn),rn=Et}Pe+=vt,ct+=vt,++at&Dt||(jt+=_t)}$e!=fe.nc&&r(ie,re-qe,ie,re+($e-Ae-1)*qe,qe);break;case 1:for(qe=de,He=Pe,vt=(de=fe.Ea)-(ct=de&~(rt=(Pe=1<<fe.b)-1)),at=we(de,fe.b),ft=fe.K,fe=fe.w+(Ae>>fe.b)*at;Ae<$e;){for(Dt=ft,_t=fe,Zt=new ut,jt=He+ct,bn=He+de;He<jt;)Oe(Dt[_t++],Zt),fc(Zt,qe,He,Pe,ie,re),He+=Pe,re+=Pe;He<bn&&(Oe(Dt[_t++],Zt),fc(Zt,qe,He,vt,ie,re),He+=vt,re+=vt),++Ae&rt||(fe+=at)}break;case 3:if(de==ie&&Pe==re&&0<fe.b){for(He=ie,de=qe=re+($e-Ae)*qe-(ct=($e-Ae)*we(fe.Ea,fe.b)),Pe=ie,rt=re,at=[],ct=(vt=ct)-1;0<=ct;--ct)at[ct]=Pe[rt+ct];for(ct=vt-1;0<=ct;--ct)He[de+ct]=at[ct];ud(fe,Ae,$e,ie,qe,ie,re)}else ud(fe,Ae,$e,de,Pe,ie,re)}re=P,ie=N}ie!=N&&r(P,N,re,ie,Z)}function ds(g,b){var N=g.V,P=g.Ba+g.c*g.C,K=b-g.C;if(e(b<=g.l.o),e(16>=K),0<K){var Z=g.l,te=g.Ta,re=g.Ua,ie=Z.width;if(Ss(g,K,N,P),K=re=[re],e((N=g.C)<(P=b)),e(Z.v<Z.va),P>Z.o&&(P=Z.o),N<Z.j){var fe=Z.j-N;N=Z.j,K[0]+=fe*ie}if(N>=P?N=0:(K[0]+=4*Z.v,Z.ka=N-Z.j,Z.U=Z.va-Z.v,Z.T=P-N,N=1),N){if(re=re[0],11>(N=g.ca).S){var Ae=N.f.RGBA,$e=(P=N.S,K=Z.U,Z=Z.T,fe=Ae.eb,Ae.A),de=Z;for(Ae=Ae.fb+g.Ma*Ae.A;0<de--;){var Pe=te,qe=re,at=K,He=fe,rt=Ae;switch(P){case fd:pc(Pe,qe,at,He,rt);break;case Gs:po(Pe,qe,at,He,rt);break;case Au:po(Pe,qe,at,He,rt),Al(He,rt,0,at,1,0);break;case pd:El(Pe,qe,at,He,rt);break;case Qi:Nt(Pe,qe,at,He,rt,1);break;case md:Nt(Pe,qe,at,He,rt,1),Al(He,rt,0,at,1,0);break;case Nu:Nt(Pe,qe,at,He,rt,0);break;case gc:Nt(Pe,qe,at,He,rt,0),Al(He,rt,1,at,1,0);break;case mc:mo(Pe,qe,at,He,rt);break;case gd:mo(Pe,qe,at,He,rt),Xi(He,rt,at,1,0);break;case Vo:Ha(Pe,qe,at,He,rt);break;default:e(0)}re+=ie,Ae+=$e}g.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");e(g.Ma<=N.height)}}g.C=b,e(g.C<=g.i)}function Bn(g){var b;if(0<g.ua)return 0;for(b=0;b<g.Wb;++b){var N=g.Ya[b].G,P=g.Ya[b].H;if(0<N[1][P[1]+0].g||0<N[2][P[2]+0].g||0<N[3][P[3]+0].g)return 0}return 1}function Jn(g,b,N,P,K,Z){if(g.Z!=0){var te=g.qd,re=g.rd;for(e(vo[g.Z]!=null);b<N;++b)vo[g.Z](te,re,P,K,P,K,Z),te=P,re=K,K+=Z;g.qd=te,g.rd=re}}function qr(g,b){var N=g.l.ma,P=N.Z==0||N.Z==1?g.l.j:g.C;if(P=g.C<P?P:g.C,e(b<=g.l.o),b>P){var K=g.l.width,Z=N.ca,te=N.tb+K*P,re=g.V,ie=g.Ba+g.c*P,fe=g.gc;e(g.ab==1),e(fe[0].hc==3),qa(fe[0],P,b,re,ie,Z,te),Jn(N,P,b,Z,te,K)}g.C=g.Ma=b}function Us(g,b,N,P,K,Z,te){var re=g.$/P,ie=g.$%P,fe=g.m,Ae=g.s,$e=N+g.$,de=$e;K=N+P*K;var Pe=N+P*Z,qe=280+Ae.ua,at=g.Pb?re:16777216,He=0<Ae.ua?Ae.Wa:null,rt=Ae.wc,ct=$e<Pe?zr(Ae,ie,re):null;e(g.C<Z),e(Pe<=K);var vt=!1;e:for(;;){for(;vt||$e<Pe;){var ft=0;if(re>=at){var Dt=$e-N;e((at=g).Pb),at.wd=at.m,at.xd=Dt,0<at.s.ua&&pe(at.s.Wa,at.s.vb),at=re+zo}if(ie&rt||(ct=zr(Ae,ie,re)),e(ct!=null),ct.Qb&&(b[$e]=ct.qb,vt=!0),!vt)if(_e(fe),ct.jc){ft=fe,Dt=b;var _t=$e,Zt=ct.pd[B(ft)&Bo-1];e(ct.jc),256>Zt.g?(ge(ft,ft.u+Zt.g),Dt[_t]=Zt.value,ft=0):(ge(ft,ft.u+Zt.g-256),e(256<=Zt.value),ft=Zt.value),ft==0&&(vt=!0)}else ft=Kn(ct.G[0],ct.H[0],fe);if(fe.h)break;if(vt||256>ft){if(!vt)if(ct.nd)b[$e]=(ct.qb|ft<<8)>>>0;else{if(_e(fe),vt=Kn(ct.G[1],ct.H[1],fe),_e(fe),Dt=Kn(ct.G[2],ct.H[2],fe),_t=Kn(ct.G[3],ct.H[3],fe),fe.h)break;b[$e]=(_t<<24|vt<<16|ft<<8|Dt)>>>0}if(vt=!1,++$e,++ie>=P&&(ie=0,++re,te!=null&&re<=Z&&!(re%16)&&te(g,re),He!=null))for(;de<$e;)ft=b[de++],He.X[(506832829*ft&4294967295)>>>He.Mb]=ft}else if(280>ft){if(ft=Ms(ft-256,fe),Dt=Kn(ct.G[4],ct.H[4],fe),_e(fe),Dt=Os(P,Dt=Ms(Dt,fe)),fe.h)break;if($e-N<Dt||K-$e<ft)break e;for(_t=0;_t<ft;++_t)b[$e+_t]=b[$e+_t-Dt];for($e+=ft,ie+=ft;ie>=P;)ie-=P,++re,te!=null&&re<=Z&&!(re%16)&&te(g,re);if(e($e<=K),ie&rt&&(ct=zr(Ae,ie,re)),He!=null)for(;de<$e;)ft=b[de++],He.X[(506832829*ft&4294967295)>>>He.Mb]=ft}else{if(!(ft<qe))break e;for(vt=ft-280,e(He!=null);de<$e;)ft=b[de++],He.X[(506832829*ft&4294967295)>>>He.Mb]=ft;ft=$e,e(!(vt>>>(Dt=He).Xa)),b[ft]=Dt.X[vt],vt=!0}vt||e(fe.h==ae(fe))}if(g.Pb&&fe.h&&$e<K)e(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&pe(g.s.vb,g.s.Wa);else{if(fe.h)break e;te?.(g,re>Z?Z:re),g.a=0,g.$=$e-N}return 1}return g.a=3,0}function pi(g){e(g!=null),g.vc=null,g.yc=null,g.Ya=null;var b=g.Wa;b!=null&&(b.X=null),g.vb=null,e(g!=null)}function ka(){var g=new Ht;return g==null?null:(g.a=0,g.xb=Th,un("Predictor","VP8LPredictors"),un("Predictor","VP8LPredictors_C"),un("PredictorAdd","VP8LPredictorsAdd"),un("PredictorAdd","VP8LPredictorsAdd_C"),Lr=tt,fc=De,pc=it,po=gt,mo=et,Ha=bt,El=St,I.VP8LMapColor32b=za,I.VP8LMapColor8b=Ts,g)}function Ri(g,b,N,P,K){var Z=1,te=[g],re=[b],ie=P.m,fe=P.s,Ae=null,$e=0;e:for(;;){if(N)for(;Z&&J(ie,1);){var de=te,Pe=re,qe=P,at=1,He=qe.m,rt=qe.gc[qe.ab],ct=J(He,2);if(qe.Oc&1<<ct)Z=0;else{switch(qe.Oc|=1<<ct,rt.hc=ct,rt.Ea=de[0],rt.nc=Pe[0],rt.K=[null],++qe.ab,e(4>=qe.ab),ct){case 0:case 1:rt.b=J(He,3)+2,at=Ri(we(rt.Ea,rt.b),we(rt.nc,rt.b),0,qe,rt.K),rt.K=rt.K[0];break;case 3:var vt,ft=J(He,8)+1,Dt=16<ft?0:4<ft?1:2<ft?2:3;if(de[0]=we(rt.Ea,Dt),rt.b=Dt,vt=at=Ri(ft,1,0,qe,rt.K)){var _t,Zt=ft,jt=rt,bn=1<<(8>>jt.b),pr=o(bn);if(pr==null)vt=0;else{var rn=jt.K[0],Et=jt.w;for(pr[0]=jt.K[0][0],_t=1;_t<1*Zt;++_t)pr[_t]=Ce(rn[Et+_t],pr[_t-1]);for(;_t<4*bn;++_t)pr[_t]=0;jt.K[0]=null,jt.K[0]=pr,vt=1}}at=vt;break;case 2:break;default:e(0)}Z=at}}if(te=te[0],re=re[0],Z&&J(ie,1)&&!(Z=1<=($e=J(ie,4))&&11>=$e)){P.a=3;break e}var wt;if(wt=Z)t:{var vr,Yt,cn,$n=P,rs=te,ks=re,lr=$e,$r=N,Ws=$n.m,Gr=$n.s,gn=[null],kn=1,br=0,Un=ea[lr];n:for(;;){if($r&&J(Ws,1)){var ss=J(Ws,3)+2,xr=we(rs,ss),Dn=we(ks,ss),Or=xr*Dn;if(!Ri(xr,Dn,0,$n,gn))break n;for(gn=gn[0],Gr.xc=ss,vr=0;vr<Or;++vr){var Gn=gn[vr]>>8&65535;gn[vr]=Gn,Gn>=kn&&(kn=Gn+1)}}if(Ws.h)break n;for(Yt=0;5>Yt;++Yt){var Wr=jl[Yt];!Yt&&0<lr&&(Wr+=1<<lr),br<Wr&&(br=Wr)}var Yr=u(kn*Un,L),er=kn,In=u(er,ye);if(In==null)var Ys=null;else e(65536>=er),Ys=In;var jr=o(br);if(Ys==null||jr==null||Yr==null){$n.a=1;break n}var qt=Yr;for(vr=cn=0;vr<kn;++vr){var $t=Ys[vr],Pn=$t.G,xi=$t.H,sa=0,li=1,Kr=0;for(Yt=0;5>Yt;++Yt){Wr=jl[Yt],Pn[Yt]=qt,xi[Yt]=cn,!Yt&&0<lr&&(Wr+=1<<lr);s:{var Yo,Ko=Wr,_d=$n,cr=jr,Ch=qt,Rh=cn,Ed=0,bo=_d.m,Hg=J(bo,1);if(i(cr,0,0,Ko),Hg){var Ih=J(bo,1)+1,kh=J(bo,1),Nd=J(bo,kh==0?1:8);cr[Nd]=1,Ih==2&&(cr[Nd=J(bo,8)]=1);var ms=1}else{var Cr=o(19),Ru=J(bo,4)+4;if(19<Ru){_d.a=3;var Xo=0;break s}for(Yo=0;Yo<Ru;++Yo)Cr[Tu[Yo]]=J(bo,3);var wc=void 0,Il=void 0,Wa=_d,Ad=Cr,Sc=Ko,Td=cr,jd=0,xo=Wa.m,Dh=8,Ph=u(128,L);r:for(;F(Ph,0,7,Ad,19);){if(J(xo,1)){var gp=2+2*J(xo,3);if((wc=2+J(xo,gp))>Sc)break r}else wc=Sc;for(Il=0;Il<Sc&&wc--;){_e(xo);var Lh=Ph[0+(127&B(xo))];ge(xo,xo.u+Lh.g);var Qo=Lh.value;if(16>Qo)Td[Il++]=Qo,Qo!=0&&(Dh=Qo);else{var yp=Qo==16,vp=Qo-16,bp=yc[vp],Fh=J(xo,Ji[vp])+bp;if(Il+Fh>Sc)break r;for(var xp=yp?Dh:0;0<Fh--;)Td[Il++]=xp}}jd=1;break r}jd||(Wa.a=3),ms=jd}(ms=ms&&!bo.h)&&(Ed=F(Ch,Rh,8,cr,Ko)),ms&&Ed!=0?Xo=Ed:(_d.a=3,Xo=0)}if(Xo==0)break n;if(li&&yd[Yt]==1&&(li=qt[cn].g==0),sa+=qt[cn].g,cn+=Xo,3>=Yt){var kl,Cd=jr[0];for(kl=1;kl<Wr;++kl)jr[kl]>Cd&&(Cd=jr[kl]);Kr+=Cd}}if($t.nd=li,$t.Qb=0,li&&($t.qb=(Pn[3][xi[3]+0].value<<24|Pn[1][xi[1]+0].value<<16|Pn[2][xi[2]+0].value)>>>0,sa==0&&256>Pn[0][xi[0]+0].value&&($t.Qb=1,$t.qb+=Pn[0][xi[0]+0].value<<8)),$t.jc=!$t.Qb&&6>Kr,$t.jc){var Iu,Ya=$t;for(Iu=0;Iu<Bo;++Iu){var wo=Iu,So=Ya.pd[wo],Rd=Ya.G[0][Ya.H[0]+wo];256<=Rd.value?(So.g=Rd.g+256,So.value=Rd.value):(So.g=0,So.value=0,wo>>=sr(Rd,8,So),wo>>=sr(Ya.G[1][Ya.H[1]+wo],16,So),wo>>=sr(Ya.G[2][Ya.H[2]+wo],0,So),sr(Ya.G[3][Ya.H[3]+wo],24,So))}}}Gr.vc=gn,Gr.Wb=kn,Gr.Ya=Ys,Gr.yc=Yr,wt=1;break t}wt=0}if(!(Z=wt)){P.a=3;break e}if(0<$e){if(fe.ua=1<<$e,!Y(fe.Wa,$e)){P.a=1,Z=0;break e}}else fe.ua=0;var Id=P,Dl=te,wp=re,_c=Id.s,Ec=_c.xc;if(Id.c=Dl,Id.i=wp,_c.md=we(Dl,Ec),_c.wc=Ec==0?-1:(1<<Ec)-1,N){P.xb=qo;break e}if((Ae=o(te*re))==null){P.a=1,Z=0;break e}Z=(Z=Us(P,Ae,0,te,re,re,null))&&!ie.h;break e}return Z?(K!=null?K[0]=Ae:(e(Ae==null),e(N)),P.$=0,N||pi(fe)):pi(fe),Z}function Bs(g,b){var N=g.c*g.i,P=N+b+16*b;return e(g.c<=b),g.V=o(P),g.V==null?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+N+b,1)}function ga(g,b){var N=g.C,P=b-N,K=g.V,Z=g.Ba+g.c*N;for(e(b<=g.l.o);0<P;){var te=16<P?16:P,re=g.l.ma,ie=g.l.width,fe=ie*te,Ae=re.ca,$e=re.tb+ie*N,de=g.Ta,Pe=g.Ua;Ss(g,te,K,Z),Oi(de,Pe,Ae,$e,fe),Jn(re,N,N+te,Ae,$e,ie),P-=te,K+=te*g.c,N+=te}e(N==b),g.C=g.Ma=b}function Js(){this.ub=this.yd=this.td=this.Rb=0}function _s(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Zs(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function mi(){this.Yb=(function(){var g=[];return(function b(N,P,K){for(var Z=K[P],te=0;te<Z&&(N.push(K.length>P+1?[]:0),!(K.length<P+1));te++)b(N[te],P+1,K)})(g,0,[3,11]),g})()}function yr(){this.jb=o(3),this.Wc=d([4,8],mi),this.Xc=d([4,17],mi)}function ko(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Vs(){this.ld=this.La=this.dd=this.tc=0}function gi(){this.Na=this.la=0}function Ii(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ro(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Do(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vs),this.Y=0,this.ya=Array(new ro),this.aa=0,this.l=new hs}function Po(){this.y=o(16),this.f=o(8),this.ea=o(8)}function yl(){this.cb=this.a=0,this.sc="",this.m=new M,this.Od=new Js,this.Kc=new _s,this.ed=new ko,this.Qa=new Zs,this.Ic=this.$c=this.Aa=0,this.D=new Do,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=u(8,M),this.ia=0,this.pb=u(4,Ii),this.Pa=new yr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Po),this.Hd=0,this.rb=Array(new gi),this.sb=0,this.wa=Array(new Vs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ro),this.L=this.aa=0,this.gd=d([4,2],Vs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ei(g,b){return 0>g?0:g>b?b:g}function hs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Nr(){var g=new yl;return g!=null&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,Ui||(Ui=_n)),g}function yn(g,b,N){return g.a==0&&(g.a=b,g.sc=N,g.cb=0),0}function ya(g,b,N){return 3<=N&&g[b+0]==157&&g[b+1]==1&&g[b+2]==42}function yi(g,b){if(g==null)return 0;if(g.a=0,g.sc="OK",b==null)return yn(g,2,"null VP8Io passed to VP8GetHeaders()");var N=b.data,P=b.w,K=b.ha;if(4>K)return yn(g,7,"Truncated header.");var Z=N[P+0]|N[P+1]<<8|N[P+2]<<16,te=g.Od;if(te.Rb=!(1&Z),te.td=Z>>1&7,te.yd=Z>>4&1,te.ub=Z>>5,3<te.td)return yn(g,3,"Incorrect keyframe parameters.");if(!te.yd)return yn(g,4,"Frame not displayable.");P+=3,K-=3;var re=g.Kc;if(te.Rb){if(7>K)return yn(g,7,"cannot parse picture header");if(!ya(N,P,K))return yn(g,3,"Bad code word");re.c=16383&(N[P+4]<<8|N[P+3]),re.Td=N[P+4]>>6,re.i=16383&(N[P+6]<<8|N[P+5]),re.Ud=N[P+6]>>6,P+=7,K-=7,g.za=re.c+15>>4,g.Ub=re.i+15>>4,b.width=re.c,b.height=re.i,b.Da=0,b.j=0,b.v=0,b.va=b.width,b.o=b.height,b.da=0,b.ib=b.width,b.hb=b.height,b.U=b.width,b.T=b.height,i((Z=g.Pa).jb,0,255,Z.jb.length),e((Z=g.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,i(Z.Zb,0,0,Z.Zb.length),i(Z.Lb,0,0,Z.Lb)}if(te.ub>K)return yn(g,7,"bad partition length");le(Z=g.m,N,P,te.ub),P+=te.ub,K-=te.ub,te.Rb&&(re.Ld=Me(Z),re.Kd=Me(Z)),re=g.Qa;var ie,fe=g.Pa;if(e(Z!=null),e(re!=null),re.Cb=Me(Z),re.Cb){if(re.Bb=Me(Z),Me(Z)){for(re.Fb=Me(Z),ie=0;4>ie;++ie)re.Zb[ie]=Me(Z)?me(Z,7):0;for(ie=0;4>ie;++ie)re.Lb[ie]=Me(Z)?me(Z,6):0}if(re.Bb)for(ie=0;3>ie;++ie)fe.jb[ie]=Me(Z)?ve(Z,8):255}else re.Bb=0;if(Z.Ka)return yn(g,3,"cannot parse segment header");if((re=g.ed).zd=Me(Z),re.Tb=ve(Z,6),re.wb=ve(Z,3),re.Pc=Me(Z),re.Pc&&Me(Z)){for(fe=0;4>fe;++fe)Me(Z)&&(re.vd[fe]=me(Z,6));for(fe=0;4>fe;++fe)Me(Z)&&(re.od[fe]=me(Z,6))}if(g.L=re.Tb==0?0:re.zd?1:2,Z.Ka)return yn(g,3,"cannot parse filter header");var Ae=K;if(K=ie=P,P=ie+Ae,re=Ae,g.Xb=(1<<ve(g.m,2))-1,Ae<3*(fe=g.Xb))N=7;else{for(ie+=3*fe,re-=3*fe,Ae=0;Ae<fe;++Ae){var $e=N[K+0]|N[K+1]<<8|N[K+2]<<16;$e>re&&($e=re),le(g.Jc[+Ae],N,ie,$e),ie+=$e,re-=$e,K+=3}le(g.Jc[+fe],N,ie,re),N=ie<P?0:5}if(N!=0)return yn(g,N,"cannot parse partitions");for(N=ve(ie=g.m,7),K=Me(ie)?me(ie,4):0,P=Me(ie)?me(ie,4):0,re=Me(ie)?me(ie,4):0,fe=Me(ie)?me(ie,4):0,ie=Me(ie)?me(ie,4):0,Ae=g.Qa,$e=0;4>$e;++$e){if(Ae.Cb){var de=Ae.Zb[$e];Ae.Fb||(de+=N)}else{if(0<$e){g.pb[$e]=g.pb[0];continue}de=N}var Pe=g.pb[$e];Pe.Sc[0]=ta[ei(de+K,127)],Pe.Sc[1]=na[ei(de+0,127)],Pe.Eb[0]=2*ta[ei(de+P,127)],Pe.Eb[1]=101581*na[ei(de+re,127)]>>16,8>Pe.Eb[1]&&(Pe.Eb[1]=8),Pe.Qc[0]=ta[ei(de+fe,117)],Pe.Qc[1]=na[ei(de+ie,127)],Pe.lc=de+ie}if(!te.Rb)return yn(g,4,"Not a key frame.");for(Me(Z),te=g.Pa,N=0;4>N;++N){for(K=0;8>K;++K)for(P=0;3>P;++P)for(re=0;11>re;++re)fe=Q(Z,fr[N][K][P][re])?ve(Z,8):pp[N][K][P][re],te.Wc[N][K].Yb[P][re]=fe;for(K=0;17>K;++K)te.Xc[N][K]=te.Wc[N][xn[K]]}return g.kc=Me(Z),g.kc&&(g.Bd=ve(Z,8)),g.cb=1}function _n(g,b,N,P,K,Z,te){var re=b[K].Yb[N];for(N=0;16>K;++K){if(!Q(g,re[N+0]))return K;for(;!Q(g,re[N+1]);)if(re=b[++K].Yb[0],N=0,K==16)return 16;var ie=b[K+1].Yb;if(Q(g,re[N+2])){var fe=g,Ae=0;if(Q(fe,(de=re)[($e=N)+3]))if(Q(fe,de[$e+6])){for(re=0,$e=2*(Ae=Q(fe,de[$e+8]))+(de=Q(fe,de[$e+9+Ae])),Ae=0,de=fp[$e];de[re];++re)Ae+=Ae+Q(fe,de[re]);Ae+=3+(8<<$e)}else Q(fe,de[$e+7])?(Ae=7+2*Q(fe,165),Ae+=Q(fe,145)):Ae=5+Q(fe,159);else Ae=Q(fe,de[$e+4])?3+Q(fe,de[$e+5]):2;re=ie[2]}else Ae=1,re=ie[1];ie=te+Ah[K],0>(fe=g).b&&Ve(fe);var $e,de=fe.b,Pe=($e=fe.Ca>>1)-(fe.I>>de)>>31;--fe.b,fe.Ca+=Pe,fe.Ca|=1,fe.I-=($e+1&Pe)<<de,Z[ie]=((Ae^Pe)-Pe)*P[(0<K)+0]}return 16}function Da(g){var b=g.rb[g.sb-1];b.la=0,b.Na=0,i(g.zc,0,0,g.zc.length),g.ja=0}function Dr(g,b,N,P,K){K=g[b+N+32*P]+(K>>3),g[b+N+32*P]=-256&K?0>K?0:255:K}function hr(g,b,N,P,K,Z){Dr(g,b,0,N,P+K),Dr(g,b,1,N,P+Z),Dr(g,b,2,N,P-Z),Dr(g,b,3,N,P-K)}function Ar(g){return(20091*g>>16)+g}function so(g,b,N,P){var K,Z=0,te=o(16);for(K=0;4>K;++K){var re=g[b+0]+g[b+8],ie=g[b+0]-g[b+8],fe=(35468*g[b+4]>>16)-Ar(g[b+12]),Ae=Ar(g[b+4])+(35468*g[b+12]>>16);te[Z+0]=re+Ae,te[Z+1]=ie+fe,te[Z+2]=ie-fe,te[Z+3]=re-Ae,Z+=4,b++}for(K=Z=0;4>K;++K)re=(g=te[Z+0]+4)+te[Z+8],ie=g-te[Z+8],fe=(35468*te[Z+4]>>16)-Ar(te[Z+12]),Dr(N,P,0,0,re+(Ae=Ar(te[Z+4])+(35468*te[Z+12]>>16))),Dr(N,P,1,0,ie+fe),Dr(N,P,2,0,ie-fe),Dr(N,P,3,0,re-Ae),Z++,P+=32}function cc(g,b,N,P){var K=g[b+0]+4,Z=35468*g[b+4]>>16,te=Ar(g[b+4]),re=35468*g[b+1]>>16;hr(N,P,0,K+te,g=Ar(g[b+1]),re),hr(N,P,1,K+Z,g,re),hr(N,P,2,K-Z,g,re),hr(N,P,3,K-te,g,re)}function vl(g,b,N,P,K){so(g,b,N,P),K&&so(g,b+16,N,P+4)}function Es(g,b,N,P){go(g,b+0,N,P,1),go(g,b+32,N,P+128,1)}function bl(g,b,N,P){var K;for(g=g[b+0]+4,K=0;4>K;++K)for(b=0;4>b;++b)Dr(N,P,b,K,g)}function va(g,b,N,P){g[b+0]&&On(g,b+0,N,P),g[b+16]&&On(g,b+16,N,P+4),g[b+32]&&On(g,b+32,N,P+128),g[b+48]&&On(g,b+48,N,P+128+4)}function ts(g,b,N,P){var K,Z=o(16);for(K=0;4>K;++K){var te=g[b+0+K]+g[b+12+K],re=g[b+4+K]+g[b+8+K],ie=g[b+4+K]-g[b+8+K],fe=g[b+0+K]-g[b+12+K];Z[0+K]=te+re,Z[8+K]=te-re,Z[4+K]=fe+ie,Z[12+K]=fe-ie}for(K=0;4>K;++K)te=(g=Z[0+4*K]+3)+Z[3+4*K],re=Z[1+4*K]+Z[2+4*K],ie=Z[1+4*K]-Z[2+4*K],fe=g-Z[3+4*K],N[P+0]=te+re>>3,N[P+16]=fe+ie>>3,N[P+32]=te-re>>3,N[P+48]=fe-ie>>3,P+=64}function Pa(g,b,N){var P,K=b-32,Z=$s,te=255-g[K-1];for(P=0;P<N;++P){var re,ie=Z,fe=te+g[b-1];for(re=0;re<N;++re)g[b+re]=ie[fe+g[K+re]];b+=32}}function xl(g,b){Pa(g,b,4)}function wl(g,b){Pa(g,b,8)}function Lo(g,b){Pa(g,b,16)}function Fo(g,b){var N;for(N=0;16>N;++N)r(g,b+32*N,g,b-32,16)}function ba(g,b){var N;for(N=16;0<N;--N)i(g,b,g[b-1],16),b+=32}function zs(g,b,N){var P;for(P=0;16>P;++P)i(b,N+32*P,g,16)}function ki(g,b){var N,P=16;for(N=0;16>N;++N)P+=g[b-1+32*N]+g[b+N-32];zs(P>>5,g,b)}function xa(g,b){var N,P=8;for(N=0;16>N;++N)P+=g[b-1+32*N];zs(P>>4,g,b)}function qs(g,b){var N,P=8;for(N=0;16>N;++N)P+=g[b+N-32];zs(P>>4,g,b)}function La(g,b){zs(128,g,b)}function zt(g,b,N){return g+2*b+N+2>>2}function io(g,b){var N,P=b-32;for(P=new Uint8Array([zt(g[P-1],g[P+0],g[P+1]),zt(g[P+0],g[P+1],g[P+2]),zt(g[P+1],g[P+2],g[P+3]),zt(g[P+2],g[P+3],g[P+4])]),N=0;4>N;++N)r(g,b+32*N,P,0,P.length)}function Mo(g,b){var N=g[b-1],P=g[b-1+32],K=g[b-1+64],Z=g[b-1+96];Te(g,b+0,16843009*zt(g[b-1-32],N,P)),Te(g,b+32,16843009*zt(N,P,K)),Te(g,b+64,16843009*zt(P,K,Z)),Te(g,b+96,16843009*zt(K,Z,Z))}function Fa(g,b){var N,P=4;for(N=0;4>N;++N)P+=g[b+N-32]+g[b-1+32*N];for(P>>=3,N=0;4>N;++N)i(g,b+32*N,P,4)}function ns(g,b){var N=g[b-1+0],P=g[b-1+32],K=g[b-1+64],Z=g[b-1-32],te=g[b+0-32],re=g[b+1-32],ie=g[b+2-32],fe=g[b+3-32];g[b+0+96]=zt(P,K,g[b-1+96]),g[b+1+96]=g[b+0+64]=zt(N,P,K),g[b+2+96]=g[b+1+64]=g[b+0+32]=zt(Z,N,P),g[b+3+96]=g[b+2+64]=g[b+1+32]=g[b+0+0]=zt(te,Z,N),g[b+3+64]=g[b+2+32]=g[b+1+0]=zt(re,te,Z),g[b+3+32]=g[b+2+0]=zt(ie,re,te),g[b+3+0]=zt(fe,ie,re)}function Hr(g,b){var N=g[b+1-32],P=g[b+2-32],K=g[b+3-32],Z=g[b+4-32],te=g[b+5-32],re=g[b+6-32],ie=g[b+7-32];g[b+0+0]=zt(g[b+0-32],N,P),g[b+1+0]=g[b+0+32]=zt(N,P,K),g[b+2+0]=g[b+1+32]=g[b+0+64]=zt(P,K,Z),g[b+3+0]=g[b+2+32]=g[b+1+64]=g[b+0+96]=zt(K,Z,te),g[b+3+32]=g[b+2+64]=g[b+1+96]=zt(Z,te,re),g[b+3+64]=g[b+2+96]=zt(te,re,ie),g[b+3+96]=zt(re,ie,ie)}function ao(g,b){var N=g[b-1+0],P=g[b-1+32],K=g[b-1+64],Z=g[b-1-32],te=g[b+0-32],re=g[b+1-32],ie=g[b+2-32],fe=g[b+3-32];g[b+0+0]=g[b+1+64]=Z+te+1>>1,g[b+1+0]=g[b+2+64]=te+re+1>>1,g[b+2+0]=g[b+3+64]=re+ie+1>>1,g[b+3+0]=ie+fe+1>>1,g[b+0+96]=zt(K,P,N),g[b+0+64]=zt(P,N,Z),g[b+0+32]=g[b+1+96]=zt(N,Z,te),g[b+1+32]=g[b+2+96]=zt(Z,te,re),g[b+2+32]=g[b+3+96]=zt(te,re,ie),g[b+3+32]=zt(re,ie,fe)}function Vn(g,b){var N=g[b+0-32],P=g[b+1-32],K=g[b+2-32],Z=g[b+3-32],te=g[b+4-32],re=g[b+5-32],ie=g[b+6-32],fe=g[b+7-32];g[b+0+0]=N+P+1>>1,g[b+1+0]=g[b+0+64]=P+K+1>>1,g[b+2+0]=g[b+1+64]=K+Z+1>>1,g[b+3+0]=g[b+2+64]=Z+te+1>>1,g[b+0+32]=zt(N,P,K),g[b+1+32]=g[b+0+96]=zt(P,K,Z),g[b+2+32]=g[b+1+96]=zt(K,Z,te),g[b+3+32]=g[b+2+96]=zt(Z,te,re),g[b+3+64]=zt(te,re,ie),g[b+3+96]=zt(re,ie,fe)}function ti(g,b){var N=g[b-1+0],P=g[b-1+32],K=g[b-1+64],Z=g[b-1+96];g[b+0+0]=N+P+1>>1,g[b+2+0]=g[b+0+32]=P+K+1>>1,g[b+2+32]=g[b+0+64]=K+Z+1>>1,g[b+1+0]=zt(N,P,K),g[b+3+0]=g[b+1+32]=zt(P,K,Z),g[b+3+32]=g[b+1+64]=zt(K,Z,Z),g[b+3+64]=g[b+2+64]=g[b+0+96]=g[b+1+96]=g[b+2+96]=g[b+3+96]=Z}function oo(g,b){var N=g[b-1+0],P=g[b-1+32],K=g[b-1+64],Z=g[b-1+96],te=g[b-1-32],re=g[b+0-32],ie=g[b+1-32],fe=g[b+2-32];g[b+0+0]=g[b+2+32]=N+te+1>>1,g[b+0+32]=g[b+2+64]=P+N+1>>1,g[b+0+64]=g[b+2+96]=K+P+1>>1,g[b+0+96]=Z+K+1>>1,g[b+3+0]=zt(re,ie,fe),g[b+2+0]=zt(te,re,ie),g[b+1+0]=g[b+3+32]=zt(N,te,re),g[b+1+32]=g[b+3+64]=zt(P,N,te),g[b+1+64]=g[b+3+96]=zt(K,P,N),g[b+1+96]=zt(Z,K,P)}function Di(g,b){var N;for(N=0;8>N;++N)r(g,b+32*N,g,b-32,8)}function Sl(g,b){var N;for(N=0;8>N;++N)i(g,b,g[b-1],8),b+=32}function ni(g,b,N){var P;for(P=0;8>P;++P)i(b,N+32*P,g,8)}function wa(g,b){var N,P=8;for(N=0;8>N;++N)P+=g[b+N-32]+g[b-1+32*N];ni(P>>4,g,b)}function ri(g,b){var N,P=4;for(N=0;8>N;++N)P+=g[b+N-32];ni(P>>3,g,b)}function Pr(g,b){var N,P=4;for(N=0;8>N;++N)P+=g[b-1+32*N];ni(P>>3,g,b)}function Hi(g,b){ni(128,g,b)}function fs(g,b,N){var P=g[b-N],K=g[b+0],Z=3*(K-P)+yo[1020+g[b-2*N]-g[b+N]],te=Eu[112+(Z+4>>3)];g[b-N]=$s[255+P+Eu[112+(Z+3>>3)]],g[b+0]=$s[255+K-te]}function $i(g,b,N,P){var K=g[b+0],Z=g[b+N];return js[255+g[b-2*N]-g[b-N]]>P||js[255+Z-K]>P}function Ma(g,b,N,P){return 4*js[255+g[b-N]-g[b+0]]+js[255+g[b-2*N]-g[b+N]]<=P}function Gi(g,b,N,P,K){var Z=g[b-3*N],te=g[b-2*N],re=g[b-N],ie=g[b+0],fe=g[b+N],Ae=g[b+2*N],$e=g[b+3*N];return 4*js[255+re-ie]+js[255+te-fe]>P?0:js[255+g[b-4*N]-Z]<=K&&js[255+Z-te]<=K&&js[255+te-re]<=K&&js[255+$e-Ae]<=K&&js[255+Ae-fe]<=K&&js[255+fe-ie]<=K}function Wi(g,b,N,P){var K=2*P+1;for(P=0;16>P;++P)Ma(g,b+P,N,K)&&fs(g,b+P,N)}function vi(g,b,N,P){var K=2*P+1;for(P=0;16>P;++P)Ma(g,b+P*N,1,K)&&fs(g,b+P*N,1)}function lo(g,b,N,P){var K;for(K=3;0<K;--K)Wi(g,b+=4*N,N,P)}function Oo(g,b,N,P){var K;for(K=3;0<K;--K)vi(g,b+=4,N,P)}function si(g,b,N,P,K,Z,te,re){for(Z=2*Z+1;0<K--;){if(Gi(g,b,N,Z,te))if($i(g,b,N,re))fs(g,b,N);else{var ie=g,fe=b,Ae=N,$e=ie[fe-2*Ae],de=ie[fe-Ae],Pe=ie[fe+0],qe=ie[fe+Ae],at=ie[fe+2*Ae],He=27*(ct=yo[1020+3*(Pe-de)+yo[1020+$e-qe]])+63>>7,rt=18*ct+63>>7,ct=9*ct+63>>7;ie[fe-3*Ae]=$s[255+ie[fe-3*Ae]+ct],ie[fe-2*Ae]=$s[255+$e+rt],ie[fe-Ae]=$s[255+de+He],ie[fe+0]=$s[255+Pe-He],ie[fe+Ae]=$s[255+qe-rt],ie[fe+2*Ae]=$s[255+at-ct]}b+=P}}function Yi(g,b,N,P,K,Z,te,re){for(Z=2*Z+1;0<K--;){if(Gi(g,b,N,Z,te))if($i(g,b,N,re))fs(g,b,N);else{var ie=g,fe=b,Ae=N,$e=ie[fe-Ae],de=ie[fe+0],Pe=ie[fe+Ae],qe=Eu[112+(4+(at=3*(de-$e))>>3)],at=Eu[112+(at+3>>3)],He=qe+1>>1;ie[fe-2*Ae]=$s[255+ie[fe-2*Ae]+He],ie[fe-Ae]=$s[255+$e+at],ie[fe+0]=$s[255+de-qe],ie[fe+Ae]=$s[255+Pe-He]}b+=P}}function _l(g,b,N,P,K,Z){si(g,b,N,1,16,P,K,Z)}function Pi(g,b,N,P,K,Z){si(g,b,1,N,16,P,K,Z)}function Uo(g,b,N,P,K,Z){var te;for(te=3;0<te;--te)Yi(g,b+=4*N,N,1,16,P,K,Z)}function E(g,b,N,P,K,Z){var te;for(te=3;0<te;--te)Yi(g,b+=4,1,N,16,P,K,Z)}function W(g,b,N,P,K,Z,te,re){si(g,b,K,1,8,Z,te,re),si(N,P,K,1,8,Z,te,re)}function he(g,b,N,P,K,Z,te,re){si(g,b,1,K,8,Z,te,re),si(N,P,1,K,8,Z,te,re)}function Ee(g,b,N,P,K,Z,te,re){Yi(g,b+4*K,K,1,8,Z,te,re),Yi(N,P+4*K,K,1,8,Z,te,re)}function Fe(g,b,N,P,K,Z,te,re){Yi(g,b+4,1,K,8,Z,te,re),Yi(N,P+4,1,K,8,Z,te,re)}function ot(){this.ba=new Pt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new nn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function pt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function At(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function kt(){this.ua=0,this.Wa=new Ne,this.vb=new Ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new L}function Ht(){this.xb=this.a=0,this.l=new hs,this.ca=new Pt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new kt,this.ab=0,this.gc=u(4,At),this.Oc=0}function Bt(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new hs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function vn(g,b,N,P,K,Z,te){for(g=g==null?0:g[b+0],b=0;b<te;++b)K[Z+b]=g+N[P+b]&255,g=K[Z+b]}function ir(g,b,N,P,K,Z,te){var re;if(g==null)vn(null,null,N,P,K,Z,te);else for(re=0;re<te;++re)K[Z+re]=g[b+re]+N[P+re]&255}function Xn(g,b,N,P,K,Z,te){if(g==null)vn(null,null,N,P,K,Z,te);else{var re,ie=g[b+0],fe=ie,Ae=ie;for(re=0;re<te;++re)fe=Ae+(ie=g[b+re])-fe,Ae=N[P+re]+(-256&fe?0>fe?0:255:fe)&255,fe=ie,K[Z+re]=Ae}}function y(g,b,N,P){var K=b.width,Z=b.o;if(e(g!=null&&b!=null),0>N||0>=P||N+P>Z)return null;if(!g.Cc){if(g.ga==null){var te;if(g.ga=new Bt,(te=g.ga==null)||(te=b.width*b.o,e(g.Gb.length==0),g.Gb=o(te),g.Uc=0,g.Gb==null?te=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,te=1),te=!te),!te){te=g.ga;var re=g.Fa,ie=g.P,fe=g.qc,Ae=g.mb,$e=g.nb,de=ie+1,Pe=fe-1,qe=te.l;if(e(re!=null&&Ae!=null&&b!=null),vo[0]=null,vo[1]=vn,vo[2]=ir,vo[3]=Xn,te.ca=Ae,te.tb=$e,te.c=b.width,te.i=b.height,e(0<te.c&&0<te.i),1>=fe)b=0;else if(te.$a=3&re[ie+0],te.Z=re[ie+0]>>2&3,te.Lc=re[ie+0]>>4&3,ie=re[ie+0]>>6&3,0>te.$a||1<te.$a||4<=te.Z||1<te.Lc||ie)b=0;else if(qe.put=Ut,qe.ac=es,qe.bc=ma,qe.ma=te,qe.width=b.width,qe.height=b.height,qe.Da=b.Da,qe.v=b.v,qe.va=b.va,qe.j=b.j,qe.o=b.o,te.$a)e:{e(te.$a==1),b=ka();t:for(;;){if(b==null){b=0;break e}if(e(te!=null),te.mc=b,b.c=te.c,b.i=te.i,b.l=te.l,b.l.ma=te,b.l.width=te.c,b.l.height=te.i,b.a=0,Le(b.m,re,de,Pe),!Ri(te.c,te.i,1,b,null)||(b.ab==1&&b.gc[0].hc==3&&Bn(b.s)?(te.ic=1,re=b.c*b.i,b.Ta=null,b.Ua=0,b.V=o(re),b.Ba=0,b.V==null?(b.a=1,b=0):b=1):(te.ic=0,b=Bs(b,te.c)),!b))break t;b=1;break e}te.mc=null,b=0}else b=Pe>=te.c*te.i;te=!b}if(te)return null;g.ga.Lc!=1?g.Ga=0:P=Z-N}e(g.ga!=null),e(N+P<=Z);e:{if(b=(re=g.ga).c,Z=re.l.o,re.$a==0){if(de=g.rc,Pe=g.Vc,qe=g.Fa,ie=g.P+1+N*b,fe=g.mb,Ae=g.nb+N*b,e(ie<=g.P+g.qc),re.Z!=0)for(e(vo[re.Z]!=null),te=0;te<P;++te)vo[re.Z](de,Pe,qe,ie,fe,Ae,b),de=fe,Pe=Ae,Ae+=b,ie+=b;else for(te=0;te<P;++te)r(fe,Ae,qe,ie,b),de=fe,Pe=Ae,Ae+=b,ie+=b;g.rc=de,g.Vc=Pe}else{if(e(re.mc!=null),b=N+P,e((te=re.mc)!=null),e(b<=te.i),te.C>=b)b=1;else if(re.ic||Ye(),re.ic){re=te.V,de=te.Ba,Pe=te.c;var at=te.i,He=(qe=1,ie=te.$/Pe,fe=te.$%Pe,Ae=te.m,$e=te.s,te.$),rt=Pe*at,ct=Pe*b,vt=$e.wc,ft=He<ct?zr($e,fe,ie):null;e(He<=rt),e(b<=at),e(Bn($e));t:for(;;){for(;!Ae.h&&He<ct;){if(fe&vt||(ft=zr($e,fe,ie)),e(ft!=null),_e(Ae),256>(at=Kn(ft.G[0],ft.H[0],Ae)))re[de+He]=at,++He,++fe>=Pe&&(fe=0,++ie<=b&&!(ie%16)&&qr(te,ie));else{if(!(280>at)){qe=0;break t}at=Ms(at-256,Ae);var Dt,_t=Kn(ft.G[4],ft.H[4],Ae);if(_e(Ae),!(He>=(_t=Os(Pe,_t=Ms(_t,Ae)))&&rt-He>=at)){qe=0;break t}for(Dt=0;Dt<at;++Dt)re[de+He+Dt]=re[de+He+Dt-_t];for(He+=at,fe+=at;fe>=Pe;)fe-=Pe,++ie<=b&&!(ie%16)&&qr(te,ie);He<ct&&fe&vt&&(ft=zr($e,fe,ie))}e(Ae.h==ae(Ae))}qr(te,ie>b?b:ie);break t}!qe||Ae.h&&He<rt?(qe=0,te.a=Ae.h?5:3):te.$=He,b=qe}else b=Us(te,te.V,te.Ba,te.c,te.i,b,ga);if(!b){P=0;break e}}N+P>=Z&&(g.Cc=1),P=1}if(!P)return null;if(g.Cc&&((P=g.ga)!=null&&(P.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+N*K}function j(g,b,N,P,K,Z){for(;0<K--;){var te,re=g,ie=b+(N?1:0),fe=g,Ae=b+(N?0:3);for(te=0;te<P;++te){var $e=fe[Ae+4*te];$e!=255&&($e*=32897,re[ie+4*te+0]=re[ie+4*te+0]*$e>>23,re[ie+4*te+1]=re[ie+4*te+1]*$e>>23,re[ie+4*te+2]=re[ie+4*te+2]*$e>>23)}b+=Z}}function U(g,b,N,P,K){for(;0<P--;){var Z;for(Z=0;Z<N;++Z){var te=g[b+2*Z+0],re=15&(fe=g[b+2*Z+1]),ie=4369*re,fe=(240&fe|fe>>4)*ie>>16;g[b+2*Z+0]=(240&te|te>>4)*ie>>16&240|(15&te|te<<4)*ie>>16>>4&15,g[b+2*Z+1]=240&fe|re}b+=K}}function se(g,b,N,P,K,Z,te,re){var ie,fe,Ae=255;for(fe=0;fe<K;++fe){for(ie=0;ie<P;++ie){var $e=g[b+ie];Z[te+4*ie]=$e,Ae&=$e}b+=N,te+=re}return Ae!=255}function ze(g,b,N,P,K){var Z;for(Z=0;Z<K;++Z)N[P+Z]=g[b+Z]>>8}function Ye(){Al=j,Xi=U,wu=se,Oi=ze}function xt(g,b,N){I[g]=function(P,K,Z,te,re,ie,fe,Ae,$e,de,Pe,qe,at,He,rt,ct,vt){var ft,Dt=vt-1>>1,_t=re[ie+0]|fe[Ae+0]<<16,Zt=$e[de+0]|Pe[qe+0]<<16;e(P!=null);var jt=3*_t+Zt+131074>>2;for(b(P[K+0],255&jt,jt>>16,at,He),Z!=null&&(jt=3*Zt+_t+131074>>2,b(Z[te+0],255&jt,jt>>16,rt,ct)),ft=1;ft<=Dt;++ft){var bn=re[ie+ft]|fe[Ae+ft]<<16,pr=$e[de+ft]|Pe[qe+ft]<<16,rn=_t+bn+Zt+pr+524296,Et=rn+2*(bn+Zt)>>3;jt=Et+_t>>1,_t=(rn=rn+2*(_t+pr)>>3)+bn>>1,b(P[K+2*ft-1],255&jt,jt>>16,at,He+(2*ft-1)*N),b(P[K+2*ft-0],255&_t,_t>>16,at,He+(2*ft-0)*N),Z!=null&&(jt=rn+Zt>>1,_t=Et+pr>>1,b(Z[te+2*ft-1],255&jt,jt>>16,rt,ct+(2*ft-1)*N),b(Z[te+2*ft+0],255&_t,_t>>16,rt,ct+(2*ft+0)*N)),_t=bn,Zt=pr}1&vt||(jt=3*_t+Zt+131074>>2,b(P[K+vt-1],255&jt,jt>>16,at,He+(vt-1)*N),Z!=null&&(jt=3*Zt+_t+131074>>2,b(Z[te+vt-1],255&jt,jt>>16,rt,ct+(vt-1)*N)))}}function Jt(){Rs[fd]=Cl,Rs[Gs]=vc,Rs[pd]=jh,Rs[Qi]=bd,Rs[Nu]=Ho,Rs[mc]=Ga,Rs[Vo]=$o,Rs[Au]=vc,Rs[md]=bd,Rs[gc]=Ho,Rs[gd]=Ga}function ar(g){return g&-16384?0>g?0:255:g>>xd}function mn(g,b){return ar((19077*g>>8)+(26149*b>>8)-14234)}function zn(g,b,N){return ar((19077*g>>8)-(6419*b>>8)-(13320*N>>8)+8708)}function ps(g,b){return ar((19077*g>>8)+(33050*b>>8)-17685)}function Ns(g,b,N,P,K){P[K+0]=mn(g,N),P[K+1]=zn(g,b,N),P[K+2]=ps(g,b)}function Zn(g,b,N,P,K){P[K+0]=ps(g,b),P[K+1]=zn(g,b,N),P[K+2]=mn(g,N)}function As(g,b,N,P,K){var Z=zn(g,b,N);b=Z<<3&224|ps(g,b)>>3,P[K+0]=248&mn(g,N)|Z>>5,P[K+1]=b}function Li(g,b,N,P,K){var Z=240&ps(g,b)|15;P[K+0]=240&mn(g,N)|zn(g,b,N)>>4,P[K+1]=Z}function Oa(g,b,N,P,K){P[K+0]=255,Ns(g,b,N,P,K+1)}function Ua(g,b,N,P,K){Zn(g,b,N,P,K),P[K+3]=255}function ii(g,b,N,P,K){Ns(g,b,N,P,K),P[K+3]=255}function co(g,b,N){I[g]=function(P,K,Z,te,re,ie,fe,Ae,$e){for(var de=Ae+(-2&$e)*N;Ae!=de;)b(P[K+0],Z[te+0],re[ie+0],fe,Ae),b(P[K+1],Z[te+0],re[ie+0],fe,Ae+N),K+=2,++te,++ie,Ae+=2*N;1&$e&&b(P[K+0],Z[te+0],re[ie+0],fe,Ae)}}function uc(g,b,N){return N==0?g==0?b==0?6:5:b==0?4:0:N}function vu(g,b,N,P,K){switch(g>>>30){case 3:go(b,N,P,K,0);break;case 2:Hs(b,N,P,K);break;case 1:On(b,N,P,K)}}function Fi(g,b){var N,P,K=b.M,Z=b.Nb,te=g.oc,re=g.pc+40,ie=g.oc,fe=g.pc+584,Ae=g.oc,$e=g.pc+600;for(N=0;16>N;++N)te[re+32*N-1]=129;for(N=0;8>N;++N)ie[fe+32*N-1]=129,Ae[$e+32*N-1]=129;for(0<K?te[re-1-32]=ie[fe-1-32]=Ae[$e-1-32]=129:(i(te,re-32-1,127,21),i(ie,fe-32-1,127,9),i(Ae,$e-32-1,127,9)),P=0;P<g.za;++P){var de=b.ya[b.aa+P];if(0<P){for(N=-1;16>N;++N)r(te,re+32*N-4,te,re+32*N+12,4);for(N=-1;8>N;++N)r(ie,fe+32*N-4,ie,fe+32*N+4,4),r(Ae,$e+32*N-4,Ae,$e+32*N+4,4)}var Pe=g.Gd,qe=g.Hd+P,at=de.ad,He=de.Hc;if(0<K&&(r(te,re-32,Pe[qe].y,0,16),r(ie,fe-32,Pe[qe].f,0,8),r(Ae,$e-32,Pe[qe].ea,0,8)),de.Za){var rt=te,ct=re-32+16;for(0<K&&(P>=g.za-1?i(rt,ct,Pe[qe].y[15],4):r(rt,ct,Pe[qe+1].y,0,4)),N=0;4>N;N++)rt[ct+128+N]=rt[ct+256+N]=rt[ct+384+N]=rt[ct+0+N];for(N=0;16>N;++N,He<<=2)rt=te,ct=re+Mr[N],Tr[de.Ob[N]](rt,ct),vu(He,at,16*+N,rt,ct)}else if(rt=uc(P,K,de.Ob[0]),oi[rt](te,re),He!=0)for(N=0;16>N;++N,He<<=2)vu(He,at,16*+N,te,re+Mr[N]);for(N=de.Gc,rt=uc(P,K,de.Dd),Na[rt](ie,fe),Na[rt](Ae,$e),He=at,rt=ie,ct=fe,255&(de=0|N)&&(170&de?Ki(He,256,rt,ct):Rn(He,256,rt,ct)),de=Ae,He=$e,255&(N>>=8)&&(170&N?Ki(at,320,de,He):Rn(at,320,de,He)),K<g.Ub-1&&(r(Pe[qe].y,0,te,re+480,16),r(Pe[qe].f,0,ie,fe+224,8),r(Pe[qe].ea,0,Ae,$e+224,8)),N=8*Z*g.B,Pe=g.sa,qe=g.ta+16*P+16*Z*g.R,at=g.qa,de=g.ra+8*P+N,He=g.Ha,rt=g.Ia+8*P+N,N=0;16>N;++N)r(Pe,qe+N*g.R,te,re+32*N,16);for(N=0;8>N;++N)r(at,de+N*g.B,ie,fe+32*N,8),r(He,rt+N*g.B,Ae,$e+32*N,8)}}function Sa(g,b,N,P,K,Z,te,re,ie){var fe=[0],Ae=[0],$e=0,de=ie!=null?ie.kd:0,Pe=ie??new pt;if(g==null||12>N)return 7;Pe.data=g,Pe.w=b,Pe.ha=N,b=[b],N=[N],Pe.gb=[Pe.gb];e:{var qe=b,at=N,He=Pe.gb;if(e(g!=null),e(at!=null),e(He!=null),He[0]=0,12<=at[0]&&!t(g,qe[0],"RIFF")){if(t(g,qe[0]+8,"WEBP")){He=3;break e}var rt=Ie(g,qe[0]+4);if(12>rt||4294967286<rt){He=3;break e}if(de&&rt>at[0]-8){He=7;break e}He[0]=rt,qe[0]+=12,at[0]-=12}He=0}if(He!=0)return He;for(rt=0<Pe.gb[0],N=N[0];;){e:{var ct=g;at=b,He=N;var vt=fe,ft=Ae,Dt=qe=[0];if((jt=$e=[$e])[0]=0,8>He[0])He=7;else{if(!t(ct,at[0],"VP8X")){if(Ie(ct,at[0]+4)!=10){He=3;break e}if(18>He[0]){He=7;break e}var _t=Ie(ct,at[0]+8),Zt=1+be(ct,at[0]+12);if(2147483648<=Zt*(ct=1+be(ct,at[0]+15))){He=3;break e}Dt!=null&&(Dt[0]=_t),vt!=null&&(vt[0]=Zt),ft!=null&&(ft[0]=ct),at[0]+=18,He[0]-=18,jt[0]=1}He=0}}if($e=$e[0],qe=qe[0],He!=0)return He;if(at=!!(2&qe),!rt&&$e)return 3;if(Z!=null&&(Z[0]=!!(16&qe)),te!=null&&(te[0]=at),re!=null&&(re[0]=0),te=fe[0],qe=Ae[0],$e&&at&&ie==null){He=0;break}if(4>N){He=7;break}if(rt&&$e||!rt&&!$e&&!t(g,b[0],"ALPH")){N=[N],Pe.na=[Pe.na],Pe.P=[Pe.P],Pe.Sa=[Pe.Sa];e:{_t=g,He=b,rt=N;var jt=Pe.gb;vt=Pe.na,ft=Pe.P,Dt=Pe.Sa,Zt=22,e(_t!=null),e(rt!=null),ct=He[0];var bn=rt[0];for(e(vt!=null),e(Dt!=null),vt[0]=null,ft[0]=null,Dt[0]=0;;){if(He[0]=ct,rt[0]=bn,8>bn){He=7;break e}var pr=Ie(_t,ct+4);if(4294967286<pr){He=3;break e}var rn=8+pr+1&-2;if(Zt+=rn,0<jt&&Zt>jt){He=3;break e}if(!t(_t,ct,"VP8 ")||!t(_t,ct,"VP8L")){He=0;break e}if(bn[0]<rn){He=7;break e}t(_t,ct,"ALPH")||(vt[0]=_t,ft[0]=ct+8,Dt[0]=pr),ct+=rn,bn-=rn}}if(N=N[0],Pe.na=Pe.na[0],Pe.P=Pe.P[0],Pe.Sa=Pe.Sa[0],He!=0)break}N=[N],Pe.Ja=[Pe.Ja],Pe.xa=[Pe.xa];e:if(jt=g,He=b,rt=N,vt=Pe.gb[0],ft=Pe.Ja,Dt=Pe.xa,_t=He[0],ct=!t(jt,_t,"VP8 "),Zt=!t(jt,_t,"VP8L"),e(jt!=null),e(rt!=null),e(ft!=null),e(Dt!=null),8>rt[0])He=7;else{if(ct||Zt){if(jt=Ie(jt,_t+4),12<=vt&&jt>vt-12){He=3;break e}if(de&&jt>rt[0]-8){He=7;break e}ft[0]=jt,He[0]+=8,rt[0]-=8,Dt[0]=Zt}else Dt[0]=5<=rt[0]&&jt[_t+0]==47&&!(jt[_t+4]>>5),ft[0]=rt[0];He=0}if(N=N[0],Pe.Ja=Pe.Ja[0],Pe.xa=Pe.xa[0],b=b[0],He!=0)break;if(4294967286<Pe.Ja)return 3;if(re==null||at||(re[0]=Pe.xa?2:1),te=[te],qe=[qe],Pe.xa){if(5>N){He=7;break}re=te,de=qe,at=Z,g==null||5>N?g=0:5<=N&&g[b+0]==47&&!(g[b+4]>>5)?(rt=[0],jt=[0],vt=[0],Le(ft=new G,g,b,N),Qs(ft,rt,jt,vt)?(re!=null&&(re[0]=rt[0]),de!=null&&(de[0]=jt[0]),at!=null&&(at[0]=vt[0]),g=1):g=0):g=0}else{if(10>N){He=7;break}re=qe,g==null||10>N||!ya(g,b+3,N-3)?g=0:(de=g[b+0]|g[b+1]<<8|g[b+2]<<16,at=16383&(g[b+7]<<8|g[b+6]),g=16383&(g[b+9]<<8|g[b+8]),1&de||3<(de>>1&7)||!(de>>4&1)||de>>5>=Pe.Ja||!at||!g?g=0:(te&&(te[0]=at),re&&(re[0]=g),g=1))}if(!g||(te=te[0],qe=qe[0],$e&&(fe[0]!=te||Ae[0]!=qe)))return 3;ie!=null&&(ie[0]=Pe,ie.offset=b-ie.w,e(4294967286>b-ie.w),e(ie.offset==ie.ha-N));break}return He==0||He==7&&$e&&ie==null?(Z!=null&&(Z[0]|=Pe.na!=null&&0<Pe.na.length),P!=null&&(P[0]=te),K!=null&&(K[0]=qe),0):He}function uo(g,b,N){var P=b.width,K=b.height,Z=0,te=0,re=P,ie=K;if(b.Da=g!=null&&0<g.Da,b.Da&&(re=g.cd,ie=g.bd,Z=g.v,te=g.j,11>N||(Z&=-2,te&=-2),0>Z||0>te||0>=re||0>=ie||Z+re>P||te+ie>K))return 0;if(b.v=Z,b.j=te,b.va=Z+re,b.o=te+ie,b.U=re,b.T=ie,b.da=g!=null&&0<g.da,b.da){if(!je(re,ie,N=[g.ib],Z=[g.hb]))return 0;b.ib=N[0],b.hb=Z[0]}return b.ob=g!=null&&g.ob,b.Kb=g==null||!g.Sd,b.da&&(b.ob=b.ib<3*P/4&&b.hb<3*K/4,b.Kb=0),1}function bu(g){if(g==null)return 2;if(11>g.S){var b=g.f.RGBA;b.fb+=(g.height-1)*b.A,b.A=-b.A}else b=g.f.kb,g=g.height,b.O+=(g-1)*b.fa,b.fa=-b.fa,b.N+=(g-1>>1)*b.Ab,b.Ab=-b.Ab,b.W+=(g-1>>1)*b.Db,b.Db=-b.Db,b.F!=null&&(b.J+=(g-1)*b.lb,b.lb=-b.lb);return 0}function _a(g,b,N,P){if(P==null||0>=g||0>=b)return 2;if(N!=null){if(N.Da){var K=N.cd,Z=N.bd,te=-2&N.v,re=-2&N.j;if(0>te||0>re||0>=K||0>=Z||te+K>g||re+Z>b)return 2;g=K,b=Z}if(N.da){if(!je(g,b,K=[N.ib],Z=[N.hb]))return 2;g=K[0],b=Z[0]}}P.width=g,P.height=b;e:{var ie=P.width,fe=P.height;if(g=P.S,0>=ie||0>=fe||!(g>=fd&&13>g))g=2;else{if(0>=P.Rd&&P.sd==null){te=Z=K=b=0;var Ae=(re=ie*Sd[g])*fe;if(11>g||(Z=(fe+1)/2*(b=(ie+1)/2),g==12&&(te=(K=ie)*fe)),(fe=o(Ae+2*Z+te))==null){g=1;break e}P.sd=fe,11>g?((ie=P.f.RGBA).eb=fe,ie.fb=0,ie.A=re,ie.size=Ae):((ie=P.f.kb).y=fe,ie.O=0,ie.fa=re,ie.Fd=Ae,ie.f=fe,ie.N=0+Ae,ie.Ab=b,ie.Cd=Z,ie.ea=fe,ie.W=0+Ae+Z,ie.Db=b,ie.Ed=Z,g==12&&(ie.F=fe,ie.J=0+Ae+2*Z),ie.Tc=te,ie.lb=K)}if(b=1,K=P.S,Z=P.width,te=P.height,K>=fd&&13>K)if(11>K)g=P.f.RGBA,b&=(re=Math.abs(g.A))*(te-1)+Z<=g.size,b&=re>=Z*Sd[K],b&=g.eb!=null;else{g=P.f.kb,re=(Z+1)/2,Ae=(te+1)/2,ie=Math.abs(g.fa),fe=Math.abs(g.Ab);var $e=Math.abs(g.Db),de=Math.abs(g.lb),Pe=de*(te-1)+Z;b&=ie*(te-1)+Z<=g.Fd,b&=fe*(Ae-1)+re<=g.Cd,b=(b&=$e*(Ae-1)+re<=g.Ed)&ie>=Z&fe>=re&$e>=re,b&=g.y!=null,b&=g.f!=null,b&=g.ea!=null,K==12&&(b&=de>=Z,b&=Pe<=g.Tc,b&=g.F!=null)}else b=0;g=b?0:2}}return g!=0||N!=null&&N.fd&&(g=bu(P)),g}var Bo=64,bi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ai=24,Ba=32,Va=8,ho=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Je("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(g){return g},I.Predictor2=function(g,b,N){return b[N+0]},I.Predictor3=function(g,b,N){return b[N+1]},I.Predictor4=function(g,b,N){return b[N-1]},I.Predictor5=function(g,b,N){return nt(nt(g,b[N+1]),b[N+0])},I.Predictor6=function(g,b,N){return nt(g,b[N-1])},I.Predictor7=function(g,b,N){return nt(g,b[N+0])},I.Predictor8=function(g,b,N){return nt(b[N-1],b[N+0])},I.Predictor9=function(g,b,N){return nt(b[N+0],b[N+1])},I.Predictor10=function(g,b,N){return nt(nt(g,b[N-1]),nt(b[N+0],b[N+1]))},I.Predictor11=function(g,b,N){var P=b[N+0];return 0>=Xe(P>>24&255,g>>24&255,(b=b[N-1])>>24&255)+Xe(P>>16&255,g>>16&255,b>>16&255)+Xe(P>>8&255,g>>8&255,b>>8&255)+Xe(255&P,255&g,255&b)?P:g},I.Predictor12=function(g,b,N){var P=b[N+0];return(ke((g>>24&255)+(P>>24&255)-((b=b[N-1])>>24&255))<<24|ke((g>>16&255)+(P>>16&255)-(b>>16&255))<<16|ke((g>>8&255)+(P>>8&255)-(b>>8&255))<<8|ke((255&g)+(255&P)-(255&b)))>>>0},I.Predictor13=function(g,b,N){var P=b[N-1];return(st((g=nt(g,b[N+0]))>>24&255,P>>24&255)<<24|st(g>>16&255,P>>16&255)<<16|st(g>>8&255,P>>8&255)<<8|st(255&g,255&P))>>>0};var dc=I.PredictorAdd0;I.PredictorAdd1=Qe,Je("Predictor2","PredictorAdd2"),Je("Predictor3","PredictorAdd3"),Je("Predictor4","PredictorAdd4"),Je("Predictor5","PredictorAdd5"),Je("Predictor6","PredictorAdd6"),Je("Predictor7","PredictorAdd7"),Je("Predictor8","PredictorAdd8"),Je("Predictor9","PredictorAdd9"),Je("Predictor10","PredictorAdd10"),Je("Predictor11","PredictorAdd11"),Je("Predictor12","PredictorAdd12"),Je("Predictor13","PredictorAdd13");var hc=I.PredictorAdd2;Be("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),Be("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var Lr,ud=I.ColorIndexInverseTransform,za=I.MapARGB,qa=I.VP8LColorIndexInverseTransformAlpha,Ts=I.MapAlpha,fo=I.VP8LPredictorsAdd=[];fo.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var fc,pc,po,mo,Ha,El,Mi,go,Hs,Ki,On,Rn,or,Fr,$a,Ea,Nl,xu,_h,up,dp,hp,Eh,Nh,Al,Xi,wu,Oi,Tl=o(511),dd=o(2041),Su=o(225),_u=o(767),hd=0,yo=dd,Eu=Su,$s=_u,js=Tl,fd=0,Gs=1,pd=2,Qi=3,Nu=4,mc=5,Vo=6,Au=7,md=8,gc=9,gd=10,Ji=[2,3,7],yc=[3,3,11],jl=[280,256,256,256,40],yd=[0,1,1,1,0],Tu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ea=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],zo=8,ta=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],na=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ui=null,fp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ah=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],pp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Cs=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],oi=[],Tr=[],Na=[],qo=1,Th=2,vo=[],Rs=[];xt("UpsampleRgbLinePair",Ns,3),xt("UpsampleBgrLinePair",Zn,3),xt("UpsampleRgbaLinePair",ii,4),xt("UpsampleBgraLinePair",Ua,4),xt("UpsampleArgbLinePair",Oa,4),xt("UpsampleRgba4444LinePair",Li,2),xt("UpsampleRgb565LinePair",As,2);var Cl=I.UpsampleRgbLinePair,jh=I.UpsampleBgrLinePair,vc=I.UpsampleRgbaLinePair,bd=I.UpsampleBgraLinePair,Ho=I.UpsampleArgbLinePair,Ga=I.UpsampleRgba4444LinePair,$o=I.UpsampleRgb565LinePair,ra=16,bc=1<<ra-1,Rl=-227,Go=482,xd=6,Wo=0,Is=o(256),wd=o(256),mp=o(256),Vg=o(256),zg=o(Go-Rl),qg=o(Go-Rl);co("YuvToRgbRow",Ns,3),co("YuvToBgrRow",Zn,3),co("YuvToRgbaRow",ii,4),co("YuvToBgraRow",Ua,4),co("YuvToArgbRow",Oa,4),co("YuvToRgba4444Row",Li,2),co("YuvToRgb565Row",As,2);var Mr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xc=[0,2,8],ju=[8,7,6,4,4,2,2,2,1,1,1,1],Cu=1;this.WebPDecodeRGBA=function(g,b,N,P,K){var Z=Gs,te=new ot,re=new Pt;te.ba=re,re.S=Z,re.width=[re.width],re.height=[re.height];var ie=re.width,fe=re.height,Ae=new It;if(Ae==null||g==null)var $e=2;else e(Ae!=null),$e=Sa(g,b,N,Ae.width,Ae.height,Ae.Pd,Ae.Qd,Ae.format,null);if($e!=0?ie=0:(ie!=null&&(ie[0]=Ae.width[0]),fe!=null&&(fe[0]=Ae.height[0]),ie=1),ie){re.width=re.width[0],re.height=re.height[0],P!=null&&(P[0]=re.width),K!=null&&(K[0]=re.height);e:{if(P=new hs,(K=new pt).data=g,K.w=b,K.ha=N,K.kd=1,b=[0],e(K!=null),((g=Sa(K.data,K.w,K.ha,null,null,null,b,null,K))==0||g==7)&&b[0]&&(g=4),(b=g)==0){if(e(te!=null),P.data=K.data,P.w=K.w+K.offset,P.ha=K.ha-K.offset,P.put=Ut,P.ac=es,P.bc=ma,P.ma=te,K.xa){if((g=ka())==null){te=1;break e}if((function(de,Pe){var qe=[0],at=[0],He=[0];t:for(;;){if(de==null)return 0;if(Pe==null)return de.a=2,0;if(de.l=Pe,de.a=0,Le(de.m,Pe.data,Pe.w,Pe.ha),!Qs(de.m,qe,at,He)){de.a=3;break t}if(de.xb=Th,Pe.width=qe[0],Pe.height=at[0],!Ri(qe[0],at[0],1,de,null))break t;return 1}return e(de.a!=0),0})(g,P)){if(P=(b=_a(P.width,P.height,te.Oa,te.ba))==0){t:{P=g;n:for(;;){if(P==null){P=0;break t}if(e(P.s.yc!=null),e(P.s.Ya!=null),e(0<P.s.Wb),e((N=P.l)!=null),e((K=N.ma)!=null),P.xb!=0){if(P.ca=K.ba,P.tb=K.tb,e(P.ca!=null),!uo(K.Oa,N,Qi)){P.a=2;break n}if(!Bs(P,N.width)||N.da)break n;if((N.da||Ot(P.ca.S))&&Ye(),11>P.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),P.ca.f.kb.F!=null&&Ye()),P.Pb&&0<P.s.ua&&P.s.vb.X==null&&!Y(P.s.vb,P.s.Wa.Xa)){P.a=1;break n}P.xb=0}if(!Us(P,P.V,P.Ba,P.c,P.i,N.o,ds))break n;K.Dc=P.Ma,P=1;break t}e(P.a!=0),P=0}P=!P}P&&(b=g.a)}else b=g.a}else{if((g=new Nr)==null){te=1;break e}if(g.Fa=K.na,g.P=K.P,g.qc=K.Sa,yi(g,P)){if((b=_a(P.width,P.height,te.Oa,te.ba))==0){if(g.Aa=0,N=te.Oa,e((K=g)!=null),N!=null){if(0<(ie=0>(ie=N.Md)?0:100<ie?255:255*ie/100)){for(fe=Ae=0;4>fe;++fe)12>($e=K.pb[fe]).lc&&($e.ia=ie*ju[0>$e.lc?0:$e.lc]>>3),Ae|=$e.ia;Ae&&(alert("todo:VP8InitRandom"),K.ia=1)}K.Ga=N.Id,100<K.Ga?K.Ga=100:0>K.Ga&&(K.Ga=0)}(function(de,Pe){if(de==null)return 0;if(Pe==null)return yn(de,2,"NULL VP8Io parameter in VP8Decode().");if(!de.cb&&!yi(de,Pe))return 0;if(e(de.cb),Pe.ac==null||Pe.ac(Pe)){Pe.ob&&(de.L=0);var qe=xc[de.L];if(de.L==2?(de.yb=0,de.zb=0):(de.yb=Pe.v-qe>>4,de.zb=Pe.j-qe>>4,0>de.yb&&(de.yb=0),0>de.zb&&(de.zb=0)),de.Va=Pe.o+15+qe>>4,de.Hb=Pe.va+15+qe>>4,de.Hb>de.za&&(de.Hb=de.za),de.Va>de.Ub&&(de.Va=de.Ub),0<de.L){var at=de.ed;for(qe=0;4>qe;++qe){var He;if(de.Qa.Cb){var rt=de.Qa.Lb[qe];de.Qa.Fb||(rt+=at.Tb)}else rt=at.Tb;for(He=0;1>=He;++He){var ct=de.gd[qe][He],vt=rt;if(at.Pc&&(vt+=at.vd[0],He&&(vt+=at.od[0])),0<(vt=0>vt?0:63<vt?63:vt)){var ft=vt;0<at.wb&&(ft=4<at.wb?ft>>2:ft>>1)>9-at.wb&&(ft=9-at.wb),1>ft&&(ft=1),ct.dd=ft,ct.tc=2*vt+ft,ct.ld=40<=vt?2:15<=vt?1:0}else ct.tc=0;ct.La=He}}}qe=0}else yn(de,6,"Frame setup failed"),qe=de.a;if(qe=qe==0){if(qe){de.$c=0,0<de.Aa||(de.Ic=Cu);t:{qe=de.Ic,at=4*(ft=de.za);var Dt=32*ft,_t=ft+1,Zt=0<de.L?ft*(0<de.Aa?2:1):0,jt=(de.Aa==2?2:1)*ft;if((ct=at+832+(He=3*(16*qe+xc[de.L])/2*Dt)+(rt=de.Fa!=null&&0<de.Fa.length?de.Kc.c*de.Kc.i:0))!=ct)qe=0;else{if(ct>de.Vb){if(de.Vb=0,de.Ec=o(ct),de.Fc=0,de.Ec==null){qe=yn(de,1,"no memory during frame initialization.");break t}de.Vb=ct}ct=de.Ec,vt=de.Fc,de.Ac=ct,de.Bc=vt,vt+=at,de.Gd=u(Dt,Po),de.Hd=0,de.rb=u(_t+1,gi),de.sb=1,de.wa=Zt?u(Zt,Vs):null,de.Y=0,de.D.Nb=0,de.D.wa=de.wa,de.D.Y=de.Y,0<de.Aa&&(de.D.Y+=ft),e(!0),de.oc=ct,de.pc=vt,vt+=832,de.ya=u(jt,ro),de.aa=0,de.D.ya=de.ya,de.D.aa=de.aa,de.Aa==2&&(de.D.aa+=ft),de.R=16*ft,de.B=8*ft,ft=(Dt=xc[de.L])*de.R,Dt=Dt/2*de.B,de.sa=ct,de.ta=vt+ft,de.qa=de.sa,de.ra=de.ta+16*qe*de.R+Dt,de.Ha=de.qa,de.Ia=de.ra+8*qe*de.B+Dt,de.$c=0,vt+=He,de.mb=rt?ct:null,de.nb=rt?vt:null,e(vt+rt<=de.Fc+de.Vb),Da(de),i(de.Ac,de.Bc,0,at),qe=1}}if(qe){if(Pe.ka=0,Pe.y=de.sa,Pe.O=de.ta,Pe.f=de.qa,Pe.N=de.ra,Pe.ea=de.Ha,Pe.Vd=de.Ia,Pe.fa=de.R,Pe.Rc=de.B,Pe.F=null,Pe.J=0,!hd){for(qe=-255;255>=qe;++qe)Tl[255+qe]=0>qe?-qe:qe;for(qe=-1020;1020>=qe;++qe)dd[1020+qe]=-128>qe?-128:127<qe?127:qe;for(qe=-112;112>=qe;++qe)Su[112+qe]=-16>qe?-16:15<qe?15:qe;for(qe=-255;510>=qe;++qe)_u[255+qe]=0>qe?0:255<qe?255:qe;hd=1}Mi=ts,go=vl,Ki=Es,On=bl,Rn=va,Hs=cc,or=_l,Fr=Pi,$a=W,Ea=he,Nl=Uo,xu=E,_h=Ee,up=Fe,dp=Wi,hp=vi,Eh=lo,Nh=Oo,Tr[0]=Fa,Tr[1]=xl,Tr[2]=io,Tr[3]=Mo,Tr[4]=ns,Tr[5]=ao,Tr[6]=Hr,Tr[7]=Vn,Tr[8]=oo,Tr[9]=ti,oi[0]=ki,oi[1]=Lo,oi[2]=Fo,oi[3]=ba,oi[4]=xa,oi[5]=qs,oi[6]=La,Na[0]=wa,Na[1]=wl,Na[2]=Di,Na[3]=Sl,Na[4]=Pr,Na[5]=ri,Na[6]=Hi,qe=1}else qe=0}qe&&(qe=(function(bn,pr){for(bn.M=0;bn.M<bn.Va;++bn.M){var rn,Et=bn.Jc[bn.M&bn.Xb],wt=bn.m,vr=bn;for(rn=0;rn<vr.za;++rn){var Yt=wt,cn=vr,$n=cn.Ac,rs=cn.Bc+4*rn,ks=cn.zc,lr=cn.ya[cn.aa+rn];if(cn.Qa.Bb?lr.$b=Q(Yt,cn.Pa.jb[0])?2+Q(Yt,cn.Pa.jb[2]):Q(Yt,cn.Pa.jb[1]):lr.$b=0,cn.kc&&(lr.Ad=Q(Yt,cn.Bd)),lr.Za=!Q(Yt,145)+0,lr.Za){var $r=lr.Ob,Ws=0;for(cn=0;4>cn;++cn){var Gr,gn=ks[0+cn];for(Gr=0;4>Gr;++Gr){gn=Cs[$n[rs+Gr]][gn];for(var kn=vd[Q(Yt,gn[0])];0<kn;)kn=vd[2*kn+Q(Yt,gn[kn])];gn=-kn,$n[rs+Gr]=gn}r($r,Ws,$n,rs,4),Ws+=4,ks[0+cn]=gn}}else gn=Q(Yt,156)?Q(Yt,128)?1:3:Q(Yt,163)?2:0,lr.Ob[0]=gn,i($n,rs,gn,4),i(ks,0,gn,4);lr.Dd=Q(Yt,142)?Q(Yt,114)?Q(Yt,183)?1:3:2:0}if(vr.m.Ka)return yn(bn,7,"Premature end-of-partition0 encountered.");for(;bn.ja<bn.za;++bn.ja){if(vr=Et,Yt=(wt=bn).rb[wt.sb-1],$n=wt.rb[wt.sb+wt.ja],rn=wt.ya[wt.aa+wt.ja],rs=wt.kc?rn.Ad:0)Yt.la=$n.la=0,rn.Za||(Yt.Na=$n.Na=0),rn.Hc=0,rn.Gc=0,rn.ia=0;else{var br,Un;if(Yt=$n,$n=vr,rs=wt.Pa.Xc,ks=wt.ya[wt.aa+wt.ja],lr=wt.pb[ks.$b],cn=ks.ad,$r=0,Ws=wt.rb[wt.sb-1],gn=Gr=0,i(cn,$r,0,384),ks.Za)var ss=0,xr=rs[3];else{kn=o(16);var Dn=Yt.Na+Ws.Na;if(Dn=Ui($n,rs[1],Dn,lr.Eb,0,kn,0),Yt.Na=Ws.Na=(0<Dn)+0,1<Dn)Mi(kn,0,cn,$r);else{var Or=kn[0]+3>>3;for(kn=0;256>kn;kn+=16)cn[$r+kn]=Or}ss=1,xr=rs[0]}var Gn=15&Yt.la,Wr=15&Ws.la;for(kn=0;4>kn;++kn){var Yr=1&Wr;for(Or=Un=0;4>Or;++Or)Gn=Gn>>1|(Yr=(Dn=Ui($n,xr,Dn=Yr+(1&Gn),lr.Sc,ss,cn,$r))>ss)<<7,Un=Un<<2|(3<Dn?3:1<Dn?2:cn[$r+0]!=0),$r+=16;Gn>>=4,Wr=Wr>>1|Yr<<7,Gr=(Gr<<8|Un)>>>0}for(xr=Gn,ss=Wr>>4,br=0;4>br;br+=2){for(Un=0,Gn=Yt.la>>4+br,Wr=Ws.la>>4+br,kn=0;2>kn;++kn){for(Yr=1&Wr,Or=0;2>Or;++Or)Dn=Yr+(1&Gn),Gn=Gn>>1|(Yr=0<(Dn=Ui($n,rs[2],Dn,lr.Qc,0,cn,$r)))<<3,Un=Un<<2|(3<Dn?3:1<Dn?2:cn[$r+0]!=0),$r+=16;Gn>>=2,Wr=Wr>>1|Yr<<5}gn|=Un<<4*br,xr|=Gn<<4<<br,ss|=(240&Wr)<<br}Yt.la=xr,Ws.la=ss,ks.Hc=Gr,ks.Gc=gn,ks.ia=43690&gn?0:lr.ia,rs=!(Gr|gn)}if(0<wt.L&&(wt.wa[wt.Y+wt.ja]=wt.gd[rn.$b][rn.Za],wt.wa[wt.Y+wt.ja].La|=!rs),vr.Ka)return yn(bn,7,"Premature end-of-file encountered.")}if(Da(bn),wt=pr,vr=1,rn=(Et=bn).D,Yt=0<Et.L&&Et.M>=Et.zb&&Et.M<=Et.Va,Et.Aa==0)t:{if(rn.M=Et.M,rn.uc=Yt,Fi(Et,rn),vr=1,rn=(Un=Et.D).Nb,Yt=(gn=xc[Et.L])*Et.R,$n=gn/2*Et.B,kn=16*rn*Et.R,Or=8*rn*Et.B,rs=Et.sa,ks=Et.ta-Yt+kn,lr=Et.qa,cn=Et.ra-$n+Or,$r=Et.Ha,Ws=Et.Ia-$n+Or,Wr=(Gn=Un.M)==0,Gr=Gn>=Et.Va-1,Et.Aa==2&&Fi(Et,Un),Un.uc)for(Yr=(Dn=Et).D.M,e(Dn.D.uc),Un=Dn.yb;Un<Dn.Hb;++Un){ss=Un,xr=Yr;var er=(In=(Kr=Dn).D).Nb;br=Kr.R;var In=In.wa[In.Y+ss],Ys=Kr.sa,jr=Kr.ta+16*er*br+16*ss,qt=In.dd,$t=In.tc;if($t!=0)if(e(3<=$t),Kr.L==1)0<ss&&hp(Ys,jr,br,$t+4),In.La&&Nh(Ys,jr,br,$t),0<xr&&dp(Ys,jr,br,$t+4),In.La&&Eh(Ys,jr,br,$t);else{var Pn=Kr.B,xi=Kr.qa,sa=Kr.ra+8*er*Pn+8*ss,li=Kr.Ha,Kr=Kr.Ia+8*er*Pn+8*ss;er=In.ld,0<ss&&(Fr(Ys,jr,br,$t+4,qt,er),Ea(xi,sa,li,Kr,Pn,$t+4,qt,er)),In.La&&(xu(Ys,jr,br,$t,qt,er),up(xi,sa,li,Kr,Pn,$t,qt,er)),0<xr&&(or(Ys,jr,br,$t+4,qt,er),$a(xi,sa,li,Kr,Pn,$t+4,qt,er)),In.La&&(Nl(Ys,jr,br,$t,qt,er),_h(xi,sa,li,Kr,Pn,$t,qt,er))}}if(Et.ia&&alert("todo:DitherRow"),wt.put!=null){if(Un=16*Gn,Gn=16*(Gn+1),Wr?(wt.y=Et.sa,wt.O=Et.ta+kn,wt.f=Et.qa,wt.N=Et.ra+Or,wt.ea=Et.Ha,wt.W=Et.Ia+Or):(Un-=gn,wt.y=rs,wt.O=ks,wt.f=lr,wt.N=cn,wt.ea=$r,wt.W=Ws),Gr||(Gn-=gn),Gn>wt.o&&(Gn=wt.o),wt.F=null,wt.J=null,Et.Fa!=null&&0<Et.Fa.length&&Un<Gn&&(wt.J=y(Et,wt,Un,Gn-Un),wt.F=Et.mb,wt.F==null&&wt.F.length==0)){vr=yn(Et,3,"Could not decode alpha data.");break t}Un<wt.j&&(gn=wt.j-Un,Un=wt.j,e(!(1&gn)),wt.O+=Et.R*gn,wt.N+=Et.B*(gn>>1),wt.W+=Et.B*(gn>>1),wt.F!=null&&(wt.J+=wt.width*gn)),Un<Gn&&(wt.O+=wt.v,wt.N+=wt.v>>1,wt.W+=wt.v>>1,wt.F!=null&&(wt.J+=wt.v),wt.ka=Un-wt.j,wt.U=wt.va-wt.v,wt.T=Gn-Un,vr=wt.put(wt))}rn+1!=Et.Ic||Gr||(r(Et.sa,Et.ta-Yt,rs,ks+16*Et.R,Yt),r(Et.qa,Et.ra-$n,lr,cn+8*Et.B,$n),r(Et.Ha,Et.Ia-$n,$r,Ws+8*Et.B,$n))}if(!vr)return yn(bn,6,"Output aborted.")}return 1})(de,Pe)),Pe.bc!=null&&Pe.bc(Pe),qe&=1}return qe?(de.cb=0,qe):0})(g,P)||(b=g.a)}}else b=g.a}b==0&&te.Oa!=null&&te.Oa.fd&&(b=bu(te.ba))}te=b}Z=te!=0?null:11>Z?re.f.RGBA.eb:re.f.kb.y}else Z=null;return Z};var Sd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function p(I,V){for(var T="",F=0;F<4;F++)T+=String.fromCharCode(I[V++]);return T}function m(I,V){return I[V+0]|I[V+1]<<8}function w(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16)>>>0}function _(I,V){return(I[V+0]|I[V+1]<<8|I[V+2]<<16|I[V+3]<<24)>>>0}new h;var x=[0],A=[0],R=[],C=new h,k=n,q=(function(I,V){var T={},F=0,L=!1,ee=0,ye=0;if(T.frames=[],!(function(M,G){for(var B=0;B<4;B++)if(M[G+B]!="RIFF".charCodeAt(B))return!0;return!1})(I,V)){for(_(I,V+=4),V+=8;V<I.length;){var le=p(I,V),ve=_(I,V+=4);V+=4;var me=ve+(1&ve);switch(le){case"VP8 ":case"VP8L":T.frames[F]===void 0&&(T.frames[F]={}),(J=T.frames[F]).src_off=L?ye:V-8,J.src_size=ee+ve+8,F++,L&&(L=!1,ee=0,ye=0);break;case"VP8X":(J=T.header={}).feature_flags=I[V];var Le=V+4;J.canvas_width=1+w(I,Le),Le+=3,J.canvas_height=1+w(I,Le),Le+=3;break;case"ALPH":L=!0,ee=me+8,ye=V-8;break;case"ANIM":(J=T.header).bgcolor=_(I,V),Le=V+4,J.loop_count=m(I,Le),Le+=2;break;case"ANMF":var xe,J;(J=T.frames[F]={}).offset_x=2*w(I,V),V+=3,J.offset_y=2*w(I,V),V+=3,J.width=1+w(I,V),V+=3,J.height=1+w(I,V),V+=3,J.duration=w(I,V),V+=3,xe=I[V++],J.dispose=1&xe,J.blend=xe>>1&1}le!="ANMF"&&(V+=me)}return T}})(k,0);q.response=k,q.rgbaoutput=!0,q.dataurl=!1;var $=q.header?q.header:null,z=q.frames?q.frames:null;if($){$.loop_counter=$.loop_count,x=[$.canvas_height],A=[$.canvas_width];for(var oe=0;oe<z.length&&z[oe].blend!=0;oe++);}var ce=z[0],H=C.WebPDecodeRGBA(k,ce.src_off,ce.src_size,A,x);ce.rgba=H,ce.imgwidth=A[0],ce.imgheight=x[0];for(var D=0;D<A[0]*x[0]*4;D++)R[D]=H[D];return this.width=A,this.height=x,this.data=R,this}(function(n){var e,t,r,i,o,u,d,h,p,m=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new h,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new u,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new u,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new w(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,u=this.internal.Point,d=this.internal.Rectangle,h=this.internal.Matrix,p=new m}]);var w=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=M;Object.defineProperty(this,"pdf",{get:function(){return G}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(Y){B=!!Y}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(Y){ae=!!Y}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(Y){isNaN(Y)||(ge=Y)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(Y){isNaN(Y)||(_e=Y)}}),Object.defineProperty(this,"margin",{get:function(){return p.margin},set:function(Y){var pe;typeof Y=="number"?pe=[Y,Y,Y,Y]:((pe=new Array(4))[0]=Y[0],pe[1]=Y.length>=2?Y[1]:pe[0],pe[2]=Y.length>=3?Y[2]:pe[0],pe[3]=Y.length>=4?Y[3]:pe[1]),p.margin=pe}});var Ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ve},set:function(Y){Ve=Y}});var Me=0;Object.defineProperty(this,"lastBreak",{get:function(){return Me},set:function(Y){Me=Y}});var Q=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Q},set:function(Y){Q=Y}}),Object.defineProperty(this,"ctx",{get:function(){return p},set:function(Y){Y instanceof m&&(p=Y)}}),Object.defineProperty(this,"path",{get:function(){return p.path},set:function(Y){p.path=Y}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(Y){Te=Y}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Y){var pe;pe=_(Y),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Y){var pe=_(Y);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Y){["butt","round","square"].indexOf(Y)!==-1&&(this.ctx.lineCap=Y,this.pdf.setLineCap(Y))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Y){isNaN(Y)||(this.ctx.lineWidth=Y,this.pdf.setLineWidth(Y))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Y){["bevel","round","miter"].indexOf(Y)!==-1&&(this.ctx.lineJoin=Y,this.pdf.setLineJoin(Y))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Y){isNaN(Y)||(this.ctx.miterLimit=Y,this.pdf.setMiterLimit(Y))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Y){this.ctx.textBaseline=Y}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Y){["right","end","center","left","start"].indexOf(Y)!==-1&&(this.ctx.textAlign=Y)}});var ue=null,be=null,Ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ie},set:function(Y){ue=null,be=null,Ie=Y}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Y){var pe;if(this.ctx.font=Y,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Y))!==null){var Ne=pe[1];pe[2];var je=pe[3],we=pe[4];pe[5];var Ce=pe[6],Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(we)[2];we=Math.floor(Je==="px"?parseFloat(we)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(we)*this.pdf.getFontSize():parseFloat(we)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(we);var ut=(function(Be){var it,gt,et=[],bt=Be.trim();if(bt==="")return Vy;if(bt in ES)return[ES[bt]];for(;bt!=="";){switch(gt=null,it=(bt=AS(bt)).charAt(0)){case'"':case"'":gt=MF(bt.substring(1),it);break;default:gt=OF(bt)}if(gt===null||(et.push(gt[0]),(bt=AS(gt[1]))!==""&&bt.charAt(0)!==","))return Vy;bt=bt.replace(/^,/,"")}return et})(Ce);if(this.fontFaces){var nt=(function(Be,it){var gt=Be.getFontList(),et=JSON.stringify(gt);if(ue===null||be!==et){var bt=(function(St){var Nt=[];return Object.keys(St).forEach(function(un){St[un].forEach(function(Ot){var Vt=null;switch(Ot){case"bold":Vt={family:un,weight:"bold"};break;case"italic":Vt={family:un,style:"italic"};break;case"bolditalic":Vt={family:un,weight:"bold",style:"italic"};break;case"":case"normal":Vt={family:un}}Vt!==null&&(Vt.ref={name:un,style:Ot},Nt.push(Vt))})}),Nt})(gt);ue=(function(St){for(var Nt={},un=0;un<St.length;++un){var Ot=By(St[un]),Vt=Ot.family,Cn=Ot.stretch,Pt=Ot.style,It=Ot.weight;Nt[Vt]=Nt[Vt]||{},Nt[Vt][Cn]=Nt[Vt][Cn]||{},Nt[Vt][Cn][Pt]=Nt[Vt][Cn][Pt]||{},Nt[Vt][Cn][Pt][It]=Ot}return Nt})(bt.concat(it)),be=et}return ue})(this.pdf,this.fontFaces),ke=ut.map(function(Be){return{family:Be,stretch:"normal",weight:je,style:Ne}}),st=(function(Be,it,gt){for(var et=(gt=gt||{}).defaultFontFamily||"times",bt=Object.assign({},FF,gt.genericFontFamilies||{}),St=null,Nt=null,un=0;un<it.length;++un)if(bt[(St=By(it[un])).family]&&(St.family=bt[St.family]),Be.hasOwnProperty(St.family)){Nt=Be[St.family];break}if(!(Nt=Nt||Be[et]))throw new Error("Could not find a font-family for the rule '"+NS(St)+"' and default family '"+et+"'.");if(Nt=(function(Ot,Vt){if(Vt[Ot])return Vt[Ot];var Cn=M1[Ot],Pt=Cn<=M1.normal?-1:1,It=_S(Vt,XA,Cn,Pt);if(!It)throw new Error("Could not find a matching font-stretch value for "+Ot);return It})(St.stretch,Nt),Nt=(function(Ot,Vt){if(Vt[Ot])return Vt[Ot];for(var Cn=KA[Ot],Pt=0;Pt<Cn.length;++Pt)if(Vt[Cn[Pt]])return Vt[Cn[Pt]];throw new Error("Could not find a matching font-style for "+Ot)})(St.style,Nt),!(Nt=(function(Ot,Vt){if(Vt[Ot])return Vt[Ot];if(Ot===400&&Vt[500])return Vt[500];if(Ot===500&&Vt[400])return Vt[400];var Cn=LF[Ot],Pt=_S(Vt,QA,Cn,Ot<400?-1:1);if(!Pt)throw new Error("Could not find a matching font-weight for value "+Ot);return Pt})(St.weight,Nt)))throw new Error("Failed to resolve a font for the rule '"+NS(St)+"'.");return Nt})(nt,ke);this.pdf.setFont(st.ref.name,st.ref.style)}else{var Xe="";(je==="bold"||parseInt(je,10)>=700||Ne==="bold")&&(Xe="bold"),Ne==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var Qe="",tt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Oe=0;Oe<ut.length;Oe++){if(this.pdf.internal.getFont(ut[Oe],Xe,{noFallback:!0,disableWarning:!0})!==void 0){Qe=ut[Oe];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(ut[Oe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Qe=ut[Oe],Xe="bold";else if(this.pdf.internal.getFont(ut[Oe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Qe=ut[Oe],Xe="normal";break}}if(Qe===""){for(var De=0;De<ut.length;De++)if(tt[ut[De]]){Qe=tt[ut[De]];break}}Qe=Qe===""?"Times":Qe,this.pdf.setFont(Qe,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Y){this.ctx.globalCompositeOperation=Y}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Y){this.ctx.globalAlpha=Y}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Y){this.ctx.lineDashOffset=Y,J.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Y){this.ctx.lineDash=Y,J.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Y){this.ctx.ignoreClearRect=!!Y}})};w.prototype.setLineDash=function(M){this.lineDash=M},w.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},w.prototype.fill=function(){z.call(this,"fill",!1)},w.prototype.stroke=function(){z.call(this,"stroke",!1)},w.prototype.beginPath=function(){this.path=[{type:"begin"}]},w.prototype.moveTo=function(M,G){if(isNaN(M)||isNaN(G))throw gr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new u(M,G));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new u(M,G)},w.prototype.closePath=function(){var M=new u(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&rr(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){M=new u(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new u(M.x,M.y)},w.prototype.lineTo=function(M,G){if(isNaN(M)||isNaN(G))throw gr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new u(M,G));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new u(B.x,B.y)},w.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),z.call(this,null,!0)},w.prototype.quadraticCurveTo=function(M,G,B,ae){if(isNaN(B)||isNaN(ae)||isNaN(M)||isNaN(G))throw gr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new u(B,ae)),_e=this.ctx.transform.applyToPoint(new u(M,G));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new u(ge.x,ge.y)},w.prototype.bezierCurveTo=function(M,G,B,ae,ge,_e){if(isNaN(ge)||isNaN(_e)||isNaN(M)||isNaN(G)||isNaN(B)||isNaN(ae))throw gr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ve=this.ctx.transform.applyToPoint(new u(ge,_e)),Me=this.ctx.transform.applyToPoint(new u(M,G)),Q=this.ctx.transform.applyToPoint(new u(B,ae));this.path.push({type:"bct",x1:Me.x,y1:Me.y,x2:Q.x,y2:Q.y,x:Ve.x,y:Ve.y}),this.ctx.lastPoint=new u(Ve.x,Ve.y)},w.prototype.arc=function(M,G,B,ae,ge,_e){if(isNaN(M)||isNaN(G)||isNaN(B)||isNaN(ae)||isNaN(ge))throw gr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var Ve=this.ctx.transform.applyToPoint(new u(M,G));M=Ve.x,G=Ve.y;var Me=this.ctx.transform.applyToPoint(new u(0,B)),Q=this.ctx.transform.applyToPoint(new u(0,0));B=Math.sqrt(Math.pow(Me.x-Q.x,2)+Math.pow(Me.y-Q.y,2))}Math.abs(ge-ae)>=2*Math.PI&&(ae=0,ge=2*Math.PI),this.path.push({type:"arc",x:M,y:G,radius:B,startAngle:ae,endAngle:ge,counterclockwise:_e})},w.prototype.arcTo=function(M,G,B,ae,ge){throw new Error("arcTo not implemented.")},w.prototype.rect=function(M,G,B,ae){if(isNaN(M)||isNaN(G)||isNaN(B)||isNaN(ae))throw gr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,G),this.lineTo(M+B,G),this.lineTo(M+B,G+ae),this.lineTo(M,G+ae),this.lineTo(M,G),this.lineTo(M+B,G),this.lineTo(M,G)},w.prototype.fillRect=function(M,G,B,ae){if(isNaN(M)||isNaN(G)||isNaN(B)||isNaN(ae))throw gr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,G,B,ae),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},w.prototype.strokeRect=function(M,G,B,ae){if(isNaN(M)||isNaN(G)||isNaN(B)||isNaN(ae))throw gr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");A.call(this)||(this.beginPath(),this.rect(M,G,B,ae),this.stroke())},w.prototype.clearRect=function(M,G,B,ae){if(isNaN(M)||isNaN(G)||isNaN(B)||isNaN(ae))throw gr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,G,B,ae))},w.prototype.save=function(M){M=typeof M!="boolean"||M;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},w.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(G),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},w.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var _=function(M){var G,B,ae,ge;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))G=0,B=0,ae=0,ge=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(_e!==null)G=parseInt(_e[1]),B=parseInt(_e[2]),ae=parseInt(_e[3]),ge=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)G=parseInt(_e[1]),B=parseInt(_e[2]),ae=parseInt(_e[3]),ge=parseFloat(_e[4]);else{if(ge=1,typeof M=="string"&&M.charAt(0)!=="#"){var Ve=new zA(M);M=Ve.ok?Ve.toHex():"#000000"}M.length===4?(G=M.substring(1,2),G+=G,B=M.substring(2,3),B+=B,ae=M.substring(3,4),ae+=ae):(G=M.substring(1,3),B=M.substring(3,5),ae=M.substring(5,7)),G=parseInt(G,16),B=parseInt(B,16),ae=parseInt(ae,16)}}return{r:G,g:B,b:ae,a:ge,style:M}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},A=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};w.prototype.fillText=function(M,G,B,ae){if(isNaN(G)||isNaN(B)||typeof M!="string")throw gr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!x.call(this)){var ge=me(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;F.call(this,{text:M,x:G,y:B,scale:_e,angle:ge,align:this.textAlign,maxWidth:ae})}},w.prototype.strokeText=function(M,G,B,ae){if(isNaN(G)||isNaN(B)||typeof M!="string")throw gr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!A.call(this)){ae=isNaN(ae)?void 0:ae;var ge=me(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;F.call(this,{text:M,x:G,y:B,scale:_e,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:ae})}},w.prototype.measureText=function(M){if(typeof M!="string")throw gr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,B=this.pdf.internal.scaleFactor,ae=G.internal.getFontSize(),ge=G.getStringUnitWidth(M)*ae/G.internal.scaleFactor;return new function(_e){var Ve=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ve}}),this}({width:ge*=Math.round(96*B/72*1e4)/1e4})},w.prototype.scale=function(M,G){if(isNaN(M)||isNaN(G))throw gr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new h(M,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},w.prototype.rotate=function(M){if(isNaN(M))throw gr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new h(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},w.prototype.translate=function(M,G){if(isNaN(M)||isNaN(G))throw gr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new h(1,0,0,1,M,G);this.ctx.transform=this.ctx.transform.multiply(B)},w.prototype.transform=function(M,G,B,ae,ge,_e){if(isNaN(M)||isNaN(G)||isNaN(B)||isNaN(ae)||isNaN(ge)||isNaN(_e))throw gr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ve=new h(M,G,B,ae,ge,_e);this.ctx.transform=this.ctx.transform.multiply(Ve)},w.prototype.setTransform=function(M,G,B,ae,ge,_e){M=isNaN(M)?1:M,G=isNaN(G)?0:G,B=isNaN(B)?0:B,ae=isNaN(ae)?1:ae,ge=isNaN(ge)?0:ge,_e=isNaN(_e)?0:_e,this.ctx.transform=new h(M,G,B,ae,ge,_e)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};w.prototype.drawImage=function(M,G,B,ae,ge,_e,Ve,Me,Q){var Te=this.pdf.getImageProperties(M),ue=1,be=1,Ie=1,Y=1;ae!==void 0&&Me!==void 0&&(Ie=Me/ae,Y=Q/ge,ue=Te.width/ae*Me/ae,be=Te.height/ge*Q/ge),_e===void 0&&(_e=G,Ve=B,G=0,B=0),ae!==void 0&&Me===void 0&&(Me=ae,Q=ge),ae===void 0&&Me===void 0&&(Me=Te.width,Q=Te.height);var pe=this.ctx.transform.decompose(),Ne=me(pe.rotate.shx),je=new h,we=(je=(je=(je=je.multiply(pe.translate)).multiply(pe.skew)).multiply(pe.scale)).applyToRectangle(new d(_e-G*Ie,Ve-B*Y,ae*ue,ge*be));if(this.autoPaging){for(var Ce,Je=C.call(this,we),ut=[],nt=0;nt<Je.length;nt+=1)ut.indexOf(Je[nt])===-1&&ut.push(Je[nt]);$(ut);for(var ke=ut[0],st=ut[ut.length-1],Xe=ke;Xe<st+1;Xe++){this.pdf.setPage(Xe);var Qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Xe===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Be=Xe===1?0:Oe+(Xe-2)*De;if(this.ctx.clip_path.length!==0){var it=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(Ce,this.posX+this.margin[3],-Be+tt+this.ctx.prevPageLastElemOffset),oe.call(this,"fill",!0),this.path=it}var gt=JSON.parse(JSON.stringify(we));gt=q([gt],this.posX+this.margin[3],-Be+tt+this.ctx.prevPageLastElemOffset)[0];var et=(Xe>ke||Xe<st)&&R.call(this);et&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,De,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",gt.x,gt.y,gt.w,gt.h,null,null,Ne),et&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(M,"JPEG",we.x,we.y,we.w,we.h,null,null,Ne)};var C=function(M,G,B){var ae=[];G=G||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ae.push(Math.floor((M.y+ge)/B)+1);break;case"arc":ae.push(Math.floor((M.y+ge-M.radius)/B)+1),ae.push(Math.floor((M.y+ge+M.radius)/B)+1);break;case"qct":var _e=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ae.push(Math.floor((_e.y+ge)/B)+1),ae.push(Math.floor((_e.y+_e.h+ge)/B)+1);break;case"bct":var Ve=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ae.push(Math.floor((Ve.y+ge)/B)+1),ae.push(Math.floor((Ve.y+Ve.h+ge)/B)+1);break;case"rect":ae.push(Math.floor((M.y+ge)/B)+1),ae.push(Math.floor((M.y+M.h+ge)/B)+1)}for(var Me=0;Me<ae.length;Me+=1)for(;this.pdf.internal.getNumberOfPages()<ae[Me];)k.call(this);return ae},k=function(){var M=this.fillStyle,G=this.strokeStyle,B=this.font,ae=this.lineCap,ge=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=G,this.font=B,this.lineCap=ae,this.lineWidth=ge,this.lineJoin=_e},q=function(M,G,B){for(var ae=0;ae<M.length;ae++)switch(M[ae].type){case"bct":M[ae].x2+=G,M[ae].y2+=B;case"qct":M[ae].x1+=G,M[ae].y1+=B;default:M[ae].x+=G,M[ae].y+=B}return M},$=function(M){return M.sort(function(G,B){return G-B})},z=function(M,G){var B=this.fillStyle,ae=this.strokeStyle,ge=this.lineCap,_e=this.lineWidth,Ve=Math.abs(_e*this.ctx.transform.scaleX),Me=this.lineJoin;if(this.autoPaging){for(var Q,Te,ue=JSON.parse(JSON.stringify(this.path)),be=JSON.parse(JSON.stringify(this.path)),Ie=[],Y=0;Y<be.length;Y++)if(be[Y].x!==void 0)for(var pe=C.call(this,be[Y]),Ne=0;Ne<pe.length;Ne+=1)Ie.indexOf(pe[Ne])===-1&&Ie.push(pe[Ne]);for(var je=0;je<Ie.length;je++)for(;this.pdf.internal.getNumberOfPages()<Ie[je];)k.call(this);$(Ie);for(var we=Ie[0],Ce=Ie[Ie.length-1],Je=we;Je<Ce+1;Je++){this.pdf.setPage(Je),this.fillStyle=B,this.strokeStyle=ae,this.lineCap=ge,this.lineWidth=Ve,this.lineJoin=Me;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],nt=Je===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],st=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Je===1?0:ke+(Je-2)*st;if(this.ctx.clip_path.length!==0){var Qe=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(Q,this.posX+this.margin[3],-Xe+nt+this.ctx.prevPageLastElemOffset),oe.call(this,M,!0),this.path=Qe}if(Te=JSON.parse(JSON.stringify(ue)),this.path=q(Te,this.posX+this.margin[3],-Xe+nt+this.ctx.prevPageLastElemOffset),G===!1||Je===0){var tt=(Je>we||Je<Ce)&&R.call(this);tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,st,null).clip().discardPath()),oe.call(this,M,G),tt&&this.pdf.restoreGraphicsState()}this.lineWidth=_e}this.path=ue}else this.lineWidth=Ve,oe.call(this,M,G),this.lineWidth=_e},oe=function(M,G){if((M!=="stroke"||G||!A.call(this))&&(M==="stroke"||G||!x.call(this))){for(var B,ae,ge=[],_e=this.path,Ve=0;Ve<_e.length;Ve++){var Me=_e[Ve];switch(Me.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:Me,deltas:[],abs:[]});break;case"lt":var Q=ge.length;if(_e[Ve-1]&&!isNaN(_e[Ve-1].x)&&(B=[Me.x-_e[Ve-1].x,Me.y-_e[Ve-1].y],Q>0)){for(;Q>=0;Q--)if(ge[Q-1].close!==!0&&ge[Q-1].begin!==!0){ge[Q-1].deltas.push(B),ge[Q-1].abs.push(Me);break}}break;case"bct":B=[Me.x1-_e[Ve-1].x,Me.y1-_e[Ve-1].y,Me.x2-_e[Ve-1].x,Me.y2-_e[Ve-1].y,Me.x-_e[Ve-1].x,Me.y-_e[Ve-1].y],ge[ge.length-1].deltas.push(B);break;case"qct":var Te=_e[Ve-1].x+2/3*(Me.x1-_e[Ve-1].x),ue=_e[Ve-1].y+2/3*(Me.y1-_e[Ve-1].y),be=Me.x+2/3*(Me.x1-Me.x),Ie=Me.y+2/3*(Me.y1-Me.y),Y=Me.x,pe=Me.y;B=[Te-_e[Ve-1].x,ue-_e[Ve-1].y,be-_e[Ve-1].x,Ie-_e[Ve-1].y,Y-_e[Ve-1].x,pe-_e[Ve-1].y],ge[ge.length-1].deltas.push(B);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(Me)}}ae=G?null:M==="stroke"?"stroke":"fill";for(var Ne=!1,je=0;je<ge.length;je++)if(ge[je].arc)for(var we=ge[je].abs,Ce=0;Ce<we.length;Ce++){var Je=we[Ce];Je.type==="arc"?D.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,G,!Ne):L.call(this,Je.x,Je.y),Ne=!0}else if(ge[je].close===!0)this.pdf.internal.out("h"),Ne=!1;else if(ge[je].begin!==!0){var ut=ge[je].start.x,nt=ge[je].start.y;ee.call(this,ge[je].deltas,ut,nt),Ne=!0}ae&&I.call(this,ae),G&&V.call(this)}},ce=function(M){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-B;case"top":return M+G-B;case"hanging":return M+G-2*B;case"middle":return M+G/2-B;default:return M}},H=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};w.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(G,B){this.colorStops.push([G,B])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},w.prototype.createPattern=function(){return this.createLinearGradient()},w.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(M,G,B,ae,ge,_e,Ve,Me,Q){for(var Te=le.call(this,B,ae,ge,_e),ue=0;ue<Te.length;ue++){var be=Te[ue];ue===0&&(Q?T.call(this,be.x1+M,be.y1+G):L.call(this,be.x1+M,be.y1+G)),ye.call(this,M,G,be.x2,be.y2,be.x3,be.y3,be.x4,be.y4)}Me?V.call(this):I.call(this,Ve)},I=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(M,G){this.pdf.internal.out(t(M)+" "+r(G)+" m")},F=function(M){var G;switch(M.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var B,ae,ge,_e=this.pdf.getTextDimensions(M.text),Ve=ce.call(this,M.y),Me=H.call(this,Ve)-_e.h,Q=this.ctx.transform.applyToPoint(new u(M.x,Ve));if(this.autoPaging){var Te=this.ctx.transform.decompose(),ue=new h;ue=(ue=(ue=ue.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale);for(var be=this.ctx.transform.applyToRectangle(new d(M.x,Ve,_e.w,_e.h)),Ie=ue.applyToRectangle(new d(M.x,Me,_e.w,_e.h)),Y=C.call(this,Ie),pe=[],Ne=0;Ne<Y.length;Ne+=1)pe.indexOf(Y[Ne])===-1&&pe.push(Y[Ne]);$(pe);for(var je=pe[0],we=pe[pe.length-1],Ce=je;Ce<we+1;Ce++){this.pdf.setPage(Ce);var Je=Ce===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[2],ke=nt-this.margin[0],st=this.pdf.internal.pageSize.width-this.margin[1],Xe=st-this.margin[3],Qe=Ce===1?0:ut+(Ce-2)*ke;if(this.ctx.clip_path.length!==0){var tt=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=q(B,this.posX+this.margin[3],-1*Qe+Je),oe.call(this,"fill",!0),this.path=tt}var Oe=q([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-Qe+Je+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*M.scale),ge=this.lineWidth,this.lineWidth=ge*M.scale);var De=this.autoPaging!=="text";if(De||Oe.y+Oe.h<=nt){if(De||Oe.y>=Je&&Oe.x<=st){var Be=De?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||st-Oe.x)[0],it=q([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-Qe+Je+this.ctx.prevPageLastElemOffset)[0],gt=De&&(Ce>je||Ce<we)&&R.call(this);gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,ke,null).clip().discardPath()),this.pdf.text(Be,it.x,it.y,{angle:M.angle,align:G,renderingMode:M.renderingMode}),gt&&this.pdf.restoreGraphicsState()}}else Oe.y<nt&&(this.ctx.prevPageLastElemOffset+=nt-Oe.y);M.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=ge)}}else M.scale>=.01&&(ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ae*M.scale),ge=this.lineWidth,this.lineWidth=ge*M.scale),this.pdf.text(M.text,Q.x+this.posX,Q.y+this.posY,{angle:M.angle,align:G,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(ae),this.lineWidth=ge)},L=function(M,G,B,ae){B=B||0,ae=ae||0,this.pdf.internal.out(t(M+B)+" "+r(G+ae)+" l")},ee=function(M,G,B){return this.pdf.lines(M,G,B,null,null)},ye=function(M,G,B,ae,ge,_e,Ve,Me){this.pdf.internal.out([e(i(B+M)),e(o(ae+G)),e(i(ge+M)),e(o(_e+G)),e(i(Ve+M)),e(o(Me+G)),"c"].join(" "))},le=function(M,G,B,ae){for(var ge=2*Math.PI,_e=Math.PI/2;G>B;)G-=ge;var Ve=Math.abs(B-G);Ve<ge&&ae&&(Ve=ge-Ve);for(var Me=[],Q=ae?-1:1,Te=G;Ve>1e-5;){var ue=Te+Q*Math.min(Ve,_e);Me.push(ve.call(this,M,Te,ue)),Ve-=Math.abs(ue-Te),Te=ue}return Me},ve=function(M,G,B){var ae=(B-G)/2,ge=M*Math.cos(ae),_e=M*Math.sin(ae),Ve=ge,Me=-_e,Q=Ve*Ve+Me*Me,Te=Q+Ve*ge+Me*_e,ue=4/3*(Math.sqrt(2*Q*Te)-Te)/(Ve*_e-Me*ge),be=Ve-ue*Me,Ie=Me+ue*Ve,Y=be,pe=-Ie,Ne=ae+G,je=Math.cos(Ne),we=Math.sin(Ne);return{x1:M*Math.cos(G),y1:M*Math.sin(G),x2:be*je-Ie*we,y2:be*we+Ie*je,x3:Y*je-pe*we,y3:Y*we+pe*je,x4:M*Math.cos(B),y4:M*Math.sin(B)}},me=function(M){return 180*M/Math.PI},Le=function(M,G,B,ae,ge,_e){var Ve=M+.5*(B-M),Me=G+.5*(ae-G),Q=ge+.5*(B-ge),Te=_e+.5*(ae-_e),ue=Math.min(M,ge,Ve,Q),be=Math.max(M,ge,Ve,Q),Ie=Math.min(G,_e,Me,Te),Y=Math.max(G,_e,Me,Te);return new d(ue,Ie,be-ue,Y-Ie)},xe=function(M,G,B,ae,ge,_e,Ve,Me){var Q,Te,ue,be,Ie,Y,pe,Ne,je,we,Ce,Je,ut,nt,ke=B-M,st=ae-G,Xe=ge-B,Qe=_e-ae,tt=Ve-ge,Oe=Me-_e;for(Te=0;Te<41;Te++)je=(pe=(ue=M+(Q=Te/40)*ke)+Q*((Ie=B+Q*Xe)-ue))+Q*(Ie+Q*(ge+Q*tt-Ie)-pe),we=(Ne=(be=G+Q*st)+Q*((Y=ae+Q*Qe)-be))+Q*(Y+Q*(_e+Q*Oe-Y)-Ne),Te==0?(Ce=je,Je=we,ut=je,nt=we):(Ce=Math.min(Ce,je),Je=Math.min(Je,we),ut=Math.max(ut,je),nt=Math.max(nt,we));return new d(Math.round(Ce),Math.round(Je),Math.round(ut-Ce),Math.round(nt-Je))},J=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,G,B=(M=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:G}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(Mt.API),(function(n){var e=function(u){var d,h,p,m,w,_,x,A,R,C;for(h=[],p=0,m=(u+=d="\0\0\0\0".slice(u.length%4||4)).length;m>p;p+=4)(w=(u.charCodeAt(p)<<24)+(u.charCodeAt(p+1)<<16)+(u.charCodeAt(p+2)<<8)+u.charCodeAt(p+3))!==0?(_=(w=((w=((w=((w=(w-(C=w%85))/85)-(R=w%85))/85)-(A=w%85))/85)-(x=w%85))/85)%85,h.push(_+33,x+33,A+33,R+33,C+33)):h.push(122);return(function(k,q){for(var $=q;$>0;$--)k.pop()})(h,d.length),String.fromCharCode.apply(String,h)+"~>"},t=function(u){var d,h,p,m,w,_=String,x="length",A=255,R="charCodeAt",C="slice",k="replace";for(u[C](-2),u=u[C](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),p=[],m=0,w=(u+=d="uuuuu"[C](u[x]%5||5))[x];w>m;m+=5)h=52200625*(u[R](m)-33)+614125*(u[R](m+1)-33)+7225*(u[R](m+2)-33)+85*(u[R](m+3)-33)+(u[R](m+4)-33),p.push(A&h>>24,A&h>>16,A&h>>8,A&h);return(function(q,$){for(var z=$;z>0;z--)q.pop()})(p,d[x]),_.fromCharCode.apply(_,p)},r=function(u){return u.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(u){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),d.test(u)===!1)return"";for(var h="",p=0;p<u.length;p+=2)h+=String.fromCharCode("0x"+(u[p]+u[p+1]));return h},o=function(u){for(var d=new Uint8Array(u.length),h=u.length;h--;)d[h]=u.charCodeAt(h);return(d=R1(d)).reduce(function(p,m){return p+String.fromCharCode(m)},"")};n.processDataByFilters=function(u,d){var h=0,p=u||"",m=[];for(typeof(d=d||[])=="string"&&(d=[d]),h=0;h<d.length;h+=1)switch(d[h]){case"ASCII85Decode":case"/ASCII85Decode":p=t(p),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":p=e(p),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":p=i(p),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":p=r(p),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":p=o(p),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[h]+'" is not implemented')}return{data:p,reverseChain:m.reverse().join(" ")}}})(Mt.API),(function(n){n.loadFile=function(e,t,r){return(function(i,o,u){o=o!==!1,u=typeof u=="function"?u:function(){};var d=void 0;try{d=(function(h,p,m){var w=new XMLHttpRequest,_=0,x=function(A){var R=A.length,C=[],k=String.fromCharCode;for(_=0;_<R;_+=1)C.push(k(255&A.charCodeAt(_)));return C.join("")};if(w.open("GET",h,!p),w.overrideMimeType("text/plain; charset=x-user-defined"),p===!1&&(w.onload=function(){w.status===200?m(x(this.responseText)):m(void 0)}),w.send(null),p&&w.status===200)return x(w.responseText)})(i,o,u)}catch{}return d})(e,t,r)},n.loadImageFile=n.loadFile})(Mt.API),(function(n){function e(){return(en.html2canvas?Promise.resolve(en.html2canvas):$u(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[],import.meta.url)).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function t(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):$u(()=>import("./purify.es-C65SP4u9.js"),[],import.meta.url)).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var r=function(d){var h=rr(d);return h==="undefined"?"undefined":h==="string"||d instanceof String?"string":h==="number"||d instanceof Number?"number":h==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":h==="object"?"object":"unknown"},i=function(d,h){var p=document.createElement(d);for(var m in h.className&&(p.className=h.className),h.innerHTML&&h.dompurify&&(p.innerHTML=h.dompurify.sanitize(h.innerHTML)),h.style)p.style[m]=h.style[m];return p},o=function d(h,p){for(var m=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),w=h.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||m.appendChild(d(w,p));return h.nodeType===1&&(h.nodeName==="CANVAS"?(m.width=h.width,m.height=h.height,m.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(m.value=h.value),m.addEventListener("load",function(){m.scrollTop=h.scrollTop,m.scrollLeft=h.scrollLeft},!0)),m},u=function d(h){var p=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),m=d.convert(Promise.resolve(),p);return(m=m.setProgress(1,d,1,[d])).set(h)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(d,h){return d.__proto__=h||u.prototype,d},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(d,h){return this.then(function(){switch(h=h||(function(p){switch(r(p)){case"string":return"string";case"element":return p.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),h){case"string":return this.then(t).then(function(p){return this.set({src:i("div",{innerHTML:d,dompurify:p})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},u.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},h=o(this.prop.src,this.opt.html2canvas.javascriptEnabled);h.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(h),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var p=Object.assign({},this.opt.html2canvas);return delete p.onrendered,h(this.prop.container,p)}).then(function(h){(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(h){var p=this.opt.jsPDF,m=this.opt.fontFaces,w=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:w,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,p.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,p.context2d.posX=this.opt.x,p.context2d.posY=this.opt.y,p.context2d.margin=this.opt.margin,p.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var A=m[x],R=A.src.find(function(C){return C.format==="truetype"});R&&p.addFont(R.url,A.ref.name,A.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=_.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,p.context2d.save(!0),h(this.prop.container,_)}).then(function(h){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(h),this.prop.canvas=h,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(d,h,p){return(p=p||"pdf").toLowerCase()==="img"||p.toLowerCase()==="image"?this.outputImg(d,h):this.outputPdf(d,h)},u.prototype.outputPdf=function(d,h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,h)})},u.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},u.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(d){if(r(d)!=="object")return this;var h=Object.keys(d||{}).map(function(p){if(p in u.template.prop)return function(){this.prop[p]=d[p]};switch(p){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[p]=d[p]}}},this);return this.then(function(){return this.thenList(h)})},u.prototype.get=function(d,h){return this.then(function(){var p=d in u.template.prop?this.prop[d]:this.opt[d];return h?h(p):p})},u.prototype.setMargin=function(d){return this.then(function(){switch(r(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},u.prototype.setPageSize=function(d){function h(p,m){return Math.floor(p*m/72*96)}return this.then(function(){(d=d||Mt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:h(d.inner.width,d.k),height:h(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},u.prototype.setProgress=function(d,h,p,m){return d!=null&&(this.progress.val=d),h!=null&&(this.progress.state=h),p!=null&&(this.progress.n=p),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(d,h,p,m){return this.setProgress(d?this.progress.val+d:null,h||null,p?this.progress.n+p:null,m?this.progress.stack.concat(m):null)},u.prototype.then=function(d,h){var p=this;return this.thenCore(d,h,function(m,w){return p.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(_){return p.updateProgress(null,m),_}).then(m,w).then(function(_){return p.updateProgress(1),_})})},u.prototype.thenCore=function(d,h,p){p=p||Promise.prototype.then;var m=this;d&&(d=d.bind(m)),h&&(h=h.bind(m));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:u.convert(Object.assign({},m),Promise.prototype),_=p.call(w,d,h);return u.convert(_,m.__proto__)},u.prototype.thenExternal=function(d,h){return Promise.prototype.then.call(this,d,h)},u.prototype.thenList=function(d){var h=this;return d.forEach(function(p){h=h.thenCore(p)}),h},u.prototype.catch=function(d){d&&(d=d.bind(this));var h=Promise.prototype.catch.call(this,d);return u.convert(h,this)},u.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},u.prototype.error=function(d){return this.then(function(){throw new Error(d)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Mt.getPageSize=function(d,h,p){if(rr(d)==="object"){var m=d;d=m.orientation,h=m.unit||h,p=m.format||p}h=h||"mm",p=p||"a4",d=(""+(d||"P")).toLowerCase();var w,_=(""+p).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(h){case"pt":w=1;break;case"mm":w=72/25.4;break;case"cm":w=72/2.54;break;case"in":w=72;break;case"px":w=.75;break;case"pc":case"em":w=12;break;case"ex":w=6;break;default:throw"Invalid unit: "+h}var A,R=0,C=0;if(x.hasOwnProperty(_))R=x[_][1]/w,C=x[_][0]/w;else try{R=p[1],C=p[0]}catch{throw new Error("Invalid format: "+p)}if(d==="p"||d==="portrait")d="p",C>R&&(A=C,C=R,R=A);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",R>C&&(A=C,C=R,R=A)}return{width:C,height:R,unit:h,k:w,orientation:d}},n.html=function(d,h){(h=h||{}).callback=h.callback||function(){},h.html2canvas=h.html2canvas||{},h.html2canvas.canvas=h.html2canvas.canvas||this.canvas,h.jsPDF=h.jsPDF||this,h.fontFaces=h.fontFaces?h.fontFaces.map(By):null;var p=new u(h);return h.worker?p:p.from(d).doCallback()}})(Mt.API),Mt.API.addJS=function(n){return jS=n,this.internal.events.subscribe("postPutResources",function(){vm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vm+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),TS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vm!==void 0&&TS!==void 0&&this.internal.out("/Names <</JavaScript "+vm+" 0 R>>")}),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var u=i[o],d=r.exec(u);if(d!=null){var h=d[1];t.internal.newObjectDeferredBegin(h,!1)}t.internal.write(u)}if(this.outline.createNamedDestinations){var p=this.internal.pages.length,m=[];for(o=0;o<p;o++){var w=t.internal.newObject();m.push(w);var _=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+_.objId+" 0 R /XYZ null null null]>> endobj")}var x=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<m.length;o++)t.internal.write("(page_"+(o+1)+")"+m[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+x+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var u={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(u),u},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var u=r.children[o];this.objStart(u),this.line("/Title "+this.makeString(u.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),u.children.length>0&&(this.line("/First "+this.makeRef(u.children[0])),this.line("/Last "+this.makeRef(u.children[u.children.length-1])));var d=this.count=this.count_r({count:0},u);if(d>0&&this.line("/Count "+d),u.options&&u.options.pageNumber){var h=t.internal.getPageInfo(u.options.pageNumber);this.line("/Dest ["+h.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var p=0;p<r.children.length;p++)this.renderItems(r.children[p])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])})(Mt.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,u,d){var h,p=this.decode.DCT_DECODE,m=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=u||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,h=(function(w){for(var _,x=256*w.charCodeAt(4)+w.charCodeAt(5),A=w.length,R={width:0,height:0,numcomponents:1},C=4;C<A;C+=2){if(C+=x,e.indexOf(w.charCodeAt(C+1))!==-1){_=256*w.charCodeAt(C+5)+w.charCodeAt(C+6),R={width:256*w.charCodeAt(C+7)+w.charCodeAt(C+8),height:_,numcomponents:w.charCodeAt(C+9)};break}x=256*w.charCodeAt(C+2)+w.charCodeAt(C+3)}return R})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),h.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}m={data:t,width:h.width,height:h.height,colorSpace:d,bitsPerComponent:8,filter:p,index:r,alias:i}}return m}})(Mt.API),Mt.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var i,o=xF(n,{checkCrc:!0}),u=o.width,d=o.height,h=o.channels,p=o.palette,m=o.depth;i=p&&h===1?(function(D){for(var I=D.width,V=D.height,T=D.data,F=D.palette,L=D.depth,ee=!1,ye=[],le=[],ve=void 0,me=!1,Le=0,xe=0;xe<F.length;xe++){var J=kw(F[xe],4),M=J[0],G=J[1],B=J[2],ae=J[3];ye.push(M,G,B),ae!=null&&(ae===0?(Le++,le.length<1&&le.push(xe)):ae<255&&(me=!0))}if(me||Le>1){ee=!0,le=void 0;var ge=I*V;ve=new Uint8Array(ge);for(var _e=new DataView(T.buffer),Ve=0;Ve<ge;Ve++){var Me=zy(_e,Ve,L),Q=kw(F[Me],4)[3];ve[Ve]=Q}}else Le===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ee?8:void 0,colorBytes:T,alphaBytes:ve,needSMask:ee,palette:ye,mask:le}})(o):h===2||h===4?(function(D){for(var I=D.data,V=D.width,T=D.height,F=D.channels,L=D.depth,ee=F===2?"DeviceGray":"DeviceRGB",ye=F-1,le=V*T,ve=ye,me=le*ve,Le=1*le,xe=Math.ceil(me*L/8),J=Math.ceil(Le*L/8),M=new Uint8Array(xe),G=new Uint8Array(J),B=new DataView(I.buffer),ae=new DataView(M.buffer),ge=new DataView(G.buffer),_e=!1,Ve=0;Ve<le;Ve++){for(var Me=Ve*F,Q=0;Q<ve;Q++)MS(ae,zy(B,Me+Q,L),Ve*ve+Q,L);var Te=zy(B,Me+ve,L);Te<(1<<L)-1&&(_e=!0),MS(ge,Te,1*Ve,L)}return{colorSpace:ee,colorsPerPixel:ye,sMaskBitsPerComponent:_e?L:void 0,colorBytes:M,alphaBytes:G,needSMask:_e}})(o):(function(D){var I=D.data,V=D.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:V,colorsPerPixel:V==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(T){for(var F=T.length,L=new Uint8Array(2*F),ee=new DataView(L.buffer,L.byteOffset,L.byteLength),ye=0;ye<F;ye++)ee.setUint16(2*ye,T[ye],!1);return L})(I):I,needSMask:!1}})(o);var w,_,x,A=i,R=A.colorSpace,C=A.colorsPerPixel,k=A.sMaskBitsPerComponent,q=A.colorBytes,$=A.alphaBytes,z=A.needSMask,oe=A.palette,ce=A.mask,H=null;return r!==Mt.API.image_compression.NONE&&typeof R1=="function"?(H=(function(D){var I;switch(D){case Mt.API.image_compression.FAST:I=11;break;case Mt.API.image_compression.MEDIUM:I=13;break;case Mt.API.image_compression.SLOW:I=14;break;default:I=12}return I})(r),w=this.decode.FLATE_DECODE,_="/Predictor ".concat(H," /Colors ").concat(C," /BitsPerComponent ").concat(m," /Columns ").concat(u),n=kS(q,Math.ceil(u*C*m/8),C,m,r),z&&(x=kS($,Math.ceil(u*k/8),1,k,r))):(w=void 0,_=void 0,n=q,z&&(x=$)),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:t,data:n,index:e,filter:w,decodeParameters:_,transparency:ce,palette:oe,sMask:x,predictor:H,width:u,height:d,bitsPerComponent:m,sMaskBitsPerComponent:k,colorSpace:R}}},(function(n){n.processGIF89A=function(e,t,r,i){var o=new zF(e),u=o.width,d=o.height,h=[];o.decodeAndBlitFrameRGBA(0,h);var p={data:h,width:u,height:d},m=new qy(100).encode(p,100);return n.processJPEG.call(this,m,t,r,i)},n.processGIF87A=n.processGIF89A})(Mt.API),No.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},No.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){gr.log("bit decode error:"+t)}},No.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+8*i*4,d=0;d<8&&8*i+d<this.width;d++){var h=this.palette[o>>7-d&1];this.data[u+4*d]=h.blue,this.data[u+4*d+1]=h.green,this.data[u+4*d+2]=h.red,this.data[u+4*d+3]=255}t!==0&&(this.pos+=4-t)}},No.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+2*i*4,d=o>>4,h=15&o,p=this.palette[d];if(this.data[u]=p.blue,this.data[u+1]=p.green,this.data[u+2]=p.red,this.data[u+3]=255,2*i+1>=this.width)break;p=this.palette[h],this.data[u+4]=p.blue,this.data[u+4+1]=p.green,this.data[u+4+2]=p.red,this.data[u+4+3]=255}e!==0&&(this.pos+=4-e)}},No.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var u=this.palette[i];this.data[o]=u.red,this.data[o+1]=u.green,this.data[o+2]=u.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},No.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var u=(o&e)/e*255|0,d=(o>>5&e)/e*255|0,h=(o>>10&e)/e*255|0,p=o>>15?255:0,m=r*this.width*4+4*i;this.data[m]=h,this.data[m+1]=d,this.data[m+2]=u,this.data[m+3]=p}this.pos+=n}},No.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(u&e)/e*255|0,h=(u>>5&t)/t*255|0,p=(u>>11)/e*255|0,m=i*this.width*4+4*o;this.data[m]=p,this.data[m+1]=h,this.data[m+2]=d,this.data[m+3]=255}this.pos+=n}},No.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=e*this.width*4+4*t;this.data[u]=o,this.data[u+1]=i,this.data[u+2]=r,this.data[u+3]=255}this.pos+=this.width%4}},No.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*t;this.data[d]=o,this.data[d+1]=i,this.data[d+2]=r,this.data[d+3]=u}},No.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var o=new No(e,!1),u=o.width,d=o.height,h={data:o.getData(),width:u,height:d},p=new qy(100).encode(h,100);return n.processJPEG.call(this,p,t,r,i)}})(Mt.API),US.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var o=new US(e),u=o.width,d=o.height,h={data:o.getData(),width:u,height:d},p=new qy(100).encode(h,100);return n.processJPEG.call(this,p,t,r,i)}})(Mt.API),Mt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),u=new Uint8Array(i/4),d=0,h=0,p=0;p<i;p+=4){var m=r[p],w=r[p+1],_=r[p+2],x=r[p+3];o[d++]=m,o[d++]=w,o[d++]=_,u[h++]=x}var A=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(u),data:A,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Mt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wd=Mt.API,bm=Wd.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),u=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:i.metadata.Unicode.widths,h=d.fof?d.fof:1,p=e.kerning?e.kerning:i.metadata.Unicode.kerning,m=p.fof?p.fof:1,w=e.doKerning!==!1,_=0,x=n.length,A=0,R=d[0]||h,C=[];for(t=0;t<x;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+u*(1e3/o)||0)/1e3):(_=w&&rr(p[r])==="object"&&!isNaN(parseInt(p[r][A],10))?p[r][A]/m:0,C.push((d[r]||R)/h+_)),A=r;return C},CS=Wd.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Wd.processArabic&&(n=Wd.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:bm.apply(this,arguments).reduce(function(o,u){return o+u},0)},RS=function(n,e,t,r){for(var i=[],o=0,u=n.length,d=0;o!==u&&d+e[o]<t;)d+=e[o],o++;i.push(n.slice(0,o));var h=o;for(d=0;o!==u;)d+e[o]>r&&(i.push(n.slice(h,o)),d=0,h=o),d+=e[o],o++;return h!==o&&i.push(n.slice(h,o)),i},IS=function(n,e,t){t||(t={});var r,i,o,u,d,h,p,m=[],w=[m],_=t.textIndent||0,x=0,A=0,R=n.split(" "),C=bm.apply(this,[" ",t])[0];if(h=t.lineIndent===-1?R[0].length+2:t.lineIndent||0){var k=Array(h).join(" "),q=[];R.map(function(z){(z=z.split(/\s*\n/)).length>1?q=q.concat(z.map(function(oe,ce){return(ce&&oe.length?`
`:"")+oe})):q.push(z[0])}),R=q,h=CS.apply(this,[k,t])}for(o=0,u=R.length;o<u;o++){var $=0;if(r=R[o],h&&r[0]==`
`&&(r=r.substr(1),$=1),_+x+(A=(i=bm.apply(this,[r,t])).reduce(function(z,oe){return z+oe},0))>e||$){if(A>e){for(d=RS.apply(this,[r,i,e-(_+x),e]),m.push(d.shift()),m=[d.pop()];d.length;)w.push([d.shift()]);A=i.slice(r.length-(m[0]?m[0].length:0)).reduce(function(z,oe){return z+oe},0)}else m=[r];w.push(m),_=A+h,x=C}else m.push(r),_+=x+A,x=C}return p=h?function(z,oe){return(oe?k:"")+z.join(" ")}:function(z){return z.join(" ")},w.map(p)},Wd.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var w=this.internal.getFont(m.fontName,m.fontStyle),_="Unicode";return w.metadata[_]?{widths:w.metadata[_].widths||{0:1},kerning:w.metadata[_].kerning||{}}:{font:w.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var u=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var d,h,p=[];for(d=0,h=r.length;d<h;d++)p=p.concat(IS.apply(this,[r[d],u,o]));return p},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},i={},o=0;o<16;o++)r[t[o]]=e[o],i[e[o]]=t[o];var u=function(_){return"0x"+parseInt(_,10).toString(16)},d=n.__fontmetrics__.compress=function(_){var x,A,R,C,k=["{"];for(var q in _){if(x=_[q],isNaN(parseInt(q,10))?A="'"+q+"'":(q=parseInt(q,10),A=(A=u(q).slice(2)).slice(0,-1)+i[A.slice(-1)]),typeof x=="number")x<0?(R=u(x).slice(3),C="-"):(R=u(x).slice(2),C=""),R=C+R.slice(0,-1)+i[R.slice(-1)];else{if(rr(x)!=="object")throw new Error("Don't know what to do with value type "+rr(x)+".");R=d(x)}k.push(A+R)}return k.push("}"),k.join("")},h=n.__fontmetrics__.uncompress=function(_){if(typeof _!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,A,R,C,k={},q=1,$=k,z=[],oe="",ce="",H=_.length-1,D=1;D<H;D+=1)(C=_[D])=="'"?x?(R=x.join(""),x=void 0):x=[]:x?x.push(C):C=="{"?(z.push([$,R]),$={},R=void 0):C=="}"?((A=z.pop())[0][A[1]]=$,R=void 0,$=A[0]):C=="-"?q=-1:R===void 0?r.hasOwnProperty(C)?(oe+=r[C],R=parseInt(oe,16)*q,q=1,oe=""):oe+=C:r.hasOwnProperty(C)?(ce+=r[C],$[R]=parseInt(ce,16)*q,q=1,R=void 0,ce=""):ce+=C;return k},p={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:p,"Courier-Bold":p,"Courier-BoldOblique":p,"Courier-Oblique":p,Helvetica:p,"Helvetica-Bold":p,"Helvetica-BoldOblique":p,"Helvetica-Oblique":p,"Times-Roman":p,"Times-Bold":p,"Times-BoldItalic":p,"Times-Italic":p}},w={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var x=_.font,A=w.Unicode[x.postScriptName];A&&(x.metadata.Unicode={},x.metadata.Unicode.widths=A.widths,x.metadata.Unicode.kerning=A.kerning);var R=m.Unicode[x.postScriptName];R&&(x.metadata.Unicode.encoding=R,x.encoding=R.codePages[0])}])})(Mt.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(u,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(Dm(d)),u.metadata=n.API.TTFFont.open(d),u.metadata.Unicode=u.metadata.Unicode||{encoding:{},kerning:{},widths:[]},u.metadata.glyIdsUsed=[0]})(i,r)}}])})(Mt),Mt.API.addSvgAsImage=function(n,e,t,r,i,o,u,d){if(isNaN(e)||isNaN(t))throw gr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw gr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=i;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},w=this;return(en.canvg?Promise.resolve(en.canvg):$u(()=>import("./index.es-BmqADLi_.js"),[],import.meta.url)).catch(function(_){return Promise.reject(new Error("Could not load canvg: "+_))}).then(function(_){return _.default?_.default:_}).then(function(_){return _.fromString(p,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(_){return _.render(m)}).then(function(){w.addImage(h.toDataURL("image/jpeg",1),e,t,r,i,u,d)})},Mt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Mt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,u={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(u),h=[],p=0,m=0,w=0;function _(A,R){var C,k=!1;for(C=0;C<A.length;C+=1)A[C]===R&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(u)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var x=d.length;for(w=0;w<x;w+=1)t[d[w]].value=t[d[w]].defaultValue,t[d[w]].explicitSet=!1}if(rr(n)==="object"){for(i in n)if(o=n[i],_(d,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&_(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(p=0;p<o.length;p+=1)if(r=!0,o[p].length===1&&typeof o[p][0]=="number")h.push(String(o[p]-1));else if(o[p].length>1){for(m=0;m<o[p].length;m+=1)typeof o[p][m]!="number"&&(r=!1);r===!0&&h.push([o[p][0]-1,o[p][1]-1].join(" "))}t[i].value="["+h.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var A,R=[];for(A in t)t[A].explicitSet===!0&&(t[A].type==="name"?R.push("/"+A+" /"+t[A].value):R.push("/"+A+" "+t[A].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),u=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),h=unescape(encodeURIComponent("</x:xmpmeta>")),p=o.length+u.length+d.length+i.length+h.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+p+" >>"),this.internal.write("stream"),this.internal.write(i+o+u+d+h),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(Mt.API),(function(n){var e=n.API,t=e.pdfEscape16=function(o,u){for(var d,h=u.metadata.Unicode.widths,p=["","0","00","000","0000"],m=[""],w=0,_=o.length;w<_;++w){if(d=u.metadata.characterToGlyph(o.charCodeAt(w)),u.metadata.glyIdsUsed.push(d),u.metadata.toUnicode[d]=o.charCodeAt(w),h.indexOf(d)==-1&&(h.push(d),h.push([parseInt(u.metadata.widthOfGlyph(d),10)])),d=="0")return m.join("");d=d.toString(16),m.push(p[4-d.length],d)}return m.join("")},r=function(o){var u,d,h,p,m,w,_;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,h=[],w=0,_=(d=Object.keys(o).sort(function(x,A){return x-A})).length;w<_;w++)u=d[w],h.length>=100&&(m+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar`,h=[]),o[u]!==void 0&&o[u]!==null&&typeof o[u].toString=="function"&&(p=("0000"+o[u].toString(16)).slice(-4),u=("0000"+(+u).toString(16)).slice(-4),h.push("<"+u+"><"+p+">"));return h.length&&(m+=`
`+h.length+` beginbfchar
`+h.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(u){var d=u.font,h=u.out,p=u.newObject,m=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="Identity-H"){for(var w=d.metadata.Unicode.widths,_=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),x="",A=0;A<_.length;A++)x+=String.fromCharCode(_[A]);var R=p();m({data:x,addLength1:!0,objectId:R}),h("endobj");var C=p();m({data:r(d.metadata.toUnicode),addLength1:!0,objectId:C}),h("endobj");var k=p();h("<<"),h("/Type /FontDescriptor"),h("/FontName /"+Zd(d.fontName)),h("/FontFile2 "+R+" 0 R"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/Flags "+d.metadata.flags),h("/StemV "+d.metadata.stemV),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h(">>"),h("endobj");var q=p();h("<<"),h("/Type /Font"),h("/BaseFont /"+Zd(d.fontName)),h("/FontDescriptor "+k+" 0 R"),h("/W "+n.API.PDFObject.convert(w)),h("/CIDToGIDMap /Identity"),h("/DW 1000"),h("/Subtype /CIDFontType2"),h("/CIDSystemInfo"),h("<<"),h("/Supplement 0"),h("/Registry (Adobe)"),h("/Ordering ("+d.encoding+")"),h(">>"),h(">>"),h("endobj"),d.objectNumber=p(),h("<<"),h("/Type /Font"),h("/Subtype /Type0"),h("/ToUnicode "+C+" 0 R"),h("/BaseFont /"+Zd(d.fontName)),h("/Encoding /"+d.encoding),h("/DescendantFonts ["+q+" 0 R]"),h(">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(u){var d=u.font,h=u.out,p=u.newObject,m=u.putStream;if(d.metadata instanceof n.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var w=d.metadata.rawData,_="",x=0;x<w.length;x++)_+=String.fromCharCode(w[x]);var A=p();m({data:_,addLength1:!0,objectId:A}),h("endobj");var R=p();m({data:r(d.metadata.toUnicode),addLength1:!0,objectId:R}),h("endobj");var C=p();h("<<"),h("/Descent "+d.metadata.decender),h("/CapHeight "+d.metadata.capHeight),h("/StemV "+d.metadata.stemV),h("/Type /FontDescriptor"),h("/FontFile2 "+A+" 0 R"),h("/Flags 96"),h("/FontBBox "+n.API.PDFObject.convert(d.metadata.bbox)),h("/FontName /"+Zd(d.fontName)),h("/ItalicAngle "+d.metadata.italicAngle),h("/Ascent "+d.metadata.ascender),h(">>"),h("endobj"),d.objectNumber=p();for(var k=0;k<d.metadata.hmtx.widths.length;k++)d.metadata.hmtx.widths[k]=parseInt(d.metadata.hmtx.widths[k]*(1e3/d.metadata.head.unitsPerEm));h("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+Zd(d.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),h("endobj"),d.isAlreadyPutted=!0}})(o)}]);var i=function(o){var u,d=o.text||"",h=o.x,p=o.y,m=o.options||{},w=o.mutex||{},_=w.pdfEscape,x=w.activeFontKey,A=w.fonts,R=x,C="",k=0,q="",$=A[R].encoding;if(A[R].encoding!=="Identity-H")return{text:d,x:h,y:p,options:m,mutex:w};for(q=d,R=x,Array.isArray(d)&&(q=d[0]),k=0;k<q.length;k+=1)A[R].metadata.hasOwnProperty("cmap")&&(u=A[R].metadata.cmap.unicode.codeMap[q[k].charCodeAt(0)]),u||q[k].charCodeAt(0)<256&&A[R].metadata.hasOwnProperty("Unicode")?C+=q[k]:C+="";var z="";return parseInt(R.slice(1))<14||$==="WinAnsiEncoding"?z=_(C,R).split("").map(function(oe){return oe.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(z=t(C,A[R])),w.isHex=!0,{text:z,x:h,y:p,options:m,mutex:w}};e.events.push(["postProcessText",function(o){var u=o.text||"",d=[],h={text:u,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(u)){var p=0;for(p=0;p<u.length;p+=1)Array.isArray(u[p])&&u[p].length===3?d.push([i(Object.assign({},h,{text:u[p][0]})).text,u[p][1],u[p][2]]):d.push(i(Object.assign({},h,{text:u[p]})).text);o.text=d}else o.text=i(Object.assign({},h,{text:u})).text}])})(Mt),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(Mt.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,u,d,h,p,m,w=e,_=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),q=!1,$=0;this.__bidiEngine__={};var z=function(T){var F=T.charCodeAt(),L=F>>8,ee=R[L];return ee!==void 0?w[256*ee+(255&F)]:L===252||L===253?"AL":k.test(L)?"L":L===8?"R":"N"},oe=function(T){for(var F,L=0;L<T.length;L++){if((F=z(T.charAt(L)))==="L")return!1;if(F==="R")return!0}return!1},ce=function(T,F,L,ee){var ye,le,ve,me,Le=F[ee];switch(Le){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":q=!1;break;case"N":case"AN":break;case"EN":q&&(Le="AN");break;case"AL":q=!0,Le="R";break;case"WS":case"BN":Le="N";break;case"CS":ee<1||ee+1>=F.length||(ye=L[ee-1])!=="EN"&&ye!=="AN"||(le=F[ee+1])!=="EN"&&le!=="AN"?Le="N":q&&(le="AN"),Le=le===ye?le:"N";break;case"ES":Le=(ye=ee>0?L[ee-1]:"B")==="EN"&&ee+1<F.length&&F[ee+1]==="EN"?"EN":"N";break;case"ET":if(ee>0&&L[ee-1]==="EN"){Le="EN";break}if(q){Le="N";break}for(ve=ee+1,me=F.length;ve<me&&F[ve]==="ET";)ve++;Le=ve<me&&F[ve]==="EN"?"EN":"N";break;case"NSM":if(u&&!d){for(me=F.length,ve=ee+1;ve<me&&F[ve]==="NSM";)ve++;if(ve<me){var xe=T[ee],J=xe>=1425&&xe<=2303||xe===64286;if(ye=F[ve],J&&(ye==="R"||ye==="AL")){Le="R";break}}}Le=ee<1||(ye=F[ee-1])==="B"?"N":L[ee-1];break;case"B":q=!1,i=!0,Le=$;break;case"S":o=!0,Le="N"}return Le},H=function(T,F,L){var ee=T.split("");return L&&D(ee,L,{hiLevel:$}),ee.reverse(),F&&F.reverse(),ee.join("")},D=function(T,F,L){var ee,ye,le,ve,me,Le=-1,xe=T.length,J=0,M=[],G=$?x:_,B=[];for(q=!1,i=!1,o=!1,ye=0;ye<xe;ye++)B[ye]=z(T[ye]);for(le=0;le<xe;le++){if(me=J,M[le]=ce(T,B,M,le),ee=240&(J=G[me][A[M[le]]]),J&=15,F[le]=ve=G[J][5],ee>0)if(ee===16){for(ye=Le;ye<le;ye++)F[ye]=1;Le=-1}else Le=-1;if(G[J][6])Le===-1&&(Le=le);else if(Le>-1){for(ye=Le;ye<le;ye++)F[ye]=ve;Le=-1}B[le]==="B"&&(F[le]=0),L.hiLevel|=ve}o&&(function(ae,ge,_e){for(var Ve=0;Ve<_e;Ve++)if(ae[Ve]==="S"){ge[Ve]=$;for(var Me=Ve-1;Me>=0&&ae[Me]==="WS";Me--)ge[Me]=$}})(B,F,xe)},I=function(T,F,L,ee,ye){if(!(ye.hiLevel<T)){if(T===1&&$===1&&!i)return F.reverse(),void(L&&L.reverse());for(var le,ve,me,Le,xe=F.length,J=0;J<xe;){if(ee[J]>=T){for(me=J+1;me<xe&&ee[me]>=T;)me++;for(Le=J,ve=me-1;Le<ve;Le++,ve--)le=F[Le],F[Le]=F[ve],F[ve]=le,L&&(le=L[Le],L[Le]=L[ve],L[ve]=le);J=me}J++}}},V=function(T,F,L){var ee=T.split(""),ye={hiLevel:$};return L||(L=[]),D(ee,L,ye),(function(le,ve,me){if(me.hiLevel!==0&&m)for(var Le,xe=0;xe<le.length;xe++)ve[xe]===1&&(Le=C.indexOf(le[xe]))>=0&&(le[xe]=C[Le+1])})(ee,L,ye),I(2,ee,F,L,ye),I(1,ee,F,L,ye),ee.join("")};return this.__bidiEngine__.doBidiReorder=function(T,F,L){if((function(ye,le){if(le)for(var ve=0;ve<ye.length;ve++)le[ve]=ve;d===void 0&&(d=oe(ye)),p===void 0&&(p=oe(ye))})(T,F),u||!h||p)if(u&&h&&d^p)$=d?1:0,T=H(T,F,L);else if(!u&&h&&p)$=d?1:0,T=V(T,F,L),T=H(T,F);else if(!u||d||h||p){if(u&&!h&&d^p)T=H(T,F),d?($=0,T=V(T,F,L)):($=1,T=V(T,F,L),T=H(T,F));else if(u&&d&&!h&&p)$=1,T=V(T,F,L),T=H(T,F);else if(!u&&!h&&d^p){var ee=m;d?($=1,T=V(T,F,L),$=0,m=!1,T=V(T,F,L),m=ee):($=0,T=V(T,F,L),T=H(T,F),$=1,m=!1,T=V(T,F,L),m=ee,T=H(T,F))}}else $=0,T=V(T,F,L);else $=d?1:0,T=V(T,F,L);return T},this.__bidiEngine__.setOptions=function(T){T&&(u=T.isInputVisual,h=T.isOutputVisual,d=T.isInputRtl,p=T.isOutputRtl,m=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var u=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var d=0;for(u=[],d=0;d<i.length;d+=1)Object.prototype.toString.call(i[d])==="[object Array]"?u.push([t.doBidiReorder(i[d][0]),i[d][1],i[d][2]]):u.push([t.doBidiReorder(i[d])]);r.text=u}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(Mt),Mt.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new uu(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new rM(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new qF(this.contents),this.head=new $F(this),this.name=new XF(this),this.cmap=new ZA(this),this.toUnicode={},this.hhea=new GF(this),this.maxp=new QF(this),this.hmtx=new JF(this),this.post=new YF(this),this.os2=new WF(this),this.loca=new nM(this),this.glyf=new ZF(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var u,d,h,p;for(p=[],u=0,d=(h=this.bbox).length;u<d;u++)e=h[u],p.push(Math.round(e*this.scaleFactor));return p}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,u,d;for(u=0,o=0,d=(e=""+e).length;0<=d?o<d:o>d;o=0<=d?++o:--o)i=e.charCodeAt(o),u+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return u*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var Io,uu=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,u,d,h;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),u=this.readByte(),d=this.readByte(),h=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^u)+256*(255^d)+(255^h)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*u+256*d+h},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n})(),qF=(function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,u,d,h,p,m,w,_,x,A,R;for(R in x=Object.keys(t).length,h=Math.log(2),w=16*Math.floor(Math.log(x)/h),u=Math.floor(w/h),m=16*x-w,(i=new uu).writeInt(this.scalarType),i.writeShort(x),i.writeShort(w),i.writeShort(u),i.writeShort(m),o=16*x,p=i.pos+o,d=null,A=[],t)for(_=t[R],i.writeString(R),i.writeInt(n(_)),i.writeInt(p),i.writeInt(_.length),A=A.concat(_),R==="head"&&(d=p),p+=_.length;p%4;)A.push(0),p++;return i.write(A),r=2981146554-n(i.data),i.pos=d+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,u;for(t=e4.call(t);t.length%4;)t.push(0);for(o=new uu(t),i=0,r=0,u=t.length;r<u;r=r+=4)i+=o.readUInt32();return 4294967295&i},e})(),HF={}.hasOwnProperty,gl=function(n,e){for(var t in e)HF.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Io=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var $F=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new uu).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n})(),BS=(function(){function n(e,t){var r,i,o,u,d,h,p,m,w,_,x,A,R,C,k,q,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),w=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(h=0;h<256;++h)this.codeMap[h]=e.readByte();break;case 4:for(x=e.readUInt16(),_=x/2,e.pos+=6,o=(function(){var z,oe;for(oe=[],h=z=0;0<=_?z<_:z>_;h=0<=_?++z:--z)oe.push(e.readUInt16());return oe})(),e.pos+=2,R=(function(){var z,oe;for(oe=[],h=z=0;0<=_?z<_:z>_;h=0<=_?++z:--z)oe.push(e.readUInt16());return oe})(),p=(function(){var z,oe;for(oe=[],h=z=0;0<=_?z<_:z>_;h=0<=_?++z:--z)oe.push(e.readUInt16());return oe})(),m=(function(){var z,oe;for(oe=[],h=z=0;0<=_?z<_:z>_;h=0<=_?++z:--z)oe.push(e.readUInt16());return oe})(),i=(this.length-e.pos+this.offset)/2,d=(function(){var z,oe;for(oe=[],h=z=0;0<=i?z<i:z>i;h=0<=i?++z:--z)oe.push(e.readUInt16());return oe})(),h=k=0,$=o.length;k<$;h=++k)for(C=o[h],r=q=A=R[h];A<=C?q<=C:q>=C;r=A<=C?++q:--q)m[h]===0?u=r+p[h]:(u=d[m[h]/2+(r-A)-(_-h)]||0)!==0&&(u+=p[h]),this.codeMap[r]=65535&u}e.pos=w}return n.encode=function(e,t){var r,i,o,u,d,h,p,m,w,_,x,A,R,C,k,q,$,z,oe,ce,H,D,I,V,T,F,L,ee,ye,le,ve,me,Le,xe,J,M,G,B,ae,ge,_e,Ve,Me,Q,Te,ue;switch(ee=new uu,u=Object.keys(e).sort(function(be,Ie){return be-Ie}),t){case"macroman":for(R=0,C=(function(){var be=[];for(A=0;A<256;++A)be.push(0);return be})(),q={0:0},o={},ye=0,Le=u.length;ye<Le;ye++)q[Me=e[i=u[ye]]]==null&&(q[Me]=++R),o[i]={old:e[i],new:q[e[i]]},C[i]=q[e[i]];return ee.writeUInt16(1),ee.writeUInt16(0),ee.writeUInt32(12),ee.writeUInt16(0),ee.writeUInt16(262),ee.writeUInt16(0),ee.write(C),{charMap:o,subtable:ee.data,maxGlyphID:R+1};case"unicode":for(F=[],w=[],$=0,q={},r={},k=p=null,le=0,xe=u.length;le<xe;le++)q[oe=e[i=u[le]]]==null&&(q[oe]=++$),r[i]={old:oe,new:q[oe]},d=q[oe]-i,k!=null&&d===p||(k&&w.push(k),F.push(i),p=d),k=i;for(k&&w.push(k),w.push(65535),F.push(65535),V=2*(I=F.length),D=2*Math.pow(Math.log(I)/Math.LN2,2),_=Math.log(D/2)/Math.LN2,H=2*I-D,h=[],ce=[],x=[],A=ve=0,J=F.length;ve<J;A=++ve){if(T=F[A],m=w[A],T===65535){h.push(0),ce.push(0);break}if(T-(L=r[T].new)>=32768)for(h.push(0),ce.push(2*(x.length+I-A)),i=me=T;T<=m?me<=m:me>=m;i=T<=m?++me:--me)x.push(r[i].new);else h.push(L-T),ce.push(0)}for(ee.writeUInt16(3),ee.writeUInt16(1),ee.writeUInt32(12),ee.writeUInt16(4),ee.writeUInt16(16+8*I+2*x.length),ee.writeUInt16(0),ee.writeUInt16(V),ee.writeUInt16(D),ee.writeUInt16(_),ee.writeUInt16(H),_e=0,M=w.length;_e<M;_e++)i=w[_e],ee.writeUInt16(i);for(ee.writeUInt16(0),Ve=0,G=F.length;Ve<G;Ve++)i=F[Ve],ee.writeUInt16(i);for(Q=0,B=h.length;Q<B;Q++)d=h[Q],ee.writeUInt16(d);for(Te=0,ae=ce.length;Te<ae;Te++)z=ce[Te],ee.writeUInt16(z);for(ue=0,ge=x.length;ue<ge;ue++)R=x[ue],ee.writeUInt16(R);return{charMap:r,subtable:ee.data,maxGlyphID:$+1}}},n})(),ZA=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)t=new BS(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,i;return t==null&&(t="macroman"),r=BS.encode(e,t),(i=new uu).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},n})(),GF=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n})(),WF=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r})(),this.charRange=(function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n})(),YF=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var o;for(r=e.readUInt16(),this.glyphNameIndex=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)t=e.readByte(),i.push(this.names.push(e.readString(t)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var u,d,h;for(h=[],o=u=0,d=this.file.maxp.numGlyphs;0<=d?u<d:u>d;o=0<=d?++u:--u)h.push(e.readUInt32());return h}).call(this)}},n})(),KF=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XF=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,i,o,u,d,h,p,m,w,_;for(e.pos=this.offset,e.readShort(),t=e.readShort(),d=e.readShort(),r=[],o=0;0<=t?o<t:o>t;o=0<=t?++o:--o)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(h={},o=m=0,w=r.length;m<w;o=++m)i=r[o],e.pos=i.offset,p=e.readString(i.length),u=new KF(p,i),h[_=i.nameID]==null&&(h[_]=[]),h[i.nameID].push(u);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},n})(),QF=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n})(),JF=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,i,o,u,d,h;for(e.pos=this.offset,this.metrics=[],t=0,d=this.file.hhea.numberOfMetrics;0<=d?t<d:t>d;t=0<=d?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var p,m;for(m=[],t=p=0;0<=i?p<i:p>i;t=0<=i?++p:--p)m.push(e.readInt16());return m})(),this.widths=(function(){var p,m,w,_;for(_=[],p=0,m=(w=this.metrics).length;p<m;p++)o=w[p],_.push(o.advance);return _}).call(this),r=this.widths[this.widths.length-1],h=[],t=u=0;0<=i?u<i:u>i;t=0<=i?++u:--u)h.push(this.widths.push(r));return h},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n})(),e4=[].slice,ZF=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,i,o,u,d,h,p,m,w;return e in this.cache?this.cache[e]:(o=this.file.loca,t=this.file.contents,r=o.indexOf(e),(i=o.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,u=(d=new uu(t.read(i))).readShort(),p=d.readShort(),w=d.readShort(),h=d.readShort(),m=d.readShort(),this.cache[e]=u===-1?new tM(d,p,w,h,m):new eM(d,u,p,w,h,m),this.cache[e]))},n.prototype.encode=function(e,t,r){var i,o,u,d,h;for(u=[],o=[],d=0,h=t.length;d<h;d++)i=e[t[d]],o.push(u.length),i&&(u=u.concat(i.encode(r)));return o.push(u.length),{table:u,offsets:o}},n})(),eM=(function(){function n(e,t,r,i,o,u){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=u,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),tM=(function(){function n(e,t,r,i,o){var u,d;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],u=this.raw;d=u.readShort(),this.glyphOffsets.push(u.pos),this.glyphIDs.push(u.readUInt16()),32&d;)u.pos+=1&d?4:2,128&d?u.pos+=8:64&d?u.pos+=4:8&d&&(u.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new uu(e4.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),nM=(function(){function n(){return n.__super__.constructor.apply(this,arguments)}return gl(n,Io),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=2)o.push(2*e.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],r=0,i=this.length;r<i;r+=4)o.push(e.readUInt32());return o}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),i=0,o=0,u=0;u<r.length;++u)if(r[u]=i,o<t.length&&t[o]==u){++o,r[u]=i;var d=this.offsets[u],h=this.offsets[u+1]-d;h>0&&(i+=h)}for(var p=new Array(4*r.length),m=0;m<r.length;++m)p[4*m+3]=255&r[m],p[4*m+2]=(65280&r[m])>>8,p[4*m+1]=(16711680&r[m])>>16,p[4*m]=(4278190080&r[m])>>24;return p},n})(),rM=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,u,d,h;for(i={},u=0,d=e.length;u<d;u++)i[o=e[u]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in h=this.glyphsFor(t))r=h[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,u,d,h,p,m,w,_,x,A,R,C,k;for(i in r=ZA.encode(this.generateCmap(),"unicode"),u=this.glyphsFor(e),x={0:0},k=r.charMap)x[(h=k[i]).old]=h.new;for(A in _=r.maxGlyphID,u)A in x||(x[A]=_++);return m=(function(q){var $,z;for($ in z={},q)z[q[$]]=$;return z})(x),w=Object.keys(m).sort(function(q,$){return q-$}),R=(function(){var q,$,z;for(z=[],q=0,$=w.length;q<$;q++)d=w[q],z.push(m[d]);return z})(),o=this.font.glyf.encode(u,R,x),p=this.font.loca.encode(o.offsets,R),C={cmap:this.font.cmap.raw(),glyf:o.table,loca:p,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},n})();Mt.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,u;if(Array.isArray(t))return"["+(function(){var d,h,p;for(p=[],d=0,h=t.length;d<h;d++)r=t[d],p.push(e.convert(r));return p})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)u=t[i],o.push("/"+i+" "+e.convert(u));return o.push(">>"),o.join(`
`)}return""+t},e})();const t4=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:PF,AcroFormAppearance:Rt,AcroFormButton:Ps,AcroFormCheckBox:If,AcroFormChoiceField:Gu,AcroFormComboBox:Yu,AcroFormEditBox:Cf,AcroFormListBox:Wu,AcroFormPasswordField:kf,AcroFormPushButton:Rf,AcroFormRadioButton:Ku,AcroFormTextField:eu,GState:$f,ShadingPattern:Gc,TilingPattern:Uu,default:Mt,jsPDF:Mt},Symbol.toStringTag,{value:"Module"}));function n4(n,e,t,r,i){r=r||{};var o=1.15,u=i.internal.scaleFactor,d=i.internal.getFontSize()/u,h=i.getLineHeightFactor?i.getLineHeightFactor():o,p=d*h,m=/\r\n|\r|\n/g,w="",_=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(w=typeof n=="string"?n.split(m):n,_=w.length||1),t+=d*(2-o),r.valign==="middle"?t-=_/2*p:r.valign==="bottom"&&(t-=_*p),r.halign==="center"||r.halign==="right"){var x=d;if(r.halign==="center"&&(x*=.5),w&&_>=1){for(var A=0;A<w.length;A++)i.text(w[A],e-i.getStringUnitWidth(w[A])*x,t),t+=p;return i}e-=i.getStringUnitWidth(n)*x}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var VS={},ah=(function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:VS=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var u=this.jsPDFDocument.internal.getFont(),d=u.fontStyle,h=u.fontName;if(e.font&&(h=e.font),e.fontStyle){d=e.fontStyle;var p=this.getFontList()[h];p&&p.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(p[0]),d=p[0])}if(this.jsPDFDocument.setFont(h,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var m=n.unifyColor(e.fillColor);m&&(r=this.jsPDFDocument).setFillColor.apply(r,m),m=n.unifyColor(e.textColor),m&&(i=this.jsPDFDocument).setTextColor.apply(i,m),m=n.unifyColor(e.lineColor),m&&(o=this.jsPDFDocument).setDrawColor.apply(o,m),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,o){return this.jsPDFDocument.rect(e,t,r,i,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return VS||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n})(),O1=function(n,e){return O1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},O1(n,e)};function r4(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");O1(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var s4=(function(n){r4(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e})(Array);function sM(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function iM(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function ag(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,u){return Math.max(o,u)},0);return i}function i4(n,e,t,r){var i=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:o});var u=a4(i,!1);u&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,u)}function a4(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function Bg(n,e){var t,r,i,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function o4(n,e){var t=Bg(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function aM(n,e,t,r,i){var o={},u=1.3333333333333333,d=Hy(e,function($){return i.getComputedStyle($).backgroundColor});d!=null&&(o.fillColor=d);var h=Hy(e,function($){return i.getComputedStyle($).color});h!=null&&(o.textColor=h);var p=lM(r,t);p&&(o.cellPadding=p);var m="borderTopColor",w=u*t,_=r.borderTopWidth;if(r.borderBottomWidth===_&&r.borderRightWidth===_&&r.borderLeftWidth===_){var x=(parseFloat(_)||0)/w;x&&(o.lineWidth=x)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/w,right:(parseFloat(r.borderRightWidth)||0)/w,bottom:(parseFloat(r.borderBottomWidth)||0)/w,left:(parseFloat(r.borderLeftWidth)||0)/w},o.lineWidth.top||(o.lineWidth.right?m="borderRightColor":o.lineWidth.bottom?m="borderBottomColor":o.lineWidth.left&&(m="borderLeftColor"));var A=Hy(e,function($){return i.getComputedStyle($)[m]});A!=null&&(o.lineColor=A);var R=["left","right","center","justify"];R.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),R=["middle","bottom","top"],R.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(o.fontSize=C/u);var k=oM(r);k&&(o.fontStyle=k);var q=(r.fontFamily||"").toLowerCase();return n.indexOf(q)!==-1&&(o.font=q),o}function oM(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Hy(n,e){var t=l4(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function l4(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:l4(n.parentElement,e):t}function lM(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(d){return parseInt(d||"0")/r}),u=Bg(o,0);return i>u.top&&(u.top=i),i>u.bottom&&(u.bottom=i),u}function c4(n,e,t,r,i){var o,u;r===void 0&&(r=!1),i===void 0&&(i=!1);var d;typeof e=="string"?d=t.document.querySelector(e):d=e;var h=Object.keys(n.getFontList()),p=n.scaleFactor(),m=[],w=[],_=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:m,body:w,foot:_};for(var x=0;x<d.rows.length;x++){var A=d.rows[x],R=(u=(o=A?.parentElement)===null||o===void 0?void 0:o.tagName)===null||u===void 0?void 0:u.toLowerCase(),C=cM(h,p,t,A,r,i);C&&(R==="thead"?m.push(C):R==="tfoot"?_.push(C):w.push(C))}return{head:m,body:w,foot:_}}function cM(n,e,t,r,i,o){for(var u=new s4(r),d=0;d<r.cells.length;d++){var h=r.cells[d],p=t.getComputedStyle(h);if(i||p.display!=="none"){var m=void 0;o&&(m=aM(n,h,e,p,t)),u.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:m,_element:h,content:uM(h)})}}var w=t.getComputedStyle(r);if(u.length>0&&(i||w.display!=="none"))return u}function uM(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function dM(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var o=i[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Kl(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),u=1;u<arguments.length;u++){var d=arguments[u];if(d!=null)for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(o[h]=d[h])}return o}function l2(n,e){var t=new ah(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();dM(i,r,e);var o=Kl({},i,r,e),u;typeof window<"u"&&(u=window);var d=hM(i,r,e),h=fM(i,r,e),p=pM(t,o),m=gM(t,o,u);return{id:e.tableId,content:m,hooks:h,styles:d,settings:p}}function hM(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(h){if(h==="columnStyles"){var p=n[h],m=e[h],w=t[h];r.columnStyles=Kl({},p,m,w)}else{var _=[n,e,t],x=_.map(function(A){return A[h]||{}});r[h]=Kl({},x[0],x[1],x[2])}},o=0,u=Object.keys(r);o<u.length;o++){var d=u[o];i(d)}return r}function fM(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,u=r;o<u.length;o++){var d=u[o];d.didParseCell&&i.didParseCell.push(d.didParseCell),d.willDrawCell&&i.willDrawCell.push(d.willDrawCell),d.didDrawCell&&i.didDrawCell.push(d.didDrawCell),d.willDrawPage&&i.willDrawPage.push(d.willDrawPage),d.didDrawPage&&i.didDrawPage.push(d.didDrawPage)}return i}function pM(n,e){var t,r,i,o,u,d,h,p,m,w,_,x,A=Bg(e.margin,40/n.scaleFactor()),R=(t=mM(n,e.startY))!==null&&t!==void 0?t:A.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var k;e.showHead===!0?k="everyPage":e.showHead===!1?k="never":k=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var q=(o=e.useCss)!==null&&o!==void 0?o:!1,$=e.theme||(q?"plain":"striped"),z=!!e.horizontalPageBreak,oe=(u=e.horizontalPageBreakRepeat)!==null&&u!==void 0?u:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:q,theme:$,startY:R,margin:A,pageBreak:(h=e.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(p=e.rowPageBreak)!==null&&p!==void 0?p:"auto",tableWidth:(m=e.tableWidth)!==null&&m!==void 0?m:"auto",showHead:k,showFoot:C,tableLineWidth:(w=e.tableLineWidth)!==null&&w!==void 0?w:0,tableLineColor:(_=e.tableLineColor)!==null&&_!==void 0?_:200,horizontalPageBreak:z,horizontalPageBreakRepeat:oe,horizontalPageBreakBehaviour:(x=e.horizontalPageBreakBehaviour)!==null&&x!==void 0?x:"afterAllRows"}}function mM(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var u=t.startPageNumber+t.pageNumber-1;o=u===i}return typeof e=="number"?e:(e==null||e===!1)&&o&&t?.finalY!=null?t.finalY+20/r:null}function gM(n,e,t){var r=e.head||[],i=e.body||[],o=e.foot||[];if(e.html){var u=e.includeHiddenHtml;if(t){var d=c4(n,e.html,t,u,e.useCss)||{};r=d.head||r,i=d.body||r,o=d.foot||r}else console.error("Cannot parse html in non browser environment")}var h=e.columns||yM(r,i,o);return{columns:h,head:r,body:i,foot:o}}function yM(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var u=1,d;Array.isArray(r)?d=r[parseInt(o)]:d=r[o],typeof d=="object"&&!Array.isArray(d)&&(u=d?.colSpan||1);for(var h=0;h<u;h++){var p=void 0;Array.isArray(r)?p=i.length:p=o+(h>0?"_".concat(h):"");var m={dataKey:p};i.push(m)}}),i}var og=(function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n})(),u4=(function(n){r4(e,n);function e(t,r,i,o,u,d){var h=n.call(this,t,r,d)||this;return h.cell=i,h.row=o,h.column=u,h.section=o.section,h}return e})(og),d4=(function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,o,u){for(var d=0,h=t;d<h.length;d++){var p=h[d],m=new u4(e,this,r,i,o,u),w=p(m)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],w)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var o=i[r];o(new og(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var o=i[r];o(new og(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n})(),c2=(function(){function n(e,t,r,i,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof s4&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var o;return Math.max(r,((o=t.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,o){var u=r.cells[o.index];if(!u)return 0;var d=t.getLineHeight(u.styles.fontSize),h=u.padding("vertical"),p=h+d;return p>i?p:i},0)},n})(),u2=(function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var u=o!=null?""+o:"",d=/\r\n|\r|\n/g;this.text=u.split(d)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,o=r*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=Bg(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n})(),h4=(function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var o=i[r],u=o.cells[this.index];u&&typeof u.styles.cellWidth=="number"&&(t=Math.max(t,u.styles.cellWidth))}return t},n})();function vM(n,e){bM(n,e);var t=[],r=0;e.columns.forEach(function(o){var u=o.getMaxCustomCellWidth(e);u?o.width=u:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=U1(t,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=U1(t,i,function(o){return o.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),wM(e),SM(e,n),xM(e)}function bM(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=o4(n,e);e.allRows().forEach(function(o){for(var u=0,d=e.columns;u<d.length;u++){var h=d[u],p=o.cells[h.index];if(p){var m=e.hooks.didParseCell;e.callCellHooks(n,m,p,o,h,null);var w=p.padding("horizontal");p.contentWidth=ag(p.text,p.styles,n)+w;var _=ag(p.text.join(" ").split(/[^\S\u00A0]+/),p.styles,n);if(p.minReadableWidth=_+p.padding("horizontal"),typeof p.styles.cellWidth=="number")p.minWidth=p.styles.cellWidth,p.wrappedWidth=p.styles.cellWidth;else if(p.styles.cellWidth==="wrap"||r===!0)p.contentWidth>i?(p.minWidth=i,p.wrappedWidth=i):(p.minWidth=p.contentWidth,p.wrappedWidth=p.contentWidth);else{var x=10/t;p.minWidth=p.styles.minCellWidth||x,p.wrappedWidth=p.contentWidth,p.minWidth>p.wrappedWidth&&(p.wrappedWidth=p.minWidth)}}}}),e.allRows().forEach(function(o){for(var u=0,d=e.columns;u<d.length;u++){var h=d[u],p=o.cells[h.index];if(p&&p.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,p.wrappedWidth),h.minWidth=Math.max(h.minWidth,p.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,p.minReadableWidth);else{var m=e.styles.columnStyles[h.dataKey]||e.styles.columnStyles[h.index]||{},w=m.cellWidth||m.minCellWidth;w&&typeof w=="number"&&(h.minWidth=w,h.wrappedWidth=w)}p&&(p.colSpan>1&&!h.minWidth&&(h.minWidth=p.minWidth),p.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=p.minWidth))}})}function U1(n,e,t){for(var r=e,i=n.reduce(function(x,A){return x+A.wrappedWidth},0),o=0;o<n.length;o++){var u=n[o],d=u.wrappedWidth/i,h=r*d,p=u.width+h,m=t(u),w=p<m?m:p;e-=w-u.width,u.width=w}if(e=Math.round(e*1e10)/1e10,e){var _=n.filter(function(x){return e<0?x.width>t(x):!0});_.length&&(e=U1(_,e,t))}return e}function xM(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var o=r[i],u=0,d=n.columns;u<d.length;u++){var h=d[u],p=e[h.index];if(t>1)t--,delete o.cells[h.index];else if(p)p.cell.height+=o.height,t=p.cell.colSpan,delete o.cells[h.index],p.left--,p.left<=1&&delete e[h.index];else{var m=o.cells[h.index];if(!m)continue;if(m.height=o.height,m.rowSpan>1){var w=r.length-i,_=m.rowSpan>w?w:m.rowSpan;e[h.index]={cell:m,left:_,row:o}}}}}function wM(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,o=0,u=0,d=0;d<n.columns.length;d++){var h=n.columns[d];if(u-=1,u>1&&n.columns[d+1])o+=h.width,delete r.cells[h.index];else if(i){var p=i;delete r.cells[h.index],i=null,p.width=h.width+o}else{var p=r.cells[h.index];if(!p)continue;if(u=p.colSpan,o=0,p.colSpan>1){i=p,o+=h.width;continue}p.width=h.width+o}}}function SM(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var o=i[r],u=0,d=n.columns;u<d.length;u++){var h=d[u],p=o.cells[h.index];if(p){e.applyStyles(p.styles,!0);var m=p.width-p.padding("horizontal");if(p.styles.overflow==="linebreak")p.text=e.splitTextToSize(p.text,m+1/e.scaleFactor(),{fontSize:p.styles.fontSize});else if(p.styles.overflow==="ellipsize")p.text=zS(p.text,m,p.styles,e,"...");else if(p.styles.overflow==="hidden")p.text=zS(p.text,m,p.styles,e,"");else if(typeof p.styles.overflow=="function"){var w=p.styles.overflow(p.text,m);typeof w=="string"?p.text=[w]:p.text=w}p.contentHeight=p.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var _=p.contentHeight/p.rowSpan;p.rowSpan>1&&t.count*t.height<_*p.rowSpan?t={height:_,count:p.rowSpan}:t&&t.count>0&&t.height>_&&(_=t.height),_>o.height&&(o.height=_)}}t.count--}}function zS(n,e,t,r,i){return n.map(function(o){return _M(o,e,t,r,i)})}function _M(n,e,t,r,i){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=ag(n,t,r))return n;for(;e<ag(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function d2(n,e){var t=new ah(n),r=EM(e,t.scaleFactor()),i=new d4(e,r);return vM(t,i),t.applyStyles(t.userStyles),i}function EM(n,e){var t=n.content,r=AM(t.columns);if(t.head.length===0){var i=qS(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=qS(r,"foot");i&&t.foot.push(i)}var o=n.settings.theme,u=n.styles;return{columns:r,head:$y("head",t.head,r,u,o,e),body:$y("body",t.body,r,u,o,e),foot:$y("foot",t.foot,r,u,o,e)}}function $y(n,e,t,r,i,o){var u={},d=e.map(function(h,p){for(var m=0,w={},_=0,x=0,A=0,R=t;A<R.length;A++){var C=R[A];if(u[C.index]==null||u[C.index].left===0)if(x===0){var k=void 0;Array.isArray(h)?k=h[C.index-_-m]:k=h[C.dataKey];var q={};typeof k=="object"&&!Array.isArray(k)&&(q=k?.styles||{});var $=TM(n,C,p,i,r,o,q),z=new u2(k,$,n);w[C.dataKey]=z,w[C.index]=z,x=z.colSpan-1,u[C.index]={left:z.rowSpan-1,times:x}}else x--,_++;else u[C.index].left--,x=u[C.index].times,m++}return new c2(h,p,n,w)});return d}function qS(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=NM(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function NM(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function AM(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new h4(i,e,t)})}function TM(n,e,t,r,i,o,u){var d=iM(r),h;n==="head"?h=i.headStyles:n==="body"?h=i.bodyStyles:n==="foot"&&(h=i.footStyles);var p=Kl({},d.table,d[n],i.styles,h),m=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},w=n==="body"?m:{},_=n==="body"&&t%2===0?Kl({},d.alternateRow,i.alternateRowStyles):{},x=sM(o),A=Kl({},x,p,_,w);return Kl(A,u)}function jM(n,e,t){var r;t===void 0&&(t={});var i=o4(n,e),o=new Map,u=[],d=[],h=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?h=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(h=[e.settings.horizontalPageBreakRepeat]),h.forEach(function(_){var x=e.columns.find(function(A){return A.dataKey===_||A.index===_});x&&!o.has(x.index)&&(o.set(x.index,!0),u.push(x.index),d.push(e.columns[x.index]),i-=x.wrappedWidth)});for(var p=!0,m=(r=t?.start)!==null&&r!==void 0?r:0;m<e.columns.length;){if(o.has(m)){m++;continue}var w=e.columns[m].wrappedWidth;if(p||i>=w)p=!1,u.push(m),d.push(e.columns[m]),i-=w;else break;m++}return{colIndexes:u,columns:d,lastIndex:m-1}}function CM(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=jM(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function h2(n,e){var t=e.settings,r=t.startY,i=t.margin,o={x:i.left,y:r},u=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=r+i.bottom+u;if(t.pageBreak==="avoid"){var h=e.body,p=h.reduce(function(_,x){return _+x.height},0);d+=p}var m=new ah(n);(t.pageBreak==="always"||t.startY!=null&&d>m.pageSize().height)&&(p4(m),o.y=i.top),e.callWillDrawPageHooks(m,o);var w=Kl({},o);e.startPageNumber=m.pageNumber(),t.horizontalPageBreak?RM(m,e,w,o):(m.applyStyles(m.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(_){return ic(m,e,_,o,e.columns)}),m.applyStyles(m.userStyles),e.body.forEach(function(_,x){var A=x===e.body.length-1;lg(m,e,_,A,w,o,e.columns)}),m.applyStyles(m.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(_){return ic(m,e,_,o,e.columns)})),i4(m,e,w,o),e.callEndPageHooks(m,o),e.finalY=o.y,n.lastAutoTable=e,m.applyStyles(m.userStyles)}function RM(n,e,t,r){var i=CM(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(p,m){n.applyStyles(n.userStyles),m>0?Df(n,e,t,r,p.columns,!0):HS(n,e,r,p.columns),IM(n,e,t,r,p.columns),Gy(n,e,r,p.columns)});else for(var u=-1,d=i[0],h=function(){var p=u;if(d){n.applyStyles(n.userStyles);var m=d.columns;u>=0?Df(n,e,t,r,m,!0):HS(n,e,r,m),p=$S(n,e,u+1,r,m),Gy(n,e,r,m)}var w=p-u;i.slice(1).forEach(function(_){n.applyStyles(n.userStyles),Df(n,e,t,r,_.columns,!0),$S(n,e,u+1,r,_.columns,w),Gy(n,e,r,_.columns)}),u=p};u<e.body.length-1;)h()}function HS(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(o){return ic(n,e,o,t,r)})}function IM(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(o,u){var d=u===e.body.length-1;lg(n,e,o,d,t,r,i)})}function $S(n,e,t,r,i,o){n.applyStyles(n.userStyles),o=o??e.body.length;var u=Math.min(t+o,e.body.length),d=-1;return e.body.slice(t,u).forEach(function(h,p){var m=t+p===e.body.length-1,w=f4(n,e,m,r);h.canEntireRowFit(w,i)&&(ic(n,e,h,r,i),d=t+p)}),d}function Gy(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(o){return ic(n,e,o,t,r)})}function kM(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),o=Math.floor((e-i)/r);return Math.max(0,o)}function DM(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var o=0,u=0,d=t.columns;u<d.length;u++){var h=d[u],p=n.cells[h.index];if(p){Array.isArray(p.text)||(p.text=[p.text]);var m=new u2(p.raw,p.styles,p.section);m=Kl(m,p),m.text=[];var w=kM(p,e,r);p.text.length>w&&(m.text=p.text.splice(w,p.text.length));var _=r.scaleFactor(),x=r.getLineHeightFactor();p.contentHeight=p.getContentHeight(_,x),p.contentHeight>=e&&(p.contentHeight=e,m.styles.minCellHeight-=e),p.contentHeight>n.height&&(n.height=p.contentHeight),m.contentHeight=m.getContentHeight(_,x),m.contentHeight>o&&(o=m.contentHeight),i[h.index]=m}}var A=new c2(n.raw,-1,n.section,i,!0);A.height=o;for(var R=0,C=t.columns;R<C.length;R++){var h=C[R],m=A.cells[h.index];m&&(m.height=A.height);var p=n.cells[h.index];p&&(p.height=n.height)}return A}function PM(n,e,t,r){var i=n.pageSize().height,o=r.settings.margin,u=o.top+o.bottom,d=i-u;e.section==="body"&&(d-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var h=e.getMinimumRowHeight(r.columns,n),p=h<t;if(h>d)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!p)return!1;var m=e.hasRowSpan(r.columns),w=e.getMaxCellHeight(r.columns)>d;return w?(m&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(m||r.settings.rowPageBreak==="avoid")}function lg(n,e,t,r,i,o,u){var d=f4(n,e,r,o);if(t.canEntireRowFit(d,u))ic(n,e,t,o,u);else if(PM(n,t,d,e)){var h=DM(t,d,e,n);ic(n,e,t,o,u),Df(n,e,i,o,u),lg(n,e,h,r,i,o,u)}else Df(n,e,i,o,u),lg(n,e,t,r,i,o,u)}function ic(n,e,t,r,i){r.x=e.settings.margin.left;for(var o=0,u=i;o<u.length;o++){var d=u[o],h=t.cells[d.index];if(!h){r.x+=d.width;continue}n.applyStyles(h.styles),h.x=r.x,h.y=r.y;var p=e.callCellHooks(n,e.hooks.willDrawCell,h,t,d,r);if(p===!1){r.x+=d.width;continue}LM(n,h,r);var m=h.getTextPos();n4(h.text,m.x,m.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,h,t,d,r),r.x+=d.width}r.y+=t.height}function LM(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=a4(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),FM(n,e,t,r.lineWidth))}function FM(n,e,t,r){var i,o,u,d;r.top&&(i=t.x,o=t.y,u=t.x+e.width,d=t.y,r.right&&(u+=.5*r.right),r.left&&(i-=.5*r.left),h(r.top,i,o,u,d)),r.bottom&&(i=t.x,o=t.y+e.height,u=t.x+e.width,d=t.y+e.height,r.right&&(u+=.5*r.right),r.left&&(i-=.5*r.left),h(r.bottom,i,o,u,d)),r.left&&(i=t.x,o=t.y,u=t.x,d=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.left,i,o,u,d)),r.right&&(i=t.x+e.width,o=t.y,u=t.x+e.width,d=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(d+=.5*r.bottom),h(r.right,i,o,u,d));function h(p,m,w,_,x){n.getDocument().setLineWidth(p),n.getDocument().line(m,w,_,x,"S")}}function f4(n,e,t,r){var i=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function Df(n,e,t,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(d){return ic(n,e,d,r,i)}),e.callEndPageHooks(n,r);var u=e.settings.margin;i4(n,e,t,r),p4(n),e.pageNumber++,r.x=u.left,r.y=u.top,t.y=u.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return ic(n,e,d,r,i)}),n.applyStyles(n.userStyles))}function p4(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function m4(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=l2(this,r),o=d2(this,i);return h2(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){n4(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return ah.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){ah.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new ah(this),o=c4(i,e,window,t,!1),u=o.head,d=o.body,h=((r=u[0])===null||r===void 0?void 0:r.map(function(p){return p.content}))||[];return{columns:h,rows:d,data:d}}}var Wy;function GS(n,e){var t=l2(n,e),r=d2(n,t);h2(n,r)}function MM(n,e){var t=l2(n,e);return d2(n,t)}function OM(n,e){h2(n,e)}try{if(typeof window<"u"&&window){var WS=window,YS=WS.jsPDF||((Wy=WS.jspdf)===null||Wy===void 0?void 0:Wy.jsPDF);YS&&m4(YS)}}catch(n){console.error("Could not apply autoTable plugin",n)}const g4=Object.freeze(Object.defineProperty({__proto__:null,Cell:u2,CellHookData:u4,Column:h4,HookData:og,Row:c2,Table:d4,__createTable:MM,__drawTable:OM,applyPlugin:m4,autoTable:GS,default:GS},Symbol.toStringTag,{value:"Module"})),UM=()=>{const[n,e]=X.useState([]),[t,r]=X.useState([]),[i,o]=X.useState(!0),[u,d]=X.useState(!1),[h,p]=X.useState(null),[m,w]=X.useState(!1);X.useEffect(()=>{console.log("showExportDropdown changed:",m)},[m]);const[_,x]=X.useState({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),[A,R]=X.useState(""),[C,k]=X.useState("name"),[q,$]=X.useState("asc"),[z,oe]=X.useState([]),[ce,H]=X.useState(""),[D,I]=X.useState(""),[V,T]=X.useState(!1),[F,L]=X.useState(!1),[ee,ye]=X.useState(""),[le,ve]=X.useState(""),[me,Le]=X.useState(null),[xe,J]=X.useState(!1),[M,G]=X.useState(""),[B,ae]=X.useState(!1),ge=Vr();X.useEffect(()=>{_e();const ke=()=>{_e()};window.addEventListener("studentsUpdated",ke);const st=localStorage.getItem("studentDeletePin");return st&&ve(st),()=>{window.removeEventListener("studentsUpdated",ke)}},[]),X.useEffect(()=>{le&&localStorage.setItem("studentDeletePin",le)},[le]),X.useEffect(()=>{Ve()},[n,A,C,q,D]),X.useEffect(()=>{const ke=st=>{m&&!st.target.closest(".export-dropdown")&&w(!1)};return document.addEventListener("mousedown",ke),()=>{document.removeEventListener("mousedown",ke)}},[m]);const _e=async()=>{try{const ke=await Fn.getStudents();e(ke),o(!1)}catch(ke){console.error("Error fetching students:",ke),o(!1)}},Ve=()=>{let ke=[...n];A&&(ke=ke.filter(st=>st.name.toLowerCase().includes(A.toLowerCase())||st.class.toLowerCase().includes(A.toLowerCase())||st.studentId.toLowerCase().includes(A.toLowerCase())||st.contact&&st.contact.includes(A)||st.email&&st.email.toLowerCase().includes(A.toLowerCase()))),D&&(ke=ke.filter(st=>st.class.toLowerCase()===D.toLowerCase())),ke.sort((st,Xe)=>{let Qe,tt;switch(C){case"name":Qe=st.name.toLowerCase(),tt=Xe.name.toLowerCase();break;case"class":Qe=st.class.toLowerCase(),tt=Xe.class.toLowerCase();break;case"pending":Qe=(st.totalFees||0)-(st.feesPaid||0),tt=(Xe.totalFees||0)-(Xe.feesPaid||0);break;case"status":Qe=nt(st),tt=nt(Xe);break;default:Qe=st[C],tt=Xe[C]}return typeof Qe=="string"?q==="asc"?Qe.localeCompare(tt):tt.localeCompare(Qe):q==="asc"?Qe-tt:tt-Qe}),r(ke)},Me=ke=>{const{name:st,value:Xe}=ke.target;if(st==="totalFees"||st==="feesPaid"){if(Xe===""||Xe===null||Xe===void 0){x(tt=>({...tt,[st]:""}));return}const Qe=parseFloat(Xe);if(!isNaN(Qe))x(tt=>({...tt,[st]:Xe}));else return}else x(Qe=>({...Qe,[st]:Xe}))},Q=async ke=>{if(ke.preventDefault(),console.log("=== HANDLE SUBMIT START ==="),B){console.log("Form is already submitting, ignoring duplicate submission");return}ae(!0);try{if(console.log("Form data before processing:",_),console.log("Editing student:",h),console.log("Is editing student:",!!h),console.log("Editing student ID:",h?.id),console.log("Editing student studentId:",h?.studentId),!_.name||!_.class||_.totalFees===""||_.totalFees===void 0){const Oe="Please fill in all required fields: Name, Class, and Total Fees";console.log("Validation error:",Oe),alert(Oe),ae(!1);return}const st=parseFloat(_.totalFees),Xe=parseFloat(_.feesPaid)||0;if(console.log("Parsed values:",{totalFees:st,feesPaid:Xe}),isNaN(st)||st<0){const Oe="Please enter a valid total fees amount (must be a positive number)";console.log("Validation error:",Oe),alert(Oe),ae(!1);return}if(isNaN(Xe)||Xe<0){const Oe="Please enter a valid fees paid amount (must be a positive number or zero)";console.log("Validation error:",Oe),alert(Oe),ae(!1);return}if(Xe>st){const Oe="Fees paid cannot exceed total fees";console.log("Validation error:",Oe),alert(Oe),ae(!1);return}const Qe={..._,totalFees:st,feesPaid:Xe,feesDue:st-Xe};console.log("Student data to save:",Qe),h?(console.log("Updating existing student"),await Fn.updateStudent(h.id,Qe)):(console.log("Adding new student"),await Fn.addStudent(Qe)),d(!1),p(null),x({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),await _e();const tt=h?"Student updated successfully!":"Student added successfully!";window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:tt}})),console.log("=== HANDLE SUBMIT END SUCCESS ===")}catch(st){console.error("Error saving student:",st),alert("Error saving student. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error saving student. Please try again."}})),console.log("=== HANDLE SUBMIT END ERROR ===")}finally{ae(!1)}},Te=()=>{p(null),x({name:"",class:"",contact:"",email:"",address:"",fatherName:"",motherName:"",totalFees:"",feesPaid:""}),d(!0)},ue=ke=>{console.log("Editing student:",ke),p(ke),x({name:ke.name||"",class:ke.class||"",contact:ke.contact||"",email:ke.email||"",address:ke.address||"",fatherName:ke.fatherName||"",motherName:ke.motherName||"",totalFees:ke.totalFees!==void 0?ke.totalFees.toString():"",feesPaid:ke.feesPaid!==void 0?ke.feesPaid.toString():""}),d(!0)},be=async ke=>{if(window.confirm("Are you sure you want to delete this student? This action cannot be undone.")){if(!le){Le(ke),L(!0);return}if(prompt("Enter PIN to delete student:")!==le){alert("Incorrect PIN. Delete operation cancelled.");return}await Ie(ke)}},Ie=async ke=>{try{await Fn.deleteStudent(ke),await _e(),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Student deleted successfully!"}}))}catch(st){console.error("Error deleting student:",st),alert("Error deleting student. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error deleting student. Please try again."}}))}},Y=ke=>{oe(st=>st.includes(ke)?st.filter(Xe=>Xe!==ke):[...st,ke])},pe=()=>{z.length===t.length?oe([]):oe(t.map(ke=>ke.id))},Ne=ke=>{C===ke?$(q==="asc"?"desc":"asc"):(k(ke),$("asc"))},je=async()=>{if(ce)if(ce==="delete"){if(window.confirm(`Are you sure you want to delete ${z.length} selected student(s)? This action cannot be undone.`)){if(!le){J(!0),L(!0);return}if(prompt("Enter PIN to delete students:")!==le){alert("Incorrect PIN. Delete operation cancelled.");return}await we()}}else ce==="export"?Ce():ce==="export-pdf"&&Je()},we=async()=>{try{for(const ke of z)await Fn.deleteStudent(ke);oe([]),H(""),await _e(),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:`${z.length} student(s) deleted successfully!`}}))}catch(ke){console.error("Error deleting students:",ke),alert("Error deleting students. Please try again."),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error deleting students. Please try again."}}))}},Ce=()=>{let ke=[];z&&z.length>0?ke=n.filter(Oe=>z.includes(Oe.id)):ke=t;const st=[["Name","Class","Contact","Address","Father Name","Mother Name","Total Fees","Fees Paid","Fees Due"],...ke.map(Oe=>[Oe.name,Oe.class,Oe.contact||"",Oe.address||"",Oe.fatherName||"",Oe.motherName||"",Oe.totalFees?`INR ${Number(Oe.totalFees).toLocaleString()}`:"INR 0",Oe.feesPaid?`INR ${Number(Oe.feesPaid).toLocaleString()}`:"INR 0",Oe.totalFees&&Oe.feesPaid?`INR ${Number(Oe.totalFees-Oe.feesPaid).toLocaleString()}`:"INR 0"])].map(Oe=>Oe.join(",")).join(`
`),Xe=new Blob([st],{type:"text/csv;charset=utf-8;"}),Qe=URL.createObjectURL(Xe),tt=document.createElement("a");tt.setAttribute("href",Qe),tt.setAttribute("download","students_export.csv"),tt.style.visibility="hidden",document.body.appendChild(tt),tt.click(),document.body.removeChild(tt)},Je=()=>{try{console.log("Starting PDF export function");const ke=new Mt;ke.setFontSize(18),ke.text("Students Report",20,20);const st=new Date().toLocaleDateString();ke.setFontSize(12),ke.text(`Generated on: ${st}`,20,30);let Xe=[];if(z&&z.length>0?Xe=n.filter(Qe=>z.includes(Qe.id)):Xe=t,Xe&&Xe.length>0){const Qe=[["Name","Class","Contact","Total Fees","Fees Paid","Fees Due"]],tt=Xe.map(Oe=>[Oe.name||"N/A",Oe.class||"N/A",Oe.contact||"N/A",Oe.totalFees?`INR ${Number(Oe.totalFees).toLocaleString()}`:"INR 0",Oe.feesPaid?`INR ${Number(Oe.feesPaid).toLocaleString()}`:"INR 0",Oe.totalFees&&Oe.feesPaid?`INR ${Number(Oe.totalFees-Oe.feesPaid).toLocaleString()}`:"INR 0"]);if(ke.autoTable)ke.autoTable({head:Qe,body:tt,startY:40,styles:{fontSize:9,cellPadding:3},headStyles:{fillColor:[52,152,219],fontSize:10},alternateRowStyles:{fillColor:[240,240,240]},margin:{left:5,right:5},didParseCell:function(Oe){if(Oe.section==="body"&&Oe.column.index>=3&&Oe.column.index<=5){const De=Oe.cell.raw;typeof De=="string"&&De.startsWith("INR ")&&(Oe.cell.text=[De])}},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:"auto"},2:{cellWidth:"auto"},3:{cellWidth:"auto"},4:{cellWidth:"auto"},5:{cellWidth:"auto"}}});else{let Oe=40;Qe[0].forEach((De,Be)=>{ke.text(De,15+Be*30,Oe)}),Oe+=10,tt.forEach(De=>{De.forEach((Be,it)=>{ke.text(String(Be),15+it*30,Oe)}),Oe+=10,Oe>280&&(ke.addPage(),Oe=20)})}}else ke.text("No student data available.",20,40);ke.save("students_export.pdf")}catch(ke){console.error("Error generating PDF:",ke),alert("Failed to generate PDF. Please check console for details.")}},ut=ke=>{ge("/student-details",{state:{student:ke}})},nt=ke=>{const st=parseFloat(ke.totalFees)||0,Xe=parseFloat(ke.feesPaid)||0,Qe=st-Xe;return Xe===0?"Not Started":Qe<=0?"Paid":"Pending"};return i?l.jsx(eo,{children:l.jsxs("div",{className:"students-container",children:[l.jsx("div",{className:"students-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("div",{className:"skeleton-header",style:{width:"200px",height:"40px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"300px",height:"24px",marginTop:"10px"}})]}),l.jsx("div",{className:"header-right",children:l.jsxs("div",{className:"header-actions",children:[l.jsx("div",{className:"skeleton-bar",style:{width:"120px",height:"40px",marginRight:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"120px",height:"40px"}})]})})]})}),l.jsxs("div",{className:"search-filters",children:[l.jsx("div",{className:"search-container",children:l.jsx("div",{className:"skeleton-header",style:{width:"100%",height:"44px",borderRadius:"12px"}})}),l.jsx("div",{className:"filter-container",children:l.jsx("div",{className:"skeleton-bar",style:{width:"100px",height:"40px",borderRadius:"8px"}})})]}),l.jsx("div",{className:"kpi-skeleton-grid",children:[1,2,3,4].map(ke=>l.jsx("div",{className:"skeleton-card"},ke))}),l.jsxs("div",{className:"table-skeleton",children:[l.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(ke=>l.jsx("div",{className:"skeleton-row"},ke))]})]})}):l.jsx(eo,{children:l.jsxs("div",{className:"students-container",children:[l.jsxs("div",{className:"students-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("h1",{children:"Students Management"})}),l.jsx("div",{className:"header-right",children:l.jsxs("div",{className:"header-actions",children:[l.jsx("button",{className:"add-btn",onClick:Te,children:"+ Add Student"}),l.jsxs("div",{className:"export-dropdown",children:[l.jsx("button",{className:"export-btn",onClick:()=>{console.log("Export button clicked, current state:",m),w(!m)},children:" Export "}),m&&l.jsxs("div",{className:"export-dropdown-menu",children:[l.jsx("button",{className:"export-option",onClick:()=>{Ce(),w(!1)},children:"Export as CSV"}),l.jsx("button",{className:"export-option",onClick:()=>{console.log("PDF export button clicked"),Je(),w(!1)},children:"Export as PDF"})]})]})]})})]}),l.jsxs("div",{className:"search-filters",children:[l.jsxs("div",{className:"search-container",children:[l.jsx("input",{type:"text",placeholder:"Search students by name, class, ID, contact or email...",className:"search-input",value:A,onChange:ke=>R(ke.target.value)}),l.jsx("span",{className:"search-icon",children:""})]}),l.jsx("div",{className:"filter-container",children:l.jsxs("button",{className:`filter-btn ${D?"active":""}`,onClick:()=>{G(D),T(!0)},children:["Filter ",D&&`(${D})`,D&&l.jsx("span",{className:"clear-filter",onClick:ke=>{ke.stopPropagation(),I("")},children:""})]})}),t.length>0&&l.jsx("div",{className:"bulk-actions-container",children:l.jsxs("div",{className:"bulk-actions",children:[l.jsx("input",{type:"checkbox",checked:z.length===t.length&&t.length>0,onChange:pe,className:"select-all-checkbox"}),l.jsx("span",{className:"bulk-label",children:z.length>0?`${z.length} selected`:"Select all"}),z.length>0&&l.jsxs("div",{className:"bulk-action-controls",children:[l.jsxs("select",{value:ce,onChange:ke=>H(ke.target.value),className:"bulk-action-select",children:[l.jsx("option",{value:"",children:"Choose action..."}),l.jsx("option",{value:"delete",children:"Delete Selected"}),l.jsx("option",{value:"export",children:"Export Selected (CSV)"}),l.jsx("option",{value:"export-pdf",children:"Export Selected (PDF)"})]}),l.jsx("button",{onClick:je,disabled:!ce,className:"bulk-action-btn",children:"Apply"})]})]})})]}),u&&l.jsx("div",{className:"form-overlay",children:l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:h?"Edit Student":"Add New Student"}),l.jsx("button",{className:"close-btn",onClick:()=>d(!1),children:""})]}),l.jsxs("form",{onSubmit:Q,children:[l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Name *"}),l.jsx("input",{type:"text",name:"name",value:_.name,onChange:Me,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Class *"}),l.jsxs("select",{name:"class",value:_.class,onChange:Me,required:!0,children:[l.jsx("option",{value:"",children:"Select Class"}),l.jsx("option",{value:"Nursery",children:"Nursery"}),l.jsx("option",{value:"LKG",children:"LKG"}),l.jsx("option",{value:"UKG",children:"UKG"}),l.jsx("option",{value:"1st",children:"1st"}),l.jsx("option",{value:"2nd",children:"2nd"}),l.jsx("option",{value:"3rd",children:"3rd"}),l.jsx("option",{value:"4th",children:"4th"}),l.jsx("option",{value:"5th",children:"5th"}),l.jsx("option",{value:"6th",children:"6th"}),l.jsx("option",{value:"7th",children:"7th"}),l.jsx("option",{value:"8th",children:"8th"}),l.jsx("option",{value:"9th",children:"9th"}),l.jsx("option",{value:"10th",children:"10th"}),l.jsx("option",{value:"11th",children:"11th"}),l.jsx("option",{value:"12th",children:"12th"})]})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Contact"}),l.jsx("input",{type:"text",name:"contact",value:_.contact,onChange:Me,placeholder:"Phone number"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Email"}),l.jsx("input",{type:"email",name:"email",value:_.email,onChange:Me,placeholder:"Email address"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Address"}),l.jsx("textarea",{name:"address",value:_.address,onChange:Me,placeholder:"Full address",className:"address-input",rows:"3"})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Father's Name"}),l.jsx("input",{type:"text",name:"fatherName",value:_.fatherName,onChange:Me})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Mother's Name"}),l.jsx("input",{type:"text",name:"motherName",value:_.motherName,onChange:Me})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Total Fees () *"}),l.jsx("input",{type:"number",name:"totalFees",value:_.totalFees,onChange:Me,required:!0,min:"0",step:"0.01"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Fees Paid () *"}),l.jsx("input",{type:"number",name:"feesPaid",value:_.feesPaid,onChange:Me,required:!0,min:"0",step:"0.01"})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:()=>d(!1),disabled:B,children:"Cancel"}),l.jsx("button",{type:"submit",className:"save-btn",disabled:B,children:B?"Saving...":h?"Update Student":"Add Student"})]})]})]})}),V&&l.jsx("div",{className:"form-overlay",children:l.jsxs("div",{className:"form-container filter-modal",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:"Filter by Class"}),l.jsx("button",{className:"close-btn",onClick:()=>T(!1),children:""})]}),l.jsxs("div",{className:"filter-content",children:[l.jsx("div",{className:"filter-options",children:["Nursery","LKG","UKG","1st","2nd","3rd","4th","5th","6th","7th","8th","9th","10th","11th","12th"].map(ke=>l.jsx("div",{className:`filter-option ${M===ke?"active":""}`,onClick:()=>G(M===ke?"":ke),children:ke},ke))}),l.jsxs("div",{className:"filter-actions",children:[l.jsx("button",{className:"clear-btn",onClick:()=>{G(""),I(""),T(!1)},children:"Clear"}),l.jsx("button",{className:"save-btn",onClick:()=>{I(M),T(!1)},children:"Apply Filter"})]})]})]})}),l.jsx("div",{className:"students-table-container",children:l.jsxs("table",{className:"students-table",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"students-table-grid",children:[l.jsx("th",{className:"checkbox-header",children:l.jsx("input",{type:"checkbox",checked:z.length===t.length&&t.length>0,onChange:pe})}),l.jsxs("th",{onClick:()=>Ne("name"),children:["Name ",C==="name"&&(q==="asc"?"":"")]}),l.jsxs("th",{onClick:()=>Ne("class"),children:["Class ",C==="class"&&(q==="asc"?"":"")]}),l.jsx("th",{children:"Total Fees"}),l.jsx("th",{children:"Paid Fees"}),l.jsx("th",{children:"Pending Fees"}),l.jsxs("th",{onClick:()=>Ne("status"),children:["Status ",C==="status"&&(q==="asc"?"":"")]}),l.jsx("th",{children:"Actions"})]})}),l.jsx("tbody",{children:t.length===0?l.jsx("tr",{className:"students-table-grid",children:l.jsx("td",{colSpan:"9",className:"no-data-container",children:l.jsx("div",{className:"no-data",children:"No students found. Add a new student to get started."})})}):t.map(ke=>{const st={...ke,status:nt(ke)},Xe=(ke.totalFees||0)-(ke.feesPaid||0);return l.jsxs("tr",{className:"student-row students-table-grid",children:[l.jsx("td",{children:l.jsx("input",{type:"checkbox",checked:z.includes(ke.id),onChange:()=>Y(ke.id),className:"student-checkbox"})}),l.jsx("td",{children:l.jsxs("div",{className:"student-info",children:[l.jsx("div",{className:"student-name",children:ke.name}),l.jsx("div",{className:"student-id",children:ke.studentId}),ke.email&&l.jsx("div",{className:"student-email",children:ke.email})]})}),l.jsx("td",{children:ke.class}),l.jsxs("td",{children:["",parseFloat(ke.totalFees||0).toLocaleString()]}),l.jsxs("td",{children:["",parseFloat(ke.feesPaid||0).toLocaleString()]}),l.jsxs("td",{children:["",Xe.toLocaleString()]}),l.jsx("td",{children:l.jsx("span",{className:`status-badge status-${st.status.toLowerCase().replace(" ","-")}`,children:st.status==="Pending"?" Pending":st.status==="Paid"?" Paid":" Not Started"})}),l.jsx("td",{children:l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{className:"view-btn",onClick:()=>ut(ke),title:"View student",children:""}),l.jsx("button",{className:"edit-btn",onClick:()=>ue(ke),title:"Edit student",children:""}),l.jsx("button",{className:"delete-btn",onClick:()=>be(ke.id),title:"Delete student",children:""})]})})]},ke.id)})})]})}),F&&l.jsx("div",{className:"pin-dialog-overlay",children:l.jsxs("div",{className:"pin-dialog",children:[l.jsx("h3",{children:"Set PIN for Student Deletion Protection"}),l.jsx("p",{children:"Enter a 4-digit PIN to protect student deletion:"}),l.jsx("input",{type:"password",maxLength:"4",value:ee,onChange:ke=>ye(ke.target.value.replace(/\D/g,"")),placeholder:"Enter 4-digit PIN",className:"pin-input"}),l.jsxs("div",{className:"pin-dialog-buttons",children:[l.jsx("button",{className:"cancel-button",onClick:()=>{L(!1),ye(""),Le(null),J(!1)},children:"Cancel"}),l.jsx("button",{className:"save-button",onClick:()=>{ee.length===4?(ve(ee),L(!1),me?(Ie(me),Le(null)):xe&&(we(),J(!1))):alert("PIN must be 4 digits")},children:"Set PIN & Proceed"})]})]})})]})})},BM=()=>{const n=Vr(),e=no(),[t,r]=X.useState(null),[i,o]=X.useState(!0),[u,d]=X.useState(null),[h,p]=X.useState([]),[m,w]=X.useState(!0),[_,x]=X.useState(null),[A,R]=X.useState(null),[C,k]=X.useState(!1),[q,$]=X.useState(!1),[z,oe]=X.useState("Victory Point Academy");X.useEffect(()=>{(async()=>{if(fn())try{const J=dn(),M=Yn(Mn,`users/${J}/settings/profile`),G=await pu(M);if(G.exists()){const B=G.data();B.firmName&&oe(B.firmName)}}catch(J){console.error("Error fetching firm name:",J)}})()},[]),X.useEffect(()=>{(async()=>{try{console.log("Testing Firebase Storage connection on component mount...");const J=await KL();console.log("Firebase Storage connection test result:",J)}catch(J){console.error("Error during storage connection test:",J)}})()},[]);const ce=xe=>{try{return xe&&typeof xe=="object"&&xe.seconds!==void 0?new Date(xe.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):xe instanceof Date?xe.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):typeof xe=="string"?new Date(xe).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):typeof xe=="number"?xe>1e10?new Date(xe).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):new Date(xe*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}catch(J){return console.error("Error formatting date:",J),"N/A"}},H=xe=>`${parseFloat(xe||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,D=async xe=>{try{w(!0);const G=(await Fn.getPayments()).filter(B=>B.studentId===xe).sort((B,ae)=>{const ge=B.createdAt instanceof Date?B.createdAt:new Date(B.createdAt?.seconds*1e3||B.createdAt);return(ae.createdAt instanceof Date?ae.createdAt:new Date(ae.createdAt?.seconds*1e3||ae.createdAt))-ge});p(G)}catch(J){console.error("Error fetching student payments:",J)}finally{w(!1)}};X.useEffect(()=>{(async()=>{try{o(!0);const J=e.state?.student;if(J)r(J),J.photoURL&&R(J.photoURL),D(J.studentId||J.id);else{const G=new URLSearchParams(window.location.search).get("id");if(G){const B=await Fn.getStudentById(G);B?(r(B),B.photoURL&&R(B.photoURL),D(G)):d("Student not found")}else d("No student data provided")}}catch(J){console.error("Error fetching student details:",J),d("Error loading student details")}finally{o(!1)}})()},[e.state]),X.useEffect(()=>{const xe=async()=>{try{const M=t?.studentId||t?.id;if(M){const G=await Fn.getStudentById(M);G&&(r(G),G.photoURL&&R(G.photoURL),D(M))}}catch(M){console.error("Error refreshing student details:",M)}},J=M=>{if(M.detail&&M.detail.student){const G=M.detail.student,B=t?.studentId||t?.id,ae=G.studentId||G.id;B===ae&&(r(G),G.photoURL&&R(G.photoURL),D(ae))}};return window.addEventListener("studentsUpdated",xe),window.addEventListener("studentUpdated",J),()=>{window.removeEventListener("studentsUpdated",xe),window.removeEventListener("studentUpdated",J)}},[t]);const I=xe=>{const J=parseFloat(xe.totalFees)||0,M=parseFloat(xe.feesPaid)||0;return M>=J?"Paid":M>0?"Pending":"Not Started"},V=()=>{n("/students")},T=()=>{n("/students",{state:{editingStudent:t}})},F=async()=>{if(window.innerWidth<=768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){await L(t,z);return}const J=document.querySelector(".student-profile-card");if(!J){console.error("Print content not found");return}let M;try{M=window.open("","_blank");const G=`
        <style>
          @media print {
            @page { 
              size: A4; 
              margin: 1cm; 
            }
            body { 
              margin: 0; 
              padding: 0; 
              font-family: 'Times New Roman', serif; 
              color: black; 
            }
            .student-profile-card { 
              max-width: 90%; 
              margin: 0 auto; 
              padding: 15px; 
              box-shadow: none; 
              background: white; 
              font-size: 11px; /* Professional font size */
            }
            .photo-upload-section { 
              display: none; 
            }
            .upload-photo-btn { 
              display: none; 
            }
            .upload-success-message { 
              display: none; 
            }
            .watermark-container {
              position: fixed;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%) rotate(-45deg);
              pointer-events: none;
              z-index: 1000;
              opacity: 0.05;
              font-size: 5em;
              color: #cccccc;
              font-weight: bold;
              text-align: center;
            }
            .student-photo-preview {
              width: 120px;
              height: 120px;
              object-fit: cover;
              border-radius: 8px;
              margin-bottom: 10px;
              display: block;
              border: 1px solid #ddd;
            }
            .photo-preview img {
              width: 120px;
              height: 120px;
              object-fit: cover;
              border-radius: 8px;
            }
            .student-header {
              display: flex;
              align-items: flex-start;
              gap: 20px;
              margin-bottom: 20px;
              padding-bottom: 15px;
              border-bottom: 2px solid #4e73df; /* Professional border */
            }
            .student-basic-info {
              flex: 1;
            }
            .student-basic-info h2 {
              margin: 0 0 8px 0;
              font-size: 18px;
              color: #2c3e50;
              font-weight: bold;
              text-transform: uppercase;
            }
            .student-id, .student-class {
              font-size: 12px;
              margin: 4px 0;
              font-weight: bold;
            }
            .summary-cards {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 10px;
              margin-bottom: 20px;
            }
            .summary-card {
              padding: 12px;
              border: 1px solid #ddd;
              border-radius: 6px;
              margin-bottom: 0;
              background: #f8f9fa;
            }
            .summary-card-title {
              font-size: 10px;
              margin-bottom: 5px;
              color: #495057;
              font-weight: bold;
            }
            .summary-card-value {
              font-size: 14px;
              font-weight: bold;
              color: #2c3e50;
            }
            .payment-progress-section {
              margin-bottom: 20px;
              padding: 15px;
              border: 1px solid #ddd;
              border-radius: 6px;
              background: #f8f9fa;
            }
            .payment-progress-section h3 {
              font-size: 14px;
              margin: 0 0 12px 0;
              color: #2c3e50;
              font-weight: bold;
            }
            .progress-container {
              display: flex;
              flex-direction: column;
              gap: 6px;
            }
            .progress-bar {
              height: 12px;
              background-color: #e9ecef;
              border-radius: 6px;
              overflow: hidden;
            }
            .progress-fill {
              height: 100%;
              background: linear-gradient(90deg, #4e73df, #224abe);
              border-radius: 6px;
            }
            .progress-text {
              font-size: 11px;
              font-weight: bold;
              color: #495057;
            }
            .personal-info-section, .system-info-section {
              margin-bottom: 20px;
              border: 1px solid #ddd;
              border-radius: 6px;
              page-break-inside: avoid;
            }
            .personal-info-section h3, .system-info-section h3 {
              padding: 12px 15px;
              margin: 0;
              font-size: 14px;
              background: #4e73df;
              color: white;
            }
            .personal-info-content, .system-info-content {
              padding: 15px;
            }
            .info-category {
              margin-bottom: 15px;
            }
            .info-category h4 {
              font-size: 12px;
              margin: 0 0 10px 0;
              color: #2c3e50;
              font-weight: bold;
              border-bottom: 1px solid #dee2e6;
              padding-bottom: 5px;
            }
            .student-details-grid, .contact-info-grid, .family-info-grid, .system-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 15px;
              margin-bottom: 10px;
            }
            .student-detail-item, .contact-detail-item, .family-detail-item, .system-item {
              margin-bottom: 10px;
              page-break-inside: avoid;
            }
            .student-detail-item label, .contact-detail-item label, .family-detail-item label, .system-item label {
              display: block;
              font-weight: bold;
              margin-bottom: 3px;
              font-size: 10px;
              color: #495057;
            }
            .student-detail-item span, .contact-detail-item span, .family-detail-item span, .system-item span {
              display: block;
              padding: 6px;
              background: #ffffff;
              border-radius: 4px;
              font-size: 11px;
              border: 1px solid #dee2e6;
              min-height: 20px;
            }
            .payments-table {
              overflow-x: auto;
              margin-top: 10px;
            }
            .payments-table table {
              width: 100%;
              border-collapse: collapse;
            }
            .payments-table th,
            .payments-table td {
              padding: 8px;
              text-align: left;
              border: 1px solid #dee2e6;
              font-size: 10px;
            }
            .payments-table th {
              background-color: #e9ecef;
              font-weight: bold;
              color: #495057;
            }
            .payments-table tr:nth-child(even) {
              background-color: #f8f9fa;
            }
            .status-badge {
              padding: 4px 8px;
              border-radius: 4px;
              font-size: 9px;
              font-weight: bold;
            }
            .status-paid {
              background: #d4edda;
              color: #155724;
            }
            .status-pending {
              background: #fff3cd;
              color: #856404;
            }
            .status-overdue {
              background: #f8d7da;
              color: #721c24;
            }
            .status-not-started {
              background: #d1ecf1;
              color: #0c5460;
            }
            .print-only {
              display: block !important;
            }
            /* Ensure single page layout */
            .student-profile-card {
              display: block;
              width: 100%;
              overflow: hidden;
            }
            .details-section {
              page-break-inside: avoid;
              margin-bottom: 20px;
            }
          }
          @media screen {
            .print-only {
              display: none;
            }
          }
        </style>
      `,B=`
        <div class="watermark-container">
          ${z}
        </div>
      `,ae=J.innerHTML;M.document.write(`
        <html>
          <head>
            <title>Student Profile - ${t.name}</title>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            ${G}
          </head>
          <body>
            ${B}
            <div class="student-profile-card">
              ${ae}
            </div>
            <script>
              // Add delay to ensure content renders before printing
              setTimeout(() => {
                window.print();
                // Close after printing on desktop
                window.close();
              }, 500);
            <\/script>
          </body>
        </html>
      `),M.document.close()}catch(G){console.error("Error creating print window:",G)}},L=async(xe,J)=>{try{if(!xe){console.error("No student data provided for PDF generation"),alert("No student data available to generate PDF");return}const M=await $u(()=>Promise.resolve().then(()=>t4),void 0,import.meta.url),G=await $u(()=>Promise.resolve().then(()=>g4),void 0,import.meta.url),B=new M.jsPDF;let ae={firmName:"",logoUrl:"",signatureUrl:"",stampUrl:""};try{const ut=await oA();ae={firmName:ut.firmName||"",logoUrl:ut.logoUrl||"",signatureUrl:ut.signatureUrl||"",stampUrl:ut.stampUrl||""}}catch(ut){console.warn("Could not load branding data:",ut)}const ge=parseFloat(xe.totalFees)||0,_e=parseFloat(xe.feesPaid)||0,Ve=ge-_e,Me=ge>0?Math.round(_e/ge*100):0;let Q=20;if(ae?.logoUrl)try{const nt=await(await fetch(ae.logoUrl)).blob(),ke=await new Promise((Oe,De)=>{const Be=new FileReader;Be.onload=()=>{Oe(Be.result)},Be.onerror=()=>{De(new Error("Failed to read logo file"))},Be.readAsDataURL(nt)});B.addImage(ke,"JPEG",20,Q,30,30);const st=60;B.setFontSize(14),B.setFont(void 0,"bold"),B.text(ae.firmName||J,st,Q+12),B.setFontSize(10),B.setFont(void 0,"normal");const Xe=150,Qe=ae.firmAddress||"Academy Address";if(B.getTextWidth(Qe)>Xe){const Oe=Qe.toString().split(" ");let De="",Be=Q+20;Oe.forEach((it,gt)=>{const et=De+it+" ";B.getTextWidth(et)>Xe&&gt!==0?(B.text(De,st,Be),De=it+" ",Be+=6):De=et}),B.text(De.trim(),st,Be),Q=Be+15}else B.text(Qe,st,Q+20),Q=Q+25}catch(ut){console.error("Error loading logo for PDF:",ut),B.setFontSize(14),B.setFont(void 0,"bold"),B.text(ae.firmName||J,20,Q+12),B.setFontSize(10),B.setFont(void 0,"normal");const nt=150,ke=ae.firmAddress||"Academy Address",st=B.getTextWidth(ke);if(st>nt){const Xe=ke.toString().split(" ");let Qe="",tt=Q+20;Xe.forEach((Oe,De)=>{const Be=Qe+Oe+" ",it=B.getTextWidth(Be);st>nt&&De!==0?(B.text(Qe,20,tt),Qe=Oe+" ",tt+=6):Qe=Be}),B.text(Qe.trim(),20,tt),Q=tt+15}else B.text(ke,20,Q+20),Q=Q+25}else{B.setFontSize(14),B.setFont(void 0,"bold"),B.text(ae.firmName||J,20,Q+12),B.setFontSize(10),B.setFont(void 0,"normal");const ut=150,nt=ae.firmAddress||"Academy Address",ke=B.getTextWidth(nt);if(ke>ut){const st=nt.toString().split(" ");let Xe="",Qe=Q+20;st.forEach((tt,Oe)=>{const De=Xe+tt+" ",Be=B.getTextWidth(De);ke>ut&&Oe!==0?(B.text(Xe,20,Qe),Xe=tt+" ",Qe+=6):Xe=De}),B.text(Xe.trim(),20,Qe),Q=Qe+15}else B.text(nt,20,Q+20),Q=Q+25}B.setFontSize(18),B.setTextColor(220,53,69),B.text("Student Profile",105,Q,{align:"center"}),B.setFontSize(12),B.setFont(void 0,"normal"),B.setTextColor(0,0,0),Q+=10,B.text(`Student Name: ${xe.name||"N/A"}`,20,Q+10),B.text(`Student ID: ${xe.studentId||xe.id||"N/A"}`,20,Q+17),B.text(`Class: ${xe.class||"N/A"}`,20,Q+24),B.text(`Contact: ${xe.contact||"N/A"}`,20,Q+31);const Te=Q+40;B.setFontSize(14),B.setFont(void 0,"bold"),B.text("Summary",20,Te),B.setFontSize(12),B.setFont(void 0,"normal"),B.text(`Total Fees: ${ge.toLocaleString("en-IN")}`,20,Te+8),B.text(`Fees Paid: ${_e.toLocaleString("en-IN")}`,20,Te+15),B.text(`Pending Fees: ${Ve.toLocaleString("en-IN")}`,20,Te+22),B.text(`Payment Progress: ${Me}%`,20,Te+29);const ue=Te+40;B.setFontSize(14),B.setFont(void 0,"bold"),B.text("Personal Information",20,ue);let Ie=ue+8;const Y=[["Full Name:",xe.name||"N/A"],["Student ID:",xe.studentId||xe.id||"N/A"],["Class:",xe.class||"N/A"],["Contact Number:",xe.contact||"N/A"],["Email:",xe.email||"N/A"],["Father's Name:",xe.fatherName||"N/A"],["Mother's Name:",xe.motherName||"N/A"],["Address:",xe.address||"N/A"]];B.setFontSize(10),B.setFont(void 0,"normal"),Y.forEach(([ut,nt])=>{B.setFont(void 0,"bold"),B.text(ut,20,Ie),B.setFont(void 0,"normal");const ke=150;if(B.getTextWidth(nt)>ke){const Xe=nt.toString().split(" ");let Qe="",tt=Ie;Xe.forEach((Oe,De)=>{const Be=Qe+Oe+" ";B.getTextWidth(Be)>ke&&De!==0?(B.text(Qe,60,tt),Qe=Oe+" ",tt+=6):Qe=Be}),B.text(Qe.trim(),60,tt),Ie=tt+8}else B.text(nt,60,Ie),Ie+=8});const pe=B.lastAutoTable.finalY+10;B.setFontSize(14),B.setFont(void 0,"bold"),B.text("System Information",20,pe);const Ne=Ie+10;B.setFontSize(14),B.setFont(void 0,"bold"),B.text("System Information",20,Ne);let je=Ne+8;const we=[["Created At:",ce(xe.createdAt)||"N/A"],["Last Updated:",ce(xe.updatedAt)||"N/A"],["Database ID:",xe.id||"N/A"]];if(B.setFontSize(10),B.setFont(void 0,"normal"),we.forEach(([ut,nt])=>{B.setFont(void 0,"bold"),B.text(ut,20,je),B.setFont(void 0,"normal");const ke=150;if(B.getTextWidth(nt)>ke){const Xe=nt.toString().split(" ");let Qe="",tt=je;Xe.forEach((Oe,De)=>{const Be=Qe+Oe+" ";B.getTextWidth(Be)>ke&&De!==0?(B.text(Qe,60,tt),Qe=Oe+" ",tt+=6):Qe=Be}),B.text(Qe.trim(),60,tt),je=tt+8}else B.text(nt,60,je),je+=8}),h&&h.length>0){const ut=je+10;B.setFontSize(14),B.setFont(void 0,"bold"),B.text("Payment History",20,ut);let nt=ut+8;B.setFont(void 0,"bold"),B.text("Date",20,nt),B.text("Description",50,nt),B.text("Amount",110,nt),B.text("Status",150,nt),nt+=3,B.line(20,nt,190,nt),nt+=5,B.setFont(void 0,"normal"),h.forEach(ke=>{const st=ce(ke.createdAt),Xe=ke.description||"Payment",Qe=`${H(ke.amount).replace("","")}`,tt=ke.status||"N/A";B.text(st,20,nt);const Oe=50;if(B.getTextWidth(Xe)>Oe){const Be=Xe.toString().split(" ");let it="",gt=nt;Be.forEach((et,bt)=>{const St=it+et+" ";B.getTextWidth(St)>Oe&&bt!==0?(B.text(it,50,gt),it=et+" ",gt+=6):it=St}),B.text(it.trim(),50,gt),B.text(Qe,110,gt),B.text(tt,150,gt),nt=gt+8}else B.text(Xe,50,nt),B.text(Qe,110,nt),B.text(tt,150,nt),nt+=8})}const Je=(paymentY||je+20)+20;if(ae?.signatureUrl)try{const nt=await(await fetch(ae.signatureUrl)).blob(),ke=await new Promise((st,Xe)=>{const Qe=new FileReader;Qe.onload=()=>{st(Qe.result)},Qe.onerror=()=>{Xe(new Error("Failed to read signature file"))},Qe.readAsDataURL(nt)});B.addImage(ke,"PNG",150,Je,40,20)}catch(ut){console.error("Could not load signature for PDF in StudentDetails:",ut),B.text("Authorized Signatory",170,Je+15,{align:"right"})}else B.text("Authorized Signatory",170,Je,{align:"right"});if(ae?.stampUrl)try{const nt=await(await fetch(ae.stampUrl)).blob(),ke=await new Promise((st,Xe)=>{const Qe=new FileReader;Qe.onload=()=>{st(Qe.result)},Qe.onerror=()=>{Xe(new Error("Failed to read stamp file"))},Qe.readAsDataURL(nt)});B.addImage(ke,"PNG",15,Je,30,30)}catch(ut){console.error("Could not load stamp for PDF in StudentDetails:",ut)}try{B.setFontSize(40),B.setTextColor(200,200,200),B.GState&&B.setGState(new B.GState({opacity:.05})),B.text(J,105,140,{align:"center",angle:45}),B.GState&&B.setGState(new B.GState({opacity:1}))}catch(ut){console.warn("Could not add watermark to PDF:",ut)}B.save(`student-profile-${xe.name||"student"}-${xe.studentId||xe.id||"unknown"}.pdf`)}catch(M){console.error("Error generating PDF:",M),alert("Error generating PDF. Please try again.")}},ee=async xe=>{const J=xe.target.files[0];if(console.log("File selected:",J),J){if($(!1),!J.type.startsWith("image/")){console.log("File type not supported:",J.type),alert("Please select an image file (JPEG, PNG, etc.)");return}if(J.size>5*1024*1024){console.log("File too large:",J.size),alert("File size exceeds 5MB limit");return}console.log("File validation passed");const M=new FileReader;M.onload=G=>{console.log("File read complete"),R(G.target.result)},M.onerror=G=>{console.error("Error reading file:",G)},M.readAsDataURL(J),x(J);try{if(console.log("Starting upload process..."),k(!0),!t)throw new Error("No student data available");console.log("Student data available:",t);const G=String(t.studentId||t.id);if(console.log("Student ID for upload:",G),!G)throw new Error("No valid student ID available");console.log("Calling uploadStudentPhoto function...");const B=await YL(G,J);console.log("Photo uploaded successfully:",B);const ae={...t,photoURL:B};await Fn.updateStudent(ae),r(ae),R(B),$(!0),k(!1),setTimeout(()=>{$(!1)},3e3)}catch(G){console.error("Error uploading photo:",G),console.error("Error details:",G.message,G.name,G.stack),console.error("Full error object:",JSON.stringify(G,null,2));let B="Error uploading photo. Please try again.";if(G.code)switch(G.code){case"storage/unauthorized":B="Unauthorized: Check your Firebase Storage permissions.";break;case"storage/canceled":B="Upload canceled.";break;case"storage/unknown":B="Unknown error occurred during upload.";break;default:B=`Error: ${G.message||G.code}`}else G.message&&(B=`Error: ${G.message}`);alert(B),k(!1)}}else console.log("No file selected")};if(i)return l.jsxs("div",{className:"student-details-container",children:[l.jsxs("div",{className:"details-header",children:[l.jsxs("button",{className:"back-button",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{}),l.jsx("path",{})]}),"Back to Students"]}),l.jsx("h1",{children:"Student Profile"}),l.jsxs("div",{className:"header-buttons",children:[l.jsx("button",{className:"print-button",children:"Print Profile"}),l.jsx("button",{className:"edit-button",children:"Edit Student"})]})]}),l.jsxs("div",{className:"student-profile-card",children:[l.jsxs("div",{className:"student-header",children:[l.jsx("div",{className:"student-avatar-container",children:l.jsxs("div",{className:"photo-upload-section",children:[l.jsx("div",{className:"photo-preview",children:l.jsx("div",{className:"skeleton-card",style:{width:"120px",height:"120px",borderRadius:"8px"}})}),l.jsx("div",{className:"skeleton-card",style:{width:"120px",height:"36px",marginTop:"10px"}})]})}),l.jsxs("div",{className:"student-basic-info",children:[l.jsx("div",{className:"skeleton-card",style:{width:"200px",height:"28px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{width:"150px",height:"20px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{width:"100px",height:"20px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{width:"80px",height:"20px"}})]})]}),l.jsxs("div",{className:"summary-cards",children:[l.jsx("div",{className:"skeleton-card",style:{height:"80px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{height:"80px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{height:"80px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{height:"80px"}})]}),l.jsxs("div",{className:"payment-progress-section",children:[l.jsx("div",{className:"skeleton-card",style:{height:"24px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{height:"20px"}})]}),l.jsxs("div",{className:"personal-info-section",children:[l.jsx("div",{className:"skeleton-card",style:{height:"24px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{height:"150px"}})]}),l.jsxs("div",{className:"system-info-section",children:[l.jsx("div",{className:"skeleton-card",style:{height:"24px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{height:"100px"}})]}),l.jsxs("div",{className:"details-section",children:[l.jsx("div",{className:"skeleton-card",style:{height:"24px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-card",style:{height:"200px"}})]})]})]});if(u)return l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-message",children:u}),l.jsxs("button",{onClick:V,className:"back-button",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{}),l.jsx("path",{})]}),"Back to Students"]})]});if(!t)return l.jsxs("div",{className:"error-container",children:[l.jsx("div",{className:"error-message",children:"No student data available"}),l.jsxs("button",{onClick:V,className:"back-button",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{}),l.jsx("path",{})]}),"Back to Students"]})]});const ye=I(t),le=(parseFloat(t.totalFees)||0)-(parseFloat(t.feesPaid)||0),ve=parseFloat(t.totalFees)||0,me=parseFloat(t.feesPaid)||0,Le=ve>0?Math.round(me/ve*100):0;return l.jsxs("div",{className:"student-details-container",children:[l.jsxs("div",{className:"details-header",children:[l.jsxs("button",{onClick:V,className:"back-button",children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{}),l.jsx("path",{})]}),"Back to Students"]}),l.jsx("h1",{children:"Student Profile"}),l.jsxs("div",{className:"header-buttons",children:[l.jsx("button",{onClick:F,className:"print-button",children:"Print Profile"}),l.jsx("button",{onClick:T,className:"edit-button",children:"Edit Student"})]})]}),l.jsxs("div",{className:"student-profile-card",children:[l.jsxs("div",{className:"student-header",children:[l.jsx("div",{className:"student-avatar-container",children:l.jsxs("div",{className:"photo-upload-section",children:[l.jsx("div",{className:"photo-preview",children:A?l.jsx("img",{src:A,alt:"Student",className:"student-photo-preview"}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"photo-placeholder",children:""}),l.jsx("span",{className:"photo-label",children:"Upload Photo"})]})}),l.jsxs("label",{className:`upload-photo-btn ${C?"uploading":""}`,children:[C?"Uploading...":q?"Uploaded!":"Choose File",l.jsx("input",{type:"file",accept:"image/*",onChange:ee,style:{display:"none"},disabled:C})]}),q&&l.jsx("div",{className:"upload-success-message",children:"Photo uploaded successfully!"})]})}),l.jsxs("div",{className:"student-basic-info",children:[l.jsx("h2",{children:t.name}),l.jsxs("div",{className:"student-id",children:["ID: ",t.studentId||t.id]}),l.jsxs("div",{className:"student-class",children:["Class: ",t.class]}),l.jsx("span",{className:`status-badge status-${ye.toLowerCase().replace(" ","-")}`,children:ye==="Pending"?" Pending":ye==="Paid"?" Paid":" Not Started"})]})]}),l.jsxs("div",{className:"summary-cards",children:[l.jsxs("div",{className:"summary-card",children:[l.jsx("div",{className:"summary-card-title",children:"Total Fees"}),l.jsx("div",{className:"summary-card-value fee-total",children:H(ve)})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("div",{className:"summary-card-title",children:"Fees Paid"}),l.jsx("div",{className:"summary-card-value fee-paid",children:H(me)})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("div",{className:"summary-card-title",children:"Pending Fees"}),l.jsx("div",{className:"summary-card-value fee-pending",children:H(le)})]}),t.feesStructure&&l.jsxs("div",{className:"summary-card",children:[l.jsx("div",{className:"summary-card-title",children:"Fee Structure"}),l.jsx("div",{className:"summary-card-value fee-structure",children:t.feesStructure})]})]}),l.jsxs("div",{className:"payment-progress-section",children:[l.jsx("h3",{children:"Payment Progress"}),l.jsxs("div",{className:"progress-container",children:[l.jsx("div",{className:"progress-bar",children:l.jsx("div",{className:"progress-fill",style:{width:`${Le}%`}})}),l.jsxs("div",{className:"progress-text",children:[Le,"% Complete"]})]})]}),l.jsxs("div",{className:"personal-info-section",children:[l.jsx("h3",{children:"Personal Information"}),l.jsxs("div",{className:"personal-info-content",children:[l.jsxs("div",{className:"info-category",children:[l.jsx("h4",{children:"Student Details"}),l.jsxs("div",{className:"student-details-grid",children:[l.jsxs("div",{className:"student-detail-item",children:[l.jsx("label",{children:"Full Name"}),l.jsx("span",{children:t.name})]}),l.jsxs("div",{className:"student-detail-item",children:[l.jsx("label",{children:"Student ID"}),l.jsx("span",{children:t.studentId||t.id})]}),l.jsxs("div",{className:"student-detail-item",children:[l.jsx("label",{children:"Class"}),l.jsx("span",{children:t.class})]}),t.feesStructure&&l.jsxs("div",{className:"student-detail-item",children:[l.jsx("label",{children:"Fee Structure"}),l.jsx("span",{children:t.feesStructure})]})]})]}),t.address&&l.jsxs("div",{className:"info-category",children:[l.jsx("h4",{children:"Address Information"}),l.jsxs("div",{className:"address-detail-item",children:[l.jsx("label",{children:"Address"}),l.jsx("span",{className:"address-value",children:t.address})]})]}),l.jsxs("div",{className:"info-category",children:[l.jsx("h4",{children:"Contact Information"}),l.jsxs("div",{className:"contact-info-grid",children:[l.jsxs("div",{className:"contact-detail-item",children:[l.jsx("label",{children:"Contact Number"}),l.jsx("span",{children:t.contact||"N/A"})]}),t.email&&l.jsxs("div",{className:"contact-detail-item",children:[l.jsx("label",{children:"Email Address"}),l.jsx("span",{children:t.email})]})]})]}),(t.fatherName||t.motherName)&&l.jsxs("div",{className:"info-category",children:[l.jsx("h4",{children:"Family Information"}),l.jsxs("div",{className:"family-info-grid",children:[t.fatherName&&l.jsxs("div",{className:"family-detail-item",children:[l.jsx("label",{children:"Father's Name"}),l.jsx("span",{children:t.fatherName})]}),t.motherName&&l.jsxs("div",{className:"family-detail-item",children:[l.jsx("label",{children:"Mother's Name"}),l.jsx("span",{children:t.motherName})]})]})]})]})]}),l.jsxs("div",{className:"system-info-section",children:[l.jsx("h3",{children:"System Information"}),l.jsx("div",{className:"system-info-content",children:l.jsxs("div",{className:"system-grid",children:[l.jsxs("div",{className:"system-item",children:[l.jsx("label",{children:"Created At"}),l.jsx("span",{children:t.createdAt?ce(t.createdAt):"N/A"})]}),l.jsxs("div",{className:"system-item",children:[l.jsx("label",{children:"Last Updated"}),l.jsx("span",{children:t.updatedAt?ce(t.updatedAt):"N/A"})]}),l.jsxs("div",{className:"system-item",children:[l.jsx("label",{children:"Database ID"}),l.jsx("span",{children:t.id})]}),t.studentId&&t.id!==t.studentId&&l.jsxs("div",{className:"system-item",children:[l.jsx("label",{children:"Student ID (Display)"}),l.jsx("span",{children:t.studentId})]})]})})]}),l.jsxs("div",{className:"details-section",children:[l.jsx("h3",{children:"Payment History"}),m?l.jsx("div",{className:"payments-table",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{children:"Description"}),l.jsx("th",{children:"Amount"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:Array.from({length:5}).map((xe,J)=>l.jsxs("tr",{children:[l.jsx("td",{children:l.jsx(bs,{type:"text",width:"80px",height:"16px"})}),l.jsx("td",{children:l.jsx(bs,{type:"text",width:"120px",height:"16px"})}),l.jsx("td",{children:l.jsx(bs,{type:"text",width:"60px",height:"16px"})}),l.jsx("td",{children:l.jsx(bs,{type:"text",width:"70px",height:"16px"})})]},`skeleton-${J}`))})]})}):h.length===0?l.jsx("div",{className:"no-payments",children:"No payment history available"}):l.jsx("div",{className:"payments-table",children:l.jsxs("table",{children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{children:"Description"}),l.jsx("th",{children:"Amount"}),l.jsx("th",{children:"Status"})]})}),l.jsx("tbody",{children:h.map(xe=>l.jsxs("tr",{children:[l.jsx("td",{children:ce(xe.createdAt)}),l.jsx("td",{children:xe.description||"Payment"}),l.jsx("td",{className:"amount",children:H(xe.amount)}),l.jsx("td",{children:l.jsx("span",{className:`status-badge status-${xe.status}`,children:xe.status==="paid"?" Paid":xe.status==="pending"?" Pending":" Overdue"})})]},xe.id))})]})})]})]})]})},VM=()=>{const[n,e]=X.useState([]),[t,r]=X.useState([]),[i,o]=X.useState([]),[u,d]=X.useState(!0),[h,p]=X.useState(!1),[m,w]=X.useState(null),[_,x]=X.useState(""),[A,R]=X.useState("all"),[C,k]=X.useState("all"),[q,$]=X.useState({studentId:"",amount:"",dueDate:"",description:"",method:"Cash"}),[z,oe]=X.useState("Your Academy"),[ce,H]=X.useState(""),[D,I]=X.useState("Chinchpada, Airoli, Navi Mumbai - 400708"),[V,T]=X.useState(""),[F,L]=X.useState(""),[ee,ye]=X.useState(!1),[le,ve]=X.useState(!1),me=ue=>{if(!ue)return"N/A";if(ue instanceof on)return ue.toDate().toLocaleDateString();if(typeof ue=="string"){if(ue.match(/^\d{4}-\d{2}-\d{2}$/)){const[Ie,Y,pe]=ue.split("-");return new Date(Ie,Y-1,pe).toLocaleDateString()}const be=new Date(ue);if(!isNaN(be.getTime()))return be.toLocaleDateString()}return ue instanceof Date&&!isNaN(ue.getTime())?ue.toLocaleDateString():String(ue)};X.useEffect(()=>{Le(),_e();const ue=pe=>{const{message:Ne}=pe.detail;console.log("Success:",Ne),alert(Ne)},be=()=>{p(!1),w(null)},Ie=()=>{Le()},Y=()=>{Le()};return window.addEventListener("showSuccess",ue),window.addEventListener("navigateBack",be),window.addEventListener("studentsUpdated",Ie),window.addEventListener("paymentAdded",Y),()=>{window.removeEventListener("showSuccess",ue),window.removeEventListener("navigateBack",be),window.removeEventListener("studentsUpdated",Ie),window.removeEventListener("paymentAdded",Y)}},[]),X.useEffect(()=>{xe()},[t,_,A,C]);const Le=async()=>{try{const[ue,be]=await Promise.all([Mg(),lp()]);e(ue),r(be),d(!1)}catch(ue){console.error("Error fetching data:",ue),d(!1)}},xe=()=>{let ue=[...t];_&&(ue=ue.filter(be=>be.studentName.toLowerCase().includes(_.toLowerCase())||be.description.toLowerCase().includes(_.toLowerCase())||be.studentId.toLowerCase().includes(_.toLowerCase()))),A!=="all"&&(ue=ue.filter(be=>be.studentId===A)),C!=="all"&&(ue=ue.filter(be=>new Date(be.dueDate).toLocaleString("default",{month:"long",year:"numeric"})===C)),ue.sort((be,Ie)=>{const Y=be.createdAt?new Date(be.createdAt):new Date(0),pe=Ie.createdAt?new Date(Ie.createdAt):new Date(0);return!isNaN(Y.getTime())&&!isNaN(pe.getTime())?pe-Y:isNaN(Y.getTime())?isNaN(pe.getTime())?0:1:-1}),o(ue)},J=async ue=>{const{name:be,value:Ie}=ue.target,Y=pe=>{if(!pe)return"";const Ne=new Date(pe);return isNaN(Ne.getTime())?"":Ne.getFullYear()+"-"+String(Ne.getMonth()+1).padStart(2,"0")+"-"+String(Ne.getDate()).padStart(2,"0")};if(be==="dueDate"&&Ie){const pe=Y(Ie);$(Ne=>({...Ne,[be]:pe}));return}if($(pe=>({...pe,[be]:Ie})),be==="amount"&&Ie&&q.studentId){const pe=await Fn.getStudentById(q.studentId);if(pe){const Ne=parseFloat(Ie)||0,je=parseFloat(pe.totalFees)||0,we=parseFloat(pe.feesPaid)||0;let Ce=je-we;if(m){const Je=parseFloat(m.amount)||0;Ce=je-we+Je}ye(Ne>Ce)}}if(be==="studentId"&&q.amount&&Ie){const pe=await Fn.getStudentById(Ie);if(pe){const Ne=parseFloat(q.amount)||0,je=parseFloat(pe.totalFees)||0,we=parseFloat(pe.feesPaid)||0;let Ce=je-we;if(m){const Je=parseFloat(m.amount)||0;Ce=je-we+Je}ye(Ne>Ce)}}},M=async ue=>{if(ue.preventDefault(),!le){ve(!0);try{await G(q.studentId,q.amount,q.dueDate,q.description,m?m.id:null)&&($({studentId:"",amount:"",dueDate:"",description:""}),w(null),p(!1))}catch(be){console.error("Error saving payment:",be),alert("Error saving payment. Please try again.")}finally{ve(!1)}}};async function G(ue,be,Ie,Y,pe=null){const Ne=we=>{if(we==null)return 0;const Ce=parseFloat(we);return Number.isFinite(Ce)?Ce:0},je=we=>{if(!we)return"";const Ce=we instanceof Date?we:new Date(we);return isNaN(Ce.getTime())?"":Ce.getFullYear()+"-"+String(Ce.getMonth()+1).padStart(2,"0")+"-"+String(Ce.getDate()).padStart(2,"0")};try{if(console.log("[FIX] start add/edit payment"),console.log("[FIX] Parameters:",{selectedStudentId:ue,paymentAmountRaw:be,dueDateRaw:Ie,descriptionRaw:Y,editingPaymentId:pe}),!ue)return console.log("[FIX] Validation failed: No student selected"),alert("Select a student"),!1;const we=Ne(be);if(we<=0)return console.log("[FIX] Validation failed: Invalid amount",be),alert("Enter valid amount"),!1;console.log("[FIX] Fetching student with ID:",ue);const Ce=await Fn.getStudentById(ue);if(console.log("[FIX] Student fetched:",Ce),!Ce)return console.error("[FIX] student not found",ue),alert("Student not found"),!1;const Je=Ne(Ce.totalFees),ut=Ne(Ce.feesPaid),nt=Ne(Ce.feesDue);console.log("[FIX] Student numeric fields:",{totalFees:Je,feesPaid:ut,feesDue:nt});const ke=Je-ut;if(we>ke)return console.log("[FIX] Validation failed: Amount exceeds remaining fees",{amount:we,totalFees:Je,feesPaid:ut,maxAllowedAmount:ke}),alert(`Payment amount (${we}) exceeds the remaining fees balance (${ke}). Maximum allowed amount is ${ke}.`),!1;const st=ut,Xe=ut+we,Qe=Math.max(0,Xe),tt=Math.max(0,Je-Qe);console.log("[FIX] Student fees calculations:",{oldFeesPaid:st,newFeesPaid:Xe,finalFeesPaid:Qe,finalFeesDue:tt,amountAdded:we,totalFees:Je,feesPaid:ut});let Oe="Pending";console.log("[FIX] Determining student status with:",{finalFeesPaid:Qe,totalFees:Je,finalFeesDue:tt}),Qe===0?Oe="Not Started":Je>0&&Qe>=Je?Oe="Paid":tt>0&&(Oe="Pending"),console.log("[FIX] Student status set to:",Oe);const De={...Ce,totalFees:Je,feesPaid:Qe,feesDue:tt,status:Oe,updatedAt:on.now()};console.log("[FIX] Updated student object:",De),console.log("[FIX] Student ID for update:",De.id||De.studentId),console.log("[FIX] Saving student:",De);const Be=await Fn.updateStudent(De);if(console.log("[FIX] Student saved result:",Be),!Be)return console.error("[FIX] saveStudent failed",De),alert("Failed to save student. Check console."),!1;console.log("[FIX] student saved");const it=je(new Date),gt=Ie?je(Ie):"";let et={studentId:ue,amount:we,dueDate:gt,description:Y||"",createdAt:on.now(),status:"paid",studentName:Ce.name,studentClass:Ce.class,paidDate:on.now(),method:q.method||"Cash",receipt:`RCT-${Date.now()}`};if(!et.studentId||!et.studentName||!et.studentClass)return console.error("[FIX] Missing required student information:",et),alert("Missing required student information. Please try again."),!1;if(!et.amount||et.amount<=0)return console.error("[FIX] Invalid payment amount:",et.amount),alert("Invalid payment amount. Please enter a valid amount."),!1;console.log("[FIX] Payment object created:",et);let bt;if(pe){if(console.log("[FIX] Updating existing payment:",pe),et={...m,studentId:ue,amount:we,dueDate:gt,description:Y||"",studentName:Ce.name,studentClass:Ce.class,updatedAt:on.now(),status:m?.status||"paid",paidDate:m?.paidDate||on.now(),method:q.method||m?.method||"Cash",receipt:m?.receipt||`RCT-${Date.now()}`},!et.studentId||!et.studentName||!et.studentClass)return console.error("[FIX] Missing required student information:",et),alert("Missing required student information. Please try again."),!1;if(!et.amount||et.amount<=0)return console.error("[FIX] Invalid payment amount:",et.amount),alert("Invalid payment amount. Please enter a valid amount."),!1;try{bt=await A1(pe,et),console.log("[FIX] Updating student fees for edited payment:",ue);try{await Fn.updateStudentFees(ue,we),console.log("[FIX] Student fees updated successfully after edit")}catch(St){console.error("[FIX] Failed to update student fees after edit:",St),alert("Payment updated but failed to update student fees. Please refresh the page.")}}catch(St){return console.error("[FIX] Failed to update payment:",St),alert("Failed to update payment. Please check the console for details."),!1}}else{console.log("[FIX] Adding new payment");try{bt=await aA(et)}catch(St){return console.error("[FIX] Failed to add payment:",St),alert("Failed to add payment. Please check the console for details."),!1}}if(console.log("[FIX] Payment saved result:",bt),!bt)return console.error("[FIX] savePayment failed",et),alert("Failed to save payment. Check console."),!1;console.log("[FIX] payment saved",et),console.log("[FIX] Updating student fees for student:",ue);try{await Fn.updateStudentFees(ue,we),console.log("[FIX] Student fees updated successfully")}catch(St){console.error("[FIX] Failed to update student fees:",St),alert("Payment saved but failed to update student fees. Please refresh the page.")}return await new Promise(St=>setTimeout(St,150)),console.log("[FIX] Refreshing UI"),await Le(),await new Promise(St=>setTimeout(St,50)),window.dispatchEvent(new Event("studentsUpdated")),window.dispatchEvent(new CustomEvent("dashboardRefresh")),window.dispatchEvent(new CustomEvent("paymentsRefresh")),window.dispatchEvent(new Event("paymentAdded")),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:pe?"Payment updated and student updated successfully":"Payment added and student updated successfully"}})),console.log("[FIX] done"),!0}catch(we){return console.error("[FIX] exception:",we),alert("Unexpected error. See console."),!1}}const B=()=>{w(null),$({studentId:"",amount:"",dueDate:"",description:"",method:"Cash"}),p(!0)},ae=async ue=>{try{const be=await $u(()=>Promise.resolve().then(()=>t4),void 0,import.meta.url),Ie=await $u(()=>Promise.resolve().then(()=>g4),void 0,import.meta.url);if(!ue){console.error("No payment data provided for PDF generation"),alert("No payment data available to generate receipt");return}let Y=null;try{Y=await Fn.getStudentById(ue.studentId)}catch(Xe){console.error("Error fetching student info for receipt:",Xe)}const Ne=(Xe=>{const Qe=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],tt=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(Xe===0)return"Zero Rupees Only";let Oe="",De=Math.floor(Xe);return De>=1e5&&(Oe+=Qe[Math.floor(De/1e5)]+" Lakh ",De%=1e5),De>=1e3&&(Oe+=Qe[Math.floor(De/1e3)]+" Thousand ",De%=1e3),De>=100&&(Oe+=Qe[Math.floor(De/100)]+" Hundred ",De%=100),De>=20&&(Oe+=tt[Math.floor(De/10)]+" ",De%=10),De>0&&(Oe+=Qe[De]),Oe.trim()+" Rupees Only"})(parseFloat(ue.amount||0)),je=new be.jsPDF;let we={firmName:"",firmAddress:"",logoUrl:"",signatureUrl:"",stampUrl:""};try{const Xe=await oA();we={firmName:Xe.firmName||"",firmAddress:Xe.firmAddress||"",logoUrl:Xe.logoUrl||"",signatureUrl:Xe.signatureUrl||"",stampUrl:Xe.stampUrl||""}}catch(Xe){console.warn("Could not load branding data:",Xe)}if(we?.logoUrl)try{const Qe=await(await fetch(we.logoUrl)).blob(),tt=await new Promise((Oe,De)=>{const Be=new FileReader;Be.onload=()=>{Oe(Be.result)},Be.onerror=()=>{De(new Error("Failed to read logo file"))},Be.readAsDataURL(Qe)});je.addImage(tt,"PNG",15,15,30,15)}catch(Xe){console.error("Could not load logo for PDF:",Xe)}je.setFontSize(16),je.setFont(void 0,"bold"),je.text(we?.firmName||"",105,15,{align:"center"});let Ce=20;if(we?.logoUrl)try{const Qe=await(await fetch(we.logoUrl)).blob(),tt=await new Promise((gt,et)=>{const bt=new FileReader;bt.onload=()=>{gt(bt.result)},bt.onerror=()=>{et(new Error("Failed to read logo file"))},bt.readAsDataURL(Qe)});je.addImage(tt,"JPEG",20,Ce,30,30);const Oe=60;je.setFontSize(14),je.setFont(void 0,"bold"),je.text(we.firmName||"Academy Name",Oe,Ce+12),je.setFontSize(10),je.setFont(void 0,"normal");const De=150,Be=we.firmAddress||"Academy Address";if(je.getTextWidth(Be)>De){const gt=Be.toString().split(" ");let et="",bt=Ce+20;gt.forEach((St,Nt)=>{const un=et+St+" ";je.getTextWidth(un)>De&&Nt!==0?(je.text(et,Oe,bt),et=St+" ",bt+=6):et=un}),je.text(et.trim(),Oe,bt),Ce=bt+15}else je.text(Be,Oe,Ce+20),Ce=Ce+25}catch(Xe){console.error("Error loading logo for PDF:",Xe),je.setFontSize(14),je.setFont(void 0,"bold"),je.text(we.firmName||"Academy Name",20,Ce+12),je.setFontSize(10),je.setFont(void 0,"normal");const Qe=150,tt=we.firmAddress||"Academy Address";if(je.getTextWidth(tt)>Qe){const De=tt.toString().split(" ");let Be="",it=Ce+20;De.forEach((gt,et)=>{const bt=Be+gt+" ";je.getTextWidth(bt)>Qe&&et!==0?(je.text(Be,20,it),Be=gt+" ",it+=6):Be=bt}),je.text(Be.trim(),20,it),Ce=it+15}else je.text(tt,20,Ce+20),Ce=Ce+25}else{je.setFontSize(14),je.setFont(void 0,"bold"),je.text(we.firmName||"Academy Name",20,Ce+12),je.setFontSize(10),je.setFont(void 0,"normal");const Xe=150,Qe=we.firmAddress||"Academy Address",tt=je.getTextWidth(Qe);if(tt>Xe){const Oe=Qe.toString().split(" ");let De="",Be=Ce+20;Oe.forEach((it,gt)=>{const et=De+it+" ",bt=je.getTextWidth(et);tt>Xe&&gt!==0?(je.text(De,20,Be),De=it+" ",Be+=6):De=et}),je.text(De.trim(),20,Be),Ce=Be+15}else je.text(Qe,20,Ce+20),Ce=Ce+25}je.setFontSize(18),je.setFont(void 0,"bold"),je.setTextColor(220,53,69),je.text("Fee Receipt",105,Ce,{align:"center"}),je.setFontSize(12),je.setFont(void 0,"normal"),je.setTextColor(0,0,0),Ce+=15;const Je=[["Receipt No:",ue.id||ue.receipt||"N/A"],["Date:",ue.createdAt?new Date(ue.createdAt?.seconds*1e3||ue.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"})],["Student Name:",ue.studentName||Y?.name||"N/A"],["Student ID:",ue.studentId||Y?.studentId||"N/A"],["Class:",ue.studentClass||Y?.class||"N/A"],["Contact:",ue.studentContact||Y?.contact||"N/A"],["Amount Paid:",`${ue.amount||"0"}`],["Payment Method:",ue.method||"N/A"],["Due Date:",ue.dueDate||"N/A"],["Status:",ue.status||"N/A"],["Description:",ue.description||"N/A"]];Y?.feesStructure&&Je.push(["Fees Structure:",Y.feesStructure]),Y?.feesPaid&&Je.push(["Fees Paid:",`${Y.feesPaid}`]),Y?.feesDue&&Je.push(["Fees Due:",`${Y.feesDue}`]),Y?.totalFees&&Je.push(["Total Fees:",`${Y.totalFees}`]),je.setFontSize(10),je.setFont(void 0,"normal"),Je.forEach(([Xe,Qe])=>{je.setFont(void 0,"bold"),je.text(Xe,20,Ce),je.setFont(void 0,"normal");const tt=150;if(je.getTextWidth(Qe)>tt){const De=Qe.toString().split(" ");let Be="",it=Ce;De.forEach((gt,et)=>{const bt=Be+gt+" ";je.getTextWidth(bt)>tt&&et!==0?(je.text(Be,60,it),Be=gt+" ",it+=6):Be=bt}),je.text(Be.trim(),60,it),Ce=it+8}else je.text(Qe,60,Ce),Ce+=8}),je.setFontSize(10),je.setFont(void 0,"italic"),je.text(`Amount in Words: ${Ne}`,15,Ce+10);const ut=Ce+30;if(we?.signatureUrl)try{const Qe=await(await fetch(we.signatureUrl)).blob(),tt=await new Promise((Oe,De)=>{const Be=new FileReader;Be.onload=()=>{Oe(Be.result)},Be.onerror=()=>{De(new Error("Failed to read signature file"))},Be.readAsDataURL(Qe)});je.addImage(tt,"PNG",150,ut,40,20)}catch(Xe){console.error("Could not load signature for PDF:",Xe),je.text("Authorized Signatory",170,ut+15,{align:"right"})}else je.text("Authorized Signatory",170,ut,{align:"right"});if(we?.stampUrl)try{const Qe=await(await fetch(we.stampUrl)).blob(),tt=await new Promise((Oe,De)=>{const Be=new FileReader;Be.onload=()=>{Oe(Be.result)},Be.onerror=()=>{De(new Error("Failed to read stamp file"))},Be.readAsDataURL(Qe)});je.addImage(tt,"PNG",15,ut,30,30)}catch(Xe){console.error("Could not load stamp for PDF:",Xe)}je.setFont(void 0,"italic"),je.text("Thank you for your payment!",105,ut+10,{align:"center"}),je.setFont(void 0,"normal"),je.text("This is an auto-generated receipt. No signature required.",105,ut+15,{align:"center"});const nt=je.output("blob"),ke=URL.createObjectURL(nt),st=window.open(ke);st.onload=function(){st.print()}}catch(be){console.error("Error generating PDF:",be),alert("Error generating PDF. Please try again.")}},ge=async ue=>{if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){await ae(ue);return}const Ie=new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"});let Y=null;try{Y=await Fn.getStudentById(ue.studentId)}catch(we){console.error("Error fetching student info for receipt:",we)}const Ne=(we=>{const Ce=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],Je=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(we===0)return"Zero Rupees Only";let ut="",nt=Math.floor(we);return nt>=1e5&&(ut+=Ce[Math.floor(nt/1e5)]+" Lakh ",nt%=1e5),nt>=1e3&&(ut+=Ce[Math.floor(nt/1e3)]+" Thousand ",nt%=1e3),nt>=100&&(ut+=Ce[Math.floor(nt/100)]+" Hundred ",nt%=100),nt>=20&&(ut+=Je[Math.floor(nt/10)]+" ",nt%=10),nt>0&&(ut+=Ce[nt]),ut.trim()+" Rupees Only"})(parseFloat(ue.amount||0)),je=window.open("","_blank");je.document.write(`
      <html>
        <head>
          <title>Fee Receipt - ${ue.studentName}</title>
          <style>
            @media print {
              @page { margin: 0; size: A4; }
              body { margin: 0.5cm; }
            }
            
            body { 
              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
              max-width: 600px; 
              margin: 0 auto; 
              padding: 10px;
              color: var(--text-primary);
              line-height: 1.3;
              font-size: 13px;
              position: relative;
            }
            
            .receipt-container {
              border: 1px solid var(--info-color); /* Blue for neutral info */
              border-radius: 8px;
              padding: 15px;
              background: white;
              position: relative;
              overflow: hidden;
              box-shadow: none;
            }
            
            .receipt-container::before {
              content: "ORIGINAL COPY";
              position: absolute;
              top: 50%;
              left: 50%;
              transform: translate(-50%, -50%) rotate(-30deg);
              font-size: 36px;
              font-weight: bold;
              color: rgba(78, 115, 223, 0.05);
              pointer-events: none;
              z-index: 0;
            }
            
            .receipt-header {
              text-align: center;
              border-bottom: 2px double var(--info-color); /* Blue for neutral info */
              padding-bottom: 10px;
              margin-bottom: 15px;
              position: relative;
              background: linear-gradient(135deg, #e3f2fd, #bbdefb);
              border-radius: 6px;
              margin: -15px -15px 15px -15px;
              padding: 15px;
              border-bottom: 2px solid var(--info-color);
            }
            
            .receipt-logo {
              max-width: 80px;
              height: auto;
              margin-bottom: 10px;
            }
            
            .school-logo {
              max-width: 60px;
              max-height: 60px;
              width: auto;
              margin-bottom: 8px;
              vertical-align: middle;
            }
            
            .header-content {
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 15px;
              margin-bottom: 10px;
            }
            
            .school-info {
              display: flex;
              flex-direction: column;
              text-align: center;
            }

            .school-name {
              font-size: 20px;
              font-weight: bold;
              color: var(--info-color-darker);
              margin: 2px 0;
            }

            .school-address {
              font-size: 13px;
              color: var(--text-secondary);
              margin-bottom: 8px;
              font-weight: 500;
            }

            .receipt-title {
              font-size: 18px;
              font-weight: bold;
              color: var(--danger-color); /* Red for alert/drop */
              margin: 10px 0;
              text-transform: uppercase;
              letter-spacing: 1px;
              background: linear-gradient(90deg, var(--info-color), var(--info-color-darker));
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              background-clip: text;
            }

            .receipt-details {
              display: grid;
              grid-template-columns: repeat(2, 1fr);
              gap: 10px;
              margin-bottom: 15px;
              background: #f8f9fa;
              padding: 15px;
              border-radius: 8px;
              border: 1px solid #e9ecef;
            }

            .detail-item {
              display: flex;
              flex-direction: column;
              padding: 5px 0;
            }

            .detail-label {
              font-size: 12px;
              color: var(--text-secondary);
              margin-bottom: 3px;
              font-weight: 600;
            }

            .detail-value {
              font-weight: 700;
              color: var(--info-color-darker); /* Blue for neutral info */
              font-size: 14px;
              background: white;
              padding: 3px 8px;
              border-radius: 4px;
              border: 1px solid #e9ecef;
            }

            .amount-section {
              background: linear-gradient(135deg, #f8f9fa, #e9ecef);
              padding: 15px;
              border-radius: 8px;
              margin: 15px 0;
              border: 1px solid #dee2e6;
            }

            .amount-row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 5px;
            }

            .amount-row.total {
              display: flex;
              justify-content: space-between;
              font-weight: bold;
              font-size: 16px;
              padding-top: 8px;
              border-top: 2px solid var(--info-color);
              margin-top: 8px;
              color: var(--info-color-darker);
            }

            .amount-in-words {
              margin: 15px 0;
              padding: 10px;
              background: linear-gradient(135deg, #e3f2fd, #bbdefb);
              border-radius: 6px;
              font-style: italic;
              font-weight: 500;
              border: 1px solid #90caf9;
              text-align: center;
              color: #1976d2;
              font-size: 12px;
            }

            .signature-section {
              display: flex;
              justify-content: space-between;
              margin-top: 25px;
              padding-top: 15px;
              border-top: 1px dashed var(--info-color);
            }

            .signature-box {
              text-align: center;
              width: 45%;
              background: #f8f9fa;
              padding: 10px;
              border-radius: 6px;
              border: 1px solid #e9ecef;
            }

            .signature-line {
              margin-top: 25px;
              border-top: 1px solid var(--text-primary);
              padding-top: 5px;
              color: var(--text-secondary);
              font-size: 12px;
            }

/* Official Section for Signature and Stamp */
.official-section {
  margin: 20px 0 15px;
  padding: 15px 0;
  border-top: 1px solid var(--border-color);
  text-align: center;
}

.official-content {
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
  gap: 15px;
  margin-top: 10px;
}

.official-item {
  text-align: center;
  flex: 1;
  min-width: 100px;
  background: #f8f9fa;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #e9ecef;
}

.official-label {
  font-size: 11px;
  color: var(--info-color-darker);
  margin-bottom: 8px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.official-image {
  max-width: 80px;
  max-height: 80px;
  object-fit: contain;
}

.signature-preview {
  /* Signature-specific styling if needed */
}

.stamp-preview {
  /* Stamp-specific styling if needed */
}

.footer {
  text-align: center;
  margin-top: 20px;
  padding-top: 15px;
  font-size: 12px;
  color: var(--text-secondary);
  border-top: 1px solid #e9ecef;
}

.note {
  background: linear-gradient(135deg, #fff8e1, #ffecb3);
  border: 1px solid #ffd54f;
  border-radius: 6px;
  padding: 10px;
  margin: 15px 0;
  font-size: 12px;
  text-align: center;
  font-weight: 500;
  color: #e65100;
}

@media (max-width: 500px) {
  .receipt-details {
    grid-template-columns: 1fr;
  }
  
  .signature-section {
    flex-direction: column;
    gap: 30px;
  }
  
  .signature-box {
    width: 100%;
  }
  
  .official-content {
    flex-direction: column;
    align-items: center;
    gap: 25px;
  }
  
  .official-item {
    width: 100%;
  }
}

          </style>
        </head>
        <body>
          <div class="receipt-container">
            <div class="receipt-header">
              <div class="header-content">
                ${ce?`<img src="${ce}" alt="School Logo" class="school-logo" />`:""}
                <div class="school-info">
                  <div class="school-name">${z}</div>
                  <div class="school-address">${D}</div>
                </div>
              </div>
              <div class="receipt-title">Fee Receipt</div>
            </div>
            
            <div class="receipt-details">
              <div class="detail-item">
                <span class="detail-label">Receipt No.</span>
                <span class="detail-value">${ue.id||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Date</span>
                <span class="detail-value">${Ie}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Student Name</span>
                <span class="detail-value">${ue.studentName||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Student ID</span>
                <span class="detail-value">${ue.studentId||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Class</span>
                <span class="detail-value">${ue.studentClass||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Description</span>
                <span class="detail-value">${ue.description||"N/A"}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Payment Method</span>
                <span class="detail-value">${ue.method||"Cash"}</span>
              </div>

              ${Y?`
              <div class="detail-item">
                <span class="detail-label">Total Fees</span>
                <span class="detail-value">${parseFloat(Y.totalFees||0).toFixed(2)}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Fees Paid (This Payment)</span>
                <span class="detail-value">${parseFloat(ue.amount||0).toFixed(2)}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Total Fees Paid (Cumulative)</span>
                <span class="detail-value">${parseFloat(Y.feesPaid||0).toFixed(2)}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Pending Fees</span>
                <span class="detail-value">${parseFloat(Y.totalFees-Y.feesPaid||0).toFixed(2)}</span>
              </div>
              `:""}
            </div>
            
            <div class="amount-section">
              <div class="amount-row">
                <span>Amount Paid (This Receipt):</span>
                <span>${parseFloat(ue.amount||0).toFixed(2)}</span>
              </div>
              ${Y?`
              <div class="amount-row">
                <span>Total Fees Paid (Cumulative):</span>
                <span>${parseFloat(Y.feesPaid||0).toFixed(2)}</span>
              </div>
              <div class="amount-row">
                <span>Total Fees:</span>
                <span>${parseFloat(Y.totalFees||0).toFixed(2)}</span>
              </div>
              <div class="amount-row">
                <span>Pending Fees:</span>
                <span>${parseFloat(Y.totalFees-Y.feesPaid||0).toFixed(2)}</span>
              </div>
              `:""}
              <div class="amount-row total">
                <span>Balance Due:</span>
                <span>${Y?parseFloat(Y.totalFees-Y.feesPaid||0).toFixed(2):"0.00"}</span>
              </div>
            </div>
            
            <div class="amount-in-words">
              Amount in Words: ${Ne}
            </div>
            
            <div class="note">
              <strong>Note:</strong> This is a computer-generated receipt and does not require a signature.
            </div>
            
            
            <!-- Academy Signature and Stamp Section -->
            <div class="official-section">
              ${V||F?`
              <div class="official-content">
                ${V?`
                <div class="official-item">
                  <img src="${V}" alt="Authorized Signature" class="official-image signature-preview" />
                </div>
                `:""}
                ${F?`
                <div class="official-item">
                  <div class="official-label">Official Seal:</div>
                  <img src="${F}" alt="Official Stamp" class="official-image stamp-preview" />
                </div>
                `:""}
              </div>
              `:""}
            </div>
            
            <div class="footer">
              Thank you for your payment! For any queries, contact us at info@victorypointacademy.edu
            </div>
          </div>
          
          <script>
            window.onload = function() {
              // Automatically trigger the print dialog
              window.print();
              // Don't close the window immediately to allow users to save as PDF if needed
            };
          <\/script>
        </body>
      </html>
    `),je.document.close()},_e=()=>{if(fn())try{const ue=dn(),be=Yn(Mn,`users/${ue}/settings/profile`),Ie=$v(be,Y=>{if(Y.exists()){const pe=Y.data();pe.firmName&&pe.firmName.trim()!==""?oe(pe.firmName):oe("Your Academy"),pe.logoUrl&&H(pe.logoUrl),pe.firmAddress?I(pe.firmAddress):I("Chinchpada, Airoli, Navi Mumbai - 400708"),pe.signatureUrl&&T(pe.signatureUrl),pe.stampUrl&&L(pe.stampUrl)}else oe("Your Academy"),I("Chinchpada, Airoli, Navi Mumbai - 400708")});return()=>Ie()}catch(ue){console.error("Error loading branding data:",ue)}},Ve=()=>{const ue=t.map(be=>{if(!be.dueDate)return null;const Ie=new Date(be.dueDate);return isNaN(Ie.getTime())?null:Ie.toLocaleString("default",{month:"long",year:"numeric"})}).filter(Boolean);return[...new Set(ue)].sort((be,Ie)=>{const Y=new Date(`01 ${be}`);return new Date(`01 ${Ie}`)-Y})},Me=ue=>{switch(ue?.toLowerCase()){case"paid":return{text:"Paid",color:"var(--success-color)"};case"pending":return{text:"Pending",color:"var(--warning-color)"};case"overdue":return{text:"Overdue",color:"var(--danger-color)"};case"not started":return{text:"Not Started",color:"var(--info-color)"};default:return{text:"Unknown",color:"var(--info-color)"}}},Te=(()=>{const ue=n.reduce((we,Ce)=>we+(parseFloat(Ce.feesPaid)||0),0),be=n.reduce((we,Ce)=>we+(parseFloat(Ce.totalFees)||0),0),Ie=be-ue,Y=n.length,pe=n.filter(we=>we.status?.toLowerCase()==="paid").length,Ne=be-ue,je=t.reduce((we,Ce)=>we+(Ce.status?.toLowerCase()==="overdue"?parseFloat(Ce.amount||0):0),0);return{totalCollected:ue,pendingFees:Ie,totalStudents:Y,totalFees:be,paidStudents:pe,pendingPayments:Ne,overdueAmount:je}})();return u?l.jsx(eo,{children:l.jsxs("div",{className:"fees-container",children:[l.jsx("div",{className:"fees-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("div",{className:"skeleton-header",style:{width:"200px",height:"40px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"300px",height:"24px",marginTop:"10px"}})]}),l.jsx("div",{className:"header-right",children:l.jsxs("div",{className:"header-actions",children:[l.jsx("div",{className:"skeleton-bar",style:{width:"120px",height:"40px",marginRight:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"120px",height:"40px"}})]})})]})}),l.jsxs("div",{className:"search-filters",children:[l.jsx("div",{className:"search-container",children:l.jsx("div",{className:"skeleton-header",style:{width:"100%",height:"44px",borderRadius:"12px"}})}),l.jsx("div",{className:"filter-container",children:l.jsx("div",{className:"skeleton-bar",style:{width:"100px",height:"40px",borderRadius:"8px"}})})]}),l.jsx("div",{className:"kpi-skeleton-grid",children:[1,2,3,4].map(ue=>l.jsx("div",{className:"skeleton-card"},ue))}),l.jsxs("div",{className:"table-skeleton",children:[l.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(ue=>l.jsx("div",{className:"skeleton-row"},ue))]})]})}):l.jsx(eo,{children:l.jsxs("div",{className:"fees-container",children:[l.jsxs("div",{className:"fees-header",children:[l.jsx("div",{className:"header-left",children:l.jsx("h1",{children:"Fee Management"})}),l.jsx("div",{className:"header-right",children:l.jsx("button",{className:"add-btn",onClick:B,children:"Add Payment"})})]}),l.jsxs("div",{className:"summary-cards",children:[l.jsxs("div",{className:"summary-card",children:[l.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--info-color)",color:"var(--info-color)"},children:""}),l.jsxs("div",{className:"card-content",children:[l.jsx("div",{className:"card-title",children:"Total Collected"}),l.jsxs("div",{className:"card-value",children:["",Te.totalCollected.toLocaleString()]})]})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--warning-color)",color:"var(--warning-color)"},children:""}),l.jsxs("div",{className:"card-content",children:[l.jsx("div",{className:"card-title",children:"Pending Payments"}),l.jsxs("div",{className:"card-value",children:["",Math.max(Te.pendingPayments,0).toLocaleString()]})]})]}),l.jsxs("div",{className:"summary-card",children:[l.jsx("div",{className:"card-icon",style:{backgroundColor:"var(--success-color)",color:"var(--success-color)"},children:""}),l.jsxs("div",{className:"card-content",children:[l.jsx("div",{className:"card-title",children:"Total Fees"}),l.jsxs("div",{className:"card-value",children:["",Te.totalFees.toLocaleString()]})]})]})]}),l.jsxs("div",{className:"search-filters",children:[l.jsxs("div",{className:"search-container",children:[l.jsx("input",{type:"text",placeholder:"Search payments...",className:"search-input",value:_,onChange:ue=>x(ue.target.value)}),l.jsx("span",{className:"search-icon",children:""})]}),l.jsxs("div",{className:"filters",children:[l.jsxs("select",{className:"filter-select",value:A,onChange:ue=>R(ue.target.value),children:[l.jsx("option",{value:"all",children:"All Students"}),n.map(ue=>l.jsxs("option",{value:ue.studentId,children:[ue.name," (",ue.studentId,")"]},ue.id))]}),l.jsxs("select",{className:"filter-select",value:C,onChange:ue=>k(ue.target.value),children:[l.jsx("option",{value:"all",children:"All Months"}),Ve().map(ue=>l.jsx("option",{value:ue,children:ue},ue))]})]})]}),h&&l.jsx("div",{className:"form-overlay",children:l.jsxs("div",{className:"form-container",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("h2",{children:m?"Edit Payment":"Add New Payment"}),l.jsx("button",{className:"close-btn",onClick:()=>p(!1),children:""})]}),l.jsxs("form",{onSubmit:M,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Student"}),l.jsxs("select",{name:"studentId",value:q.studentId,onChange:J,required:!0,disabled:m,children:[l.jsx("option",{value:"",children:"Select a student"}),n.map(ue=>l.jsxs("option",{value:ue.studentId,children:[ue.name," (",ue.studentId,") - Class ",ue.class]},ue.id))]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Amount ()"}),l.jsxs("div",{className:"amount-method-container",children:[l.jsx("input",{type:"number",name:"amount",value:q.amount,onChange:J,required:!0,min:"1",className:ee?"amount-exceeds":"",style:{flex:1,marginRight:"10px"}}),l.jsxs("select",{name:"method",value:q.method,onChange:J,className:"method-select",style:{flex:1,maxWidth:"150px"},children:[l.jsx("option",{value:"Cash",children:"Cash"}),l.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),l.jsx("option",{value:"Cheque",children:"Cheque"}),l.jsx("option",{value:"UPI",children:"UPI"}),l.jsx("option",{value:"Credit Card",children:"Credit Card"}),l.jsx("option",{value:"Debit Card",children:"Debit Card"}),l.jsx("option",{value:"Net Banking",children:"Net Banking"}),l.jsx("option",{value:"Other",children:"Other"})]})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Due Date"}),l.jsx("input",{type:"date",name:"dueDate",value:q.dueDate,onChange:J,required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{children:"Description"}),l.jsx("textarea",{name:"description",value:q.description,onChange:J,rows:"3",placeholder:"Enter payment description (optional)"})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:()=>p(!1),children:"Cancel"}),l.jsx("button",{type:"submit",className:"save-btn",disabled:le,children:le?"Processing...":m?"Update Payment":"Add Payment"})]})]})]})}),l.jsx("div",{className:"payments-table-container",children:l.jsxs("table",{className:"payments-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Student"}),l.jsx("th",{children:"Amount"}),l.jsx("th",{children:"Due Date"}),l.jsx("th",{children:"Description"}),l.jsx("th",{children:"Status"}),l.jsx("th",{children:"Created"}),l.jsx("th",{children:"Actions"})]})}),l.jsx("tbody",{children:i.length===0?l.jsx("tr",{children:l.jsx("td",{colSpan:"7",className:"no-data",children:"No payments found. Add a new payment to get started."})}):i.map(ue=>{const be=Me(ue.status);return l.jsxs("tr",{className:"payment-row",children:[l.jsxs("td",{children:[l.jsx("div",{className:"student-name",children:ue.studentName}),l.jsxs("div",{className:"student-id",children:[ue.studentId,"  ",ue.studentClass]})]}),l.jsxs("td",{children:["",parseFloat(ue.amount||0).toLocaleString()]}),l.jsx("td",{children:me(ue.dueDate)}),l.jsx("td",{children:ue.description||"-"}),l.jsx("td",{children:l.jsx("span",{className:"status-chip",style:{backgroundColor:be.color},children:be.text})}),l.jsx("td",{children:me(ue.createdAt)}),l.jsx("td",{children:l.jsx("div",{className:"action-buttons",children:l.jsx("button",{className:"print-btn",onClick:async()=>{try{await ge(ue)}catch(Ie){console.error("Error printing receipt:",Ie),alert("Error generating receipt. Please try again.")}},children:"Print"})})})]},ue.id)})})]})})]})})},zM=()=>{const n=Vr(),[e,t]=X.useState({roomRent:"",staffSalary:"",electricityBill:"",internetBill:"",otherExpenses:""}),[r,i]=X.useState({}),[o,u]=X.useState(!1),[d,h]=X.useState(!1);X.useEffect(()=>{p()},[]);const p=async()=>{h(!0);try{const k=new Date().toISOString().slice(0,7),q=await Fn.getStaff(),$=await Fn.getStaffAttendance(),z=m(q,$,k);t(oe=>({...oe,staffSalary:z.toString()})),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff salary automatically calculated from current month attendance"}}))}catch(k){console.error("Error fetching staff salary:",k),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error fetching staff salary data."}}))}finally{h(!1)}},m=(k,q,$)=>k.map(oe=>{const H=q.filter(I=>I.staffId===oe.staffId&&I.date.startsWith($)).filter(I=>I.status==="present").length;return oe.perDaySalary*H}).reduce((oe,ce)=>oe+ce,0),w=k=>{const{name:q,value:$}=k.target;t(z=>({...z,[q]:$})),r[q]&&i(z=>({...z,[q]:""}))},_=()=>{const k={};return e.roomRent&&isNaN(e.roomRent)&&(k.roomRent="Room rent must be a valid number"),e.staffSalary&&isNaN(e.staffSalary)&&(k.staffSalary="Staff salary must be a valid number"),e.electricityBill&&isNaN(e.electricityBill)&&(k.electricityBill="Electricity bill must be a valid number"),e.internetBill&&isNaN(e.internetBill)&&(k.internetBill="Internet bill must be a valid number"),e.otherExpenses&&isNaN(e.otherExpenses)&&(k.otherExpenses="Other expenses must be a valid number"),i(k),Object.keys(k).length===0},x=()=>{const k=parseFloat(e.roomRent)||0,q=parseFloat(e.staffSalary)||0,$=parseFloat(e.electricityBill)||0,z=parseFloat(e.internetBill)||0,oe=parseFloat(e.otherExpenses)||0;return k+q+$+z+oe},A=async k=>{if(k.preventDefault(),_()){u(!0);try{const q={roomRent:parseFloat(e.roomRent)||0,staffSalary:parseFloat(e.staffSalary)||0,electricityBill:parseFloat(e.electricityBill)||0,internetBill:parseFloat(e.internetBill)||0,otherExpenses:parseFloat(e.otherExpenses)||0,total:x(),date:new Date().toISOString(),createdAt:new Date};await Fn.addExpenditure(q),window.dispatchEvent(new CustomEvent("expenseAdded")),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Expense recorded successfully!"}})),n("/expenses")}catch(q){console.error("Error saving expense:",q),window.dispatchEvent(new CustomEvent("showError",{detail:{message:"Error saving expense. Please try again."}}))}finally{u(!1)}}},R=()=>{n("/dashboard")},C=x();return l.jsx("div",{className:"expense-form-container",children:l.jsxs("div",{className:"expense-form-card",children:[l.jsx("h2",{children:"Add New Expense"}),l.jsxs("form",{onSubmit:A,className:"expense-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"roomRent",children:"Room Rent ()"}),l.jsx("input",{type:"text",id:"roomRent",name:"roomRent",value:e.roomRent,onChange:w,className:r.roomRent?"error":"",placeholder:"Enter room rent amount"}),r.roomRent&&l.jsx("span",{className:"error-message",children:r.roomRent})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"staffSalary",children:"Staff Salary ()"}),l.jsxs("div",{className:"input-with-button",children:[l.jsx("input",{type:"text",id:"staffSalary",name:"staffSalary",value:e.staffSalary,onChange:w,className:r.staffSalary?"error":"",placeholder:"Enter staff salary amount",disabled:d}),l.jsx("button",{type:"button",className:"refresh-button",onClick:p,disabled:d,children:d?"Loading...":"Refresh"})]}),r.staffSalary&&l.jsx("span",{className:"error-message",children:r.staffSalary}),l.jsx("small",{className:"info-text",children:"Auto-calculated from current month's attendance"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"electricityBill",children:"Electricity Bill ()"}),l.jsx("input",{type:"text",id:"electricityBill",name:"electricityBill",value:e.electricityBill,onChange:w,className:r.electricityBill?"error":"",placeholder:"Enter electricity bill amount"}),r.electricityBill&&l.jsx("span",{className:"error-message",children:r.electricityBill})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"internetBill",children:"Internet Bill ()"}),l.jsx("input",{type:"text",id:"internetBill",name:"internetBill",value:e.internetBill,onChange:w,className:r.internetBill?"error":"",placeholder:"Enter internet bill amount"}),r.internetBill&&l.jsx("span",{className:"error-message",children:r.internetBill})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"otherExpenses",children:"Other Expenses ()"}),l.jsx("input",{type:"text",id:"otherExpenses",name:"otherExpenses",value:e.otherExpenses,onChange:w,className:r.otherExpenses?"error":"",placeholder:"Enter other expenses amount"}),r.otherExpenses&&l.jsx("span",{className:"error-message",children:r.otherExpenses})]}),l.jsxs("div",{className:"total-expenses-container",children:[l.jsx("div",{className:"total-label",children:"Total Expenses:"}),l.jsxs("div",{className:"total-amount",children:["",C.toLocaleString()]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"button",onClick:R,className:"cancel-btn",disabled:o,children:"Cancel"}),l.jsx("button",{type:"submit",className:"submit-btn",disabled:o,children:o?"Saving...":"Save Expense"})]})]})]})})},KS=()=>{const n=Vr(),[e,t]=X.useState([]),[r,i]=X.useState(!0),[o,u]=X.useState(new Date().toISOString().slice(0,7)),[d,h]=X.useState(""),[p,m]=X.useState("all"),[w,_]=X.useState("all"),[x,A]=X.useState([]),[R,C]=X.useState(!1),[k,q]=X.useState(!1),[$,z]=X.useState(""),[oe,ce]=X.useState(!1),[H,D]=X.useState(null),I=async()=>{try{if(!fn())return;const Q=dn(),Te=Yn(Mn,`users/${Q}/settings/budget`),ue=await pu(Te);if(ue.exists()){const be=ue.data();D(be.monthlyBudget||null)}else D(null)}catch(Q){console.error("Error loading budget limit:",Q),D(null)}},V=Q=>{const Te={},ue=new Date,be=`${ue.getFullYear()}-${String(ue.getMonth()+1).padStart(2,"0")}`,Ie=ue.toLocaleString("default",{month:"long",year:"numeric"});return Te[be]={label:Ie,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},Q.forEach(Y=>{const pe=new Date(Y.date),Ne=`${pe.getFullYear()}-${String(pe.getMonth()+1).padStart(2,"0")}`,je=pe.toLocaleString("default",{month:"long",year:"numeric"});Te[Ne]||(Te[Ne]={label:je,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),Te[Ne].expenses.push(Y),Te[Ne].total+=Y.total,Te[Ne].roomRent+=Y.roomRent,Te[Ne].staffSalary+=Y.staffSalary,Te[Ne].otherExpenses+=Y.otherExpenses,Te[Ne].electricityBill+=Y.electricityBill||0,Te[Ne].internetBill+=Y.internetBill||0}),Object.entries(Te).map(([Y,pe])=>({key:Y,...pe})).sort((Y,pe)=>pe.key.localeCompare(Y.key))};X.useEffect(()=>{let Q=!0;const Te=async()=>{try{const Ie=await Fn.getExpenditures();if(!Q)return;const Y=V(Ie);t(Y),await I();const pe=Ie.flatMap(Ne=>{const je=new Date(Ne.date),we=`${je.getFullYear()}-${String(je.getMonth()+1).padStart(2,"0")}`;return[{id:`${Ne.id}-rent`,date:Ne.date,name:"Room Rent",category:"rent",amount:Ne.roomRent,paymentMode:Ne.paymentMode||"Cash",addedBy:Ne.addedBy||"System",parentId:Ne.id},{id:`${Ne.id}-salary`,date:Ne.date,name:"Staff Salary",category:"salary",amount:Ne.staffSalary,paymentMode:Ne.paymentMode||"Bank",addedBy:Ne.addedBy||"System",parentId:Ne.id},{id:`${Ne.id}-electricity`,date:Ne.date,name:"Electricity Bill",category:"electricity",amount:Ne.electricityBill||0,paymentMode:Ne.paymentMode||"Cash",addedBy:Ne.addedBy||"System",parentId:Ne.id},{id:`${Ne.id}-internet`,date:Ne.date,name:"Internet Bill",category:"internet",amount:Ne.internetBill||0,paymentMode:Ne.paymentMode||"Cash",addedBy:Ne.addedBy||"System",parentId:Ne.id},{id:`${Ne.id}-other`,date:Ne.date,name:"Other Expenses",category:"miscellaneous",amount:Ne.otherExpenses,paymentMode:Ne.paymentMode||"Cash",addedBy:Ne.addedBy||"System",parentId:Ne.id}].filter(Ce=>Ce.amount>0)});A(pe)}catch(Ie){console.error("Error fetching expenses:",Ie)}finally{Q&&i(!1)}};Te();const ue=()=>{Q&&Te()},be=Ie=>{if(Q){const{budget:Y}=Ie.detail;D(Y)}};return window.addEventListener("expenditureUpdated",ue),window.addEventListener("budgetUpdated",be),()=>{Q=!1,window.removeEventListener("expenditureUpdated",ue),window.removeEventListener("budgetUpdated",be)}},[]),X.useEffect(()=>{const Q=Te=>{oe&&!Te.target.closest(".export-dropdown")&&ce(!1)};return document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[oe]);const T=Q=>new Date(Q).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),F=Q=>({rent:"",salary:"",electricity:"",internet:"",miscellaneous:""})[Q]||"",L=Q=>({rent:"Room Rent",salary:"Staff Salary",electricity:"Electricity",internet:"Internet",miscellaneous:"Miscellaneous"})[Q]||Q,ee=()=>H?(e.find(Te=>Te.key===o)||{total:0}).total>H:!1,ye=async()=>{let Q=`Date,Expense Name,Category,Amount,Payment Mode,Added By
`;me.forEach(Ie=>{const Y=[`"${new Date(Ie.date).toLocaleDateString()}"`,`"${Ie.name}"`,`"${L(Ie.category)}"`,`"${Ie.amount.toLocaleString()}"`,`"${Ie.paymentMode}"`,`"${Ie.addedBy}"`];Q+=Y.join(",")+`
`});const Te=new Blob([Q],{type:"text/csv;charset=utf-8;"}),ue=URL.createObjectURL(Te),be=document.createElement("a");be.setAttribute("href",ue),be.setAttribute("download",`expenses_${o}.csv`),be.style.visibility="hidden",document.body.appendChild(be),be.click(),document.body.removeChild(be)},le=async()=>{try{console.log("Starting PDF export...");const Q=new Mt;Q.setFontSize(18),Q.text(`Expense Report - ${o}`,20,20);const Te=new Date().toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"});if(Q.setFontSize(12),Q.text(`Generated on: ${Te}`,20,30),me&&me.length>0){const ue=[["Date","Expense Name","Category","Amount","Payment Mode"]],be=me.map(Ie=>[Ie.date?new Date(Ie.date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}):"N/A",Ie.name||"N/A",L(Ie.category||"miscellaneous"),Ie.amount?`INR ${Number(Ie.amount).toLocaleString()}`:"INR 0",Ie.paymentMode||"N/A"]);if(Q.autoTable)Q.autoTable({head:ue,body:be,startY:40,styles:{fontSize:10},headStyles:{fillColor:[52,152,219]},alternateRowStyles:{fillColor:[240,240,240]},margin:{horizontal:10},didParseCell:function(Ie){if(Ie.section==="body"&&Ie.column.index===3){const Y=Ie.cell.raw;typeof Y=="string"&&Y.startsWith("INR ")&&(Ie.cell.text=[Y])}}});else{let Ie=40;ue[0].forEach((Y,pe)=>{Q.text(Y,15+pe*35,Ie)}),Ie+=10,be.forEach(Y=>{Y.forEach((pe,Ne)=>{Q.text(String(pe),15+Ne*35,Ie)}),Ie+=10,Ie>280&&(Q.addPage(),Ie=20)})}}else Q.text("No expense data available for this period.",20,40);Q.save(`expenses_${o}.pdf`),console.log("PDF export completed successfully")}catch(Q){console.error("Error generating PDF:",Q),alert("Failed to generate PDF. Please check console for details.")}},ve=()=>{const Q=e.find(we=>we.key===o)||{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},Te=new Date(o);Te.setMonth(Te.getMonth()-1);const ue=`${Te.getFullYear()}-${String(Te.getMonth()+1).padStart(2,"0")}`,be=e.find(we=>we.key===ue)||{total:0},Y=[{name:"Staff Salary",amount:Q.staffSalary,icon:""},{name:"Room Rent",amount:Q.roomRent,icon:""},{name:"Electricity Bill",amount:Q.electricityBill,icon:""},{name:"Internet Bill",amount:Q.internetBill,icon:""},{name:"Other Expenses",amount:Q.otherExpenses,icon:""}].reduce((we,Ce)=>Ce.amount>we.amount?Ce:we,{name:"None",amount:0,icon:""}),pe=new Date(parseInt(o.split("-")[0]),parseInt(o.split("-")[1]),0).getDate(),Ne=Q.total/pe,je=H||Q.total*1.1;return{totalExpenditure:Q.total,thisMonthSpend:Q.total,highestCategory:Y,avgDailySpend:Ne,trend:Q.total>be.total?"up":"down",budgetLimit:je,prevMonthTotal:be.total}},me=x.filter(Q=>{const Te=new Date(Q.date);return!(`${Te.getFullYear()}-${String(Te.getMonth()+1).padStart(2,"0")}`!==o||d&&!Q.name.toLowerCase().includes(d.toLowerCase())||p!=="all"&&Q.category!==p||w!=="all"&&Q.paymentMode!==w)}).sort((Q,Te)=>new Date(Te.date)-new Date(Q.date)),Le=()=>{const Q=e.find(be=>be.key===o)||{roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0,total:0},Te=Q.total||1,ue=[{name:"Staff Salary",amount:Q.staffSalary,percentage:(Q.staffSalary/Te*100).toFixed(1),color:"var(--info-color)",icon:""},{name:"Room Rent",amount:Q.roomRent,percentage:(Q.roomRent/Te*100).toFixed(1),color:"var(--success-color)",icon:""},{name:"Electricity Bill",amount:Q.electricityBill||0,percentage:((Q.electricityBill||0)/Te*100).toFixed(1),color:"var(--warning-color)",icon:""},{name:"Internet Bill",amount:Q.internetBill||0,percentage:((Q.internetBill||0)/Te*100).toFixed(1),color:"var(--purple-color)",icon:""},{name:"Miscellaneous",amount:Q.otherExpenses,percentage:(Q.otherExpenses/Te*100).toFixed(1),color:"var(--text-secondary)",icon:""}];if(Q.staffSalary>0){const be=ue.findIndex(Ie=>Ie.name==="Staff Salary");ue[be].amount=Q.staffSalary,ue[be].percentage=(Q.staffSalary/Te*100).toFixed(1)}if(Q.roomRent>0){const be=ue.findIndex(Ie=>Ie.name==="Room Rent");ue[be].amount=Q.roomRent,ue[be].percentage=(Q.roomRent/Te*100).toFixed(1)}if(Q.electricityBill>0){const be=ue.findIndex(Ie=>Ie.name==="Electricity Bill");ue[be].amount=Q.electricityBill,ue[be].percentage=(Q.electricityBill/Te*100).toFixed(1)}if(Q.internetBill>0){const be=ue.findIndex(Ie=>Ie.name==="Internet Bill");ue[be].amount=Q.internetBill,ue[be].percentage=(Q.internetBill/Te*100).toFixed(1)}if(Q.otherExpenses>0){const be=ue.findIndex(Ie=>Ie.name==="Miscellaneous");ue[be].amount=Q.otherExpenses,ue[be].percentage=(Q.otherExpenses/Te*100).toFixed(1)}return ue},xe=ve(),J=Le(),M=e.find(Q=>Q.key===o),G=M?M.label:new Date(o+"-01").toLocaleString("default",{month:"long",year:"numeric"}),B=new Date(parseInt(o.split("-")[0]),parseInt(o.split("-")[1]),0).getDate(),ae=()=>{const Q=document.querySelector(".section:last-child");Q&&Q.scrollIntoView({behavior:"smooth"}),C(!0)},ge=()=>{},_e=Q=>{const ue={"Staff Salary":"salary","Room Rent":"rent","Electricity Bill":"electricity","Internet Bill":"internet","Other Expenses":"miscellaneous"}[Q];ue&&(m(ue),z(Q))},Ve=()=>{q(!0)},Me=Q=>{const ue={"Staff Salary":"salary","Room Rent":"rent","Electricity Bill":"electricity","Internet Bill":"internet",Miscellaneous:"miscellaneous"}[Q];ue&&(m(ue),z(Q),setTimeout(()=>{const be=document.querySelector(".section:last-child");be&&be.scrollIntoView({behavior:"smooth",block:"start"})},100))};return r?l.jsx(eo,{children:l.jsxs("div",{className:"expenditure-container",children:[l.jsxs("div",{className:"expenditure-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("h1",{children:"Expenditure"}),l.jsx("p",{className:"subtitle",children:"Track and manage academy expenses"})]}),l.jsx("div",{className:"header-right",children:l.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-form"),children:"+ Add Expense"})})]}),l.jsxs("div",{className:"month-selector",children:[l.jsx("label",{htmlFor:"month-select",children:"Select Month:"}),l.jsx("input",{type:"month",id:"month-select",value:o,onChange:Q=>u(Q.target.value),className:"month-input"})]})]}),l.jsx("div",{className:"kpi-skeleton-grid",children:[1,2,3,4].map(Q=>l.jsx("div",{className:"kpi-card skeleton-card"},Q))}),l.jsxs("div",{className:"distribution-skeleton",children:[l.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(Q=>l.jsx("div",{className:"skeleton-bar"},Q))]}),l.jsxs("div",{className:"table-skeleton",children:[l.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(Q=>l.jsx("div",{className:"skeleton-row"},Q))]})]})}):l.jsx(eo,{children:l.jsxs("div",{className:"expenditure-container",children:[ee()&&l.jsx("div",{className:"budget-exceeded-notification",children:l.jsxs("div",{className:"notification-content",children:[l.jsx("span",{className:"notification-icon",children:""}),l.jsx("span",{className:"notification-message",children:"Your spending has crossed the set monthly budget. Review high-expense categories and adjust allocations to maintain financial control."})]})}),l.jsxs("div",{className:"expenditure-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-left",children:[l.jsx("h1",{children:"Expenditure"}),l.jsx("p",{className:"subtitle",children:"Track and manage academy expenses"})]}),l.jsx("div",{className:"header-right",children:l.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-form"),children:"+ Add Expense"})})]}),l.jsxs("div",{className:"month-selector",children:[l.jsx("label",{htmlFor:"month-select",children:"Select Month:"}),l.jsx("input",{type:"month",id:"month-select",value:o,onChange:Q=>u(Q.target.value),className:"month-input"})]})]}),l.jsxs("div",{className:"kpi-grid",children:[l.jsxs("div",{className:"kpi-card total-expenditure",onClick:ae,style:{cursor:"pointer"},children:[l.jsxs("div",{className:"kpi-header",children:[l.jsx("span",{className:"kpi-icon",children:""}),l.jsx("span",{className:"kpi-title",children:"Total Expenditure"})]}),l.jsxs("div",{className:"kpi-value",children:["",xe.totalExpenditure.toLocaleString()]}),l.jsx("div",{className:"helper-text",children:"Overall spending for the month"}),l.jsx("div",{className:`kpi-context ${xe.trend}`,children:xe.prevMonthTotal>0?l.jsx(l.Fragment,{children:xe.trend==="up"?l.jsxs("span",{style:{color:"var(--danger-color)"},children:[" ",(Math.abs(xe.totalExpenditure-xe.prevMonthTotal)/xe.prevMonthTotal*100).toFixed(1),"% vs last month"]}):l.jsxs("span",{style:{color:"var(--success-color)"},children:[" ",(Math.abs(xe.totalExpenditure-xe.prevMonthTotal)/xe.prevMonthTotal*100).toFixed(1),"% vs last month"]})}):"First month recorded"})]}),l.jsxs("div",{className:"kpi-card this-month-spend",onClick:ge,style:{cursor:"pointer"},children:[l.jsxs("div",{className:"kpi-header",children:[l.jsx("span",{className:"kpi-icon",children:""}),l.jsx("span",{className:"kpi-title",children:"This Month Spend"})]}),l.jsxs("div",{className:"kpi-value",children:["",xe.thisMonthSpend.toLocaleString()]}),l.jsx("div",{className:"helper-text",children:"Budget utilization tracking"}),l.jsxs("div",{className:"kpi-context",children:["Budget limit: ",l.jsxs("a",{href:"/budget-management",className:"budget-link",children:["",xe.budgetLimit.toLocaleString(void 0,{maximumFractionDigits:0})]})]}),l.jsx("div",{className:"budget-bar-container",children:l.jsx("div",{className:"budget-bar",style:{width:`${Math.min(xe.thisMonthSpend/xe.budgetLimit*100,100)}%`,backgroundColor:xe.thisMonthSpend/xe.budgetLimit*100<70?"var(--success-color)":xe.thisMonthSpend/xe.budgetLimit*100<=90?"var(--warning-color)":"var(--danger-color)"}})}),l.jsxs("div",{className:"budget-percentage",children:[isNaN(xe.thisMonthSpend/xe.budgetLimit*100)?"0":Math.min(xe.thisMonthSpend/xe.budgetLimit*100,100).toFixed(1),"% of budget used",H&&xe.thisMonthSpend/H*100>=90&&xe.thisMonthSpend/H*100<100&&l.jsx("span",{className:"budget-warning",children:"  Approaching budget limit"}),H&&xe.thisMonthSpend/H*100>=100&&l.jsx("span",{className:"budget-exceeded",children:"  Budget exceeded"})]})]}),l.jsxs("div",{className:"kpi-card highest-category",onClick:()=>_e(xe.highestCategory.name),style:{cursor:"pointer"},children:[l.jsxs("div",{className:"kpi-header",children:[l.jsx("span",{className:"kpi-icon",children:xe.highestCategory.icon}),l.jsx("span",{className:"kpi-title",children:"Highest Category"})]}),l.jsx("div",{className:"kpi-value",children:xe.highestCategory.name}),l.jsx("div",{className:"helper-text",children:"Largest expense category"}),l.jsxs("div",{className:"kpi-context",children:["",xe.highestCategory.amount.toLocaleString()," spent"]})]}),l.jsxs("div",{className:"kpi-card avg-daily-spend",onClick:Ve,style:{cursor:"pointer"},children:[l.jsxs("div",{className:"kpi-header",children:[l.jsx("span",{className:"kpi-icon",children:""}),l.jsx("span",{className:"kpi-title",children:"Avg. Daily Spend"})]}),l.jsxs("div",{className:"kpi-value",children:["",xe.avgDailySpend.toFixed(2)]}),l.jsx("div",{className:"helper-text",children:"Daily spending average"}),l.jsxs("div",{className:"kpi-context",children:[B," days in month"]})]})]}),l.jsxs("div",{className:"section",children:[l.jsx("h2",{className:"section-title",children:"Expense Distribution"}),l.jsx("div",{className:"distribution-container",children:J.map((Q,Te)=>l.jsxs("div",{className:`distribution-item ${$===Q.name?"highlighted":""}`,onClick:()=>Me(Q.name),style:{cursor:"pointer"},children:[l.jsxs("div",{className:"distribution-header",children:[l.jsx("span",{className:"distribution-icon",children:Q.icon}),l.jsx("span",{className:"distribution-name",children:Q.name}),l.jsxs("span",{className:"distribution-amount",children:["",Q.amount.toLocaleString()]})]}),l.jsx("div",{className:"distribution-bar-container",children:l.jsx("div",{className:"distribution-bar animate",style:{"--target-width":`${Q.percentage}%`,backgroundColor:`var(${Q.color})`,animationDelay:`${Te*.1}s`},children:l.jsxs("span",{className:"distribution-bar-percentage",children:[Q.percentage,"%"]})})})]},Te))})]}),l.jsx("div",{className:"section",children:l.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-trend"),children:" View Expense Trend Analysis"})}),l.jsxs("div",{className:"section",children:[l.jsx("div",{className:"table-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"section-title",children:"Expense Records"}),l.jsxs("p",{className:"subtitle",children:["Detailed view of all expenses for ",G]})]}),l.jsxs("div",{className:"filter-controls",children:[l.jsx("input",{type:"text",placeholder:"Search by name, category, date, amount, payment mode...",value:d,onChange:Q=>h(Q.target.value),className:"search-input"}),l.jsxs("select",{value:p,onChange:Q=>m(Q.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All Categories"}),l.jsx("option",{value:"rent",children:"Room Rent"}),l.jsx("option",{value:"salary",children:"Staff Salary"}),l.jsx("option",{value:"electricity",children:"Electricity Bill"}),l.jsx("option",{value:"internet",children:"Internet Bill"}),l.jsx("option",{value:"miscellaneous",children:"Miscellaneous"})]}),l.jsxs("select",{value:w,onChange:Q=>_(Q.target.value),className:"filter-select",children:[l.jsx("option",{value:"all",children:"All Payment Modes"}),l.jsx("option",{value:"Cash",children:"Cash"}),l.jsx("option",{value:"Bank",children:"Bank Transfer"}),l.jsx("option",{value:"Online",children:"Online Payment"})]}),l.jsxs("div",{className:"export-dropdown",children:[l.jsx("button",{className:"export-btn",onClick:()=>ce(!oe),children:"Export "}),oe&&l.jsxs("div",{className:"export-dropdown-menu",children:[l.jsx("button",{className:"export-option",onClick:async()=>{await ye(),ce(!1)},children:"Export as CSV"}),l.jsx("button",{className:"export-option",onClick:async()=>{await le(),ce(!1)},children:"Export as PDF"})]})]})]})]})}),me.length>0?l.jsx("div",{className:"table-container",children:l.jsxs("table",{className:"expenses-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"Date"}),l.jsx("th",{children:"Expense Name"}),l.jsx("th",{children:"Category"}),l.jsx("th",{children:"Amount"}),l.jsx("th",{children:"Payment Mode"}),l.jsx("th",{children:"Added By"}),l.jsx("th",{children:"Actions"})]})}),l.jsx("tbody",{children:me.map(Q=>l.jsxs("tr",{children:[l.jsx("td",{children:T(Q.date)}),l.jsx("td",{children:Q.name}),l.jsx("td",{children:l.jsxs("span",{className:`category-badge category-${Q.category}`,children:[F(Q.category)," ",L(Q.category)]})}),l.jsxs("td",{className:"amount",children:["",Q.amount.toLocaleString()]}),l.jsx("td",{children:Q.paymentMode}),l.jsx("td",{children:Q.addedBy}),l.jsxs("td",{children:[l.jsx("button",{className:"action-btn view-btn",children:"View"}),l.jsx("button",{className:"action-btn edit-btn",children:"Edit"})]})]},Q.id))})]})}):l.jsxs("div",{className:"empty-state",children:[l.jsx("div",{className:"empty-icon",children:""}),l.jsx("h3",{children:"No Expenses Found"}),l.jsx("p",{children:"No expenses recorded for the selected month and filters."}),l.jsx("button",{className:"primary-btn",onClick:()=>n("/expense-form"),children:"Add Expense"})]})]}),R&&l.jsx("div",{className:"modal-overlay",onClick:()=>C(!1),children:l.jsxs("div",{className:"modal-content",onClick:Q=>Q.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Total Monthly Expenditure Breakdown"}),l.jsx("button",{className:"close-btn",onClick:()=>C(!1),children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("p",{children:["Total expenditure for ",G,": ",xe.totalExpenditure.toLocaleString()]}),l.jsx("div",{className:"breakdown-list",children:J.map((Q,Te)=>l.jsxs("div",{className:"breakdown-item",children:[l.jsxs("span",{className:"breakdown-label",children:[l.jsx("span",{className:"breakdown-icon",children:Q.icon}),Q.name]}),l.jsxs("span",{className:"breakdown-value",children:["",Q.amount.toLocaleString()," (",Q.percentage,"%)"]})]},Te))})]})]})}),k&&l.jsx("div",{className:"modal-overlay",onClick:()=>q(!1),children:l.jsxs("div",{className:"modal-content",onClick:Q=>Q.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Average Daily Spend Calculation"}),l.jsx("button",{className:"close-btn",onClick:()=>q(!1),children:""})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"calculation-details",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Formula:"})," Total Spend / Number of Days in Month"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Total Spend:"})," ",xe.totalExpenditure.toLocaleString()]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Number of Days:"})," ",B," days"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Calculation:"})," ",xe.totalExpenditure.toLocaleString()," / ",B," days"]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Result:"})," ",xe.avgDailySpend.toFixed(2)," per day"]})]})})]})})]})})},qM=()=>{const n=Vr(),[e,t]=X.useState({name:"Admin User",email:"admin@vpa-fees.com",phone:"",firmName:"",role:"Administrator",lastLogin:"",avatar:"AU",department:"Finance Department",joinDate:"",location:"Mumbai, India",employeeId:"EMP-001245"}),[r,i]=X.useState(null),[o,u]=X.useState([{label:"Students Managed",value:"0",icon:"",color:"var(--info-color)"},{label:"Payments Processed",value:"0",icon:"",color:"var(--success-color)"},{label:"Collections",value:"0",icon:"",color:"var(--warning-color)"},{label:"Reports Generated",value:"0",icon:"",color:"var(--danger-color)"}]),[d,h]=X.useState(!0),[p,m]=X.useState({notifications:!0,emailAlerts:!0,darkMode:!1,twoFactorAuth:!0}),[w,_]=X.useState({accuracy:0,responseTime:"0s",uptime:"0%",satisfaction:0}),[x,A]=X.useState([]),[R,C]=X.useState(null),[k,q]=X.useState(!1);X.useEffect(()=>{const V=pn.onAuthStateChanged(T=>{T?(i(T),t(F=>({...F,name:T.displayName||T.email?.split("@")[0]||"Admin User",email:T.email||"admin@vpa-fees.com",phone:T.phoneNumber||"",firmName:T.providerData?.[0]?.displayName?.includes("@")?"":T.providerData?.[0]?.displayName||"",avatar:T.displayName?T.displayName.substring(0,2).toUpperCase():T.email?T.email.substring(0,2).toUpperCase():"AU",lastLogin:new Date(T.metadata.lastSignInTime).toLocaleString()||new Date().toLocaleString(),joinDate:T.metadata.creationTime?new Date(T.metadata.creationTime).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"March 1, 2020"}))):i(null)});return()=>V()},[]),X.useEffect(()=>{let V=!0;const T=async()=>{try{h(!0);try{const G=await FL();G&&V&&t(B=>({...B,phone:G.phone||B.phone,firmName:G.firmName||B.firmName}))}catch(G){console.error("Error fetching user profile:",G)}const[L,ee]=await Promise.all([Mg(),lp()]);if(!V)return;const ye=L.length,le=ee.length,ve=ee.filter(G=>G.status==="paid").reduce((G,B)=>G+(parseFloat(B.amount)||0),0),me=new Set;ee.forEach(G=>{if(G.createdAt){let B;if(G.createdAt&&typeof G.createdAt.toDate=="function"?B=G.createdAt.toDate():typeof G.createdAt=="string"?B=new Date(G.createdAt):G.createdAt instanceof Date&&(B=G.createdAt),B&&!isNaN(B.getTime())){const ae=`${B.getFullYear()}-${B.getMonth()}`;me.add(ae)}}});const Le=me.size,xe=[{label:"Students Managed",value:ye.toLocaleString(),icon:"",color:"var(--info-color)",animate:!0},{label:"Payments Processed",value:le.toLocaleString(),icon:"",color:"var(--success-color)",animate:!0},{label:"Collections",value:`${ve.toLocaleString()}`,icon:"",color:"var(--warning-color)",animate:!0},{label:"Reports Generated",value:Le.toLocaleString(),icon:"",color:"var(--danger-color)",animate:!0}];u(xe);const J=$(L,ee);A(J);const M=oe(L,ee,J);_(M)}catch(L){console.error("Error fetching profile data:",L),V&&(u([{label:"Students Managed",value:"0",icon:"",color:"var(--info-color)"},{label:"Payments Processed",value:"0",icon:"",color:"var(--success-color)"},{label:"Collections",value:"0",icon:"",color:"var(--warning-color)"},{label:"Reports Generated",value:"0",icon:"",color:"var(--danger-color)"}]),_({accuracy:0,responseTime:"0s",uptime:"0%",satisfaction:0}),A([{id:1,action:"Processed payment",target:"STD001 - John Doe",time:"2 hours ago",status:"success"},{id:2,action:"Generated report",target:"Monthly Collection Report",time:"1 day ago",status:"completed"},{id:3,action:"Updated student record",target:"STD045 - Jane Smith",time:"2 days ago",status:"updated"},{id:4,action:"Resolved issue",target:"Payment discrepancy",time:"3 days ago",status:"resolved"}]))}finally{V&&h(!1)}};T();const F=()=>{V&&T()};return window.addEventListener("studentsUpdated",F),window.addEventListener("paymentAdded",F),window.addEventListener("paymentRecorded",F),window.addEventListener("paymentUpdated",F),window.addEventListener("dashboardRefresh",F),window.addEventListener("paymentsRefresh",F),()=>{V=!1,window.removeEventListener("studentsUpdated",F),window.removeEventListener("paymentAdded",F),window.removeEventListener("paymentRecorded",F),window.removeEventListener("paymentUpdated",F),window.removeEventListener("dashboardRefresh",F),window.removeEventListener("paymentsRefresh",F)}},[]);const $=(V,T)=>{const F=[];T.forEach((ee,ye)=>{const le=V.find(Le=>Le.studentId===ee.studentId)||{},ve=le.name||"Unknown Student",me=le.studentId||ee.studentId||"N/A";F.push({id:`payment-${ee.id||ye}`,action:"Processed payment for",target:`${me} - ${ve}`,time:ee.createdAt,status:"success",type:"payment"})}),V.forEach((ee,ye)=>{F.push({id:`student-${ee.id||ye}`,action:"Added student record",target:`${ee.studentId} - ${ee.name}`,time:ee.createdAt,status:"completed",type:"student"})}),F.sort((ee,ye)=>{const le=ee.time?new Date(ee.time):new Date(0),ve=ye.time?new Date(ye.time):new Date(0);return ee.time&&typeof ee.time.toDate=="function"&&le.setTime(ee.time.toDate().getTime()),ye.time&&typeof ye.time.toDate=="function"&&ve.setTime(ye.time.toDate().getTime()),ve-le});const L=F.slice(0,4);for(L.forEach(ee=>{ee.time=z(ee.time)});L.length<4;){const ee=[{id:"fallback-1",action:"System maintenance",target:"Database optimization",time:"1 hour ago",status:"completed"},{id:"fallback-2",action:"Security update",target:"User authentication",time:"3 hours ago",status:"success"},{id:"fallback-3",action:"Feature enhancement",target:"Payment processing",time:"1 day ago",status:"updated"},{id:"fallback-4",action:"Bug fix",target:"Report generation",time:"2 days ago",status:"resolved"}];L.push(ee[L.length])}return L},z=V=>{if(!V)return"Unknown time";let T;if(V&&typeof V.toDate=="function"?T=V.toDate():typeof V=="string"?T=new Date(V):V instanceof Date?T=V:typeof V=="number"&&(T=new Date(V)),!T||isNaN(T.getTime()))return"Unknown time";const L=Math.floor((new Date-T)/1e3);if(L<60)return"Just now";if(L<3600){const ee=Math.floor(L/60);return`${ee} minute${ee>1?"s":""} ago`}else if(L<86400){const ee=Math.floor(L/3600);return`${ee} hour${ee>1?"s":""} ago`}else if(L<2592e3){const ee=Math.floor(L/86400);return`${ee} day${ee>1?"s":""} ago`}else return T.toLocaleDateString()},oe=(V,T,F)=>{const L=T.length,ee=T.filter(ae=>ae.status==="paid").length,ye=L>0?Math.round(ee/L*1e3)/10:0;let le=0,ve=0;T.forEach(ae=>{if(ae.createdAt&&ae.status==="paid"){let ge;if(ae.createdAt&&typeof ae.createdAt.toDate=="function"?ge=ae.createdAt.toDate():typeof ae.createdAt=="string"?ge=new Date(ae.createdAt):ae.createdAt instanceof Date&&(ge=ae.createdAt),ge&&!isNaN(ge.getTime())){const _e=(Date.now()-ge.getTime())/1e3;le+=_e,ve++}}});const me=ve>0?le/ve:0,Le=me<60?`${Math.round(me)}s`:`${Math.round(me/60)}m`,xe=new Date;xe.setDate(xe.getDate()-30);let J=new Set;F.forEach(ae=>{const ge=ae.time;ge&&!ge.includes("Unknown")&&J.add("active")});const M=V.length+T.length>0?100:0,G=M>0?`${Math.min(99.9,95+M/100*5).toFixed(1)}%`:"0%",B=Math.min(5,ye/20+(me<3600?1:0));return{accuracy:ye,responseTime:Le,uptime:G,satisfaction:B.toFixed(1)}},ce=V=>{if(V==="darkMode"){const T=!p.darkMode;m(F=>({...F,[V]:T})),T?(document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("darkMode","true")):(document.documentElement.removeAttribute("data-theme"),localStorage.setItem("darkMode","false"))}else m(T=>({...T,[V]:!T[V]}));window.dispatchEvent(new CustomEvent("showNotification",{detail:{message:`${V.replace(/([A-Z])/g," $1").replace(/^./,T=>T.toUpperCase())} setting ${p[V]?"disabled":"enabled"}`,type:"success"}}))};X.useEffect(()=>{localStorage.getItem("darkMode")==="true"&&(m(L=>({...L,darkMode:!0})),document.documentElement.setAttribute("data-theme","dark"));const T=localStorage.getItem("notificationsEnabled"),F=localStorage.getItem("emailAlertsEnabled");T!==null&&m(L=>({...L,notifications:T==="true"})),F!==null&&m(L=>({...L,emailAlerts:F==="true"}))},[]),X.useEffect(()=>{localStorage.setItem("notificationsEnabled",p.notifications.toString()),localStorage.setItem("emailAlertsEnabled",p.emailAlerts.toString())},[p.notifications,p.emailAlerts]),X.useEffect(()=>{const V=F=>{const{message:L,type:ee="info"}=F.detail;if(p.notifications){const ye=document.createElement("div");ye.className=`app-notification ${ee}`,ye.textContent=L,Object.assign(ye.style,{position:"fixed",top:"20px",right:"20px",backgroundColor:ee==="error"?"var(--danger-color)":ee==="success"?"var(--success-color)":"var(--info-color)",color:"white",padding:"15px 20px",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:"10000",animation:"slideIn 0.3s ease-out",fontWeight:"500",maxWidth:"300px",wordWrap:"break-word"}),document.body.appendChild(ye),setTimeout(()=>{ye.parentNode&&ye.parentNode.removeChild(ye)},3e3)}p.emailAlerts&&console.log(`[Email Alert] ${L}`)};window.addEventListener("showNotification",V);const T=document.createElement("style");return T.textContent=`
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
    `,document.head.appendChild(T),()=>{window.removeEventListener("showNotification",V),document.head.contains(T)&&document.head.removeChild(T)}},[p.notifications,p.emailAlerts]);const H=async()=>{if(window.confirm("Are you sure you want to logout?"))try{await ep(pn),localStorage.removeItem("isLoggedIn"),window.location.reload()}catch(V){console.error("Logout error:",V),alert("Error logging out. Please try again.")}},D=()=>{n("/feedback-support")},I=V=>{C(R===V?null:V)};return d?l.jsx(eo,{children:l.jsxs("div",{className:"profile-container",children:[l.jsx("div",{className:"profile-header",children:l.jsxs("div",{className:"header-left",children:[l.jsx("div",{className:"skeleton-header",style:{width:"200px",height:"40px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"400px",height:"24px"}})]})}),l.jsxs("div",{className:"profile-layout",children:[l.jsxs("div",{className:"profile-column",children:[l.jsxs("div",{className:"profile-card",children:[l.jsx("div",{className:"profile-avatar",style:{justifyContent:"center",alignItems:"center"},children:l.jsx("div",{className:"skeleton-card",style:{width:"120px",height:"120px",borderRadius:"50%"}})}),l.jsxs("div",{className:"profile-info",children:[l.jsx("div",{className:"skeleton-header",style:{width:"150px",height:"30px",marginBottom:"15px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"100px",height:"20px",marginBottom:"15px"}}),l.jsxs("div",{className:"profile-contact",children:[l.jsxs("div",{className:"contact-item",children:[l.jsx("div",{className:"skeleton-bar",style:{width:"120px",height:"16px",marginBottom:"5px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"80px",height:"16px"}})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("div",{className:"skeleton-bar",style:{width:"80px",height:"16px",marginBottom:"5px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"120px",height:"16px"}})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("div",{className:"skeleton-bar",style:{width:"100px",height:"16px",marginBottom:"5px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"100px",height:"16px"}})]})]})]})]}),l.jsxs("div",{className:"performance-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"skeleton-header",style:{width:"180px",height:"28px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"200px",height:"16px"}})]}),l.jsx("div",{className:"metrics-grid",children:[1,2,3,4].map(V=>l.jsxs("div",{className:"metric-card",children:[l.jsx("div",{className:"skeleton-header",style:{width:"60px",height:"24px",marginBottom:"5px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"40px",height:"20px"}})]},V))})]})]}),l.jsxs("div",{className:"profile-column",children:[l.jsxs("div",{className:"stats-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"skeleton-header",style:{width:"200px",height:"28px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"220px",height:"16px"}})]}),l.jsx("div",{className:"stats-grid",children:[1,2,3,4].map(V=>l.jsx("div",{className:"skeleton-card",style:{height:"100px"}},V))})]}),l.jsxs("div",{className:"activity-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"skeleton-header",style:{width:"180px",height:"28px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"200px",height:"16px"}})]}),l.jsx("div",{className:"activity-list",children:[1,2,3,4].map(V=>l.jsx("div",{className:"skeleton-row",style:{height:"80px",marginBottom:"10px"}},V))})]}),l.jsxs("div",{className:"settings-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("div",{className:"skeleton-header",style:{width:"180px",height:"28px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"200px",height:"16px"}})]}),l.jsx("div",{className:"settings-list",children:[1,2,3,4].map(V=>l.jsx("div",{className:"setting-item",children:l.jsx("div",{className:"skeleton-bar",style:{width:"200px",height:"40px",marginBottom:"10px"}})},V))})]})]})]}),l.jsx("div",{className:"profile-actions",children:[1,2,3].map(V=>l.jsx("div",{className:"skeleton-card",style:{width:"120px",height:"40px",borderRadius:"8px",margin:"0 5px"}},V))})]})}):l.jsx(eo,{children:l.jsxs("div",{className:"profile-container",children:[l.jsx("div",{className:"profile-header",children:l.jsxs("div",{className:"header-left",children:[l.jsx("h1",{children:"My Profile"}),l.jsx("p",{className:"header-subtitle",children:"Manage your account settings and preferences"})]})}),l.jsxs("div",{className:"profile-layout",children:[l.jsxs("div",{className:"profile-column",children:[l.jsxs("div",{className:"profile-card",children:[l.jsx("div",{className:"profile-avatar",children:l.jsx("span",{className:"avatar-text",children:e.avatar})}),l.jsxs("div",{className:"profile-info",children:[l.jsx("h2",{children:e.name}),l.jsx("p",{className:"profile-role",children:e.role}),l.jsxs("div",{className:"profile-contact",children:[l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-label",children:"Employee ID"}),l.jsx("span",{className:"contact-value",children:e.employeeId})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-label",children:"Email"}),l.jsx("span",{className:"contact-value",children:e.email})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-label",children:"Phone"}),l.jsx("span",{className:"contact-value",children:e.phone||"Not provided"})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-label",children:"Firm/Organization"}),l.jsx("span",{className:"contact-value",children:e.firmName||"Not provided"})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-label",children:"Department"}),l.jsx("span",{className:"contact-value",children:e.department})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-label",children:"Location"}),l.jsx("span",{className:"contact-value",children:e.location})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("span",{className:"contact-label",children:"Joined"}),l.jsx("span",{className:"contact-value",children:e.joinDate})]})]})]}),l.jsxs("div",{className:"profile-status",children:[l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"status-label",children:"Last Login"}),l.jsx("span",{className:"status-value",children:e.lastLogin})]}),l.jsxs("div",{className:"status-item",children:[l.jsx("span",{className:"status-label",children:"Account Status"}),l.jsx("span",{className:"status-value active",children:"Active"})]})]})]}),l.jsxs("div",{className:"metrics-section",children:[l.jsx("h3",{children:"Performance Metrics"}),l.jsxs("div",{className:"metrics-grid",children:[l.jsxs("div",{className:"metric-card",children:[l.jsxs("div",{className:"metric-value",children:[w.accuracy,"%"]}),l.jsx("div",{className:"metric-label",children:"Accuracy"})]}),l.jsxs("div",{className:"metric-card",children:[l.jsx("div",{className:"metric-value",children:w.responseTime}),l.jsx("div",{className:"metric-label",children:"Avg. Response"})]}),l.jsxs("div",{className:"metric-card",children:[l.jsxs("div",{className:"metric-value",children:[w.uptime,"%"]}),l.jsx("div",{className:"metric-label",children:"Uptime"})]}),l.jsxs("div",{className:"metric-card",children:[l.jsxs("div",{className:"metric-value",children:[w.satisfaction,"/5"]}),l.jsx("div",{className:"metric-label",children:"Satisfaction"})]})]})]})]}),l.jsxs("div",{className:"profile-column",children:[l.jsxs("div",{className:"stats-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"Statistics Overview"}),l.jsx("span",{className:"section-subtitle",children:"Your contribution metrics"})]}),l.jsx("div",{className:"stats-grid",children:o.map((V,T)=>l.jsx(s8,{title:V.label,value:V.value,icon:V.icon,color:V.color,animate:V.animate},T))})]}),l.jsxs("div",{className:"activity-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"Recent Activity"}),l.jsx("span",{className:"section-subtitle",children:"Your latest actions"})]}),l.jsx("div",{className:"activity-list",children:x.length>0?x.map(V=>l.jsxs("div",{className:"activity-item",children:[l.jsxs("div",{className:"activity-icon",children:[V.status==="success"&&"",V.status==="completed"&&"",V.status==="updated"&&"",V.status==="resolved"&&""]}),l.jsxs("div",{className:"activity-content",children:[l.jsxs("div",{className:"activity-action",children:[l.jsx("span",{className:"action-text",children:V.action}),l.jsx("span",{className:"action-target",children:V.target})]}),l.jsx("div",{className:"activity-time",children:V.time})]})]},V.id)):l.jsx("div",{className:"no-activity",children:l.jsx("p",{children:"No recent activity to display"})})})]}),l.jsxs("div",{className:"settings-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{children:"Account Settings"}),l.jsx("span",{className:"section-subtitle",children:"Manage your preferences"})]}),l.jsxs("div",{className:"settings-list",children:[l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("span",{className:"setting-label",children:"Notifications"}),l.jsx("span",{className:"setting-desc",children:"Enable push notifications"})]}),l.jsxs("label",{className:"switch",children:[l.jsx("input",{type:"checkbox",checked:p.notifications,onChange:()=>ce("notifications")}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("span",{className:"setting-label",children:"Email Alerts"}),l.jsx("span",{className:"setting-desc",children:"Receive email notifications"})]}),l.jsxs("label",{className:"switch",children:[l.jsx("input",{type:"checkbox",checked:p.emailAlerts,onChange:()=>ce("emailAlerts")}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("span",{className:"setting-label",children:"Dark Mode"}),l.jsx("span",{className:"setting-desc",children:"Enable dark theme"})]}),l.jsxs("label",{className:"switch",children:[l.jsx("input",{type:"checkbox",checked:p.darkMode,onChange:()=>ce("darkMode")}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("span",{className:"setting-label",children:"Two-Factor Authentication"}),l.jsx("span",{className:"setting-desc",children:"Add extra security to your account"})]}),l.jsxs("label",{className:"switch",children:[l.jsx("input",{type:"checkbox",checked:p.twoFactorAuth,onChange:()=>ce("twoFactorAuth")}),l.jsx("span",{className:"slider"})]})]})]})]})]})]}),l.jsxs("div",{className:"profile-actions",children:[l.jsx("button",{className:"action-btn contact-btn",onClick:D,children:"Contact Support"}),l.jsx("button",{className:"action-btn logout-btn",onClick:H,children:"Logout"})]}),l.jsxs("div",{className:"faq-section",children:[l.jsx("h3",{children:"Frequently Asked Questions"}),l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===0?"open":""}`,onClick:()=>I(0),children:["How do I update my profile information?",l.jsx("span",{className:"faq-toggle",children:R===0?"":"+"})]}),R===0&&l.jsx("div",{className:"faq-answer",children:"Your profile information is automatically synced with your Google account. Update your details there to reflect changes here."})]}),l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===1?"open":""}`,onClick:()=>I(1),children:["How can I reset my password?",l.jsx("span",{className:"faq-toggle",children:R===1?"":"+"})]}),R===1&&l.jsx("div",{className:"faq-answer",children:'Click on the login page and select "Forgot Password" to reset your password via email.'})]}),k&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===2?"open":""}`,onClick:()=>I(2),children:["Can I export my data?",l.jsx("span",{className:"faq-toggle",children:R===2?"":"+"})]}),R===2&&l.jsx("div",{className:"faq-answer",children:'Yes, you can export your data from the dashboard by clicking the "Export" button in the top-right corner.'})]}),l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===3?"open":""}`,onClick:()=>I(3),children:["How do I add new students?",l.jsx("span",{className:"faq-toggle",children:R===3?"":"+"})]}),R===3&&l.jsx("div",{className:"faq-answer",children:'Navigate to the Students section and click the "Add Student" button to register new students.'})]}),l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===4?"open":""}`,onClick:()=>I(4),children:["How do I record fee payments?",l.jsx("span",{className:"faq-toggle",children:R===4?"":"+"})]}),R===4&&l.jsx("div",{className:"faq-answer",children:'Go to the Fees section and click "Add Payment" to record new fee payments for students.'})]}),l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===5?"open":""}`,onClick:()=>I(5),children:["Where can I view reports?",l.jsx("span",{className:"faq-toggle",children:R===5?"":"+"})]}),R===5&&l.jsx("div",{className:"faq-answer",children:"Access reports through the Dashboard section where you'll find various analytics and summaries."})]}),l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===6?"open":""}`,onClick:()=>I(6),children:["How do I contact support?",l.jsx("span",{className:"faq-toggle",children:R===6?"":"+"})]}),R===6&&l.jsx("div",{className:"faq-answer",children:'Click the "Contact Support" button below or use the feedback form in the navigation menu.'})]}),l.jsxs("div",{className:"faq-item",children:[l.jsxs("div",{className:`faq-question ${R===7?"open":""}`,onClick:()=>I(7),children:["What payment methods are accepted?",l.jsx("span",{className:"faq-toggle",children:R===7?"":"+"})]}),R===7&&l.jsx("div",{className:"faq-answer",children:"Our system supports various online payment methods including UPI, credit/debit cards, and net banking."})]})]}),l.jsx("div",{className:"faq-show-more",children:l.jsx("button",{className:"show-more-btn",onClick:()=>q(!k),children:k?"Show Less":"Show More FAQs"})})]}),l.jsxs("div",{className:"app-info",children:[l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"App Version"}),l.jsx("span",{className:"info-value",children:"v1.0.0"})]}),l.jsxs("div",{className:"info-item",children:[l.jsx("span",{className:"info-label",children:"Developed by"}),l.jsx("span",{className:"info-value",children:"VPA Technologies"})]})]})]})})},HM=()=>{Vr();const[n,e]=X.useState({notifications:!0,darkMode:!1,emailReports:!0,autoSync:!0}),[t,r]=X.useState(""),[i,o]=X.useState(""),[u,d]=X.useState(""),[h,p]=X.useState(""),[m,w]=X.useState(""),[_,x]=X.useState(null),[A,R]=X.useState(""),[C,k]=X.useState(null),[q,$]=X.useState(""),[z,oe]=X.useState(null),[ce,H]=X.useState("#3B82F6"),[D,I]=X.useState("#10B981"),[V,T]=X.useState("#FFFFFF"),[F,L]=X.useState("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),[ee,ye]=X.useState({show:!1,message:"",type:""}),[le,ve]=X.useState(!0),[me,Le]=X.useState(!1),[xe,J]=X.useState(!1),[M,G]=X.useState(!1),[B,ae]=X.useState(!1),[ge,_e]=X.useState(""),[Ve,Me]=X.useState("");X.useEffect(()=>{const De=localStorage.getItem("appSettings");De&&e(JSON.parse(De)),ue(),Te()},[]),X.useEffect(()=>{Ve&&fn()&&Q(Ve)},[Ve]);const Q=async De=>{try{const Be=dn(),it=Yn(Mn,`users/${Be}/settings/profile`);await sh(it,{brandingPin:De},{merge:!0})}catch(Be){console.error("Error saving PIN to Firestore:",Be)}},Te=async()=>{if(fn())try{const De=dn(),Be=Yn(Mn,`users/${De}/settings/profile`),it=await pu(Be);it.exists()&&it.data().brandingPin&&Me(it.data().brandingPin)}catch(De){console.error("Error loading PIN from Firestore:",De)}};X.useEffect(()=>{document.documentElement.style.setProperty("--primary-color",ce),document.documentElement.style.setProperty("--accent-color",D),document.documentElement.style.setProperty("--bg-color",V),document.documentElement.style.setProperty("--sidebar-gradient",F)},[ce,D,V,F]);const ue=async()=>{if(!fn()){G(!0);return}try{Le(!0);const De=dn(),Be=Yn(Mn,`users/${De}/settings/profile`),it=$v(Be,gt=>{if(gt.exists()){const et=gt.data();et.firmName!==void 0&&(r(et.firmName||""),o(et.firmName||"")),et.firmAddress!==void 0&&(d(et.firmAddress||""),p(et.firmAddress||"")),et.logoUrl!==void 0&&w(et.logoUrl||""),et.signatureUrl!==void 0&&R(et.signatureUrl||""),et.stampUrl!==void 0&&$(et.stampUrl||""),et.primaryColor&&H(et.primaryColor),et.accentColor&&I(et.accentColor),et.backgroundColor&&T(et.backgroundColor),et.sidebarGradient&&L(et.sidebarGradient)}G(!0),Le(!1)},gt=>{console.error("Error loading branding data:",gt),G(!0),Le(!1)});return()=>it()}catch(De){console.error("Error setting up branding data listener:",De),G(!0),Le(!1)}},be=(De,Be="success")=>{ye({show:!0,message:De,type:Be}),setTimeout(()=>{ye({show:!1,message:"",type:""})},3e3)},Ie=async()=>{if(!fn()){alert("Please log in to save settings"),be("Please log in to save settings","error");return}try{const De=dn(),Be=Yn(Mn,`users/${De}/settings/profile`);await sh(Be,{firmName:i,firmAddress:h,primaryColor:ce,accentColor:D,backgroundColor:V,sidebarGradient:F},{merge:!0}),r(i),d(h),be("All settings saved successfully!","success"),document.documentElement.style.setProperty("--primary-color",ce),document.documentElement.style.setProperty("--accent-color",D),document.documentElement.style.setProperty("--bg-color",V),document.documentElement.style.setProperty("--sidebar-gradient",F)}catch(De){console.error("Error saving settings:",De),alert("Error saving settings. Please try again."),be("Error saving settings","error")}},Y=De=>{const Be={...n,[De]:!n[De]};e(Be),localStorage.setItem("appSettings",JSON.stringify(Be));const it=document.querySelector(`input[name="${De}"]`).closest(".setting-item");it&&(it.style.transition="all 0.3s ease",it.style.transform="scale(0.98)",it.style.opacity="0.8",setTimeout(()=>{it.style.transform="scale(1)",it.style.opacity="1"},150));const gt=document.querySelector(`input[name="${De}"]`).nextSibling;gt&&(gt.classList.add("ripple"),setTimeout(()=>{gt.classList.remove("ripple")},300)),De==="darkMode"&&(Be.darkMode?(document.documentElement.setAttribute("data-theme","dark"),be("Dark mode enabled","info")):(document.documentElement.removeAttribute("data-theme"),be("Light mode enabled","info")))},pe=De=>{o(De.target.value);const Be=De.target;Be.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.4)",setTimeout(()=>{Be.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.2)"},300)},Ne=De=>{p(De.target.value);const Be=De.target;Be.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.4)",setTimeout(()=>{Be.style.boxShadow="0 0 0 3px rgba(52, 152, 219, 0.2)"},300)},je=De=>{if(De.target.files&&De.target.files[0]){const Be=De.target.files[0];if(Be.type.startsWith("image/")){x(Be);const it=document.querySelector('label[for="logo-upload"]');it&&(it.classList.add("file-selected"),setTimeout(()=>{it.classList.remove("file-selected")},1e3)),be("Logo selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),be("Invalid file type. Please select PNG or JPG","error")}},we=De=>{if(De.target.files&&De.target.files[0]){const Be=De.target.files[0];if(Be.type.startsWith("image/")){k(Be);const it=document.querySelector('label[for="signature-upload"]');it&&(it.classList.add("file-selected"),setTimeout(()=>{it.classList.remove("file-selected")},1e3)),be("Signature selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),be("Invalid file type. Please select PNG or JPG","error")}},Ce=De=>{if(De.target.files&&De.target.files[0]){const Be=De.target.files[0];if(Be.type.startsWith("image/")){oe(Be);const it=document.querySelector('label[for="stamp-upload"]');it&&(it.classList.add("file-selected"),setTimeout(()=>{it.classList.remove("file-selected")},1e3)),be("Stamp selected for upload","info")}else alert("Please select a valid image file (PNG or JPG)"),be("Invalid file type. Please select PNG or JPG","error")}},Je=async()=>{if(!_||!fn())return null;try{const De=dn(),Be=ih(qu,`users/${De}/branding/logo.png`),it=await Nf(Be,_);return await Af(it.ref)}catch(De){return console.error("Error uploading logo:",De),alert("Error uploading logo. Please try again."),be("Error uploading logo","error"),null}},ut=async()=>{if(!C||!fn())return null;try{const De=dn(),Be=ih(qu,`users/${De}/branding/signature.png`),it=await Nf(Be,C);return await Af(it.ref)}catch(De){return console.error("Error uploading signature:",De),alert("Error uploading signature. Please try again."),be("Error uploading signature","error"),null}},nt=async()=>{if(!z||!fn())return null;try{const De=dn(),Be=ih(qu,`users/${De}/branding/stamp.png`),it=await Nf(Be,z);return await Af(it.ref)}catch(De){return console.error("Error uploading stamp:",De),alert("Error uploading stamp. Please try again."),be("Error uploading stamp","error"),null}},ke=async()=>{if(!fn()){alert("Please log in to save settings"),be("Please log in to save settings","error");return}if(!Ve){ae(!0);return}if(prompt("Enter PIN to save branding:")!==Ve){alert("Incorrect PIN. Save operation cancelled."),be("Incorrect PIN. Save operation cancelled.","error");return}await st()},st=async()=>{try{Le(!0),J(!0);const De=dn(),Be=Yn(Mn,`users/${De}/settings/profile`);let it=m;if(_){if(it=await Je(),!it)throw new Error("Failed to upload logo");be("Logo uploaded successfully","success")}let gt=A;if(C){if(gt=await ut(),!gt)throw new Error("Failed to upload signature");be("Signature uploaded successfully","success")}let et=q;if(z){if(et=await nt(),!et)throw new Error("Failed to upload stamp");be("Stamp uploaded successfully","success")}await sh(Be,{firmName:i||"",firmAddress:h||"",logoUrl:it||"",signatureUrl:gt||"",stampUrl:et||"",lastUpdated:new Date},{merge:!0}),Ve&&await Q(Ve),be("Branding saved successfully!","success"),Xe(),r(i),d(h),w(it||""),R(gt||""),$(et||""),x(null),k(null),oe(null)}catch(De){console.error("Error saving branding:",De),be("Error saving branding: "+De.message,"error")}finally{Le(!1),J(!1)}},Xe=()=>{const De=document.querySelector(".branding-save");if(!De)return;const Be=De.getBoundingClientRect(),it=Be.left+Be.width/2,gt=Be.top+Be.height/2;for(let et=0;et<50;et++){const bt=document.createElement("div");bt.className="confetti",bt.style.left=`${it}px`,bt.style.top=`${gt}px`,bt.style.backgroundColor=Qe(),bt.style.transform=`rotate(${Math.random()*360}deg)`,bt.style.width=`${Math.random()*10+5}px`,bt.style.height=bt.style.width,document.body.appendChild(bt);const St=Math.random()*Math.PI*2,Nt=3+Math.random()*4;let un=Math.cos(St)*Nt,Ot=Math.sin(St)*Nt,Vt=it,Cn=gt,Pt=1,It=0;const nn=()=>{Vt+=un,Cn+=Ot,Ot+=.2,Pt-=.015,It+=5,bt.style.left=`${Vt}px`,bt.style.top=`${Cn}px`,bt.style.opacity=Pt,bt.style.transform=`rotate(${It}deg)`,Pt>0?requestAnimationFrame(nn):bt.remove()};requestAnimationFrame(nn)}},Qe=()=>{const De=["#4e73df","#1cc88a","#36b9cc","#f6c23e","#e74a3b","#6f42c1"];return De[Math.floor(Math.random()*De.length)]},tt=(De,Be)=>{switch(De){case"primary":H(Be),be("Primary color updated","info");break;case"accent":I(Be),be("Accent color updated","info");break;case"background":T(Be),be("Background color updated","info");break;case"sidebar":L(Be),be("Sidebar gradient updated","info");break}},Oe=()=>{H("#3B82F6"),I("#10B981"),T("#FFFFFF"),L("linear-gradient(135deg, #667eea 0%, #764ba2 100%)"),be("Theme reset to defaults","success")};return X.useEffect(()=>{document.documentElement.style.setProperty("--primary-color",ce),document.documentElement.style.setProperty("--accent-color",D),document.documentElement.style.setProperty("--bg-color",V);const De=document.querySelector(".sidebar");De&&(De.style.background=F)},[ce,D,V,F]),M?l.jsxs("div",{className:"settings-container",children:[ee.show&&l.jsx("div",{className:`toast-notification ${ee.type}`,children:ee.message}),l.jsxs("div",{className:"settings-header",children:[l.jsx("h1",{children:"Settings"}),l.jsx("p",{children:"Manage your application preferences"})]}),l.jsxs("div",{className:`settings-section ${le?"":"collapsed"}`,children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h2",{children:"Academy Profile & Branding"}),l.jsx("button",{className:"toggle-button",onClick:()=>ve(!le),children:le?"Hide":"Show"})]}),l.jsx("div",{className:`section-content ${le?"open":""}`,children:l.jsxs("div",{className:"branding-content",children:[l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Academy Logo"}),l.jsx("p",{children:"Upload your academy logo (PNG or JPG)"}),l.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"PNG recommended. Transparent background preferred."})]}),l.jsxs("div",{className:"logo-upload-controls",children:[l.jsx("div",{className:"logo-preview",children:m?l.jsx("img",{src:m,alt:"Academy Logo",className:"logo-image"}):l.jsx("div",{className:"logo-placeholder",children:"Click to Upload"})}),l.jsxs("div",{className:"logo-upload-area",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:je,className:"logo-input",id:"logo-upload",disabled:xe}),l.jsxs("label",{htmlFor:"logo-upload",className:"upload-button",children:[" ",xe?"Uploading...":"Choose File"]}),_&&l.jsx("span",{className:"file-name",children:_.name})]})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Signature"}),l.jsx("p",{children:"Upload your authorized signature (PNG/JPG with transparent background preferred)"}),l.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Used in receipts and payment slips"})]}),l.jsxs("div",{className:"signature-upload-controls",children:[l.jsx("div",{className:"signature-preview",children:A?l.jsx("img",{src:A,alt:"Authorized Signature",className:"signature-image"}):l.jsx("div",{className:"signature-placeholder",children:"Click to Upload"})}),l.jsxs("div",{className:"signature-upload-area",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:we,className:"signature-input",id:"signature-upload",disabled:xe}),l.jsxs("label",{htmlFor:"signature-upload",className:"upload-button",children:[" ",xe?"Uploading...":"Choose File"]}),C&&l.jsx("span",{className:"file-name",children:C.name})]})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Official Stamp / Seal"}),l.jsx("p",{children:"Upload your official stamp or seal (PNG/JPG, circular preferred)"}),l.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Used on receipts & paid invoices"})]}),l.jsxs("div",{className:"stamp-upload-controls",children:[l.jsx("div",{className:"stamp-preview",children:q?l.jsx("img",{src:q,alt:"Official Stamp",className:"stamp-image"}):l.jsx("div",{className:"stamp-placeholder",children:"Click to Upload"})}),l.jsxs("div",{className:"stamp-upload-area",children:[l.jsx("input",{type:"file",accept:"image/png, image/jpeg",onChange:Ce,className:"stamp-input",id:"stamp-upload",disabled:xe}),l.jsxs("label",{htmlFor:"stamp-upload",className:"upload-button",children:[" ",xe?"Uploading...":"Choose File"]}),z&&l.jsx("span",{className:"file-name",children:z.name})]})]})]}),l.jsxs("div",{className:"setting-item form-group-row",children:[l.jsxs("div",{className:"form-group-col",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:"Academy Name"}),l.jsx("p",{children:"Enter your academy or institution name"})]}),l.jsx("div",{className:"firm-name-controls",children:l.jsx("input",{type:"text",value:i,onChange:pe,placeholder:"Enter Academy Name",className:"firm-name-input",disabled:me})})]}),l.jsxs("div",{className:"form-group-col",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Academy Address"}),l.jsx("p",{children:"Enter your academy's full address"})]}),l.jsx("div",{className:"firm-address-controls",children:l.jsx("textarea",{value:h,onChange:Ne,placeholder:"Enter Academy Address",className:"firm-address-input",disabled:me,rows:"3"})})]})]}),l.jsxs("div",{className:"setting-item preview-section",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Live Preview"}),l.jsx("p",{children:"See how your branding will appear in receipts"})]}),l.jsx("div",{className:"live-preview-wrapper",children:l.jsxs("div",{className:"preview-card receipt-preview-mini",children:[l.jsxs("div",{className:"receipt-header-preview",children:[l.jsxs("div",{className:"receipt-header-content",children:[m&&l.jsx("img",{src:m,alt:"Preview Logo",className:"receipt-preview-logo"}),l.jsxs("div",{className:"receipt-academy-info",children:[l.jsx("h4",{className:"receipt-academy-name",children:i||"Academy Name"}),l.jsx("p",{className:"receipt-academy-address",children:h||"Academy Address"})]})]}),l.jsx("div",{className:"receipt-title-preview",children:"Fee Receipt"})]}),l.jsxs("div",{className:"receipt-body-preview",children:[l.jsxs("div",{className:"receipt-details-preview",children:[l.jsxs("div",{className:"receipt-detail-row",children:[l.jsx("span",{className:"receipt-label",children:"Receipt No:"}),l.jsx("span",{className:"receipt-value",children:"RCT-001"})]}),l.jsxs("div",{className:"receipt-detail-row",children:[l.jsx("span",{className:"receipt-label",children:"Date:"}),l.jsx("span",{className:"receipt-value",children:new Date().toLocaleDateString()})]}),l.jsxs("div",{className:"receipt-detail-row",children:[l.jsx("span",{className:"receipt-label",children:"Student:"}),l.jsx("span",{className:"receipt-value",children:"John Doe"})]})]}),l.jsxs("div",{className:"receipt-amount-preview",children:[l.jsxs("div",{className:"amount-row-preview",children:[l.jsx("span",{children:"Amount Paid:"}),l.jsx("span",{children:"5,000.00"})]}),l.jsxs("div",{className:"amount-row-preview total-preview",children:[l.jsx("span",{children:"Total:"}),l.jsx("span",{children:"5,000.00"})]})]})]}),l.jsx("div",{className:"receipt-signatures-preview",children:l.jsxs("div",{className:"signature-section-preview",children:[A?l.jsxs("div",{className:"signature-item",children:[l.jsx("div",{className:"signature-label",children:"Signature:"}),l.jsx("img",{src:A,alt:"Signature",className:"signature-preview-img"})]}):l.jsxs("div",{className:"signature-item",children:[l.jsx("div",{className:"signature-label",children:"Signature:"}),l.jsx("div",{className:"signature-placeholder",children:"[Signature]"})]}),q?l.jsxs("div",{className:"signature-item",children:[l.jsx("div",{className:"signature-label",children:"Official Stamp:"}),l.jsx("img",{src:q,alt:"Stamp",className:"stamp-preview-img"})]}):l.jsxs("div",{className:"signature-item",children:[l.jsx("div",{className:"signature-label",children:"Official Stamp:"}),l.jsx("div",{className:"stamp-placeholder",children:"[Stamp]"})]})]})}),l.jsx("div",{className:"receipt-footer-preview",children:"Thank you for your payment!"})]})})]}),l.jsx("div",{className:"branding-save-controls",children:l.jsxs("button",{className:"save-button branding-save",onClick:ke,disabled:me||xe,children:[" ",me||xe?"Saving...":"Save Branding"]})})]})})]}),l.jsxs("div",{className:"settings-section",children:[l.jsxs("h2",{children:[" Theme Customization ",l.jsx("span",{className:"disabled-label",children:"(Disabled)"})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Primary Color"}),l.jsx("p",{children:"Choose your primary brand color"})]}),l.jsx("div",{className:"color-picker",children:l.jsx("input",{type:"color",value:ce,onChange:De=>tt("primary",De.target.value),disabled:!0})})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Accent Color"}),l.jsx("p",{children:"Choose your accent color"})]}),l.jsx("div",{className:"color-picker",children:l.jsx("input",{type:"color",value:D,onChange:De=>tt("accent",De.target.value),disabled:!0})})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Background Color"}),l.jsx("p",{children:"Choose your background color"})]}),l.jsx("div",{className:"color-picker",children:l.jsx("input",{type:"color",value:V,onChange:De=>tt("background",De.target.value),disabled:!0})})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Sidebar Gradient"}),l.jsx("p",{children:"Choose your sidebar gradient"})]}),l.jsx("div",{className:"gradient-picker",children:l.jsxs("select",{value:F,onChange:De=>tt("sidebar",De.target.value),disabled:!0,children:[l.jsx("option",{value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",children:"Purple Gradient"}),l.jsx("option",{value:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",children:"Pink Gradient"}),l.jsx("option",{value:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",children:"Green Gradient"}),l.jsx("option",{value:"linear-gradient(135deg, #fa709a 0%, #fee140 100%)",children:"Yellow Gradient"}),l.jsx("option",{value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",children:"Blue Gradient"})]})})]}),l.jsxs("div",{className:"setting-item preview-section",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Live Theme Preview"}),l.jsx("p",{children:"See how your theme will look"})]}),l.jsxs("div",{className:"theme-preview-box",style:{background:V},children:[l.jsx("div",{className:"theme-sidebar-preview",style:{background:F}}),l.jsxs("div",{className:"theme-content-preview",children:[l.jsx("div",{className:"theme-header-preview",style:{color:ce},children:"Header Text"}),l.jsx("div",{className:"theme-body-preview",children:l.jsxs("div",{className:"theme-card-preview",style:{borderColor:D},children:[l.jsx("div",{className:"theme-card-header",style:{backgroundColor:ce},children:"Card Header"}),l.jsx("div",{className:"theme-card-body",children:"Card Content"})]})})]})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Reset Theme Defaults"}),l.jsx("p",{children:"Reset all theme settings to default values"}),l.jsxs("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:["Primary Color: Controls navbar & header gradients",l.jsx("br",{}),"Accent Color: Controls button colors",l.jsx("br",{}),"Background Color: Controls dashboard background"]})]}),l.jsx("button",{className:"reset-button",onClick:Oe,disabled:!0,children:"Reset to Defaults"})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsxs("h2",{children:[" Dark Mode & Sync ",l.jsx("span",{className:"disabled-label",children:"(Disabled)"})]}),l.jsxs("div",{className:"setting-item dark-mode-toggle-large",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Dark Mode"}),l.jsx("p",{children:"Enable dark theme for the application"}),l.jsx("p",{style:{fontSize:"12px",color:"#7f8c8d",marginTop:"5px"},children:"Automatically adapts dashboard, sidebar & charts"})]}),l.jsx("div",{className:"large-toggle-container",children:l.jsxs("label",{className:"switch-large",children:[l.jsx("input",{type:"checkbox",checked:n.darkMode,onChange:()=>Y("darkMode"),name:"darkMode",disabled:!0}),l.jsx("span",{className:"slider-large"})]})})]}),l.jsxs("div",{className:"setting-item preview-section",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Dark Mode Preview"}),l.jsx("p",{children:"See how the dark theme will look"})]}),l.jsxs("div",{className:"dark-mode-preview-box",children:[l.jsx("div",{className:"preview-header-dark",children:l.jsxs("div",{className:"preview-title-dark",children:[l.jsx("h4",{children:"Dark Mode Preview"}),l.jsx("p",{children:"This is how your app will look in dark mode"})]})}),l.jsx("div",{className:"preview-content-dark",children:l.jsxs("div",{className:"preview-card-dark",children:[l.jsx("div",{className:"preview-card-header-dark",children:"Sample Card"}),l.jsx("div",{className:"preview-card-body-dark",children:"Card content with dark theme styling"})]})})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Auto Sync"}),l.jsx("p",{children:"Automatically sync data with cloud"})]}),l.jsxs("label",{className:"switch",children:[l.jsx("input",{type:"checkbox",checked:n.autoSync,onChange:()=>Y("autoSync"),name:"autoSync",disabled:!0}),l.jsx("span",{className:"slider"})]})]})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx("h2",{children:" Notifications"}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Email Reports"}),l.jsx("p",{children:"Receive monthly reports via email"})]}),l.jsxs("label",{className:"switch",children:[l.jsx("input",{type:"checkbox",checked:n.emailReports,onChange:()=>Y("emailReports"),name:"emailReports"}),l.jsx("span",{className:"slider"})]})]}),l.jsxs("div",{className:"setting-item",children:[l.jsxs("div",{className:"setting-info",children:[l.jsx("h3",{children:" Push Notifications"}),l.jsx("p",{children:"Receive notifications for important updates"})]}),l.jsxs("label",{className:"switch",children:[l.jsx("input",{type:"checkbox",checked:n.notifications,onChange:()=>Y("notifications"),name:"notifications"}),l.jsx("span",{className:"slider"})]})]})]}),B&&l.jsx("div",{className:"pin-dialog-overlay",children:l.jsxs("div",{className:"pin-dialog",children:[l.jsx("h3",{children:"Set PIN for Branding Protection"}),l.jsx("p",{children:"Enter a 4-digit PIN to protect your branding settings:"}),l.jsx("input",{type:"password",maxLength:"4",value:ge,onChange:De=>_e(De.target.value.replace(/\D/g,"")),placeholder:"Enter 4-digit PIN",className:"pin-input"}),l.jsxs("div",{className:"pin-dialog-buttons",children:[l.jsx("button",{className:"cancel-button",onClick:()=>{ae(!1),_e("")},children:"Cancel"}),l.jsx("button",{className:"save-button",onClick:async()=>{ge.length===4?(Me(ge),await Q(ge),ae(!1),await st()):alert("PIN must be 4 digits")},children:"Set PIN & Save"})]})]})}),l.jsx("div",{className:"settings-footer",children:l.jsx("button",{className:"save-button",onClick:Ie,children:" Save All Settings"})})]}):l.jsxs("div",{className:"settings-container",children:[l.jsxs("div",{className:"settings-header",children:[l.jsx(bs,{type:"text",width:"200px",height:"32px"}),l.jsx(bs,{type:"text",width:"400px",height:"20px"})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx(bs,{type:"text",width:"300px",height:"24px"}),l.jsx(bs,{type:"card",width:"100%",height:"120px"}),l.jsx(bs,{type:"card",width:"100%",height:"120px"}),l.jsx(bs,{type:"card",width:"100%",height:"120px"})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx(bs,{type:"text",width:"300px",height:"24px"}),l.jsx(bs,{type:"card",width:"100%",height:"80px"}),l.jsx(bs,{type:"card",width:"100%",height:"80px"}),l.jsx(bs,{type:"card",width:"100%",height:"80px"})]}),l.jsxs("div",{className:"settings-section",children:[l.jsx(bs,{type:"text",width:"300px",height:"24px"}),l.jsx(bs,{type:"card",width:"100%",height:"80px"}),l.jsx(bs,{type:"card",width:"100%",height:"80px"})]}),l.jsx("div",{className:"settings-footer",children:l.jsx(bs,{type:"button",width:"150px",height:"40px"})})]})},XS=({children:n})=>l.jsx("div",{className:"shared-page-wrapper",children:n}),$M=()=>{Vr();const[n,e]=X.useState([]),[t,r]=X.useState([]),[i,o]=X.useState([]),[u,d]=X.useState(new Date().toISOString().split("T")[0]),[h,p]=X.useState(new Date().toISOString().slice(0,7)),[m,w]=X.useState({staffName:""}),[_,x]=X.useState([]),[A,R]=X.useState("attendance"),[C,k]=X.useState(!1),[q,$]=X.useState(null),[z,oe]=X.useState([]),[ce,H]=X.useState(!1),[D,I]=X.useState(null),[V,T]=X.useState(""),[F,L]=X.useState(!1),[ee,ye]=X.useState({name:"",role:"",perDaySalary:"",contact:"",email:""}),[le,ve]=X.useState(!0);X.useEffect(()=>{me()},[u,h]),X.useEffect(()=>{const pe=()=>{me()};return window.addEventListener("attendanceUpdated",pe),window.addEventListener("staffUpdated",pe),window.addEventListener("staffDeleted",pe),window.addEventListener("attendanceDeleted",pe),()=>{window.removeEventListener("attendanceUpdated",pe),window.removeEventListener("staffUpdated",pe),window.removeEventListener("staffDeleted",pe),window.removeEventListener("attendanceDeleted",pe)}},[]);const me=async()=>{try{ve(!0);const pe=await Fn.getStaff();e(pe);const Ne=await Fn.getStaffAttendance(),je=Ne.filter(we=>we.date===u);r(je),o(Ne),Le(pe,Ne)}catch(pe){console.error("Error loading data:",pe)}finally{ve(!1)}},Le=(pe,Ne)=>{const je=pe.map(we=>{const Je=Ne.filter(nt=>nt.staffId===we.staffId&&nt.date.startsWith(h)).filter(nt=>nt.status==="present").length,ut=we.perDaySalary*Je;return{staffId:we.staffId,staffName:we.name,role:we.role,perDaySalary:we.perDaySalary,presentDays:Je,salary:ut}});x(je)},xe=pe=>{const Ne=t.find(je=>je.staffId===pe);return Ne?Ne.status:null},J=async pe=>{const Ne=t.find(je=>je.staffId===pe);if(Ne){const je=Ne.status==="present"?"absent":"present",we={staffId:pe,date:u,status:je,class:Ne.class||"General",createdAt:Ne.createdAt||new Date().toISOString(),markedAt:new Date().toISOString()};try{Ne.id&&!Ne.id.startsWith("temp_")?await Fn.updateStaffAttendance({...we,id:Ne.id}):await Fn.addStaffAttendance(we),r(Ce=>Ce.map(Je=>Je.staffId===pe?{...Je,status:je,markedAt:new Date().toISOString()}:Je)),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:`Attendance updated to ${je}!`}})),setTimeout(()=>{me()},100)}catch(Ce){console.error("Error updating attendance:",Ce),alert(`Error updating attendance: ${Ce.message}`)}}else I(pe),T(""),H(!0)},M=async pe=>{if(pe&&(pe.preventDefault(),pe.stopPropagation()),!(!D||F)){L(!0);try{const Ne=t.find(we=>we.staffId===D);let je;if(Ne?Ne.status==="present"?je="absent":Ne.status==="absent"?je=null:je="present":je="present",je===null)Ne&&Ne.id&&await Fn.deleteStaffAttendance(Ne.id),r(we=>we.filter(Ce=>Ce.staffId!==D));else{const we={staffId:D,date:u,status:je,class:V||"General",createdAt:new Date().toISOString(),markedAt:new Date().toISOString()};Ne&&Ne.id&&!Ne.id.startsWith("temp_")?Ne.id?await Fn.updateStaffAttendance({...we,id:Ne.id}):await Fn.addStaffAttendance(we):await Fn.addStaffAttendance(we),r(Ne?Ce=>Ce.map(Je=>Je.staffId===D?{...Je,status:je,class:V||Je.class,markedAt:new Date().toISOString()}:Je):Ce=>[...Ce,{staffId:D,date:u,status:je,class:V||"General",createdAt:new Date().toISOString(),markedAt:new Date().toISOString(),id:`temp_${Date.now()}`}])}window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Attendance updated successfully!"}})),H(!1),I(null),T(""),setTimeout(()=>{me()},100)}catch(Ne){console.error("Error updating attendance:",Ne),alert(`Error updating attendance: ${Ne.message}`)}finally{L(!1)}}},G=async pe=>{if(window.confirm("Are you sure you want to delete this staff member and all their attendance records? This action cannot be undone."))try{const Ne=i.filter(Ce=>Ce.staffId===pe),je=n.find(Ce=>Ce.staffId===pe),we=je?je.id:null;if(!we)throw new Error("Could not find staff member in database");for(const Ce of Ne)Ce.id&&!Ce.id.startsWith("temp_")&&await Fn.deleteStaffAttendance(Ce.id);await Fn.deleteStaff(we),e(Ce=>Ce.filter(Je=>Je.staffId!==pe)),o(Ce=>Ce.filter(Je=>Je.staffId!==pe)),r(Ce=>Ce.filter(Je=>Je.staffId!==pe)),x(Ce=>Ce.filter(Je=>Je.staffId!==pe)),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff member and associated attendance records deleted successfully!"}})),setTimeout(()=>{me()},100)}catch(Ne){console.error("Error deleting staff:",Ne),alert(`Error deleting staff: ${Ne.message}. Some data may not have been deleted. Refreshing data to ensure consistency.`),setTimeout(()=>{me()},2e3)}},B=pe=>{const Ne=pe.target.value;if(Ne)d(Ne);else{const je=new Date().toISOString().split("T")[0];d(je)}},ae=pe=>{const Ne=pe.target.value;if(Ne)p(Ne);else{const je=new Date().toISOString().slice(0,7);p(je)}},ge=n.filter(pe=>m.staffName===""||pe.name.toLowerCase().includes(m.staffName.toLowerCase())),_e=_.filter(pe=>m.staffName===""||pe.staffName.toLowerCase().includes(m.staffName.toLowerCase())),Ve=async pe=>{try{const Ne=n.find(we=>we.staffId===pe);if(!Ne){console.error("Staff member not found");return}const je=i.filter(we=>we.staffId===pe).sort((we,Ce)=>new Date(Ce.date)-new Date(we.date));$({...Ne,attendanceHistory:je})}catch(Ne){console.error("Error fetching attendance history:",Ne),alert("Error fetching attendance history: "+Ne.message)}},Me=()=>{$(null)},Q=_.reduce((pe,Ne)=>pe+Ne.salary,0),ue=(()=>{const pe=t.filter(Ce=>Ce.status==="present").length,Ne=t.filter(Ce=>Ce.status==="absent").length,je=pe+Ne,we=je>0?Math.round(pe/je*100):0;return{presentCount:pe,absentCount:Ne,totalCount:je,percentage:we}})(),be=pe=>{const{name:Ne,value:je}=pe.target;ye(we=>({...we,[Ne]:je}))},Ie=async pe=>{if(pe.preventDefault(),!F){if(L(!0),!ee.name||!ee.role||!ee.perDaySalary){alert("Please fill in all required fields (Name, Role, and Per Day Salary)"),L(!1);return}try{const je={staffId:`STF${String(Date.now()).slice(-4)}`,name:ee.name,role:ee.role,perDaySalary:parseFloat(ee.perDaySalary),contact:ee.contact||"",email:ee.email||"",createdAt:new Date().toISOString()};await Fn.addStaff(je),ye({name:"",role:"",perDaySalary:"",contact:"",email:""}),k(!1),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Staff member added successfully!"}}))}catch(Ne){console.error("Error adding staff:",Ne),alert(`Error adding staff: ${Ne.message}`)}finally{L(!1)}}},Y=pe=>{pe&&pe.target===pe.currentTarget&&(H(!1),I(null),T("")),pe||(H(!1),I(null),T(""))};return le?l.jsx(eo,{children:l.jsxs("div",{className:"attendance-container",children:[l.jsxs("div",{className:"header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("div",{className:"skeleton-header",style:{width:"300px",height:"40px",marginBottom:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"400px",height:"24px",marginTop:"10px"}})]}),l.jsx("div",{className:"header-tabs",children:l.jsxs("div",{className:"tab-navigation",children:[l.jsx("div",{className:"skeleton-bar",style:{width:"150px",height:"40px",marginRight:"10px"}}),l.jsx("div",{className:"skeleton-bar",style:{width:"150px",height:"40px"}})]})})]}),l.jsx("div",{className:"date-selection",children:l.jsx("div",{className:"date-picker-container",children:l.jsx("div",{className:"skeleton-bar",style:{width:"200px",height:"40px"}})})}),l.jsx("div",{className:"kpi-skeleton-grid",children:[1,2,3,4].map(pe=>l.jsx("div",{className:"skeleton-card"},pe))}),l.jsxs("div",{className:"table-skeleton",children:[l.jsx("div",{className:"skeleton-header"}),[1,2,3,4,5].map(pe=>l.jsx("div",{className:"skeleton-row"},pe))]})]})}):l.jsx(eo,{children:l.jsxs("div",{className:"attendance-container",children:[l.jsxs("div",{className:"header",children:[l.jsx("div",{className:"header-content",children:l.jsx("h1",{children:"Staff Attendance & Salary"})}),l.jsx("div",{className:"header-tabs",children:l.jsxs("div",{className:"tab-navigation",children:[l.jsx("button",{className:`tab-button ${A==="attendance"?"active":""}`,onClick:()=>R("attendance"),children:"Daily Attendance"}),l.jsx("button",{className:`tab-button ${A==="salary"?"active":""}`,onClick:()=>R("salary"),children:"Salary Summary"})]})})]}),A==="attendance"&&l.jsx("div",{className:"add-staff-section",children:l.jsx("button",{className:"add-staff-button",onClick:()=>k(!C),children:C?"Cancel":"Add New Staff Member"})}),A==="attendance"&&C&&l.jsxs("div",{className:"add-staff-form",children:[l.jsx("h2",{children:"Add New Staff Member"}),l.jsxs("form",{onSubmit:Ie,children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"name",children:"Name *"}),l.jsx("input",{type:"text",id:"name",name:"name",value:ee.name,onChange:be,placeholder:"Enter staff name",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"role",children:"Role *"}),l.jsx("input",{type:"text",id:"role",name:"role",value:ee.role,onChange:be,placeholder:"Enter staff role",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"perDaySalary",children:"Per Day Salary *"}),l.jsx("input",{type:"number",id:"perDaySalary",name:"perDaySalary",value:ee.perDaySalary,onChange:be,placeholder:"Enter per day salary",min:"0",step:"0.01",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"contact",children:"Contact"}),l.jsx("input",{type:"text",id:"contact",name:"contact",value:ee.contact,onChange:be,placeholder:"Enter contact number"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",name:"email",value:ee.email,onChange:be,placeholder:"Enter email address"})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{type:"submit",className:"submit-button",disabled:F,children:F?"Adding Staff...":"Add Staff Member"}),l.jsx("button",{type:"button",className:"cancel-button",onClick:()=>k(!1),disabled:F,children:"Cancel"})]})]})]}),A==="attendance"&&l.jsxs(XS,{children:[l.jsx("div",{className:"date-selection",children:l.jsxs("div",{className:"date-picker-container",children:[l.jsx("label",{htmlFor:"attendance-date",children:"Select Date: "}),l.jsx("input",{type:"date",id:"attendance-date",value:u,onChange:B,max:new Date().toISOString().split("T")[0],required:!0})]})}),l.jsxs("div",{className:"attendance-section",children:[l.jsxs("h2",{children:["Attendance for ",new Date(u).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),l.jsxs("div",{className:"attendance-stats",children:[l.jsxs("div",{className:"stat-card",style:{animationDelay:"0.1s"},children:[l.jsx("div",{className:"stat-value",children:ue.presentCount}),l.jsx("div",{className:"stat-label",children:"Present"}),ue.presentCount===0&&l.jsx("div",{className:"stat-helper",children:"No staff marked present yet"})]}),l.jsxs("div",{className:"stat-card",style:{animationDelay:"0.2s"},children:[l.jsx("div",{className:"stat-value",children:ue.absentCount}),l.jsx("div",{className:"stat-label",children:"Absent"}),ue.absentCount===0&&l.jsx("div",{className:"stat-helper",children:"No staff marked absent yet"})]}),l.jsxs("div",{className:"stat-card",style:{animationDelay:"0.3s"},children:[l.jsxs("div",{className:"stat-value",children:[ue.percentage,"%"]}),l.jsx("div",{className:"stat-label",children:"Attendance Rate"}),ue.totalCount===0&&l.jsx("div",{className:"stat-helper",children:"Awaiting attendance marks"})]}),l.jsxs("div",{className:"stat-card",style:{animationDelay:"0.4s"},children:[l.jsxs("div",{className:"stat-value",children:[ue.totalCount,"/",n.length]}),l.jsx("div",{className:"stat-label",children:"Marked"}),ue.totalCount===0&&n.length>0&&l.jsx("div",{className:"stat-helper",children:"No staff marked yet"}),n.length===0&&l.jsx("div",{className:"stat-helper",children:"No staff added yet"})]})]}),n.length===0?l.jsxs("div",{className:"no-staff",children:[l.jsx("div",{className:"empty-state-icon",children:""}),l.jsx("p",{children:"No staff members added yet. Start by adding your first staff member to begin attendance tracking."}),l.jsx("button",{className:"add-staff-button",onClick:()=>k(!0),children:"Add New Staff Member"})]}):l.jsx("div",{className:"attendance-list",children:ge.map((pe,Ne)=>{const je=xe(pe.staffId);return l.jsxs("div",{className:"staff-item",style:{animationDelay:`${Ne*.1}s`},children:[l.jsxs("div",{className:"staff-info",children:[l.jsx("h3",{children:pe.name}),l.jsxs("p",{children:["ID: ",pe.staffId||pe.id]}),l.jsxs("p",{children:["Role: ",pe.role]})]}),l.jsxs("div",{className:"staff-actions",children:[l.jsx("button",{className:`attendance-toggle ${je||"not-marked"}`,onClick:()=>J(pe.staffId),children:je==="present"?" Present":je==="absent"?" Absent":"Mark Attendance"}),l.jsx("button",{className:"delete-button",onClick:()=>G(pe.staffId),children:""})]})]},pe.staffId)})})]})]}),A==="salary"&&l.jsxs(XS,{children:[l.jsxs("div",{className:"filters",children:[l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"staffNameFilter",children:"Staff Name:"}),l.jsx("input",{type:"text",id:"staffNameFilter",placeholder:"Filter by staff name...",value:m.staffName,onChange:pe=>w({...m,staffName:pe.target.value})})]}),l.jsxs("div",{className:"filter-group",children:[l.jsx("label",{htmlFor:"salary-month",children:"Select Month:"}),l.jsx("input",{type:"month",id:"salary-month",value:h,onChange:ae,required:!0})]})]}),l.jsxs("div",{className:"salary-section",children:[l.jsxs("h2",{children:["Salary Summary for ",new Date(h+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})]}),l.jsx("div",{className:"summary-card",children:l.jsxs("div",{className:"summary-content",children:[l.jsxs("div",{className:"summary-item",style:{animationDelay:"0.1s"},children:[l.jsx("span",{children:"Total Staff:"}),l.jsx("span",{className:"summary-value",children:_e.length})]}),l.jsxs("div",{className:"summary-item",style:{animationDelay:"0.2s"},children:[l.jsx("span",{children:"Total Salary:"}),l.jsxs("span",{className:"summary-value salary-amount",children:["",Q.toFixed(2)]})]}),l.jsxs("div",{className:"summary-item",style:{animationDelay:"0.3s"},children:[l.jsx("span",{children:"Average Salary:"}),l.jsxs("span",{className:"summary-value salary-amount",children:["",_e.length>0?(Q/_e.length).toFixed(2):"0.00"]})]}),l.jsxs("div",{className:"summary-item",style:{animationDelay:"0.4s"},children:[l.jsx("span",{children:"Month:"}),l.jsx("span",{className:"summary-value",children:new Date(h+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})})]})]})}),l.jsx("div",{className:"salary-cards",children:_e.map((pe,Ne)=>l.jsxs("div",{className:"salary-card",style:{animationDelay:`${Ne*.1}s`},onClick:()=>Ve(pe.staffId),children:[l.jsxs("div",{className:"card-header",children:[l.jsx("h3",{children:pe.staffName}),l.jsx("span",{className:"role-badge",children:pe.role})]}),l.jsxs("div",{className:"salary-details",children:[l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Present Days:"}),l.jsx("span",{className:"present-count",children:pe.presentDays})]}),l.jsxs("div",{className:"detail-row",children:[l.jsx("span",{children:"Daily Salary:"}),l.jsxs("span",{children:["",pe.perDaySalary.toFixed(2)]})]}),l.jsxs("div",{className:"salary-total",children:[l.jsx("span",{children:"Total Salary:"}),l.jsxs("span",{className:"salary-amount",children:["",pe.salary.toFixed(2)]})]})]})]},pe.staffId))})]})]}),q&&l.jsx("div",{className:"modal-overlay",onClick:Me,children:l.jsxs("div",{className:"modal-content",onClick:pe=>pe.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsxs("h2",{children:["Attendance History for ",q.name]}),l.jsx("button",{className:"close-button",onClick:Me,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"staff-info",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"ID:"})," ",q.staffId]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Role:"})," ",q.role]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Daily Salary:"})," ",q.perDaySalary]})]}),l.jsxs("div",{className:"attendance-history-list",children:[l.jsx("h3",{children:"Attendance Records"}),q.attendanceHistory.length>0?l.jsx("div",{className:"history-records",children:q.attendanceHistory.map((pe,Ne)=>l.jsxs("div",{className:"history-record",children:[l.jsx("div",{className:"record-date",children:l.jsx("strong",{children:new Date(pe.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),l.jsx("div",{className:"record-status",children:l.jsx("span",{className:`status-badge ${pe.status}`,children:pe.status})}),pe.class&&l.jsx("div",{className:"record-class",children:l.jsx("span",{className:"class-badge",children:pe.class})}),pe.markedAt&&l.jsxs("div",{className:"record-time",children:["Marked at: ",new Date(pe.markedAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]})]},pe.id||Ne))}):l.jsx("p",{className:"no-records",children:"No attendance records found for this staff member."})]})]})]})}),ce&&l.jsx("div",{className:"modal-overlay",onClick:Y,children:l.jsxs("div",{className:"modal-content",onClick:pe=>pe.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("h2",{children:"Select Class"}),l.jsx("button",{className:"close-button",onClick:Y,children:""})]}),l.jsxs("div",{className:"modal-body",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"class-select",children:"Choose a class:"}),l.jsxs("select",{id:"class-select",value:V,onChange:pe=>T(pe.target.value),className:"class-select",children:[l.jsx("option",{value:"",children:"-- Select Class --"}),l.jsx("option",{value:"Nursery",children:"Nursery"}),l.jsx("option",{value:"LKG",children:"LKG"}),l.jsx("option",{value:"UKG",children:"UKG"}),l.jsx("option",{value:"1st",children:"1st"}),l.jsx("option",{value:"2nd",children:"2nd"}),l.jsx("option",{value:"3rd",children:"3rd"}),l.jsx("option",{value:"4th",children:"4th"}),l.jsx("option",{value:"5th",children:"5th"}),l.jsx("option",{value:"6th",children:"6th"}),l.jsx("option",{value:"7th",children:"7th"}),l.jsx("option",{value:"8th",children:"8th"}),l.jsx("option",{value:"9th",children:"9th"}),l.jsx("option",{value:"10th",children:"10th"}),l.jsx("option",{value:"11th",children:"11th"}),l.jsx("option",{value:"12th",children:"12th"})]})]}),l.jsxs("div",{className:"form-actions",children:[l.jsx("button",{className:"submit-button",onClick:pe=>{pe.preventDefault(),pe.stopPropagation(),M(pe)},disabled:!V||F,type:"button",children:F?"Saving...":"Save Attendance"}),l.jsx("button",{className:"cancel-button",onClick:Y,children:"Cancel"})]})]})]})})]})})},QS=()=>{const[n,e]=X.useState(""),[t,r]=X.useState(""),[i,o]=X.useState(""),[u,d]=X.useState(""),[h,p]=X.useState(""),[m,w]=X.useState(""),[_,x]=X.useState(!1),[A,R]=X.useState(!1),[C,k]=X.useState(!1),[q,$]=X.useState(!1),[z,oe]=X.useState(0),[ce,H]=X.useState(null),D=Vr(),I=no();X.useEffect(()=>{const L=new URLSearchParams(I.search);L.get("signup")==="verification"?(w("Account created. Verification email sent. Please check your inbox."),p(""),D("/login",{replace:!0})):L.get("signup")==="success"&&(w("Account created successfully. Please sign in to continue."),D("/login",{replace:!0}))},[I,D]),X.useEffect(()=>{let L=null;return z>0&&(L=setInterval(()=>{oe(ee=>ee<=1?(clearInterval(L),0):ee-1)},1e3)),()=>clearInterval(L)},[z]);const V=async()=>{x(!0),p("");try{const L=new Gl,ee=await dR(pn,L);if(ee.user.metadata.creationTime===ee.user.metadata.lastSignInTime){const ye={email:ee.user.email,phone:ee.user.phoneNumber||"",firmName:u||"",displayName:ee.user.displayName||ee.user.email?.split("@")[0]||"User",createdAt:new Date,uid:ee.user.uid};try{await N1(ye),await Zc(ee.user.uid,{email:ee.user.email,displayName:ee.user.displayName||ee.user.email?.split("@")[0]||"User"})}catch(le){console.error("Error creating user profile or subscription:",le)}}else try{if(await cu(ee.user.uid)||await Zc(ee.user.uid),!await Ew(ee.user.uid)){D("/subscribe");return}}catch(ye){console.error("Error checking subscription:",ye)}localStorage.setItem("isLoggedIn","true"),D("/dashboard")}catch(L){console.error("Google authentication error:",L);let ee="Google authentication failed. Please try again.";switch(L.code){case"auth/popup-blocked":ee="Popup blocked by browser. Please allow popups and try again.";break;case"auth/cancelled-popup-request":ee="Popup closed by user.";break;case"auth/account-exists-with-different-credential":ee="Account exists with different credential. Please sign in using your email and password.";break;default:ee=L.message||ee}p(ee)}finally{x(!1)}},T=async()=>{if(!(z>0)){x(!0),p(""),w("");try{if(!pn.currentUser){x(!1);return}if(pn.currentUser.emailVerified){p("Email is already verified. Please sign in normally."),x(!1);return}await iv(pn.currentUser),oe(30),w("Verification email resent. Check your inbox."),setTimeout(()=>{w("")},5e3)}catch(L){console.error("Error resending verification email:",L);let ee="Failed to resend verification email. Please try again.";switch(L.code){case"auth/too-many-requests":ee="Too many requests. Please try again later.";break;default:ee=L.message||ee}p(ee)}finally{x(!1)}}},F=async L=>{L.preventDefault(),x(!0),p("");try{if(C)await J_(pn,n),p("Password reset email sent. Please check your inbox."),k(!1);else if(A){const ee=await Z_(pn,n,t);await tE(ee.user,{displayName:u||n.split("@")[0]});const ye={email:n,phone:i,firmName:u,displayName:u||n.split("@")[0],createdAt:new Date,uid:ee.user.uid};try{await N1(ye)}catch(le){console.error("Error creating user profile:",le)}await ep(pn),localStorage.removeItem("isLoggedIn"),w("Account created successfully. Please sign in to continue."),R(!1),p("")}else{const ee=await eE(pn,n,t);if(console.log("Login: Checking email verification for user:",ee.user.email,ee.user.emailVerified),!ee.user.emailVerified){D("/verify-email");return}try{console.log("Login: Checking subscription for user:",ee.user.uid);const ye=await cu(ee.user.uid);if(console.log("Login: Got subscription data:",ye),!ye)console.log("Login: No subscription found, creating new one for user:",ee.user.uid),await Zc(ee.user.uid);else if(ye.plan==="trial"){console.log("Login: User has trial subscription, redirecting to free trial page"),D("/free-trial-continue");return}else{const le=await Ew(ee.user.uid);if(console.log("Login: Has active subscription:",le),!le){console.log("Login: No active subscription, redirecting to subscribe page"),D("/subscribe");return}}}catch(ye){console.error("Error checking subscription:",ye)}localStorage.setItem("isLoggedIn","true"),D("/dashboard")}}catch(ee){console.error("Authentication error:",ee);let ye="Authentication failed. Please try again.";switch(ee.code){case"auth/user-not-found":ye="No account found. Please sign up first.";break;case"auth/wrong-password":ye="Incorrect password.";break;case"auth/email-already-in-use":ye="Email already in use. Please try logging in instead.";break;case"auth/invalid-email":ye="Invalid email address.";break;case"auth/weak-password":ye="Password should be at least 6 characters.";break;case"auth/too-many-requests":ye="Too many requests. Please try again later.";break;default:ye=ee.message||ye}p(ye)}finally{x(!1)}};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsxs("h1",{children:[" ",C?"Reset Password":A?"Sign Up":"Access Required"]}),l.jsx("p",{children:C?"Enter your email to reset your password":A?"Create a new account":"Please sign in to continue"})]}),l.jsxs("form",{onSubmit:F,className:"login-form",children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"email",children:"Email"}),l.jsx("input",{type:"email",id:"email",value:n,onChange:L=>{e(L.target.value),q&&$(!1),h&&p(""),m&&w("")},placeholder:"Enter your email",required:!0})]}),!C&&l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsx("input",{type:"password",id:"password",value:t,onChange:L=>r(L.target.value),placeholder:"Enter your password",minLength:"6",required:!C})]}),A&&!C&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"phone",children:"Phone Number"}),l.jsx("input",{type:"tel",id:"phone",value:i,onChange:L=>o(L.target.value),placeholder:"Enter your phone number"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"firmName",children:"Firm/Organization Name"}),l.jsx("input",{type:"text",id:"firmName",value:u,onChange:L=>d(L.target.value),placeholder:"Enter your firm or organization name"})]})]}),m&&l.jsx("div",{className:"success-message",children:m}),(h||q)&&l.jsxs("div",{className:h?"error-message":"info-message",children:[h||"Please verify your email before signing in.",q&&l.jsx("div",{style:{marginTop:"10px"},children:l.jsx("button",{type:"button",className:"resend-button",onClick:T,disabled:_||z>0,style:{background:"none",border:"1px solid #3498db",color:"#3498db",padding:"8px 16px",borderRadius:"4px",cursor:z>0?"not-allowed":"pointer",fontSize:"0.9rem",marginTop:"5px",opacity:z>0?.6:1},children:z>0?`Resend available in ${z}s`:"Resend Verification Email"})})]}),q?l.jsx("div",{className:"login-button-disabled",style:{backgroundColor:"#f5f5f5",color:"#999",border:"1px solid #ddd",padding:"12px",borderRadius:"6px",textAlign:"center",fontSize:"1rem",cursor:"not-allowed"},children:"Verify email to enable sign in"}):l.jsx("button",{type:"submit",className:"login-button",disabled:_||!n||!C&&!t,children:_?"Processing...":C?"Send Reset Email":A?"Sign Up":"Sign In"}),!C&&l.jsxs("button",{type:"button",className:"google-login-btn",onClick:V,disabled:_,children:[l.jsx("span",{className:"google-icon",children:"G"}),"Sign in with Google"]}),l.jsx("div",{className:"auth-options",children:C?l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>k(!1),children:"Back to Sign In"}):A?l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>R(!1),children:"Already have an account? Sign In"}):l.jsxs(l.Fragment,{children:[l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>R(!0),children:"Don't have an account? Sign Up"}),l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>k(!0),children:"Forgot Password?"})]})})]})]})})},y4=()=>{const[n,e]=X.useState(""),[t,r]=X.useState(""),[i,o]=X.useState(""),[u,d]=X.useState(""),[h,p]=X.useState(""),[m,w]=X.useState(""),[_,x]=X.useState(""),[A,R]=X.useState(!1),[C,k]=X.useState(0),[q,$]=X.useState(!1),[z,oe]=X.useState(!1),[ce,H]=X.useState(!1),D=Vr(),I=X.useRef(),V=X.useRef(),T=X.useRef();X.useEffect(()=>{let ye=0;i.length>=8&&(ye+=1),/[A-Z]/.test(i)&&(ye+=1),/[0-9]/.test(i)&&(ye+=1),/[^A-Za-z0-9]/.test(i)&&(ye+=1),k(ye)},[i]);const F=()=>C===0?"":C<=1?"Weak":C<=2?"Medium":"Strong",L=()=>C===0?"#ddd":C<=1?"#e74c3c":C<=2?"#f39c12":"#2ecc71",ee=async ye=>{if(ye.preventDefault(),R(!0),x(""),!n.trim()){x("Please enter your full name"),I.current?.focus(),R(!1);return}if(!t.trim()){x("Please enter your email"),I.current?.focus(),R(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)){x("Please enter a valid email address"),I.current?.focus(),R(!1);return}if(i.length<8){x("Password must be at least 8 characters"),V.current?.focus(),R(!1);return}if(i!==u){x("Passwords do not match"),T.current?.focus(),R(!1);return}if(!h.trim()){x("Please enter your phone number"),R(!1);return}if(!m.trim()){x("Please enter your firm or organization name"),R(!1);return}if(!ce){x("You must accept the Terms and Conditions to sign up"),R(!1);return}try{const ve=await Z_(pn,t.trim(),i);await tE(ve.user,{displayName:n.trim()});const me={uid:ve.user.uid,email:t.trim(),displayName:n.trim(),createdAt:new Date};try{await N1(me),await Zc(ve.user.uid,{email:t.trim(),displayName:n.trim()})}catch(Le){console.error("Error creating user profile or subscription:",Le)}try{await iv(ve.user)}catch(Le){console.error("Error sending verification email:",Le)}D("/verify-email")}catch(ve){console.error("Sign up error:",ve);let me="Sign up failed. Please try again.";switch(ve.code){case"auth/email-already-in-use":me="Email already in use. Please try logging in instead.";break;case"auth/invalid-email":me="Invalid email address.";break;case"auth/weak-password":me="Password should be at least 6 characters.";break;case"auth/too-many-requests":me="Too many requests. Please try again later.";break;default:me="Invalid email or password"}x(me)}finally{R(!1)}};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{children:"Create Account"}),l.jsx("p",{children:"Join us today to manage your fees efficiently"})]}),l.jsxs("form",{onSubmit:ee,className:"login-form",children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),l.jsx("input",{type:"text",id:"fullName",value:n,onChange:ye=>e(ye.target.value),placeholder:"Enter your full name",required:!0,ref:I})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"email",children:"Email Address *"}),l.jsx("input",{type:"email",id:"email",value:t,onChange:ye=>r(ye.target.value.trim()),placeholder:"Enter your email",required:!0})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"password",children:"Password *"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("input",{type:q?"text":"password",id:"password",value:i,onChange:ye=>o(ye.target.value),placeholder:"Create a password",minLength:"8",required:!0,ref:V}),l.jsx("button",{type:"button",className:"password-toggle",onClick:()=>$(!q),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",color:"#666"},children:q?"Hide":"Show"})]}),i&&l.jsxs("div",{style:{marginTop:"8px"},children:[l.jsx("div",{style:{height:"4px",backgroundColor:"#eee",borderRadius:"2px",overflow:"hidden"},children:l.jsx("div",{style:{height:"100%",width:`${C/4*100}%`,backgroundColor:L(),transition:"width 0.3s ease"}})}),l.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"0.8rem",color:"#666"},children:l.jsxs("span",{children:["Password strength: ",F()]})})]}),l.jsxs("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"4px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"4px"},children:[l.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:i.length>=8?"#2ecc71":"#ddd",marginRight:"6px"}}),"8+ characters"]}),l.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:/[A-Z]/.test(i)?"#2ecc71":"#ddd",marginRight:"6px"}}),"Uppercase letter"]}),l.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:/[0-9]/.test(i)?"#2ecc71":"#ddd",marginRight:"6px"}}),"Number"]}),l.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[l.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:/[^A-Za-z0-9]/.test(i)?"#2ecc71":"#ddd",marginRight:"6px"}}),"Special character"]})]})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password *"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("input",{type:z?"text":"password",id:"confirmPassword",value:u,onChange:ye=>d(ye.target.value),placeholder:"Confirm your password",required:!0,ref:T}),l.jsx("button",{type:"button",className:"password-toggle",onClick:()=>oe(!z),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",color:"#666"},children:z?"Hide":"Show"})]})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"phone",children:"Phone Number *"}),l.jsx("input",{type:"tel",id:"phone",value:h,onChange:ye=>p(ye.target.value),placeholder:"Enter your phone number",required:!0})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"firmName",children:"Firm/Organization Name *"}),l.jsx("input",{type:"text",id:"firmName",value:m,onChange:ye=>w(ye.target.value),placeholder:"Enter your firm or organization name",required:!0})]}),l.jsxs("div",{className:"terms-and-conditions",children:[l.jsxs("label",{className:"checkbox-container",children:[l.jsx("input",{type:"checkbox",id:"terms",checked:ce,onChange:ye=>H(ye.target.checked),required:!0}),l.jsx("span",{className:"checkmark"}),l.jsxs("span",{className:"terms-text",children:["I agree to the ",l.jsx("a",{href:"/terms-and-conditions",target:"_blank",rel:"noopener noreferrer",children:"Terms and Conditions"})]})]}),l.jsx("button",{type:"button",className:"preview-button",onClick:()=>window.open("/terms-and-conditions","terms","width=800,height=600"),style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#3498db",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Preview Terms & Conditions"})]}),_&&l.jsx("div",{className:"error-message",children:_}),l.jsx("button",{type:"submit",className:"login-button",disabled:A,children:A?l.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[l.jsx("span",{style:{width:"16px",height:"16px",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"8px"}}),"Creating Account..."]}):"Create Account"}),l.jsx("div",{style:{textAlign:"center",fontSize:"0.9rem",color:"#666",marginTop:"10px"},children:"Secure sign up  No credit card required"}),l.jsx("div",{className:"auth-options",children:l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>D("/login"),children:"Already have an account? Log in"})})]})]})})},v4=()=>{const[n,e]=X.useState(""),[t,r]=X.useState(""),[i,o]=X.useState(""),[u,d]=X.useState(!1),[h,p]=X.useState(!1),[m,w]=X.useState(!1),[_,x]=X.useState(!1),A=Vr(),R=X.useRef(),C=X.useRef(),k=async $=>{if($.preventDefault(),d(!0),o(""),!n.trim()){o("Please enter your email"),R.current?.focus(),d(!1);return}if(!t){o("Please enter your password"),C.current?.focus(),d(!1);return}try{await eE(pn,n.trim(),t),m?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("rememberMe","true")):(sessionStorage.setItem("isLoggedIn","true"),localStorage.removeItem("rememberMe")),A("/dashboard")}catch(z){console.error("Login error:",z);let oe="Login failed. Please try again.";switch(z.code){case"auth/user-not-found":case"auth/wrong-password":oe="Invalid email or password";break;case"auth/too-many-requests":oe="Too many requests. Please try again later.";break;default:oe="Invalid email or password"}o(oe)}finally{d(!1)}},q=async $=>{if($.preventDefault(),d(!0),o(""),!n.trim()){o("Please enter your email"),R.current?.focus(),d(!1);return}try{await J_(pn,n.trim()),o("Password reset email sent. Please check your inbox.")}catch(z){console.error("Password reset error:",z);let oe="Failed to send reset email. Please try again.";switch(z.code){case"auth/user-not-found":oe="No account found with this email.";break;case"auth/invalid-email":oe="Invalid email address.";break;default:oe="Failed to send reset email. Please try again."}o(oe)}finally{d(!1)}};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{children:"Welcome Back"}),l.jsx("p",{children:_?"Reset your password":"Sign in to your account"})]}),l.jsxs("form",{onSubmit:_?q:k,className:"login-form",children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"email",children:"Email Address"}),l.jsx("input",{type:"email",id:"email",value:n,onChange:$=>e($.target.value.trim()),placeholder:"Enter your email",required:!0,ref:R})]}),!_&&l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:"password",children:"Password"}),l.jsxs("div",{style:{position:"relative"},children:[l.jsx("input",{type:h?"text":"password",id:"password",value:t,onChange:$=>r($.target.value),placeholder:"Enter your password",required:!0,ref:C}),l.jsx("button",{type:"button",className:"password-toggle",onClick:()=>p(!h),style:{position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"0.9rem",color:"#666"},children:h?"Hide":"Show"})]})]}),!_&&l.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[l.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[l.jsx("input",{type:"checkbox",id:"rememberMe",checked:m,onChange:$=>w($.target.checked),style:{marginRight:"8px",width:"16px",height:"16px"}}),l.jsx("label",{htmlFor:"rememberMe",style:{fontSize:"0.9rem",color:"#666",cursor:"pointer"},children:"Remember me"})]}),l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>x(!0),style:{fontSize:"0.9rem",padding:"0",margin:"0",background:"none",border:"none",color:"#3498db",cursor:"pointer"},children:"Forgot password?"})]}),i&&l.jsx("div",{className:"error-message",style:{animation:"fadeIn 0.3s ease"},children:i}),l.jsx("button",{type:"submit",className:"login-button",disabled:u||!n||!_&&!t,children:u?l.jsxs("span",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[l.jsx("span",{style:{width:"16px",height:"16px",border:"2px solid #ffffff",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"8px"}}),_?"Sending...":"Logging in..."]}):_?"Send Reset Email":"Log in securely"}),_?l.jsx("div",{className:"auth-options",children:l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>{x(!1),o("")},children:"Back to Sign In"})}):l.jsx("div",{className:"auth-options",children:l.jsx("button",{type:"button",className:"switch-auth",onClick:()=>A("/signup"),children:"Create a new account"})})]})]})})},GM=()=>{const n=Vr(),[e,t]=X.useState([]),[r,i]=X.useState("6months");X.useEffect(()=>{const u=new Date,d=[];let h=6;r==="3months"?h=3:r==="12months"&&(h=12);for(let p=h-1;p>=0;p--){const m=new Date(u.getFullYear(),u.getMonth()-p,1),w=m.toLocaleString("default",{month:"short"}),_=m.getFullYear().toString().slice(-2),x=35e3,A=(h-p)*1e3,R=x*.3,C=Math.max(0,x+A+(Math.random()-.5)*R*2);d.push({month:`${w} '${_}`,amount:Math.round(C),date:new Date(u.getFullYear(),u.getMonth()-p,1)})}t(d)},[r]);const o=()=>{if(!e||e.length===0)return"Insufficient data to generate insight.";const u=e[0]?.amount||0,d=e[e.length-1]?.amount||0,h=e.length,m=e.reduce((R,C)=>R+C.amount,0)/h;let w=Math.max(...e.map(R=>R.amount)),_=Math.min(...e.map(R=>R.amount)),x=e.find(R=>R.amount===w)?.month||"N/A",A=e.find(R=>R.amount===_)?.month||"N/A";return d>u?`Collections show an overall upward trend with ${((d-u)/u*100).toFixed(1)}% growth. Peak was in ${x} (${w.toLocaleString()}) and lowest in ${A} (${_.toLocaleString()}). Average monthly collection: ${Math.round(m).toLocaleString()}.`:d<u?`Collections show a declining trend with ${((u-d)/u*100).toFixed(1)}% decrease. Peak was in ${x} (${w.toLocaleString()}) and lowest in ${A} (${_.toLocaleString()}). Average monthly collection: ${Math.round(m).toLocaleString()}. Focus on follow-ups to reverse this trend.`:`Collections remain stable over time. Peak was in ${x} (${w.toLocaleString()}) and lowest in ${A} (${_.toLocaleString()}). Average monthly collection: ${Math.round(m).toLocaleString()}. Maintaining consistent follow-ups is key to sustaining this performance.`};return l.jsxs("div",{className:"collection-trend-page",children:[l.jsxs("div",{className:"page-header",children:[l.jsx("button",{className:"back-button",onClick:()=>n("/dashboard"),children:" Back to Dashboard"}),l.jsxs("div",{className:"header-content",children:[l.jsx("h1",{className:"page-title",children:"Collection Trend Over Time"}),l.jsxs("div",{className:"header-meta",children:[l.jsx("p",{className:"page-subtitle",children:"Month-wise fee collection performance"}),l.jsxs("div",{className:"time-range-selector",children:[l.jsx("label",{htmlFor:"timeRange",children:"View:"}),l.jsxs("select",{id:"timeRange",value:r,onChange:u=>i(u.target.value),className:"time-range-dropdown",children:[l.jsx("option",{value:"3months",children:"3 Months"}),l.jsx("option",{value:"6months",children:"6 Months"}),l.jsx("option",{value:"12months",children:"12 Months"})]})]})]})]})]}),l.jsx("div",{className:"header-divider"}),l.jsx("div",{className:"chart-page-container",children:l.jsxs("div",{className:"analytics-panel",children:[l.jsxs("div",{className:"analytics-header",children:[l.jsx("h2",{className:"panel-title",children:"Collection Trend"}),l.jsx("p",{className:"panel-subtext",children:"Month-wise fee collection performance"})]}),l.jsxs("div",{className:"chart-card",children:[l.jsx(a8,{data:e,width:"100%",height:420}),l.jsxs("div",{className:"summary-metrics",children:[l.jsxs("div",{className:"metric-card",children:[l.jsxs("div",{className:"metric-value",children:["",e.reduce((u,d)=>u+d.amount,0).toLocaleString()]}),l.jsx("div",{className:"metric-label",children:"Total Collections"})]}),l.jsxs("div",{className:"metric-card",children:[l.jsxs("div",{className:"metric-value",children:["",e.length>0?Math.round(e.reduce((u,d)=>u+d.amount,0)/e.length).toLocaleString():"0"]}),l.jsx("div",{className:"metric-label",children:"Avg. Monthly"})]}),l.jsxs("div",{className:"metric-card",children:[l.jsx("div",{className:"metric-value",style:{color:e.length>1&&e[e.length-1].amount>e[0].amount?"var(--success-color)":"var(--danger-color)"},children:e.length>1?`${((e[e.length-1].amount-e[0].amount)/e[0].amount*100).toFixed(1)}%`:"0%"}),l.jsx("div",{className:"metric-label",children:"Growth Rate"})]})]}),l.jsxs("div",{className:"insight-card",children:[l.jsxs("div",{className:"insight-header",children:[l.jsx("span",{className:"insight-icon",children:""}),l.jsx("span",{className:"insight-label",children:"Key Insight"})]}),l.jsx("p",{className:"insight-text",children:o()})]})]})]})})]})},WM=()=>{const n=Vr(),[e,t]=X.useState(null),[r,i]=X.useState(""),[o,u]=X.useState(!1),[d,h]=X.useState(""),[p,m]=X.useState(0),[w,_]=X.useState(!0),x=async()=>{try{if(!fn())return;const k=dn(),q=Yn(Mn,`users/${k}/settings/budget`),$=await pu(q);if($.exists()){const I=$.data();t(I.monthlyBudget||null),i(I.monthlyBudget?.toString()||"")}else t(null),i("");const z=new Date,oe=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}`,ce=await Fn.getExpenditures(),D=A(ce).find(I=>I.key===oe)||{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0};m(D.total)}catch(k){console.error("Error loading data:",k)}finally{_(!1)}},A=k=>{const q={},$=new Date,z=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}`,oe=$.toLocaleString("default",{month:"long",year:"numeric"});return q[z]={key:z,label:oe,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0},k.forEach(ce=>{const H=new Date(ce.date),D=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}`,I=H.toLocaleString("default",{month:"long",year:"numeric"});q[D]||(q[D]={key:D,label:I,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),q[D].expenses.push(ce),q[D].total+=ce.total,q[D].roomRent+=ce.roomRent,q[D].staffSalary+=ce.staffSalary,q[D].otherExpenses+=ce.otherExpenses,q[D].electricityBill+=ce.electricityBill||0,q[D].internetBill+=ce.internetBill||0}),Object.values(q).sort((ce,H)=>{const[D,I]=ce.key.split("-").map(Number),[V,T]=H.key.split("-").map(Number);return D!==V?V-D:T-I})},R=async()=>{try{const k=parseFloat(r);if(isNaN(k)||k<0){h("Please enter a valid positive number");return}if(k<p){h(`Budget must be at least ${p.toLocaleString()} (current spend)`);return}if(u(!0),h(""),!fn())throw new Error("User not authenticated");const q=dn(),$=Yn(Mn,`users/${q}/settings/budget`);await sh($,{monthlyBudget:k},{merge:!0}),t(k),window.dispatchEvent(new CustomEvent("budgetUpdated",{detail:{budget:k}})),window.dispatchEvent(new CustomEvent("showSuccess",{detail:{message:"Budget limit updated successfully"}}))}catch(k){console.error("Error saving budget limit:",k),h("Failed to save budget limit. Please try again.")}finally{u(!1)}};X.useEffect(()=>{x();const k=()=>{x()};return window.addEventListener("expenditureUpdated",k),()=>{window.removeEventListener("expenditureUpdated",k)}},[]);const C=e?p/e*100:0;return l.jsxs("div",{className:"budget-management-page",children:[l.jsxs("div",{className:"page-header",children:[l.jsxs("button",{className:"back-button",onClick:()=>n(-1),children:[l.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{}),l.jsx("path",{})]}),"Back"]}),l.jsx("h1",{children:"Budget Management"})]}),w?l.jsx("div",{className:"loading",children:"Loading budget data..."}):l.jsxs("div",{className:"budget-content",children:[l.jsxs("div",{className:"budget-card",children:[l.jsx("h2",{children:"Monthly Budget Limit"}),l.jsxs("div",{className:"budget-input-section",children:[l.jsx("label",{htmlFor:"budget-input",children:"Set your monthly budget:"}),l.jsxs("div",{className:"budget-input-wrapper",children:[l.jsx("span",{className:"currency-symbol",children:""}),l.jsx("input",{id:"budget-input",type:"number",value:r,onChange:k=>{i(k.target.value),d&&h("")},placeholder:"Enter monthly budget",className:"budget-input",min:"0",step:"100"}),l.jsx("button",{onClick:R,disabled:o,className:"save-budget-btn",children:o?"Saving...":"Save"})]}),d&&l.jsx("div",{className:"budget-error",children:d})]}),l.jsx("div",{className:"budget-display",children:e?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"budget-amount",children:["",e.toLocaleString(void 0,{maximumFractionDigits:0})]}),l.jsxs("div",{className:"budget-info",children:["Current month spend: ",p.toLocaleString()]}),l.jsxs("div",{className:"utilization-container",children:[l.jsx("div",{className:"utilization-bar-container",children:l.jsx("div",{className:"utilization-bar",style:{width:`${Math.min(C,100)}%`,background:C<70?"linear-gradient(90deg, #27ae60, #2ecc71)":C<=90?"linear-gradient(90deg, #f39c12, #f59e0b)":"linear-gradient(90deg, #e74c3c, #ef4444)"}})}),l.jsxs("div",{className:"utilization-text",children:[C.toFixed(1),"% of budget used",C>=90&&C<100&&l.jsx("span",{className:"budget-warning",children:"  Approaching budget limit"}),C>=100&&l.jsx("span",{className:"budget-exceeded",children:"  Budget exceeded"})]})]})]}):l.jsx("div",{className:"no-budget-set",children:"No budget limit set. Set a budget to track your monthly expenses."})})]}),l.jsxs("div",{className:"budget-guidance",children:[l.jsx("h3",{children:"Budget Tips"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Set a realistic budget based on your average monthly expenses"}),l.jsx("li",{children:"Review your budget regularly to adjust for changing needs"}),l.jsx("li",{children:"Use the budget utilization tracker to stay within your limits"}),l.jsx("li",{children:"Consider setting alerts when you reach 80% of your budget"})]})]})]})]})},YM=()=>{const n=Vr(),[e,t]=X.useState([]),[r,i]=X.useState(!0),[o,u]=X.useState(new Date().getFullYear()),[d,h]=X.useState(new Date().getFullYear()-1),[p,m]=X.useState(null);X.useEffect(()=>{(async()=>{if(!fn()){n("/login");return}try{i(!0);const z=await Fn.getExpenditures();console.log("Raw expenses data:",z);const oe=_(z);console.log("Grouped expenses data:",oe),t(oe)}catch(z){console.error("Error loading monthly expenses:",z)}finally{i(!1)}})()},[n]);const w=$=>({rent:"Room Rent",salary:"Staff Salary",electricity:"Electricity",internet:"Internet",miscellaneous:"Miscellaneous",roomRent:"Room Rent",staffSalary:"Staff Salary",otherExpenses:"Miscellaneous",electricityBill:"Electricity",internetBill:"Internet"})[$]||$,_=$=>{console.log("Grouping expenses:",$);const z={};$.forEach(ce=>{console.log("Processing expense:",ce);const H=new Date(ce.date);console.log("Parsed date:",H);const D=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}`,I=H.toLocaleString("default",{month:"short",year:"numeric"});console.log("Month key:",D,"Month label:",I),z[D]||(z[D]={key:D,label:I,expenses:[],total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),z[D].expenses.push(ce),z[D].total+=(parseFloat(ce.roomRent)||0)+(parseFloat(ce.staffSalary)||0)+(parseFloat(ce.electricityBill)||0)+(parseFloat(ce.internetBill)||0)+(parseFloat(ce.otherExpenses)||0),z[D].roomRent+=parseFloat(ce.roomRent)||0,z[D].staffSalary+=parseFloat(ce.staffSalary)||0,z[D].electricityBill+=parseFloat(ce.electricityBill)||0,z[D].internetBill+=parseFloat(ce.internetBill)||0,z[D].otherExpenses+=parseFloat(ce.otherExpenses)||0,console.log("Updated month data:",z[D])});const oe=Object.values(z).sort((ce,H)=>ce.key.localeCompare(H.key));return console.log("Final grouped result:",oe),oe},x=e.filter($=>$.key.startsWith(o.toString())),A=e.filter($=>$.key.startsWith(d.toString())),R=x.reduce(($,z)=>($.total+=z.total,$.roomRent+=z.roomRent,$.staffSalary+=z.staffSalary,$.otherExpenses+=z.otherExpenses,$.electricityBill+=z.electricityBill,$.internetBill+=z.internetBill,$),{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0}),C=A.reduce(($,z)=>($.total+=z.total,$.roomRent+=z.roomRent,$.staffSalary+=z.staffSalary,$.otherExpenses+=z.otherExpenses,$.electricityBill+=z.electricityBill,$.internetBill+=z.internetBill,$),{total:0,roomRent:0,staffSalary:0,otherExpenses:0,electricityBill:0,internetBill:0});X.useEffect(()=>{if(x.length>0&&A.length>0){const $={totalChange:R.total-C.total,totalChangePercent:C.total>0?(R.total-C.total)/C.total*100:0,highestIncreaseCategory:"",highestDecreaseCategory:"",categoryChanges:{}},z=["roomRent","staffSalary","otherExpenses","electricityBill","internetBill"];let oe=-1/0,ce=1/0;z.forEach(H=>{const D=R[H]-C[H],I=C[H]>0?(R[H]-C[H])/C[H]*100:0;$.categoryChanges[H]={change:D,changePercent:I},I>oe&&(oe=I,$.highestIncreaseCategory=H),I<ce&&(ce=I,$.highestDecreaseCategory=H)}),m($)}},[x,A,R,C]);const k=()=>{if(x.length===0)return l.jsxs("div",{className:"chart-placeholder",children:[l.jsx("div",{className:"placeholder-icon",children:""}),l.jsx("h3",{children:"No Data Available"}),l.jsxs("p",{children:["No expense data found for ",o]})]});const $=[...x,...A],z=Math.max(...$.map(oe=>oe.total),1);return l.jsxs("div",{className:"trend-chart-container",children:[l.jsxs("div",{className:"chart-header",children:[l.jsx("h3",{children:"Monthly Expense Trend Comparison"}),l.jsxs("div",{className:"chart-legend",children:[l.jsxs("div",{className:"legend-item",children:[l.jsx("div",{className:"legend-color current-year"}),l.jsxs("span",{children:[o," (Current)"]})]}),l.jsxs("div",{className:"legend-item",children:[l.jsx("div",{className:"legend-color comparison-year"}),l.jsxs("span",{children:[d," (Previous)"]})]})]})]}),l.jsxs("div",{className:"chart-wrapper",children:[l.jsx("div",{className:"y-axis",children:[100,75,50,25,0].map(oe=>l.jsxs("div",{className:"y-axis-label",children:["",(z*oe/100).toLocaleString(void 0,{maximumFractionDigits:0})]},oe))}),l.jsxs("div",{className:"chart-area",children:[l.jsxs("svg",{viewBox:`0 0 ${Math.max(x.length,A.length)*100} 300`,className:"trend-svg",children:[l.jsxs("defs",{children:[l.jsxs("linearGradient",{id:"currentYearGradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#3498db",stopOpacity:"0.3"}),l.jsx("stop",{offset:"100%",stopColor:"#3498db",stopOpacity:"0.05"})]}),l.jsxs("linearGradient",{id:"comparisonYearGradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"#e74c3c",stopOpacity:"0.3"}),l.jsx("stop",{offset:"100%",stopColor:"#e74c3c",stopOpacity:"0.05"})]})]}),[0,1,2,3,4].map(oe=>l.jsx("line",{x1:"0",y1:oe*75,x2:Math.max(x.length,A.length)*100,y2:oe*75,stroke:"#eee",strokeWidth:"1"},oe)),l.jsx("polygon",{points:`0,300 ${x.map((oe,ce)=>{const H=ce*100+50,D=300-oe.total/z*250;return`${H},${D}`}).join(" ")} ${(x.length-1)*100+50},300`,fill:"url(#currentYearGradient)"}),l.jsx("polyline",{points:x.map((oe,ce)=>{const H=ce*100+50,D=300-oe.total/z*250;return`${H},${D}`}).join(" "),fill:"none",stroke:"#3498db",strokeWidth:"4",className:"trend-line"}),l.jsx("polygon",{points:`0,300 ${A.map((oe,ce)=>{const H=ce*100+50,D=300-oe.total/z*250;return`${H},${D}`}).join(" ")} ${(A.length-1)*100+50},300`,fill:"url(#comparisonYearGradient)"}),l.jsx("polyline",{points:A.map((oe,ce)=>{const H=ce*100+50,D=300-oe.total/z*250;return`${H},${D}`}).join(" "),fill:"none",stroke:"#e74c3c",strokeWidth:"4",strokeDasharray:"6,6",className:"trend-line"}),x.map((oe,ce)=>{const H=ce*100+50,D=300-oe.total/z*250;return l.jsxs("g",{children:[l.jsx("circle",{cx:H,cy:D,r:"8",fill:"#3498db",stroke:"white",strokeWidth:"3",className:"data-point"}),l.jsxs("text",{x:H,y:D-20,textAnchor:"middle",fontSize:"11",fill:"#333",fontWeight:"600",className:"data-label",children:["",oe.total.toLocaleString(void 0,{maximumFractionDigits:0})]})]},`current-${oe.key}`)}),A.map((oe,ce)=>{const H=ce*100+50,D=300-oe.total/z*250;return l.jsxs("g",{children:[l.jsx("circle",{cx:H,cy:D,r:"8",fill:"#e74c3c",stroke:"white",strokeWidth:"3",className:"data-point"}),l.jsxs("text",{x:H,y:D+30,textAnchor:"middle",fontSize:"11",fill:"#333",fontWeight:"600",className:"data-label",children:["",oe.total.toLocaleString(void 0,{maximumFractionDigits:0})]})]},`compare-${oe.key}`)})]}),l.jsx("div",{className:"x-axis",children:Array.from({length:Math.max(x.length,A.length)}).map((oe,ce)=>{const H=x[ce]||A[ce];return l.jsx("div",{className:"x-axis-label",style:{left:`${ce*100+50}px`},children:H?H.label.split(" ")[0]:""},ce)})})]})]})]})},q=()=>{const $=[{name:"Staff Salary",current:R.staffSalary,comparison:C.staffSalary,color:"--info-color"},{name:"Room Rent",current:R.roomRent,comparison:C.roomRent,color:"--success-color"},{name:"Electricity",current:R.electricityBill,comparison:C.electricityBill,color:"--warning-color"},{name:"Internet",current:R.internetBill,comparison:C.internetBill,color:"--primary-color"},{name:"Miscellaneous",current:R.otherExpenses,comparison:C.otherExpenses,color:"--accent-color"}];return l.jsxs("div",{className:"category-breakdown",children:[l.jsx("h3",{children:"Category Breakdown Comparison"}),l.jsxs("div",{className:"category-comparison-header",children:[l.jsx("div",{className:"header-column",children:"Category"}),l.jsx("div",{className:"header-column",children:o}),l.jsx("div",{className:"header-column",children:d}),l.jsx("div",{className:"header-column",children:"Change"})]}),l.jsx("div",{className:"category-grid",children:$.map((z,oe)=>{const ce=z.current-z.comparison,H=z.comparison>0?(z.current-z.comparison)/z.comparison*100:0;return l.jsxs("div",{className:"category-card",children:[l.jsx("div",{className:"category-header",children:l.jsx("span",{className:"category-name",children:z.name})}),l.jsxs("div",{className:"category-comparison",children:[l.jsxs("div",{className:"comparison-value",children:[l.jsx("div",{className:"value-label",children:"Current"}),l.jsxs("div",{className:"value-amount",children:["",z.current.toLocaleString()]})]}),l.jsxs("div",{className:"comparison-value",children:[l.jsx("div",{className:"value-label",children:"Previous"}),l.jsxs("div",{className:"value-amount",children:["",z.comparison.toLocaleString()]})]}),l.jsxs("div",{className:`comparison-change ${ce>=0?"positive":"negative"}`,children:[l.jsxs("div",{className:"change-amount",children:[ce>=0?"+":"",ce.toLocaleString(void 0,{maximumFractionDigits:0})]}),l.jsxs("div",{className:"change-percent",children:["(",H>=0?"+":"",H.toFixed(1),"%)"]})]})]}),l.jsxs("div",{className:"category-bar-container",children:[l.jsx("div",{className:"category-bar current",style:{width:`${R.total>0?z.current/R.total*100:0}%`,backgroundColor:`var(${z.color})`}}),l.jsx("div",{className:"category-bar comparison",style:{width:`${C.total>0?z.comparison/C.total*100:0}%`,backgroundColor:`var(${z.color})`,opacity:.5}})]})]},oe)})})]})};return r?l.jsx("div",{className:"expense-trend-container",children:l.jsxs("div",{className:"loading-spinner",children:[l.jsx("div",{className:"spinner"}),l.jsx("p",{children:"Loading expense trend data..."})]})}):l.jsxs("div",{className:"expense-trend-container",children:[l.jsxs("div",{className:"trend-header",children:[l.jsxs("div",{className:"header-content",children:[l.jsx("div",{className:"header-left",children:l.jsxs("div",{className:"header-text-container",children:[l.jsx("h1",{children:"Expense Trend Analysis"}),l.jsx("p",{className:"subtitle",children:"Analyze spending patterns and trends over time"})]})}),l.jsx("div",{className:"header-right",children:l.jsx("button",{className:"back-btn",onClick:()=>n(-1),children:" Back to Expenses"})})]}),l.jsxs("div",{className:"year-selector",children:[l.jsxs("div",{className:"year-select-group",children:[l.jsx("label",{htmlFor:"year-select",children:"Analyze Year:"}),l.jsx("select",{id:"year-select",value:o,onChange:$=>u(parseInt($.target.value)),className:"year-input",children:[2023,2024,2025,2026].map($=>l.jsx("option",{value:$,children:$},$))})]}),l.jsxs("div",{className:"year-select-group",children:[l.jsx("label",{htmlFor:"comparison-year-select",children:"Compare With:"}),l.jsx("select",{id:"comparison-year-select",value:d,onChange:$=>h(parseInt($.target.value)),className:"year-input",children:[2023,2024,2025,2026].map($=>l.jsx("option",{value:$,children:$},$))})]})]})]}),l.jsxs("div",{className:"summary-cards",children:[l.jsxs("div",{className:"summary-card total-spent",children:[l.jsx("div",{className:"card-header",children:l.jsx("span",{className:"card-title",children:"Total Spending"})}),l.jsxs("div",{className:"card-value",children:["",R.total.toLocaleString()]}),l.jsx("div",{className:"card-comparison",children:l.jsx("span",{className:C.total>0&&R.total>=C.total?"positive":"negative",children:C.total>0?l.jsxs(l.Fragment,{children:[R.total>=C.total?"":"",Math.abs((R.total-C.total)/C.total*100).toFixed(1),"% vs ",d]}):""})}),l.jsx("div",{className:"card-indicator total-spent-indicator"})]}),l.jsxs("div",{className:"summary-card avg-monthly",children:[l.jsx("div",{className:"card-header",children:l.jsx("span",{className:"card-title",children:"Average Monthly"})}),l.jsxs("div",{className:"card-value",children:["",(R.total/12).toLocaleString(void 0,{maximumFractionDigits:0})]}),l.jsx("div",{className:"card-comparison",children:l.jsx("span",{className:C.total>0&&R.total/12>=C.total/12?"positive":"negative",children:C.total>0?l.jsxs(l.Fragment,{children:[R.total/12>=C.total/12?"":"",Math.abs((R.total/12-C.total/12)/(C.total/12)*100).toFixed(1),"% vs ",d]}):""})}),l.jsx("div",{className:"card-indicator avg-monthly-indicator"})]}),l.jsxs("div",{className:"summary-card highest-category",children:[l.jsx("div",{className:"card-header",children:l.jsx("span",{className:"card-title",children:"Top Expense Category"})}),l.jsx("div",{className:"card-value",children:R.staffSalary>=R.roomRent&&R.staffSalary>=R.otherExpenses?"Staff Salary":R.roomRent>=R.otherExpenses?"Room Rent":"Miscellaneous"}),l.jsx("div",{className:"card-indicator highest-category-indicator"})]})]}),l.jsxs("div",{className:"comparison-messages",children:[C.total<=0&&l.jsx("div",{className:"no-comparison-message",children:"No data for comparison"}),C.total>0&&l.jsxs("div",{className:"comparison-message",children:["vs ",C.staffSalary>=C.roomRent&&C.staffSalary>=C.otherExpenses?"Staff Salary":C.roomRent>=C.otherExpenses?"Room Rent":"Miscellaneous"," in ",d]})]}),p&&l.jsxs("div",{className:"trend-analysis",children:[l.jsxs("h3",{children:["Year-over-Year Analysis (",o," vs ",d,")"]}),l.jsxs("div",{className:"analysis-cards",children:[l.jsxs("div",{className:"analysis-card",children:[l.jsx("div",{className:"card-header",children:l.jsx("span",{className:"card-title",children:"Total Spending Change"})}),l.jsxs("div",{className:`card-value ${p.totalChange>=0?"positive":"negative"}`,children:[p.totalChange>=0?"+":"",p.totalChange.toLocaleString(void 0,{maximumFractionDigits:0})]}),l.jsxs("div",{className:`card-comparison ${p.totalChangePercent>=0?"positive":"negative"}`,children:[p.totalChangePercent>=0?"+":"",p.totalChangePercent.toFixed(1),"% change"]})]}),l.jsxs("div",{className:"analysis-card",children:[l.jsx("div",{className:"card-header",children:l.jsx("span",{className:"card-title",children:"Biggest Increase"})}),l.jsx("div",{className:"card-value",children:w(p.highestIncreaseCategory)}),l.jsxs("div",{className:"card-comparison positive",children:["+",p.categoryChanges[p.highestIncreaseCategory]?.changePercent.toFixed(1),"%"]})]}),l.jsxs("div",{className:"analysis-card",children:[l.jsx("div",{className:"card-header",children:l.jsx("span",{className:"card-title",children:"Biggest Decrease"})}),l.jsx("div",{className:"card-value",children:w(p.highestDecreaseCategory)}),l.jsxs("div",{className:"card-comparison negative",children:[p.categoryChanges[p.highestDecreaseCategory]?.changePercent.toFixed(1),"%"]})]})]})]}),k(),q()]})},KM=()=>{const n=Vr(),[e,t]=X.useState({rating:0,type:"Overall Experience",message:""}),[r,i]=X.useState({category:"Fees / Payments",priority:"Medium",description:"",email:""}),[o,u]=X.useState(null),[d,h]=X.useState(null),[p,m]=X.useState(!1),[w,_]=X.useState(!1),[x,A]=X.useState(""),[R,C]=X.useState(!1),k=I=>{const{name:V,value:T}=I.target;t(F=>({...F,[V]:T}))},q=I=>{t(V=>({...V,rating:I}))},$=I=>{const{name:V,value:T}=I.target;i(F=>({...F,[V]:T}))},z=I=>{if(I.target.files&&I.target.files[0]){const V=I.target.files[0];if(V.type.startsWith("image/")){u(V);const T=new FileReader;T.onload=F=>{h(F.target.result)},T.readAsDataURL(V)}else alert("Please select a valid image file (PNG, JPG, JPEG)")}},oe=()=>{u(null),h(null);const I=document.getElementById("screenshot-upload");I&&(I.value="")},ce=I=>{A(I),C(!0),setTimeout(()=>{C(!1),A("")},3e3)},H=async I=>{I.preventDefault(),m(!0);try{const V={userId:dn(),rating:e.rating,type:e.type,message:e.message,createdAt:new Date};await lu(w1(Mn,`users/${dn()}/feedback`),V),ce("Thank you for your feedback!"),t({rating:0,type:"Overall Experience",message:""})}catch(V){console.error("Error submitting feedback:",V),ce("Failed to submit feedback. Please try again.")}finally{m(!1)}},D=async I=>{I.preventDefault(),_(!0);try{const V={userId:dn(),category:r.category,priority:r.priority,description:r.description,email:r.email,status:"Open",createdAt:new Date},T=await lu(w1(Mn,`users/${dn()}/supportQueries`),V);if(o)try{const F=ih(qu,`users/${dn()}/supportScreenshots/${T.id}/${o.name}`);await Nf(F,o);const L=await Af(F);await gu(Yn(Mn,`users/${dn()}/supportQueries`,T.id),{screenshotURL:L})}catch(F){console.error("Error uploading screenshot:",F),ce("Query submitted but screenshot failed to upload.")}ce("Your query has been submitted. We'll get back to you soon."),i({category:"Fees / Payments",priority:"Medium",description:"",email:r.email}),u(null),h(null)}catch(V){console.error("Error submitting support query:",V),ce("Failed to submit query. Please try again.")}finally{_(!1)}};return l.jsx(eo,{children:l.jsxs("div",{className:"feedback-support-container",children:[R&&l.jsx("div",{className:"toast-notification",children:x}),l.jsx("div",{className:"page-header",children:l.jsxs("div",{className:"header-content",children:[l.jsxs("div",{className:"header-text",children:[l.jsx("h1",{className:"page-title",children:"Feedback & Support"}),l.jsx("p",{className:"page-subtitle",children:"We value your feedback and are here to help."})]}),l.jsxs("button",{className:"back-button",onClick:()=>n(-1),children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),"Back"]})]})}),l.jsxs("div",{className:"feedback-support-content",children:[l.jsx("div",{className:"form-section",children:l.jsxs("div",{className:"form-card",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("div",{className:"form-icon",children:""}),l.jsx("h2",{className:"form-title",children:"Share Your Experience"})]}),l.jsxs("form",{onSubmit:H,className:"feedback-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Experience Rating"}),l.jsx("div",{className:"star-rating",children:[1,2,3,4,5].map(I=>l.jsx("span",{className:`star ${e.rating>=I?"filled":""}`,onClick:()=>q(I),children:""},I))})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Feedback Type"}),l.jsxs("select",{name:"type",value:e.type,onChange:k,className:"form-select",children:[l.jsx("option",{value:"Overall Experience",children:"Overall Experience"}),l.jsx("option",{value:"Feature Suggestion",children:"Feature Suggestion"}),l.jsx("option",{value:"UI / Design",children:"UI / Design"}),l.jsx("option",{value:"Performance",children:"Performance"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Feedback Message"}),l.jsx("textarea",{name:"message",value:e.message,onChange:k,placeholder:"Tell us what you liked or what we can improve",className:"form-textarea",rows:"4",required:!0})]}),l.jsx("button",{type:"submit",disabled:p||e.rating===0||!e.message.trim(),className:"submit-btn primary-btn",children:p?"Submitting...":"Submit Feedback"})]})]})}),l.jsx("div",{className:"form-section",children:l.jsxs("div",{className:"form-card",children:[l.jsxs("div",{className:"form-header",children:[l.jsx("div",{className:"form-icon",children:""}),l.jsx("h2",{className:"form-title",children:"Raise a Query"})]}),l.jsxs("form",{onSubmit:D,className:"support-form",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Query Category"}),l.jsxs("select",{name:"category",value:r.category,onChange:$,className:"form-select",children:[l.jsx("option",{value:"Fees / Payments",children:"Fees / Payments"}),l.jsx("option",{value:"Attendance",children:"Attendance"}),l.jsx("option",{value:"Salary",children:"Salary"}),l.jsx("option",{value:"Reports",children:"Reports"}),l.jsx("option",{value:"Technical Issue",children:"Technical Issue"}),l.jsx("option",{value:"Other",children:"Other"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Priority"}),l.jsxs("select",{name:"priority",value:r.priority,onChange:$,className:"form-select",children:[l.jsx("option",{value:"Low",children:"Low"}),l.jsx("option",{value:"Medium",children:"Medium"}),l.jsx("option",{value:"High",children:"High"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Query Description"}),l.jsx("textarea",{name:"description",value:r.description,onChange:$,placeholder:"Describe your issue or question in detail",className:"form-textarea",rows:"4",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Contact Email"}),l.jsx("input",{type:"email",name:"email",value:r.email,onChange:$,placeholder:"your.email@example.com",className:"form-input",required:!0})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{className:"form-label",children:"Screenshot (Optional)"}),l.jsxs("div",{className:"screenshot-upload",children:[l.jsx("input",{type:"file",id:"screenshot-upload",accept:"image/*",onChange:z,className:"screenshot-input"}),l.jsx("label",{htmlFor:"screenshot-upload",className:"screenshot-upload-label",children:o?"Change Screenshot":"Upload Screenshot"}),d&&l.jsxs("div",{className:"screenshot-preview",children:[l.jsx("img",{src:d,alt:"Preview",className:"preview-image"}),l.jsx("button",{type:"button",className:"remove-screenshot",onClick:oe,children:"Remove"})]})]})]}),l.jsx("button",{type:"submit",disabled:w||!r.description.trim()||!r.email.trim(),className:"submit-btn primary-btn",children:w?"Submitting...":"Submit Query"})]})]})})]}),l.jsx("div",{className:"support-info-section",children:l.jsxs("div",{className:"support-info-card",children:[l.jsxs("div",{className:"info-header",children:[l.jsx("h3",{children:"Need Immediate Help?"}),l.jsx("p",{children:"Our support team is here to assist you"})]}),l.jsxs("div",{className:"info-content",children:[l.jsxs("div",{className:"contact-item",children:[l.jsx("div",{className:"contact-icon",children:""}),l.jsxs("div",{className:"contact-details",children:[l.jsx("h4",{children:"Email Support"}),l.jsx("p",{children:"support@victorypointacademy.edu"})]})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("div",{className:"contact-icon",children:""}),l.jsxs("div",{className:"contact-details",children:[l.jsx("h4",{children:"Response Time"}),l.jsx("p",{children:"Within 24 hours"})]})]}),l.jsxs("div",{className:"contact-item",children:[l.jsx("div",{className:"contact-icon",children:""}),l.jsxs("div",{className:"contact-details",children:[l.jsx("h4",{children:"Follow-up"}),l.jsx("p",{children:"Track your query status in your profile"})]})]})]})]})})]})})};console.log(" Razorpay KEY:","rzp_live_S07LlOI5nBQYB1");console.log(" FINAL API_BASE USED:","https://us-central1-fees-management-system-70bb7.cloudfunctions.net/api");const Yy="https://us-central1-fees-management-system-70bb7.cloudfunctions.net/api",XM="rzp_live_S07LlOI5nBQYB1",QM=(n,e=499)=>new Promise((t,r)=>{(async()=>{try{console.log(" Starting payment for UID:",n),console.log(" API_BASE:",Yy);const i=await fetch(`${Yy}/create-order`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})});if(!i.ok)throw new Error(`Create order failed: ${i.status}`);const o=await i.json();if(console.log(" Order created:",o),!o||!o.id)throw new Error(" Invalid order received from backend");if(typeof window>"u"||!window.Razorpay)throw new Error(" Razorpay SDK not loaded");const u={key:XM,amount:o.amount,currency:o.currency,order_id:o.id,name:"Fees Management System",description:"Monthly PRO Subscription  499",handler:async function(h){try{console.log(" Payment success:",h);const p=await fetch(`${Yy}/verify-payment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...h,uid:n})}),m=await p.json();if(!p.ok||m.success!==!0)throw new Error(" Payment verification failed");console.log(" Payment verified & subscription activated"),t(m)}catch(p){console.error("Verification error:",p),r(p)}},modal:{ondismiss:()=>{r(new Error("Payment cancelled by user"))}},theme:{color:"#667eea"}};new window.Razorpay(u).open()}catch(i){console.error("Payment error:",i),r(i)}})()}),b4=async n=>{try{return await QM(n,499)}catch(e){throw e.message==="Payment cancelled by user"&&console.log(" User cancelled payment"),e}},JM=()=>{const{subscription:n,loading:e,refreshSubscription:t,isPaidUser:r,isTrialUser:i,isTrialExpired:o}=n2(),[u,d]=X.useState(!1),[h,p]=X.useState(""),[m,w]=X.useState(""),_=Vr();X.useEffect(()=>{if(r){_("/dashboard");return}},[r,_]),X.useEffect(()=>{n&&n.status==="active"&&n.isPaid!==!0||n&&n.status},[n,e]);const x=async()=>{if(r){console.log("Payment blocked: user already has active subscription"),p("You already have an active subscription. No payment required.");return}d(!0),p(""),w("");try{if(!pn.currentUser)throw new Error("User not authenticated");await b4(pn.currentUser.uid,!1),w("Payment successful! Your PRO access is now renewed for 30 days."),await t(),setTimeout(()=>{_("/dashboard")},2e3)}catch(k){console.error("Error processing payment:",k),k.message==="Payment cancelled by user"?p("Payment was cancelled. You can try again when ready."):p("Failed to process payment. Please try again.")}finally{d(!1)}};if(e)return l.jsx("div",{className:"login-container",style:{background:"#ffffff",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px"},children:l.jsx("div",{className:"login-card",style:{maxWidth:"700px",width:"100%",border:"1px solid #e0e0e0",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.1)",overflow:"hidden",maxHeight:"95vh",display:"flex",flexDirection:"column"},children:l.jsxs("div",{className:"subscribe-loading",children:[l.jsx("div",{className:"loading-logo",children:l.jsx("div",{className:"loading-logo-inner"})}),l.jsx("div",{className:"loading-text",children:"Loading subscription details..."})]})})});if(n&&n.status==="active"&&n.isPaid===!0)return l.jsx("div",{className:"login-container",style:{background:"#ffffff",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px"},children:l.jsx("div",{className:"login-card",style:{maxWidth:"700px",width:"100%",border:"1px solid #e0e0e0",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.1)",overflow:"hidden",maxHeight:"95vh",display:"flex",flexDirection:"column"},children:l.jsxs("div",{className:"subscribe-loading",children:[l.jsx("div",{className:"loading-logo",children:l.jsx("div",{className:"loading-logo-inner"})}),l.jsx("div",{className:"loading-text",children:"Redirecting to dashboard..."})]})})});const A=n?lA(n.trialEndsAt):0;return l.jsx("div",{className:"login-container",style:{background:"#ffffff",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"10px"},children:l.jsxs("div",{className:"login-card",style:{maxWidth:"700px",width:"100%",border:"1px solid #e0e0e0",borderRadius:"12px",boxShadow:"0 8px 24px rgba(0,0,0,0.1)",overflow:"hidden",maxHeight:"95vh",display:"flex",flexDirection:"column"},children:[l.jsxs("div",{style:{background:"#e3f2fd",color:"#2c3e50",padding:"20px",textAlign:"center",borderBottom:"1px solid #e0e0e0"},children:[l.jsx("h1",{style:{margin:0,fontSize:"1.8rem",fontWeight:"600"},children:" Unlock PRO Features"}),l.jsx("p",{style:{margin:"5px 0 0 0",color:"#7f8c8d"},children:"Upgrade to access all premium features"})]}),l.jsxs("div",{className:"subscription-info",style:{padding:"20px",flex:"1",overflowY:"auto"},children:[n&&n.status==="active"&&n.plan==="trial"&&A>0&&l.jsxs("div",{className:"trial-banner",style:{backgroundColor:"#d4edda",color:"#155724",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #c3e6cb",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:[l.jsx("strong",{children:" Free Trial Active!"})," You have ",A," days remaining.",l.jsx("br",{}),l.jsx("small",{children:"Subscribe now for 499/month to continue after trial ends."})]}),A<=0&&n&&n.status==="expired"&&l.jsxs("div",{className:"trial-banner",style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #f5c6cb",textAlign:"center",fontWeight:"500",fontSize:"0.9rem"},children:[l.jsx("strong",{children:" Trial Expired"})," Your free trial ended ",Math.abs(A)," days ago.",l.jsx("br",{}),l.jsx("small",{children:"Subscribe now for 499/month to continue using the service."})]}),l.jsxs("div",{className:"feature-list",style:{marginBottom:"20px"},children:[l.jsx("h3",{style:{color:"#2c3e50",textAlign:"center",marginBottom:"15px"},children:" Premium Features Include:"}),l.jsxs("ul",{style:{listStyle:"none",padding:0,textAlign:"left",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:[l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[l.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),l.jsx("span",{children:"Unlimited student records"})]}),l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[l.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),l.jsx("span",{children:"Advanced reporting & analytics"})]}),l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[l.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),l.jsx("span",{children:"Priority customer support"})]}),l.jsxs("li",{style:{display:"flex",alignItems:"flex-start",marginBottom:"8px",fontSize:"0.95rem"},children:[l.jsx("span",{style:{color:"#27ae60",marginRight:"8px",fontSize:"1.2rem"},children:""}),l.jsx("span",{children:"Custom branding options"})]})]})]}),l.jsxs("div",{className:"pricing-card",style:{background:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"8px",padding:"20px",textAlign:"center",marginBottom:"20px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:[l.jsx("h3",{style:{color:"#2c3e50",margin:"0 0 10px 0",fontSize:"1.3rem"},children:"Monthly Payment"}),l.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:"#2c3e50",marginBottom:"5px"},children:"499"}),l.jsx("div",{style:{color:"#7f8c8d",fontSize:"0.9rem",marginBottom:"15px"},children:"30 days access to all PRO features"}),l.jsx("p",{style:{color:"#e74c3c",fontSize:"0.85rem",fontStyle:"italic",margin:0},children:"Manual monthly payment - pay every 30 days"})]}),h&&l.jsx("div",{style:{backgroundColor:"#f8d7da",color:"#721c24",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #f5c6cb",textAlign:"center"},children:h}),m&&l.jsx("div",{style:{backgroundColor:"#d4edda",color:"#155724",padding:"12px",borderRadius:"6px",marginBottom:"15px",border:"1px solid #c3e6cb",textAlign:"center"},children:m}),l.jsx("button",{onClick:x,disabled:u||r,style:{width:"100%",padding:"15px",fontSize:"1.1rem",fontWeight:"600",borderRadius:"8px",background:r?"#95a5a6":"#667eea",border:"none",color:"white",cursor:u||r?"not-allowed":"pointer",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.2)",transition:"all 0.2s ease"},onMouseOver:R=>{!u&&!r&&(R.target.style.background="#5a67d8",R.target.style.transform="translateY(-1px)")},onMouseOut:R=>{r||(R.target.style.background="#667eea"),R.target.style.transform="translateY(0)"},children:u?l.jsxs("span",{children:[l.jsx("span",{className:"loading-spinner",style:{display:"inline-block",width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderRadius:"50%",borderTopColor:"white",animation:"spin 1s linear infinite",marginRight:"8px",verticalAlign:"middle"}}),"Processing..."]}):r?" PRO Active":o?" Renew PRO  499":" Upgrade to PRO  499"}),l.jsxs("div",{style:{textAlign:"center",marginTop:"15px",fontSize:"0.85rem",color:"#7f8c8d"},children:[l.jsx("p",{children:" Secure payment processing powered by Razorpay"}),l.jsx("p",{children:" You can use any debit/credit card, UPI, or net banking"})]})]})]})})},ZM=()=>{const[n,e]=X.useState(null),[t,r]=X.useState(null),[i,o]=X.useState(""),[u,d]=X.useState(!1);X.useEffect(()=>{const w=pn.onAuthStateChanged(_=>{e(_)});return()=>w()},[]);const h=async()=>{if(!n){o("No user logged in");return}try{const w=await Zc(n.uid);r(w),o("Subscription created successfully")}catch(w){console.error("Error creating subscription:",w),o("Error: "+w.message)}},p=async()=>{if(!n){o("No user logged in");return}try{const w=await cu(n.uid);r(w),o(w?"Subscription retrieved successfully":"No subscription found")}catch(w){console.error("Error getting subscription:",w),o("Error: "+w.message)}},m=async()=>{if(!n){o("No user logged in");return}d(!0);try{await b4(n.uid),o("Payment successful! Subscription upgraded successfully");const w=await cu(n.uid);r(w)}catch(w){console.error("Error processing payment:",w),w.message==="Payment cancelled by user"?o("Payment was cancelled. You can try again when ready."):o("Error processing payment: "+w.message)}finally{d(!1)}};return l.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif"},children:[l.jsx("h1",{children:"Subscription Test Component"}),n?l.jsxs("div",{children:[l.jsxs("p",{children:["Signed in as: ",n.email]}),l.jsxs("p",{children:["User ID: ",n.uid]}),l.jsxs("div",{style:{margin:"20px 0"},children:[l.jsx("button",{onClick:h,disabled:u,style:{margin:"5px",padding:"10px 15px"},children:"Create Subscription"}),l.jsx("button",{onClick:p,disabled:u,style:{margin:"5px",padding:"10px 15px"},children:"Get Subscription"}),l.jsx("button",{onClick:m,disabled:u,style:{margin:"5px",padding:"10px 15px"},children:u?"Processing Payment...":"Process Payment"})]})]}):l.jsx("p",{children:"No user logged in"}),t&&l.jsxs("div",{style:{margin:"20px 0",padding:"15px",background:"#f5f5f5",borderRadius:"5px"},children:[l.jsx("h3",{children:"Current Subscription:"}),l.jsx("pre",{children:JSON.stringify(t,null,2)})]}),i&&l.jsxs("div",{style:{margin:"10px 0",padding:"10px",background:i.includes("Error")?"#ffebee":"#e8f5e8",border:i.includes("Error")?"1px solid #f44336":"1px solid #4caf50",borderRadius:"4px"},children:[l.jsx("strong",{children:"Result:"})," ",i]}),l.jsxs("div",{style:{marginTop:"30px"},children:[l.jsx("h3",{children:"How to Test:"}),l.jsxs("ol",{children:[l.jsx("li",{children:"Make sure you're logged in"}),l.jsx("li",{children:'Click "Create Subscription" to create a trial subscription'}),l.jsx("li",{children:'Click "Process Payment" to simulate a payment and upgrade to PRO'}),l.jsx("li",{children:'Click "Get Subscription" to check current subscription status'})]})]})]})},Vi=({children:n})=>{const{hasActiveSub:e,loading:t,subscription:r,error:i}=n2(),o=Vr(),u=no();return X.useEffect(()=>{if(!pn.currentUser){o("/login");return}if(!pn.currentUser.emailVerified){o("/verify-email");return}i&&console.error("ProtectedRoute: Subscription context error:",i),!t&&!e&&u.pathname!=="/subscribe"&&o("/subscribe")},[e,t,o,u,r,i]),t&&u.pathname!=="/subscribe"?l.jsx("div",{className:"app-loading",children:l.jsxs("div",{className:"loading-spinner",children:[l.jsx("div",{className:"loading-logo",children:l.jsx("div",{className:"loading-logo-inner"})}),l.jsx("div",{className:"loading-text",children:"Checking access..."})]})}):!e&&u.pathname!=="/subscribe"?l.jsx("div",{className:"app-loading",children:l.jsxs("div",{className:"loading-spinner",children:[l.jsx("div",{className:"loading-logo",children:l.jsx("div",{className:"loading-logo-inner"})}),l.jsx("div",{className:"loading-spinner-text",children:"Redirecting to subscription page..."})]})}):n},eO=()=>{const n=Vr(),e=()=>{n("/dashboard")},t=()=>{n("/subscribe")};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("h1",{children:" Free Trial Activated!"}),l.jsx("p",{children:"You have 7 days to explore all premium features."})]}),l.jsxs("div",{className:"trial-options",children:[l.jsxs("div",{className:"option-card",onClick:e,children:[l.jsx("h3",{children:"Continue with Free Trial"}),l.jsx("p",{children:"Access all features for 7 days"}),l.jsx("button",{className:"btn-primary",children:"Start Free Trial"})]}),l.jsxs("div",{className:"option-card",onClick:t,children:[l.jsx("h3",{children:"Upgrade to PRO 499"}),l.jsx("p",{children:"Unlock unlimited access forever"}),l.jsx("button",{className:"btn-secondary",children:"Upgrade Now"})]})]}),l.jsx("div",{className:"login-footer",children:l.jsx("p",{children:"No credit card required for trial"})})]})})},tO=()=>{const[n,e]=X.useState(null),[t,r]=X.useState(null),[i,o]=X.useState(!1);return X.useEffect(()=>{(async()=>{if(!pn.currentUser){r("No user logged in");return}o(!0);try{console.log("Testing subscription creation for user:",pn.currentUser.uid);const d=await cu(pn.currentUser.uid);if(console.log("Existing subscription:",d),d)e(d);else{console.log("Creating new subscription...");const h=await Zc(pn.currentUser.uid);console.log("New subscription created:",h),e(h)}}catch(d){console.error("Error in test:",d),r(d.message)}finally{o(!1)}})()},[]),l.jsxs("div",{style:{padding:"20px"},children:[l.jsx("h2",{children:"Subscription Test"}),i&&l.jsx("p",{children:"Testing subscription creation..."}),t&&l.jsxs("p",{style:{color:"red"},children:["Error: ",t]}),n&&l.jsxs("div",{children:[l.jsx("p",{style:{color:"green"},children:"Success!"}),l.jsx("pre",{children:JSON.stringify(n,null,2)})]})]})},nO=()=>{const[n,e]=X.useState(""),[t,r]=X.useState(30),[i,o]=X.useState(!1),[u,d]=X.useState(!1),h=Vr();X.useEffect(()=>{(async()=>{const A=pn.currentUser;if(!A){h("/login");return}if(A.emailVerified){h("/dashboard");return}})();const x=setInterval(()=>{r(A=>A<=1?(o(!0),clearInterval(x),0):A-1)},1e3);return()=>clearInterval(x)},[h]);const p=async()=>{if(!(!i||u)){d(!0),e("");try{const _=pn.currentUser;if(!_){e("No user is currently logged in.");return}await iv(_),e("Verification email sent successfully! Please check your inbox (and spam folder)."),o(!1),r(30);const x=setInterval(()=>{r(A=>A<=1?(o(!0),clearInterval(x),0):A-1)},1e3)}catch(_){console.error("Error sending verification email:",_),e(`Error: ${_.message}`)}finally{d(!1)}}},m=async()=>{try{await ep(pn),h("/login")}catch(_){console.error("Error signing out:",_)}},w=()=>{window.location.reload()};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",children:[l.jsxs("div",{className:"login-header",children:[l.jsx("h2",{children:"Email Verification Required"}),l.jsx("p",{className:"login-subtitle",children:"Please verify your email address to continue"})]}),l.jsxs("div",{className:"verification-info",children:[l.jsx("div",{className:"verification-icon",children:""}),l.jsx("h3",{children:"Verify Your Email"}),l.jsx("div",{className:"email-display",children:l.jsx("strong",{children:pn.currentUser?.email})}),l.jsx("p",{children:"Please check your inbox and click the verification link."})]}),l.jsxs("div",{className:"verification-actions",children:[l.jsx("button",{className:`btn-primary ${!i||u?"btn-disabled":""}`,onClick:p,disabled:!i||u,children:u?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"loading-spinner"})," Sending..."]}):i?"Resend Verification Email":`Resend in ${t}s`}),l.jsxs("button",{className:"btn-secondary",onClick:m,children:[l.jsx("span",{children:""})," Sign Out"]}),l.jsxs("button",{className:"btn-tertiary",onClick:w,children:[l.jsx("span",{children:""})," I've Verified - Refresh"]})]}),n&&l.jsx("div",{className:`message ${n.includes("Error")?"error":"success"}`,children:n}),l.jsxs("div",{className:"verification-help",children:[l.jsx("h4",{children:"Didn't receive it?"}),l.jsxs("ul",{children:[l.jsx("li",{children:" Check spam folder"}),l.jsx("li",{children:" Add to contacts"})]})]})]})})},rO=()=>{const n=Vr(),e=()=>{n(-1)};return l.jsx("div",{className:"login-container",children:l.jsxs("div",{className:"login-card",style:{maxWidth:"800px",padding:"40px",textAlign:"left"},children:[l.jsxs("div",{className:"login-header",style:{textAlign:"left",marginBottom:"20px"},children:[l.jsx("h1",{style:{fontSize:"1.8rem",marginBottom:"10px"},children:"Terms and Conditions"}),l.jsx("p",{style:{color:"#7f8c8d",margin:0},children:"Please read these terms carefully before using our service"})]}),l.jsxs("div",{className:"terms-content",style:{maxHeight:"60vh",overflowY:"auto",paddingRight:"10px"},children:[l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"1. Introduction"}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"Welcome to our fees management platform. These terms and conditions outline the rules and regulations for the use of our service."})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"2. User Responsibilities"}),l.jsxs("ul",{style:{color:"#34495e",lineHeight:"1.6",paddingLeft:"20px",marginBottom:"10px"},children:[l.jsx("li",{style:{marginBottom:"8px"},children:"Maintain the accuracy of your account information"}),l.jsx("li",{style:{marginBottom:"8px"},children:"Keep your login credentials secure"}),l.jsx("li",{style:{marginBottom:"8px"},children:"Report any unauthorized access to your account"}),l.jsx("li",{style:{marginBottom:"8px"},children:"Use the service in compliance with applicable laws"})]})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"3. Data Privacy"}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"We are committed to protecting your privacy. All personal and financial data is stored securely using industry-standard encryption."}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"Your data is used solely for the purpose of providing our fees management services and will not be shared with third parties without your consent."})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"4. Service Availability"}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"We strive to maintain service availability, but cannot guarantee 100% uptime. Scheduled maintenance will be communicated in advance when possible."})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"5. Subscription and Payment"}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"Our service operates on a subscription model. You will be charged according to the plan you select. All charges are non-refundable unless otherwise stated."})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"6. Limitation of Liability"}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"Our liability is limited to the extent permitted by law. We are not responsible for any indirect, incidental, or consequential damages arising from your use of our service."})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"7. Changes to Terms"}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"We reserve the right to modify these terms at any time. Continued use of the service after changes constitutes acceptance of the updated terms."})]}),l.jsxs("div",{style:{marginBottom:"20px"},children:[l.jsx("h2",{style:{color:"#2c3e50",fontSize:"1.3rem",marginBottom:"10px"},children:"8. Contact Information"}),l.jsx("p",{style:{color:"#34495e",lineHeight:"1.6",marginBottom:"10px"},children:"If you have any questions about these terms, please contact us at support@feesmanager.com"})]})]}),l.jsx("div",{style:{textAlign:"center",marginTop:"20px"},children:l.jsx("button",{onClick:e,className:"switch-auth",style:{padding:"12px 24px",fontSize:"16px",fontWeight:"600"},children:"Back to Sign Up"})})]})})},sO=()=>{const n=no(),e=Vr(),[t,r]=X.useState({show:!1,message:""}),[i,o]=X.useState(new Date);X.useEffect(()=>{const A=()=>{o(new Date)};return window.addEventListener("paymentAdded",A),window.addEventListener("paymentRecorded",A),window.addEventListener("paymentUpdated",A),window.addEventListener("paymentDeleted",A),window.addEventListener("studentsUpdated",A),window.addEventListener("dashboardRefresh",A),window.addEventListener("paymentsRefresh",A),window.addEventListener("studentAdded",A),window.addEventListener("studentUpdated",A),window.addEventListener("studentDeleted",A),window.addEventListener("expenseAdded",A),window.addEventListener("expenseUpdated",A),window.addEventListener("expenseDeleted",A),()=>{window.removeEventListener("paymentAdded",A),window.removeEventListener("paymentRecorded",A),window.removeEventListener("paymentUpdated",A),window.removeEventListener("paymentDeleted",A),window.removeEventListener("studentsUpdated",A),window.removeEventListener("dashboardRefresh",A),window.removeEventListener("paymentsRefresh",A),window.removeEventListener("studentAdded",A),window.removeEventListener("studentUpdated",A),window.removeEventListener("studentDeleted",A),window.removeEventListener("expenseAdded",A),window.removeEventListener("expenseUpdated",A),window.removeEventListener("expenseDeleted",A)}},[]);const u=()=>{switch(n.pathname){case"/":case"/dashboard":return"dashboard";case"/students":return"students";case"/student-details":return"students";case"/fees":return"fees";case"/expenses":return"expenses";case"/profile":return"profile";case"/settings":return"settings";case"/attendance":return"attendance";default:return"dashboard"}},[d,h]=X.useState(u()),p=A=>{const C=Math.floor((new Date-A)/1e3);if(C<60)return`${C} seconds ago`;const k=Math.floor(C/60);if(k<60)return`${k} minute${k!==1?"s":""} ago`;const q=Math.floor(k/60);if(q<24)return`${q} hour${q!==1?"s":""} ago`;const $=Math.floor(q/24);return`${$} day${$!==1?"s":""} ago`};X.useEffect(()=>{h(u())},[n]),X.useEffect(()=>{const A=R=>{const{message:C}=R.detail;r({show:!0,message:C}),setTimeout(()=>{r({show:!1,message:""})},3e3)};return window.addEventListener("showSuccess",A),()=>{window.removeEventListener("showSuccess",A)}},[]);const m=A=>{switch(h(A),A){case"dashboard":e("/dashboard");break;case"students":e("/students");break;case"fees":e("/fees");break;case"expenses":e("/expenses");break;case"attendance":e("/attendance");break;case"profile":e("/profile");break;case"settings":e("/settings");break;default:e("/dashboard")}},w=async()=>{try{await ep(pn),localStorage.removeItem("isLoggedIn"),e("/login")}catch(A){console.error("Error signing out:",A)}},_=A=>{switch(A){case"dashboard":return"";case"students":return"";case"fees":return"";case"expenses":return"";case"attendance":return"";case"profile":return"";case"settings":return"";default:return""}},x=A=>{switch(A){case"dashboard":return"Dashboard";case"students":return"Students";case"fees":return"Fees";case"expenses":return"Expenses";case"attendance":return"Attendance";case"profile":return"Profile";case"settings":return"Settings";default:return"Home"}};return l.jsxs("div",{className:"app",children:[t.show&&l.jsx("div",{className:`notification ${t.type}`,children:t.message}),l.jsxs("div",{className:"sidebar",children:[["dashboard","students","fees","expenses","attendance","profile","settings"].map(A=>l.jsxs("button",{className:`nav-item ${d===A?"active":""}`,onClick:()=>m(A),"data-tooltip":x(A),children:[l.jsx("div",{className:"nav-icon-container",children:l.jsx("span",{className:"nav-icon",children:_(A)})}),l.jsx("span",{className:"nav-label",children:x(A)})]},A)),l.jsxs("button",{className:"logout-btn",onClick:w,"data-tooltip":"Logout",children:[l.jsx("div",{className:"logout-icon-container",children:l.jsx("span",{className:"logout-icon",children:""})}),l.jsx("span",{className:"logout-label",children:"Logout"})]})]}),l.jsx("div",{className:"main-content",children:l.jsxs(CT,{children:[l.jsx(kr,{path:"/",element:l.jsx(Vi,{children:l.jsx(Nw,{})})}),l.jsx(kr,{path:"/dashboard",element:l.jsx(Vi,{children:l.jsx(Nw,{})})}),l.jsx(kr,{path:"/students",element:l.jsx(Vi,{children:l.jsx(UM,{})})}),l.jsx(kr,{path:"/student-details",element:l.jsx(Vi,{children:l.jsx(BM,{})})}),l.jsx(kr,{path:"/fees",element:l.jsx(Vi,{children:l.jsx(VM,{})})}),l.jsx(kr,{path:"/expenses",element:l.jsx(Vi,{children:l.jsx(KS,{})})}),l.jsx(kr,{path:"/expense-form",element:l.jsx(Vi,{children:l.jsx(zM,{})})}),l.jsx(kr,{path:"/monthly-expenses",element:l.jsx(Vi,{children:l.jsx(KS,{})})}),l.jsx(kr,{path:"/profile",element:l.jsx(Vi,{children:l.jsx(qM,{})})}),l.jsx(kr,{path:"/settings",element:l.jsx(Vi,{children:l.jsx(HM,{})})}),l.jsx(kr,{path:"/attendance",element:l.jsx(Vi,{children:l.jsx($M,{})})}),l.jsx(kr,{path:"/collection-trend",element:l.jsx(Vi,{children:l.jsx(GM,{})})}),l.jsx(kr,{path:"/budget-management",element:l.jsx(Vi,{children:l.jsx(WM,{})})}),l.jsx(kr,{path:"/expense-trend",element:l.jsx(Vi,{children:l.jsx(YM,{})})}),l.jsx(kr,{path:"/feedback-support",element:l.jsx(Vi,{children:l.jsx(KM,{})})}),l.jsx(kr,{path:"/subscribe",element:l.jsx(JM,{})}),l.jsx(kr,{path:"/free-trial-continue",element:l.jsx(eO,{})}),l.jsx(kr,{path:"/test-subscription",element:l.jsx(ZM,{})}),l.jsx(kr,{path:"/test-subscription-creation",element:l.jsx(tO,{})}),l.jsx(kr,{path:"/verify-email",element:l.jsx(nO,{})}),l.jsx(kr,{path:"/signup",element:l.jsx(y4,{})}),l.jsx(kr,{path:"/login-new",element:l.jsx(v4,{})}),l.jsx(kr,{path:"/terms-and-conditions",element:l.jsx(rO,{})})]})}),l.jsxs("div",{className:"footer-summary",children:[l.jsxs("div",{className:"footer-left",children:[l.jsxs("span",{children:["Last updated: ",p(i)]}),l.jsxs("div",{className:"sync-status",children:[l.jsx("span",{className:"sync-indicator"}),l.jsx("span",{children:"Data synced"})]})]}),l.jsx("div",{className:"footer-right",children:l.jsx("span",{children:" 2025 Victory Point Academy"})})]})]})},iO=()=>{const n=no(),e=Vr(),[t,r]=X.useState(()=>localStorage.getItem("isLoggedIn")==="true"),[i,o]=X.useState(!0);return X.useEffect(()=>{localStorage.getItem("darkMode")==="true"&&document.documentElement.setAttribute("data-theme","dark")},[]),X.useEffect(()=>{const u=av(pn,d=>{d?(r(!0),localStorage.setItem("isLoggedIn","true"),localStorage.removeItem("freshLogin")):(r(!1),localStorage.removeItem("isLoggedIn")),o(!1)});return()=>u()},[]),i?l.jsx("div",{className:"app-loading",children:l.jsxs("div",{className:"loading-spinner",children:[l.jsx("div",{className:"loading-logo",children:l.jsx("div",{className:"loading-logo-inner"})}),l.jsx("div",{className:"loading-spinner-text",children:"Loading and checking access..."})]})}):(t&&n.pathname==="/login"&&e("/dashboard"),t?l.jsx(sO,{}):n.pathname==="/signup"?l.jsx(y4,{}):n.pathname==="/login-new"?l.jsx(v4,{}):n.pathname!=="/login"?(e("/login"),l.jsx(QS,{})):l.jsx(QS,{}))};function aO(){return l.jsx(JT,{children:l.jsx(u8,{children:l.jsx(iO,{})})})}O3.createRoot(document.getElementById("root")).render(l.jsx(R3.StrictMode,{children:l.jsx(aO,{})}));export{rr as _,oO as c,JS as g};
